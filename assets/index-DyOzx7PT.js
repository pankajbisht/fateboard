(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Om(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Vy(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var e=l.default;if(typeof e=="function"){var t=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(l).forEach(function(n){var s=Object.getOwnPropertyDescriptor(l,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return l[n]}})}),t}var Hf={exports:{}},ml={},Xf={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function Wy(){if(f0)return Wt;f0=1;var l=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),O=Symbol.iterator;function F(we){return we===null||typeof we!="object"?null:(we=O&&we[O]||we["@@iterator"],typeof we=="function"?we:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,N={};function $(we,Fe,_t){this.props=we,this.context=Fe,this.refs=N,this.updater=_t||E}$.prototype.isReactComponent={},$.prototype.setState=function(we,Fe){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,Fe,"setState")},$.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function ee(){}ee.prototype=$.prototype;function ae(we,Fe,_t){this.props=we,this.context=Fe,this.refs=N,this.updater=_t||E}var ue=ae.prototype=new ee;ue.constructor=ae,Z(ue,$.prototype),ue.isPureReactComponent=!0;var xe=Array.isArray,Ce=Object.prototype.hasOwnProperty,z={current:null},Ve={key:!0,ref:!0,__self:!0,__source:!0};function He(we,Fe,_t){var Ct,pt={},Mt=null,zt=null;if(Fe!=null)for(Ct in Fe.ref!==void 0&&(zt=Fe.ref),Fe.key!==void 0&&(Mt=""+Fe.key),Fe)Ce.call(Fe,Ct)&&!Ve.hasOwnProperty(Ct)&&(pt[Ct]=Fe[Ct]);var Ut=arguments.length-2;if(Ut===1)pt.children=_t;else if(1<Ut){for(var yt=Array(Ut),At=0;At<Ut;At++)yt[At]=arguments[At+2];pt.children=yt}if(we&&we.defaultProps)for(Ct in Ut=we.defaultProps,Ut)pt[Ct]===void 0&&(pt[Ct]=Ut[Ct]);return{$$typeof:l,type:we,key:Mt,ref:zt,props:pt,_owner:z.current}}function Je(we,Fe){return{$$typeof:l,type:we.type,key:Fe,ref:we.ref,props:we.props,_owner:we._owner}}function ut(we){return typeof we=="object"&&we!==null&&we.$$typeof===l}function Ie(we){var Fe={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(_t){return Fe[_t]})}var Ke=/\/+/g;function dt(we,Fe){return typeof we=="object"&&we!==null&&we.key!=null?Ie(""+we.key):Fe.toString(36)}function ze(we,Fe,_t,Ct,pt){var Mt=typeof we;(Mt==="undefined"||Mt==="boolean")&&(we=null);var zt=!1;if(we===null)zt=!0;else switch(Mt){case"string":case"number":zt=!0;break;case"object":switch(we.$$typeof){case l:case e:zt=!0}}if(zt)return zt=we,pt=pt(zt),we=Ct===""?"."+dt(zt,0):Ct,xe(pt)?(_t="",we!=null&&(_t=we.replace(Ke,"$&/")+"/"),ze(pt,Fe,_t,"",function(At){return At})):pt!=null&&(ut(pt)&&(pt=Je(pt,_t+(!pt.key||zt&&zt.key===pt.key?"":(""+pt.key).replace(Ke,"$&/")+"/")+we)),Fe.push(pt)),1;if(zt=0,Ct=Ct===""?".":Ct+":",xe(we))for(var Ut=0;Ut<we.length;Ut++){Mt=we[Ut];var yt=Ct+dt(Mt,Ut);zt+=ze(Mt,Fe,_t,yt,pt)}else if(yt=F(we),typeof yt=="function")for(we=yt.call(we),Ut=0;!(Mt=we.next()).done;)Mt=Mt.value,yt=Ct+dt(Mt,Ut++),zt+=ze(Mt,Fe,_t,yt,pt);else if(Mt==="object")throw Fe=String(we),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.");return zt}function Bt(we,Fe,_t){if(we==null)return we;var Ct=[],pt=0;return ze(we,Ct,"","",function(Mt){return Fe.call(_t,Mt,pt++)}),Ct}function Le(we){if(we._status===-1){var Fe=we._result;Fe=Fe(),Fe.then(function(_t){(we._status===0||we._status===-1)&&(we._status=1,we._result=_t)},function(_t){(we._status===0||we._status===-1)&&(we._status=2,we._result=_t)}),we._status===-1&&(we._status=0,we._result=Fe)}if(we._status===1)return we._result.default;throw we._result}var wt={current:null},Be={transition:null},Xe={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Be,ReactCurrentOwner:z};function Ze(){throw Error("act(...) is not supported in production builds of React.")}return Wt.Children={map:Bt,forEach:function(we,Fe,_t){Bt(we,function(){Fe.apply(this,arguments)},_t)},count:function(we){var Fe=0;return Bt(we,function(){Fe++}),Fe},toArray:function(we){return Bt(we,function(Fe){return Fe})||[]},only:function(we){if(!ut(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},Wt.Component=$,Wt.Fragment=t,Wt.Profiler=s,Wt.PureComponent=ae,Wt.StrictMode=n,Wt.Suspense=v,Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xe,Wt.act=Ze,Wt.cloneElement=function(we,Fe,_t){if(we==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+we+".");var Ct=Z({},we.props),pt=we.key,Mt=we.ref,zt=we._owner;if(Fe!=null){if(Fe.ref!==void 0&&(Mt=Fe.ref,zt=z.current),Fe.key!==void 0&&(pt=""+Fe.key),we.type&&we.type.defaultProps)var Ut=we.type.defaultProps;for(yt in Fe)Ce.call(Fe,yt)&&!Ve.hasOwnProperty(yt)&&(Ct[yt]=Fe[yt]===void 0&&Ut!==void 0?Ut[yt]:Fe[yt])}var yt=arguments.length-2;if(yt===1)Ct.children=_t;else if(1<yt){Ut=Array(yt);for(var At=0;At<yt;At++)Ut[At]=arguments[At+2];Ct.children=Ut}return{$$typeof:l,type:we.type,key:pt,ref:Mt,props:Ct,_owner:zt}},Wt.createContext=function(we){return we={$$typeof:h,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},we.Provider={$$typeof:a,_context:we},we.Consumer=we},Wt.createElement=He,Wt.createFactory=function(we){var Fe=He.bind(null,we);return Fe.type=we,Fe},Wt.createRef=function(){return{current:null}},Wt.forwardRef=function(we){return{$$typeof:p,render:we}},Wt.isValidElement=ut,Wt.lazy=function(we){return{$$typeof:b,_payload:{_status:-1,_result:we},_init:Le}},Wt.memo=function(we,Fe){return{$$typeof:y,type:we,compare:Fe===void 0?null:Fe}},Wt.startTransition=function(we){var Fe=Be.transition;Be.transition={};try{we()}finally{Be.transition=Fe}},Wt.unstable_act=Ze,Wt.useCallback=function(we,Fe){return wt.current.useCallback(we,Fe)},Wt.useContext=function(we){return wt.current.useContext(we)},Wt.useDebugValue=function(){},Wt.useDeferredValue=function(we){return wt.current.useDeferredValue(we)},Wt.useEffect=function(we,Fe){return wt.current.useEffect(we,Fe)},Wt.useId=function(){return wt.current.useId()},Wt.useImperativeHandle=function(we,Fe,_t){return wt.current.useImperativeHandle(we,Fe,_t)},Wt.useInsertionEffect=function(we,Fe){return wt.current.useInsertionEffect(we,Fe)},Wt.useLayoutEffect=function(we,Fe){return wt.current.useLayoutEffect(we,Fe)},Wt.useMemo=function(we,Fe){return wt.current.useMemo(we,Fe)},Wt.useReducer=function(we,Fe,_t){return wt.current.useReducer(we,Fe,_t)},Wt.useRef=function(we){return wt.current.useRef(we)},Wt.useState=function(we){return wt.current.useState(we)},Wt.useSyncExternalStore=function(we,Fe,_t){return wt.current.useSyncExternalStore(we,Fe,_t)},Wt.useTransition=function(){return wt.current.useTransition()},Wt.version="18.3.1",Wt}var d0;function Ld(){return d0||(d0=1,Xf.exports=Wy()),Xf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function Uy(){if(p0)return ml;p0=1;var l=Ld(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function h(p,v,y){var b,O={},F=null,E=null;y!==void 0&&(F=""+y),v.key!==void 0&&(F=""+v.key),v.ref!==void 0&&(E=v.ref);for(b in v)n.call(v,b)&&!a.hasOwnProperty(b)&&(O[b]=v[b]);if(p&&p.defaultProps)for(b in v=p.defaultProps,v)O[b]===void 0&&(O[b]=v[b]);return{$$typeof:e,type:p,key:F,ref:E,props:O,_owner:s.current}}return ml.Fragment=t,ml.jsx=h,ml.jsxs=h,ml}var g0;function Hy(){return g0||(g0=1,Hf.exports=Uy()),Hf.exports}var K=Hy(),Te=Ld();const ko=Om(Te);var pc={},Yf={exports:{}},Ar={},Gf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function Xy(){return m0||(m0=1,(function(l){function e(Be,Xe){var Ze=Be.length;Be.push(Xe);e:for(;0<Ze;){var we=Ze-1>>>1,Fe=Be[we];if(0<s(Fe,Xe))Be[we]=Xe,Be[Ze]=Fe,Ze=we;else break e}}function t(Be){return Be.length===0?null:Be[0]}function n(Be){if(Be.length===0)return null;var Xe=Be[0],Ze=Be.pop();if(Ze!==Xe){Be[0]=Ze;e:for(var we=0,Fe=Be.length,_t=Fe>>>1;we<_t;){var Ct=2*(we+1)-1,pt=Be[Ct],Mt=Ct+1,zt=Be[Mt];if(0>s(pt,Ze))Mt<Fe&&0>s(zt,pt)?(Be[we]=zt,Be[Mt]=Ze,we=Mt):(Be[we]=pt,Be[Ct]=Ze,we=Ct);else if(Mt<Fe&&0>s(zt,Ze))Be[we]=zt,Be[Mt]=Ze,we=Mt;else break e}}return Xe}function s(Be,Xe){var Ze=Be.sortIndex-Xe.sortIndex;return Ze!==0?Ze:Be.id-Xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var h=Date,p=h.now();l.unstable_now=function(){return h.now()-p}}var v=[],y=[],b=1,O=null,F=3,E=!1,Z=!1,N=!1,$=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(Be){for(var Xe=t(y);Xe!==null;){if(Xe.callback===null)n(y);else if(Xe.startTime<=Be)n(y),Xe.sortIndex=Xe.expirationTime,e(v,Xe);else break;Xe=t(y)}}function xe(Be){if(N=!1,ue(Be),!Z)if(t(v)!==null)Z=!0,Le(Ce);else{var Xe=t(y);Xe!==null&&wt(xe,Xe.startTime-Be)}}function Ce(Be,Xe){Z=!1,N&&(N=!1,ee(He),He=-1),E=!0;var Ze=F;try{for(ue(Xe),O=t(v);O!==null&&(!(O.expirationTime>Xe)||Be&&!Ie());){var we=O.callback;if(typeof we=="function"){O.callback=null,F=O.priorityLevel;var Fe=we(O.expirationTime<=Xe);Xe=l.unstable_now(),typeof Fe=="function"?O.callback=Fe:O===t(v)&&n(v),ue(Xe)}else n(v);O=t(v)}if(O!==null)var _t=!0;else{var Ct=t(y);Ct!==null&&wt(xe,Ct.startTime-Xe),_t=!1}return _t}finally{O=null,F=Ze,E=!1}}var z=!1,Ve=null,He=-1,Je=5,ut=-1;function Ie(){return!(l.unstable_now()-ut<Je)}function Ke(){if(Ve!==null){var Be=l.unstable_now();ut=Be;var Xe=!0;try{Xe=Ve(!0,Be)}finally{Xe?dt():(z=!1,Ve=null)}}else z=!1}var dt;if(typeof ae=="function")dt=function(){ae(Ke)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Bt=ze.port2;ze.port1.onmessage=Ke,dt=function(){Bt.postMessage(null)}}else dt=function(){$(Ke,0)};function Le(Be){Ve=Be,z||(z=!0,dt())}function wt(Be,Xe){He=$(function(){Be(l.unstable_now())},Xe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Be){Be.callback=null},l.unstable_continueExecution=function(){Z||E||(Z=!0,Le(Ce))},l.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Je=0<Be?Math.floor(1e3/Be):5},l.unstable_getCurrentPriorityLevel=function(){return F},l.unstable_getFirstCallbackNode=function(){return t(v)},l.unstable_next=function(Be){switch(F){case 1:case 2:case 3:var Xe=3;break;default:Xe=F}var Ze=F;F=Xe;try{return Be()}finally{F=Ze}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Be,Xe){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Ze=F;F=Be;try{return Xe()}finally{F=Ze}},l.unstable_scheduleCallback=function(Be,Xe,Ze){var we=l.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?we+Ze:we):Ze=we,Be){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=Ze+Fe,Be={id:b++,callback:Xe,priorityLevel:Be,startTime:Ze,expirationTime:Fe,sortIndex:-1},Ze>we?(Be.sortIndex=Ze,e(y,Be),t(v)===null&&Be===t(y)&&(N?(ee(He),He=-1):N=!0,wt(xe,Ze-we))):(Be.sortIndex=Fe,e(v,Be),Z||E||(Z=!0,Le(Ce))),Be},l.unstable_shouldYield=Ie,l.unstable_wrapCallback=function(Be){var Xe=F;return function(){var Ze=F;F=Xe;try{return Be.apply(this,arguments)}finally{F=Ze}}}})(qf)),qf}var v0;function Yy(){return v0||(v0=1,Gf.exports=Xy()),Gf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function Gy(){if(_0)return Ar;_0=1;var l=Ld(),e=Yy();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){h(i,o),h(i+"Capture",o)}function h(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},O={};function F(i){return v.call(O,i)?!0:v.call(b,i)?!1:y.test(i)?O[i]=!0:(b[i]=!0,!1)}function E(i,o,d,_){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return _?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Z(i,o,d,_){if(o===null||typeof o>"u"||E(i,o,d,_))return!0;if(_)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function N(i,o,d,_,k,M,J){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=_,this.attributeNamespace=k,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=M,this.removeEmptyString=J}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){$[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];$[o]=new N(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){$[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){$[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){$[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){$[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){$[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){$[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){$[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function ae(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ee,ae);$[o]=new N(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ee,ae);$[o]=new N(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ee,ae);$[o]=new N(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){$[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),$.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){$[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function ue(i,o,d,_){var k=$.hasOwnProperty(o)?$[o]:null;(k!==null?k.type!==0:_||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Z(o,d,k,_)&&(d=null),_||k===null?F(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):k.mustUseProperty?i[k.propertyName]=d===null?k.type===3?!1:"":d:(o=k.attributeName,_=k.attributeNamespace,d===null?i.removeAttribute(o):(k=k.type,d=k===3||k===4&&d===!0?"":""+d,_?i.setAttributeNS(_,o,d):i.setAttribute(o,d))))}var xe=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ce=Symbol.for("react.element"),z=Symbol.for("react.portal"),Ve=Symbol.for("react.fragment"),He=Symbol.for("react.strict_mode"),Je=Symbol.for("react.profiler"),ut=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Ke=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),Bt=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),wt=Symbol.for("react.offscreen"),Be=Symbol.iterator;function Xe(i){return i===null||typeof i!="object"?null:(i=Be&&i[Be]||i["@@iterator"],typeof i=="function"?i:null)}var Ze=Object.assign,we;function Fe(i){if(we===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);we=o&&o[1]||""}return`
`+we+i}var _t=!1;function Ct(i,o){if(!i||_t)return"";_t=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Ae){var _=Ae}Reflect.construct(i,[],o)}else{try{o.call()}catch(Ae){_=Ae}i.call(o.prototype)}else{try{throw Error()}catch(Ae){_=Ae}i()}}catch(Ae){if(Ae&&_&&typeof Ae.stack=="string"){for(var k=Ae.stack.split(`
`),M=_.stack.split(`
`),J=k.length-1,le=M.length-1;1<=J&&0<=le&&k[J]!==M[le];)le--;for(;1<=J&&0<=le;J--,le--)if(k[J]!==M[le]){if(J!==1||le!==1)do if(J--,le--,0>le||k[J]!==M[le]){var me=`
`+k[J].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=J&&0<=le);break}}}finally{_t=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?Fe(i):""}function pt(i){switch(i.tag){case 5:return Fe(i.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return i=Ct(i.type,!1),i;case 11:return i=Ct(i.type.render,!1),i;case 1:return i=Ct(i.type,!0),i;default:return""}}function Mt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Ve:return"Fragment";case z:return"Portal";case Je:return"Profiler";case He:return"StrictMode";case dt:return"Suspense";case ze:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ie:return(i.displayName||"Context")+".Consumer";case ut:return(i._context.displayName||"Context")+".Provider";case Ke:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Bt:return o=i.displayName||null,o!==null?o:Mt(i.type)||"Memo";case Le:o=i._payload,i=i._init;try{return Mt(i(o))}catch{}}return null}function zt(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mt(o);case 8:return o===He?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ut(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function yt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function At(i){var o=yt(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),_=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var k=d.get,M=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return k.call(this)},set:function(J){_=""+J,M.call(this,J)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return _},setValue:function(J){_=""+J},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function en(i){i._valueTracker||(i._valueTracker=At(i))}function oa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),_="";return i&&(_=yt(i)?i.checked?"true":"false":i.value),i=_,i!==d?(o.setValue(i),!0):!1}function Rr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ks(i,o){var d=o.checked;return Ze({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function Li(i,o){var d=o.defaultValue==null?"":o.defaultValue,_=o.checked!=null?o.checked:o.defaultChecked;d=Ut(o.value!=null?o.value:d),i._wrapperState={initialChecked:_,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function la(i,o){o=o.checked,o!=null&&ue(i,"checked",o,!1)}function Fr(i,o){la(i,o);var d=Ut(o.value),_=o.type;if(d!=null)_==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(_==="submit"||_==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ri(i,o.type,d):o.hasOwnProperty("defaultValue")&&Ri(i,o.type,Ut(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Di(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var _=o.type;if(!(_!=="submit"&&_!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Ri(i,o,d){(o!=="number"||Rr(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var qr=Array.isArray;function tn(i,o,d,_){if(i=i.options,o){o={};for(var k=0;k<d.length;k++)o["$"+d[k]]=!0;for(d=0;d<i.length;d++)k=o.hasOwnProperty("$"+i[d].value),i[d].selected!==k&&(i[d].selected=k),k&&_&&(i[d].defaultSelected=!0)}else{for(d=""+Ut(d),o=null,k=0;k<i.length;k++){if(i[k].value===d){i[k].selected=!0,_&&(i[k].defaultSelected=!0);return}o!==null||i[k].disabled||(o=i[k])}o!==null&&(o.selected=!0)}}function fi(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ze({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Yt(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(qr(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:Ut(d)}}function Ts(i,o){var d=Ut(o.value),_=Ut(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),_!=null&&(i.defaultValue=""+_)}function Ft(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function r(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function u(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?r(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var f,g=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,_,k){MSApp.execUnsafeLocalFunction(function(){return i(o,d,_,k)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(f=f||document.createElement("div"),f.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=f.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function m(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var w={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S=["Webkit","ms","Moz","O"];Object.keys(w).forEach(function(i){S.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),w[o]=w[i]})});function C(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||w.hasOwnProperty(i)&&w[i]?(""+o).trim():o+"px"}function T(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var _=d.indexOf("--")===0,k=C(d,o[d],_);d==="float"&&(d="cssFloat"),_?i.setProperty(d,k):i[d]=k}}var P=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R(i,o){if(o){if(P[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function B(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j=null;function I(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var G=null,V=null,H=null;function L(i){if(i=tl(i)){if(typeof G!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Pu(o),G(i.stateNode,i.type,o))}}function U(i){V?H?H.push(i):H=[i]:V=i}function A(){if(V){var i=V,o=H;if(H=V=null,L(i),o)for(i=0;i<o.length;i++)L(o[i])}}function W(i,o){return i(o)}function q(){}var Q=!1;function X(i,o,d){if(Q)return i(o,d);Q=!0;try{return W(i,o,d)}finally{Q=!1,(V!==null||H!==null)&&(q(),A())}}function te(i,o){var d=i.stateNode;if(d===null)return null;var _=Pu(d);if(_===null)return null;d=_[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(i=i.type,_=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!_;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var ie=!1;if(p)try{var se={};Object.defineProperty(se,"passive",{get:function(){ie=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{ie=!1}function he(i,o,d,_,k,M,J,le,me){var Ae=Array.prototype.slice.call(arguments,3);try{o.apply(d,Ae)}catch(Ge){this.onError(Ge)}}var ne=!1,ce=null,fe=!1,ve=null,ye={onError:function(i){ne=!0,ce=i}};function Ee(i,o,d,_,k,M,J,le,me){ne=!1,ce=null,he.apply(ye,arguments)}function Ne(i,o,d,_,k,M,J,le,me){if(Ee.apply(this,arguments),ne){if(ne){var Ae=ce;ne=!1,ce=null}else throw Error(t(198));fe||(fe=!0,ve=Ae)}}function We(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function $e(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function it(i){if(We(i)!==i)throw Error(t(188))}function je(i){var o=i.alternate;if(!o){if(o=We(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,_=o;;){var k=d.return;if(k===null)break;var M=k.alternate;if(M===null){if(_=k.return,_!==null){d=_;continue}break}if(k.child===M.child){for(M=k.child;M;){if(M===d)return it(k),i;if(M===_)return it(k),o;M=M.sibling}throw Error(t(188))}if(d.return!==_.return)d=k,_=M;else{for(var J=!1,le=k.child;le;){if(le===d){J=!0,d=k,_=M;break}if(le===_){J=!0,_=k,d=M;break}le=le.sibling}if(!J){for(le=M.child;le;){if(le===d){J=!0,d=M,_=k;break}if(le===_){J=!0,_=M,d=k;break}le=le.sibling}if(!J)throw Error(t(189))}}if(d.alternate!==_)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function De(i){return i=je(i),i!==null?et(i):null}function et(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=et(i);if(o!==null)return o;i=i.sibling}return null}var at=e.unstable_scheduleCallback,st=e.unstable_cancelCallback,xt=e.unstable_shouldYield,vt=e.unstable_requestPaint,ot=e.unstable_now,Lt=e.unstable_getCurrentPriorityLevel,bt=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,sn=e.unstable_NormalPriority,Sn=e.unstable_LowPriority,ln=e.unstable_IdlePriority,qe=null,Ht=null;function an(i){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(qe,i,void 0,(i.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:hr,er=Math.log,Nr=Math.LN2;function hr(i){return i>>>=0,i===0?32:31-(er(i)/Nr|0)|0}var Wn=64,Cn=4194304;function On(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function tr(i,o){var d=i.pendingLanes;if(d===0)return 0;var _=0,k=i.suspendedLanes,M=i.pingedLanes,J=d&268435455;if(J!==0){var le=J&~k;le!==0?_=On(le):(M&=J,M!==0&&(_=On(M)))}else J=d&~k,J!==0?_=On(J):M!==0&&(_=On(M));if(_===0)return 0;if(o!==0&&o!==_&&(o&k)===0&&(k=_&-_,M=o&-o,k>=M||k===16&&(M&4194240)!==0))return o;if((_&4)!==0&&(_|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=_;0<o;)d=31-qt(o),k=1<<d,_|=i[d],o&=~k;return _}function vn(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(i,o){for(var d=i.suspendedLanes,_=i.pingedLanes,k=i.expirationTimes,M=i.pendingLanes;0<M;){var J=31-qt(M),le=1<<J,me=k[J];me===-1?((le&d)===0||(le&_)!==0)&&(k[J]=vn(le,o)):me<=o&&(i.expiredLanes|=le),M&=~le}}function Es(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Os(){var i=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),i}function Ps(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function Fi(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-qt(o),i[o]=d}function qa(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var _=i.eventTimes;for(i=i.expirationTimes;0<d;){var k=31-qt(d),M=1<<k;o[k]=0,_[k]=-1,i[k]=-1,d&=~M}}function Ni(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var _=31-qt(d),k=1<<_;k&o|i[_]&o&&(i[_]|=o),d&=~k}}var Vt=0;function Bi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var zi,Br,fr,Pt,nr,rr=!1,Un=[],Hn=null,Sr=null,Cr=null,di=new Map,c=new Map,x=[],D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y(i,o){switch(i){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":di.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":c.delete(o.pointerId)}}function re(i,o,d,_,k,M){return i===null||i.nativeEvent!==M?(i={blockedOn:o,domEventName:d,eventSystemFlags:_,nativeEvent:M,targetContainers:[k]},o!==null&&(o=tl(o),o!==null&&Br(o)),i):(i.eventSystemFlags|=_,o=i.targetContainers,k!==null&&o.indexOf(k)===-1&&o.push(k),i)}function be(i,o,d,_,k){switch(o){case"focusin":return Hn=re(Hn,i,o,d,_,k),!0;case"dragenter":return Sr=re(Sr,i,o,d,_,k),!0;case"mouseover":return Cr=re(Cr,i,o,d,_,k),!0;case"pointerover":var M=k.pointerId;return di.set(M,re(di.get(M)||null,i,o,d,_,k)),!0;case"gotpointercapture":return M=k.pointerId,c.set(M,re(c.get(M)||null,i,o,d,_,k)),!0}return!1}function Oe(i){var o=ya(i.target);if(o!==null){var d=We(o);if(d!==null){if(o=d.tag,o===13){if(o=$e(d),o!==null){i.blockedOn=o,nr(i.priority,function(){fr(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ye(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=Ka(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var _=new d.constructor(d.type,d);j=_,d.target.dispatchEvent(_),j=null}else return o=tl(d),o!==null&&Br(o),i.blockedOn=d,!1;o.shift()}return!0}function nt(i,o,d){Ye(i)&&d.delete(o)}function Ot(){rr=!1,Hn!==null&&Ye(Hn)&&(Hn=null),Sr!==null&&Ye(Sr)&&(Sr=null),Cr!==null&&Ye(Cr)&&(Cr=null),di.forEach(nt),c.forEach(nt)}function It(i,o){i.blockedOn===o&&(i.blockedOn=null,rr||(rr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ot)))}function Kt(i){function o(k){return It(k,i)}if(0<Un.length){It(Un[0],i);for(var d=1;d<Un.length;d++){var _=Un[d];_.blockedOn===i&&(_.blockedOn=null)}}for(Hn!==null&&It(Hn,i),Sr!==null&&It(Sr,i),Cr!==null&&It(Cr,i),di.forEach(o),c.forEach(o),d=0;d<x.length;d++)_=x[d],_.blockedOn===i&&(_.blockedOn=null);for(;0<x.length&&(d=x[0],d.blockedOn===null);)Oe(d),d.blockedOn===null&&x.shift()}var cn=xe.ReactCurrentBatchConfig,Kr=!0;function pi(i,o,d,_){var k=Vt,M=cn.transition;cn.transition=null;try{Vt=1,Qr(i,o,d,_)}finally{Vt=k,cn.transition=M}}function Zr(i,o,d,_){var k=Vt,M=cn.transition;cn.transition=null;try{Vt=4,Qr(i,o,d,_)}finally{Vt=k,cn.transition=M}}function Qr(i,o,d,_){if(Kr){var k=Ka(i,o,d,_);if(k===null)jh(i,o,_,zr,d),Y(i,_);else if(be(k,i,o,d,_))_.stopPropagation();else if(Y(i,_),o&4&&-1<D.indexOf(i)){for(;k!==null;){var M=tl(k);if(M!==null&&zi(M),M=Ka(i,o,d,_),M===null&&jh(i,o,_,zr,d),M===k)break;k=M}k!==null&&_.stopPropagation()}else jh(i,o,_,null,d)}}var zr=null;function Ka(i,o,d,_){if(zr=null,i=I(_),i=ya(i),i!==null)if(o=We(i),o===null)i=null;else if(d=o.tag,d===13){if(i=$e(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return zr=i,null}function ua(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lt()){case bt:return 1;case pn:return 4;case sn:case Sn:return 16;case ln:return 536870912;default:return 16}default:return 16}}var Vi=null,Uo=null,ca=null;function cu(){if(ca)return ca;var i,o=Uo,d=o.length,_,k="value"in Vi?Vi.value:Vi.textContent,M=k.length;for(i=0;i<d&&o[i]===k[i];i++);var J=d-i;for(_=1;_<=J&&o[d-_]===k[M-_];_++);return ca=k.slice(i,1<_?1-_:void 0)}function ha(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Za(){return!0}function fa(){return!1}function In(i){function o(d,_,k,M,J){this._reactName=d,this._targetInst=k,this.type=_,this.nativeEvent=M,this.target=J,this.currentTarget=null;for(var le in i)i.hasOwnProperty(le)&&(d=i[le],this[le]=d?d(M):M[le]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Za:fa,this.isPropagationStopped=fa,this}return Ze(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),o}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=In(gi),Vr=Ze({},gi,{view:0,detail:0}),hu=In(Vr),kn,Ho,as,mi=Ze({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==as&&(as&&i.type==="mousemove"?(kn=i.screenX-as.screenX,Ho=i.screenY-as.screenY):Ho=kn=0,as=i),kn)},movementY:function(i){return"movementY"in i?i.movementY:Ho}}),fu=In(mi),vh=Ze({},mi,{dataTransfer:0}),_h=In(vh),yh=Ze({},Vr,{relatedTarget:0}),Xo=In(yh),xh=Ze({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=In(xh),bh=Ze({},gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Sh=In(bh),os=Ze({},gi,{data:0}),Pn=In(os),du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},da={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ch[i])?!!o[i]:!1}function Yo(){return pu}var Ja=Ze({},Vr,{key:function(i){if(i.key){var o=du[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?da[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yo,charCode:function(i){return i.type==="keypress"?ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),As=In(Ja),gu=Ze({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Go=In(gu),Xt=Ze({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yo}),qo=In(Xt),mu=Ze({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vu=In(mu),Bn=Ze({},mi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wi=In(Bn),Nt=[9,13,27,32],pa=p&&"CompositionEvent"in window,rn=null;p&&"documentMode"in document&&(rn=document.documentMode);var $a=p&&"TextEvent"in window&&!rn,Ui=p&&(!pa||rn&&8<rn&&11>=rn),_n=" ",Jr=!1;function ga(i,o){switch(i){case"keyup":return Nt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hi=!1;function kh(i,o){switch(i){case"compositionend":return _u(o);case"keypress":return o.which!==32?null:(Jr=!0,_n);case"textInput":return i=o.data,i===_n&&Jr?null:i;default:return null}}function Wr(i,o){if(Hi)return i==="compositionend"||!pa&&ga(i,o)?(i=cu(),ca=Uo=Vi=null,Hi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ui&&o.locale!=="ko"?null:o.data;default:return null}}var ma={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ms(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ma[i.type]:o==="textarea"}function eo(i,o,d,_){U(_),o=Tu(o,"onChange"),0<o.length&&(d=new Qa("onChange","change",null,d,_),i.push({event:d,listeners:o}))}var Is=null,js=null;function Xn(i){Op(i,0)}function Ls(i){var o=so(i);if(oa(o))return i}function Th(i,o){if(i==="change")return o}var yu=!1;if(p){var va;if(p){var _a="oninput"in document;if(!_a){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),_a=typeof xu.oninput=="function"}va=_a}else va=!1;yu=va&&(!document.documentMode||9<document.documentMode)}function Ds(){Is&&(Is.detachEvent("onpropertychange",to),js=Is=null)}function to(i){if(i.propertyName==="value"&&Ls(js)){var o=[];eo(o,js,i,I(i)),X(Xn,o)}}function Eh(i,o,d){i==="focusin"?(Ds(),Is=o,js=d,Is.attachEvent("onpropertychange",to)):i==="focusout"&&Ds()}function Oh(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ls(js)}function wu(i,o){if(i==="click")return Ls(o)}function Ko(i,o){if(i==="input"||i==="change")return Ls(o)}function Zo(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var jn=typeof Object.is=="function"?Object.is:Zo;function oe(i,o){if(jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),_=Object.keys(o);if(d.length!==_.length)return!1;for(_=0;_<d.length;_++){var k=d[_];if(!v.call(o,k)||!jn(i[k],o[k]))return!1}return!0}function pe(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Me(i,o){var d=pe(i);i=0;for(var _;d;){if(d.nodeType===3){if(_=i+d.textContent.length,i<=o&&_>=o)return{node:d,offset:o-i};i=_}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=pe(d)}}function Re(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Re(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function St(){for(var i=window,o=Rr();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=Rr(i.document)}return o}function kt(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function jt(i){var o=St(),d=i.focusedElem,_=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&Re(d.ownerDocument.documentElement,d)){if(_!==null&&kt(d)){if(o=_.start,i=_.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var k=d.textContent.length,M=Math.min(_.start,k);_=_.end===void 0?M:Math.min(_.end,k),!i.extend&&M>_&&(k=_,_=M,M=k),k=Me(d,M);var J=Me(d,_);k&&J&&(i.rangeCount!==1||i.anchorNode!==k.node||i.anchorOffset!==k.offset||i.focusNode!==J.node||i.focusOffset!==J.offset)&&(o=o.createRange(),o.setStart(k.node,k.offset),i.removeAllRanges(),M>_?(i.addRange(o),i.extend(J.node,J.offset)):(o.setEnd(J.node,J.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Zt=p&&"documentMode"in document&&11>=document.documentMode,Yn=null,vi=null,ls=null,Rs=!1;function bu(i,o,d){var _=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Rs||Yn==null||Yn!==Rr(_)||(_=Yn,"selectionStart"in _&&kt(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),ls&&oe(ls,_)||(ls=_,_=Tu(vi,"onSelect"),0<_.length&&(o=new Qa("onSelect","select",null,o,d),i.push({event:o,listeners:_}),o.target=Yn)))}function Su(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var no={animationend:Su("Animation","AnimationEnd"),animationiteration:Su("Animation","AnimationIteration"),animationstart:Su("Animation","AnimationStart"),transitionend:Su("Transition","TransitionEnd")},Ph={},xp={};p&&(xp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Cu(i){if(Ph[i])return Ph[i];if(!no[i])return i;var o=no[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in xp)return Ph[i]=o[d];return i}var wp=Cu("animationend"),bp=Cu("animationiteration"),Sp=Cu("animationstart"),Cp=Cu("transitionend"),kp=new Map,Tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(i,o){kp.set(i,o),a(o,[i])}for(var Ah=0;Ah<Tp.length;Ah++){var Mh=Tp[Ah],Z_=Mh.toLowerCase(),Q_=Mh[0].toUpperCase()+Mh.slice(1);Fs(Z_,"on"+Q_)}Fs(wp,"onAnimationEnd"),Fs(bp,"onAnimationIteration"),Fs(Sp,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Cp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function Ep(i,o,d){var _=i.type||"unknown-event";i.currentTarget=d,Ne(_,o,void 0,i),i.currentTarget=null}function Op(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var _=i[d],k=_.event;_=_.listeners;e:{var M=void 0;if(o)for(var J=_.length-1;0<=J;J--){var le=_[J],me=le.instance,Ae=le.currentTarget;if(le=le.listener,me!==M&&k.isPropagationStopped())break e;Ep(k,le,Ae),M=me}else for(J=0;J<_.length;J++){if(le=_[J],me=le.instance,Ae=le.currentTarget,le=le.listener,me!==M&&k.isPropagationStopped())break e;Ep(k,le,Ae),M=me}}}if(fe)throw i=ve,fe=!1,ve=null,i}function hn(i,o){var d=o[Bh];d===void 0&&(d=o[Bh]=new Set);var _=i+"__bubble";d.has(_)||(Pp(o,i,2,!1),d.add(_))}function Ih(i,o,d){var _=0;o&&(_|=4),Pp(d,i,_,o)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Jo(i){if(!i[ku]){i[ku]=!0,n.forEach(function(d){d!=="selectionchange"&&(J_.has(d)||Ih(d,!1,i),Ih(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ku]||(o[ku]=!0,Ih("selectionchange",!1,o))}}function Pp(i,o,d,_){switch(ua(o)){case 1:var k=pi;break;case 4:k=Zr;break;default:k=Qr}d=k.bind(null,o,d,i),k=void 0,!ie||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(k=!0),_?k!==void 0?i.addEventListener(o,d,{capture:!0,passive:k}):i.addEventListener(o,d,!0):k!==void 0?i.addEventListener(o,d,{passive:k}):i.addEventListener(o,d,!1)}function jh(i,o,d,_,k){var M=_;if((o&1)===0&&(o&2)===0&&_!==null)e:for(;;){if(_===null)return;var J=_.tag;if(J===3||J===4){var le=_.stateNode.containerInfo;if(le===k||le.nodeType===8&&le.parentNode===k)break;if(J===4)for(J=_.return;J!==null;){var me=J.tag;if((me===3||me===4)&&(me=J.stateNode.containerInfo,me===k||me.nodeType===8&&me.parentNode===k))return;J=J.return}for(;le!==null;){if(J=ya(le),J===null)return;if(me=J.tag,me===5||me===6){_=M=J;continue e}le=le.parentNode}}_=_.return}X(function(){var Ae=M,Ge=I(d),Qe=[];e:{var Ue=kp.get(i);if(Ue!==void 0){var lt=Qa,ft=i;switch(i){case"keypress":if(ha(d)===0)break e;case"keydown":case"keyup":lt=As;break;case"focusin":ft="focus",lt=Xo;break;case"focusout":ft="blur",lt=Xo;break;case"beforeblur":case"afterblur":lt=Xo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=_h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=qo;break;case wp:case bp:case Sp:lt=wh;break;case Cp:lt=vu;break;case"scroll":lt=hu;break;case"wheel":lt=Wi;break;case"copy":case"cut":case"paste":lt=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Go}var gt=(o&4)!==0,An=!gt&&i==="scroll",ke=gt?Ue!==null?Ue+"Capture":null:Ue;gt=[];for(var _e=Ae,Pe;_e!==null;){Pe=_e;var tt=Pe.stateNode;if(Pe.tag===5&&tt!==null&&(Pe=tt,ke!==null&&(tt=te(_e,ke),tt!=null&&gt.push($o(_e,tt,Pe)))),An)break;_e=_e.return}0<gt.length&&(Ue=new lt(Ue,ft,null,d,Ge),Qe.push({event:Ue,listeners:gt}))}}if((o&7)===0){e:{if(Ue=i==="mouseover"||i==="pointerover",lt=i==="mouseout"||i==="pointerout",Ue&&d!==j&&(ft=d.relatedTarget||d.fromElement)&&(ya(ft)||ft[us]))break e;if((lt||Ue)&&(Ue=Ge.window===Ge?Ge:(Ue=Ge.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,lt?(ft=d.relatedTarget||d.toElement,lt=Ae,ft=ft?ya(ft):null,ft!==null&&(An=We(ft),ft!==An||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(lt=null,ft=Ae),lt!==ft)){if(gt=fu,tt="onMouseLeave",ke="onMouseEnter",_e="mouse",(i==="pointerout"||i==="pointerover")&&(gt=Go,tt="onPointerLeave",ke="onPointerEnter",_e="pointer"),An=lt==null?Ue:so(lt),Pe=ft==null?Ue:so(ft),Ue=new gt(tt,_e+"leave",lt,d,Ge),Ue.target=An,Ue.relatedTarget=Pe,tt=null,ya(Ge)===Ae&&(gt=new gt(ke,_e+"enter",ft,d,Ge),gt.target=Pe,gt.relatedTarget=An,tt=gt),An=tt,lt&&ft)t:{for(gt=lt,ke=ft,_e=0,Pe=gt;Pe;Pe=ro(Pe))_e++;for(Pe=0,tt=ke;tt;tt=ro(tt))Pe++;for(;0<_e-Pe;)gt=ro(gt),_e--;for(;0<Pe-_e;)ke=ro(ke),Pe--;for(;_e--;){if(gt===ke||ke!==null&&gt===ke.alternate)break t;gt=ro(gt),ke=ro(ke)}gt=null}else gt=null;lt!==null&&Ap(Qe,Ue,lt,gt,!1),ft!==null&&An!==null&&Ap(Qe,An,ft,gt,!0)}}e:{if(Ue=Ae?so(Ae):window,lt=Ue.nodeName&&Ue.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Ue.type==="file")var mt=Th;else if(Ms(Ue))if(yu)mt=Ko;else{mt=Oh;var Tt=Eh}else(lt=Ue.nodeName)&&lt.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(mt=wu);if(mt&&(mt=mt(i,Ae))){eo(Qe,mt,d,Ge);break e}Tt&&Tt(i,Ue,Ae),i==="focusout"&&(Tt=Ue._wrapperState)&&Tt.controlled&&Ue.type==="number"&&Ri(Ue,"number",Ue.value)}switch(Tt=Ae?so(Ae):window,i){case"focusin":(Ms(Tt)||Tt.contentEditable==="true")&&(Yn=Tt,vi=Ae,ls=null);break;case"focusout":ls=vi=Yn=null;break;case"mousedown":Rs=!0;break;case"contextmenu":case"mouseup":case"dragend":Rs=!1,bu(Qe,d,Ge);break;case"selectionchange":if(Zt)break;case"keydown":case"keyup":bu(Qe,d,Ge)}var Et;if(pa)e:{switch(i){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else Hi?ga(i,d)&&(Dt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ui&&d.locale!=="ko"&&(Hi||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Hi&&(Et=cu()):(Vi=Ge,Uo="value"in Vi?Vi.value:Vi.textContent,Hi=!0)),Tt=Tu(Ae,Dt),0<Tt.length&&(Dt=new Pn(Dt,i,null,d,Ge),Qe.push({event:Dt,listeners:Tt}),Et?Dt.data=Et:(Et=_u(d),Et!==null&&(Dt.data=Et)))),(Et=$a?kh(i,d):Wr(i,d))&&(Ae=Tu(Ae,"onBeforeInput"),0<Ae.length&&(Ge=new Pn("onBeforeInput","beforeinput",null,d,Ge),Qe.push({event:Ge,listeners:Ae}),Ge.data=Et))}Op(Qe,o)})}function $o(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Tu(i,o){for(var d=o+"Capture",_=[];i!==null;){var k=i,M=k.stateNode;k.tag===5&&M!==null&&(k=M,M=te(i,d),M!=null&&_.unshift($o(i,M,k)),M=te(i,o),M!=null&&_.push($o(i,M,k))),i=i.return}return _}function ro(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ap(i,o,d,_,k){for(var M=o._reactName,J=[];d!==null&&d!==_;){var le=d,me=le.alternate,Ae=le.stateNode;if(me!==null&&me===_)break;le.tag===5&&Ae!==null&&(le=Ae,k?(me=te(d,M),me!=null&&J.unshift($o(d,me,le))):k||(me=te(d,M),me!=null&&J.push($o(d,me,le)))),d=d.return}J.length!==0&&i.push({event:o,listeners:J})}var $_=/\r\n?/g,ey=/\u0000|\uFFFD/g;function Mp(i){return(typeof i=="string"?i:""+i).replace($_,`
`).replace(ey,"")}function Eu(i,o,d){if(o=Mp(o),Mp(i)!==o&&d)throw Error(t(425))}function Ou(){}var Lh=null,Dh=null;function Rh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,ty=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,ny=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(i){return Ip.resolve(null).then(i).catch(ry)}:Fh;function ry(i){setTimeout(function(){throw i})}function Nh(i,o){var d=o,_=0;do{var k=d.nextSibling;if(i.removeChild(d),k&&k.nodeType===8)if(d=k.data,d==="/$"){if(_===0){i.removeChild(k),Kt(o);return}_--}else d!=="$"&&d!=="$?"&&d!=="$!"||_++;d=k}while(d);Kt(o)}function Ns(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function jp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var io=Math.random().toString(36).slice(2),Xi="__reactFiber$"+io,el="__reactProps$"+io,us="__reactContainer$"+io,Bh="__reactEvents$"+io,iy="__reactListeners$"+io,sy="__reactHandles$"+io;function ya(i){var o=i[Xi];if(o)return o;for(var d=i.parentNode;d;){if(o=d[us]||d[Xi]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=jp(i);i!==null;){if(d=i[Xi])return d;i=jp(i)}return o}i=d,d=i.parentNode}return null}function tl(i){return i=i[Xi]||i[us],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function so(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Pu(i){return i[el]||null}var zh=[],ao=-1;function Bs(i){return{current:i}}function fn(i){0>ao||(i.current=zh[ao],zh[ao]=null,ao--)}function un(i,o){ao++,zh[ao]=i.current,i.current=o}var zs={},ir=Bs(zs),kr=Bs(!1),xa=zs;function oo(i,o){var d=i.type.contextTypes;if(!d)return zs;var _=i.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===o)return _.__reactInternalMemoizedMaskedChildContext;var k={},M;for(M in d)k[M]=o[M];return _&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=k),k}function Tr(i){return i=i.childContextTypes,i!=null}function Au(){fn(kr),fn(ir)}function Lp(i,o,d){if(ir.current!==zs)throw Error(t(168));un(ir,o),un(kr,d)}function Dp(i,o,d){var _=i.stateNode;if(o=o.childContextTypes,typeof _.getChildContext!="function")return d;_=_.getChildContext();for(var k in _)if(!(k in o))throw Error(t(108,zt(i)||"Unknown",k));return Ze({},d,_)}function Mu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||zs,xa=ir.current,un(ir,i),un(kr,kr.current),!0}function Rp(i,o,d){var _=i.stateNode;if(!_)throw Error(t(169));d?(i=Dp(i,o,xa),_.__reactInternalMemoizedMergedChildContext=i,fn(kr),fn(ir),un(ir,i)):fn(kr),un(kr,d)}var cs=null,Iu=!1,Vh=!1;function Fp(i){cs===null?cs=[i]:cs.push(i)}function ay(i){Iu=!0,Fp(i)}function Vs(){if(!Vh&&cs!==null){Vh=!0;var i=0,o=Vt;try{var d=cs;for(Vt=1;i<d.length;i++){var _=d[i];do _=_(!0);while(_!==null)}cs=null,Iu=!1}catch(k){throw cs!==null&&(cs=cs.slice(i+1)),at(bt,Vs),k}finally{Vt=o,Vh=!1}}return null}var lo=[],uo=0,ju=null,Lu=0,$r=[],ei=0,wa=null,hs=1,fs="";function ba(i,o){lo[uo++]=Lu,lo[uo++]=ju,ju=i,Lu=o}function Np(i,o,d){$r[ei++]=hs,$r[ei++]=fs,$r[ei++]=wa,wa=i;var _=hs;i=fs;var k=32-qt(_)-1;_&=~(1<<k),d+=1;var M=32-qt(o)+k;if(30<M){var J=k-k%5;M=(_&(1<<J)-1).toString(32),_>>=J,k-=J,hs=1<<32-qt(o)+k|d<<k|_,fs=M+i}else hs=1<<M|d<<k|_,fs=i}function Wh(i){i.return!==null&&(ba(i,1),Np(i,1,0))}function Uh(i){for(;i===ju;)ju=lo[--uo],lo[uo]=null,Lu=lo[--uo],lo[uo]=null;for(;i===wa;)wa=$r[--ei],$r[ei]=null,fs=$r[--ei],$r[ei]=null,hs=$r[--ei],$r[ei]=null}var Ur=null,Hr=null,gn=!1,_i=null;function Bp(i,o){var d=ii(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function zp(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Ur=i,Hr=Ns(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Ur=i,Hr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=wa!==null?{id:hs,overflow:fs}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=ii(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,Ur=i,Hr=null,!0):!1;default:return!1}}function Hh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Xh(i){if(gn){var o=Hr;if(o){var d=o;if(!zp(i,o)){if(Hh(i))throw Error(t(418));o=Ns(d.nextSibling);var _=Ur;o&&zp(i,o)?Bp(_,d):(i.flags=i.flags&-4097|2,gn=!1,Ur=i)}}else{if(Hh(i))throw Error(t(418));i.flags=i.flags&-4097|2,gn=!1,Ur=i}}}function Vp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ur=i}function Du(i){if(i!==Ur)return!1;if(!gn)return Vp(i),gn=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Rh(i.type,i.memoizedProps)),o&&(o=Hr)){if(Hh(i))throw Wp(),Error(t(418));for(;o;)Bp(i,o),o=Ns(o.nextSibling)}if(Vp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){Hr=Ns(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}Hr=null}}else Hr=Ur?Ns(i.stateNode.nextSibling):null;return!0}function Wp(){for(var i=Hr;i;)i=Ns(i.nextSibling)}function co(){Hr=Ur=null,gn=!1}function Yh(i){_i===null?_i=[i]:_i.push(i)}var oy=xe.ReactCurrentBatchConfig;function nl(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var _=d.stateNode}if(!_)throw Error(t(147,i));var k=_,M=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===M?o.ref:(o=function(J){var le=k.refs;J===null?delete le[M]:le[M]=J},o._stringRef=M,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function Ru(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Up(i){var o=i._init;return o(i._payload)}function Hp(i){function o(ke,_e){if(i){var Pe=ke.deletions;Pe===null?(ke.deletions=[_e],ke.flags|=16):Pe.push(_e)}}function d(ke,_e){if(!i)return null;for(;_e!==null;)o(ke,_e),_e=_e.sibling;return null}function _(ke,_e){for(ke=new Map;_e!==null;)_e.key!==null?ke.set(_e.key,_e):ke.set(_e.index,_e),_e=_e.sibling;return ke}function k(ke,_e){return ke=Ks(ke,_e),ke.index=0,ke.sibling=null,ke}function M(ke,_e,Pe){return ke.index=Pe,i?(Pe=ke.alternate,Pe!==null?(Pe=Pe.index,Pe<_e?(ke.flags|=2,_e):Pe):(ke.flags|=2,_e)):(ke.flags|=1048576,_e)}function J(ke){return i&&ke.alternate===null&&(ke.flags|=2),ke}function le(ke,_e,Pe,tt){return _e===null||_e.tag!==6?(_e=Nf(Pe,ke.mode,tt),_e.return=ke,_e):(_e=k(_e,Pe),_e.return=ke,_e)}function me(ke,_e,Pe,tt){var mt=Pe.type;return mt===Ve?Ge(ke,_e,Pe.props.children,tt,Pe.key):_e!==null&&(_e.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Le&&Up(mt)===_e.type)?(tt=k(_e,Pe.props),tt.ref=nl(ke,_e,Pe),tt.return=ke,tt):(tt=ac(Pe.type,Pe.key,Pe.props,null,ke.mode,tt),tt.ref=nl(ke,_e,Pe),tt.return=ke,tt)}function Ae(ke,_e,Pe,tt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Pe.containerInfo||_e.stateNode.implementation!==Pe.implementation?(_e=Bf(Pe,ke.mode,tt),_e.return=ke,_e):(_e=k(_e,Pe.children||[]),_e.return=ke,_e)}function Ge(ke,_e,Pe,tt,mt){return _e===null||_e.tag!==7?(_e=Aa(Pe,ke.mode,tt,mt),_e.return=ke,_e):(_e=k(_e,Pe),_e.return=ke,_e)}function Qe(ke,_e,Pe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Nf(""+_e,ke.mode,Pe),_e.return=ke,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Ce:return Pe=ac(_e.type,_e.key,_e.props,null,ke.mode,Pe),Pe.ref=nl(ke,null,_e),Pe.return=ke,Pe;case z:return _e=Bf(_e,ke.mode,Pe),_e.return=ke,_e;case Le:var tt=_e._init;return Qe(ke,tt(_e._payload),Pe)}if(qr(_e)||Xe(_e))return _e=Aa(_e,ke.mode,Pe,null),_e.return=ke,_e;Ru(ke,_e)}return null}function Ue(ke,_e,Pe,tt){var mt=_e!==null?_e.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return mt!==null?null:le(ke,_e,""+Pe,tt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case Ce:return Pe.key===mt?me(ke,_e,Pe,tt):null;case z:return Pe.key===mt?Ae(ke,_e,Pe,tt):null;case Le:return mt=Pe._init,Ue(ke,_e,mt(Pe._payload),tt)}if(qr(Pe)||Xe(Pe))return mt!==null?null:Ge(ke,_e,Pe,tt,null);Ru(ke,Pe)}return null}function lt(ke,_e,Pe,tt,mt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return ke=ke.get(Pe)||null,le(_e,ke,""+tt,mt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case Ce:return ke=ke.get(tt.key===null?Pe:tt.key)||null,me(_e,ke,tt,mt);case z:return ke=ke.get(tt.key===null?Pe:tt.key)||null,Ae(_e,ke,tt,mt);case Le:var Tt=tt._init;return lt(ke,_e,Pe,Tt(tt._payload),mt)}if(qr(tt)||Xe(tt))return ke=ke.get(Pe)||null,Ge(_e,ke,tt,mt,null);Ru(_e,tt)}return null}function ft(ke,_e,Pe,tt){for(var mt=null,Tt=null,Et=_e,Dt=_e=0,Kn=null;Et!==null&&Dt<Pe.length;Dt++){Et.index>Dt?(Kn=Et,Et=null):Kn=Et.sibling;var Jt=Ue(ke,Et,Pe[Dt],tt);if(Jt===null){Et===null&&(Et=Kn);break}i&&Et&&Jt.alternate===null&&o(ke,Et),_e=M(Jt,_e,Dt),Tt===null?mt=Jt:Tt.sibling=Jt,Tt=Jt,Et=Kn}if(Dt===Pe.length)return d(ke,Et),gn&&ba(ke,Dt),mt;if(Et===null){for(;Dt<Pe.length;Dt++)Et=Qe(ke,Pe[Dt],tt),Et!==null&&(_e=M(Et,_e,Dt),Tt===null?mt=Et:Tt.sibling=Et,Tt=Et);return gn&&ba(ke,Dt),mt}for(Et=_(ke,Et);Dt<Pe.length;Dt++)Kn=lt(Et,ke,Dt,Pe[Dt],tt),Kn!==null&&(i&&Kn.alternate!==null&&Et.delete(Kn.key===null?Dt:Kn.key),_e=M(Kn,_e,Dt),Tt===null?mt=Kn:Tt.sibling=Kn,Tt=Kn);return i&&Et.forEach(function(Zs){return o(ke,Zs)}),gn&&ba(ke,Dt),mt}function gt(ke,_e,Pe,tt){var mt=Xe(Pe);if(typeof mt!="function")throw Error(t(150));if(Pe=mt.call(Pe),Pe==null)throw Error(t(151));for(var Tt=mt=null,Et=_e,Dt=_e=0,Kn=null,Jt=Pe.next();Et!==null&&!Jt.done;Dt++,Jt=Pe.next()){Et.index>Dt?(Kn=Et,Et=null):Kn=Et.sibling;var Zs=Ue(ke,Et,Jt.value,tt);if(Zs===null){Et===null&&(Et=Kn);break}i&&Et&&Zs.alternate===null&&o(ke,Et),_e=M(Zs,_e,Dt),Tt===null?mt=Zs:Tt.sibling=Zs,Tt=Zs,Et=Kn}if(Jt.done)return d(ke,Et),gn&&ba(ke,Dt),mt;if(Et===null){for(;!Jt.done;Dt++,Jt=Pe.next())Jt=Qe(ke,Jt.value,tt),Jt!==null&&(_e=M(Jt,_e,Dt),Tt===null?mt=Jt:Tt.sibling=Jt,Tt=Jt);return gn&&ba(ke,Dt),mt}for(Et=_(ke,Et);!Jt.done;Dt++,Jt=Pe.next())Jt=lt(Et,ke,Dt,Jt.value,tt),Jt!==null&&(i&&Jt.alternate!==null&&Et.delete(Jt.key===null?Dt:Jt.key),_e=M(Jt,_e,Dt),Tt===null?mt=Jt:Tt.sibling=Jt,Tt=Jt);return i&&Et.forEach(function(zy){return o(ke,zy)}),gn&&ba(ke,Dt),mt}function An(ke,_e,Pe,tt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===Ve&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case Ce:e:{for(var mt=Pe.key,Tt=_e;Tt!==null;){if(Tt.key===mt){if(mt=Pe.type,mt===Ve){if(Tt.tag===7){d(ke,Tt.sibling),_e=k(Tt,Pe.props.children),_e.return=ke,ke=_e;break e}}else if(Tt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Le&&Up(mt)===Tt.type){d(ke,Tt.sibling),_e=k(Tt,Pe.props),_e.ref=nl(ke,Tt,Pe),_e.return=ke,ke=_e;break e}d(ke,Tt);break}else o(ke,Tt);Tt=Tt.sibling}Pe.type===Ve?(_e=Aa(Pe.props.children,ke.mode,tt,Pe.key),_e.return=ke,ke=_e):(tt=ac(Pe.type,Pe.key,Pe.props,null,ke.mode,tt),tt.ref=nl(ke,_e,Pe),tt.return=ke,ke=tt)}return J(ke);case z:e:{for(Tt=Pe.key;_e!==null;){if(_e.key===Tt)if(_e.tag===4&&_e.stateNode.containerInfo===Pe.containerInfo&&_e.stateNode.implementation===Pe.implementation){d(ke,_e.sibling),_e=k(_e,Pe.children||[]),_e.return=ke,ke=_e;break e}else{d(ke,_e);break}else o(ke,_e);_e=_e.sibling}_e=Bf(Pe,ke.mode,tt),_e.return=ke,ke=_e}return J(ke);case Le:return Tt=Pe._init,An(ke,_e,Tt(Pe._payload),tt)}if(qr(Pe))return ft(ke,_e,Pe,tt);if(Xe(Pe))return gt(ke,_e,Pe,tt);Ru(ke,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"?(Pe=""+Pe,_e!==null&&_e.tag===6?(d(ke,_e.sibling),_e=k(_e,Pe),_e.return=ke,ke=_e):(d(ke,_e),_e=Nf(Pe,ke.mode,tt),_e.return=ke,ke=_e),J(ke)):d(ke,_e)}return An}var ho=Hp(!0),Xp=Hp(!1),Fu=Bs(null),Nu=null,fo=null,Gh=null;function qh(){Gh=fo=Nu=null}function Kh(i){var o=Fu.current;fn(Fu),i._currentValue=o}function Zh(i,o,d){for(;i!==null;){var _=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,_!==null&&(_.childLanes|=o)):_!==null&&(_.childLanes&o)!==o&&(_.childLanes|=o),i===d)break;i=i.return}}function po(i,o){Nu=i,Gh=fo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Er=!0),i.firstContext=null)}function ti(i){var o=i._currentValue;if(Gh!==i)if(i={context:i,memoizedValue:o,next:null},fo===null){if(Nu===null)throw Error(t(308));fo=i,Nu.dependencies={lanes:0,firstContext:i}}else fo=fo.next=i;return o}var Sa=null;function Qh(i){Sa===null?Sa=[i]:Sa.push(i)}function Yp(i,o,d,_){var k=o.interleaved;return k===null?(d.next=d,Qh(o)):(d.next=k.next,k.next=d),o.interleaved=d,ds(i,_)}function ds(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Ws=!1;function Jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ps(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Us(i,o,d){var _=i.updateQueue;if(_===null)return null;if(_=_.shared,(Qt&2)!==0){var k=_.pending;return k===null?o.next=o:(o.next=k.next,k.next=o),_.pending=o,ds(i,d)}return k=_.interleaved,k===null?(o.next=o,Qh(_)):(o.next=k.next,k.next=o),_.interleaved=o,ds(i,d)}function Bu(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var _=o.lanes;_&=i.pendingLanes,d|=_,o.lanes=d,Ni(i,d)}}function qp(i,o){var d=i.updateQueue,_=i.alternate;if(_!==null&&(_=_.updateQueue,d===_)){var k=null,M=null;if(d=d.firstBaseUpdate,d!==null){do{var J={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};M===null?k=M=J:M=M.next=J,d=d.next}while(d!==null);M===null?k=M=o:M=M.next=o}else k=M=o;d={baseState:_.baseState,firstBaseUpdate:k,lastBaseUpdate:M,shared:_.shared,effects:_.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function zu(i,o,d,_){var k=i.updateQueue;Ws=!1;var M=k.firstBaseUpdate,J=k.lastBaseUpdate,le=k.shared.pending;if(le!==null){k.shared.pending=null;var me=le,Ae=me.next;me.next=null,J===null?M=Ae:J.next=Ae,J=me;var Ge=i.alternate;Ge!==null&&(Ge=Ge.updateQueue,le=Ge.lastBaseUpdate,le!==J&&(le===null?Ge.firstBaseUpdate=Ae:le.next=Ae,Ge.lastBaseUpdate=me))}if(M!==null){var Qe=k.baseState;J=0,Ge=Ae=me=null,le=M;do{var Ue=le.lane,lt=le.eventTime;if((_&Ue)===Ue){Ge!==null&&(Ge=Ge.next={eventTime:lt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var ft=i,gt=le;switch(Ue=o,lt=d,gt.tag){case 1:if(ft=gt.payload,typeof ft=="function"){Qe=ft.call(lt,Qe,Ue);break e}Qe=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=gt.payload,Ue=typeof ft=="function"?ft.call(lt,Qe,Ue):ft,Ue==null)break e;Qe=Ze({},Qe,Ue);break e;case 2:Ws=!0}}le.callback!==null&&le.lane!==0&&(i.flags|=64,Ue=k.effects,Ue===null?k.effects=[le]:Ue.push(le))}else lt={eventTime:lt,lane:Ue,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ge===null?(Ae=Ge=lt,me=Qe):Ge=Ge.next=lt,J|=Ue;if(le=le.next,le===null){if(le=k.shared.pending,le===null)break;Ue=le,le=Ue.next,Ue.next=null,k.lastBaseUpdate=Ue,k.shared.pending=null}}while(!0);if(Ge===null&&(me=Qe),k.baseState=me,k.firstBaseUpdate=Ae,k.lastBaseUpdate=Ge,o=k.shared.interleaved,o!==null){k=o;do J|=k.lane,k=k.next;while(k!==o)}else M===null&&(k.shared.lanes=0);Ta|=J,i.lanes=J,i.memoizedState=Qe}}function Kp(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var _=i[o],k=_.callback;if(k!==null){if(_.callback=null,_=d,typeof k!="function")throw Error(t(191,k));k.call(_)}}}var rl={},Yi=Bs(rl),il=Bs(rl),sl=Bs(rl);function Ca(i){if(i===rl)throw Error(t(174));return i}function $h(i,o){switch(un(sl,o),un(il,i),un(Yi,rl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:u(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=u(o,i)}fn(Yi),un(Yi,o)}function go(){fn(Yi),fn(il),fn(sl)}function Zp(i){Ca(sl.current);var o=Ca(Yi.current),d=u(o,i.type);o!==d&&(un(il,i),un(Yi,d))}function ef(i){il.current===i&&(fn(Yi),fn(il))}var yn=Bs(0);function Vu(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var tf=[];function nf(){for(var i=0;i<tf.length;i++)tf[i]._workInProgressVersionPrimary=null;tf.length=0}var Wu=xe.ReactCurrentDispatcher,rf=xe.ReactCurrentBatchConfig,ka=0,xn=null,zn=null,Gn=null,Uu=!1,al=!1,ol=0,ly=0;function sr(){throw Error(t(321))}function sf(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!jn(i[d],o[d]))return!1;return!0}function af(i,o,d,_,k,M){if(ka=M,xn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Wu.current=i===null||i.memoizedState===null?fy:dy,i=d(_,k),al){M=0;do{if(al=!1,ol=0,25<=M)throw Error(t(301));M+=1,Gn=zn=null,o.updateQueue=null,Wu.current=py,i=d(_,k)}while(al)}if(Wu.current=Yu,o=zn!==null&&zn.next!==null,ka=0,Gn=zn=xn=null,Uu=!1,o)throw Error(t(300));return i}function of(){var i=ol!==0;return ol=0,i}function Gi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?xn.memoizedState=Gn=i:Gn=Gn.next=i,Gn}function ni(){if(zn===null){var i=xn.alternate;i=i!==null?i.memoizedState:null}else i=zn.next;var o=Gn===null?xn.memoizedState:Gn.next;if(o!==null)Gn=o,zn=i;else{if(i===null)throw Error(t(310));zn=i,i={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Gn===null?xn.memoizedState=Gn=i:Gn=Gn.next=i}return Gn}function ll(i,o){return typeof o=="function"?o(i):o}function lf(i){var o=ni(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var _=zn,k=_.baseQueue,M=d.pending;if(M!==null){if(k!==null){var J=k.next;k.next=M.next,M.next=J}_.baseQueue=k=M,d.pending=null}if(k!==null){M=k.next,_=_.baseState;var le=J=null,me=null,Ae=M;do{var Ge=Ae.lane;if((ka&Ge)===Ge)me!==null&&(me=me.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),_=Ae.hasEagerState?Ae.eagerState:i(_,Ae.action);else{var Qe={lane:Ge,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};me===null?(le=me=Qe,J=_):me=me.next=Qe,xn.lanes|=Ge,Ta|=Ge}Ae=Ae.next}while(Ae!==null&&Ae!==M);me===null?J=_:me.next=le,jn(_,o.memoizedState)||(Er=!0),o.memoizedState=_,o.baseState=J,o.baseQueue=me,d.lastRenderedState=_}if(i=d.interleaved,i!==null){k=i;do M=k.lane,xn.lanes|=M,Ta|=M,k=k.next;while(k!==i)}else k===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function uf(i){var o=ni(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var _=d.dispatch,k=d.pending,M=o.memoizedState;if(k!==null){d.pending=null;var J=k=k.next;do M=i(M,J.action),J=J.next;while(J!==k);jn(M,o.memoizedState)||(Er=!0),o.memoizedState=M,o.baseQueue===null&&(o.baseState=M),d.lastRenderedState=M}return[M,_]}function Qp(){}function Jp(i,o){var d=xn,_=ni(),k=o(),M=!jn(_.memoizedState,k);if(M&&(_.memoizedState=k,Er=!0),_=_.queue,cf(tg.bind(null,d,_,i),[i]),_.getSnapshot!==o||M||Gn!==null&&Gn.memoizedState.tag&1){if(d.flags|=2048,ul(9,eg.bind(null,d,_,k,o),void 0,null),qn===null)throw Error(t(349));(ka&30)!==0||$p(d,o,k)}return k}function $p(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=xn.updateQueue,o===null?(o={lastEffect:null,stores:null},xn.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function eg(i,o,d,_){o.value=d,o.getSnapshot=_,ng(o)&&rg(i)}function tg(i,o,d){return d(function(){ng(o)&&rg(i)})}function ng(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!jn(i,d)}catch{return!0}}function rg(i){var o=ds(i,1);o!==null&&bi(o,i,1,-1)}function ig(i){var o=Gi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:i},o.queue=i,i=i.dispatch=hy.bind(null,xn,i),[o.memoizedState,i]}function ul(i,o,d,_){return i={tag:i,create:o,destroy:d,deps:_,next:null},o=xn.updateQueue,o===null?(o={lastEffect:null,stores:null},xn.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(_=d.next,d.next=i,i.next=_,o.lastEffect=i)),i}function sg(){return ni().memoizedState}function Hu(i,o,d,_){var k=Gi();xn.flags|=i,k.memoizedState=ul(1|o,d,void 0,_===void 0?null:_)}function Xu(i,o,d,_){var k=ni();_=_===void 0?null:_;var M=void 0;if(zn!==null){var J=zn.memoizedState;if(M=J.destroy,_!==null&&sf(_,J.deps)){k.memoizedState=ul(o,d,M,_);return}}xn.flags|=i,k.memoizedState=ul(1|o,d,M,_)}function ag(i,o){return Hu(8390656,8,i,o)}function cf(i,o){return Xu(2048,8,i,o)}function og(i,o){return Xu(4,2,i,o)}function lg(i,o){return Xu(4,4,i,o)}function ug(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function cg(i,o,d){return d=d!=null?d.concat([i]):null,Xu(4,4,ug.bind(null,o,i),d)}function hf(){}function hg(i,o){var d=ni();o=o===void 0?null:o;var _=d.memoizedState;return _!==null&&o!==null&&sf(o,_[1])?_[0]:(d.memoizedState=[i,o],i)}function fg(i,o){var d=ni();o=o===void 0?null:o;var _=d.memoizedState;return _!==null&&o!==null&&sf(o,_[1])?_[0]:(i=i(),d.memoizedState=[i,o],i)}function dg(i,o,d){return(ka&21)===0?(i.baseState&&(i.baseState=!1,Er=!0),i.memoizedState=d):(jn(d,o)||(d=Os(),xn.lanes|=d,Ta|=d,i.baseState=!0),o)}function uy(i,o){var d=Vt;Vt=d!==0&&4>d?d:4,i(!0);var _=rf.transition;rf.transition={};try{i(!1),o()}finally{Vt=d,rf.transition=_}}function pg(){return ni().memoizedState}function cy(i,o,d){var _=Gs(i);if(d={lane:_,action:d,hasEagerState:!1,eagerState:null,next:null},gg(i))mg(o,d);else if(d=Yp(i,o,d,_),d!==null){var k=pr();bi(d,i,_,k),vg(d,o,_)}}function hy(i,o,d){var _=Gs(i),k={lane:_,action:d,hasEagerState:!1,eagerState:null,next:null};if(gg(i))mg(o,k);else{var M=i.alternate;if(i.lanes===0&&(M===null||M.lanes===0)&&(M=o.lastRenderedReducer,M!==null))try{var J=o.lastRenderedState,le=M(J,d);if(k.hasEagerState=!0,k.eagerState=le,jn(le,J)){var me=o.interleaved;me===null?(k.next=k,Qh(o)):(k.next=me.next,me.next=k),o.interleaved=k;return}}catch{}finally{}d=Yp(i,o,k,_),d!==null&&(k=pr(),bi(d,i,_,k),vg(d,o,_))}}function gg(i){var o=i.alternate;return i===xn||o!==null&&o===xn}function mg(i,o){al=Uu=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function vg(i,o,d){if((d&4194240)!==0){var _=o.lanes;_&=i.pendingLanes,d|=_,o.lanes=d,Ni(i,d)}}var Yu={readContext:ti,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},fy={readContext:ti,useCallback:function(i,o){return Gi().memoizedState=[i,o===void 0?null:o],i},useContext:ti,useEffect:ag,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,Hu(4194308,4,ug.bind(null,o,i),d)},useLayoutEffect:function(i,o){return Hu(4194308,4,i,o)},useInsertionEffect:function(i,o){return Hu(4,2,i,o)},useMemo:function(i,o){var d=Gi();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var _=Gi();return o=d!==void 0?d(o):o,_.memoizedState=_.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},_.queue=i,i=i.dispatch=cy.bind(null,xn,i),[_.memoizedState,i]},useRef:function(i){var o=Gi();return i={current:i},o.memoizedState=i},useState:ig,useDebugValue:hf,useDeferredValue:function(i){return Gi().memoizedState=i},useTransition:function(){var i=ig(!1),o=i[0];return i=uy.bind(null,i[1]),Gi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var _=xn,k=Gi();if(gn){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),qn===null)throw Error(t(349));(ka&30)!==0||$p(_,o,d)}k.memoizedState=d;var M={value:d,getSnapshot:o};return k.queue=M,ag(tg.bind(null,_,M,i),[i]),_.flags|=2048,ul(9,eg.bind(null,_,M,d,o),void 0,null),d},useId:function(){var i=Gi(),o=qn.identifierPrefix;if(gn){var d=fs,_=hs;d=(_&~(1<<32-qt(_)-1)).toString(32)+d,o=":"+o+"R"+d,d=ol++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=ly++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},dy={readContext:ti,useCallback:hg,useContext:ti,useEffect:cf,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:lg,useMemo:fg,useReducer:lf,useRef:sg,useState:function(){return lf(ll)},useDebugValue:hf,useDeferredValue:function(i){var o=ni();return dg(o,zn.memoizedState,i)},useTransition:function(){var i=lf(ll)[0],o=ni().memoizedState;return[i,o]},useMutableSource:Qp,useSyncExternalStore:Jp,useId:pg,unstable_isNewReconciler:!1},py={readContext:ti,useCallback:hg,useContext:ti,useEffect:cf,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:lg,useMemo:fg,useReducer:uf,useRef:sg,useState:function(){return uf(ll)},useDebugValue:hf,useDeferredValue:function(i){var o=ni();return zn===null?o.memoizedState=i:dg(o,zn.memoizedState,i)},useTransition:function(){var i=uf(ll)[0],o=ni().memoizedState;return[i,o]},useMutableSource:Qp,useSyncExternalStore:Jp,useId:pg,unstable_isNewReconciler:!1};function yi(i,o){if(i&&i.defaultProps){o=Ze({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function ff(i,o,d,_){o=i.memoizedState,d=d(_,o),d=d==null?o:Ze({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Gu={isMounted:function(i){return(i=i._reactInternals)?We(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var _=pr(),k=Gs(i),M=ps(_,k);M.payload=o,d!=null&&(M.callback=d),o=Us(i,M,k),o!==null&&(bi(o,i,k,_),Bu(o,i,k))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var _=pr(),k=Gs(i),M=ps(_,k);M.tag=1,M.payload=o,d!=null&&(M.callback=d),o=Us(i,M,k),o!==null&&(bi(o,i,k,_),Bu(o,i,k))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=pr(),_=Gs(i),k=ps(d,_);k.tag=2,o!=null&&(k.callback=o),o=Us(i,k,_),o!==null&&(bi(o,i,_,d),Bu(o,i,_))}};function _g(i,o,d,_,k,M,J){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(_,M,J):o.prototype&&o.prototype.isPureReactComponent?!oe(d,_)||!oe(k,M):!0}function yg(i,o,d){var _=!1,k=zs,M=o.contextType;return typeof M=="object"&&M!==null?M=ti(M):(k=Tr(o)?xa:ir.current,_=o.contextTypes,M=(_=_!=null)?oo(i,k):zs),o=new o(d,M),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Gu,i.stateNode=o,o._reactInternals=i,_&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=k,i.__reactInternalMemoizedMaskedChildContext=M),o}function xg(i,o,d,_){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,_),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,_),o.state!==i&&Gu.enqueueReplaceState(o,o.state,null)}function df(i,o,d,_){var k=i.stateNode;k.props=d,k.state=i.memoizedState,k.refs={},Jh(i);var M=o.contextType;typeof M=="object"&&M!==null?k.context=ti(M):(M=Tr(o)?xa:ir.current,k.context=oo(i,M)),k.state=i.memoizedState,M=o.getDerivedStateFromProps,typeof M=="function"&&(ff(i,o,M,d),k.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(o=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),o!==k.state&&Gu.enqueueReplaceState(k,k.state,null),zu(i,d,k,_),k.state=i.memoizedState),typeof k.componentDidMount=="function"&&(i.flags|=4194308)}function mo(i,o){try{var d="",_=o;do d+=pt(_),_=_.return;while(_);var k=d}catch(M){k=`
Error generating stack: `+M.message+`
`+M.stack}return{value:i,source:o,stack:k,digest:null}}function pf(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function gf(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var gy=typeof WeakMap=="function"?WeakMap:Map;function wg(i,o,d){d=ps(-1,d),d.tag=3,d.payload={element:null};var _=o.value;return d.callback=function(){ec||(ec=!0,Af=_),gf(i,o)},d}function bg(i,o,d){d=ps(-1,d),d.tag=3;var _=i.type.getDerivedStateFromError;if(typeof _=="function"){var k=o.value;d.payload=function(){return _(k)},d.callback=function(){gf(i,o)}}var M=i.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(d.callback=function(){gf(i,o),typeof _!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var J=o.stack;this.componentDidCatch(o.value,{componentStack:J!==null?J:""})}),d}function Sg(i,o,d){var _=i.pingCache;if(_===null){_=i.pingCache=new gy;var k=new Set;_.set(o,k)}else k=_.get(o),k===void 0&&(k=new Set,_.set(o,k));k.has(d)||(k.add(d),i=Py.bind(null,i,o,d),o.then(i,i))}function Cg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function kg(i,o,d,_,k){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=ps(-1,1),o.tag=2,Us(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=k,i)}var my=xe.ReactCurrentOwner,Er=!1;function dr(i,o,d,_){o.child=i===null?Xp(o,null,d,_):ho(o,i.child,d,_)}function Tg(i,o,d,_,k){d=d.render;var M=o.ref;return po(o,k),_=af(i,o,d,_,M,k),d=of(),i!==null&&!Er?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~k,gs(i,o,k)):(gn&&d&&Wh(o),o.flags|=1,dr(i,o,_,k),o.child)}function Eg(i,o,d,_,k){if(i===null){var M=d.type;return typeof M=="function"&&!Ff(M)&&M.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=M,Og(i,o,M,_,k)):(i=ac(d.type,null,_,o,o.mode,k),i.ref=o.ref,i.return=o,o.child=i)}if(M=i.child,(i.lanes&k)===0){var J=M.memoizedProps;if(d=d.compare,d=d!==null?d:oe,d(J,_)&&i.ref===o.ref)return gs(i,o,k)}return o.flags|=1,i=Ks(M,_),i.ref=o.ref,i.return=o,o.child=i}function Og(i,o,d,_,k){if(i!==null){var M=i.memoizedProps;if(oe(M,_)&&i.ref===o.ref)if(Er=!1,o.pendingProps=_=M,(i.lanes&k)!==0)(i.flags&131072)!==0&&(Er=!0);else return o.lanes=i.lanes,gs(i,o,k)}return mf(i,o,d,_,k)}function Pg(i,o,d){var _=o.pendingProps,k=_.children,M=i!==null?i.memoizedState:null;if(_.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(_o,Xr),Xr|=d;else{if((d&1073741824)===0)return i=M!==null?M.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,un(_o,Xr),Xr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=M!==null?M.baseLanes:d,un(_o,Xr),Xr|=_}else M!==null?(_=M.baseLanes|d,o.memoizedState=null):_=d,un(_o,Xr),Xr|=_;return dr(i,o,k,d),o.child}function Ag(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function mf(i,o,d,_,k){var M=Tr(d)?xa:ir.current;return M=oo(o,M),po(o,k),d=af(i,o,d,_,M,k),_=of(),i!==null&&!Er?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~k,gs(i,o,k)):(gn&&_&&Wh(o),o.flags|=1,dr(i,o,d,k),o.child)}function Mg(i,o,d,_,k){if(Tr(d)){var M=!0;Mu(o)}else M=!1;if(po(o,k),o.stateNode===null)Ku(i,o),yg(o,d,_),df(o,d,_,k),_=!0;else if(i===null){var J=o.stateNode,le=o.memoizedProps;J.props=le;var me=J.context,Ae=d.contextType;typeof Ae=="object"&&Ae!==null?Ae=ti(Ae):(Ae=Tr(d)?xa:ir.current,Ae=oo(o,Ae));var Ge=d.getDerivedStateFromProps,Qe=typeof Ge=="function"||typeof J.getSnapshotBeforeUpdate=="function";Qe||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(le!==_||me!==Ae)&&xg(o,J,_,Ae),Ws=!1;var Ue=o.memoizedState;J.state=Ue,zu(o,_,J,k),me=o.memoizedState,le!==_||Ue!==me||kr.current||Ws?(typeof Ge=="function"&&(ff(o,d,Ge,_),me=o.memoizedState),(le=Ws||_g(o,d,le,_,Ue,me,Ae))?(Qe||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(o.flags|=4194308)):(typeof J.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=_,o.memoizedState=me),J.props=_,J.state=me,J.context=Ae,_=le):(typeof J.componentDidMount=="function"&&(o.flags|=4194308),_=!1)}else{J=o.stateNode,Gp(i,o),le=o.memoizedProps,Ae=o.type===o.elementType?le:yi(o.type,le),J.props=Ae,Qe=o.pendingProps,Ue=J.context,me=d.contextType,typeof me=="object"&&me!==null?me=ti(me):(me=Tr(d)?xa:ir.current,me=oo(o,me));var lt=d.getDerivedStateFromProps;(Ge=typeof lt=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(le!==Qe||Ue!==me)&&xg(o,J,_,me),Ws=!1,Ue=o.memoizedState,J.state=Ue,zu(o,_,J,k);var ft=o.memoizedState;le!==Qe||Ue!==ft||kr.current||Ws?(typeof lt=="function"&&(ff(o,d,lt,_),ft=o.memoizedState),(Ae=Ws||_g(o,d,Ae,_,Ue,ft,me)||!1)?(Ge||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(_,ft,me),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(_,ft,me)),typeof J.componentDidUpdate=="function"&&(o.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof J.componentDidUpdate!="function"||le===i.memoizedProps&&Ue===i.memoizedState||(o.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||le===i.memoizedProps&&Ue===i.memoizedState||(o.flags|=1024),o.memoizedProps=_,o.memoizedState=ft),J.props=_,J.state=ft,J.context=me,_=Ae):(typeof J.componentDidUpdate!="function"||le===i.memoizedProps&&Ue===i.memoizedState||(o.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||le===i.memoizedProps&&Ue===i.memoizedState||(o.flags|=1024),_=!1)}return vf(i,o,d,_,M,k)}function vf(i,o,d,_,k,M){Ag(i,o);var J=(o.flags&128)!==0;if(!_&&!J)return k&&Rp(o,d,!1),gs(i,o,M);_=o.stateNode,my.current=o;var le=J&&typeof d.getDerivedStateFromError!="function"?null:_.render();return o.flags|=1,i!==null&&J?(o.child=ho(o,i.child,null,M),o.child=ho(o,null,le,M)):dr(i,o,le,M),o.memoizedState=_.state,k&&Rp(o,d,!0),o.child}function Ig(i){var o=i.stateNode;o.pendingContext?Lp(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Lp(i,o.context,!1),$h(i,o.containerInfo)}function jg(i,o,d,_,k){return co(),Yh(k),o.flags|=256,dr(i,o,d,_),o.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function yf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Lg(i,o,d){var _=o.pendingProps,k=yn.current,M=!1,J=(o.flags&128)!==0,le;if((le=J)||(le=i!==null&&i.memoizedState===null?!1:(k&2)!==0),le?(M=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(k|=1),un(yn,k&1),i===null)return Xh(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(J=_.children,i=_.fallback,M?(_=o.mode,M=o.child,J={mode:"hidden",children:J},(_&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=J):M=oc(J,_,0,null),i=Aa(i,_,d,null),M.return=o,i.return=o,M.sibling=i,o.child=M,o.child.memoizedState=yf(d),o.memoizedState=_f,i):xf(o,J));if(k=i.memoizedState,k!==null&&(le=k.dehydrated,le!==null))return vy(i,o,J,_,le,k,d);if(M){M=_.fallback,J=o.mode,k=i.child,le=k.sibling;var me={mode:"hidden",children:_.children};return(J&1)===0&&o.child!==k?(_=o.child,_.childLanes=0,_.pendingProps=me,o.deletions=null):(_=Ks(k,me),_.subtreeFlags=k.subtreeFlags&14680064),le!==null?M=Ks(le,M):(M=Aa(M,J,d,null),M.flags|=2),M.return=o,_.return=o,_.sibling=M,o.child=_,_=M,M=o.child,J=i.child.memoizedState,J=J===null?yf(d):{baseLanes:J.baseLanes|d,cachePool:null,transitions:J.transitions},M.memoizedState=J,M.childLanes=i.childLanes&~d,o.memoizedState=_f,_}return M=i.child,i=M.sibling,_=Ks(M,{mode:"visible",children:_.children}),(o.mode&1)===0&&(_.lanes=d),_.return=o,_.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=_,o.memoizedState=null,_}function xf(i,o){return o=oc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function qu(i,o,d,_){return _!==null&&Yh(_),ho(o,i.child,null,d),i=xf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function vy(i,o,d,_,k,M,J){if(d)return o.flags&256?(o.flags&=-257,_=pf(Error(t(422))),qu(i,o,J,_)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(M=_.fallback,k=o.mode,_=oc({mode:"visible",children:_.children},k,0,null),M=Aa(M,k,J,null),M.flags|=2,_.return=o,M.return=o,_.sibling=M,o.child=_,(o.mode&1)!==0&&ho(o,i.child,null,J),o.child.memoizedState=yf(J),o.memoizedState=_f,M);if((o.mode&1)===0)return qu(i,o,J,null);if(k.data==="$!"){if(_=k.nextSibling&&k.nextSibling.dataset,_)var le=_.dgst;return _=le,M=Error(t(419)),_=pf(M,_,void 0),qu(i,o,J,_)}if(le=(J&i.childLanes)!==0,Er||le){if(_=qn,_!==null){switch(J&-J){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(_.suspendedLanes|J))!==0?0:k,k!==0&&k!==M.retryLane&&(M.retryLane=k,ds(i,k),bi(_,i,k,-1))}return Rf(),_=pf(Error(t(421))),qu(i,o,J,_)}return k.data==="$?"?(o.flags|=128,o.child=i.child,o=Ay.bind(null,i),k._reactRetry=o,null):(i=M.treeContext,Hr=Ns(k.nextSibling),Ur=o,gn=!0,_i=null,i!==null&&($r[ei++]=hs,$r[ei++]=fs,$r[ei++]=wa,hs=i.id,fs=i.overflow,wa=o),o=xf(o,_.children),o.flags|=4096,o)}function Dg(i,o,d){i.lanes|=o;var _=i.alternate;_!==null&&(_.lanes|=o),Zh(i.return,o,d)}function wf(i,o,d,_,k){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:_,tail:d,tailMode:k}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=_,M.tail=d,M.tailMode=k)}function Rg(i,o,d){var _=o.pendingProps,k=_.revealOrder,M=_.tail;if(dr(i,o,_.children,d),_=yn.current,(_&2)!==0)_=_&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Dg(i,d,o);else if(i.tag===19)Dg(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}_&=1}if(un(yn,_),(o.mode&1)===0)o.memoizedState=null;else switch(k){case"forwards":for(d=o.child,k=null;d!==null;)i=d.alternate,i!==null&&Vu(i)===null&&(k=d),d=d.sibling;d=k,d===null?(k=o.child,o.child=null):(k=d.sibling,d.sibling=null),wf(o,!1,k,d,M);break;case"backwards":for(d=null,k=o.child,o.child=null;k!==null;){if(i=k.alternate,i!==null&&Vu(i)===null){o.child=k;break}i=k.sibling,k.sibling=d,d=k,k=i}wf(o,!0,d,null,M);break;case"together":wf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ku(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function gs(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),Ta|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=Ks(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=Ks(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function _y(i,o,d){switch(o.tag){case 3:Ig(o),co();break;case 5:Zp(o);break;case 1:Tr(o.type)&&Mu(o);break;case 4:$h(o,o.stateNode.containerInfo);break;case 10:var _=o.type._context,k=o.memoizedProps.value;un(Fu,_._currentValue),_._currentValue=k;break;case 13:if(_=o.memoizedState,_!==null)return _.dehydrated!==null?(un(yn,yn.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?Lg(i,o,d):(un(yn,yn.current&1),i=gs(i,o,d),i!==null?i.sibling:null);un(yn,yn.current&1);break;case 19:if(_=(d&o.childLanes)!==0,(i.flags&128)!==0){if(_)return Rg(i,o,d);o.flags|=128}if(k=o.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),un(yn,yn.current),_)break;return null;case 22:case 23:return o.lanes=0,Pg(i,o,d)}return gs(i,o,d)}var Fg,bf,Ng,Bg;Fg=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},bf=function(){},Ng=function(i,o,d,_){var k=i.memoizedProps;if(k!==_){i=o.stateNode,Ca(Yi.current);var M=null;switch(d){case"input":k=ks(i,k),_=ks(i,_),M=[];break;case"select":k=Ze({},k,{value:void 0}),_=Ze({},_,{value:void 0}),M=[];break;case"textarea":k=fi(i,k),_=fi(i,_),M=[];break;default:typeof k.onClick!="function"&&typeof _.onClick=="function"&&(i.onclick=Ou)}R(d,_);var J;d=null;for(Ae in k)if(!_.hasOwnProperty(Ae)&&k.hasOwnProperty(Ae)&&k[Ae]!=null)if(Ae==="style"){var le=k[Ae];for(J in le)le.hasOwnProperty(J)&&(d||(d={}),d[J]="")}else Ae!=="dangerouslySetInnerHTML"&&Ae!=="children"&&Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&Ae!=="autoFocus"&&(s.hasOwnProperty(Ae)?M||(M=[]):(M=M||[]).push(Ae,null));for(Ae in _){var me=_[Ae];if(le=k?.[Ae],_.hasOwnProperty(Ae)&&me!==le&&(me!=null||le!=null))if(Ae==="style")if(le){for(J in le)!le.hasOwnProperty(J)||me&&me.hasOwnProperty(J)||(d||(d={}),d[J]="");for(J in me)me.hasOwnProperty(J)&&le[J]!==me[J]&&(d||(d={}),d[J]=me[J])}else d||(M||(M=[]),M.push(Ae,d)),d=me;else Ae==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,le=le?le.__html:void 0,me!=null&&le!==me&&(M=M||[]).push(Ae,me)):Ae==="children"?typeof me!="string"&&typeof me!="number"||(M=M||[]).push(Ae,""+me):Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ae)?(me!=null&&Ae==="onScroll"&&hn("scroll",i),M||le===me||(M=[])):(M=M||[]).push(Ae,me))}d&&(M=M||[]).push("style",d);var Ae=M;(o.updateQueue=Ae)&&(o.flags|=4)}},Bg=function(i,o,d,_){d!==_&&(o.flags|=4)};function cl(i,o){if(!gn)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:_.sibling=null}}function ar(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,_=0;if(o)for(var k=i.child;k!==null;)d|=k.lanes|k.childLanes,_|=k.subtreeFlags&14680064,_|=k.flags&14680064,k.return=i,k=k.sibling;else for(k=i.child;k!==null;)d|=k.lanes|k.childLanes,_|=k.subtreeFlags,_|=k.flags,k.return=i,k=k.sibling;return i.subtreeFlags|=_,i.childLanes=d,o}function yy(i,o,d){var _=o.pendingProps;switch(Uh(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(o),null;case 1:return Tr(o.type)&&Au(),ar(o),null;case 3:return _=o.stateNode,go(),fn(kr),fn(ir),nf(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(i===null||i.child===null)&&(Du(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,_i!==null&&(jf(_i),_i=null))),bf(i,o),ar(o),null;case 5:ef(o);var k=Ca(sl.current);if(d=o.type,i!==null&&o.stateNode!=null)Ng(i,o,d,_,k),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!_){if(o.stateNode===null)throw Error(t(166));return ar(o),null}if(i=Ca(Yi.current),Du(o)){_=o.stateNode,d=o.type;var M=o.memoizedProps;switch(_[Xi]=o,_[el]=M,i=(o.mode&1)!==0,d){case"dialog":hn("cancel",_),hn("close",_);break;case"iframe":case"object":case"embed":hn("load",_);break;case"video":case"audio":for(k=0;k<Qo.length;k++)hn(Qo[k],_);break;case"source":hn("error",_);break;case"img":case"image":case"link":hn("error",_),hn("load",_);break;case"details":hn("toggle",_);break;case"input":Li(_,M),hn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!M.multiple},hn("invalid",_);break;case"textarea":Yt(_,M),hn("invalid",_)}R(d,M),k=null;for(var J in M)if(M.hasOwnProperty(J)){var le=M[J];J==="children"?typeof le=="string"?_.textContent!==le&&(M.suppressHydrationWarning!==!0&&Eu(_.textContent,le,i),k=["children",le]):typeof le=="number"&&_.textContent!==""+le&&(M.suppressHydrationWarning!==!0&&Eu(_.textContent,le,i),k=["children",""+le]):s.hasOwnProperty(J)&&le!=null&&J==="onScroll"&&hn("scroll",_)}switch(d){case"input":en(_),Di(_,M,!0);break;case"textarea":en(_),Ft(_);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(_.onclick=Ou)}_=k,o.updateQueue=_,_!==null&&(o.flags|=4)}else{J=k.nodeType===9?k:k.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=r(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=J.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof _.is=="string"?i=J.createElement(d,{is:_.is}):(i=J.createElement(d),d==="select"&&(J=i,_.multiple?J.multiple=!0:_.size&&(J.size=_.size))):i=J.createElementNS(i,d),i[Xi]=o,i[el]=_,Fg(i,o,!1,!1),o.stateNode=i;e:{switch(J=B(d,_),d){case"dialog":hn("cancel",i),hn("close",i),k=_;break;case"iframe":case"object":case"embed":hn("load",i),k=_;break;case"video":case"audio":for(k=0;k<Qo.length;k++)hn(Qo[k],i);k=_;break;case"source":hn("error",i),k=_;break;case"img":case"image":case"link":hn("error",i),hn("load",i),k=_;break;case"details":hn("toggle",i),k=_;break;case"input":Li(i,_),k=ks(i,_),hn("invalid",i);break;case"option":k=_;break;case"select":i._wrapperState={wasMultiple:!!_.multiple},k=Ze({},_,{value:void 0}),hn("invalid",i);break;case"textarea":Yt(i,_),k=fi(i,_),hn("invalid",i);break;default:k=_}R(d,k),le=k;for(M in le)if(le.hasOwnProperty(M)){var me=le[M];M==="style"?T(i,me):M==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&g(i,me)):M==="children"?typeof me=="string"?(d!=="textarea"||me!=="")&&m(i,me):typeof me=="number"&&m(i,""+me):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?me!=null&&M==="onScroll"&&hn("scroll",i):me!=null&&ue(i,M,me,J))}switch(d){case"input":en(i),Di(i,_,!1);break;case"textarea":en(i),Ft(i);break;case"option":_.value!=null&&i.setAttribute("value",""+Ut(_.value));break;case"select":i.multiple=!!_.multiple,M=_.value,M!=null?tn(i,!!_.multiple,M,!1):_.defaultValue!=null&&tn(i,!!_.multiple,_.defaultValue,!0);break;default:typeof k.onClick=="function"&&(i.onclick=Ou)}switch(d){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ar(o),null;case 6:if(i&&o.stateNode!=null)Bg(i,o,i.memoizedProps,_);else{if(typeof _!="string"&&o.stateNode===null)throw Error(t(166));if(d=Ca(sl.current),Ca(Yi.current),Du(o)){if(_=o.stateNode,d=o.memoizedProps,_[Xi]=o,(M=_.nodeValue!==d)&&(i=Ur,i!==null))switch(i.tag){case 3:Eu(_.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Eu(_.nodeValue,d,(i.mode&1)!==0)}M&&(o.flags|=4)}else _=(d.nodeType===9?d:d.ownerDocument).createTextNode(_),_[Xi]=o,o.stateNode=_}return ar(o),null;case 13:if(fn(yn),_=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(gn&&Hr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Wp(),co(),o.flags|=98560,M=!1;else if(M=Du(o),_!==null&&_.dehydrated!==null){if(i===null){if(!M)throw Error(t(318));if(M=o.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(t(317));M[Xi]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ar(o),M=!1}else _i!==null&&(jf(_i),_i=null),M=!0;if(!M)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(_=_!==null,_!==(i!==null&&i.memoizedState!==null)&&_&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(yn.current&1)!==0?Vn===0&&(Vn=3):Rf())),o.updateQueue!==null&&(o.flags|=4),ar(o),null);case 4:return go(),bf(i,o),i===null&&Jo(o.stateNode.containerInfo),ar(o),null;case 10:return Kh(o.type._context),ar(o),null;case 17:return Tr(o.type)&&Au(),ar(o),null;case 19:if(fn(yn),M=o.memoizedState,M===null)return ar(o),null;if(_=(o.flags&128)!==0,J=M.rendering,J===null)if(_)cl(M,!1);else{if(Vn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(J=Vu(i),J!==null){for(o.flags|=128,cl(M,!1),_=J.updateQueue,_!==null&&(o.updateQueue=_,o.flags|=4),o.subtreeFlags=0,_=d,d=o.child;d!==null;)M=d,i=_,M.flags&=14680066,J=M.alternate,J===null?(M.childLanes=0,M.lanes=i,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=J.childLanes,M.lanes=J.lanes,M.child=J.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=J.memoizedProps,M.memoizedState=J.memoizedState,M.updateQueue=J.updateQueue,M.type=J.type,i=J.dependencies,M.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return un(yn,yn.current&1|2),o.child}i=i.sibling}M.tail!==null&&ot()>yo&&(o.flags|=128,_=!0,cl(M,!1),o.lanes=4194304)}else{if(!_)if(i=Vu(J),i!==null){if(o.flags|=128,_=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),cl(M,!0),M.tail===null&&M.tailMode==="hidden"&&!J.alternate&&!gn)return ar(o),null}else 2*ot()-M.renderingStartTime>yo&&d!==1073741824&&(o.flags|=128,_=!0,cl(M,!1),o.lanes=4194304);M.isBackwards?(J.sibling=o.child,o.child=J):(d=M.last,d!==null?d.sibling=J:o.child=J,M.last=J)}return M.tail!==null?(o=M.tail,M.rendering=o,M.tail=o.sibling,M.renderingStartTime=ot(),o.sibling=null,d=yn.current,un(yn,_?d&1|2:d&1),o):(ar(o),null);case 22:case 23:return Df(),_=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==_&&(o.flags|=8192),_&&(o.mode&1)!==0?(Xr&1073741824)!==0&&(ar(o),o.subtreeFlags&6&&(o.flags|=8192)):ar(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function xy(i,o){switch(Uh(o),o.tag){case 1:return Tr(o.type)&&Au(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return go(),fn(kr),fn(ir),nf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return ef(o),null;case 13:if(fn(yn),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));co()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return fn(yn),null;case 4:return go(),null;case 10:return Kh(o.type._context),null;case 22:case 23:return Df(),null;case 24:return null;default:return null}}var Zu=!1,or=!1,wy=typeof WeakSet=="function"?WeakSet:Set,ht=null;function vo(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(_){Tn(i,o,_)}else d.current=null}function Sf(i,o,d){try{d()}catch(_){Tn(i,o,_)}}var zg=!1;function by(i,o){if(Lh=Kr,i=St(),kt(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var _=d.getSelection&&d.getSelection();if(_&&_.rangeCount!==0){d=_.anchorNode;var k=_.anchorOffset,M=_.focusNode;_=_.focusOffset;try{d.nodeType,M.nodeType}catch{d=null;break e}var J=0,le=-1,me=-1,Ae=0,Ge=0,Qe=i,Ue=null;t:for(;;){for(var lt;Qe!==d||k!==0&&Qe.nodeType!==3||(le=J+k),Qe!==M||_!==0&&Qe.nodeType!==3||(me=J+_),Qe.nodeType===3&&(J+=Qe.nodeValue.length),(lt=Qe.firstChild)!==null;)Ue=Qe,Qe=lt;for(;;){if(Qe===i)break t;if(Ue===d&&++Ae===k&&(le=J),Ue===M&&++Ge===_&&(me=J),(lt=Qe.nextSibling)!==null)break;Qe=Ue,Ue=Qe.parentNode}Qe=lt}d=le===-1||me===-1?null:{start:le,end:me}}else d=null}d=d||{start:0,end:0}}else d=null;for(Dh={focusedElem:i,selectionRange:d},Kr=!1,ht=o;ht!==null;)if(o=ht,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ht=i;else for(;ht!==null;){o=ht;try{var ft=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var gt=ft.memoizedProps,An=ft.memoizedState,ke=o.stateNode,_e=ke.getSnapshotBeforeUpdate(o.elementType===o.type?gt:yi(o.type,gt),An);ke.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Pe=o.stateNode.containerInfo;Pe.nodeType===1?Pe.textContent="":Pe.nodeType===9&&Pe.documentElement&&Pe.removeChild(Pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(tt){Tn(o,o.return,tt)}if(i=o.sibling,i!==null){i.return=o.return,ht=i;break}ht=o.return}return ft=zg,zg=!1,ft}function hl(i,o,d){var _=o.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var k=_=_.next;do{if((k.tag&i)===i){var M=k.destroy;k.destroy=void 0,M!==void 0&&Sf(o,d,M)}k=k.next}while(k!==_)}}function Qu(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var _=d.create;d.destroy=_()}d=d.next}while(d!==o)}}function Cf(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function Vg(i){var o=i.alternate;o!==null&&(i.alternate=null,Vg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Xi],delete o[el],delete o[Bh],delete o[iy],delete o[sy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Wg(i){return i.tag===5||i.tag===3||i.tag===4}function Ug(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kf(i,o,d){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Ou));else if(_!==4&&(i=i.child,i!==null))for(kf(i,o,d),i=i.sibling;i!==null;)kf(i,o,d),i=i.sibling}function Tf(i,o,d){var _=i.tag;if(_===5||_===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(_!==4&&(i=i.child,i!==null))for(Tf(i,o,d),i=i.sibling;i!==null;)Tf(i,o,d),i=i.sibling}var Qn=null,xi=!1;function Hs(i,o,d){for(d=d.child;d!==null;)Hg(i,o,d),d=d.sibling}function Hg(i,o,d){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(qe,d)}catch{}switch(d.tag){case 5:or||vo(d,o);case 6:var _=Qn,k=xi;Qn=null,Hs(i,o,d),Qn=_,xi=k,Qn!==null&&(xi?(i=Qn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Qn.removeChild(d.stateNode));break;case 18:Qn!==null&&(xi?(i=Qn,d=d.stateNode,i.nodeType===8?Nh(i.parentNode,d):i.nodeType===1&&Nh(i,d),Kt(i)):Nh(Qn,d.stateNode));break;case 4:_=Qn,k=xi,Qn=d.stateNode.containerInfo,xi=!0,Hs(i,o,d),Qn=_,xi=k;break;case 0:case 11:case 14:case 15:if(!or&&(_=d.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){k=_=_.next;do{var M=k,J=M.destroy;M=M.tag,J!==void 0&&((M&2)!==0||(M&4)!==0)&&Sf(d,o,J),k=k.next}while(k!==_)}Hs(i,o,d);break;case 1:if(!or&&(vo(d,o),_=d.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=d.memoizedProps,_.state=d.memoizedState,_.componentWillUnmount()}catch(le){Tn(d,o,le)}Hs(i,o,d);break;case 21:Hs(i,o,d);break;case 22:d.mode&1?(or=(_=or)||d.memoizedState!==null,Hs(i,o,d),or=_):Hs(i,o,d);break;default:Hs(i,o,d)}}function Xg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new wy),o.forEach(function(_){var k=My.bind(null,i,_);d.has(_)||(d.add(_),_.then(k,k))})}}function wi(i,o){var d=o.deletions;if(d!==null)for(var _=0;_<d.length;_++){var k=d[_];try{var M=i,J=o,le=J;e:for(;le!==null;){switch(le.tag){case 5:Qn=le.stateNode,xi=!1;break e;case 3:Qn=le.stateNode.containerInfo,xi=!0;break e;case 4:Qn=le.stateNode.containerInfo,xi=!0;break e}le=le.return}if(Qn===null)throw Error(t(160));Hg(M,J,k),Qn=null,xi=!1;var me=k.alternate;me!==null&&(me.return=null),k.return=null}catch(Ae){Tn(k,o,Ae)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Yg(o,i),o=o.sibling}function Yg(i,o){var d=i.alternate,_=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(wi(o,i),qi(i),_&4){try{hl(3,i,i.return),Qu(3,i)}catch(gt){Tn(i,i.return,gt)}try{hl(5,i,i.return)}catch(gt){Tn(i,i.return,gt)}}break;case 1:wi(o,i),qi(i),_&512&&d!==null&&vo(d,d.return);break;case 5:if(wi(o,i),qi(i),_&512&&d!==null&&vo(d,d.return),i.flags&32){var k=i.stateNode;try{m(k,"")}catch(gt){Tn(i,i.return,gt)}}if(_&4&&(k=i.stateNode,k!=null)){var M=i.memoizedProps,J=d!==null?d.memoizedProps:M,le=i.type,me=i.updateQueue;if(i.updateQueue=null,me!==null)try{le==="input"&&M.type==="radio"&&M.name!=null&&la(k,M),B(le,J);var Ae=B(le,M);for(J=0;J<me.length;J+=2){var Ge=me[J],Qe=me[J+1];Ge==="style"?T(k,Qe):Ge==="dangerouslySetInnerHTML"?g(k,Qe):Ge==="children"?m(k,Qe):ue(k,Ge,Qe,Ae)}switch(le){case"input":Fr(k,M);break;case"textarea":Ts(k,M);break;case"select":var Ue=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!M.multiple;var lt=M.value;lt!=null?tn(k,!!M.multiple,lt,!1):Ue!==!!M.multiple&&(M.defaultValue!=null?tn(k,!!M.multiple,M.defaultValue,!0):tn(k,!!M.multiple,M.multiple?[]:"",!1))}k[el]=M}catch(gt){Tn(i,i.return,gt)}}break;case 6:if(wi(o,i),qi(i),_&4){if(i.stateNode===null)throw Error(t(162));k=i.stateNode,M=i.memoizedProps;try{k.nodeValue=M}catch(gt){Tn(i,i.return,gt)}}break;case 3:if(wi(o,i),qi(i),_&4&&d!==null&&d.memoizedState.isDehydrated)try{Kt(o.containerInfo)}catch(gt){Tn(i,i.return,gt)}break;case 4:wi(o,i),qi(i);break;case 13:wi(o,i),qi(i),k=i.child,k.flags&8192&&(M=k.memoizedState!==null,k.stateNode.isHidden=M,!M||k.alternate!==null&&k.alternate.memoizedState!==null||(Pf=ot())),_&4&&Xg(i);break;case 22:if(Ge=d!==null&&d.memoizedState!==null,i.mode&1?(or=(Ae=or)||Ge,wi(o,i),or=Ae):wi(o,i),qi(i),_&8192){if(Ae=i.memoizedState!==null,(i.stateNode.isHidden=Ae)&&!Ge&&(i.mode&1)!==0)for(ht=i,Ge=i.child;Ge!==null;){for(Qe=ht=Ge;ht!==null;){switch(Ue=ht,lt=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:hl(4,Ue,Ue.return);break;case 1:vo(Ue,Ue.return);var ft=Ue.stateNode;if(typeof ft.componentWillUnmount=="function"){_=Ue,d=Ue.return;try{o=_,ft.props=o.memoizedProps,ft.state=o.memoizedState,ft.componentWillUnmount()}catch(gt){Tn(_,d,gt)}}break;case 5:vo(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){Kg(Qe);continue}}lt!==null?(lt.return=Ue,ht=lt):Kg(Qe)}Ge=Ge.sibling}e:for(Ge=null,Qe=i;;){if(Qe.tag===5){if(Ge===null){Ge=Qe;try{k=Qe.stateNode,Ae?(M=k.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(le=Qe.stateNode,me=Qe.memoizedProps.style,J=me!=null&&me.hasOwnProperty("display")?me.display:null,le.style.display=C("display",J))}catch(gt){Tn(i,i.return,gt)}}}else if(Qe.tag===6){if(Ge===null)try{Qe.stateNode.nodeValue=Ae?"":Qe.memoizedProps}catch(gt){Tn(i,i.return,gt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===i)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===i)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===i)break e;Ge===Qe&&(Ge=null),Qe=Qe.return}Ge===Qe&&(Ge=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:wi(o,i),qi(i),_&4&&Xg(i);break;case 21:break;default:wi(o,i),qi(i)}}function qi(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(Wg(d)){var _=d;break e}d=d.return}throw Error(t(160))}switch(_.tag){case 5:var k=_.stateNode;_.flags&32&&(m(k,""),_.flags&=-33);var M=Ug(i);Tf(i,M,k);break;case 3:case 4:var J=_.stateNode.containerInfo,le=Ug(i);kf(i,le,J);break;default:throw Error(t(161))}}catch(me){Tn(i,i.return,me)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Sy(i,o,d){ht=i,Gg(i)}function Gg(i,o,d){for(var _=(i.mode&1)!==0;ht!==null;){var k=ht,M=k.child;if(k.tag===22&&_){var J=k.memoizedState!==null||Zu;if(!J){var le=k.alternate,me=le!==null&&le.memoizedState!==null||or;le=Zu;var Ae=or;if(Zu=J,(or=me)&&!Ae)for(ht=k;ht!==null;)J=ht,me=J.child,J.tag===22&&J.memoizedState!==null?Zg(k):me!==null?(me.return=J,ht=me):Zg(k);for(;M!==null;)ht=M,Gg(M),M=M.sibling;ht=k,Zu=le,or=Ae}qg(i)}else(k.subtreeFlags&8772)!==0&&M!==null?(M.return=k,ht=M):qg(i)}}function qg(i){for(;ht!==null;){var o=ht;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:or||Qu(5,o);break;case 1:var _=o.stateNode;if(o.flags&4&&!or)if(d===null)_.componentDidMount();else{var k=o.elementType===o.type?d.memoizedProps:yi(o.type,d.memoizedProps);_.componentDidUpdate(k,d.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var M=o.updateQueue;M!==null&&Kp(o,M,_);break;case 3:var J=o.updateQueue;if(J!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Kp(o,J,d)}break;case 5:var le=o.stateNode;if(d===null&&o.flags&4){d=le;var me=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&d.focus();break;case"img":me.src&&(d.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Ae=o.alternate;if(Ae!==null){var Ge=Ae.memoizedState;if(Ge!==null){var Qe=Ge.dehydrated;Qe!==null&&Kt(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||o.flags&512&&Cf(o)}catch(Ue){Tn(o,o.return,Ue)}}if(o===i){ht=null;break}if(d=o.sibling,d!==null){d.return=o.return,ht=d;break}ht=o.return}}function Kg(i){for(;ht!==null;){var o=ht;if(o===i){ht=null;break}var d=o.sibling;if(d!==null){d.return=o.return,ht=d;break}ht=o.return}}function Zg(i){for(;ht!==null;){var o=ht;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{Qu(4,o)}catch(me){Tn(o,d,me)}break;case 1:var _=o.stateNode;if(typeof _.componentDidMount=="function"){var k=o.return;try{_.componentDidMount()}catch(me){Tn(o,k,me)}}var M=o.return;try{Cf(o)}catch(me){Tn(o,M,me)}break;case 5:var J=o.return;try{Cf(o)}catch(me){Tn(o,J,me)}}}catch(me){Tn(o,o.return,me)}if(o===i){ht=null;break}var le=o.sibling;if(le!==null){le.return=o.return,ht=le;break}ht=o.return}}var Cy=Math.ceil,Ju=xe.ReactCurrentDispatcher,Ef=xe.ReactCurrentOwner,ri=xe.ReactCurrentBatchConfig,Qt=0,qn=null,Ln=null,Jn=0,Xr=0,_o=Bs(0),Vn=0,fl=null,Ta=0,$u=0,Of=0,dl=null,Or=null,Pf=0,yo=1/0,ms=null,ec=!1,Af=null,Xs=null,tc=!1,Ys=null,nc=0,pl=0,Mf=null,rc=-1,ic=0;function pr(){return(Qt&6)!==0?ot():rc!==-1?rc:rc=ot()}function Gs(i){return(i.mode&1)===0?1:(Qt&2)!==0&&Jn!==0?Jn&-Jn:oy.transition!==null?(ic===0&&(ic=Os()),ic):(i=Vt,i!==0||(i=window.event,i=i===void 0?16:ua(i.type)),i)}function bi(i,o,d,_){if(50<pl)throw pl=0,Mf=null,Error(t(185));Fi(i,d,_),((Qt&2)===0||i!==qn)&&(i===qn&&((Qt&2)===0&&($u|=d),Vn===4&&qs(i,Jn)),Pr(i,_),d===1&&Qt===0&&(o.mode&1)===0&&(yo=ot()+500,Iu&&Vs()))}function Pr(i,o){var d=i.callbackNode;Nn(i,o);var _=tr(i,i===qn?Jn:0);if(_===0)d!==null&&st(d),i.callbackNode=null,i.callbackPriority=0;else if(o=_&-_,i.callbackPriority!==o){if(d!=null&&st(d),o===1)i.tag===0?ay(Jg.bind(null,i)):Fp(Jg.bind(null,i)),ny(function(){(Qt&6)===0&&Vs()}),d=null;else{switch(Bi(_)){case 1:d=bt;break;case 4:d=pn;break;case 16:d=sn;break;case 536870912:d=ln;break;default:d=sn}d=a0(d,Qg.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function Qg(i,o){if(rc=-1,ic=0,(Qt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(xo()&&i.callbackNode!==d)return null;var _=tr(i,i===qn?Jn:0);if(_===0)return null;if((_&30)!==0||(_&i.expiredLanes)!==0||o)o=sc(i,_);else{o=_;var k=Qt;Qt|=2;var M=e0();(qn!==i||Jn!==o)&&(ms=null,yo=ot()+500,Oa(i,o));do try{Ey();break}catch(le){$g(i,le)}while(!0);qh(),Ju.current=M,Qt=k,Ln!==null?o=0:(qn=null,Jn=0,o=Vn)}if(o!==0){if(o===2&&(k=Es(i),k!==0&&(_=k,o=If(i,k))),o===1)throw d=fl,Oa(i,0),qs(i,_),Pr(i,ot()),d;if(o===6)qs(i,_);else{if(k=i.current.alternate,(_&30)===0&&!ky(k)&&(o=sc(i,_),o===2&&(M=Es(i),M!==0&&(_=M,o=If(i,M))),o===1))throw d=fl,Oa(i,0),qs(i,_),Pr(i,ot()),d;switch(i.finishedWork=k,i.finishedLanes=_,o){case 0:case 1:throw Error(t(345));case 2:Pa(i,Or,ms);break;case 3:if(qs(i,_),(_&130023424)===_&&(o=Pf+500-ot(),10<o)){if(tr(i,0)!==0)break;if(k=i.suspendedLanes,(k&_)!==_){pr(),i.pingedLanes|=i.suspendedLanes&k;break}i.timeoutHandle=Fh(Pa.bind(null,i,Or,ms),o);break}Pa(i,Or,ms);break;case 4:if(qs(i,_),(_&4194240)===_)break;for(o=i.eventTimes,k=-1;0<_;){var J=31-qt(_);M=1<<J,J=o[J],J>k&&(k=J),_&=~M}if(_=k,_=ot()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*Cy(_/1960))-_,10<_){i.timeoutHandle=Fh(Pa.bind(null,i,Or,ms),_);break}Pa(i,Or,ms);break;case 5:Pa(i,Or,ms);break;default:throw Error(t(329))}}}return Pr(i,ot()),i.callbackNode===d?Qg.bind(null,i):null}function If(i,o){var d=dl;return i.current.memoizedState.isDehydrated&&(Oa(i,o).flags|=256),i=sc(i,o),i!==2&&(o=Or,Or=d,o!==null&&jf(o)),i}function jf(i){Or===null?Or=i:Or.push.apply(Or,i)}function ky(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var _=0;_<d.length;_++){var k=d[_],M=k.getSnapshot;k=k.value;try{if(!jn(M(),k))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qs(i,o){for(o&=~Of,o&=~$u,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-qt(o),_=1<<d;i[d]=-1,o&=~_}}function Jg(i){if((Qt&6)!==0)throw Error(t(327));xo();var o=tr(i,0);if((o&1)===0)return Pr(i,ot()),null;var d=sc(i,o);if(i.tag!==0&&d===2){var _=Es(i);_!==0&&(o=_,d=If(i,_))}if(d===1)throw d=fl,Oa(i,0),qs(i,o),Pr(i,ot()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Pa(i,Or,ms),Pr(i,ot()),null}function Lf(i,o){var d=Qt;Qt|=1;try{return i(o)}finally{Qt=d,Qt===0&&(yo=ot()+500,Iu&&Vs())}}function Ea(i){Ys!==null&&Ys.tag===0&&(Qt&6)===0&&xo();var o=Qt;Qt|=1;var d=ri.transition,_=Vt;try{if(ri.transition=null,Vt=1,i)return i()}finally{Vt=_,ri.transition=d,Qt=o,(Qt&6)===0&&Vs()}}function Df(){Xr=_o.current,fn(_o)}function Oa(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,ty(d)),Ln!==null)for(d=Ln.return;d!==null;){var _=d;switch(Uh(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Au();break;case 3:go(),fn(kr),fn(ir),nf();break;case 5:ef(_);break;case 4:go();break;case 13:fn(yn);break;case 19:fn(yn);break;case 10:Kh(_.type._context);break;case 22:case 23:Df()}d=d.return}if(qn=i,Ln=i=Ks(i.current,null),Jn=Xr=o,Vn=0,fl=null,Of=$u=Ta=0,Or=dl=null,Sa!==null){for(o=0;o<Sa.length;o++)if(d=Sa[o],_=d.interleaved,_!==null){d.interleaved=null;var k=_.next,M=d.pending;if(M!==null){var J=M.next;M.next=k,_.next=J}d.pending=_}Sa=null}return i}function $g(i,o){do{var d=Ln;try{if(qh(),Wu.current=Yu,Uu){for(var _=xn.memoizedState;_!==null;){var k=_.queue;k!==null&&(k.pending=null),_=_.next}Uu=!1}if(ka=0,Gn=zn=xn=null,al=!1,ol=0,Ef.current=null,d===null||d.return===null){Vn=1,fl=o,Ln=null;break}e:{var M=i,J=d.return,le=d,me=o;if(o=Jn,le.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ae=me,Ge=le,Qe=Ge.tag;if((Ge.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var Ue=Ge.alternate;Ue?(Ge.updateQueue=Ue.updateQueue,Ge.memoizedState=Ue.memoizedState,Ge.lanes=Ue.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var lt=Cg(J);if(lt!==null){lt.flags&=-257,kg(lt,J,le,M,o),lt.mode&1&&Sg(M,Ae,o),o=lt,me=Ae;var ft=o.updateQueue;if(ft===null){var gt=new Set;gt.add(me),o.updateQueue=gt}else ft.add(me);break e}else{if((o&1)===0){Sg(M,Ae,o),Rf();break e}me=Error(t(426))}}else if(gn&&le.mode&1){var An=Cg(J);if(An!==null){(An.flags&65536)===0&&(An.flags|=256),kg(An,J,le,M,o),Yh(mo(me,le));break e}}M=me=mo(me,le),Vn!==4&&(Vn=2),dl===null?dl=[M]:dl.push(M),M=J;do{switch(M.tag){case 3:M.flags|=65536,o&=-o,M.lanes|=o;var ke=wg(M,me,o);qp(M,ke);break e;case 1:le=me;var _e=M.type,Pe=M.stateNode;if((M.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Pe!==null&&typeof Pe.componentDidCatch=="function"&&(Xs===null||!Xs.has(Pe)))){M.flags|=65536,o&=-o,M.lanes|=o;var tt=bg(M,le,o);qp(M,tt);break e}}M=M.return}while(M!==null)}n0(d)}catch(mt){o=mt,Ln===d&&d!==null&&(Ln=d=d.return);continue}break}while(!0)}function e0(){var i=Ju.current;return Ju.current=Yu,i===null?Yu:i}function Rf(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),qn===null||(Ta&268435455)===0&&($u&268435455)===0||qs(qn,Jn)}function sc(i,o){var d=Qt;Qt|=2;var _=e0();(qn!==i||Jn!==o)&&(ms=null,Oa(i,o));do try{Ty();break}catch(k){$g(i,k)}while(!0);if(qh(),Qt=d,Ju.current=_,Ln!==null)throw Error(t(261));return qn=null,Jn=0,Vn}function Ty(){for(;Ln!==null;)t0(Ln)}function Ey(){for(;Ln!==null&&!xt();)t0(Ln)}function t0(i){var o=s0(i.alternate,i,Xr);i.memoizedProps=i.pendingProps,o===null?n0(i):Ln=o,Ef.current=null}function n0(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=yy(d,o,Xr),d!==null){Ln=d;return}}else{if(d=xy(d,o),d!==null){d.flags&=32767,Ln=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vn=6,Ln=null;return}}if(o=o.sibling,o!==null){Ln=o;return}Ln=o=i}while(o!==null);Vn===0&&(Vn=5)}function Pa(i,o,d){var _=Vt,k=ri.transition;try{ri.transition=null,Vt=1,Oy(i,o,d,_)}finally{ri.transition=k,Vt=_}return null}function Oy(i,o,d,_){do xo();while(Ys!==null);if((Qt&6)!==0)throw Error(t(327));d=i.finishedWork;var k=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var M=d.lanes|d.childLanes;if(qa(i,M),i===qn&&(Ln=qn=null,Jn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||tc||(tc=!0,a0(sn,function(){return xo(),null})),M=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||M){M=ri.transition,ri.transition=null;var J=Vt;Vt=1;var le=Qt;Qt|=4,Ef.current=null,by(i,d),Yg(d,i),jt(Dh),Kr=!!Lh,Dh=Lh=null,i.current=d,Sy(d),vt(),Qt=le,Vt=J,ri.transition=M}else i.current=d;if(tc&&(tc=!1,Ys=i,nc=k),M=i.pendingLanes,M===0&&(Xs=null),an(d.stateNode),Pr(i,ot()),o!==null)for(_=i.onRecoverableError,d=0;d<o.length;d++)k=o[d],_(k.value,{componentStack:k.stack,digest:k.digest});if(ec)throw ec=!1,i=Af,Af=null,i;return(nc&1)!==0&&i.tag!==0&&xo(),M=i.pendingLanes,(M&1)!==0?i===Mf?pl++:(pl=0,Mf=i):pl=0,Vs(),null}function xo(){if(Ys!==null){var i=Bi(nc),o=ri.transition,d=Vt;try{if(ri.transition=null,Vt=16>i?16:i,Ys===null)var _=!1;else{if(i=Ys,Ys=null,nc=0,(Qt&6)!==0)throw Error(t(331));var k=Qt;for(Qt|=4,ht=i.current;ht!==null;){var M=ht,J=M.child;if((ht.flags&16)!==0){var le=M.deletions;if(le!==null){for(var me=0;me<le.length;me++){var Ae=le[me];for(ht=Ae;ht!==null;){var Ge=ht;switch(Ge.tag){case 0:case 11:case 15:hl(8,Ge,M)}var Qe=Ge.child;if(Qe!==null)Qe.return=Ge,ht=Qe;else for(;ht!==null;){Ge=ht;var Ue=Ge.sibling,lt=Ge.return;if(Vg(Ge),Ge===Ae){ht=null;break}if(Ue!==null){Ue.return=lt,ht=Ue;break}ht=lt}}}var ft=M.alternate;if(ft!==null){var gt=ft.child;if(gt!==null){ft.child=null;do{var An=gt.sibling;gt.sibling=null,gt=An}while(gt!==null)}}ht=M}}if((M.subtreeFlags&2064)!==0&&J!==null)J.return=M,ht=J;else e:for(;ht!==null;){if(M=ht,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:hl(9,M,M.return)}var ke=M.sibling;if(ke!==null){ke.return=M.return,ht=ke;break e}ht=M.return}}var _e=i.current;for(ht=_e;ht!==null;){J=ht;var Pe=J.child;if((J.subtreeFlags&2064)!==0&&Pe!==null)Pe.return=J,ht=Pe;else e:for(J=_e;ht!==null;){if(le=ht,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:Qu(9,le)}}catch(mt){Tn(le,le.return,mt)}if(le===J){ht=null;break e}var tt=le.sibling;if(tt!==null){tt.return=le.return,ht=tt;break e}ht=le.return}}if(Qt=k,Vs(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(qe,i)}catch{}_=!0}return _}finally{Vt=d,ri.transition=o}}return!1}function r0(i,o,d){o=mo(d,o),o=wg(i,o,1),i=Us(i,o,1),o=pr(),i!==null&&(Fi(i,1,o),Pr(i,o))}function Tn(i,o,d){if(i.tag===3)r0(i,i,d);else for(;o!==null;){if(o.tag===3){r0(o,i,d);break}else if(o.tag===1){var _=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Xs===null||!Xs.has(_))){i=mo(d,i),i=bg(o,i,1),o=Us(o,i,1),i=pr(),o!==null&&(Fi(o,1,i),Pr(o,i));break}}o=o.return}}function Py(i,o,d){var _=i.pingCache;_!==null&&_.delete(o),o=pr(),i.pingedLanes|=i.suspendedLanes&d,qn===i&&(Jn&d)===d&&(Vn===4||Vn===3&&(Jn&130023424)===Jn&&500>ot()-Pf?Oa(i,0):Of|=d),Pr(i,o)}function i0(i,o){o===0&&((i.mode&1)===0?o=1:(o=Cn,Cn<<=1,(Cn&130023424)===0&&(Cn=4194304)));var d=pr();i=ds(i,o),i!==null&&(Fi(i,o,d),Pr(i,d))}function Ay(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),i0(i,d)}function My(i,o){var d=0;switch(i.tag){case 13:var _=i.stateNode,k=i.memoizedState;k!==null&&(d=k.retryLane);break;case 19:_=i.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(o),i0(i,d)}var s0;s0=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||kr.current)Er=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return Er=!1,_y(i,o,d);Er=(i.flags&131072)!==0}else Er=!1,gn&&(o.flags&1048576)!==0&&Np(o,Lu,o.index);switch(o.lanes=0,o.tag){case 2:var _=o.type;Ku(i,o),i=o.pendingProps;var k=oo(o,ir.current);po(o,d),k=af(null,o,_,i,k,d);var M=of();return o.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tr(_)?(M=!0,Mu(o)):M=!1,o.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Jh(o),k.updater=Gu,o.stateNode=k,k._reactInternals=o,df(o,_,i,d),o=vf(null,o,_,!0,M,d)):(o.tag=0,gn&&M&&Wh(o),dr(null,o,k,d),o=o.child),o;case 16:_=o.elementType;e:{switch(Ku(i,o),i=o.pendingProps,k=_._init,_=k(_._payload),o.type=_,k=o.tag=jy(_),i=yi(_,i),k){case 0:o=mf(null,o,_,i,d);break e;case 1:o=Mg(null,o,_,i,d);break e;case 11:o=Tg(null,o,_,i,d);break e;case 14:o=Eg(null,o,_,yi(_.type,i),d);break e}throw Error(t(306,_,""))}return o;case 0:return _=o.type,k=o.pendingProps,k=o.elementType===_?k:yi(_,k),mf(i,o,_,k,d);case 1:return _=o.type,k=o.pendingProps,k=o.elementType===_?k:yi(_,k),Mg(i,o,_,k,d);case 3:e:{if(Ig(o),i===null)throw Error(t(387));_=o.pendingProps,M=o.memoizedState,k=M.element,Gp(i,o),zu(o,_,null,d);var J=o.memoizedState;if(_=J.element,M.isDehydrated)if(M={element:_,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},o.updateQueue.baseState=M,o.memoizedState=M,o.flags&256){k=mo(Error(t(423)),o),o=jg(i,o,_,d,k);break e}else if(_!==k){k=mo(Error(t(424)),o),o=jg(i,o,_,d,k);break e}else for(Hr=Ns(o.stateNode.containerInfo.firstChild),Ur=o,gn=!0,_i=null,d=Xp(o,null,_,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(co(),_===k){o=gs(i,o,d);break e}dr(i,o,_,d)}o=o.child}return o;case 5:return Zp(o),i===null&&Xh(o),_=o.type,k=o.pendingProps,M=i!==null?i.memoizedProps:null,J=k.children,Rh(_,k)?J=null:M!==null&&Rh(_,M)&&(o.flags|=32),Ag(i,o),dr(i,o,J,d),o.child;case 6:return i===null&&Xh(o),null;case 13:return Lg(i,o,d);case 4:return $h(o,o.stateNode.containerInfo),_=o.pendingProps,i===null?o.child=ho(o,null,_,d):dr(i,o,_,d),o.child;case 11:return _=o.type,k=o.pendingProps,k=o.elementType===_?k:yi(_,k),Tg(i,o,_,k,d);case 7:return dr(i,o,o.pendingProps,d),o.child;case 8:return dr(i,o,o.pendingProps.children,d),o.child;case 12:return dr(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(_=o.type._context,k=o.pendingProps,M=o.memoizedProps,J=k.value,un(Fu,_._currentValue),_._currentValue=J,M!==null)if(jn(M.value,J)){if(M.children===k.children&&!kr.current){o=gs(i,o,d);break e}}else for(M=o.child,M!==null&&(M.return=o);M!==null;){var le=M.dependencies;if(le!==null){J=M.child;for(var me=le.firstContext;me!==null;){if(me.context===_){if(M.tag===1){me=ps(-1,d&-d),me.tag=2;var Ae=M.updateQueue;if(Ae!==null){Ae=Ae.shared;var Ge=Ae.pending;Ge===null?me.next=me:(me.next=Ge.next,Ge.next=me),Ae.pending=me}}M.lanes|=d,me=M.alternate,me!==null&&(me.lanes|=d),Zh(M.return,d,o),le.lanes|=d;break}me=me.next}}else if(M.tag===10)J=M.type===o.type?null:M.child;else if(M.tag===18){if(J=M.return,J===null)throw Error(t(341));J.lanes|=d,le=J.alternate,le!==null&&(le.lanes|=d),Zh(J,d,o),J=M.sibling}else J=M.child;if(J!==null)J.return=M;else for(J=M;J!==null;){if(J===o){J=null;break}if(M=J.sibling,M!==null){M.return=J.return,J=M;break}J=J.return}M=J}dr(i,o,k.children,d),o=o.child}return o;case 9:return k=o.type,_=o.pendingProps.children,po(o,d),k=ti(k),_=_(k),o.flags|=1,dr(i,o,_,d),o.child;case 14:return _=o.type,k=yi(_,o.pendingProps),k=yi(_.type,k),Eg(i,o,_,k,d);case 15:return Og(i,o,o.type,o.pendingProps,d);case 17:return _=o.type,k=o.pendingProps,k=o.elementType===_?k:yi(_,k),Ku(i,o),o.tag=1,Tr(_)?(i=!0,Mu(o)):i=!1,po(o,d),yg(o,_,k),df(o,_,k,d),vf(null,o,_,!0,i,d);case 19:return Rg(i,o,d);case 22:return Pg(i,o,d)}throw Error(t(156,o.tag))};function a0(i,o){return at(i,o)}function Iy(i,o,d,_){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(i,o,d,_){return new Iy(i,o,d,_)}function Ff(i){return i=i.prototype,!(!i||!i.isReactComponent)}function jy(i){if(typeof i=="function")return Ff(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Ke)return 11;if(i===Bt)return 14}return 2}function Ks(i,o){var d=i.alternate;return d===null?(d=ii(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function ac(i,o,d,_,k,M){var J=2;if(_=i,typeof i=="function")Ff(i)&&(J=1);else if(typeof i=="string")J=5;else e:switch(i){case Ve:return Aa(d.children,k,M,o);case He:J=8,k|=8;break;case Je:return i=ii(12,d,o,k|2),i.elementType=Je,i.lanes=M,i;case dt:return i=ii(13,d,o,k),i.elementType=dt,i.lanes=M,i;case ze:return i=ii(19,d,o,k),i.elementType=ze,i.lanes=M,i;case wt:return oc(d,k,M,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ut:J=10;break e;case Ie:J=9;break e;case Ke:J=11;break e;case Bt:J=14;break e;case Le:J=16,_=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=ii(J,d,o,k),o.elementType=i,o.type=_,o.lanes=M,o}function Aa(i,o,d,_){return i=ii(7,i,_,o),i.lanes=d,i}function oc(i,o,d,_){return i=ii(22,i,_,o),i.elementType=wt,i.lanes=d,i.stateNode={isHidden:!1},i}function Nf(i,o,d){return i=ii(6,i,null,o),i.lanes=d,i}function Bf(i,o,d){return o=ii(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Ly(i,o,d,_,k){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ps(0),this.expirationTimes=Ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.identifierPrefix=_,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function zf(i,o,d,_,k,M,J,le,me){return i=new Ly(i,o,d,le,me),o===1?(o=1,M===!0&&(o|=8)):o=0,M=ii(3,null,null,o),i.current=M,M.stateNode=i,M.memoizedState={element:_,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(M),i}function Dy(i,o,d){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:_==null?null:""+_,children:i,containerInfo:o,implementation:d}}function o0(i){if(!i)return zs;i=i._reactInternals;e:{if(We(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(Tr(d))return Dp(i,d,o)}return o}function l0(i,o,d,_,k,M,J,le,me){return i=zf(d,_,!0,i,k,M,J,le,me),i.context=o0(null),d=i.current,_=pr(),k=Gs(d),M=ps(_,k),M.callback=o??null,Us(d,M,k),i.current.lanes=k,Fi(i,k,_),Pr(i,_),i}function lc(i,o,d,_){var k=o.current,M=pr(),J=Gs(k);return d=o0(d),o.context===null?o.context=d:o.pendingContext=d,o=ps(M,J),o.payload={element:i},_=_===void 0?null:_,_!==null&&(o.callback=_),i=Us(k,o,J),i!==null&&(bi(i,k,J,M),Bu(i,k,J)),J}function uc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function u0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function Vf(i,o){u0(i,o),(i=i.alternate)&&u0(i,o)}function Ry(){return null}var c0=typeof reportError=="function"?reportError:function(i){console.error(i)};function Wf(i){this._internalRoot=i}cc.prototype.render=Wf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));lc(i,o,null,null)},cc.prototype.unmount=Wf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ea(function(){lc(null,i,null,null)}),o[us]=null}};function cc(i){this._internalRoot=i}cc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pt();i={blockedOn:null,target:i,priority:o};for(var d=0;d<x.length&&o!==0&&o<x[d].priority;d++);x.splice(d,0,i),d===0&&Oe(i)}};function Uf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function hc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function h0(){}function Fy(i,o,d,_,k){if(k){if(typeof _=="function"){var M=_;_=function(){var Ae=uc(J);M.call(Ae)}}var J=l0(o,_,i,0,null,!1,!1,"",h0);return i._reactRootContainer=J,i[us]=J.current,Jo(i.nodeType===8?i.parentNode:i),Ea(),J}for(;k=i.lastChild;)i.removeChild(k);if(typeof _=="function"){var le=_;_=function(){var Ae=uc(me);le.call(Ae)}}var me=zf(i,0,!1,null,null,!1,!1,"",h0);return i._reactRootContainer=me,i[us]=me.current,Jo(i.nodeType===8?i.parentNode:i),Ea(function(){lc(o,me,d,_)}),me}function fc(i,o,d,_,k){var M=d._reactRootContainer;if(M){var J=M;if(typeof k=="function"){var le=k;k=function(){var me=uc(J);le.call(me)}}lc(o,J,i,k)}else J=Fy(d,o,i,k,_);return uc(J)}zi=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=On(o.pendingLanes);d!==0&&(Ni(o,d|1),Pr(o,ot()),(Qt&6)===0&&(yo=ot()+500,Vs()))}break;case 13:Ea(function(){var _=ds(i,1);if(_!==null){var k=pr();bi(_,i,1,k)}}),Vf(i,1)}},Br=function(i){if(i.tag===13){var o=ds(i,134217728);if(o!==null){var d=pr();bi(o,i,134217728,d)}Vf(i,134217728)}},fr=function(i){if(i.tag===13){var o=Gs(i),d=ds(i,o);if(d!==null){var _=pr();bi(d,i,o,_)}Vf(i,o)}},Pt=function(){return Vt},nr=function(i,o){var d=Vt;try{return Vt=i,o()}finally{Vt=d}},G=function(i,o,d){switch(o){case"input":if(Fr(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var _=d[o];if(_!==i&&_.form===i.form){var k=Pu(_);if(!k)throw Error(t(90));oa(_),Fr(_,k)}}}break;case"textarea":Ts(i,d);break;case"select":o=d.value,o!=null&&tn(i,!!d.multiple,o,!1)}},W=Lf,q=Ea;var Ny={usingClientEntryPoint:!1,Events:[tl,so,Pu,U,A,Lf]},gl={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},By={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=De(i),i===null?null:i.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||Ry,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{qe=dc.inject(By),Ht=dc}catch{}}return Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ny,Ar.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(o))throw Error(t(200));return Dy(i,o,null,d)},Ar.createRoot=function(i,o){if(!Uf(i))throw Error(t(299));var d=!1,_="",k=c0;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),o=zf(i,1,!1,null,null,d,!1,_,k),i[us]=o.current,Jo(i.nodeType===8?i.parentNode:i),new Wf(o)},Ar.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=De(o),i=i===null?null:i.stateNode,i},Ar.flushSync=function(i){return Ea(i)},Ar.hydrate=function(i,o,d){if(!hc(o))throw Error(t(200));return fc(null,i,o,!0,d)},Ar.hydrateRoot=function(i,o,d){if(!Uf(i))throw Error(t(405));var _=d!=null&&d.hydratedSources||null,k=!1,M="",J=c0;if(d!=null&&(d.unstable_strictMode===!0&&(k=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onRecoverableError!==void 0&&(J=d.onRecoverableError)),o=l0(o,null,i,1,d??null,k,!1,M,J),i[us]=o.current,Jo(i),_)for(i=0;i<_.length;i++)d=_[i],k=d._getVersion,k=k(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,k]:o.mutableSourceEagerHydrationData.push(d,k);return new cc(o)},Ar.render=function(i,o,d){if(!hc(o))throw Error(t(200));return fc(null,i,o,!1,d)},Ar.unmountComponentAtNode=function(i){if(!hc(i))throw Error(t(40));return i._reactRootContainer?(Ea(function(){fc(null,null,i,!1,function(){i._reactRootContainer=null,i[us]=null})}),!0):!1},Ar.unstable_batchedUpdates=Lf,Ar.unstable_renderSubtreeIntoContainer=function(i,o,d,_){if(!hc(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return fc(i,o,d,!1,_)},Ar.version="18.3.1-next-f1338f8080-20240426",Ar}var y0;function Pm(){if(y0)return Yf.exports;y0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),Yf.exports=Gy(),Yf.exports}var x0;function qy(){if(x0)return pc;x0=1;var l=Pm();return pc.createRoot=l.createRoot,pc.hydrateRoot=l.hydrateRoot,pc}var Ky=qy();/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w0="popstate";function Zy(l={}){function e(n,s){let{pathname:a,search:h,hash:p}=n.location;return cd("",{pathname:a,search:h,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Gl(s)}return Jy(e,t,null,l)}function bn(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function Ai(l,e){if(!l){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qy(){return Math.random().toString(36).substring(2,10)}function b0(l,e){return{usr:l.state,key:l.key,idx:e}}function cd(l,e,t=null,n){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:t,key:e&&e.key||n||Qy()}}function Gl({pathname:l="/",search:e="",hash:t=""}){return e&&e!=="?"&&(l+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(l+=t.charAt(0)==="#"?t:"#"+t),l}function Fo(l){let e={};if(l){let t=l.indexOf("#");t>=0&&(e.hash=l.substring(t),l=l.substring(0,t));let n=l.indexOf("?");n>=0&&(e.search=l.substring(n),l=l.substring(0,n)),l&&(e.pathname=l)}return e}function Jy(l,e,t,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,h=s.history,p="POP",v=null,y=b();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function b(){return(h.state||{idx:null}).idx}function O(){p="POP";let $=b(),ee=$==null?null:$-y;y=$,v&&v({action:p,location:N.location,delta:ee})}function F($,ee){p="PUSH";let ae=cd(N.location,$,ee);y=b()+1;let ue=b0(ae,y),xe=N.createHref(ae);try{h.pushState(ue,"",xe)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;s.location.assign(xe)}a&&v&&v({action:p,location:N.location,delta:1})}function E($,ee){p="REPLACE";let ae=cd(N.location,$,ee);y=b();let ue=b0(ae,y),xe=N.createHref(ae);h.replaceState(ue,"",xe),a&&v&&v({action:p,location:N.location,delta:0})}function Z($){return $y($)}let N={get action(){return p},get location(){return l(s,h)},listen($){if(v)throw new Error("A history only accepts one active listener");return s.addEventListener(w0,O),v=$,()=>{s.removeEventListener(w0,O),v=null}},createHref($){return e(s,$)},createURL:Z,encodeLocation($){let ee=Z($);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:F,replace:E,go($){return h.go($)}};return N}function $y(l,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),bn(t,"No window.location.(origin|href) available to create URL");let n=typeof l=="string"?l:Gl(l);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Am(l,e,t="/"){return e1(l,e,t,!1)}function e1(l,e,t,n){let s=typeof e=="string"?Fo(e):e,a=xs(s.pathname||"/",t);if(a==null)return null;let h=Mm(l);t1(h);let p=null;for(let v=0;p==null&&v<h.length;++v){let y=f1(a);p=c1(h[v],y,n)}return p}function Mm(l,e=[],t=[],n="",s=!1){let a=(h,p,v=s,y)=>{let b={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(n)&&v)return;bn(b.relativePath.startsWith(n),`Absolute route path "${b.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(n.length)}let O=_s([n,b.relativePath]),F=t.concat(b);h.children&&h.children.length>0&&(bn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${O}".`),Mm(h.children,e,F,O,v)),!(h.path==null&&!h.index)&&e.push({path:O,score:l1(O,h.index),routesMeta:F})};return l.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))a(h,p);else for(let v of Im(h.path))a(h,p,!0,v)}),e}function Im(l){let e=l.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let h=Im(n.join("/")),p=[];return p.push(...h.map(v=>v===""?a:[a,v].join("/"))),s&&p.push(...h),p.map(v=>l.startsWith("/")&&v===""?"/":v)}function t1(l){l.sort((e,t)=>e.score!==t.score?t.score-e.score:u1(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var n1=/^:[\w-]+$/,r1=3,i1=2,s1=1,a1=10,o1=-2,S0=l=>l==="*";function l1(l,e){let t=l.split("/"),n=t.length;return t.some(S0)&&(n+=o1),e&&(n+=i1),t.filter(s=>!S0(s)).reduce((s,a)=>s+(n1.test(a)?r1:a===""?s1:a1),n)}function u1(l,e){return l.length===e.length&&l.slice(0,-1).every((n,s)=>n===e[s])?l[l.length-1]-e[e.length-1]:0}function c1(l,e,t=!1){let{routesMeta:n}=l,s={},a="/",h=[];for(let p=0;p<n.length;++p){let v=n[p],y=p===n.length-1,b=a==="/"?e:e.slice(a.length)||"/",O=Dc({path:v.relativePath,caseSensitive:v.caseSensitive,end:y},b),F=v.route;if(!O&&y&&t&&!n[n.length-1].route.index&&(O=Dc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},b)),!O)return null;Object.assign(s,O.params),h.push({params:s,pathname:_s([a,O.pathname]),pathnameBase:m1(_s([a,O.pathnameBase])),route:F}),O.pathnameBase!=="/"&&(a=_s([a,O.pathnameBase]))}return h}function Dc(l,e){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[t,n]=h1(l.path,l.caseSensitive,l.end),s=e.match(t);if(!s)return null;let a=s[0],h=a.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:n.reduce((y,{paramName:b,isOptional:O},F)=>{if(b==="*"){let Z=p[F]||"";h=a.slice(0,a.length-Z.length).replace(/(.)\/+$/,"$1")}const E=p[F];return O&&!E?y[b]=void 0:y[b]=(E||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:h,pattern:l}}function h1(l,e=!1,t=!0){Ai(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let n=[],s="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,v)=>(n.push({paramName:p,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(n.push({paramName:"*"}),s+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":l!==""&&l!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function f1(l){try{return l.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ai(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),l}}function xs(l,e){if(e==="/")return l;if(!l.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=l.charAt(t);return n&&n!=="/"?null:l.slice(t)||"/"}var jm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d1=l=>jm.test(l);function p1(l,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof l=="string"?Fo(l):l,a;if(t)if(d1(t))a=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Ai(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?a=C0(t.substring(1),"/"):a=C0(t,e)}else a=e;return{pathname:a,search:v1(n),hash:_1(s)}}function C0(l,e){let t=e.replace(/\/+$/,"").split("/");return l.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Kf(l,e,t,n){return`Cannot include a '${l}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g1(l){return l.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lm(l){let e=g1(l);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Dm(l,e,t,n=!1){let s;typeof l=="string"?s=Fo(l):(s={...l},bn(!s.pathname||!s.pathname.includes("?"),Kf("?","pathname","search",s)),bn(!s.pathname||!s.pathname.includes("#"),Kf("#","pathname","hash",s)),bn(!s.search||!s.search.includes("#"),Kf("#","search","hash",s)));let a=l===""||s.pathname==="",h=a?"/":s.pathname,p;if(h==null)p=t;else{let O=e.length-1;if(!n&&h.startsWith("..")){let F=h.split("/");for(;F[0]==="..";)F.shift(),O-=1;s.pathname=F.join("/")}p=O>=0?e[O]:"/"}let v=p1(s,p),y=h&&h!=="/"&&h.endsWith("/"),b=(a||h===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(y||b)&&(v.pathname+="/"),v}var _s=l=>l.join("/").replace(/\/\/+/g,"/"),m1=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),v1=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,_1=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,y1=class{constructor(l,e,t,n=!1){this.status=l,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function x1(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function w1(l){return l.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Rm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fm(l,e){let t=l;if(typeof t!="string"||!jm.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,s=!1;if(Rm)try{let a=new URL(window.location.href),h=t.startsWith("//")?new URL(a.protocol+t):new URL(t),p=xs(h.pathname,e);h.origin===a.origin&&p!=null?t=p+h.search+h.hash:s=!0}catch{Ai(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Nm=["POST","PUT","PATCH","DELETE"];new Set(Nm);var b1=["GET",...Nm];new Set(b1);var No=Te.createContext(null);No.displayName="DataRouter";var $c=Te.createContext(null);$c.displayName="DataRouterState";var S1=Te.createContext(!1),Bm=Te.createContext({isTransitioning:!1});Bm.displayName="ViewTransition";var C1=Te.createContext(new Map);C1.displayName="Fetchers";var k1=Te.createContext(null);k1.displayName="Await";var hi=Te.createContext(null);hi.displayName="Navigation";var nu=Te.createContext(null);nu.displayName="Location";var Ss=Te.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var Dd=Te.createContext(null);Dd.displayName="RouteError";var zm="REACT_ROUTER_ERROR",T1="REDIRECT",E1="ROUTE_ERROR_RESPONSE";function O1(l){if(l.startsWith(`${zm}:${T1}:{`))try{let e=JSON.parse(l.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function P1(l){if(l.startsWith(`${zm}:${E1}:{`))try{let e=JSON.parse(l.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new y1(e.status,e.statusText,e.data)}catch{}}function A1(l,{relative:e}={}){bn(ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Te.useContext(hi),{hash:s,pathname:a,search:h}=iu(l,{relative:e}),p=a;return t!=="/"&&(p=a==="/"?t:_s([t,a])),n.createHref({pathname:p,search:h,hash:s})}function ru(){return Te.useContext(nu)!=null}function Wa(){return bn(ru(),"useLocation() may be used only in the context of a <Router> component."),Te.useContext(nu).location}var Vm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wm(l){Te.useContext(hi).static||Te.useLayoutEffect(l)}function Rd(){let{isDataRoute:l}=Te.useContext(Ss);return l?U1():M1()}function M1(){bn(ru(),"useNavigate() may be used only in the context of a <Router> component.");let l=Te.useContext(No),{basename:e,navigator:t}=Te.useContext(hi),{matches:n}=Te.useContext(Ss),{pathname:s}=Wa(),a=JSON.stringify(Lm(n)),h=Te.useRef(!1);return Wm(()=>{h.current=!0}),Te.useCallback((v,y={})=>{if(Ai(h.current,Vm),!h.current)return;if(typeof v=="number"){t.go(v);return}let b=Dm(v,JSON.parse(a),s,y.relative==="path");l==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:_s([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,a,s,l])}Te.createContext(null);function iu(l,{relative:e}={}){let{matches:t}=Te.useContext(Ss),{pathname:n}=Wa(),s=JSON.stringify(Lm(t));return Te.useMemo(()=>Dm(l,JSON.parse(s),n,e==="path"),[l,s,n,e])}function I1(l,e){return Um(l,e)}function Um(l,e,t,n,s){bn(ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Te.useContext(hi),{matches:h}=Te.useContext(Ss),p=h[h.length-1],v=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",O=p&&p.route;{let ae=O&&O.path||"";Xm(y,!O||ae.endsWith("*")||ae.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${ae}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ae}"> to <Route path="${ae==="/"?"*":`${ae}/*`}">.`)}let F=Wa(),E;if(e){let ae=typeof e=="string"?Fo(e):e;bn(b==="/"||ae.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${ae.pathname}" was given in the \`location\` prop.`),E=ae}else E=F;let Z=E.pathname||"/",N=Z;if(b!=="/"){let ae=b.replace(/^\//,"").split("/");N="/"+Z.replace(/^\//,"").split("/").slice(ae.length).join("/")}let $=Am(l,{pathname:N});Ai(O||$!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ai($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=F1($&&$.map(ae=>Object.assign({},ae,{params:Object.assign({},v,ae.params),pathname:_s([b,a.encodeLocation?a.encodeLocation(ae.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?b:_s([b,a.encodeLocation?a.encodeLocation(ae.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ae.pathnameBase])})),h,t,n,s);return e&&ee?Te.createElement(nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},ee):ee}function j1(){let l=W1(),e=x1(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),t=l instanceof Error?l.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=Te.createElement(Te.Fragment,null,Te.createElement("p",null," Hey developer "),Te.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Te.createElement("code",{style:a},"ErrorBoundary")," or"," ",Te.createElement("code",{style:a},"errorElement")," prop on your route.")),Te.createElement(Te.Fragment,null,Te.createElement("h2",null,"Unexpected Application Error!"),Te.createElement("h3",{style:{fontStyle:"italic"}},e),t?Te.createElement("pre",{style:s},t):null,h)}var L1=Te.createElement(j1,null),Hm=class extends Te.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,e){return e.location!==l.location||e.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:e.error,location:e.location,revalidation:l.revalidation||e.revalidation}}componentDidCatch(l,e){this.props.onError?this.props.onError(l,e):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const t=P1(l.digest);t&&(l=t)}let e=l!==void 0?Te.createElement(Ss.Provider,{value:this.props.routeContext},Te.createElement(Dd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?Te.createElement(D1,{error:l},e):e}};Hm.contextType=S1;var Zf=new WeakMap;function D1({children:l,error:e}){let{basename:t}=Te.useContext(hi);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=O1(e.digest);if(n){let s=Zf.get(e);if(s)throw s;let a=Fm(n.location,t);if(Rm&&!Zf.get(e))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw Zf.set(e,h),h}return Te.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return l}function R1({routeContext:l,match:e,children:t}){let n=Te.useContext(No);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Te.createElement(Ss.Provider,{value:l},t)}function F1(l,e=[],t=null,n=null,s=null){if(l==null){if(!t)return null;if(t.errors)l=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)l=t.matches;else return null}let a=l,h=t?.errors;if(h!=null){let b=a.findIndex(O=>O.route.id&&h?.[O.route.id]!==void 0);bn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),a=a.slice(0,Math.min(a.length,b+1))}let p=!1,v=-1;if(t)for(let b=0;b<a.length;b++){let O=a[b];if((O.route.HydrateFallback||O.route.hydrateFallbackElement)&&(v=b),O.route.id){let{loaderData:F,errors:E}=t,Z=O.route.loader&&!F.hasOwnProperty(O.route.id)&&(!E||E[O.route.id]===void 0);if(O.route.lazy||Z){p=!0,v>=0?a=a.slice(0,v+1):a=[a[0]];break}}}let y=t&&n?(b,O)=>{n(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:w1(t.matches),errorInfo:O})}:void 0;return a.reduceRight((b,O,F)=>{let E,Z=!1,N=null,$=null;t&&(E=h&&O.route.id?h[O.route.id]:void 0,N=O.route.errorElement||L1,p&&(v<0&&F===0?(Xm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Z=!0,$=null):v===F&&(Z=!0,$=O.route.hydrateFallbackElement||null)));let ee=e.concat(a.slice(0,F+1)),ae=()=>{let ue;return E?ue=N:Z?ue=$:O.route.Component?ue=Te.createElement(O.route.Component,null):O.route.element?ue=O.route.element:ue=b,Te.createElement(R1,{match:O,routeContext:{outlet:b,matches:ee,isDataRoute:t!=null},children:ue})};return t&&(O.route.ErrorBoundary||O.route.errorElement||F===0)?Te.createElement(Hm,{location:t.location,revalidation:t.revalidation,component:N,error:E,children:ae(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:y}):ae()},null)}function Fd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N1(l){let e=Te.useContext(No);return bn(e,Fd(l)),e}function B1(l){let e=Te.useContext($c);return bn(e,Fd(l)),e}function z1(l){let e=Te.useContext(Ss);return bn(e,Fd(l)),e}function Nd(l){let e=z1(l),t=e.matches[e.matches.length-1];return bn(t.route.id,`${l} can only be used on routes that contain a unique "id"`),t.route.id}function V1(){return Nd("useRouteId")}function W1(){let l=Te.useContext(Dd),e=B1("useRouteError"),t=Nd("useRouteError");return l!==void 0?l:e.errors?.[t]}function U1(){let{router:l}=N1("useNavigate"),e=Nd("useNavigate"),t=Te.useRef(!1);return Wm(()=>{t.current=!0}),Te.useCallback(async(s,a={})=>{Ai(t.current,Vm),t.current&&(typeof s=="number"?await l.navigate(s):await l.navigate(s,{fromRouteId:e,...a}))},[l,e])}var k0={};function Xm(l,e,t){!e&&!k0[l]&&(k0[l]=!0,Ai(!1,t))}Te.memo(H1);function H1({routes:l,future:e,state:t,onError:n}){return Um(l,void 0,t,n,e)}function Co(l){bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function X1({basename:l="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:a=!1,unstable_useTransitions:h}){bn(!ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=l.replace(/^\/*/,"/"),v=Te.useMemo(()=>({basename:p,navigator:s,static:a,unstable_useTransitions:h,future:{}}),[p,s,a,h]);typeof t=="string"&&(t=Fo(t));let{pathname:y="/",search:b="",hash:O="",state:F=null,key:E="default"}=t,Z=Te.useMemo(()=>{let N=xs(y,p);return N==null?null:{location:{pathname:N,search:b,hash:O,state:F,key:E},navigationType:n}},[p,y,b,O,F,E,n]);return Ai(Z!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${O}" because it does not start with the basename, so the <Router> won't render anything.`),Z==null?null:Te.createElement(hi.Provider,{value:v},Te.createElement(nu.Provider,{children:e,value:Z}))}function Y1({children:l,location:e}){return I1(hd(l),e)}function hd(l,e=[]){let t=[];return Te.Children.forEach(l,(n,s)=>{if(!Te.isValidElement(n))return;let a=[...e,s];if(n.type===Te.Fragment){t.push.apply(t,hd(n.props.children,a));return}bn(n.type===Co,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let h={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=hd(n.props.children,a)),t.push(h)}),t}var Tc="get",Ec="application/x-www-form-urlencoded";function eh(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function G1(l){return eh(l)&&l.tagName.toLowerCase()==="button"}function q1(l){return eh(l)&&l.tagName.toLowerCase()==="form"}function K1(l){return eh(l)&&l.tagName.toLowerCase()==="input"}function Z1(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Q1(l,e){return l.button===0&&(!e||e==="_self")&&!Z1(l)}var gc=null;function J1(){if(gc===null)try{new FormData(document.createElement("form"),0),gc=!1}catch{gc=!0}return gc}var $1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qf(l){return l!=null&&!$1.has(l)?(Ai(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):l}function ex(l,e){let t,n,s,a,h;if(q1(l)){let p=l.getAttribute("action");n=p?xs(p,e):null,t=l.getAttribute("method")||Tc,s=Qf(l.getAttribute("enctype"))||Ec,a=new FormData(l)}else if(G1(l)||K1(l)&&(l.type==="submit"||l.type==="image")){let p=l.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=l.getAttribute("formaction")||p.getAttribute("action");if(n=v?xs(v,e):null,t=l.getAttribute("formmethod")||p.getAttribute("method")||Tc,s=Qf(l.getAttribute("formenctype"))||Qf(p.getAttribute("enctype"))||Ec,a=new FormData(p,l),!J1()){let{name:y,type:b,value:O}=l;if(b==="image"){let F=y?`${y}.`:"";a.append(`${F}x`,"0"),a.append(`${F}y`,"0")}else y&&a.append(y,O)}}else{if(eh(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tc,n=null,s=Ec,h=l}return a&&s==="text/plain"&&(h=a,a=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:a,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bd(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function tx(l,e,t){let n=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&xs(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function nx(l,e){if(l.id in e)return e[l.id];try{let t=await import(l.module);return e[l.id]=t,t}catch(t){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rx(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function ix(l,e,t){let n=await Promise.all(l.map(async s=>{let a=e.routes[s.route.id];if(a){let h=await nx(a,t);return h.links?h.links():[]}return[]}));return lx(n.flat(1).filter(rx).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function T0(l,e,t,n,s,a){let h=(v,y)=>t[y]?v.route.id!==t[y].route.id:!0,p=(v,y)=>t[y].pathname!==v.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==v.params["*"];return a==="assets"?e.filter((v,y)=>h(v,y)||p(v,y)):a==="data"?e.filter((v,y)=>{let b=n.routes[v.route.id];if(!b||!b.hasLoader)return!1;if(h(v,y)||p(v,y))return!0;if(v.route.shouldRevalidate){let O=v.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function sx(l,e,{includeHydrateFallback:t}={}){return ax(l.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function ax(l){return[...new Set(l)]}function ox(l){let e={},t=Object.keys(l).sort();for(let n of t)e[n]=l[n];return e}function lx(l,e){let t=new Set;return new Set(e),l.reduce((n,s)=>{let a=JSON.stringify(ox(s));return t.has(a)||(t.add(a),n.push({key:a,link:s})),n},[])}function Ym(){let l=Te.useContext(No);return Bd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function ux(){let l=Te.useContext($c);return Bd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var zd=Te.createContext(void 0);zd.displayName="FrameworkContext";function Gm(){let l=Te.useContext(zd);return Bd(l,"You must render this element inside a <HydratedRouter> element"),l}function cx(l,e){let t=Te.useContext(zd),[n,s]=Te.useState(!1),[a,h]=Te.useState(!1),{onFocus:p,onBlur:v,onMouseEnter:y,onMouseLeave:b,onTouchStart:O}=e,F=Te.useRef(null);Te.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let N=ee=>{ee.forEach(ae=>{h(ae.isIntersecting)})},$=new IntersectionObserver(N,{threshold:.5});return F.current&&$.observe(F.current),()=>{$.disconnect()}}},[l]),Te.useEffect(()=>{if(n){let N=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(N)}}},[n]);let E=()=>{s(!0)},Z=()=>{s(!1),h(!1)};return t?l!=="intent"?[a,F,{}]:[a,F,{onFocus:vl(p,E),onBlur:vl(v,Z),onMouseEnter:vl(y,E),onMouseLeave:vl(b,Z),onTouchStart:vl(O,E)}]:[!1,F,{}]}function vl(l,e){return t=>{l&&l(t),t.defaultPrevented||e(t)}}function hx({page:l,...e}){let{router:t}=Ym(),n=Te.useMemo(()=>Am(t.routes,l,t.basename),[t.routes,l,t.basename]);return n?Te.createElement(dx,{page:l,matches:n,...e}):null}function fx(l){let{manifest:e,routeModules:t}=Gm(),[n,s]=Te.useState([]);return Te.useEffect(()=>{let a=!1;return ix(l,e,t).then(h=>{a||s(h)}),()=>{a=!0}},[l,e,t]),n}function dx({page:l,matches:e,...t}){let n=Wa(),{manifest:s,routeModules:a}=Gm(),{basename:h}=Ym(),{loaderData:p,matches:v}=ux(),y=Te.useMemo(()=>T0(l,e,v,s,n,"data"),[l,e,v,s,n]),b=Te.useMemo(()=>T0(l,e,v,s,n,"assets"),[l,e,v,s,n]),O=Te.useMemo(()=>{if(l===n.pathname+n.search+n.hash)return[];let Z=new Set,N=!1;if(e.forEach(ee=>{let ae=s.routes[ee.route.id];!ae||!ae.hasLoader||(!y.some(ue=>ue.route.id===ee.route.id)&&ee.route.id in p&&a[ee.route.id]?.shouldRevalidate||ae.hasClientLoader?N=!0:Z.add(ee.route.id))}),Z.size===0)return[];let $=tx(l,h,"data");return N&&Z.size>0&&$.searchParams.set("_routes",e.filter(ee=>Z.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[$.pathname+$.search]},[h,p,n,s,y,e,l,a]),F=Te.useMemo(()=>sx(b,s),[b,s]),E=fx(b);return Te.createElement(Te.Fragment,null,O.map(Z=>Te.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...t})),F.map(Z=>Te.createElement("link",{key:Z,rel:"modulepreload",href:Z,...t})),E.map(({key:Z,link:N})=>Te.createElement("link",{key:Z,nonce:t.nonce,...N})))}function px(...l){return e=>{l.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gx&&(window.__reactRouterVersion="7.11.0")}catch{}function mx({basename:l,children:e,unstable_useTransitions:t,window:n}){let s=Te.useRef();s.current==null&&(s.current=Zy({window:n,v5Compat:!0}));let a=s.current,[h,p]=Te.useState({action:a.action,location:a.location}),v=Te.useCallback(y=>{t===!1?p(y):Te.startTransition(()=>p(y))},[t]);return Te.useLayoutEffect(()=>a.listen(v),[a,v]),Te.createElement(X1,{basename:l,children:e,location:h.location,navigationType:h.action,navigator:a,unstable_useTransitions:t})}var qm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vd=Te.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:a,replace:h,state:p,target:v,to:y,preventScrollReset:b,viewTransition:O,unstable_defaultShouldRevalidate:F,...E},Z){let{basename:N,unstable_useTransitions:$}=Te.useContext(hi),ee=typeof y=="string"&&qm.test(y),ae=Fm(y,N);y=ae.to;let ue=A1(y,{relative:s}),[xe,Ce,z]=cx(n,E),Ve=xx(y,{replace:h,state:p,target:v,preventScrollReset:b,relative:s,viewTransition:O,unstable_defaultShouldRevalidate:F,unstable_useTransitions:$});function He(ut){e&&e(ut),ut.defaultPrevented||Ve(ut)}let Je=Te.createElement("a",{...E,...z,href:ae.absoluteURL||ue,onClick:ae.isExternal||a?e:He,ref:px(Z,Ce),target:v,"data-discover":!ee&&t==="render"?"true":void 0});return xe&&!ee?Te.createElement(Te.Fragment,null,Je,Te.createElement(hx,{page:ue})):Je});Vd.displayName="Link";var vx=Te.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:a,to:h,viewTransition:p,children:v,...y},b){let O=iu(h,{relative:y.relative}),F=Wa(),E=Te.useContext($c),{navigator:Z,basename:N}=Te.useContext(hi),$=E!=null&&kx(O)&&p===!0,ee=Z.encodeLocation?Z.encodeLocation(O).pathname:O.pathname,ae=F.pathname,ue=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),ue=ue?ue.toLowerCase():null,ee=ee.toLowerCase()),ue&&N&&(ue=xs(ue,N)||ue);const xe=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Ce=ae===ee||!s&&ae.startsWith(ee)&&ae.charAt(xe)==="/",z=ue!=null&&(ue===ee||!s&&ue.startsWith(ee)&&ue.charAt(ee.length)==="/"),Ve={isActive:Ce,isPending:z,isTransitioning:$},He=Ce?e:void 0,Je;typeof n=="function"?Je=n(Ve):Je=[n,Ce?"active":null,z?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let ut=typeof a=="function"?a(Ve):a;return Te.createElement(Vd,{...y,"aria-current":He,className:Je,ref:b,style:ut,to:h,viewTransition:p},typeof v=="function"?v(Ve):v)});vx.displayName="NavLink";var _x=Te.forwardRef(({discover:l="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:a,method:h=Tc,action:p,onSubmit:v,relative:y,preventScrollReset:b,viewTransition:O,unstable_defaultShouldRevalidate:F,...E},Z)=>{let{unstable_useTransitions:N}=Te.useContext(hi),$=Sx(),ee=Cx(p,{relative:y}),ae=h.toLowerCase()==="get"?"get":"post",ue=typeof p=="string"&&qm.test(p),xe=Ce=>{if(v&&v(Ce),Ce.defaultPrevented)return;Ce.preventDefault();let z=Ce.nativeEvent.submitter,Ve=z?.getAttribute("formmethod")||h,He=()=>$(z||Ce.currentTarget,{fetcherKey:e,method:Ve,navigate:t,replace:s,state:a,relative:y,preventScrollReset:b,viewTransition:O,unstable_defaultShouldRevalidate:F});N&&t!==!1?Te.startTransition(()=>He()):He()};return Te.createElement("form",{ref:Z,method:ae,action:ee,onSubmit:n?v:xe,...E,"data-discover":!ue&&l==="render"?"true":void 0})});_x.displayName="Form";function yx(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Km(l){let e=Te.useContext(No);return bn(e,yx(l)),e}function xx(l,{target:e,replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v}={}){let y=Rd(),b=Wa(),O=iu(l,{relative:a});return Te.useCallback(F=>{if(Q1(F,e)){F.preventDefault();let E=t!==void 0?t:Gl(b)===Gl(O),Z=()=>y(l,{replace:E,state:n,preventScrollReset:s,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:p});v?Te.startTransition(()=>Z()):Z()}},[b,y,O,t,n,e,l,s,a,h,p,v])}var wx=0,bx=()=>`__${String(++wx)}__`;function Sx(){let{router:l}=Km("useSubmit"),{basename:e}=Te.useContext(hi),t=V1(),n=l.fetch,s=l.navigate;return Te.useCallback(async(a,h={})=>{let{action:p,method:v,encType:y,formData:b,body:O}=ex(a,e);if(h.navigate===!1){let F=h.fetcherKey||bx();await n(F,t,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:O,formMethod:h.method||v,formEncType:h.encType||y,flushSync:h.flushSync})}else await s(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:O,formMethod:h.method||v,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[n,s,e,t])}function Cx(l,{relative:e}={}){let{basename:t}=Te.useContext(hi),n=Te.useContext(Ss);bn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...iu(l||".",{relative:e})},h=Wa();if(l==null){a.search=h.search;let p=new URLSearchParams(a.search),v=p.getAll("index");if(v.some(b=>b==="")){p.delete("index"),v.filter(O=>O).forEach(O=>p.append("index",O));let b=p.toString();a.search=b?`?${b}`:""}}return(!l||l===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:_s([t,a.pathname])),Gl(a)}function kx(l,{relative:e}={}){let t=Te.useContext(Bm);bn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Km("useViewTransitionState"),s=iu(l,{relative:e});if(!t.isTransitioning)return!1;let a=xs(t.currentLocation.pathname,n)||t.currentLocation.pathname,h=xs(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Dc(s.pathname,h)!=null||Dc(s.pathname,a)!=null}var Zm=Pm();const Tx=({header:l,leftSidebar:e,undoRedoSidebar:t,canvasBoard:n,rightSidebar:s,footer:a})=>K.jsxs("div",{className:"flex flex-col w-full h-screen bg-stone-300",children:[l&&K.jsx("div",{className:"flex-none",children:l}),K.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e&&K.jsx("div",{className:"flex-none",children:e}),t&&K.jsx("div",{className:"flex-none",children:t}),K.jsx("div",{className:"flex-1 flex justify-center items-center",children:n}),s&&K.jsx("div",{className:"flex-none",children:s})]}),a&&K.jsx("div",{className:"flex-none",children:a})]});function de(l,e,t){return(e=(function(n){var s=(function(a,h){if(typeof a!="object"||!a)return a;var p=a[Symbol.toPrimitive];if(p!==void 0){var v=p.call(a,h);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(a)})(n,"string");return typeof s=="symbol"?s:s+""})(e))in l?Object.defineProperty(l,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[e]=t,l}function E0(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(l,s).enumerable}))),t.push.apply(t,n)}return t}function ge(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E0(Object(t),!0).forEach((function(n){de(l,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):E0(Object(t)).forEach((function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))}))}return l}function dn(l,e){if(l==null)return{};var t,n,s=(function(h,p){if(h==null)return{};var v={};for(var y in h)if({}.hasOwnProperty.call(h,y)){if(p.indexOf(y)>=0)continue;v[y]=h[y]}return v})(l,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(l,t)&&(s[t]=l[t])}return s}function is(l,e){return e||(e=l.slice(0)),Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(e)}}))}class O0{constructor(){de(this,"browserShadowBlurConstant",1),de(this,"DPI",96),de(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),de(this,"perfLimitSizeTotal",2097152),de(this,"maxCacheSideLimit",4096),de(this,"minCacheSideLimit",256),de(this,"disableStyleCopyPaste",!1),de(this,"enableGLFiltering",!0),de(this,"textureSize",4096),de(this,"forceGLPutImageData",!1),de(this,"cachesBoundsOfCurve",!1),de(this,"fontPaths",{}),de(this,"NUM_FRACTION_DIGITS",4)}}const Gt=new class extends O0{constructor(l){super(),this.configure(l)}configure(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,l)}addFonts(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=ge(ge({},this.fontPaths),l)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((l=>{delete this.fontPaths[l]}))}clearFonts(){this.fontPaths={}}restoreDefaults(l){const e=new O0,t=l?.reduce(((n,s)=>(n[s]=e[s],n)),{})||e;this.configure(t)}},ws=function(l){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[l]("fabric",...t)};class Ji extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Wd extends Ji{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}let Ex=class{};class Ox extends Ex{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((n=>this.testPrecision(t,n))),t.getExtension("WEBGL_lose_context").loseContext(),ws("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Px={};let fd;const Ax=l=>{fd=l},Mi=()=>fd||(fd={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Ox,dispose(){},copyPasteData:Px}),Ua=()=>Mi().document,Ti=()=>Mi().window,Qm=()=>{var l;return Math.max((l=Gt.devicePixelRatio)!==null&&l!==void 0?l:Ti().devicePixelRatio,1)},Oo=new class{constructor(){de(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(l){let{fontFamily:e,fontStyle:t,fontWeight:n}=l;e=e.toLowerCase();const s=this.charWidthsCache;s.has(e)||s.set(e,new Map);const a=s.get(e),h="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return a.has(h)||a.set(h,new Map),a.get(h)}clearFontCache(l){l?this.charWidthsCache.delete((l||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(l){const{perfLimitSizeTotal:e}=Gt,t=Math.sqrt(e*l);return[Math.floor(t),Math.floor(e/t)]}},Rc="6.9.1";function Fa(){}const na=Math.PI/2,bs=2*Math.PI,Ud=Math.PI/180,cr=Object.freeze([1,0,0,1,0,0]),Hd=16,Qs=.4477152502,Rt="center",nn="left",Lr="top",dd="bottom",Mn="right",yr="none",Xd=/\r?\n/,Jm="moving",th="scaling",$m="rotating",Yd="rotate",ev="skewing",ql="resizing",tv="modifyPoly",Mx="modifyPath",Fc="changed",nh="scale",br="scaleX",Gr="scaleY",Bo="skewX",zo="skewY",Rn="fill",xr="stroke",Nc="modified",wo="json",Jf="svg",ct=new class{constructor(){this[wo]=new Map,this[Jf]=new Map}has(l){return this[wo].has(l)}getClass(l){const e=this[wo].get(l);if(!e)throw new Ji("No class registered for ".concat(l));return e}setClass(l,e){e?this[wo].set(e,l):(this[wo].set(l.type,l),this[wo].set(l.type.toLowerCase(),l))}getSVGClass(l){return this[Jf].get(l)}setSVGClass(l,e){this[Jf].set(e??l.type.toLowerCase(),l)}},Kl=new class extends Array{remove(l){const e=this.indexOf(l);e>-1&&this.splice(e,1)}cancelAll(){const l=this.splice(0);return l.forEach((e=>e.abort())),l}cancelByCanvas(l){if(!l)return[];const e=this.filter((t=>{var n;return t.target===l||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===l}));return e.forEach((t=>t.abort())),e}cancelByTarget(l){if(!l)return[];const e=this.filter((t=>t.target===l));return e.forEach((t=>t.abort())),e}};class nv{constructor(){de(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach((n=>{let[s,a]=n;this.on(s,a)})),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach((s=>{let[a,h]=s;n.push(this.once(a,h))})),()=>n.forEach((s=>s()))}if(t){const n=this.on(e,(function(){for(var s=arguments.length,a=new Array(s),h=0;h<s;h++)a[h]=arguments[h];t.call(this,...a),n()}));return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach((n=>{let[s,a]=n;this._removeEventListener(s,a)})):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let a=0;a<s.length;a++)s[a].call(this,t||{})}}const Ia=(l,e)=>{const t=l.indexOf(e);return t!==-1&&l.splice(t,1),l},Ii=l=>{if(l===0)return 1;switch(Math.abs(l)/na){case 1:case 3:return 0;case 2:return-1}return Math.cos(l)},ji=l=>{if(l===0)return 0;const e=l/na,t=Math.sign(l);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(l)};class Se{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Se(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Se(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Se(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Se(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Se(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Se(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Se(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Se(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Se(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new Se(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Se(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new Se(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gd;const n=ji(e),s=Ii(e),a=this.subtract(t);return new Se(a.x*s-a.y*n,a.x*n+a.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Se(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Gd=new Se(0,0),Oc=l=>!!l&&Array.isArray(l._objects);function qd(l){class e extends l{constructor(){super(...arguments),de(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];const h=this._objects.push(...s);return s.forEach((p=>this._onObjectAdded(p))),h}insertAt(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),h=1;h<s;h++)a[h-1]=arguments[h];return this._objects.splice(n,0,...a),a.forEach((p=>this._onObjectAdded(p))),this._objects.length}remove(){const n=this._objects,s=[];for(var a=arguments.length,h=new Array(a),p=0;p<a;p++)h[p]=arguments[p];return h.forEach((v=>{const y=n.indexOf(v);y!==-1&&(n.splice(y,1),s.push(v),this._onObjectRemoved(v))})),s}forEachObject(n){this.getObjects().forEach(((s,a,h)=>n(s,a,h)))}getObjects(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return s.length===0?[...this._objects]:this._objects.filter((h=>h.isType(...s)))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some((a=>a instanceof e&&a.contains(n,!0)))}complexity(){return this._objects.reduce(((n,s)=>n+=s.complexity?s.complexity():0),0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Ia(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Ia(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const a=this._objects.indexOf(n);if(a!==0){const h=this.findNewLowerIndex(n,a,s);return Ia(this._objects,n),this._objects.splice(h,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const a=this._objects.indexOf(n);if(a!==this._objects.length-1){const h=this.findNewUpperIndex(n,a,s);return Ia(this._objects,n),this._objects.splice(h,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(Ia(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,a){let h;if(a){h=s;for(let p=s-1;p>=0;--p)if(n.isOverlapping(this._objects[p])){h=p;break}}else h=s-1;return h}findNewUpperIndex(n,s,a){let h;if(a){h=s;for(let p=s+1;p<this._objects.length;++p)if(n.isOverlapping(this._objects[p])){h=p;break}}else h=s+1;return h}collectObjects(n){let{left:s,top:a,width:h,height:p}=n,{includeIntersecting:v=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const y=[],b=new Se(s,a),O=b.add(new Se(h,p));for(let F=this._objects.length-1;F>=0;F--){const E=this._objects[F];E.selectable&&E.visible&&(v&&E.intersectsWithRect(b,O)||E.isContainedWithinRect(b,O)||v&&E.containsPoint(b)||v&&E.containsPoint(O))&&y.push(E)}return y}}return e}class rv extends nv{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Vl(l){return Ti().requestAnimationFrame(l)}function iv(l){return Ti().cancelAnimationFrame(l)}let Ix=0;const ra=()=>Ix++,ui=()=>{const l=Ua().createElement("canvas");if(!l||l.getContext===void 0)throw new Ji("Failed to create `canvas` element");return l},sv=()=>Ua().createElement("img"),Dr=l=>{const e=ui();return e.width=l.width,e.height=l.height,e},Kd=(l,e,t)=>l.toDataURL("image/".concat(e),t),Zd=(l,e,t)=>new Promise(((n,s)=>{l.toBlob(n,"image/".concat(e),t)})),En=l=>l*Ud,rs=l=>l/Ud,av=l=>l.every(((e,t)=>e===cr[t])),lr=(l,e,t)=>new Se(l).transform(e,t),jr=l=>{const e=1/(l[0]*l[3]-l[1]*l[2]),t=[e*l[3],-e*l[1],-e*l[2],e*l[0],0,0],{x:n,y:s}=new Se(l[4],l[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},wn=(l,e,t)=>[l[0]*e[0]+l[2]*e[1],l[1]*e[0]+l[3]*e[1],l[0]*e[2]+l[2]*e[3],l[1]*e[2]+l[3]*e[3],t?0:l[0]*e[4]+l[2]*e[5]+l[4],t?0:l[1]*e[4]+l[3]*e[5]+l[5]],rh=(l,e)=>l.reduceRight(((t,n)=>n&&t?wn(n,t,e):n||t),void 0)||cr.concat(),ov=l=>{let[e,t]=l;return Math.atan2(t,e)},Na=l=>{const e=ov(l),t=Math.pow(l[0],2)+Math.pow(l[1],2),n=Math.sqrt(t),s=(l[0]*l[3]-l[2]*l[1])/n,a=Math.atan2(l[0]*l[2]+l[1]*l[3],t);return{angle:rs(e),scaleX:n,scaleY:s,skewX:rs(a),skewY:0,translateX:l[4]||0,translateY:l[5]||0}},Vo=function(l){return[1,0,0,1,l,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ha(){let{angle:l=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=En(l),s=Ii(n),a=ji(n);return[s,a,-a,s,e?e-(s*e-a*t):0,t?t-(a*e+s*t):0]}const ih=function(l){return[l,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,0,0]},lv=l=>Math.tan(En(l)),Qd=l=>[1,0,lv(l),1,0,0],Jd=l=>[1,lv(l),0,1,0,0],su=l=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:a=0,skewY:h=0}=l,p=ih(n?-e:e,s?-t:t);return a&&(p=wn(p,Qd(a),!0)),h&&(p=wn(p,Jd(h),!0)),p},uv=l=>{const{translateX:e=0,translateY:t=0,angle:n=0}=l;let s=Vo(e,t);n&&(s=wn(s,Ha({angle:n})));const a=su(l);return av(a)||(s=wn(s,a)),s},Wl=function(l){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(n,s){if(e&&e.aborted)return s(new Wd("loadImage"));const a=sv();let h;e&&(h=function(v){a.src="",s(v)},e.addEventListener("abort",h,{once:!0}));const p=function(){a.onload=a.onerror=null,h&&e?.removeEventListener("abort",h),n(a)};l?(a.onload=p,a.onerror=function(){h&&e?.removeEventListener("abort",h),s(new Ji("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=l):p()}))},Mo=function(l){let{signal:e,reviver:t=Fa}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((n,s)=>{const a=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(l.map((h=>ct.getClass(h.type).fromObject(h,{signal:e}).then((p=>(t(h,p),a.push(p),p)))))).then(n).catch((h=>{a.forEach((p=>{p.dispose&&p.dispose()})),s(h)})).finally((()=>{e&&e.removeEventListener("abort",s)}))}))},au=function(l){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const a=Object.values(l).map((p=>p&&p.type&&ct.has(p.type)?Mo([p],{signal:e}).then((v=>{let[y]=v;return s.push(y),y})):p)),h=Object.keys(l);Promise.all(a).then((p=>p.reduce(((v,y,b)=>(v[h[b]]=y,v)),{}))).then(t).catch((p=>{s.forEach((v=>{v.dispose&&v.dispose()})),n(p)})).finally((()=>{e&&e.removeEventListener("abort",n)}))}))},Xa=function(l){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((e,t)=>(t in l&&(e[t]=l[t]),e)),{})},$d=(l,e)=>Object.keys(l).reduce(((t,n)=>(e(l[n],n,l)&&(t[n]=l[n]),t)),{}),on=(l,e)=>parseFloat(Number(l).toFixed(e)),Io=l=>"matrix("+l.map((e=>on(e,Gt.NUM_FRACTION_DIGITS))).join(" ")+")",oi=l=>!!l&&l.toLive!==void 0,P0=l=>!!l&&typeof l.toObject=="function",A0=l=>!!l&&l.offsetX!==void 0&&"source"in l,ja=l=>!!l&&"multiSelectionStacking"in l;function cv(l){const e=l&&ki(l);let t=0,n=0;if(!l||!e)return{left:t,top:n};let s=l;const a=e.documentElement,h=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=h.scrollLeft||a.scrollLeft||0,n=h.scrollTop||a.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const ki=l=>l.ownerDocument||null,hv=l=>{var e;return((e=l.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},fv=function(l,e,t){let{width:n,height:s}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;l.width=n,l.height=s,a>1&&(l.setAttribute("width",(n*a).toString()),l.setAttribute("height",(s*a).toString()),e.scale(a,a))},pd=(l,e)=>{let{width:t,height:n}=e;t&&(l.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(l.style.height=typeof n=="number"?"".concat(n,"px"):n)};function M0(l){return l.onselectstart!==void 0&&(l.onselectstart=()=>!1),l.style.userSelect=yr,l}class ep{constructor(e){de(this,"_originalCanvasStyle",void 0),de(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Ua().getElementById(e)||ui();var n;if(t.hasAttribute("data-fabric"))throw new Ji("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;fv(n,s,e,t)}setCSSDimensions(e){pd(this.lower.el,e)}calcOffset(){return(function(e){var t;const n=e&&ki(e),s={left:0,top:0};if(!n)return s;const a=((t=hv(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(a.borderLeftWidth,10)||0,s.top+=parseInt(a.borderTopWidth,10)||0,s.left+=parseInt(a.paddingLeft,10)||0,s.top+=parseInt(a.paddingTop,10)||0;let h={left:0,top:0};const p=n.documentElement;e.getBoundingClientRect!==void 0&&(h=e.getBoundingClientRect());const v=cv(e);return{left:h.left+v.left-(p.clientLeft||0)+s.left,top:h.top+v.top-(p.clientTop||0)+s.top}})(this.lower.el)}dispose(){Mi().dispose(this.lower.el),delete this.lower}}const jx={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...cr]},Lx=["objects"];class Wo extends qd(rv){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Wo.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new ep(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(ws("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Qm():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=ge({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],a=lr(e,jr(s));s[0]=t,s[3]=t;const h=lr(a,s);s[4]+=n.x-h.x,s[5]+=n.y-h.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new Se(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Se(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Vl((()=>this.renderAndReset())))}calcViewportBoundaries(){const e=this.width,t=this.height,n=jr(this.viewportTransform),s=lr({x:0,y:0},n),a=lr({x:e,y:t},n),h=s.min(a),p=s.max(a);return this.vptCoords={tl:h,tr:new Se(p.x,h.y),bl:new Se(h.x,p.y),br:p}}cancelRequestedRender(){this.nextRenderHandle&&(iv(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],a=this.viewportTransform,h=this["".concat(t,"Vpt")];if(!n&&!s)return;const p=oi(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=p?n.toLive(e):n,h&&e.transform(...a),p){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const v=n.gradientTransform||n.patternTransform;v&&e.transform(...v)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:v}=this;this.skipOffscreen=h,h&&e.transform(...a),s.render(e),this.skipOffscreen=v,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Se(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Se(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Se(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Se(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Se(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return lr(this.getCenterPoint(),jr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Rt,Rt),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return ge(ge(ge({version:Rc},Xa(this,t)),{},{objects:this._objects.filter((a=>!a.excludeFromExport)).map((a=>this._toObject(a,e,t)))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),a}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,a=this.overlayImage,h=this.backgroundColor,p=this.overlayColor;return oi(h)?h.excludeFromExport||(n.background=h.toObject(t)):h&&(n.background=h),oi(p)?p.excludeFromExport||(n.overlay=p.toObject(t)):p&&(n.overlay=p),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),a&&!a.excludeFromExport&&(n.overlayImage=this._toObject(a,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),a=Gt.NUM_FRACTION_DIGITS,h=t.viewBox;let p;if(h)p='viewBox="'.concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height,'" ');else if(this.svgViewportTransformation){const v=this.viewportTransform;p='viewBox="'.concat(on(-v[4]/v[0],a)," ").concat(on(-v[5]/v[3],a)," ").concat(on(this.width/v[0],a)," ").concat(on(this.height/v[3],a),'" ')}else p='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',p,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Rc,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(ra()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((e=>{const t=this["".concat(e,"Color")];if(oi(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,a={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(a,{additionalTransform:n?Io(s):""})}})).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=Gt.fontPaths;this._objects.forEach((function a(h){e.push(h),Oc(h)&&h._objects.forEach(a)})),e.forEach((a=>{if(!(h=a)||typeof h._renderText!="function")return;var h;const{styles:p,fontFamily:v}=a;!t[v]&&n[v]&&(t[v]=!0,p&&Object.values(p).forEach((y=>{Object.values(y).forEach((b=>{let{fontFamily:O=""}=b;!t[O]&&n[O]&&(t[O]=!0)}))})))}));const s=Object.keys(t).map((a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(n[a],`');
		}
`))).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject((n=>{n.excludeFromExport||this._setSVGObject(e,n,t)}))}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(oi(n)){const s=n.repeat||"",a=this.width,h=this.height,p=this["".concat(t,"Vpt")]?Io(jr(this.viewportTransform)):"";e.push('<rect transform="'.concat(p," translate(").concat(a/2,",").concat(h/2,')" x="').concat(n.offsetX-a/2,'" y="').concat(n.offsetY-h/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!A0(n)?a:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!A0(n)?h:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Ji("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:a=[]}=s,h=dn(s,Lx),{backgroundImage:p,background:v,overlayImage:y,overlay:b,clipPath:O}=h,F=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Mo(a,{reviver:t,signal:n}),au({backgroundImage:p,backgroundColor:v,overlayImage:y,overlayColor:b,clipPath:O},{signal:n})]).then((E=>{let[Z,N]=E;return this.clear(),this.add(...Z),this.set(h),this.set(N),this.renderOnAddRemove=F,this}))}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Dr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,h=s*(a?this.getRetinaScaling():1);return Kd(this.toCanvasElement(h,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,h=s*(a?this.getRetinaScaling():1);return Zd(this.toCanvasElement(h,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:a,filter:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=(t||this.width)*e,v=(n||this.height)*e,y=this.getZoom(),b=this.width,O=this.height,F=this.skipControlsDrawing,E=y*e,Z=this.viewportTransform,N=[E,0,0,E,(Z[4]-(s||0))*e,(Z[5]-(a||0))*e],$=this.enableRetinaScaling,ee=Dr({width:p,height:v}),ae=h?this._objects.filter((ue=>h(ue))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=N,this.width=p,this.height=v,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(ee.getContext("2d"),ae),this.viewportTransform=Z,this.width=b,this.height=O,this.calcViewportBoundaries(),this.enableRetinaScaling=$,this.skipControlsDrawing=F,ee}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Kl.cancelByCanvas(this),this.disposed=!0,new Promise(((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((e=>e.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}de(Wo,"ownDefaults",jx);const Dx=["touchstart","touchmove","touchend"],dv=l=>{const e=cv(l.target),t=(function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n})(l);return new Se(t.clientX+e.left,t.clientY+e.top)},Bc=l=>Dx.includes(l.type)||l.pointerType==="touch",I0=l=>{l.preventDefault(),l.stopPropagation()},ns=l=>{let e=0,t=0,n=0,s=0;for(let a=0,h=l.length;a<h;a++){const{x:p,y:v}=l[a];(p>n||!a)&&(n=p),(p<e||!a)&&(e=p),(v>s||!a)&&(s=v),(v<t||!a)&&(t=v)}return{left:e,top:t,width:n-e,height:s-t}},Rx=["translateX","translateY","scaleX","scaleY"],pv=(l,e)=>jo(l,wn(e,l.calcOwnMatrix())),jo=(l,e)=>{const t=Na(e),{translateX:n,translateY:s,scaleX:a,scaleY:h}=t,p=dn(t,Rx),v=new Se(n,s);l.flipX=!1,l.flipY=!1,Object.assign(l,p),l.set({scaleX:a,scaleY:h}),l.setPositionByOrigin(v,Rt,Rt)},gv=l=>{l.scaleX=1,l.scaleY=1,l.skewX=0,l.skewY=0,l.flipX=!1,l.flipY=!1,l.rotate(0)},tp=l=>({scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,angle:l.angle,left:l.left,flipX:l.flipX,flipY:l.flipY,top:l.top}),sh=(l,e,t)=>{const n=l/2,s=e/2,a=[new Se(-n,-s),new Se(n,-s),new Se(-n,s),new Se(n,s)].map((p=>p.transform(t))),h=ns(a);return new Se(h.width,h.height)},ou=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cr;return wn(jr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:cr),l)},ys=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cr;return l.transform(ou(e,t))},mv=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cr;return l.transform(ou(e,t),!0)},gd=(l,e,t)=>{const n=ou(e,t);return jo(l,wn(n,l.calcOwnMatrix())),n},np=(l,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(l),ge(ge({},e),{},{target:n})),n.fire(l,e)},Fx={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Dn=l=>typeof l=="string"?Fx[l]:l-.5,zc="not-allowed";function vv(l){return Dn(l.originX)===Dn(Rt)&&Dn(l.originY)===Dn(Rt)}function j0(l){return .5-Dn(l)}const Pi=(l,e)=>l[e],rp=(l,e,t,n)=>({e:l,transform:e,pointer:new Se(t,n)});function _v(l,e){const t=l.getTotalAngle()+rs(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function ah(l,e,t,n,s){var a;let{target:h,corner:p}=l;const v=h.controls[p],y=((a=h.canvas)===null||a===void 0?void 0:a.getZoom())||1,b=h.padding/y,O=(function(F,E,Z,N){const $=F.getRelativeCenterPoint(),ee=Z!==void 0&&N!==void 0?F.translateToGivenOrigin($,Rt,Rt,Z,N):new Se(F.left,F.top);return(F.angle?E.rotate(-En(F.angle),$):E).subtract(ee)})(h,new Se(n,s),e,t);return O.x>=b&&(O.x-=b),O.x<=-b&&(O.x+=b),O.y>=b&&(O.y-=b),O.y<=b&&(O.y+=b),O.x-=v.offsetX,O.y-=v.offsetY,O}const yv=(l,e,t,n)=>{const{target:s,offsetX:a,offsetY:h}=e,p=t-a,v=n-h,y=!Pi(s,"lockMovementX")&&s.left!==p,b=!Pi(s,"lockMovementY")&&s.top!==v;return y&&s.set(nn,p),b&&s.set(Lr,v),(y||b)&&np(Jm,rp(l,e,t,n)),y||b},Vc=l=>l.replace(/\s+/g," "),L0={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},$f=(l,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?l+6*(e-l)*t:t<.5?e:t<2/3?l+(e-l)*(2/3-t)*6:l),D0=(l,e,t,n)=>{l/=255,e/=255,t/=255;const s=Math.max(l,e,t),a=Math.min(l,e,t);let h,p;const v=(s+a)/2;if(s===a)h=p=0;else{const y=s-a;switch(p=v>.5?y/(2-s-a):y/(s+a),s){case l:h=(e-t)/y+(e<t?6:0);break;case e:h=(t-l)/y+2;break;case t:h=(l-e)/y+4}h/=6}return[Math.round(360*h),Math.round(100*p),Math.round(100*v),n]},R0=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(l)/(l.endsWith("%")?100:1)},mc=l=>Math.min(Math.round(l),255).toString(16).toUpperCase().padStart(2,"0"),F0=l=>{let[e,t,n,s=1]=l;const a=Math.round(.3*e+.59*t+.11*n);return[a,a,a,s]};class $t{constructor(e){if(de(this,"isUnrecognised",!1),e)if(e instanceof $t)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,a=1]=e;this.setSource([t,n,s,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in L0&&(e=L0[e]),e==="transparent"?[255,255,255,0]:$t.sourceFromHex(e)||$t.sourceFromRgb(e)||$t.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=D0(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=D0(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(mc(e)).concat(mc(t)).concat(mc(n)).concat(mc(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(F0(this.getSource())),this}toBlackWhite(e){const[t,,,n]=F0(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof $t||(e=new $t(e));const t=this.getSource(),n=e.getSource(),[s,a,h]=t.map(((p,v)=>Math.round(.5*p+.5*n[v])));return this.setSource([s,a,h,t[3]]),this}static fromRgb(e){return $t.fromRgba(e)}static fromRgba(e){return new $t($t.sourceFromRgb(e))}static sourceFromRgb(e){const t=Vc(e).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(t){const[n,s,a]=t.slice(1,4).map((h=>{const p=parseFloat(h);return h.endsWith("%")?Math.round(2.55*p):p}));return[n,s,a,R0(t[4])]}}static fromHsl(e){return $t.fromHsla(e)}static fromHsla(e){return new $t($t.sourceFromHsl(e))}static sourceFromHsl(e){const t=Vc(e).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!t)return;const n=($t.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let h,p,v;if(s===0)h=p=v=a;else{const y=a<=.5?a*(s+1):a+s-a*s,b=2*a-y;h=$f(b,y,n+1/3),p=$f(b,y,n),v=$f(b,y,n-1/3)}return[Math.round(255*h),Math.round(255*p),Math.round(255*v),R0(t[4])]}static fromHex(e){return new $t($t.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map((v=>v+v)):t.match(/.{2}/g);const[s,a,h,p=255]=n.map((v=>parseInt(v,16)));return[s,a,h,p/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?rs(n):t.includes("turn")?360*n:n}}const gr=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hd;const t=/\D{0,2}$/.exec(l),n=parseFloat(l),s=Gt.DPI;switch(t?.[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},ip=l=>{const[e,t]=l.trim().split(" "),[n,s]=(a=e)&&a!==yr?[a.slice(1,4),a.slice(5,8)]:a===yr?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},Zl=function(l,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new $t(e),h=a.getAlpha();t=a.toRgb(),h!==1&&(n=h.toString())}else t="none";return s?"".concat(l,": ").concat(t,"; ").concat(n?"".concat(l,"-opacity: ").concat(n,"; "):""):"".concat(l,'="').concat(t,'" ').concat(n?"".concat(l,'-opacity="').concat(n,'" '):"")};class xv{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):yr,a=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",v=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=this.opacity!==void 0?this.opacity:"1",b=this.visible?"":" visibility: hidden;",O=e?"":this.getSvgFilter(),F=Zl(Rn,this.fill);return[Zl(xr,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",v,"; ",F,"fill-rule: ",t,"; ","opacity: ",y,";",O,b].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Io(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=t?"":'style="'.concat(this.getSvgStyles(),'" '),p=s?'style="'.concat(this.getSvgFilter(),'" '):"",v=this.clipPath,y=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=v&&v.absolutePositioned,O=this.stroke,F=this.fill,E=this.shadow,Z=[],N=e.indexOf("COMMON_PARTS");let $;v&&(v.clipPathId="CLIPPATH_".concat(ra()),$='<clipPath id="'.concat(v.clipPathId,`" >
`).concat(v.toClipPathSVG(n),`</clipPath>
`)),b&&Z.push("<g ",p,this.getSvgCommons(),` >
`),Z.push("<g ",this.getSvgTransform(!1),b?"":p+this.getSvgCommons(),` >
`);const ee=[h,y,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[N]=ee,oi(F)&&Z.push(F.toSVG(this)),oi(O)&&Z.push(O.toSVG(this)),E&&Z.push(E.toSVG(this)),v&&Z.push($),Z.push(e.join("")),Z.push(`</g>
`),b&&Z.push(`</g>
`),n?n(Z.join("")):Z.join("")}addPaintOrder(){return this.paintFirst!==Rn?' paint-order="'.concat(this.paintFirst,'" '):""}}function oh(l){return new RegExp("^("+l.join("|")+")\\b","i")}const Ba="textDecorationThickness",wv=["fontSize","fontWeight","fontFamily","fontStyle"],bv=["underline","overline","linethrough"],Sv=[...wv,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Cv=[...Sv,...bv,"textBackgroundColor","direction",Ba],Nx=[...wv,...bv,xr,"strokeWidth",Rn,"deltaY","textBackgroundColor",Ba],Bx={_reNewline:Xd,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:nn,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:nn,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Ba]:66.667},Zi="justify",Wc="justify-left",Ul="justify-right",Hl="justify-center";var N0,B0,z0;const Ei=String.raw(N0||(N0=is(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),ed=String.raw(B0||(B0=is(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),md="http://www.w3.org/2000/svg",zx=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ei+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ei+"))?\\s+(.*)"),Vx={cx:nn,x:nn,r:"radius",cy:Lr,y:Lr,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Ba},td="font-size",nd="clip-path",Wx=oh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Ux=oh(["symbol","image","marker","pattern","view","svg"]),V0=oh(["symbol","g","a","svg","clipPath","defs"]),W0=new RegExp(String.raw(z0||(z0=is(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Ei,ed,Ei,ed,Ei,ed,Ei)),Hx=new Se(1,0),kv=new Se,sp=(l,e)=>l.rotate(e),Uc=(l,e)=>new Se(e).subtract(l),Hc=l=>l.distanceFrom(kv),Xc=(l,e)=>Math.atan2(Po(l,e),Ev(l,e)),Tv=l=>Xc(Hx,l),lh=l=>l.eq(kv)?l:l.scalarDivide(Hc(l)),ap=function(l){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return lh(new Se(-l.y,l.x).scalarMultiply(e?1:-1))},Po=(l,e)=>l.x*e.y-l.y*e.x,Ev=(l,e)=>l.x*e.x+l.y*e.y,vd=(l,e,t)=>{if(l.eq(e)||l.eq(t))return!0;const n=Po(e,t),s=Po(e,l),a=Po(t,l);return n>=0?s>=0&&a<=0:!(s<=0&&a>=0)},U0="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",H0=new RegExp("(?:\\s|^)"+U0+U0+"("+Ei+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class wr{constructor(e){const t=typeof e=="string"?wr.parseShadow(e):e;Object.assign(this,wr.ownDefaults,t),this.id=ra()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,a=0]=(H0.exec(t)||[]).map((h=>parseFloat(h)||0));return{color:(t.replace(H0,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=sp(new Se(this.offsetX,this.offsetY),En(-e.angle)),n=new $t(this.color);let s=40,a=40;return e.width&&e.height&&(s=100*on((Math.abs(t.x)+this.blur)/e.width,Gt.NUM_FRACTION_DIGITS)+20,a=100*on((Math.abs(t.y)+this.blur)/e.height,Gt.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(on(this.blur?this.blur/2:0,Gt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(on(t.x,Gt.NUM_FRACTION_DIGITS),'" dy="').concat(on(t.y,Gt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=wr.ownDefaults;return this.includeDefaultValues?e:$d(e,((n,s)=>n!==t[s]))}static async fromObject(e){return new this(e)}}de(wr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),de(wr,"type","shadow"),ct.setClass(wr,"shadow");const za=(l,e,t)=>Math.max(l,Math.min(e,t)),Xx=[Lr,nn,br,Gr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Bo,zo],Cs=[Rn,xr,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Yx={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:nn,originY:Lr,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Rn,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},rd=(l,e,t,n)=>(l<Math.abs(e)?(l=e,n=t/4):n=e===0&&l===0?t/bs*Math.asin(1):t/bs*Math.asin(e/l),{a:l,c:e,p:t,s:n}),X0=(l,e,t,n,s)=>l*Math.pow(2,10*(n-=1))*Math.sin((n*s-e)*bs/t),Ov=(l,e,t,n)=>-t*Math.cos(l/n*na)+t+e,_d=(l,e,t,n)=>(l/=n)<1/2.75?t*(7.5625*l*l)+e:l<2/2.75?t*(7.5625*(l-=1.5/2.75)*l+.75)+e:l<2.5/2.75?t*(7.5625*(l-=2.25/2.75)*l+.9375)+e:t*(7.5625*(l-=2.625/2.75)*l+.984375)+e,Y0=(l,e,t,n)=>t-_d(n-l,0,t,n)+e;var Gx=Object.freeze({__proto__:null,defaultEasing:Ov,easeInBack:function(l,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(l/=n)*l*((s+1)*l-s)+e},easeInBounce:Y0,easeInCirc:(l,e,t,n)=>-t*(Math.sqrt(1-(l/=n)*l)-1)+e,easeInCubic:(l,e,t,n)=>t*(l/n)**3+e,easeInElastic:(l,e,t,n)=>{const s=t;let a=0;if(l===0)return e;if((l/=n)===1)return e+t;a||(a=.3*n);const{a:h,s:p,p:v}=rd(s,t,a,1.70158);return-X0(h,p,v,l,n)+e},easeInExpo:(l,e,t,n)=>l===0?e:t*2**(10*(l/n-1))+e,easeInOutBack:function(l,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(l/=n/2)<1?t/2*(l*l*((1+(s*=1.525))*l-s))+e:t/2*((l-=2)*l*((1+(s*=1.525))*l+s)+2)+e},easeInOutBounce:(l,e,t,n)=>l<n/2?.5*Y0(2*l,0,t,n)+e:.5*_d(2*l-n,0,t,n)+.5*t+e,easeInOutCirc:(l,e,t,n)=>(l/=n/2)<1?-t/2*(Math.sqrt(1-l**2)-1)+e:t/2*(Math.sqrt(1-(l-=2)*l)+1)+e,easeInOutCubic:(l,e,t,n)=>(l/=n/2)<1?t/2*l**3+e:t/2*((l-2)**3+2)+e,easeInOutElastic:(l,e,t,n)=>{const s=t;let a=0;if(l===0)return e;if((l/=n/2)===2)return e+t;a||(a=n*(.3*1.5));const{a:h,s:p,p:v,c:y}=rd(s,t,a,1.70158);return l<1?-.5*X0(h,p,v,l,n)+e:h*Math.pow(2,-10*(l-=1))*Math.sin((l*n-p)*bs/v)*.5+y+e},easeInOutExpo:(l,e,t,n)=>l===0?e:l===n?e+t:(l/=n/2)<1?t/2*2**(10*(l-1))+e:t/2*-(2**(-10*--l)+2)+e,easeInOutQuad:(l,e,t,n)=>(l/=n/2)<1?t/2*l**2+e:-t/2*(--l*(l-2)-1)+e,easeInOutQuart:(l,e,t,n)=>(l/=n/2)<1?t/2*l**4+e:-t/2*((l-=2)*l**3-2)+e,easeInOutQuint:(l,e,t,n)=>(l/=n/2)<1?t/2*l**5+e:t/2*((l-2)**5+2)+e,easeInOutSine:(l,e,t,n)=>-t/2*(Math.cos(Math.PI*l/n)-1)+e,easeInQuad:(l,e,t,n)=>t*(l/=n)*l+e,easeInQuart:(l,e,t,n)=>t*(l/=n)*l**3+e,easeInQuint:(l,e,t,n)=>t*(l/n)**5+e,easeInSine:(l,e,t,n)=>-t*Math.cos(l/n*na)+t+e,easeOutBack:function(l,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((l=l/n-1)*l*((s+1)*l+s)+1)+e},easeOutBounce:_d,easeOutCirc:(l,e,t,n)=>t*Math.sqrt(1-(l=l/n-1)*l)+e,easeOutCubic:(l,e,t,n)=>t*((l/n-1)**3+1)+e,easeOutElastic:(l,e,t,n)=>{const s=t;let a=0;if(l===0)return e;if((l/=n)===1)return e+t;a||(a=.3*n);const{a:h,s:p,p:v,c:y}=rd(s,t,a,1.70158);return h*2**(-10*l)*Math.sin((l*n-p)*bs/v)+y+e},easeOutExpo:(l,e,t,n)=>l===n?e+t:t*-(2**(-10*l/n)+1)+e,easeOutQuad:(l,e,t,n)=>-t*(l/=n)*(l-2)+e,easeOutQuart:(l,e,t,n)=>-t*((l=l/n-1)*l**3-1)+e,easeOutQuint:(l,e,t,n)=>t*((l/n-1)**5+1)+e,easeOutSine:(l,e,t,n)=>t*Math.sin(l/n*na)+e});const qx=()=>!1;class op{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:a=0,easing:h=Ov,onStart:p=Fa,onChange:v=Fa,onComplete:y=Fa,abort:b=qx,target:O}=e;de(this,"_state","pending"),de(this,"durationProgress",0),de(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=a,this.easing=h,this._onStart=p,this._onChange=v,this._onComplete=y,this._abort=b,this.target=O,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Vl(e)),this.delay):Vl(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:a}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vl(this.tick)))}register(){Kl.push(this)}unregister(){Kl.remove(this)}abort(){this._state="aborted",this.unregister()}}const Kx=["startValue","endValue"];class Zx extends op{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(ge(ge({},dn(e,Kx)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const Qx=["startValue","endValue"];class Jx extends op{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(ge(ge({},dn(e,Qx)),{},{startValue:t,byValue:n.map(((s,a)=>s-t[a]))}))}calculate(e){const t=this.startValue.map(((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s)));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const $x=["startValue","endValue","easing","onChange","onComplete","abort"],ew=(l,e,t,n)=>e+t*(1-Math.cos(l/n*na)),id=l=>l&&((e,t,n)=>l(new $t(e).toRgba(),t,n));class tw extends op{constructor(e){let{startValue:t,endValue:n,easing:s=ew,onChange:a,onComplete:h,abort:p}=e,v=dn(e,$x);const y=new $t(t).getSource(),b=new $t(n).getSource();super(ge(ge({},v),{},{startValue:y,byValue:b.map(((O,F)=>O-y[F])),easing:s,onChange:id(a),onComplete:id(h),abort:id(p)}))}calculate(e){const[t,n,s,a]=this.startValue.map(((p,v)=>this.easing(e,p,this.byValue[v],this.duration,v))),h=[...[t,n,s].map(Math.round),za(0,a,1)];return{value:h,valueProgress:h.map(((p,v)=>this.byValue[v]!==0?Math.abs((p-this.startValue[v])/this.byValue[v]):0)).find((p=>p!==0))||0}}}function lp(l){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(l)?new Jx(l):new Zx(l);return e.start(),e}function Pv(l){const e=new tw(l);return e.start(),e}class mn{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some((t=>t.eq(e)))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter((s=>!this.includes(s)))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const a=Uc(t,n),h=Uc(t,e).divide(a);return s?Math.abs(h.x)===Math.abs(h.y):h.x===h.y&&h.x>=0&&h.x<=1}}static isPointInPolygon(e,t){const n=new Se(e).setX(Math.min(e.x-1,...t.map((a=>a.x))));let s=0;for(let a=0;a<t.length;a++){const h=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,n);if(h.includes(e))return!0;s+=+(h.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],h=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const p=t.x-e.x,v=t.y-e.y,y=s.x-n.x,b=s.y-n.y,O=e.x-n.x,F=e.y-n.y,E=y*F-b*O,Z=p*F-v*O,N=b*p-y*v;if(N!==0){const $=E/N,ee=Z/N;return(a||0<=$&&$<=1)&&(h||0<=ee&&ee<=1)?new mn("Intersection").append(new Se(e.x+$*p,e.y+$*v)):new mn}if(E===0||Z===0){const $=a||h||mn.isPointContained(e,n,s)||mn.isPointContained(t,n,s)||mn.isPointContained(n,e,t)||mn.isPointContained(s,e,t);return new mn($?"Coincident":void 0)}return new mn("Parallel")}static intersectSegmentLine(e,t,n,s){return mn.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return mn.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new mn,h=n.length;for(let p,v,y,b=0;b<h;b++){if(p=n[b],v=n[(b+1)%h],y=mn.intersectLineLine(e,t,p,v,s,!1),y.status==="Coincident")return y;a.append(...y.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,n){return mn.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new mn,s=e.length,a=[];for(let h=0;h<s;h++){const p=e[h],v=e[(h+1)%s],y=mn.intersectSegmentPolygon(p,v,t);y.status==="Coincident"?(a.push(y),n.append(p,v)):n.append(...y.points)}return a.length>0&&a.length===e.length?new mn("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),a=t.max(n),h=new Se(a.x,s.y),p=new Se(s.x,a.y);return mn.intersectPolygonPolygon(e,[s,h,a,p])}}class nw extends rv{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?lr(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=lr(e,jr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new Se(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,n,s];if(this.group){const h=this.group.calcTransformMatrix();return a.map((p=>lr(p,h)))}return a}intersectsWithRect(e,t){return mn.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=mn.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every((t=>e.containsPoint(t)))}isContainedWithinRect(e,t){const{left:n,top:s,width:a,height:h}=this.getBoundingRect();return n>=e.x&&n+a<=t.x&&s>=e.y&&s+h<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return mn.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some((n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y))||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every((n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y)))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return ns(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(br,e),this._set(Gr,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?rs(ov(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||cr.concat()}calcACoords(){const e=Ha({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=Vo(t,n),a=wn(s,e),h=this._getTransformedDimensions(),p=h.x/2,v=h.y/2;return{tl:lr({x:-p,y:-v},a),tr:lr({x:p,y:-v},a),bl:lr({x:-p,y:v},a),br:lr({x:p,y:v},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Dn(this.originX),Dn(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every(((a,h)=>a===n[h]))?s.value:(this.group&&(t=wn(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=uv(s);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new Se(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=ge({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,a=0;this.strokeUniform&&(s=0,a=n);const h=t.width+s,p=t.height+s;let v;return v=t.skewX===0&&t.skewY===0?new Se(h*t.scaleX,p*t.scaleY):sh(h,p,su(t)),v.scalarAdd(a)}translateToGivenOrigin(e,t,n,s,a){let h=e.x,p=e.y;const v=Dn(s)-Dn(t),y=Dn(a)-Dn(n);if(v||y){const b=this._getTransformedDimensions();h+=v*b.x,p+=y*b.y}return new Se(h,p)}translateToCenterPoint(e,t,n){if(t===Rt&&n===Rt)return e;const s=this.translateToGivenOrigin(e,t,n,Rt,Rt);return this.angle?s.rotate(En(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,Rt,Rt,t,n);return this.angle?s.rotate(En(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?lr(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Se(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),a=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),nn,Lr)}}const rw=["type"],iw=["extraParam"];let Ki=class Pc extends nw{static getDefaults(){return Pc.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){ws("warn","Setting type has no effect",e)}constructor(e){super(),de(this,"_cacheContext",null),Object.assign(this,Pc.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=ui(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=Gt.maxCacheSideLimit,a=Gt.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=Gt.perfLimitSizeTotal)return t<a&&(e.width=a),n<a&&(e.height=a),e;const h=t/n,[p,v]=Oo.limitDimsByArea(h),y=za(a,p,s),b=za(a,v,s);return t>y&&(e.zoomX/=t/y,e.width=y,e.capped=!0),n>b&&(e.zoomY/=n/b,e.height=b,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:s,zoomX:a,zoomY:h,x:p,y:v}=this._limitCacheSize(this._getCacheCanvasDimensions()),y=n!==e.width||s!==e.height,b=this.zoomX!==a||this.zoomY!==h;if(!e||!t)return!1;if(y||b){n!==e.width||s!==e.height?(e.width=n,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const O=p/2,F=v/2;return this.cacheTranslationX=Math.round(e.width/2-O)+O,this.cacheTranslationY=Math.round(e.height/2-F)+F,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,h),this.zoomX=a,this.zoomY=h,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new Se(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Na(this.calcTransformMatrix());return new Se(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==br&&e!==Gr||(t=this._constrainScale(t)),e===br&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof wr||(t=new wr(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:a}=this,{width:h,height:p}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:a,width:h,height:p,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===xr&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const s=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=a}createClipPathLayer(e,t){const n=Dr(t),s=n.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach((a=>{a.transform(s)})),t.parentClipPaths.push(e),e.absolutePositioned){const a=jr(this.calcTransformMatrix());s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(s),e.drawObject(s,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,oi(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(oi(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[a,,,h]=n?.viewportTransform||cr,p=a*s,v=h*s,y=t.nonScaling?new Se(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Gt.browserShadowBlurConstant*(p+v)*(y.x+y.y)/4,e.shadowOffsetX=t.offsetX*p*y.x,e.shadowOffsetY=t.offsetY*v*y.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!oi(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,a):e.transform(1,0,0,1,s,a),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===xr?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),h=s.x/this.scaleX/a,p=s.y/this.scaleY/a,v=Dr({width:Math.ceil(h),height:Math.ceil(p)}),y=v.getContext("2d");y&&(y.beginPath(),y.moveTo(0,0),y.lineTo(h,0),y.lineTo(h,p),y.lineTo(0,p),y.closePath(),y.translate(h/2,p/2),y.scale(s.zoomX/this.scaleX/a,s.zoomY/this.scaleY/a),this._applyPatternGradientTransform(y,t),y.fillStyle=t.toLive(e),y.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/s.zoomX,a*this.scaleY/s.zoomY),e.strokeStyle=(n=y.createPattern(v,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new Se(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ct.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=tp(this),n=this.group,s=this.shadow,a=Math.abs,h=e.enableRetinaScaling?Qm():1,p=(e.multiplier||1)*h,v=e.canvasProvider||(ae=>new Wo(ae,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&gv(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&gd(this,this.getViewportTransform()),this.setCoords();const y=ui(),b=this.getBoundingRect(),O=this.shadow,F=new Se;if(O){const ae=O.blur,ue=O.nonScaling?new Se(1,1):this.getObjectScaling();F.x=2*Math.round(a(O.offsetX)+ae)*a(ue.x),F.y=2*Math.round(a(O.offsetY)+ae)*a(ue.y)}const E=b.width+F.x,Z=b.height+F.y;y.width=Math.ceil(E),y.height=Math.ceil(Z);const N=v(y);e.format==="jpeg"&&(N.backgroundColor="#fff"),this.setPositionByOrigin(new Se(N.width/2,N.height/2),Rt,Rt);const $=this.canvas;N._objects=[this],this.set("canvas",N),this.setCoords();const ee=N.toCanvasElement(p||1,e);return this.set("canvas",$),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),N._objects=[],N.destroy(),ee}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Kd(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zd(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:a,y:h}=this.getRelativeCenterPoint();this.originX=Rt,this.originY=Rt,this.left=a,this.top=h}if(this.set("angle",e),t){const{x:a,y:h}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=a,this.top=h,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Kl.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Mi().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce(((n,s)=>{let[a,h]=s;return n[a]=this._animate(a,h,t),n}),{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),a=this.constructor.colorProperties.includes(s[s.length-1]),{abort:h,startValue:p,onChange:v,onComplete:y}=n,b=ge(ge({},n),{},{target:this,startValue:p??s.reduce(((O,F)=>O[F]),this),endValue:t,abort:h?.bind(this),onChange:(O,F,E)=>{s.reduce(((Z,N,$)=>($===s.length-1&&(Z[N]=O),Z[N])),this),v&&v(O,F,E)},onComplete:(O,F,E)=>{this.setCoords(),y&&y(O,F,E)}});return a?Pv(b):lp(b)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,a=0;a<t.length;a++){if(s=t[a],s===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let h=0;h<n.length;h++){if(this===n[h])return{fork:[],otherFork:[e,...n.slice(0,h)],common:[this,...t]};if(s===n[h])return{fork:[this,...t.slice(0,a)],otherFork:[e,...n.slice(0,h)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),a=t.otherFork.pop(),h=n._objects.indexOf(s),p=n._objects.indexOf(a);return h>-1&&h>p}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Pc.customProperties,this.constructor.customProperties||[]);let t;const n=Gt.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:h,shadow:p,strokeDashArray:v,left:y,top:b,originX:O,originY:F,width:E,height:Z,strokeWidth:N,strokeLineCap:$,strokeDashOffset:ee,strokeLineJoin:ae,strokeUniform:ue,strokeMiterLimit:xe,scaleX:Ce,scaleY:z,angle:Ve,flipX:He,flipY:Je,opacity:ut,visible:Ie,backgroundColor:Ke,fillRule:dt,paintFirst:ze,globalCompositeOperation:Bt,skewX:Le,skewY:wt}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const Be=Ze=>on(Ze,n),Xe=ge(ge({},Xa(this,e)),{},{type:this.constructor.type,version:Rc,originX:O,originY:F,left:Be(y),top:Be(b),width:Be(E),height:Be(Z),fill:P0(a)?a.toObject():a,stroke:P0(h)?h.toObject():h,strokeWidth:Be(N),strokeDashArray:v&&v.concat(),strokeLineCap:$,strokeDashOffset:ee,strokeLineJoin:ae,strokeUniform:ue,strokeMiterLimit:Be(xe),scaleX:Be(Ce),scaleY:Be(z),angle:Be(Ve),flipX:He,flipY:Je,opacity:Be(ut),shadow:p&&p.toObject(),visible:Ie,backgroundColor:Ke,fillRule:dt,paintFirst:ze,globalCompositeOperation:Bt,skewX:Be(Le),skewY:Be(wt)},t?{clipPath:t}:null);return this.includeDefaultValues?Xe:this._removeDefaultValues(Xe)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return $d(e,((s,a)=>{if(a===nn||a===Lr||a==="type")return!0;const h=n[a];return s!==h&&!(Array.isArray(s)&&Array.isArray(h)&&s.length===0&&h.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=dn(e,rw),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,a=dn(n,iw);return au(t,a).then((h=>s?(delete h[s],new this(t[s],h)):new this(h)))}static fromObject(e,t){return this._fromObject(e,t)}};de(Ki,"stateProperties",Xx),de(Ki,"cacheProperties",Cs),de(Ki,"ownDefaults",Yx),de(Ki,"type","FabricObject"),de(Ki,"colorProperties",[Rn,xr,"backgroundColor"]),de(Ki,"customProperties",[]),ct.setClass(Ki),ct.setClass(Ki,"object");const sa=(l,e,t)=>(n,s,a,h)=>{const p=e(n,s,a,h);return p&&np(l,ge(ge({},rp(n,s,a,h)),t)),p};function Ya(l){return(e,t,n,s)=>{const{target:a,originX:h,originY:p}=t,v=a.getRelativeCenterPoint(),y=a.translateToOriginPoint(v,h,p),b=l(e,t,n,s);return a.setPositionByOrigin(y,t.originX,t.originY),b}}const yd=sa(ql,Ya(((l,e,t,n)=>{const s=ah(e,e.originX,e.originY,t,n);if(Dn(e.originX)===Dn(Rt)||Dn(e.originX)===Dn(Mn)&&s.x<0||Dn(e.originX)===Dn(nn)&&s.x>0){const{target:a}=e,h=a.strokeWidth/(a.strokeUniform?a.scaleX:1),p=vv(e)?2:1,v=a.width,y=Math.abs(s.x*p/a.scaleX)-h;return a.set("width",Math.max(y,1)),v!==a.width}return!1})));function Av(l,e,t,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,h=this.sizeY||n.cornerSize||s.cornerSize,p=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,v=p?xr:Rn,y=!p&&(n.cornerStrokeColor||s.cornerStrokeColor);let b,O=e,F=t;l.save(),l.fillStyle=n.cornerColor||s.cornerColor||"",l.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",a>h?(b=a,l.scale(1,h/a),F=t*a/h):h>a?(b=h,l.scale(a/h,1),O=e*h/a):b=a,l.beginPath(),l.arc(O,F,b/2,0,bs,!1),l[v](),y&&l.stroke(),l.restore()}function Mv(l,e,t,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,h=this.sizeY||n.cornerSize||s.cornerSize,p=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,v=p?xr:Rn,y=!p&&(n.cornerStrokeColor||s.cornerStrokeColor),b=a/2,O=h/2;l.save(),l.fillStyle=n.cornerColor||s.cornerColor||"",l.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",l.translate(e,t);const F=s.getTotalAngle();l.rotate(En(F)),l["".concat(v,"Rect")](-b,-O,a,h),y&&l.strokeRect(-b,-O,a,h),l.restore()}class Mr{constructor(e){de(this,"visible",!0),de(this,"actionName",nh),de(this,"angle",0),de(this,"x",0),de(this,"y",0),de(this,"offsetX",0),de(this,"offsetY",0),de(this,"sizeX",0),de(this,"sizeY",0),de(this,"touchSizeX",0),de(this,"touchSizeY",0),de(this,"cursorStyle","crosshair"),de(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var a;let{tl:h,tr:p,br:v,bl:y}=s;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&mn.isPointInPolygon(n,[h,p,v,y])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new Se(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,a,h){const p=rh([Vo(n,s),Ha({angle:e}),ih((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new Se(-.5,-.5).transform(p),tr:new Se(.5,-.5).transform(p),br:new Se(.5,.5).transform(p),bl:new Se(-.5,.5).transform(p)}}render(e,t,n,s,a){((s=s||{}).cornerStyle||a.cornerStyle)==="circle"?Av.call(this,e,t,n,s,a):Mv.call(this,e,t,n,s,a)}}const Iv=(l,e,t)=>t.lockRotation?zc:e.cursorStyle,jv=sa($m,Ya(((l,e,t,n)=>{let{target:s,ex:a,ey:h,theta:p,originX:v,originY:y}=e;const b=s.translateToOriginPoint(s.getRelativeCenterPoint(),v,y);if(Pi(s,"lockRotation"))return!1;const O=Math.atan2(h-b.y,a-b.x),F=Math.atan2(n-b.y,t-b.x);let E=rs(F-O+p);if(s.snapAngle&&s.snapAngle>0){const N=s.snapAngle,$=s.snapThreshold||N,ee=Math.ceil(E/N)*N,ae=Math.floor(E/N)*N;Math.abs(E-ae)<$?E=ae:Math.abs(E-ee)<$&&(E=ee)}E<0&&(E=360+E),E%=360;const Z=s.angle!==E;return s.angle=E,Z})));function Lv(l,e){const t=e.canvas,n=l[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function Dv(l,e,t){const n=Pi(l,"lockScalingX"),s=Pi(l,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:a,height:h,strokeWidth:p}=l;return a===0&&p===0&&e!=="y"||h===0&&p===0&&e!=="x"}const sw=["e","se","s","sw","w","nw","n","ne","e"],To=(l,e,t)=>{const n=Lv(l,t);if(Dv(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return zc;const s=_v(t,e);return"".concat(sw[s],"-resize")};function up(l,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,h=s.by,p=Lv(l,a);let v,y,b,O,F,E;if(Dv(a,h,p))return!1;if(e.gestureScale)y=e.scaleX*e.gestureScale,b=e.scaleY*e.gestureScale;else{if(v=ah(e,e.originX,e.originY,t,n),F=h!=="y"?Math.sign(v.x||e.signX||1):1,E=h!=="x"?Math.sign(v.y||e.signY||1):1,e.signX||(e.signX=F),e.signY||(e.signY=E),Pi(a,"lockScalingFlip")&&(e.signX!==F||e.signY!==E))return!1;if(O=a._getTransformedDimensions(),p&&!h){const $=Math.abs(v.x)+Math.abs(v.y),{original:ee}=e,ae=$/(Math.abs(O.x*ee.scaleX/a.scaleX)+Math.abs(O.y*ee.scaleY/a.scaleY));y=ee.scaleX*ae,b=ee.scaleY*ae}else y=Math.abs(v.x*a.scaleX/O.x),b=Math.abs(v.y*a.scaleY/O.y);vv(e)&&(y*=2,b*=2),e.signX!==F&&h!=="y"&&(e.originX=j0(e.originX),y*=-1,e.signX=F),e.signY!==E&&h!=="x"&&(e.originY=j0(e.originY),b*=-1,e.signY=E)}const Z=a.scaleX,N=a.scaleY;return h?(h==="x"&&a.set(br,y),h==="y"&&a.set(Gr,b)):(!Pi(a,"lockScalingX")&&a.set(br,y),!Pi(a,"lockScalingY")&&a.set(Gr,b)),Z!==a.scaleX||N!==a.scaleY}const bl=sa(th,Ya(((l,e,t,n)=>up(l,e,t,n)))),Rv=sa(th,Ya(((l,e,t,n)=>up(l,e,t,n,{by:"x"})))),Fv=sa(th,Ya(((l,e,t,n)=>up(l,e,t,n,{by:"y"})))),aw=["target","ex","ey","skewingSide"],sd={x:{counterAxis:"y",scale:br,skew:Bo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Gr,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},ow=["ns","nesw","ew","nwse"],Nv=(l,e,t)=>{if(e.x!==0&&Pi(t,"lockSkewingY")||e.y!==0&&Pi(t,"lockSkewingX"))return zc;const n=_v(t,e)%4;return"".concat(ow[n],"-resize")};function Bv(l,e,t,n,s){const{target:a}=t,{counterAxis:h,origin:p,lockSkewing:v,skew:y,flip:b}=sd[l];if(Pi(a,v))return!1;const{origin:O,flip:F}=sd[h],E=Dn(t[O])*(a[F]?-1:1),Z=-Math.sign(E)*(a[b]?-1:1),N=.5*-((a[y]===0&&ah(t,Rt,Rt,n,s)[l]>0||a[y]>0?1:-1)*Z)+.5;return sa(ev,Ya(((ee,ae,ue,xe)=>(function(Ce,z,Ve){let{target:He,ex:Je,ey:ut,skewingSide:Ie}=z,Ke=dn(z,aw);const{skew:dt}=sd[Ce],ze=Ve.subtract(new Se(Je,ut)).divide(new Se(He.scaleX,He.scaleY))[Ce],Bt=He[dt],Le=Ke[dt],wt=Math.tan(En(Le)),Be=Ce==="y"?He._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:He._getTransformedDimensions({scaleX:1,scaleY:1}).y,Xe=2*ze*Ie/Math.max(Be,1)+wt,Ze=rs(Math.atan(Xe));He.set(dt,Ze);const we=Bt!==He[dt];if(we&&Ce==="y"){const{skewX:Fe,scaleX:_t}=He,Ct=He._getTransformedDimensions({skewY:Bt}),pt=He._getTransformedDimensions(),Mt=Fe!==0?Ct.x/pt.x:1;Mt!==1&&He.set(br,Mt*_t)}return we})(l,ae,new Se(ue,xe)))))(e,ge(ge({},t),{},{[p]:N,skewingSide:Z}),n,s)}const zv=(l,e,t,n)=>Bv("x",l,e,t,n),Vv=(l,e,t,n)=>Bv("y",l,e,t,n);function uh(l,e){return l[e.canvas.altActionKey]}const Sl=(l,e,t)=>{const n=uh(l,t);return e.x===0?n?Bo:Gr:e.y===0?n?zo:br:""},La=(l,e,t)=>uh(l,t)?Nv(0,e,t):To(l,e,t),xd=(l,e,t,n)=>uh(l,e.target)?Vv(l,e,t,n):Rv(l,e,t,n),wd=(l,e,t,n)=>uh(l,e.target)?zv(l,e,t,n):Fv(l,e,t,n),cp=()=>({ml:new Mr({x:-.5,y:0,cursorStyleHandler:La,actionHandler:xd,getActionName:Sl}),mr:new Mr({x:.5,y:0,cursorStyleHandler:La,actionHandler:xd,getActionName:Sl}),mb:new Mr({x:0,y:.5,cursorStyleHandler:La,actionHandler:wd,getActionName:Sl}),mt:new Mr({x:0,y:-.5,cursorStyleHandler:La,actionHandler:wd,getActionName:Sl}),tl:new Mr({x:-.5,y:-.5,cursorStyleHandler:To,actionHandler:bl}),tr:new Mr({x:.5,y:-.5,cursorStyleHandler:To,actionHandler:bl}),bl:new Mr({x:-.5,y:.5,cursorStyleHandler:To,actionHandler:bl}),br:new Mr({x:.5,y:.5,cursorStyleHandler:To,actionHandler:bl}),mtr:new Mr({x:0,y:-.5,actionHandler:jv,cursorStyleHandler:Iv,offsetY:-40,withConnection:!0,actionName:Yd})}),Wv=()=>({mr:new Mr({x:.5,y:0,actionHandler:yd,cursorStyleHandler:La,actionName:ql}),ml:new Mr({x:-.5,y:0,actionHandler:yd,cursorStyleHandler:La,actionName:ql})}),Uv=()=>ge(ge({},cp()),Wv());class Lo extends Ki{static getDefaults(){return ge(ge({},super.getDefaults()),Lo.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Lo.ownDefaults),this.setOptions(e)}static createControls(){return{controls:cp()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith(nh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[a,h]=n[s],p=this.controls[a];if(p.shouldActivate(a,this,e,t?h.touchCorner:h.corner))return this.__corner=a,{key:a,control:p,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Vo(t.x,t.y),s=Ha({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=wn(n,s),h=wn(e,a),p=wn(h,[1/e[0],0,0,1/e[3],0,0]),v=this.group?Na(this.calcTransformMatrix()):void 0;v&&(v.scaleX=Math.abs(v.scaleX),v.scaleY=Math.abs(v.scaleY));const y=this._calculateCurrentDimensions(v),b={};return this.forEachControl(((O,F)=>{const E=O.positionHandler(y,p,this,O);b[F]=Object.assign(E,this._calcCornerCoords(O,E))})),b}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(En(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=ge({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,a=ge({hasBorders:n,hasControls:s},t),h=this.getViewportTransform(),p=a.hasBorders,v=a.hasControls,y=wn(h,this.calcTransformMatrix()),b=Na(y);e.save(),e.translate(b.translateX,b.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),e.rotate(En(this.group?b.angle:this.angle)),p&&this.drawBorders(e,b,t),v&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const a=sh(this.width,this.height,su(t)),h=this.isStrokeAccountedForInDimensions()?Gd:(this.strokeUniform?new Se().scalarAdd(this.canvas?this.canvas.getZoom():1):new Se(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=a.add(h).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl(((s,a)=>{s.withConnection&&s.getVisibility(this,a)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))})),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:a,cornerColor:h}=this,p=ge({cornerStrokeColor:s,cornerDashArray:a,cornerColor:h},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=p.cornerColor,this.transparentCorners||(e.strokeStyle=p.cornerStrokeColor),this._setLineDash(e,p.cornerDashArray),this.forEachControl(((v,y)=>{if(v.getVisibility(this,y)){const b=this.oCoords[y];v.render(e,b.x,b.y,p,this)}})),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach((t=>{let[n,s]=t;return this.setControlVisible(n,s)}))}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,a=this.height+4;return t.clearRect(-s/2,-a/2,s,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Hv(l,e){return e.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{n!=="constructor"&&Object.defineProperty(l.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}))})),l}de(Lo,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Zn extends Lo{}Hv(Zn,[xv]),ct.setClass(Zn),ct.setClass(Zn,"object");const Xv=(l,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:a}=l.getImageData(e-n,t-n,s,s);for(let h=3;h<a.length;h+=4)if(a[h]>0)return!1;return!0};class Yv{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Se(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Se(1/this.options.scaleX,1/this.options.scaleY):new Se(1,1)}createSideVector(e,t){const n=Uc(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new Se(e);return t.y+=t.x*Math.tan(En(this.options.skewY)),t.x+=t.y*Math.tan(En(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const lw=new Se;class Ao extends Yv{static getOrthogonalRotationFactor(e,t){const n=t?Xc(e,t):Tv(e);return Math.abs(n)<na?-1:1}constructor(e,t,n,s){super(s),de(this,"AB",void 0),de(this,"AC",void 0),de(this,"alpha",void 0),de(this,"bisector",void 0),this.A=new Se(e),this.B=new Se(t),this.C=new Se(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Xc(this.AB,this.AC),this.bisector=lh(sp(this.AB.eq(lw)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),a=ap(s),h=Ao.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,n*h)}projectBevel(){const e=[];return(this.alpha%bs==0?[this.B]:[this.B,this.C]).forEach((t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))})),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),a=this.options.strokeUniform?Hc(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Hc(s)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new Se(Ao.getOrthogonalRotationFactor(this.bisector),Ao.getOrthogonalRotationFactor(new Se(this.bisector.y,this.bisector.x)));return[new Se(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new Se(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach((a=>{vd(a,e,t)&&n.push(this.A.add(a))})),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:a,scaleX:h,scaleY:p,strokeUniform:v}=this.options,y=new Se(Math.tan(En(s)),Math.tan(En(a))),b=this.strokeProjectionMagnitude,O=v?b/p/Math.sqrt(1/p**2+1/h**2*y.y**2):b/Math.sqrt(1+y.y**2),F=new Se(Math.sqrt(Math.max(b**2-O**2,0)),O),E=v?b/Math.sqrt(1+y.x**2*(1/p)**2/(1/h+1/h*y.x*y.y)**2):b/Math.sqrt(1+y.x**2/(1+y.x*y.y)**2),Z=new Se(E,Math.sqrt(Math.max(b**2-E**2,0)));return[Z,Z.scalarMultiply(-1),F,F.scalarMultiply(-1)].map((N=>this.applySkew(v?N.multiply(this.strokeUniformScalar):N))).forEach((N=>{vd(N,e,t)&&n.push(this.applySkew(this.A).add(N))})),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%bs==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),a=e[t?1:0].subtract(n),h=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),p=Po(s,h)>0,v=p?s:a,y=p?a:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(v,y)):e.push(...this.projectRoundNoSkew(v,y)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector})))}}class G0 extends Yv{constructor(e,t,n){super(n),this.A=new Se(e),this.T=new Se(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(ap(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Se(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Ao(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Se(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(lh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map((t=>this.applySkew(t)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e})))}}const Gv=function(l,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(l.length===0)return n;const s=l.reduce(((a,h)=>(a[a.length-1].eq(h)||a.push(new Se(h)),a)),[new Se(l[0])]);if(s.length===1)t=!0;else if(!t){const a=s[0],h=((p,v)=>{for(let y=p.length-1;y>=0;y--)if(v(p[y],y,p))return y;return-1})(s,(p=>!p.eq(a)));s.splice(h+1)}return s.forEach(((a,h,p)=>{let v,y;h===0?(y=p[1],v=t?a:p[p.length-1]):h===p.length-1?(v=p[h-1],y=t?a:p[0]):(v=p[h-1],y=p[h+1]),t&&p.length===1?n.push(...new G0(a,a,e).project()):!t||h!==0&&h!==p.length-1?n.push(...new Ao(a,v,y,e).project()):n.push(...new G0(a,h===0?y:v,e).project())})),n},hp=l=>{const e={};return Object.keys(l).forEach((t=>{e[t]={},Object.keys(l[t]).forEach((n=>{e[t][n]=ge({},l[t][n])}))})),e},qv=l=>l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let _l;const ch=l=>{if(_l||_l||(_l="Intl"in Ti()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),_l){const e=_l.segment(l);return Array.from(e).map((t=>{let{segment:n}=t;return n}))}return uw(l)},uw=l=>{const e=[];for(let t,n=0;n<l.length;n++)(t=cw(l,n))!==!1&&e.push(t);return e},cw=(l,e)=>{const t=l.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return l.charAt(e);if(55296<=t&&t<=56319){if(l.length<=e+1)throw"High surrogate without following low surrogate";const s=l.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return l.charAt(e)+l.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=l.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var hw=Object.freeze({__proto__:null,capitalize:function(l){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(l.charAt(0).toUpperCase()).concat(e?l.slice(1):l.slice(1).toLowerCase())},escapeXml:qv,graphemeSplit:ch});const hh=function(l,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.fill!==e.fill||l.stroke!==e.stroke||l.strokeWidth!==e.strokeWidth||l.fontSize!==e.fontSize||l.fontFamily!==e.fontFamily||l.fontWeight!==e.fontWeight||l.fontStyle!==e.fontStyle||l.textDecorationThickness!==e.textDecorationThickness||l.textBackgroundColor!==e.textBackgroundColor||l.deltaY!==e.deltaY||t&&(l.overline!==e.overline||l.underline!==e.underline||l.linethrough!==e.linethrough)},Kv=(l,e)=>{const t=e.split(`
`),n=[];let s=-1,a={};l=hp(l);for(let h=0;h<t.length;h++){const p=ch(t[h]);if(l[h])for(let v=0;v<p.length;v++){s++;const y=l[h][v];y&&Object.keys(y).length>0&&(hh(a,y,!0)?n.push({start:s,end:s+1,style:y}):n[n.length-1].end++),a=y||{}}else s+=p.length,a={}}return n},Zv=(l,e)=>{if(!Array.isArray(l))return hp(l);const t=e.split(Xd),n={};let s=-1,a=0;for(let h=0;h<t.length;h++){const p=ch(t[h]);for(let v=0;v<p.length;v++)s++,l[a]&&l[a].start<=s&&s<l[a].end&&(n[h]=n[h]||{},n[h][v]=ge({},l[a].style),s===l[a].end-1&&a++)}return n},aa=["display","transform",Rn,"fill-opacity","fill-rule","opacity",xr,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function q0(l,e){const t=l.nodeName,n=l.getAttribute("class"),s=l.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let h;if(h=new RegExp("^"+t,"i"),e=e.replace(h,""),s&&e.length&&(h=new RegExp("#"+s+a,"i"),e=e.replace(h,"")),n&&e.length){const p=n.split(" ");for(let v=p.length;v--;)h=new RegExp("\\."+p[v]+a,"i"),e=e.replace(h,"")}return e.length===0}function fw(l,e){let t=!0;const n=q0(l,e.pop());return n&&e.length&&(t=(function(s,a){let h,p=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&a.length;)p&&(h=a.pop()),p=q0(s=s.parentElement,h);return a.length===0})(l,e)),n&&t&&e.length===0}const dw=l=>{var e;return(e=Vx[l])!==null&&e!==void 0?e:l},pw=new RegExp("(".concat(Ei,")"),"gi"),gw=l=>Vc(l.replace(pw," $1 ").replace(/,/gi," "));var K0,Z0,Q0,J0,$0,em,tm;const vr="(".concat(Ei,")"),mw=String.raw(K0||(K0=is(["(skewX)(",")"],["(skewX)\\(","\\)"])),vr),vw=String.raw(Z0||(Z0=is(["(skewY)(",")"],["(skewY)\\(","\\)"])),vr),_w=String.raw(Q0||(Q0=is(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),vr,vr,vr),yw=String.raw(J0||(J0=is(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),vr,vr),xw=String.raw($0||($0=is(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),vr,vr),ww=String.raw(em||(em=is(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),vr,vr,vr,vr,vr,vr),fp="(?:".concat(ww,"|").concat(xw,"|").concat(_w,"|").concat(yw,"|").concat(mw,"|").concat(vw,")"),bw="(?:".concat(fp,"*)"),Sw=String.raw(tm||(tm=is(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),bw),Cw=new RegExp(Sw),kw=new RegExp(fp),Tw=new RegExp(fp,"g");function Ql(l){const e=[];if(!(l=gw(l).replace(/\s*([()])\s*/gi,"$1"))||l&&!Cw.test(l))return[...cr];for(const t of l.matchAll(Tw)){const n=kw.exec(t[0]);if(!n)continue;let s=cr;const a=n.filter((Z=>!!Z)),[,h,...p]=a,[v,y,b,O,F,E]=p.map((Z=>parseFloat(Z)));switch(h){case"translate":s=Vo(v,y);break;case Yd:s=Ha({angle:v},{x:y,y:b});break;case nh:s=ih(v,y);break;case Bo:s=Qd(v);break;case zo:s=Jd(v);break;case"matrix":s=[v,y,b,O,F,E]}e.push(s)}return rh(e)}function Ew(l,e,t,n){const s=Array.isArray(e);let a,h=e;if(l!==Rn&&l!==xr||e!==yr){if(l==="strokeUniform")return e==="non-scaling-stroke";if(l==="strokeDashArray")h=e===yr?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(l==="transformMatrix")h=t&&t.transformMatrix?wn(t.transformMatrix,Ql(e)):Ql(e);else if(l==="visible")h=e!==yr&&e!=="hidden",t&&t.visible===!1&&(h=!1);else if(l==="opacity")h=parseFloat(e),t&&t.opacity!==void 0&&(h*=t.opacity);else if(l==="textAnchor")h=e==="start"?nn:e==="end"?Mn:Rt;else if(l==="charSpacing"||l===Ba)a=gr(e,n)/n*1e3;else if(l==="paintFirst"){const p=e.indexOf(Rn),v=e.indexOf(xr);h=Rn,(p>-1&&v>-1&&v<p||p===-1&&v>-1)&&(h=xr)}else{if(l==="href"||l==="xlink:href"||l==="font"||l==="id")return e;if(l==="imageSmoothing")return e==="optimizeQuality";a=s?e.map(gr):gr(e,n)}}else h="";return!s&&isNaN(a)?h:a}function Qv(l,e){const t=l.match(zx);if(!t)return;const n=t[1],s=t[3],a=t[4],h=t[5],p=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(e.fontSize=gr(a)),p&&(e.fontFamily=p),h&&(e.lineHeight=h==="normal"?1:h)}function bd(l,e){l.replace(/;\s*$/,"").split(";").forEach((t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()}))}function Jv(l){const e={},t=l.getAttribute("style");return t&&(typeof t=="string"?bd(t,e):(function(n,s){Object.entries(n).forEach((a=>{let[h,p]=a;p!==void 0&&(s[h.toLowerCase()]=p)}))})(t,e)),e}const Ow={stroke:"strokeOpacity",fill:"fillOpacity"};function ss(l,e,t){if(!l)return{};let n,s={},a=Hd;l.parentNode&&V0.test(l.parentNode.nodeName)&&(s=ss(l.parentElement,e,t),s.fontSize&&(n=a=gr(s.fontSize)));const h=ge(ge(ge({},e.reduce(((y,b)=>{const O=l.getAttribute(b);return O&&(y[b]=O),y}),{})),(function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={};for(const F in b)fw(y,F.split(" "))&&(O=ge(ge({},O),b[F]));return O})(l,t)),Jv(l));h[nd]&&l.setAttribute(nd,h[nd]),h[td]&&(n=gr(h[td],a),h[td]="".concat(n));const p={};for(const y in h){const b=dw(y),O=Ew(b,h[y],s,n);p[b]=O}p&&p.font&&Qv(p.font,p);const v=ge(ge({},s),p);return V0.test(l.nodeName)?v:(function(y){const b=Zn.getDefaults();return Object.entries(Ow).forEach((O=>{let[F,E]=O;if(y[E]===void 0||y[F]==="")return;if(y[F]===void 0){if(!b[F])return;y[F]=b[F]}if(y[F].indexOf("url(")===0)return;const Z=new $t(y[F]);y[F]=Z.setAlpha(on(Z.getAlpha()*y[E],2)).toRgba()})),y})(v)}const Pw=["left","top","width","height","visible"],$v=["rx","ry"];class _r extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),_r.ownDefaults)}constructor(e){super(),Object.assign(this,_r.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,a=-n/2,h=this.rx?Math.min(this.rx,t/2):0,p=this.ry?Math.min(this.ry,n/2):0,v=h!==0||p!==0;e.beginPath(),e.moveTo(s+h,a),e.lineTo(s+t-h,a),v&&e.bezierCurveTo(s+t-Qs*h,a,s+t,a+Qs*p,s+t,a+p),e.lineTo(s+t,a+n-p),v&&e.bezierCurveTo(s+t,a+n-Qs*p,s+t-Qs*h,a+n,s+t-h,a+n),e.lineTo(s+h,a+n),v&&e.bezierCurveTo(s+Qs*h,a+n,s,a+n-Qs*p,s,a+n-p),e.lineTo(s,a+p),v&&e.bezierCurveTo(s,a+Qs*p,s+Qs*h,a,s+h,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...$v,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=ss(e,this.ATTRIBUTE_NAMES,n),{left:a=0,top:h=0,width:p=0,height:v=0,visible:y=!0}=s,b=dn(s,Pw);return new this(ge(ge(ge({},t),b),{},{left:a,top:h,width:p,height:v,visible:!!(y&&p&&v)}))}}de(_r,"type","Rect"),de(_r,"cacheProperties",[...Cs,...$v]),de(_r,"ownDefaults",{rx:0,ry:0}),de(_r,"ATTRIBUTE_NAMES",[...aa,"x","y","rx","ry","width","height"]),ct.setClass(_r),ct.setSVGClass(_r);const vs="initialization",Yc="added",dp="removed",Gc="imperative",e_=(l,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:a,group:h}=e,p=h&&h!==l?ou(h.calcTransformMatrix(),l.calcTransformMatrix()):null,v=p?e.getRelativeCenterPoint().transform(p):e.getRelativeCenterPoint(),y=!e.isStrokeAccountedForInDimensions(),b=t&&y?mv(new Se(n,n),void 0,l.calcTransformMatrix()):Gd,O=!t&&y?n:0,F=sh(s+O,a+O,rh([p,e.calcOwnMatrix()],!0)).add(b).scalarDivide(2);return[v.subtract(F),v.add(F)]};class lu{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===vs||t===Gc||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==vs&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===Gc&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:h,width:p,height:v}=ns(e.map((O=>e_(s,O))).reduce(((O,F)=>O.concat(F)),[])),y=new Se(p,v),b=new Se(a,h).add(y.scalarDivide(2));if(n===vs){const O=this.getInitialSize(t,{size:y,center:b});return{center:b,relativeCorrection:new Se(0,0),size:O}}return{center:b.transform(s.calcOwnMatrix()),size:y}}}de(lu,"type","strategy");class qc extends lu{shouldPerformLayout(e){return!0}}de(qc,"type","fit-content"),ct.setClass(qc);const Aw=["strategy"],Mw=["target","strategy","bubbles","prevStrategy"],t_="layoutManager";class Do{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new qc;de(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=ge(ge({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Nc,Jm,ql,$m,th,ev,Fc,tv,Mx].map((s=>e.on(s,(a=>this.performLayout(s===Nc?{type:"object_modified",trigger:s,e:a,target:n}:{type:"object_modifying",trigger:s,e:a,target:n})))))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach((n=>n())),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach((t=>this.unsubscribe(t,e)))}subscribeTargets(e){e.targets.forEach((t=>this.subscribe(t,e)))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===vs||n===Yc?this.subscribeTargets(e):n===dp&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===Gc&&e.deep){const a=dn(e,Aw);t.forEachObject((h=>h.layoutManager&&h.layoutManager.performLayout(ge(ge({},a),{},{bubbles:!1,target:h}))))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,a=n.calcLayoutResult(e,t.getObjects());if(!a)return;const h=s===vs?new Se:t.getRelativeCenterPoint(),{center:p,correction:v=new Se,relativeCorrection:y=new Se}=a,b=h.subtract(p).add(v).transform(s===vs?cr:jr(t.calcOwnMatrix()),!0).add(y);return{result:a,prevCenter:h,nextCenter:p,offset:b}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:a}=t;var h,p;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===vs?n.set({left:(h=e.x)!==null&&h!==void 0?h:a.x+s.x*Dn(n.originX),top:(p=e.y)!==null&&p!==void 0?p:a.y+s.y*Dn(n.originY)}):(n.setPositionByOrigin(a,Rt,Rt),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject((s=>{s.group===n&&this.layoutObject(e,t,s)})),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:a,prevStrategy:h}=e,p=dn(e,Mw),{canvas:v}=n;n.fire("layout:after",{context:e,result:t}),v&&v.fire("object:layout:after",{context:e,result:t,target:n});const y=n.parent;a&&y!=null&&y.layoutManager&&((p.path||(p.path=[])).push(n),y.layoutManager.performLayout(ge(ge({},p),{},{target:y}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach((t=>t.forEach((n=>n())))),e.clear()}toObject(){return{type:t_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ct.setClass(Do,t_);const Iw=["type","objects","layoutManager"];class jw extends Do{performLayout(){}}class ur extends qd(Zn){static getDefaults(){return ge(ge({},super.getDefaults()),ur.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),de(this,"_activeObjects",[]),de(this,"__objectSelectionTracker",void 0),de(this,"__objectSelectionDisposer",void 0),Object.assign(this,ur.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((s=>{this.enterGroup(s,!1)})),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Do,this.layoutManager.performLayout({type:vs,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(ws("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(ws("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter(((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n))}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...s);return this._onAfterObjectsChange(Yc,s),a}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=this._filterObjectsBeforeEnteringGroup(n),h=super.insertAt(e,...a);return this._onAfterObjectsChange(Yc,a),h}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(dp,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach((s=>{s._set(e,t)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const a=s.indexOf(n);a>-1&&(s.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&jo(e,wn(jr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(jo(e,wn(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Zn.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var s;const h=this._objects[a];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&h.group!==this?(e.save(),e.transform(...jr(this.calcTransformMatrix())),h.render(e),e.restore()):h.group===this&&h.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((e=>e.setCoords()))}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(ge({target:this,type:Gc},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter((function(s){return!s.excludeFromExport})).map((function(s){const a=s.includeDefaultValues;s.includeDefaultValues=n;const h=s[e||"toObject"](t);return s.includeDefaultValues=a,h}))}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return ge(ge(ge({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((e=>{this._watchObject(!1,e),e.dispose()})),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=_r.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:a}=e,h=dn(e,Iw);return Promise.all([Mo(s,t),au(h,t)]).then((p=>{let[v,y]=p;const b=new this(v,ge(ge(ge({},h),y),{},{layoutManager:new jw}));if(a){const O=ct.getClass(a.type),F=ct.getClass(a.strategy);b.layoutManager=new O(new F)}else b.layoutManager=new Do;return b.layoutManager.subscribeTargets({type:vs,target:b,targets:b.getObjects()}),b.setCoords(),b}))}}de(ur,"type","Group"),de(ur,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ct.setClass(ur);const n_=(l,e)=>Math.min(e.width/l.width,e.height/l.height),r_=(l,e)=>Math.max(e.width/l.width,e.height/l.height),Sd="\\s*,?\\s*",yl="".concat(Sd,"(").concat(Ei,")"),Lw="".concat(yl).concat(yl).concat(yl).concat(Sd,"([01])").concat(Sd,"([01])").concat(yl).concat(yl),Dw={m:"l",M:"L"},Rw=(l,e,t,n,s,a,h,p,v,y,b)=>{const O=Ii(l),F=ji(l),E=Ii(e),Z=ji(e),N=t*s*E-n*a*Z+h,$=n*s*E+t*a*Z+p;return["C",y+v*(-t*s*F-n*a*O),b+v*(-n*s*F+t*a*O),N+v*(t*s*Z+n*a*E),$+v*(n*s*Z-t*a*E),N,$]},nm=(l,e,t,n)=>{const s=Math.atan2(e,l),a=Math.atan2(n,t);return a>=s?a-s:2*Math.PI-(s-a)};function Cd(l,e,t,n,s,a,h,p){let v;if(Gt.cachesBoundsOfCurve&&(v=[...arguments].join(),Oo.boundsOfCurveCache[v]))return Oo.boundsOfCurveCache[v];const y=Math.sqrt,b=Math.abs,O=[],F=[[0,0],[0,0]];let E=6*l-12*t+6*s,Z=-3*l+9*t-9*s+3*h,N=3*t-3*l;for(let xe=0;xe<2;++xe){if(xe>0&&(E=6*e-12*n+6*a,Z=-3*e+9*n-9*a+3*p,N=3*n-3*e),b(Z)<1e-12){if(b(E)<1e-12)continue;const Je=-N/E;0<Je&&Je<1&&O.push(Je);continue}const Ce=E*E-4*N*Z;if(Ce<0)continue;const z=y(Ce),Ve=(-E+z)/(2*Z);0<Ve&&Ve<1&&O.push(Ve);const He=(-E-z)/(2*Z);0<He&&He<1&&O.push(He)}let $=O.length;const ee=$,ae=s_(l,e,t,n,s,a,h,p);for(;$--;){const{x:xe,y:Ce}=ae(O[$]);F[0][$]=xe,F[1][$]=Ce}F[0][ee]=l,F[1][ee]=e,F[0][ee+1]=h,F[1][ee+1]=p;const ue=[new Se(Math.min(...F[0]),Math.min(...F[1])),new Se(Math.max(...F[0]),Math.max(...F[1]))];return Gt.cachesBoundsOfCurve&&(Oo.boundsOfCurveCache[v]=ue),ue}const Fw=(l,e,t)=>{let[n,s,a,h,p,v,y,b]=t;const O=((F,E,Z,N,$,ee,ae)=>{if(Z===0||N===0)return[];let ue=0,xe=0,Ce=0;const z=Math.PI,Ve=ae*Ud,He=ji(Ve),Je=Ii(Ve),ut=.5*(-Je*F-He*E),Ie=.5*(-Je*E+He*F),Ke=Z**2,dt=N**2,ze=Ie**2,Bt=ut**2,Le=Ke*dt-Ke*ze-dt*Bt;let wt=Math.abs(Z),Be=Math.abs(N);if(Le<0){const At=Math.sqrt(1-Le/(Ke*dt));wt*=At,Be*=At}else Ce=($===ee?-1:1)*Math.sqrt(Le/(Ke*ze+dt*Bt));const Xe=Ce*wt*Ie/Be,Ze=-Ce*Be*ut/wt,we=Je*Xe-He*Ze+.5*F,Fe=He*Xe+Je*Ze+.5*E;let _t=nm(1,0,(ut-Xe)/wt,(Ie-Ze)/Be),Ct=nm((ut-Xe)/wt,(Ie-Ze)/Be,(-ut-Xe)/wt,(-Ie-Ze)/Be);ee===0&&Ct>0?Ct-=2*z:ee===1&&Ct<0&&(Ct+=2*z);const pt=Math.ceil(Math.abs(Ct/z*2)),Mt=[],zt=Ct/pt,Ut=8/3*Math.sin(zt/4)*Math.sin(zt/4)/Math.sin(zt/2);let yt=_t+zt;for(let At=0;At<pt;At++)Mt[At]=Rw(_t,yt,Je,He,wt,Be,we,Fe,Ut,ue,xe),ue=Mt[At][5],xe=Mt[At][6],_t=yt,yt+=zt;return Mt})(y-l,b-e,s,a,p,v,h);for(let F=0,E=O.length;F<E;F++)O[F][1]+=l,O[F][2]+=e,O[F][3]+=l,O[F][4]+=e,O[F][5]+=l,O[F][6]+=e;return O},i_=l=>{let e=0,t=0,n=0,s=0;const a=[];let h,p=0,v=0;for(const y of l){const b=[...y];let O;switch(b[0]){case"l":b[1]+=e,b[2]+=t;case"L":e=b[1],t=b[2],O=["L",e,t];break;case"h":b[1]+=e;case"H":e=b[1],O=["L",e,t];break;case"v":b[1]+=t;case"V":t=b[1],O=["L",e,t];break;case"m":b[1]+=e,b[2]+=t;case"M":e=b[1],t=b[2],n=b[1],s=b[2],O=["M",e,t];break;case"c":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t,b[5]+=e,b[6]+=t;case"C":p=b[3],v=b[4],e=b[5],t=b[6],O=["C",b[1],b[2],p,v,e,t];break;case"s":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t;case"S":h==="C"?(p=2*e-p,v=2*t-v):(p=e,v=t),e=b[3],t=b[4],O=["C",p,v,b[1],b[2],e,t],p=O[3],v=O[4];break;case"q":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t;case"Q":p=b[1],v=b[2],e=b[3],t=b[4],O=["Q",p,v,e,t];break;case"t":b[1]+=e,b[2]+=t;case"T":h==="Q"?(p=2*e-p,v=2*t-v):(p=e,v=t),e=b[1],t=b[2],O=["Q",p,v,e,t];break;case"a":b[6]+=e,b[7]+=t;case"A":Fw(e,t,b).forEach((F=>a.push(F))),e=b[6],t=b[7];break;case"z":case"Z":e=n,t=s,O=["Z"]}O?(a.push(O),h=O[0]):h=""}return a},Kc=(l,e,t,n)=>Math.sqrt((t-l)**2+(n-e)**2),s_=(l,e,t,n,s,a,h,p)=>v=>{const y=v**3,b=(E=>3*E**2*(1-E))(v),O=(E=>3*E*(1-E)**2)(v),F=(E=>(1-E)**3)(v);return new Se(h*y+s*b+t*O+l*F,p*y+a*b+n*O+e*F)},a_=l=>l**2,o_=l=>2*l*(1-l),l_=l=>(1-l)**2,Nw=(l,e,t,n,s,a,h,p)=>v=>{const y=a_(v),b=o_(v),O=l_(v),F=3*(O*(t-l)+b*(s-t)+y*(h-s)),E=3*(O*(n-e)+b*(a-n)+y*(p-a));return Math.atan2(E,F)},Bw=(l,e,t,n,s,a)=>h=>{const p=a_(h),v=o_(h),y=l_(h);return new Se(s*p+t*v+l*y,a*p+n*v+e*y)},zw=(l,e,t,n,s,a)=>h=>{const p=1-h,v=2*(p*(t-l)+h*(s-t)),y=2*(p*(n-e)+h*(a-n));return Math.atan2(y,v)},rm=(l,e,t)=>{let n=new Se(e,t),s=0;for(let a=1;a<=100;a+=1){const h=l(a/100);s+=Kc(n.x,n.y,h.x,h.y),n=h}return s},Vw=(l,e)=>{let t,n=0,s=0,a={x:l.x,y:l.y},h=ge({},a),p=.01,v=0;const y=l.iterator,b=l.angleFinder;for(;s<e&&p>1e-4;)h=y(n),v=n,t=Kc(a.x,a.y,h.x,h.y),t+s>e?(n-=p,p/=2):(a=h,n+=p,s+=t);return ge(ge({},h),{},{angle:b(v)})},pp=l=>{let e,t,n=0,s=0,a=0,h=0,p=0;const v=[];for(const y of l){const b={x:s,y:a,command:y[0],length:0};switch(y[0]){case"M":t=b,t.x=h=s=y[1],t.y=p=a=y[2];break;case"L":t=b,t.length=Kc(s,a,y[1],y[2]),s=y[1],a=y[2];break;case"C":e=s_(s,a,y[1],y[2],y[3],y[4],y[5],y[6]),t=b,t.iterator=e,t.angleFinder=Nw(s,a,y[1],y[2],y[3],y[4],y[5],y[6]),t.length=rm(e,s,a),s=y[5],a=y[6];break;case"Q":e=Bw(s,a,y[1],y[2],y[3],y[4]),t=b,t.iterator=e,t.angleFinder=zw(s,a,y[1],y[2],y[3],y[4]),t.length=rm(e,s,a),s=y[3],a=y[4];break;case"Z":t=b,t.destX=h,t.destY=p,t.length=Kc(s,a,h,p),s=h,a=p}n+=t.length,v.push(t)}return v.push({length:n,x:s,y:a}),v},u_=function(l,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pp(l),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],a=e/s.length,h=l[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return ge(ge({},new Se(s.x,s.y).lerp(new Se(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return ge(ge({},new Se(s.x,s.y).lerp(new Se(h[1],h[2]),a)),{},{angle:Math.atan2(h[2]-s.y,h[1]-s.x)});case"C":case"Q":return Vw(s,e)}},Ww=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),im=new RegExp(Lw,"g"),Uw=new RegExp(Ei,"gi"),Hw={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c_=l=>{var e;const t=[],n=(e=l.match(Ww))!==null&&e!==void 0?e:[];for(const s of n){const a=s[0];if(a==="z"||a==="Z"){t.push([a]);continue}const h=Hw[a.toLowerCase()];let p=[];if(a==="a"||a==="A"){im.lastIndex=0;for(let v=null;v=im.exec(s);)p.push(...v.slice(1))}else p=s.match(Uw)||[];for(let v=0;v<p.length;v+=h){const y=new Array(h),b=Dw[a];y[0]=v>0&&b?b:a;for(let O=0;O<h;O++)y[O+1]=parseFloat(p[v+O]);t.push(y)}}return t},h_=function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new Se(l[0]),n=new Se(l[1]),s=1,a=0;const h=[],p=l.length,v=p>2;let y;for(v&&(s=l[2].x<n.x?-1:l[2].x===n.x?0:1,a=l[2].y<n.y?-1:l[2].y===n.y?0:1),h.push(["M",t.x-s*e,t.y-a*e]),y=1;y<p;y++){if(!t.eq(n)){const b=t.midPointFrom(n);h.push(["Q",t.x,t.y,b.x,b.y])}t=l[y],y+1<l.length&&(n=l[y+1])}return v&&(s=t.x>l[y-2].x?1:t.x===l[y-2].x?0:-1,a=t.y>l[y-2].y?1:t.y===l[y-2].y?0:-1),h.push(["L",t.x+s*e,t.y+a*e]),h},gp=(l,e)=>l.map((t=>t.map(((n,s)=>s===0||e===void 0?n:on(n,e))).join(" "))).join(" ");function Zc(l,e){const t=l.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach((n=>{let[s,a]=n;return t.setProperty(s,a)})))}const Da=(l,e)=>Math.floor(Math.random()*(e-l+1))+l;function f_(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e.onComplete||Fa,n=new(Ti()).XMLHttpRequest,s=e.signal,a=function(){n.abort()},h=function(){s&&s.removeEventListener("abort",a),n.onerror=n.ontimeout=Fa};if(s&&s.aborted)throw new Wd("request");return s&&s.addEventListener("abort",a,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(h(),t(n),n.onreadystatechange=Fa)},n.onerror=n.ontimeout=h,n.open("get",l,!0),n.send(),n}const Ac=(l,e)=>{let t=l._findCenterFromElement();l.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:s,scaleY:a,angle:h,skewX:p}=Na(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(br,s),n.set(Gr,a),n.angle=h,n.skewX=p,n.skewY=0}})(l),t=t.transform(l.transformMatrix)),delete l.transformMatrix,e&&(l.scaleX*=e.scaleX,l.scaleY*=e.scaleY,l.cropX=e.cropX,l.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,l.width=e.width,l.height=e.height),l.setPositionByOrigin(t,Rt,Rt)};var kd=Object.freeze({__proto__:null,addTransformToObject:pv,animate:lp,animateColor:Pv,applyTransformToObject:jo,calcAngleBetweenVectors:Xc,calcDimensionsMatrix:su,calcPlaneChangeMatrix:ou,calcVectorRotation:Tv,cancelAnimFrame:iv,capValue:za,composeMatrix:uv,copyCanvasElement:l=>{var e;const t=Dr(l);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(l,0,0),t},cos:Ii,createCanvasElement:ui,createImage:sv,createRotateMatrix:Ha,createScaleMatrix:ih,createSkewXMatrix:Qd,createSkewYMatrix:Jd,createTranslateMatrix:Vo,createVector:Uc,crossProduct:Po,degreesToRadians:En,dotProduct:Ev,ease:Gx,enlivenObjectEnlivables:au,enlivenObjects:Mo,findScaleToCover:r_,findScaleToFit:n_,getBoundsOfCurve:Cd,getOrthonormalVector:ap,getPathSegmentsInfo:pp,getPointOnPath:u_,getPointer:dv,getRandomInt:Da,getRegularPolygonPath:(l,e)=>{const t=2*Math.PI/l;let n=-na;l%2==0&&(n+=t/2);const s=new Array(l+1);for(let a=0;a<l;a++){const h=a*t+n,{x:p,y:v}=new Se(Ii(h),ji(h)).scalarMultiply(e);s[a]=[a===0?"M":"L",p,v]}return s[l]=["Z"],s},getSmoothPathFromPoints:h_,getSvgAttributes:l=>{const e=["instantiated_by_use","style","id","class"];switch(l){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:lh,groupSVGElements:(l,e)=>l&&l.length===1?l[0]:new ur(l,e),hasStyleChanged:hh,invertTransform:jr,isBetweenVectors:vd,isIdentityMatrix:av,isTouchEvent:Bc,isTransparent:Xv,joinPath:gp,loadImage:Wl,magnitude:Hc,makeBoundingBoxFromPoints:ns,makePathSimpler:i_,matrixToSVG:Io,mergeClipPaths:(l,e)=>{var t;let n=l,s=e;n.inverted&&!s.inverted&&(n=e,s=l),gd(s,(t=s.group)===null||t===void 0?void 0:t.calcTransformMatrix(),n.calcTransformMatrix());const a=n.inverted&&s.inverted;return a&&(n.inverted=s.inverted=!1),new ur([n],{clipPath:s,inverted:a})},multiplyTransformMatrices:wn,multiplyTransformMatrixArray:rh,parsePath:c_,parsePreserveAspectRatioAttribute:ip,parseUnit:gr,pick:Xa,projectStrokeOnPoints:Gv,qrDecompose:Na,radiansToDegrees:rs,removeFromArray:Ia,removeTransformFromObject:(l,e)=>{const t=jr(e),n=wn(t,l.calcOwnMatrix());jo(l,n)},removeTransformMatrixForSvgParsing:Ac,request:f_,requestAnimFrame:Vl,resetObjectTransform:gv,rotatePoint:(l,e,t)=>l.rotate(t,e),rotateVector:sp,saveObjectTransform:tp,sendObjectToPlane:gd,sendPointToPlane:ys,sendVectorToPlane:mv,setStyle:Zc,sin:ji,sizeAfterTransform:sh,string:hw,stylesFromArray:Zv,stylesToArray:Kv,toBlob:Zd,toDataURL:Kd,toFixed:on,transformPath:(l,e,t)=>(t&&(e=wn(e,[1,0,0,1,-t.x,-t.y])),l.map((n=>{const s=[...n];for(let a=1;a<n.length-1;a+=2){const{x:h,y:p}=lr({x:n[a],y:n[a+1]},e);s[a]=h,s[a+1]=p}return s}))),transformPoint:lr});class d_ extends ep{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),de(this,"upper",void 0),de(this,"container",void 0);const{el:s}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const h=this.createContainerElement();h.classList.add(n),s.parentNode&&s.parentNode.replaceChild(h,s),h.append(s,a),this.container=h}createUpperCanvas(){const{el:e}=this.lower,t=ui();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Ua().createElement("div");return e.setAttribute("data-fabric","wrapper"),Zc(e,{position:"relative"}),M0(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:s}=t;Zc(e,ge(ge({},n),{},{"touch-action":s?"manipulation":yr})),M0(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;fv(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),pd(this.upper.el,e),pd(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Mi().dispose(this.upper.el),delete this.upper,delete this.container}}class fh extends Wo{constructor(){super(...arguments),de(this,"targets",[]),de(this,"_hoveredTargets",[]),de(this,"_currentTransform",null),de(this,"_groupSelector",null),de(this,"contextTopDirty",!1)}static getDefaults(){return ge(ge({},super.getDefaults()),fh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new d_(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter((t=>!t.group&&t!==e)).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+s,-n+s),a.transform(...this.viewportTransform);const h=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=h,a.restore();const p=Math.round(s*this.getRetinaScaling());return Xv(a,p,p,p)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find((n=>!!n&&e[n]===!0)):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===nh||t===br||t===Gr||t===ql?s=this.centeredScaling||e.centeredScaling:t===Yd&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=Mn:["mr","tr","br"].includes(t)&&(n.x=nn),["tl","mt","tr"].includes(t)?n.y=dd:["bl","mb","br"].includes(t)&&(n.y=Lr)),n}_setupCurrentTransform(e,t,n){var s;const a=t.group?ys(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:h="",control:p}=t.getActiveControl()||{},v=n&&p?(s=p.getActionHandler(e,t,p))===null||s===void 0?void 0:s.bind(p):yv,y=((E,Z,N,$)=>{if(!Z||!E)return"drag";const ee=$.controls[Z];return ee.getActionName(N,ee,$)})(n,h,e,t),b=e[this.centeredKey],O=this._shouldCenterTransform(t,y,b)?{x:Rt,y:Rt}:this._getOriginFromCorner(t,h),F={target:t,action:y,actionHandler:v,actionPerformed:!1,corner:h,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:O.x,originY:O.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:En(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:b,original:ge(ge({},tp(t)),{},{originX:O.x,originY:O.y})};this._currentTransform=F,this.fire("before:transform",{e,transform:F})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:a}=this._groupSelector,h=new Se(t,n).transform(this.viewportTransform),p=new Se(t+s,n+a).transform(this.viewportTransform),v=this.selectionLineWidth/2;let y=Math.min(h.x,p.x),b=Math.min(h.y,p.y),O=Math.max(h.x,p.x),F=Math.max(h.y,p.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(y,b,O-y,F-b)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,y+=v,b+=v,O-=v,F-=v,Zn.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(y,b,O-y,F-b))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,Bc(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const h=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&h&&h!==n?(this.targets=a,n):h}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),a=e.padding/s;if(a){const[h,p,v,y]=n,b=Math.atan2(p.y-h.y,p.x-h.x),O=Ii(b)*a,F=ji(b)*a,E=O+F,Z=O-F;n=[new Se(h.x-Z,h.y-E),new Se(p.x+E,p.y-Z),new Se(v.x+Z,v.y+E),new Se(y.x-E,y.y+Z)]}return mn.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,ys(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(Oc(s)&&s.subTargetCheck){const a=this._searchPossibleTargets(s._objects,t);a&&this.targets.push(a)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Oc(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let a=s.length-1;a>0;a--){const h=s[a];if(!Oc(h)||!h.interactive)return h}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let a=dv(e),h=s.width||0,p=s.height||0;h&&p||(Lr in s&&dd in s&&(p=Math.abs(s.top-s.bottom)),Mn in s&&nn in s&&(h=Math.abs(s.right-s.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=ys(a,void 0,this.viewportTransform));const v=this.getRetinaScaling();v!==1&&(a.x/=v,a.y/=v);const y=h===0||p===0?new Se(1,1):new Se(n.width/h,n.height/p);return a.multiply(y)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=ui(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return ja(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const a=this.getActiveObjects(),h=[],p=[];e.forEach((v=>{a.includes(v)||(n=!0,v.fire("deselected",{e:t,target:v}),p.push(v))})),a.forEach((v=>{e.includes(v)||(n=!0,v.fire("selected",{e:t,target:v}),h.push(v))})),e.length>0&&a.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:h,deselected:p})):a.length>0?(s=!0,this.fire("selection:created",{e:t,selected:h})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:p})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,ja(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),ja(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(Nc,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;ja(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,n);return e.set(s),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&ja(t)&&this._activeObject===t){const n=Xa(e,["angle","flipX","flipY",nn,br,Gr,Bo,zo,Lr]);return pv(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}de(fh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Xw{constructor(e){de(this,"targets",[]),de(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach((e=>{e.isEditing&&e.exitEditing()}))}add(e){this.targets.push(e)}remove(e){this.unregister(e),Ia(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Yw=["target","oldTarget","fireCanvas","e"],Yr={passive:!1},bo=(l,e)=>{const t=l.getViewportPoint(e),n=l.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},Js=function(l){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return l.addEventListener(...t)},si=function(l){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return l.removeEventListener(...t)},Gw={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Jl extends fh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),de(this,"_isClick",void 0),de(this,"textEditingManager",new Xw(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((t=>{this[t]=this[t].bind(this)})),this.addOrRemove(Js,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(hv(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Yr),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel,{passive:!1}),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Yr)}removeListeners(){this.addOrRemove(si,"remove");const e=this._getEventPrefix(),t=ki(this.upperCanvasEl);si(t,"".concat(e,"up"),this._onMouseUp),si(t,"touchend",this._onTouchEnd,Yr),si(t,"".concat(e,"move"),this._onMouseMove,Yr),si(t,"touchmove",this._onMouseMove,Yr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=ge({e},bo(this,e));this.fire("mouse:out",ge(ge({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",ge({},n)),this._hoveredTargets.forEach((s=>{this.fire("mouse:out",ge(ge({},n),{},{target:s})),s&&s.fire("mouseout",ge({},n))})),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",ge({e},bo(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void Js(this.upperCanvasEl,"drag",this._onDragProgress)}I0(e)}_renderDragEffects(e,t,n){let s=!1;const a=this._dropTarget;a&&a!==t&&a!==n&&(a.clearContextTop(),s=!0),t?.clearContextTop(),n!==t&&n?.clearContextTop();const h=this.contextTop;h.save(),h.transform(...this.viewportTransform),t&&(h.save(),t.transform(h),t.renderDragSourceEffect(e),h.restore(),s=!0),n&&(h.save(),n.transform(h),n.renderDropTargetEffect(e),h.restore(),s=!0),h.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==yr,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};si(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),a=this._dragSource,h={e,target:n,subTargets:s,dragSource:a,canDrop:!1,dropTarget:void 0};let p;this.fire(t,h),this._fireEnterLeaveEvents(n,h),n&&(n.canDrop(e)&&(p=n),n.fire(t,h));for(let v=0;v<s.length;v++){const y=s[v];y.canDrop(e)&&(p=y),y.fire(t,h)}this._renderDragEffects(e,a,p),this._dropTarget=p}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",ge({e,target:t,subTargets:n,dragSource:this._dragSource},bo(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&I0(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,a=this._getEventPrefix(),h=ki(s);Js(h,"touchend",this._onTouchEnd,Yr),t&&Js(h,"touchmove",this._onMouseMove,Yr),si(s,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();si(t,"".concat(n,"move"),this._onMouseMove,Yr);const s=ki(t);Js(s,"".concat(n,"up"),this._onMouseUp),Js(s,"".concat(n,"move"),this._onMouseMove,Yr)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=ki(this.upperCanvasEl);si(n,"touchend",this._onTouchEnd,Yr),si(n,"touchmove",this._onMouseMove,Yr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{Js(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=ki(this.upperCanvasEl);si(s,"".concat(n,"up"),this._onMouseUp),si(s,"".concat(n,"move"),this._onMouseMove,Yr),Js(t,"".concat(n,"move"),this._onMouseMove,Yr)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,a=this._target,{button:h}=e;if(h)return(this.fireMiddleClick&&h===1||this.fireRightClick&&h===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let p,v,y=!1;if(n&&(this._finalizeCurrentTransform(e),y=n.actionPerformed),!s){const b=a===this._activeObject;this.handleSelection(e),y||(y=this._shouldRender(a)||!b&&a===this._activeObject)}if(a){const b=a.findControl(this.getViewportPoint(e),Bc(e)),{key:O,control:F}=b||{};if(v=O,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),y=!0;else if(F){const E=F.getMouseUpHandler(e,a,F);E&&(p=this.getScenePoint(e),E.call(F,e,n,p.x,p.y))}a.isMoving=!1}if(n&&(n.target!==a||n.corner!==v)){const b=n.target&&n.target.controls[n.corner],O=b&&b.getMouseUpHandler(e,n.target,b);p=p||this.getScenePoint(e),O&&O.call(b,e,n,p.x,p.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),y?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let a=0;a<s.length;a++)s[a]!==n&&s[a].fire(e,t);return t}_handleEvent(e,t,n){const s=this._target,a=this.targets||[],h=ge(ge(ge({e,target:s,subTargets:a},bo(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?n:{});this.fire("mouse:".concat(t),h),s&&s.fire("mouse".concat(t),h);for(let p=0;p<a.length;p++)a[p]!==s&&a[p].fire("mouse".concat(t),h)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,n=!!t&&t===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),h=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,h=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const p=this.getScenePoint(e);this._groupSelector={x:p.x,y:p.y,deltaY:0,deltaX:0}}if(n=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const p=t.findControl(this.getViewportPoint(e),Bc(e));if(t===this._activeObject&&(p||!h)){this._setupCurrentTransform(e,t,n);const v=p?p.control:void 0,y=this.getScenePoint(e),b=v&&v.getMouseDownHandler(e,t,v);b&&b.call(v,e,this._currentTransform,y.x,y.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=ys(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,a=this.targets,h=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let p=0;p<h;p++)a[p]===t||s[p]&&s[p]===n||this.fireSyntheticInOutEvents("mouse",{e,target:a[p],oldTarget:s[p]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,a=this.targets,h=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("drag",ge(ge({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let p=0;p<h;p++)this.fireSyntheticInOutEvents("drag",ge(ge({},t),{},{target:a[p],oldTarget:s[p]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:a,e:h}=t,p=dn(t,Yw);const{targetIn:v,targetOut:y,canvasIn:b,canvasOut:O}=Gw[e],F=s!==n;if(s&&F){const E=ge(ge({},p),{},{e:h,target:s,nextTarget:n},bo(this,h));a&&this.fire(O,E),s.fire(y,E)}if(n&&F){const E=ge(ge({},p),{},{e:h,target:n,previousTarget:s},bo(this,h));a&&this.fire(b,E),n.fire(v,E)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,a=s.group?ys(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,a),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:a,target:h}=t,p=!!a&&a(e,t,n.x,n.y);p&&h.setCoords(),s==="drag"&&p&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||p}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=ja(this._activeObject)?this._activeObject:null,a=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(a){const h=a.control;this.setCursor(h.cursorStyleHandler(e,h,t))}else t.subTargetCheck&&this.targets.concat().reverse().map((h=>{n=h.hoverCursor||n})),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=ja(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const a=n.getObjects();if(t===n){const h=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,h)||this.searchPossibleTargets(this._objects,h))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{n.isEditing&&n.exitEditing();const a=new(ct.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(n,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:a}=this._groupSelector,h=new Se(t,n),p=h.add(new Se(s,a)),v=h.min(p),y=h.max(p).subtract(v),b=this.collectObjects({left:v.x,top:v.y,width:y.x,height:y.y},{includeIntersecting:!this.selectionFullyContained}),O=h.eq(p)?b[0]?[b[0]]:[]:b.length>1?b.filter((F=>!F.onSelect({e}))).reverse():b;if(O.length===1)this.setActiveObject(O[0],e);else if(O.length>1){const F=ct.getClass("ActiveSelection");this.setActiveObject(new F(O,{canvas:this}),e)}return this._groupSelector=null,!0}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{upper:n}=this.elements;n.ctx=void 0;const s=super.toCanvasElement(e,t);return n.ctx=n.el.getContext("2d"),s}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const p_={x1:0,y1:0,x2:0,y2:0},qw=ge(ge({},p_),{},{r1:0,r2:0}),Eo=(l,e)=>isNaN(l)&&typeof e=="number"?e:l;function g_(l){return l&&/%$/.test(l)&&Number.isFinite(parseFloat(l))}function m_(l,e){const t=typeof l=="number"?l:typeof l=="string"?parseFloat(l)/(g_(l)?100:1):NaN;return za(0,Eo(t,e),1)}const Kw=/\s*;\s*/,Zw=/\s*:\s*/;function Qw(l,e){let t,n;const s=l.getAttribute("style");if(s){const h=s.split(Kw);h[h.length-1]===""&&h.pop();for(let p=h.length;p--;){const[v,y]=h[p].split(Zw).map((b=>b.trim()));v==="stop-color"?t=y:v==="stop-opacity"&&(n=y)}}const a=new $t(t||l.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:m_(l.getAttribute("offset"),0),color:a.toRgb(),opacity:Eo(parseFloat(n||l.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function Jw(l,e){const t=[],n=l.getElementsByTagName("stop"),s=m_(e,1);for(let a=n.length;a--;)t.push(Qw(n[a],s));return t}function v_(l){return l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?"linear":"radial"}function __(l){return l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Si(l,e){return l.getAttribute(e)}function $w(l,e){return(function(t,n){let s,{width:a,height:h,gradientUnits:p}=n;return Object.entries(t).reduce(((v,y)=>{let[b,O]=y;if(O==="Infinity")s=1;else if(O==="-Infinity")s=0;else{const F=typeof O=="string";s=F?parseFloat(O):O,F&&g_(O)&&(s*=.01,p==="pixels"&&(b!=="x1"&&b!=="x2"&&b!=="r2"||(s*=a),b!=="y1"&&b!=="y2"||(s*=h)))}return v[b]=s,v}),{})})(v_(l)==="linear"?(function(t){return{x1:Si(t,"x1")||0,y1:Si(t,"y1")||0,x2:Si(t,"x2")||"100%",y2:Si(t,"y2")||0}})(l):(function(t){return{x1:Si(t,"fx")||Si(t,"cx")||"50%",y1:Si(t,"fy")||Si(t,"cy")||"50%",r1:0,x2:Si(t,"cx")||"50%",y2:Si(t,"cy")||"50%",r2:Si(t,"r")||"50%"}})(l),ge(ge({},e),{},{gradientUnits:__(l)}))}class Oi{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:a=[],offsetX:h=0,offsetY:p=0,gradientTransform:v,id:y}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:ge(ge({},t==="radial"?qw:p_),s),colorStops:a,offsetX:h,offsetY:p,gradientTransform:v,id:y?"".concat(y,"_").concat(ra()):ra()})}addColorStop(e){for(const t in e){const n=new $t(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return ge(ge({},Xa(this,e)),{},{type:this.type,coords:ge({},this.coords),colorStops:this.colorStops.map((t=>ge({},t))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():cr.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",h=this.colorStops.map((O=>ge({},O))).sort(((O,F)=>O.offset-F.offset));let p=-this.offsetX,v=-this.offsetY;var y;a==="objectBoundingBox"?(p/=e.width,v/=e.height):(p+=e.width/2,v+=e.height/2),(y=e)&&typeof y._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(p-=e.pathOffset.x,v-=e.pathOffset.y),s[4]-=p,s[5]-=v;const b=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Io(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:O,y1:F,x2:E,y2:Z}=this.coords;n.push("<linearGradient ",b,' x1="',O,'" y1="',F,'" x2="',E,'" y2="',Z,`">
`)}else if(this.type==="radial"){const{x1:O,y1:F,x2:E,y2:Z,r1:N,r2:$}=this.coords,ee=N>$;n.push("<radialGradient ",b,' cx="',ee?O:E,'" cy="',ee?F:Z,'" r="',ee?N:$,'" fx="',ee?E:O,'" fy="',ee?Z:F,`">
`),ee&&(h.reverse(),h.forEach((ue=>{ue.offset=1-ue.offset})));const ae=Math.min(N,$);if(ae>0){const ue=ae/Math.max(N,$);h.forEach((xe=>{xe.offset+=ue*(1-xe.offset)}))}}return h.forEach((O=>{let{color:F,offset:E,opacity:Z}=O;n.push("<stop ",'offset="',100*E+"%",'" style="stop-color:',F,Z!==void 0?";stop-opacity: "+Z:";",`"/>
`)})),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:s,y2:a,r1:h,r2:p}=this.coords,v=this.type==="linear"?e.createLinearGradient(t,n,s,a):e.createRadialGradient(t,n,h,s,a,p);return this.colorStops.forEach((y=>{let{color:b,opacity:O,offset:F}=y;v.addColorStop(F,O!==void 0?new $t(b).setAlpha(O).toRgba():b)})),v}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(ge(ge({},e),{},{colorStops:t?t.map((s=>ge({},s))):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const s=__(e),a=t._findCenterFromElement();return new this(ge({id:e.getAttribute("id")||void 0,type:v_(e),coords:$w(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:Jw(e,n.opacity),gradientUnits:s,gradientTransform:Ql(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}de(Oi,"type","Gradient"),ct.setClass(Oi,"gradient"),ct.setClass(Oi,"linear"),ct.setClass(Oi,"radial");const eb=["type","source","patternTransform"];class Xl{get type(){return"pattern"}set type(e){ws("warn","Setting type has no effect",e)}constructor(e){de(this,"repeat","repeat"),de(this,"offsetX",0),de(this,"offsetY",0),de(this,"crossOrigin",""),this.id=ra(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return ge(ge({},Xa(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:on(this.offsetX,Gt.NUM_FRACTION_DIGITS),offsetY:on(this.offsetY,Gt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:a,id:h}=this,p=Eo(this.offsetX/t,0),v=Eo(this.offsetY/n,0),y=a==="repeat-y"||a==="no-repeat"?1+Math.abs(p||0):Eo(s.width/t,0),b=a==="repeat-x"||a==="no-repeat"?1+Math.abs(v||0):Eo(s.height/n,0);return['<pattern id="SVGID_'.concat(h,'" x="').concat(p,'" y="').concat(v,'" width="').concat(y,'" height="').concat(b,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s,patternTransform:a}=e,h=dn(e,eb);const p=await Wl(s,ge(ge({},t),{},{crossOrigin:h.crossOrigin}));return new this(ge(ge({},h),{},{patternTransform:a&&a.slice(0),source:p}))}}de(Xl,"type","Pattern"),ct.setClass(Xl),ct.setClass(Xl,"pattern");class dh{constructor(e){de(this,"color","rgb(0, 0, 0)"),de(this,"width",1),de(this,"shadow",null),de(this,"strokeLineCap","round"),de(this,"strokeLineJoin","round"),de(this,"strokeMiterLimit",10),de(this,"strokeDashArray",null),de(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new $t(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,n=e.contextTop,s=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*s,n.shadowOffsetX=t.offsetX*s,n.shadowOffsetY=t.offsetY*s}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const tb=["path","left","top"],nb=["d"];class Qi extends Zn{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:a}=t,h=dn(t,tb);super(),Object.assign(this,Qi.ownDefaults),this.setOptions(h),this._setPath(e||[],!0),typeof s=="number"&&this.set(nn,s),typeof a=="number"&&this.set(Lr,a)}_setPath(e,t){this.path=i_(Array.isArray(e)?e:c_(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Se(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ge(ge({},super.toObject(e)),{},{path:this.path.map((t=>t.slice()))})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=gp(this.path,Gt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Gt.NUM_FRACTION_DIGITS;return" translate(".concat(on(-this.pathOffset.x,e),", ").concat(on(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,Rt,Rt)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,a=0;for(const h of this.path)switch(h[0]){case"L":s=h[1],a=h[2],e.push({x:t,y:n},{x:s,y:a});break;case"M":s=h[1],a=h[2],t=s,n=a;break;case"C":e.push(...Cd(s,a,h[1],h[2],h[3],h[4],h[5],h[6])),s=h[5],a=h[6];break;case"Q":e.push(...Cd(s,a,h[1],h[2],h[1],h[2],h[3],h[4])),s=h[3],a=h[4];break;case"Z":s=t,a=n}return ns(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return ge(ge({},e),{},{pathOffset:new Se(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=ss(e,this.ATTRIBUTE_NAMES,n),{d:a}=s;return new this(a,ge(ge(ge({},dn(s,nb)),t),{},{left:void 0,top:void 0}))}}de(Qi,"type","Path"),de(Qi,"cacheProperties",[...Cs,"path","fillRule"]),de(Qi,"ATTRIBUTE_NAMES",[...aa,"d"]),ct.setClass(Qi),ct.setSVGClass(Qi);class Va extends dh{constructor(e){super(e),de(this,"decimate",.4),de(this,"drawStraightLine",!1),de(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){const s=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,s.x,s.y),s}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const s=this._points,a=s.length,h=this.canvas.contextTop;this._saveAndTransform(h),this.oldEnd&&(h.beginPath(),h.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Va.drawSegment(h,s[a-2],s[a-1]),h.stroke(),h.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===n.x&&t.y===n.y){const s=this.width/1e3;t.x-=s,n.x+=s}e.moveTo(t.x,t.y);for(let s=1;s<this._points.length;s++)Va.drawSegment(e,t,n),t=this._points[s],n=this._points[s+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return h_(e,t)}createPath(e){const t=new Qi(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new wr(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,s=e[0];const a=this.canvas.getZoom(),h=Math.pow(t/a,2),p=e.length-1,v=[s];for(let y=1;y<p-1;y++)n=Math.pow(s.x-e[y].x,2)+Math.pow(s.y-e[y].y,2),n>=h&&(s=e[y],v.push(s));return v.push(e[p]),v}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if((function(n){return gp(n)==="M 0 0 Q 0 0 0 0 L 0 0"})(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const rb=["left","top","radius"],y_=["radius","startAngle","endAngle","counterClockwise"];class Ir extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),Ir.ownDefaults)}constructor(e){super(),Object.assign(this,Ir.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,En(this.startAngle),En(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(br)}getRadiusY(){return this.get("radius")*this.get(Gr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...y_,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=En(this.startAngle),s=En(this.endAngle),a=Ii(n)*t,h=ji(n)*t,p=Ii(s)*t,v=ji(s)*t,y=e>180?1:0,b=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(h," A ").concat(t," ").concat(t," 0 ").concat(y," ").concat(b," ").concat(p," ").concat(v,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=ss(e,this.ATTRIBUTE_NAMES,n),{left:a=0,top:h=0,radius:p=0}=s;return new this(ge(ge({},dn(s,rb)),{},{radius:p,left:a-p,top:h-p}))}static fromObject(e){return super._fromObject(e)}}de(Ir,"type","Circle"),de(Ir,"cacheProperties",[...Cs,...y_]),de(Ir,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),de(Ir,"ATTRIBUTE_NAMES",["cx","cy","r",...aa]),ct.setClass(Ir),ct.setSVGClass(Ir);class x_ extends dh{constructor(e){super(e),de(this,"width",10),this.points=[]}drawDot(e){const t=this.addPoint(e),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,t),n.restore()}dot(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()}onMouseDown(e){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)}_render(){const e=this.canvas.contextTop,t=this.points;this._saveAndTransform(e);for(let n=0;n<t.length;n++)this.dot(e,t[n]);e.restore()}onMouseMove(e){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))}onMouseUp(){const e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const t=[];for(let s=0;s<this.points.length;s++){const a=this.points[s],h=new Ir({radius:a.radius,left:a.x,top:a.y,originX:Rt,originY:Rt,fill:a.fill});this.shadow&&(h.shadow=new wr(this.shadow)),t.push(h)}const n=new ur(t,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()}addPoint(e){let{x:t,y:n}=e;const s={x:t,y:n,radius:Da(Math.max(0,this.width-20),this.width+20)/2,fill:new $t(this.color).setAlpha(Da(0,100)/100).toRgba()};return this.points.push(s),s}}class w_ extends dh{constructor(e){super(e),de(this,"width",10),de(this,"density",20),de(this,"dotWidth",1),de(this,"dotWidthVariance",1),de(this,"randomOpacity",!1),de(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(e){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.renderChunck(this.sprayChunk)}onMouseMove(e){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.renderChunck(this.sprayChunk))}onMouseUp(){const e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const t=[];for(let s=0;s<this.sprayChunks.length;s++){const a=this.sprayChunks[s];for(let h=0;h<a.length;h++){const p=a[h],v=new _r({width:p.width,height:p.width,left:p.x+1,top:p.y+1,originX:Rt,originY:Rt,fill:this.color});t.push(v)}}const n=new ur(this.optimizeOverlapping?(function(s){const a={},h=[];for(let p,v=0;v<s.length;v++)p="".concat(s[v].left).concat(s[v].top),a[p]||(a[p]=!0,h.push(s[v]));return h})(t):t,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&n.set("shadow",new wr(this.shadow)),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()}renderChunck(e){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let n=0;n<e.length;n++){const s=e[n];t.globalAlpha=s.opacity,t.fillRect(s.x,s.y,s.width,s.width)}t.restore()}_render(){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let t=0;t<this.sprayChunks.length;t++)this.renderChunck(this.sprayChunks[t]);e.restore()}addSprayChunk(e){this.sprayChunk=[];const t=this.width/2;for(let n=0;n<this.density;n++)this.sprayChunk.push({x:Da(e.x-t,e.x+t),y:Da(e.y-t,e.y+t),width:this.dotWidthVariance?Da(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?Da(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class b_ extends Va{constructor(e){super(e)}getPatternSrc(){const e=ui(),t=e.getContext("2d");return e.width=e.height=25,t&&(t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill()),e}getPattern(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(e){super._setBrushStyles(e);const t=this.getPattern(e);t&&(e.strokeStyle=t)}createPath(e){const t=super.createPath(e),n=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new Xl({source:this.source||this.getPatternSrc(),offsetX:-n.x,offsetY:-n.y}),t}}const ib=["x1","y1","x2","y2"],sb=["x1","y1","x2","y2"],Td=["x1","x2","y1","y2"];class li extends Zn{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,li.ownDefaults),this.setOptions(a),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:h,top:p}=a;typeof h=="number"&&this.set(nn,h),typeof p=="number"&&this.set(Lr,p)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:a,top:h,width:p,height:v}=ns([{x:e,y:t},{x:n,y:s}]),y=new Se(a+p/2,h+v/2);this.setPositionByOrigin(y,Rt,Rt)}_set(e,t){return super._set(e,t),Td.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;oi(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new Se((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ge(ge({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:a,height:h}=this,p=e<=t?-1:1,v=n<=s?-1:1;return{x1:p*a/2,x2:p*-a/2,y1:v*h/2,y2:v*-h/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=ss(e,this.ATTRIBUTE_NAMES,n),{x1:a=0,y1:h=0,x2:p=0,y2:v=0}=s;return new this([a,h,p,v],dn(s,ib))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:a}=e,h=dn(e,sb);return this._fromObject(ge(ge({},h),{},{points:[t,n,s,a]}),{extraParam:"points"})}}de(li,"type","Line"),de(li,"cacheProperties",[...Cs,...Td]),de(li,"ATTRIBUTE_NAMES",aa.concat(Td)),ct.setClass(li),ct.setSVGClass(li);class $i extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),$i.ownDefaults)}constructor(e){super(),Object.assign(this,$i.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}de($i,"type","Triangle"),de($i,"ownDefaults",{width:100,height:100}),ct.setClass($i),ct.setSVGClass($i);const S_=["rx","ry"];class Ci extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),Ci.ownDefaults)}constructor(e){super(),Object.assign(this,Ci.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(br)}getRy(){return this.get("ry")*this.get(Gr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...S_,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,bs,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=ss(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function C_(l){if(!l)return[];const e=l.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}de(Ci,"type","Ellipse"),de(Ci,"cacheProperties",[...Cs,...S_]),de(Ci,"ownDefaults",{rx:0,ry:0}),de(Ci,"ATTRIBUTE_NAMES",[...aa,"cx","cy","rx","ry"]),ct.setClass(Ci),ct.setSVGClass(Ci);const ab=["left","top"],k_={exactBoundingBox:!1};class ai extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),ai.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),de(this,"strokeDiff",void 0),Object.assign(this,ai.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(nn,n),typeof s=="number"&&this.set(Lr,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return Gv(this.points,e,this.isOpen())}_calcDimensions(e){e=ge({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map((y=>y.projectedPoint)):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Se,strokeOffset:new Se,strokeDiff:new Se};const n=ns(t),s=su(ge(ge({},e),{},{scaleX:1,scaleY:1})),a=ns(this.points.map((y=>lr(y,s,!0)))),h=new Se(this.scaleX,this.scaleY);let p=n.left+n.width/2,v=n.top+n.height/2;return this.exactBoundingBox&&(p-=v*Math.tan(En(this.skewX)),v-=p*Math.tan(En(this.skewY))),ge(ge({},n),{},{pathOffset:new Se(p,v),strokeOffset:new Se(a.left,a.top).subtract(new Se(n.left,n.top)).multiply(h),strokeDiff:new Se(n.width,n.height).subtract(new Se(a.width,a.height)).multiply(h)})}_findCenterFromElement(){const e=ns(this.points);return new Se(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:a,pathOffset:h,strokeOffset:p,strokeDiff:v}=this._calcDimensions();this.set({width:s,height:a,pathOffset:h,strokeOffset:p,strokeDiff:v}),e&&this.setPositionByOrigin(new Se(t+s/2,n+a/2),Rt,Rt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Se(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let h;if(Object.keys(e).some((p=>this.strokeUniform||this.constructor.layoutProperties.includes(p)))){var t,n;const{width:p,height:v}=this._calcDimensions(e);h=new Se((t=e.width)!==null&&t!==void 0?t:p,(n=e.height)!==null&&n!==void 0?n:v)}else{var s,a;h=new Se((s=e.width)!==null&&s!==void 0?s:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return h.multiply(new Se(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===br||e===Gr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ge(ge({},super.toObject(e)),{},{points:this.points.map((t=>{let{x:n,y:s}=t;return{x:n,y:s}}))})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=Gt.NUM_FRACTION_DIGITS;for(let a=0,h=this.points.length;a<h;a++)e.push(on(this.points[a].x-t,s),",",on(this.points[a].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let a=0;a<t;a++){const h=this.points[a];e.lineTo(h.x-n,h.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(C_(e.getAttribute("points")),ge(ge({},dn(ss(e,this.ATTRIBUTE_NAMES,n),ab)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}de(ai,"ownDefaults",k_),de(ai,"type","Polyline"),de(ai,"layoutProperties",[Bo,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),de(ai,"cacheProperties",[...Cs,"points"]),de(ai,"ATTRIBUTE_NAMES",[...aa]),ct.setClass(ai),ct.setSVGClass(ai);class ea extends ai{isOpen(){return!1}}de(ea,"ownDefaults",k_),de(ea,"type","Polygon"),ct.setClass(ea),ct.setSVGClass(ea);class T_ extends Zn{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const a in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const a in n[s])if(n[s][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,a=0,h=!0,p=0;for(const v in t){n=0;for(const y in t[v]){const b=t[v][y]||{};a++,b[e]!==void 0?(s?b[e]!==s&&(h=!1):s=b[e],b[e]===this[e]&&delete b[e]):h=!1,Object.keys(b).length!==0?n++:delete t[v][y]}n===0&&delete t[v]}for(let v=0;v<this._textLines.length;v++)p+=this._textLines[v].length;h&&a===p&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,a;for(s in t){for(a in n=t[s],n)delete n[a][e],Object.keys(n[a]).length===0&&delete n[a];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const a=$d(ge(ge({},this._getStyleDeclaration(n,s)),t),(h=>h!==void 0));this._setStyleDeclaration(n,s,a)}getSelectionStyles(e,t,n){const s=[];for(let a=e;a<(t||e);a++)s.push(this.getStyleAtPosition(a,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return ge(ge({},Xa(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}de(T_,"_styleProperties",Nx);const ob=/  +/g,lb=/"/g;function ad(l,e,t,n,s){return"		".concat((function(a,h){let{left:p,top:v,width:y,height:b}=h,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gt.NUM_FRACTION_DIGITS;const F=Zl(Rn,a,!1),[E,Z,N,$]=[p,v,y,b].map((ee=>on(ee,O)));return"<rect ".concat(F,' x="').concat(E,'" y="').concat(Z,'" width="').concat(N,'" height="').concat($,'"></rect>')})(l,{left:e,top:t,width:n,height:s}),`
`)}const ub=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let od;class $n extends T_{static getDefaults(){return ge(ge({},super.getDefaults()),$n.ownDefaults)}constructor(e,t){super(),de(this,"__charBounds",[]),Object.assign(this,$n.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=pp(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Zi)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,a,h,p;for(let v=0,y=this._textLines.length;v<y;v++)if((this.textAlign===Zi||v!==y-1&&!this.isEndOfWrapping(v))&&(s=0,a=this._textLines[v],t=this.getLineWidth(v),t<this.width&&(p=this.textLines[v].match(this._reSpacesAndTabs)))){n=p.length,e=(this.width-t)/n;for(let b=0;b<=a.length;b++)h=this.__charBounds[v][b],this._reSpaceAndTab.test(a[b])?(h.width+=e,h.kernedWidth+=e,h.left+=s,s+=e):h.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===xr?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Rt:e.textBaseline="middle";break;case"ascender":e.textBaseline=Lr;break;case"descender":e.textBaseline=dd}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,a,h){this._renderChars(e,t,n,s,a,h)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let a=0,h=this._textLines.length;a<h;a++){const p=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){s+=p;continue}const v=this._textLines[a].length,y=this._getLineLeftOffset(a);let b,O,F=0,E=0,Z=this.getValueOfPropertyAt(a,0,"textBackgroundColor");const N=this.getHeightOfLineImpl(a);for(let $=0;$<v;$++){const ee=this.__charBounds[a][$];O=this.getValueOfPropertyAt(a,$,"textBackgroundColor"),this.path?(e.save(),e.translate(ee.renderLeft,ee.renderTop),e.rotate(ee.angle),e.fillStyle=O,O&&e.fillRect(-ee.width/2,-N*(1-this._fontSizeFraction),ee.width,N),e.restore()):O!==Z?(b=n+y+E,this.direction==="rtl"&&(b=this.width-b-F),e.fillStyle=Z,Z&&e.fillRect(b,s,F,N),E=ee.left,F=ee.width,Z=O):F+=ee.kernedWidth}O&&!this.path&&(b=n+y+E,this.direction==="rtl"&&(b=this.width-b-F),e.fillStyle=O,e.fillRect(b,s,F,N)),s+=p}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const a=Oo.getFontCache(t),h=this._getFontDeclaration(t),p=n?n+e:e,v=n&&h===this._getFontDeclaration(s),y=t.fontSize/this.CACHE_FONT_SIZE;let b,O,F,E;if(n&&a.has(n)&&(F=a.get(n)),a.has(e)&&(E=b=a.get(e)),v&&a.has(p)&&(O=a.get(p),E=O-F),b===void 0||F===void 0||O===void 0){const Z=(function(){return od||(od=Dr({width:0,height:0}).getContext("2d")),od})();this._setTextStyles(Z,t,!0),b===void 0&&(E=b=Z.measureText(e).width,a.set(e,b)),F===void 0&&v&&n&&(F=Z.measureText(n).width,a.set(n,F)),v&&O===void 0&&(O=Z.measureText(p).width,a.set(p,O),E=O-F)}return{width:b*y,kernedWidth:E*y}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const a=this.pathSide===Mn,h=this.path,p=this._textLines[e],v=p.length,y=new Array(v);this.__charBounds[e]=y;for(let b=0;b<v;b++){const O=p[b];n=this._getGraphemeBox(O,e,b,t),y[b]=n,s+=n.kernedWidth,t=O}if(y[v]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},h&&h.segmentsInfo){let b=0;const O=h.segmentsInfo[h.segmentsInfo.length-1].length;switch(this.textAlign){case nn:b=a?O-s:0;break;case Rt:b=(O-s)/2;break;case Mn:b=a?0:O-s}b+=this.pathStartOffset*(a?-1:1);for(let F=a?v-1:0;a?F>=0:F<v;a?F--:F++)n=y[F],b>O?b%=O:b<0&&(b+=O),this._setGraphemeOnPath(b,n),b+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,a=u_(s.path,n,s.segmentsInfo);t.renderLeft=a.x-s.pathOffset.x,t.renderTop=a.y-s.pathOffset.y,t.angle=a.angle+(this.pathSide===Mn?Math.PI:0)}_getGraphemeBox(e,t,n,s,a){const h=this.getCompleteStyleDeclaration(t,n),p=s?this.getCompleteStyleDeclaration(t,n-1):{},v=this._measureChar(e,h,s,p);let y,b=v.kernedWidth,O=v.width;this.charSpacing!==0&&(y=this._getWidthOfCharSpacing(),O+=y,b+=y);const F={width:O,left:0,height:h.fontSize,kernedWidth:b,deltaY:h.deltaY};if(n>0&&!a){const E=this.__charBounds[t][n-1];F.left=E.left+E.width+v.kernedWidth-v.width}return F}getHeightOfLineImpl(e){const t=this.__lineHeights;if(t[e])return t[e];let n=this.getHeightOfChar(e,0);for(let s=1,a=this._textLines[e].length;s<a;s++)n=Math.max(this.getHeightOfChar(e,s),n);return t[e]=n*this._fontSizeMult}getHeightOfLine(e){return this.getHeightOfLineImpl(e)*this.lineHeight}calcTextHeight(){let e=0;for(let t=0,n=this._textLines.length;t<n;t++)e+=t===n-1?this.getHeightOfLineImpl(t):this.getHeightOfLine(t);return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),a=this._getTopOffset();for(let h=0,p=this._textLines.length;h<p;h++)this._renderTextLine(t,e,this._textLines[h],s+this._getLineLeftOffset(h),a+n+this.getHeightOfLineImpl(h),h),n+=this.getHeightOfLine(h);e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Rn))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,a,h){const p=this.textAlign.includes(Zi),v=this.path,y=!p&&this.charSpacing===0&&this.isEmptyStyles(h)&&!v,b=this.direction==="ltr",O=this.direction==="ltr"?1:-1,F=t.direction;let E,Z,N,$,ee,ae="",ue=0;if(t.save(),F!==this.direction&&(t.canvas.setAttribute("dir",b?"ltr":"rtl"),t.direction=b?"ltr":"rtl",t.textAlign=b?nn:Mn),a-=this.getHeightOfLineImpl(h)*this._fontSizeFraction,y)return this._renderChar(e,t,h,0,n.join(""),s,a),void t.restore();for(let xe=0,Ce=n.length-1;xe<=Ce;xe++)$=xe===Ce||this.charSpacing||v,ae+=n[xe],N=this.__charBounds[h][xe],ue===0?(s+=O*(N.kernedWidth-N.width),ue+=N.width):ue+=N.kernedWidth,p&&!$&&this._reSpaceAndTab.test(n[xe])&&($=!0),$||(E=E||this.getCompleteStyleDeclaration(h,xe),Z=this.getCompleteStyleDeclaration(h,xe+1),$=hh(E,Z,!1)),$&&(v?(t.save(),t.translate(N.renderLeft,N.renderTop),t.rotate(N.angle),this._renderChar(e,t,h,xe,ae,-ue/2,0),t.restore()):(ee=s,this._renderChar(e,t,h,xe,ae,ee,a)),ae="",E=Z,s+=O*ue,ue=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=Dr({width:t,height:n}),a=s.getContext("2d");return s.width=t,s.height=n,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,n),a.lineTo(0,n),a.closePath(),a.translate(t/2,n/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(s,"no-repeat")}handleFiller(e,t,n){let s,a;return oi(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,a=-this.height/2,e.translate(s,a),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:a}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,a,h,p){const v=this._getStyleDeclaration(n,s),y=this.getCompleteStyleDeclaration(n,s),b=e==="fillText"&&y.fill,O=e==="strokeText"&&y.stroke&&y.strokeWidth;if(O||b){if(t.save(),t.font=this._getFontDeclaration(y),v.textBackgroundColor&&this._removeShadow(t),v.deltaY&&(p+=v.deltaY),b){const F=this._setFillStyles(t,y);t.fillText(a,h-F.offsetX,p-F.offsetY)}if(O){const F=this._setStrokeStyles(t,y);t.strokeText(a,h-F.offsetX,p-F.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),h=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),p={fontSize:a*n.size,deltaY:h+a*n.baseline};this.setSelectionStyles(p,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,a=this.direction,h=this.isEndOfWrapping(e);let p=0;return s===Zi||s===Hl&&!h||s===Ul&&!h||s===Wc&&!h?0:(s===Rt&&(p=n/2),s===Mn&&(p=n),s===Hl&&(p=n/2),s===Ul&&(p=n),a==="rtl"&&(s===Mn||s===Zi||s===Ul?p=0:s===nn||s===Wc?p=-n:s!==Rt&&s!==Hl||(p=-n/2)),p)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),a=this.path,h=this._getWidthOfCharSpacing(),p=t==="linethrough"?.5:t==="overline"?1:0,v=this.offsets[t];for(let y=0,b=this._textLines.length;y<b;y++){const O=this.getHeightOfLine(y);if(!this[t]&&!this.styleHas(t,y)){n+=O;continue}const F=this._textLines[y],E=O/this.lineHeight,Z=this._getLineLeftOffset(y);let N=0,$=0,ee=this.getValueOfPropertyAt(y,0,t),ae=this.getValueOfPropertyAt(y,0,Rn),ue=this.getValueOfPropertyAt(y,0,Ba),xe=ee,Ce=ae,z=ue;const Ve=n+E*(1-this._fontSizeFraction);let He=this.getHeightOfChar(y,0),Je=this.getValueOfPropertyAt(y,0,"deltaY");for(let Ke=0,dt=F.length;Ke<dt;Ke++){const ze=this.__charBounds[y][Ke];xe=this.getValueOfPropertyAt(y,Ke,t),Ce=this.getValueOfPropertyAt(y,Ke,Rn),z=this.getValueOfPropertyAt(y,Ke,Ba);const Bt=this.getHeightOfChar(y,Ke),Le=this.getValueOfPropertyAt(y,Ke,"deltaY");if(a&&xe&&Ce){const wt=this.fontSize*z/1e3;e.save(),e.fillStyle=ae,e.translate(ze.renderLeft,ze.renderTop),e.rotate(ze.angle),e.fillRect(-ze.kernedWidth/2,v*Bt+Le-p*wt,ze.kernedWidth,wt),e.restore()}else if((xe!==ee||Ce!==ae||Bt!==He||z!==ue||Le!==Je)&&$>0){const wt=this.fontSize*ue/1e3;let Be=s+Z+N;this.direction==="rtl"&&(Be=this.width-Be-$),ee&&ae&&ue&&(e.fillStyle=ae,e.fillRect(Be,Ve+v*He+Je-p*wt,$,wt)),N=ze.left,$=ze.width,ee=xe,ue=z,ae=Ce,He=Bt,Je=Le}else $+=ze.kernedWidth}let ut=s+Z+N;this.direction==="rtl"&&(ut=this.width-ut-$),e.fillStyle=Ce;const Ie=this.fontSize*z/1e3;xe&&Ce&&z&&e.fillRect(ut,Ve+v*He+Je-p*Ie,$-h,Ie),n+=O}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const h=e.includes("'")||e.includes('"')||e.includes(",")||$n.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(a?this.CACHE_FONT_SIZE:s,"px"),h].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return ch(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let a=[];for(let h=0;h<t.length;h++)n[h]=this.graphemeSplit(t[h]),a=a.concat(n[h],s);return a.pop(),{_unwrappedLines:n,lines:t,graphemeText:a,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ge(ge({},super.toObject([...Cv,...e])),{},{styles:Kv(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,a=!1;if(typeof e=="object")for(const h in e)h==="path"&&this.setPathInfo(),s=s||n.includes(h),a=a||h==="path";else s=n.includes(e),a=e==="path";return a&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=ss(e,$n.ATTRIBUTE_NAMES,n),a=ge(ge({},t),s),{textAnchor:h=nn,textDecoration:p="",dx:v=0,dy:y=0,top:b=0,left:O=0,fontSize:F=Hd,strokeWidth:E=1}=a,Z=dn(a,ub),N=new this(Vc(e.textContent||"").trim(),ge({left:O+v,top:b+y,underline:p.includes("underline"),overline:p.includes("overline"),linethrough:p.includes("line-through"),strokeWidth:0,fontSize:F},Z)),$=N.getScaledHeight()/N.height,ee=((N.height+N.strokeWidth)*N.lineHeight-N.height)*$,ae=N.getScaledHeight()+ee;let ue=0;return h===Rt&&(ue=N.getScaledWidth()/2),h===Mn&&(ue=N.getScaledWidth()),N.set({left:N.left-ue,top:N.top-(ae-N.fontSize*(.07+N._fontSizeFraction))/N.lineHeight,strokeWidth:E}),N}static fromObject(e){return this._fromObject(ge(ge({},e),{},{styles:Zv(e.styles||{},e.text)}),{extraParam:"text"})}}de($n,"textLayoutProperties",Sv),de($n,"cacheProperties",[...Cs,...Cv]),de($n,"ownDefaults",Bx),de($n,"type","Text"),de($n,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),de($n,"ATTRIBUTE_NAMES",aa.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Hv($n,[class extends xv{_toSVG(){const l=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(l){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:l,withShadow:!0,additionalTransform:Io(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(l){let{textBgRects:e,textSpans:t}=l;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(lb,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(l,e){const t=[],n=[];let s,a=l;this.backgroundColor&&n.push(...ad(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let h=0,p=this._textLines.length;h<p;h++)s=this._getLineLeftOffset(h),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",h))&&this._setSVGTextLineBg(n,h,e+s,a),this._setSVGTextLineText(t,h,e+s,a),a+=this.getHeightOfLine(h);return{textSpans:t,textBgRects:n}}_createTextCharSpan(l,e,t,n,s){const a=Gt.NUM_FRACTION_DIGITS,h=this.getSvgSpanStyles(e,l!==l.trim()||!!l.match(ob)),p=h?'style="'.concat(h,'"'):"",v=e.deltaY,y=v?' dy="'.concat(on(v,a),'" '):"",{angle:b,renderLeft:O,renderTop:F,width:E}=s;let Z="";if(O!==void 0){const N=E/2;b&&(Z=' rotate="'.concat(on(rs(b),a),'"'));const $=Ha({angle:rs(b)});$[4]=O,$[5]=F;const ee=new Se(-N,0).transform($);t=ee.x,n=ee.y}return'<tspan x="'.concat(on(t,a),'" y="').concat(on(n,a),'" ').concat(y).concat(Z).concat(p,">").concat(qv(l),"</tspan>")}_setSVGTextLineText(l,e,t,n){const s=this.getHeightOfLine(e),a=this.textAlign.includes(Zi),h=this._textLines[e];let p,v,y,b,O,F="",E=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let Z=0,N=h.length-1;Z<=N;Z++)O=Z===N||this.charSpacing||this.path,F+=h[Z],y=this.__charBounds[e][Z],E===0?(t+=y.kernedWidth-y.width,E+=y.width):E+=y.kernedWidth,a&&!O&&this._reSpaceAndTab.test(h[Z])&&(O=!0),O||(p=p||this.getCompleteStyleDeclaration(e,Z),v=this.getCompleteStyleDeclaration(e,Z+1),O=hh(p,v,!0)),O&&(b=this._getStyleDeclaration(e,Z),l.push(this._createTextCharSpan(F,b,t,n,y)),F="",p=v,this.direction==="rtl"?t-=E:t+=E,E=0)}_setSVGTextLineBg(l,e,t,n){const s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let h,p=0,v=0,y=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let b=0;b<s.length;b++){const{left:O,width:F,kernedWidth:E}=this.__charBounds[e][b];h=this.getValueOfPropertyAt(e,b,"textBackgroundColor"),h!==y?(y&&l.push(...ad(y,t+v,n,p,a)),v=O,p=F,y=h):p+=E}h&&l.push(...ad(y,t+v,n,p,a))}_getSVGLineTopOffset(l){let e,t=0;for(e=0;e<l;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(l){return"".concat(super.getSvgStyles(l)," text-decoration-thickness: ").concat(on(this.textDecorationThickness*this.getObjectScaling().y/10,Gt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(l,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:a,fontSize:h,fontStyle:p,fontWeight:v,deltaY:y,textDecorationThickness:b,linethrough:O,overline:F,underline:E}=l,Z=this.getSvgTextDecoration({underline:E??this.underline,overline:F??this.overline,linethrough:O??this.linethrough}),N=b||this.textDecorationThickness;return[s?Zl(xr,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",h?"font-size: ".concat(h,"px; "):"",p?"font-style: ".concat(p,"; "):"",v?"font-weight: ".concat(v,"; "):"",Z?"text-decoration: ".concat(Z,"; text-decoration-thickness: ").concat(on(N*this.getObjectScaling().y/10,Gt.NUM_FRACTION_DIGITS),"%; "):"",a?Zl(Rn,a):"",y?"baseline-shift: ".concat(-y,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(l){return["overline","underline","line-through"].filter((e=>l[e.replace("-","")])).join(" ")}}]),ct.setClass($n),ct.setSVGClass($n);class cb{constructor(e){de(this,"target",void 0),de(this,"__mouseDownInPlace",!1),de(this,"__dragStartFired",!1),de(this,"__isDraggingOver",!1),de(this,"__dragStartSelection",void 0),de(this,"__dragImageDisposer",void 0),de(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach((n=>n())),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:a}=t;const h=this.target,p=h.canvas,v=new Se(h.flipX?-1:1,h.flipY?-1:1),y=h._getCursorBoundaries(s),b=new Se(y.left+y.leftOffset,y.top+y.topOffset).multiply(v).transform(h.calcTransformMatrix()),O=p.getScenePoint(e).subtract(b),F=h.getCanvasRetinaScaling(),E=h.getBoundingRect(),Z=b.subtract(new Se(E.left,E.top)),N=p.viewportTransform,$=Z.add(O).transform(N,!0),ee=h.backgroundColor,ae=hp(h.styles);h.backgroundColor="";const ue={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};h.setSelectionStyles(ue,0,s),h.setSelectionStyles(ue,a,h.text.length),h.dirty=!0;const xe=h.toCanvasElement({enableRetinaScaling:p.enableRetinaScaling,viewportTransform:!0});h.backgroundColor=ee,h.styles=ae,h.dirty=!0,Zc(xe,{position:"fixed",left:"".concat(-xe.width,"px"),border:yr,width:"".concat(xe.width/F,"px"),height:"".concat(xe.height/F,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{xe.remove()},ki(e.target||this.target.hiddenTextarea).body.appendChild(xe),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(xe,$.x,$.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(s.selectionStart,s.selectionEnd).join(""),h=ge({text:t.text,value:a},s);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,h)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let a=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!s){const h=this.target,p=h.canvas;let v=h.getSelectionStartFromPointer(n);const{styles:y}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},b=a[Math.max(0,a.length-1)],O=0;if(this.__dragStartSelection){const F=this.__dragStartSelection.selectionStart,E=this.__dragStartSelection.selectionEnd;v>F&&v<=E?v=F:v>E&&(v-=E-F),h.removeChars(F,E),delete this.__dragStartSelection}h._reNewline.test(b)&&(h._reNewline.test(h._text[v])||v===h._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=h,h.insertChars(a,y,v),p.setActiveObject(h),h.enterEditing(n),h.selectionStart=Math.min(v+O,h._text.length),h.selectionEnd=Math.min(h.selectionStart+a.length,h._text.length),h.hiddenTextarea.value=h.text,h._updateTextarea(),h.hiddenTextarea.focus(),h.fire(Fc,{index:v+O,action:"drop"}),p.fire("text:changed",{target:h}),p.contextTopDirty=!0,p.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,a=this.target.canvas,{selectionStart:h,selectionEnd:p}=this.__dragStartSelection,v=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||yr;v===yr?(s.selectionStart=h,s.selectionEnd=p,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),v==="move"&&(s.removeChars(h,p),s.selectionStart=s.selectionEnd=h,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Fc,{index:h,action:"dragend"}),a.fire("text:changed",{target:s}),a.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const sm=/[ \n\.,;!\?\-]/;class hb extends $n{constructor(){super(...arguments),de(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:a}=e;return lp({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:h=>{this._currentCursorOpacity=h,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach((t=>{t&&!t.isDone()&&(e=!0,t.abort())})),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((e=>!e||e.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!Xd.test(n[e-1]))?e-1:e,a=n[s];for(;s>0&&s<n.length&&!sm.test(a);)s+=t,a=n[s];return t===-1&&sm.test(a)&&s++,s}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const n=this.searchWordBoundary(e,-1),s=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const n=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;ki(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,a=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==a||s!==n&&a!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),a=this.graphemeSplit(s).length;if(e===t)return{selectionStart:a,selectionEnd:a};const h=n.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(h).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,a=n.charIndex,h=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,p=t.leftOffset,v=this.getCanvasRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/v,O=y.height/v,F=b-h,E=O-h,Z=new Se(t.left+p,t.top+t.topOffset+h).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Se(y.clientWidth/b,y.clientHeight/O));return Z.x<0&&(Z.x=0),Z.x>F&&(Z.x=F),Z.y<0&&(Z.y=0),Z.y>E&&(Z.y=E),Z.x+=this.canvas._offset.left,Z.y+=this.canvas._offset.top,{left:"".concat(Z.x,"px"),top:"".concat(Z.y,"px"),fontSize:"".concat(h,"px"),charHeight:h}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Nc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:h}=this.get2DCursorLocation(t,!0);if(n!==a){if(this.styles[n])for(let p=s;p<this._unwrappedTextLines[n].length;p++)delete this.styles[n][p];if(this.styles[a])for(let p=h;p<this._unwrappedTextLines[a].length;p++){const v=this.styles[a][p];v&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+p-h]=v)}for(let p=n+1;p<=a;p++)delete this.styles[p];this.shiftLineStyles(a,n-a)}else if(this.styles[n]){const p=this.styles[n],v=h-s;for(let y=s;y<h;y++)delete p[y];for(const y in this.styles[n]){const b=parseInt(y,10);b>=h&&(p[b-v]=p[y],delete p[y])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const a=parseInt(s,10);a>e&&(this.styles[a+t]=n[a],n[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,n,s){const a={},h=this._unwrappedTextLines[e].length,p=h===t;let v=!1;n||(n=1),this.shiftLineStyles(e,n);const y=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const O in this.styles[e]){const F=parseInt(O,10);F>=t&&(v=!0,a[F-t]=this.styles[e][O],p&&t===0||delete this.styles[e][O])}let b=!1;for(v&&!p&&(this.styles[e+n]=a,b=!0),(b||h>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:ge({},s[n-1])}:y?this.styles[e+n]={0:ge({},y)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const a=this.styles[e],h=a?ge({},a):{};n||(n=1);for(const v in h){const y=parseInt(v,10);y>=t&&(a[y+n]=h[y],h[y-n]||delete a[y])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=ge({},s[n]));return}if(!a)return;const p=a[t?t-1:1];for(;p&&n--;)this.styles[e][t+n]=ge({},p)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),a=[0];let h,p=0;for(let v=0;v<e.length;v++)e[v]===`
`?(p++,a[p]=0):a[p]++;for(a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],n),n=n&&n.slice(a[0]+1)),p&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],p),h=1;h<p;h++)a[h]>0?this.insertCharStyleObject(s.lineIndex+h,0,a[h],n):n&&this.styles[s.lineIndex+h]&&n[0]&&(this.styles[s.lineIndex+h][0]=n[0]),n=n&&n.slice(a[h]+1);a[h]>0&&this.insertCharStyleObject(s.lineIndex+h,0,a[h],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,n,t),this._text=[...this._text.slice(0,n),...a,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=nn:this._selectionDirection===Mn&&(this._selectionDirection=nn,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===Mn?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=Mn:this._selectionDirection===nn&&(this._selectionDirection=Mn,this.selectionStart=t),this.selectionEnd=n)}}class fb extends hb{initHiddenTextarea(){const e=this.canvas&&ki(this.canvas.getElement())||Ua(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map((h=>{let[p,v]=h;return t.setAttribute(p,v)}));const{top:n,left:s,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((h=>{let[p,v]=h;return t.addEventListener(p,this[v].bind(this))})),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:n,selectionStart:s,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const h=()=>{this.updateFromTextArea(),this.fire(Fc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void h();const p=this._splitTextIntoLines(n).graphemeText,v=this._text.length,y=p.length,b=this.selectionStart,O=this.selectionEnd,F=b!==O;let E,Z,N,$,ee=y-v;const ae=this.fromStringToGraphemeSelection(s,a,n),ue=b>ae.selectionStart;F?(Z=this._text.slice(b,O),ee+=O-b):y<v&&(Z=ue?this._text.slice(O+ee,O):this._text.slice(b,b-ee));const xe=p.slice(ae.selectionEnd-ee,ae.selectionEnd);if(Z&&Z.length&&(xe.length&&(E=this.getSelectionStyles(b,b+1,!1),E=xe.map((()=>E[0]))),F?(N=b,$=O):ue?(N=O-Z.length,$=O):(N=O,$=O+Z.length),this.removeStyleFromTo(N,$)),xe.length){const{copyPasteData:Ce}=Mi();t&&xe.join("")===Ce.copiedText&&!Gt.disableStyleCopyPaste&&(E=Ce.copiedTextStyle),this.insertNewStyleBlock(xe,b,E)}h()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Mi();e.copiedText=this.getSelectedText(),Gt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),a=s.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const h=s.charIndex,p=this._getWidthBeforeCursor(a,h),v=this._getIndexOnLine(a+1,p);return this._textLines[a].slice(h).length+v+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),a=s.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-n;const h=s.charIndex,p=this._getWidthBeforeCursor(a,h),v=this._getIndexOnLine(a-1,p),y=this._textLines[a].slice(0,h),b=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+v-y.length+(1-b)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,a,h=this._getLineLeftOffset(e),p=0;for(let v=0,y=n.length;v<y;v++)if(s=this.__charBounds[e][v].width,h+=s,h>t){a=!0;const b=h-s,O=h,F=Math.abs(b-t);p=Math.abs(O-t)<F?v:v-1;break}return a||(p=n.length-1),p}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Mn);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=za(0,this.selectionStart,s),this.selectionEnd=za(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===nn?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=nn,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Mn&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=nn,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===nn&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Mn,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Mn,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const am=l=>!!l.button;class db extends fb{constructor(){super(...arguments),de(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new cb(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:n}=e;this.canvas&&this.editable&&!am(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||am(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(jr(this.calcTransformMatrix())).add(new Se(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,a=0;for(let y=0;y<this._textLines.length&&n<=t.y;y++)n+=this.getHeightOfLine(y),a=y,y>0&&(s+=this._textLines[y-1].length+this.missingNewlineOffset(y-1));let h=Math.abs(this._getLineLeftOffset(a));const p=this._textLines[a].length,v=this.__charBounds[a];for(let y=0;y<p;y++){const b=h+v[y].kernedWidth;if(t.x<=b){Math.abs(t.x-b)<=Math.abs(t.x-h)&&s++;break}h=b,s++}return Math.min(this.flipX?p-s:s,this._text.length)}}const vc="moveCursorUp",_c="moveCursorDown",yc="moveCursorLeft",xc="moveCursorRight",wc="exitEditing",om=(l,e)=>{const t=e.getRetinaScaling();l.setTransform(t,0,0,t,0,0);const n=e.viewportTransform;l.transform(n[0],n[1],n[2],n[3],n[4],n[5])},pb=ge({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:wc,27:wc,33:vc,34:_c,35:xc,36:yc,37:yc,38:vc,39:xc,40:_c},keysMapRtl:{9:wc,27:wc,33:vc,34:_c,35:yc,36:xc,37:xc,38:vc,39:yc,40:_c},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class es extends db{static getDefaults(){return ge(ge({},super.getDefaults()),es.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,ge(ge({},es.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Jl&&this.canvas.textEditingManager.remove(this),t instanceof Jl&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),s=n.length>0;let a,h=e;if(s){a=Dr(e.canvas),h=a.getContext("2d"),om(h,this.canvas);const p=this.calcTransformMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(h,t):this.renderCursor(h,t),s)for(const p of n){const v=p.clipPath,y=Dr(e.canvas),b=y.getContext("2d");if(om(b,this.canvas),!v.absolutePositioned){const O=p.calcTransformMatrix();b.transform(O[0],O[1],O[2],O[3],O[4],O[5])}v.transform(b),v.drawObject(b,!0,{}),this.drawClipPathOnCache(h,v,y)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:a}=this.get2DCursorLocation(e);for(let y=0;y<a;y++)t+=this.getHeightOfLine(y);const h=this._getLineLeftOffset(a),p=this.__charBounds[a][s];p&&(n=p.left),this.charSpacing!==0&&s===this._textLines[a].length&&(n-=this._getWidthOfCharSpacing());const v={top:t,left:h+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===Mn||this.textAlign===Zi||this.textAlign===Ul?v.left*=-1:this.textAlign===nn||this.textAlign===Wc?v.left=h-(n>0?n:0):this.textAlign!==Rt&&this.textAlign!==Hl||(v.left=h-(n>0?n:0))),v}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,a=n.charIndex>0?n.charIndex-1:0,h=this.getValueOfPropertyAt(s,a,"fontSize"),p=this.getObjectScaling().x*this.canvas.getZoom(),v=this.cursorWidth/p,y=this.getValueOfPropertyAt(s,a,"deltaY"),b=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-h*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-v/2,top:b+t.top+y,width:v,height:h}}_renderCursor(e,t,n){const{color:s,opacity:a,left:h,top:p,width:v,height:y}=this.getCursorRenderingData(n,t);e.fillStyle=s,e.globalAlpha=a,e.fillRect(h,p,v,y)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,a=t.selectionEnd,h=this.textAlign.includes(Zi),p=this.get2DCursorLocation(s),v=this.get2DCursorLocation(a),y=p.lineIndex,b=v.lineIndex,O=p.charIndex<0?0:p.charIndex,F=v.charIndex<0?0:v.charIndex;for(let E=y;E<=b;E++){const Z=this._getLineLeftOffset(E)||0;let N=this.getHeightOfLine(E),$=0,ee=0,ae=0;if(E===y&&(ee=this.__charBounds[y][O].left),E>=y&&E<b)ae=h&&!this.isEndOfWrapping(E)?this.width:this.getLineWidth(E)||5;else if(E===b)if(F===0)ae=this.__charBounds[b][F].left;else{const Ve=this._getWidthOfCharSpacing();ae=this.__charBounds[b][F-1].left+this.__charBounds[b][F-1].width-Ve}$=N,(this.lineHeight<1||E===b&&this.lineHeight>1)&&(N/=this.lineHeight);let ue=n.left+Z+ee,xe=N,Ce=0;const z=ae-ee;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",xe=1,Ce=N):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Mn||this.textAlign===Zi||this.textAlign===Ul?ue=this.width-ue-z:this.textAlign===nn||this.textAlign===Wc?ue=n.left+Z-ae:this.textAlign!==Rt&&this.textAlign!==Hl||(ue=n.left+Z-ae)),e.fillRect(ue,n.top+n.topOffset+Ce,z,xe),n.topOffset+=$}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Rn)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}de(es,"ownDefaults",pb),de(es,"type","IText"),ct.setClass(es),ct.setClass(es,"i-text");class ts extends es{static getDefaults(){return ge(ge({},super.getDefaults()),ts.ownDefaults)}constructor(e,t){super(e,ge(ge({},ts.ownDefaults),t))}static createControls(){return{controls:Uv()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Zi)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const a={};for(let h=0;h<e.graphemeLines.length;h++)e.graphemeText[s]===`
`&&h>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&h>0&&(n++,s++),a[h]={line:t,offset:n},s+=e.graphemeLines[h].length,n+=e.graphemeLines[h].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,a=!1;const h=this._styleMap[e],p=this._styleMap[e+1];h&&(e=h.line,n=h.offset),p&&(s=p.line,a=s===e,t=p.offset);const v=e===void 0?this.styles:{line:this.styles[e]};for(const y in v)for(const b in v[y]){const O=parseInt(b,10);if(O>=n&&(!a||O<t))for(const F in v[y][b])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let a=0;a<n.wordsData.length;a++)s.push(...this._wrapLine(a,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map(((a,h)=>{let p=0;const v=t?this.graphemeSplit(a):this.wordSplit(a);return v.length===0?[{word:[],width:0}]:v.map((y=>{const b=t?[y]:this.graphemeSplit(y),O=this._measureWord(b,h,p);return s=Math.max(O,s),p+=b.length+n.length,{word:b,width:O}}))})),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let h=0,p=e.length;h<p;h++)a+=this._getGraphemeBox(e[h],t,h+s,n,!0).kernedWidth,n=e[h];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:a}=n,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const p=this._getWidthOfCharSpacing(),v=this.splitByGrapheme,y=[],b=v?"":" ";let O=0,F=[],E=0,Z=0,N=!0;t-=h;const $=Math.max(t,s,this.dynamicMinWidth),ee=a[e];let ae;for(E=0,ae=0;ae<ee.length;ae++){const{word:ue,width:xe}=ee[ae];E+=ue.length,O+=Z+xe-p,O>$&&!N?(y.push(F),F=[],O=xe,N=!0):O+=p,N||v||F.push(b),F=F.concat(ue),Z=v?0:this._measureWord([b],e,E),E++,N=!1}return ae&&y.push(F),s+h>this.dynamicMinWidth&&(this.dynamicMinWidth=s-p+h),y}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let a=0;a<n.length;a++)s[a]=n[a].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}de(ts,"type","Textbox"),de(ts,"textLayoutProperties",[...es.textLayoutProperties,"width"]),de(ts,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ct.setClass(ts);class Ed extends lu{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:a}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:h,height:p}=ns(e_(n,s)),v=new Se(h,p);if(s.absolutePositioned)return{center:ys(s.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:v};{const y=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:b=new Se,correction:O=new Se}=this.calcBoundingBox(t,e)||{};return{center:b.add(y),correction:O.subtract(y),size:v}}return{center:n.getRelativeCenterPoint().add(y),size:v}}}}de(Ed,"type","clip-path"),ct.setClass(Ed);class Od extends lu{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new Se(n.width||s.x,n.height||s.y)}}de(Od,"type","fixed"),ct.setClass(Od);class gb extends Do{subscribeTargets(e){const t=e.target;e.targets.reduce(((n,s)=>(s.parent&&n.add(s.parent),n)),new Set).forEach((n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})}))}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce(((s,a)=>(a.parent&&s.add(a.parent),s)),new Set).forEach((s=>{!n.some((a=>a.parent===s))&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})}))}}class ta extends ur{static getDefaults(){return ge(ge({},super.getDefaults()),ta.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ta.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:a}=t;this.groupInit(e,{left:n,top:s,layoutManager:a??new gb})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach((s=>{const a=this._objects.findIndex((p=>p.isInFrontOf(s))),h=a===-1?this.size():a;this.insertAt(h,s)}))}canEnterGroup(e){return this.getObjects().some((t=>t.isDescendantOf(e)||e.isDescendantOf(t)))?(ws("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach((s=>{const{parent:a}=s;a&&n.add(a)})),e===dp?n.forEach((s=>{s._onAfterObjectsChange(Yc,t)})):n.forEach((s=>{s._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=ge(ge({hasControls:!1},n),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,s);super._renderControls(e,t),e.restore()}}de(ta,"type","ActiveSelection"),de(ta,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ct.setClass(ta),ct.setClass(ta,"activeSelection");class E_{constructor(){de(this,"resources",{})}applyFilters(e,t,n,s,a){const h=a.getContext("2d");if(!h)return;h.drawImage(t,0,0,n,s);const p={sourceWidth:n,sourceHeight:s,imageData:h.getImageData(0,0,n,s),originalEl:t,originalImageData:h.getImageData(0,0,n,s),canvasEl:a,ctx:h,filterBackend:this};e.forEach((y=>{y.applyTo(p)}));const{imageData:v}=p;return v.width===n&&v.height===s||(a.width=v.width,a.height=v.height),h.putImageData(v,0,0),p}}class $l{constructor(){let{tileSize:e=Gt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};de(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),de(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=Dr({width:e,height:t}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,a,h){const p=this.gl,v=a.getContext("2d");if(!p||!v)return;let y;h&&(y=this.getCachedTexture(h,t));const b={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:p,sourceTexture:this.createTexture(p,n,s,y?void 0:t),targetTexture:this.createTexture(p,n,s),originalTexture:y||this.createTexture(p,n,s,y?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},O=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,O),e.forEach((F=>{F&&F.applyTo(b)})),(function(F){const E=F.targetCanvas,Z=E.width,N=E.height,$=F.destinationWidth,ee=F.destinationHeight;Z===$&&N===ee||(E.width=$,E.height=ee)})(b),this.copyGLTo2D(p,b),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(b.sourceTexture),p.deleteTexture(b.targetTexture),p.deleteFramebuffer(O),v.setTransform(1,0,0,1,0,0),b}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,a){const{NEAREST:h,TEXTURE_2D:p,RGBA:v,UNSIGNED_BYTE:y,CLAMP_TO_EDGE:b,TEXTURE_MAG_FILTER:O,TEXTURE_MIN_FILTER:F,TEXTURE_WRAP_S:E,TEXTURE_WRAP_T:Z}=e,N=e.createTexture();return e.bindTexture(p,N),e.texParameteri(p,O,a||h),e.texParameteri(p,F,a||h),e.texParameteri(p,E,b),e.texParameteri(p,Z,b),s?e.texImage2D(p,0,v,v,y,s):e.texImage2D(p,0,v,t,n,0,v,y,null),N}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const a=this.createTexture(this.gl,t.width,t.height,t,n);return a&&(s[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,a=s.getContext("2d");if(!a)return;a.translate(0,s.height),a.scale(1,-1);const h=n.height-s.height;a.drawImage(n,0,h,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,a=t.destinationHeight,h=s*a*4;if(!n)return;const p=new Uint8Array(this.imageBuffer,0,h),v=new Uint8ClampedArray(this.imageBuffer,0,h);e.readPixels(0,0,s,a,e.RGBA,e.UNSIGNED_BYTE,p);const y=new ImageData(v,s,a);n.putImageData(y,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),a=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Mc;function O_(){const{WebGLProbe:l}=Mi();return l.queryWebGL(ui()),Gt.enableGLFiltering&&l.isSupported(Gt.textureSize)?new $l({tileSize:Gt.textureSize}):new E_}function Ic(){return!Mc&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Mc=O_()),Mc}function mb(l){Mc=l}const vb=["filters","resizeFilter","src","crossOrigin","type"],P_=["cropX","cropY"];class mr extends Zn{static getDefaults(){return ge(ge({},super.getDefaults()),mr.ownDefaults)}constructor(e,t){super(),de(this,"_lastScaleX",1),de(this,"_lastScaleY",1),de(this,"_filterScalingX",1),de(this,"_filterScalingY",1),this.filters=[],Object.assign(this,mr.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(ra()),this.setElement(typeof e=="string"?(this.canvas&&ki(this.canvas.getElement())||Ua()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(mr.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Ic(!1);t instanceof $l&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((e=>{const t=this[e];t&&Mi().dispose(t),this[e]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach((n=>{n&&t.push(n.toObject())})),ge(ge({},super.toObject([...P_,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let a=[],h=[],p="",v="";if(!t)return[];if(this.hasCrop()){const y=ra();a.push('<clipPath id="imageCrop_'+y+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(v=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(v).concat(p,`></image>
`)),this.stroke||this.strokeDashArray){const y=this.fill;this.fill=null,h=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=y}return a=this.paintFirst!==Rn?a.concat(h,e):a.concat(e,h),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wl(e,{crossOrigin:t,signal:n}).then((s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,a=n.y,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&a>t)return this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=a);const p=Dr(h),{width:v,height:y}=h;this._element=p,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=a,Ic().applyFilters([e],h,v,y,this._element),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter((a=>a&&!a.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=Dr({width:n,height:s});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);Ic().applyFilters(e,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,a=this.width,h=this.height,p=Math.max(this.cropX,0),v=Math.max(this.cropY,0),y=t.naturalWidth||t.width,b=t.naturalHeight||t.height,O=p*n,F=v*s,E=Math.min(a*n,y-O),Z=Math.min(h*s,b-F),N=-a/2,$=-h/2,ee=Math.min(a,y/n-p),ae=Math.min(h,b/s-v);t&&e.drawImage(t,O,F,E,Z,N,$,ee,ae)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=ip(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let a,h=this._element.width,p=this._element.height,v=1,y=1,b=0,O=0,F=0,E=0;return!e||e.alignX===yr&&e.alignY===yr?(v=t/h,y=n/p):(e.meetOrSlice==="meet"&&(v=y=n_(this._element,s),a=(t-h*v)/2,e.alignX==="Min"&&(b=-a),e.alignX==="Max"&&(b=a),a=(n-p*y)/2,e.alignY==="Min"&&(O=-a),e.alignY==="Max"&&(O=a)),e.meetOrSlice==="slice"&&(v=y=r_(this._element,s),a=h-t/v,e.alignX==="Mid"&&(F=a/2),e.alignX==="Max"&&(F=a),a=p-n/y,e.alignY==="Mid"&&(E=a/2),e.alignY==="Max"&&(E=a),h=t/v,p=n/y)),{width:h,height:p,scaleX:v,scaleY:y,offsetLeft:b,offsetTop:O,cropX:F,cropY:E}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:a,crossOrigin:h,type:p}=e,v=dn(e,vb);return Promise.all([Wl(a,ge(ge({},t),{},{crossOrigin:h})),n&&Mo(n,t),s&&Mo([s],t),au(v,t)]).then((y=>{let[b,O=[],[F]=[],E={}]=y;return new this(b,ge(ge({},v),{},{src:a,filters:O,resizeFilter:F},E))}))}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Wl(e,{crossOrigin:t,signal:n}).then((a=>new this(a,s)))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=ss(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"]||s.href,t,s).catch((a=>(ws("log","Unable to parse Image",a),null)))}}function ld(l){if(!Ux.test(l.nodeName))return{};const e=l.getAttribute("viewBox");let t,n,s=1,a=1,h=0,p=0;const v=l.getAttribute("width"),y=l.getAttribute("height"),b=l.getAttribute("x")||0,O=l.getAttribute("y")||0,F=!(e&&W0.test(e)),E=!v||!y||v==="100%"||y==="100%";let Z="",N=0,$=0;if(F&&(b||O)&&l.parentNode&&l.parentNode.nodeName!=="#document"&&(Z=" translate("+gr(b||"0")+" "+gr(O||"0")+") ",t=(l.getAttribute("transform")||"")+Z,l.setAttribute("transform",t),l.removeAttribute("x"),l.removeAttribute("y")),F&&E)return{width:0,height:0};const ee={width:0,height:0};if(F)return ee.width=gr(v),ee.height=gr(y),ee;const ae=e.match(W0);h=-parseFloat(ae[1]),p=-parseFloat(ae[2]);const ue=parseFloat(ae[3]),xe=parseFloat(ae[4]);ee.minX=h,ee.minY=p,ee.viewBoxWidth=ue,ee.viewBoxHeight=xe,E?(ee.width=ue,ee.height=xe):(ee.width=gr(v),ee.height=gr(y),s=ee.width/ue,a=ee.height/xe);const Ce=ip(l.getAttribute("preserveAspectRatio")||"");if(Ce.alignX!==yr&&(Ce.meetOrSlice==="meet"&&(a=s=s>a?a:s),Ce.meetOrSlice==="slice"&&(a=s=s>a?s:a),N=ee.width-ue*s,$=ee.height-xe*s,Ce.alignX==="Mid"&&(N/=2),Ce.alignY==="Mid"&&($/=2),Ce.alignX==="Min"&&(N=0),Ce.alignY==="Min"&&($=0)),s===1&&a===1&&h===0&&p===0&&b===0&&O===0)return ee;if((b||O)&&l.parentNode.nodeName!=="#document"&&(Z=" translate("+gr(b||"0")+" "+gr(O||"0")+") "),t=Z+" matrix("+s+" 0 0 "+a+" "+(h*s+N)+" "+(p*a+$)+") ",l.nodeName==="svg"){for(n=l.ownerDocument.createElementNS(md,"g");l.firstChild;)n.appendChild(l.firstChild);l.appendChild(n)}else n=l,n.removeAttribute("x"),n.removeAttribute("y"),t=n.getAttribute("transform")+t;return n.setAttribute("transform",t),ee}de(mr,"type","Image"),de(mr,"cacheProperties",[...Cs,...P_]),de(mr,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),de(mr,"CSS_CANVAS","canvas-img"),de(mr,"ATTRIBUTE_NAMES",[...aa,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ct.setClass(mr),ct.setSVGClass(mr);const Qc=l=>l.tagName.replace("svg:",""),_b=oh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function A_(l,e){let t,n,s,a,h=[];for(s=0,a=e.length;s<a;s++)t=e[s],n=l.getElementsByTagNameNS("http://www.w3.org/2000/svg",t),h=h.concat(Array.from(n));return h}const yb=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],ud="xlink:href";function M_(l,e){var t;const n=((t=e.getAttribute(ud))===null||t===void 0?void 0:t.slice(1))||"",s=l.getElementById(n);if(s&&s.getAttribute(ud)&&M_(l,s),s&&(yb.forEach((a=>{const h=s.getAttribute(a);!e.hasAttribute(a)&&h&&e.setAttribute(a,h)})),!e.children.length)){const a=s.cloneNode(!0);for(;a.firstChild;)e.appendChild(a.firstChild)}e.removeAttribute(ud)}const xb=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function I_(l){const e=l.getElementsByTagName("style"),t={};for(let n=0;n<e.length;n++){const s=(e[n].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");s.trim()!==""&&s.split("}").filter(((a,h,p)=>p.length>1&&a.trim())).forEach((a=>{if((a.match(/{/g)||[]).length>1&&a.trim().startsWith("@"))return;const h=a.split("{"),p={},v=h[1].trim().split(";").filter((function(y){return y.trim()}));for(let y=0;y<v.length;y++){const b=v[y].split(":"),O=b[0].trim(),F=b[1].trim();p[O]=F}(a=h[0].trim()).split(",").forEach((y=>{(y=y.replace(/^svg/i,"").trim())!==""&&(t[y]=ge(ge({},t[y]||{}),p))}))}))}return t}const lm=l=>ct.getSVGClass(Qc(l).toLowerCase());class wb{constructor(e,t,n,s,a){this.elements=e,this.options=t,this.reviver=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s,this.clipPaths=a,this.gradientDefs=(function(h){const p=A_(h,xb),v={};let y=p.length;for(;y--;){const b=p[y];b.getAttribute("xlink:href")&&M_(h,b);const O=b.getAttribute("id");O&&(v[O]=b)}return v})(s),this.cssRules=I_(s)}parse(){return Promise.all(this.elements.map((e=>this.createObject(e))))}async createObject(e){const t=lm(e);if(t){const n=await t.fromElement(e,this.options,this.cssRules);return this.resolveGradient(n,e,Rn),this.resolveGradient(n,e,xr),n instanceof mr&&n._originalElement?Ac(n,n.parsePreserveAspectRatioAttribute()):Ac(n),await this.resolveClipPath(n,e),this.reviver&&this.reviver(e,n),n}return null}extractPropertyDefinition(e,t,n){const s=e[t],a=this.regexUrl;if(!a.test(s))return;a.lastIndex=0;const h=a.exec(s)[1];return a.lastIndex=0,n[h]}resolveGradient(e,t,n){const s=this.extractPropertyDefinition(e,n,this.gradientDefs);if(s){const a=t.getAttribute(n+"-opacity"),h=Oi.fromElement(s,e,ge(ge({},this.options),{},{opacity:a}));e.set(n,h)}}async resolveClipPath(e,t,n){const s=this.extractPropertyDefinition(e,"clipPath",this.clipPaths);if(s){const a=jr(e.calcTransformMatrix()),h=s[0].parentElement;let p=t;for(;!n&&p.parentElement&&p.getAttribute("clip-path")!==e.clipPath;)p=p.parentElement;p.parentElement.appendChild(h);const v=Ql("".concat(p.getAttribute("transform")||""," ").concat(h.getAttribute("originalTransform")||""));h.setAttribute("transform","matrix(".concat(v.join(","),")"));const y=await Promise.all(s.map((ae=>lm(ae).fromElement(ae,this.options,this.cssRules).then((ue=>(Ac(ue),ue.fillRule=ue.clipRule,delete ue.clipRule,ue)))))),b=y.length===1?y[0]:new ur(y),O=wn(a,b.calcTransformMatrix());b.clipPath&&await this.resolveClipPath(b,p,h.getAttribute("clip-path")?p:void 0);const{scaleX:F,scaleY:E,angle:Z,skewX:N,translateX:$,translateY:ee}=Na(O);b.set({flipX:!1,flipY:!1}),b.set({scaleX:F,scaleY:E,angle:Z,skewX:N,skewY:0}),b.setPositionByOrigin(new Se($,ee),Rt,Rt),e.clipPath=b}else delete e.clipPath}}const um=l=>Wx.test(Qc(l)),Pd=()=>({objects:[],elements:[],options:{},allElements:[]});async function mp(l,e){let{crossOrigin:t,signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n&&n.aborted)return ws("log",new Wd("parseSVGDocument")),Pd();const s=l.documentElement;(function(b){const O=A_(b,["use","svg:use"]),F=["x","y","xlink:href","href","transform"];for(const E of O){const Z=E.attributes,N={};for(const Je of Z)Je.value&&(N[Je.name]=Je.value);const $=(N["xlink:href"]||N.href||"").slice(1);if($==="")return;const ee=b.getElementById($);if(ee===null)return;let ae=ee.cloneNode(!0);const ue=ae.attributes,xe={};for(const Je of ue)Je.value&&(xe[Je.name]=Je.value);const{x:Ce=0,y:z=0,transform:Ve=""}=N,He="".concat(Ve," ").concat(xe.transform||""," translate(").concat(Ce,", ").concat(z,")");if(ld(ae),/^svg$/i.test(ae.nodeName)){const Je=ae.ownerDocument.createElementNS(md,"g");Object.entries(xe).forEach((ut=>{let[Ie,Ke]=ut;return Je.setAttributeNS(md,Ie,Ke)})),Je.append(...ae.childNodes),ae=Je}for(const Je of Z){if(!Je)continue;const{name:ut,value:Ie}=Je;if(!F.includes(ut))if(ut==="style"){const Ke={};bd(Ie,Ke),Object.entries(xe).forEach((ze=>{let[Bt,Le]=ze;Ke[Bt]=Le})),bd(xe.style||"",Ke);const dt=Object.entries(Ke).map((ze=>ze.join(":"))).join(";");ae.setAttribute(ut,dt)}else!xe[ut]&&ae.setAttribute(ut,Ie)}ae.setAttribute("transform",He),ae.setAttribute("instantiated_by_use","1"),ae.removeAttribute("id"),E.parentNode.replaceChild(ae,E)}})(l);const a=Array.from(s.getElementsByTagName("*")),h=ge(ge({},ld(s)),{},{crossOrigin:t,signal:n}),p=a.filter((b=>(ld(b),um(b)&&!(function(O){let F=O;for(;F&&(F=F.parentElement);)if(F&&F.nodeName&&_b.test(Qc(F))&&!F.getAttribute("instantiated_by_use"))return!0;return!1})(b))));if(!p||p&&!p.length)return ge(ge({},Pd()),{},{options:h,allElements:a});const v={};return a.filter((b=>Qc(b)==="clipPath")).forEach((b=>{b.setAttribute("originalTransform",b.getAttribute("transform")||"");const O=b.getAttribute("id");v[O]=Array.from(b.getElementsByTagName("*")).filter((F=>um(F)))})),{objects:await new wb(p,h,e,l,v).parse(),elements:p,options:h,allElements:a}}function Ad(l,e,t){return mp(new(Ti()).DOMParser().parseFromString(l.trim(),"text/xml"),e,t)}function bb(l,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(((n,s)=>{f_(l.replace(/^\n\s*/,"").trim(),{onComplete:a=>{const h=a.responseXML;h&&n(h),s()},signal:t.signal})})).then((n=>mp(n,e,t))).catch((()=>Pd()))}const j_=tv,cm=l=>function(e,t,n){const{points:s,pathOffset:a}=n;return new Se(s[l]).subtract(a).transform(wn(n.getViewportTransform(),n.calcTransformMatrix()))},L_=(l,e,t,n)=>{const{target:s,pointIndex:a}=e,h=s,p=ys(new Se(t,n),void 0,h.calcOwnMatrix());return h.points[a]=p.add(h.pathOffset),h.setDimensions(),h.set("dirty",!0),!0},D_=(l,e)=>function(t,n,s,a){const h=n.target,p=new Se(h.points[(l>0?l:h.points.length)-1]),v=p.subtract(h.pathOffset).transform(h.calcOwnMatrix()),y=e(t,ge(ge({},n),{},{pointIndex:l}),s,a),b=p.subtract(h.pathOffset).transform(h.calcOwnMatrix()).subtract(v);return h.left-=b.x,h.top-=b.y,y},hm=l=>sa(j_,D_(l,L_)),Md=(l,e,t)=>{const{path:n,pathOffset:s}=l,a=n[e];return new Se(a[t]-s.x,a[t+1]-s.y).transform(wn(l.getViewportTransform(),l.calcTransformMatrix()))};function Sb(l,e,t){const{commandIndex:n,pointIndex:s}=this;return Md(t,n,s)}function Cb(l,e,t,n){const{target:s}=e,{commandIndex:a,pointIndex:h}=this,p=((v,y,b,O,F)=>{const{path:E,pathOffset:Z}=v,N=E[(O>0?O:E.length)-1],$=new Se(N[F],N[F+1]),ee=$.subtract(Z).transform(v.calcOwnMatrix()),ae=ys(new Se(y,b),void 0,v.calcOwnMatrix());E[O][F]=ae.x+Z.x,E[O][F+1]=ae.y+Z.y,v.setDimensions();const ue=$.subtract(v.pathOffset).transform(v.calcOwnMatrix()).subtract(ee);return v.left-=ue.x,v.top-=ue.y,v.set("dirty",!0),!0})(s,t,n,a,h);return np(this.actionName,ge(ge({},rp(l,e,t,n)),{},{commandIndex:a,pointIndex:h})),p}class R_ extends Mr{constructor(e){super(e)}render(e,t,n,s,a){const h=ge(ge({},s),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,h,a)}}class kb extends R_{constructor(e){super(e)}render(e,t,n,s,a){const{path:h}=a,{commandIndex:p,pointIndex:v,connectToCommandIndex:y,connectToPointIndex:b}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[O]=h[p],F=Md(a,y,b);if(O==="Q"){const E=Md(a,p,v+2);e.moveTo(E.x,E.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(F.x,F.y),e.stroke(),e.restore(),super.render(e,t,n,s,a)}}const bc=(l,e,t,n,s,a)=>new(t?kb:R_)(ge(ge({commandIndex:l,pointIndex:e,actionName:"modifyPath",positionHandler:Sb,actionHandler:Cb,connectToCommandIndex:s,connectToPointIndex:a},n),t?n.controlPointStyle:n.pointStyle));var Tb=Object.freeze({__proto__:null,changeWidth:yd,createObjectDefaultControls:cp,createPathControls:function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};let n="M";return l.path.forEach(((s,a)=>{const h=s[0];switch(h!=="Z"&&(t["c_".concat(a,"_").concat(h)]=bc(a,s.length-2,!1,e)),h){case"C":t["c_".concat(a,"_C_CP_1")]=bc(a,1,!0,e,a-1,(p=>p==="C"?5:p==="Q"?3:1)(n)),t["c_".concat(a,"_C_CP_2")]=bc(a,3,!0,e,a,5);break;case"Q":t["c_".concat(a,"_Q_CP_1")]=bc(a,1,!0,e,a,3)}n=h})),t},createPolyActionHandler:hm,createPolyControls:function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};for(let n=0;n<(typeof l=="number"?l:l.points.length);n++)t["p".concat(n)]=new Mr(ge({actionName:j_,positionHandler:cm(n),actionHandler:hm(n)},e));return t},createPolyPositionHandler:cm,createResizeControls:Wv,createTextboxDefaultControls:Uv,dragHandler:yv,factoryPolyActionHandler:D_,getLocalPoint:ah,polyActionHandler:L_,renderCircleControl:Av,renderSquareControl:Mv,rotationStyleHandler:Iv,rotationWithSnapping:jv,scaleCursorStyleHandler:To,scaleOrSkewActionName:Sl,scaleSkewCursorStyleHandler:La,scalingEqually:bl,scalingX:Rv,scalingXOrSkewingY:xd,scalingY:Fv,scalingYOrSkewingX:wd,skewCursorStyleHandler:Nv,skewHandlerX:zv,skewHandlerY:Vv,wrapWithFireEvent:sa,wrapWithFixedAnchor:Ya});const uu=l=>l.webgl!==void 0,Eb=(l,e)=>{const t=Dr({width:l,height:e}),n=ui().getContext("webgl"),s={imageBuffer:new ArrayBuffer(l*e*4)},a={destinationWidth:l,destinationHeight:e,targetCanvas:t};let h;h=Ti().performance.now(),$l.prototype.copyGLTo2D.call(s,n,a);const p=Ti().performance.now()-h;return h=Ti().performance.now(),$l.prototype.copyGLTo2DPutImageData.call(s,n,a),p>Ti().performance.now()-h},vp="precision highp float",Ob=`
    `.concat(vp,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),Pb=["type"],Ab=["type"],Mb=new RegExp(vp,"g");class Fn{get type(){return this.constructor.type}constructor(){let e=dn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pb);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return Ob}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Mi();s!=="highp"&&(t=t.replace(Mb,vp.replace("highp",s)));const a=e.createShader(e.VERTEX_SHADER),h=e.createShader(e.FRAGMENT_SHADER),p=e.createProgram();if(!a||!h||!p)throw new Ji("Vertex, fragment shader or program creation error");if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Ji("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(h,t),e.compileShader(h),!e.getShaderParameter(h,e.COMPILE_STATUS))throw new Ji("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(h)));if(e.attachShader(p,a),e.attachShader(p,h),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS))throw new Ji('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(p)));const v=this.getUniformLocations(e,p)||{};return v.uStepW=e.getUniformLocation(p,"uStepW"),v.uStepH=e.getUniformLocation(p,"uStepH"),{program:p,attributeLocations:this.getAttributeLocations(e,p),uniformLocations:v}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let a=0;a<n.length;a++)s[n[a]]=e.getUniformLocation(t,n[a]);return s}sendAttributeData(e,t,n){const s=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){uu(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,s=Dr({width:t,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return ge({type:this.type},e.reduce(((t,n)=>(t[n]=this[n],t)),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(dn(e,Ab))}}de(Fn,"type","BaseFilter"),de(Fn,"uniformLocations",[]);const Ib={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Cl extends Fn{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(Ib[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new $t(this.color).getSource(),s=this.alpha,a=n[0]*s,h=n[1]*s,p=n[2]*s,v=1-s;for(let y=0;y<t.length;y+=4){const b=t[y],O=t[y+1],F=t[y+2];let E,Z,N;switch(this.mode){case"multiply":E=b*a/255,Z=O*h/255,N=F*p/255;break;case"screen":E=255-(255-b)*(255-a)/255,Z=255-(255-O)*(255-h)/255,N=255-(255-F)*(255-p)/255;break;case"add":E=b+a,Z=O+h,N=F+p;break;case"difference":E=Math.abs(b-a),Z=Math.abs(O-h),N=Math.abs(F-p);break;case"subtract":E=b-a,Z=O-h,N=F-p;break;case"darken":E=Math.min(b,a),Z=Math.min(O,h),N=Math.min(F,p);break;case"lighten":E=Math.max(b,a),Z=Math.max(O,h),N=Math.max(F,p);break;case"overlay":E=a<128?2*b*a/255:255-2*(255-b)*(255-a)/255,Z=h<128?2*O*h/255:255-2*(255-O)*(255-h)/255,N=p<128?2*F*p/255:255-2*(255-F)*(255-p)/255;break;case"exclusion":E=a+b-2*a*b/255,Z=h+O-2*h*O/255,N=p+F-2*p*F/255;break;case"tint":E=a+b*v,Z=h+O*v,N=p+F*v}t[y]=E,t[y+1]=Z,t[y+2]=N}}sendUniformData(e,t){const n=new $t(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}de(Cl,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),de(Cl,"type","BlendColor"),de(Cl,"uniformLocations",["uColor"]),ct.setClass(Cl);const jb={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Lb=["type","image"];class kl extends Fn{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return jb[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:a}}=e;const h=this.image;a.blendImage||(a.blendImage=ui());const p=a.blendImage,v=p.getContext("2d");p.width!==n||p.height!==s?(p.width=n,p.height=s):v.clearRect(0,0,n,s),v.setTransform(h.scaleX,0,0,h.scaleY,h.left,h.top),v.drawImage(h.getElement(),0,0,n,s);const y=v.getImageData(0,0,n,s).data;for(let b=0;b<t.length;b+=4){const O=t[b],F=t[b+1],E=t[b+2],Z=t[b+3],N=y[b],$=y[b+1],ee=y[b+2],ae=y[b+3];switch(this.mode){case"multiply":t[b]=O*N/255,t[b+1]=F*$/255,t[b+2]=E*ee/255,t[b+3]=Z*ae/255;break;case"mask":t[b+3]=ae}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return ge(ge({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,a=dn(e,Lb);return mr.fromObject(s,t).then((h=>new this(ge(ge({},a),{},{image:h}))))}}de(kl,"type","BlendImage"),de(kl,"defaults",{mode:"multiply",alpha:1}),de(kl,"uniformLocations",["uTransformMatrix","uImage"]),ct.setClass(kl);class Tl extends Fn{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){uu(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;this.aspectRatio=n/s,this.horizontal=!0;let a=this.getBlurValue()*n;const h=new Uint8ClampedArray(t),p=15,v=4*n;for(let y=0;y<t.length;y+=4){let b=0,O=0,F=0,E=0,Z=0;const N=y-y%v,$=N+v;for(let ee=-14;ee<p;ee++){const ae=ee/p,ue=4*Math.floor(a*ae),xe=1-Math.abs(ae);let Ce=y+ue;Ce<N?Ce=N:Ce>$&&(Ce=$);const z=t[Ce+3]*xe;b+=t[Ce]*z,O+=t[Ce+1]*z,F+=t[Ce+2]*z,E+=z,Z+=xe}h[y]=b/E,h[y+1]=O/E,h[y+2]=F/E,h[y+3]=E/Z}this.horizontal=!1,a=this.getBlurValue()*s;for(let y=0;y<h.length;y+=4){let b=0,O=0,F=0,E=0,Z=0;const N=y%v,$=h.length-v+N;for(let ee=-14;ee<p;ee++){const ae=ee/p,ue=Math.floor(a*ae)*v,xe=1-Math.abs(ae);let Ce=y+ue;Ce<N?Ce=N:Ce>$&&(Ce=$);const z=h[Ce+3]*xe;b+=h[Ce]*z,O+=h[Ce+1]*z,F+=h[Ce+2]*z,E+=z,Z+=xe}t[y]=b/E,t[y+1]=O/E,t[y+2]=F/E,t[y+3]=E/Z}}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:n}=this;return t?n>1&&(e=1/n):n<1&&(e=n),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}de(Tl,"type","Blur"),de(Tl,"defaults",{blur:0}),de(Tl,"uniformLocations",["uDelta"]),ct.setClass(Tl);class El extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=n,t[s+1]+=n,t[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}de(El,"type","Brightness"),de(El,"defaults",{brightness:0}),de(El,"uniformLocations",["uBrightness"]),ct.setClass(El);const F_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Ra extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let a=0;a<t.length;a+=4){const h=t[a],p=t[a+1],v=t[a+2];if(t[a]=h*n[0]+p*n[1]+v*n[2]+255*n[4],t[a+1]=h*n[5]+p*n[6]+v*n[7]+255*n[9],t[a+2]=h*n[10]+p*n[11]+v*n[12]+255*n[14],!s){const y=t[a+3];t[a]+=y*n[3],t[a+1]+=y*n[8],t[a+2]+=y*n[13],t[a+3]=h*n[15]+p*n[16]+v*n[17]+y*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],a=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,a)}toObject(){return ge(ge({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ga(l,e){var t;const n=(de(t=class extends Ra{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",l),de(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ct.setClass(n,l),n}de(Ra,"type","ColorMatrix"),de(Ra,"defaults",F_),de(Ra,"uniformLocations",["uColorMatrix","uConstants"]),ct.setClass(Ra);const Db=Ga("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),Rb=Ga("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),Fb=Ga("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Nb=Ga("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Bb=Ga("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),zb=Ga("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Vb=Ga("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Id extends Fn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){uu(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach((t=>{t.applyTo(e)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((e=>e.toObject()))}}isNeutralState(){return!this.subFilters.some((e=>!e.isNeutralState()))}static fromObject(e,t){return Promise.all((e.subFilters||[]).map((n=>ct.getClass(n.type).fromObject(n,t)))).then((n=>new this({subFilters:n})))}}de(Id,"type","Composed"),ct.setClass(Id);class Ol extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let a=0;a<t.length;a+=4)t[a]=s*(t[a]-128)+128,t[a+1]=s*(t[a+1]-128)+128,t[a+2]=s*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}de(Ol,"type","Contrast"),de(Ol,"defaults",{contrast:0}),de(Ol,"uniformLocations",["uContrast"]),ct.setClass(Ol);const Wb={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Pl extends Fn{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Wb[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,a=Math.round(Math.sqrt(s.length)),h=Math.floor(a/2),p=t.width,v=t.height,y=e.ctx.createImageData(p,v),b=y.data,O=this.opaque?1:0;let F,E,Z,N,$,ee,ae,ue,xe,Ce,z,Ve,He;for(z=0;z<v;z++)for(Ce=0;Ce<p;Ce++){for($=4*(z*p+Ce),F=0,E=0,Z=0,N=0,He=0;He<a;He++)for(Ve=0;Ve<a;Ve++)ae=z+He-h,ee=Ce+Ve-h,ae<0||ae>=v||ee<0||ee>=p||(ue=4*(ae*p+ee),xe=s[He*a+Ve],F+=n[ue]*xe,E+=n[ue+1]*xe,Z+=n[ue+2]*xe,O||(N+=n[ue+3]*xe));b[$]=F,b[$+1]=E,b[$+2]=Z,b[$+3]=O?n[$+3]:N}e.imageData=y}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return ge(ge({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}de(Pl,"type","Convolute"),de(Pl,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),de(Pl,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ct.setClass(Pl);const N_="Gamma";class Al extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],a=1/n[1],h=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const p=this.rgbValues;for(let v=0;v<256;v++)p.r[v]=255*Math.pow(v/255,s),p.g[v]=255*Math.pow(v/255,a),p.b[v]=255*Math.pow(v/255,h);for(let v=0;v<t.length;v+=4)t[v]=p.r[t[v]],t[v+1]=p.g[t[v+1]],t[v+2]=p.b[t[v+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:N_,gamma:this.gamma.concat()}}}de(Al,"type",N_),de(Al,"defaults",{gamma:[1,1,1]}),de(Al,"uniformLocations",["uGamma"]),ct.setClass(Al);const Ub={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Ml extends Fn{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){const a=t[s],h=t[s+1],p=t[s+2];switch(this.mode){case"average":n=(a+h+p)/3;break;case"lightness":n=(Math.min(a,h,p)+Math.max(a,h,p))/2;break;case"luminosity":n=.21*a+.72*h+.07*p}t[s+2]=t[s+1]=t[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ub[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}de(Ml,"type","Grayscale"),de(Ml,"defaults",{mode:"average"}),de(Ml,"uniformLocations",["uMode"]),ct.setClass(Ml);const Hb=ge(ge({},F_),{},{rotation:0});class jc extends Ra{calculateMatrix(){const e=this.rotation*Math.PI,t=Ii(e),n=ji(e),s=1/3,a=Math.sqrt(s)*n,h=1-t;this.matrix=[t+h/3,s*h-a,s*h+a,0,0,s*h+a,t+s*h,s*h-a,0,0,s*h-a,s*h+a,t+s*h,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}de(jc,"type","HueRotation"),de(jc,"defaults",Hb),ct.setClass(jc);class Il extends Fn{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}de(Il,"type","Invert"),de(Il,"defaults",{alpha:!1,invert:!0}),de(Il,"uniformLocations",["uInvert","uAlpha"]),ct.setClass(Il);class jl extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const a=(.5-Math.random())*n;t[s]+=a,t[s+1]+=a,t[s+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}de(jl,"type","Noise"),de(jl,"defaults",{noise:0}),de(jl,"uniformLocations",["uNoise","uSeed"]),ct.setClass(jl);class Ll extends Fn{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let a=0;a<s;a+=this.blocksize)for(let h=0;h<n;h+=this.blocksize){const p=4*a*n+4*h,v=t[p],y=t[p+1],b=t[p+2],O=t[p+3];for(let F=a;F<Math.min(a+this.blocksize,s);F++)for(let E=h;E<Math.min(h+this.blocksize,n);E++){const Z=4*F*n+4*E;t[Z]=v,t[Z+1]=y,t[Z+2]=b,t[Z+3]=O}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}de(Ll,"type","Pixelate"),de(Ll,"defaults",{blocksize:4}),de(Ll,"uniformLocations",["uBlocksize"]),ct.setClass(Ll);class Dl extends Fn{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new $t(this.color).getSource(),a=[s[0]-n,s[1]-n,s[2]-n],h=[s[0]+n,s[1]+n,s[2]+n];for(let p=0;p<t.length;p+=4){const v=t[p],y=t[p+1],b=t[p+2];v>a[0]&&y>a[1]&&b>a[2]&&v<h[0]&&y<h[1]&&b<h[2]&&(t[p+3]=0)}}sendUniformData(e,t){const n=new $t(this.color).getSource(),s=this.distance,a=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],h=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,h)}}de(Dl,"type","RemoveColor"),de(Dl,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),de(Dl,"uniformLocations",["uLow","uHigh"]),ct.setClass(Dl);class Rl extends Fn{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let a=1;a<=n;a++)s[a-1]=e(a*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map(((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){uu(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const a=t.width,h=t.height,p=Math.round(a*n),v=Math.round(h*s);let y;y=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,h,p,v):this.resizeType==="hermite"?this.hermiteFastResize(e,a,h,p,v):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,h,p,v):this.resizeType==="lanczos"?this.lanczosResize(e,a,h,p,v):new ImageData(p,v),e.imageData=y}sliceByTwo(e,t,n,s,a){const h=e.imageData,p=.5;let v=!1,y=!1,b=t*p,O=n*p;const F=e.filterBackend.resources;let E=0,Z=0;const N=t;let $=0;F.sliceByTwo||(F.sliceByTwo=ui());const ee=F.sliceByTwo;(ee.width<1.5*t||ee.height<n)&&(ee.width=1.5*t,ee.height=n);const ae=ee.getContext("2d");for(ae.clearRect(0,0,1.5*t,n),ae.putImageData(h,0,0),s=Math.floor(s),a=Math.floor(a);!v||!y;)t=b,n=O,s<Math.floor(b*p)?b=Math.floor(b*p):(b=s,v=!0),a<Math.floor(O*p)?O=Math.floor(O*p):(O=a,y=!0),ae.drawImage(ee,E,Z,t,n,N,$,b,O),E=N,Z=$,$+=O;return ae.getImageData(E,Z,s,a)}lanczosResize(e,t,n,s,a){const h=e.imageData.data,p=e.ctx.createImageData(s,a),v=p.data,y=this.lanczosCreate(this.lanczosLobes),b=this.rcpScaleX,O=this.rcpScaleY,F=2/this.rcpScaleX,E=2/this.rcpScaleY,Z=Math.ceil(b*this.lanczosLobes/2),N=Math.ceil(O*this.lanczosLobes/2),$={},ee={x:0,y:0},ae={x:0,y:0};return(function ue(xe){let Ce,z,Ve,He,Je,ut,Ie,Ke,dt,ze,Bt;for(ee.x=(xe+.5)*b,ae.x=Math.floor(ee.x),Ce=0;Ce<a;Ce++){for(ee.y=(Ce+.5)*O,ae.y=Math.floor(ee.y),Je=0,ut=0,Ie=0,Ke=0,dt=0,z=ae.x-Z;z<=ae.x+Z;z++)if(!(z<0||z>=t)){ze=Math.floor(1e3*Math.abs(z-ee.x)),$[ze]||($[ze]={});for(let Le=ae.y-N;Le<=ae.y+N;Le++)Le<0||Le>=n||(Bt=Math.floor(1e3*Math.abs(Le-ee.y)),$[ze][Bt]||($[ze][Bt]=y(Math.sqrt(Math.pow(ze*F,2)+Math.pow(Bt*E,2))/1e3)),Ve=$[ze][Bt],Ve>0&&(He=4*(Le*t+z),Je+=Ve,ut+=Ve*h[He],Ie+=Ve*h[He+1],Ke+=Ve*h[He+2],dt+=Ve*h[He+3]))}He=4*(Ce*s+xe),v[He]=ut/Je,v[He+1]=Ie/Je,v[He+2]=Ke/Je,v[He+3]=dt/Je}return++xe<s?ue(xe):p})(0)}bilinearFiltering(e,t,n,s,a){let h,p,v,y,b,O,F,E,Z,N,$,ee,ae,ue=0;const xe=this.rcpScaleX,Ce=this.rcpScaleY,z=4*(t-1),Ve=e.imageData.data,He=e.ctx.createImageData(s,a),Je=He.data;for(F=0;F<a;F++)for(E=0;E<s;E++)for(b=Math.floor(xe*E),O=Math.floor(Ce*F),Z=xe*E-b,N=Ce*F-O,ae=4*(O*t+b),$=0;$<4;$++)h=Ve[ae+$],p=Ve[ae+4+$],v=Ve[ae+z+$],y=Ve[ae+z+4+$],ee=h*(1-Z)*(1-N)+p*Z*(1-N)+v*N*(1-Z)+y*Z*N,Je[ue++]=ee;return He}hermiteFastResize(e,t,n,s,a){const h=this.rcpScaleX,p=this.rcpScaleY,v=Math.ceil(h/2),y=Math.ceil(p/2),b=e.imageData.data,O=e.ctx.createImageData(s,a),F=O.data;for(let E=0;E<a;E++)for(let Z=0;Z<s;Z++){const N=4*(Z+E*s);let $=0,ee=0,ae=0,ue=0,xe=0,Ce=0,z=0;const Ve=(E+.5)*p;for(let He=Math.floor(E*p);He<(E+1)*p;He++){const Je=Math.abs(Ve-(He+.5))/y,ut=(Z+.5)*h,Ie=Je*Je;for(let Ke=Math.floor(Z*h);Ke<(Z+1)*h;Ke++){let dt=Math.abs(ut-(Ke+.5))/v;const ze=Math.sqrt(Ie+dt*dt);ze>1&&ze<-1||($=2*ze*ze*ze-3*ze*ze+1,$>0&&(dt=4*(Ke+He*t),z+=$*b[dt+3],ae+=$,b[dt+3]<255&&($=$*b[dt+3]/250),ue+=$*b[dt],xe+=$*b[dt+1],Ce+=$*b[dt+2],ee+=$))}}F[N]=ue/ee,F[N+1]=xe/ee,F[N+2]=Ce/ee,F[N+3]=z/ae}return O}}de(Rl,"type","Resize"),de(Rl,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),de(Rl,"uniformLocations",["uDelta","uTaps"]),ct.setClass(Rl);class Fl extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const a=t[s],h=t[s+1],p=t[s+2],v=Math.max(a,h,p);t[s]+=v!==a?(v-a)*n:0,t[s+1]+=v!==h?(v-h)*n:0,t[s+2]+=v!==p?(v-p)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}de(Fl,"type","Saturation"),de(Fl,"defaults",{saturation:0}),de(Fl,"uniformLocations",["uSaturation"]),ct.setClass(Fl);class Nl extends Fn{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const a=t[s],h=t[s+1],p=t[s+2],v=Math.max(a,h,p),y=(a+h+p)/3,b=2*Math.abs(v-y)/255*n;t[s]+=v!==a?(v-a)*b:0,t[s+1]+=v!==h?(v-h)*b:0,t[s+2]+=v!==p?(v-p)*b:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}de(Nl,"type","Vibrance"),de(Nl,"defaults",{vibrance:0}),de(Nl,"uniformLocations",["uVibrance"]),ct.setClass(Nl);var Xb=Object.freeze({__proto__:null,BaseFilter:Fn,BlackWhite:Vb,BlendColor:Cl,BlendImage:kl,Blur:Tl,Brightness:El,Brownie:Db,ColorMatrix:Ra,Composed:Id,Contrast:Ol,Convolute:Pl,Gamma:Al,Grayscale:Ml,HueRotation:jc,Invert:Il,Kodachrome:Fb,Noise:jl,Pixelate:Ll,Polaroid:Bb,RemoveColor:Dl,Resize:Rl,Saturation:Fl,Sepia:zb,Technicolor:Nb,Vibrance:Nl,Vintage:Rb});const Yb=Object.freeze(Object.defineProperty({__proto__:null,ActiveSelection:ta,BaseBrush:dh,BaseFabricObject:Ki,Canvas:Jl,Canvas2dFilterBackend:E_,CanvasDOMManager:d_,Circle:Ir,CircleBrush:x_,ClipPathLayout:Ed,Color:$t,Control:Mr,Ellipse:Ci,FabricImage:mr,FabricObject:Zn,FabricText:$n,FitContentLayout:qc,FixedLayout:Od,Gradient:Oi,Group:ur,IText:es,Image:mr,InteractiveFabricObject:Lo,Intersection:mn,LayoutManager:Do,LayoutStrategy:lu,Line:li,Object:Zn,Observable:nv,Path:Qi,Pattern:Xl,PatternBrush:b_,PencilBrush:Va,Point:Se,Polygon:ea,Polyline:ai,Rect:_r,Shadow:wr,SprayBrush:w_,StaticCanvas:Wo,StaticCanvasDOMManager:ep,Text:$n,Textbox:ts,Triangle:$i,WebGLFilterBackend:$l,cache:Oo,classRegistry:ct,config:Gt,controlsUtils:Tb,createCollectionMixin:qd,filters:Xb,getCSSRules:I_,getEnv:Mi,getFabricDocument:Ua,getFabricWindow:Ti,getFilterBackend:Ic,iMatrix:cr,initFilterBackend:O_,isPutImageFaster:Eb,isWebGLPipelineState:uu,loadSVGFromString:Ad,loadSVGFromURL:bb,parseAttributes:ss,parseFontDeclaration:Qv,parsePointsAttribute:C_,parseSVGDocument:mp,parseStyleAttribute:Jv,parseTransformAttribute:Ql,runningAnimations:Kl,setEnv:Ax,setFilterBackend:mb,util:kd,version:Rc},Symbol.toStringTag,{value:"Module"})),ia={namespace:"app",separator:".",trimKeys:!0,expiry:!0};function Gb(l){ia.namespace=l}function B_(l){ia.namespace=l}function qb(){return ia.namespace}function Kb(){return ia}function Zb(l){ia.separator=l}function ph(){return ia.separator}function Qb(l){return`${ia.namespace}${ia.separator}${l}`}const Jb="1.2.0";var _p={version:Jb,createNamespace:Gb,getCurrentNamespace:qb,switchNamespace:B_,get:Kb,setSeparator:Zb,getSeparator:ph,generateKey:Qb};function $b(l){l&&B_(l)}function e2(l){try{return JSON.parse(l)}catch{return l}}function z_(l){return l===void 0}function V_(l){return l===null||l==="null"}function t2(l,e){if(l===0)return"0 B";const t=1024,n=["B","KB","MB"],s=Math.floor(Math.log(l)/Math.log(t));return(l/Math.pow(t,s)).toFixed(2)+" "+(e?n[s]:"")}function n2(l,e,t){e=e.toUpperCase();let n="";switch(e){case"B":n=l.toFixed(2);break;case"KB":n=(l/1024).toFixed(2);break;case"MB":n=(l/(1024*1024)).toFixed(2);break;default:return console.warn(`Unsupported format "${e}" provided. Falling back to auto-formatting.`),t2(l,t)}return t?`${n} ${e}`:n}var eu={parse:e2,isUndefined:z_,isNull:V_,units:n2};function W_(l){return z_(l)||V_(l)}function r2(l,e=null){if(W_(l))return null;const t=_p.generateKey(l),n=this.storage.getItem(t);if(eu.isNull(n))return e;try{let s=eu.parse(n);return s.expire&&Date.now()>s.expire?(this.remove(l),e):s.value}catch{return e}}function i2(l,e,t={}){if(W_(l))return null;const n=_p.generateKey(l),{expire:s}=t;let a={value:e,...s?{expire:Date.now()+s}:{}};this.storage.setItem(n,JSON.stringify(a))}function s2(l){return!!this.get(l)}function a2(l){const e=this.get(l),t=_p.generateKey(l);return this.storage.removeItem(t),e}function o2(){return this.storage.clear()}function l2(l){return this.storage.key(l)}function u2(){const l=[];for(let e=0;e<this.storage.length;e++)l.push(this.storage.key(e));return l}function c2(l){return this.storage.get(l).trim()}function h2(l,e={}){const t=this.get(l);if(t===null)return 0;const n=new Blob([JSON.stringify(t)]).size;if(e.format){let s="unit"in e?e.unit:!0;return eu.units(n,e.format,s)}return n}function f2(l,e){const t=ph();for(let n in e)n in e&&this.set(`${l}${t}${n}`,e[n])}function d2(l){const e={},t=ph();for(let n=0,s=this.storage.length;n<s;n++){const a=this.key(n),[,h,p]=a.split(`${t}`,3);h===l&&p&&(e[p]=this.get(`${h}${t}${p}`))}return e}const p2=5*1024*1024;function g2(l={}){const e=l.capacity||p2,t=this.used(),n=e-t,s=n>0?n:0;if(l.format){let a="unit"in l?l.unit:!0;return eu.units(s,l.format,a)}return s}function m2(){let l=0;const e=ph();for(let t=0;t<this.count;t++){const n=this.key(t),[,s]=n.split(`${e}`,2),a=this.get(s);l+=new Blob([JSON.stringify(n)]).size,l+=new Blob([JSON.stringify(a)]).size}return l}const v2=5*1024*1024;function _2(l={}){const e=l.capacity||v2;if(l.format){let t="unit"in l?l.unit:!0;return eu.units(e,l.format,t)}return e}var y2={size:h2,free:g2,used:m2,capacity:_2,from:$b,get:r2,set:i2,has:s2,remove:a2,clear:o2,key:l2,keys:u2,trim:c2,getFormattedData:d2,setFormattedData:f2};function fm(l){return{storage:l,get count(){return l.length},...y2}}function dm(l){if(!l)throw new Error("Storage is not supported in this environment.");return l}const x2={local:fm(dm(window.localStorage)),session:fm(dm(window.sessionStorage))},pm=l=>{let e;const t=new Set,n=(y,b)=>{const O=typeof y=="function"?y(e):y;if(!Object.is(O,e)){const F=e;e=b??(typeof O!="object"||O===null)?O:Object.assign({},e,O),t.forEach(E=>E(e,F))}},s=()=>e,p={setState:n,getState:s,getInitialState:()=>v,subscribe:y=>(t.add(y),()=>t.delete(y))},v=e=l(n,s,p);return p},w2=(l=>l?pm(l):pm),b2=l=>l;function S2(l,e=b2){const t=ko.useSyncExternalStore(l.subscribe,ko.useCallback(()=>e(l.getState()),[l,e]),ko.useCallback(()=>e(l.getInitialState()),[l,e]));return ko.useDebugValue(t),t}const gm=l=>{const e=w2(l),t=n=>S2(e,n);return Object.assign(t,e),t},C2=(l=>l?gm(l):gm),k2="landscape",T2="A4",E2="Default",O2="freehand",P2={Default:{w:1024,h:600},Freehand:{w:1920,h:1080},A4:{w:794,h:1123},A5:{w:794,h:1123},Letter:{w:816,h:1056},Legal:{w:816,h:1344}},A2={bg:"#F2F6FA"};function mm(l,e){const t=kd.invertTransform(l.calcTransformMatrix());return kd.transformPoint(e,t)}function M2(l,e=0,t=1){return Math.max(e,Math.min(t,l))}function vm(l,e,t){const n=t.x-e.x,s=t.y-e.y,a=l.x-e.x,h=l.y-e.y,p=n*n+s*s;return p===0?0:M2((a*n+h*s)/p)}class U_{canvas;activeObj=null;start;end;line;stops=[];activeStop=null;gradientType="linear";getColor;constructor(e,t){this.canvas=e,this.getColor=t}enable(){this.canvas.on("mouse:down",this.onMouseDown)}disable(){this.canvas.off("mouse:down",this.onMouseDown),this.cleanup()}onMouseDown=e=>{const t=this.canvas.findTarget(e.e,!1);if(t&&!(t===this.start||t===this.end)){if(this.stops.includes(t)){this.setActiveStop(t);return}if(t===this.line){this.addStopFromEvent(e);return}this.attach(t)}};attach(e){this.cleanup(),this.activeObj=e;const t=e.getBoundingRect(!0,!0),n=this.getColor();this.start=this.createHandle(t.left,t.top+t.height/2),this.end=this.createHandle(t.left+t.width,t.top+t.height/2),this.line=new li([this.start.left,this.start.top,this.end.left,this.end.top],{stroke:"#6366f1",strokeWidth:1,selectable:!1,evented:!0,excludeFromExport:!0}),this.createStop(0,n),this.createStop(1,n),this.canvas.add(this.line,this.start,this.end,...this.stops),this.setActiveStop(this.stops[1]),this.update()}createHandle(e,t){const n=new Ir({left:e,top:t,radius:7,fill:"#111",originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return n.on("moving",this.update),n}createStop(e,t){const n=this.pointAt(e),s=new Ir({left:n.x,top:n.y,radius:6,fill:t,originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return s.offset=e,s.on("moving",()=>{const a=vm(new Se(s.left,s.top),new Se(this.start.left,this.start.top),new Se(this.end.left,this.end.top));s.offset=a;const h=this.pointAt(a);s.set({left:h.x,top:h.y}),this.update()}),s.on("mousedown",a=>{a.e.stopPropagation(),this.setActiveStop(s)}),s.on("mousedblclick",a=>{a.e.preventDefault(),this.removeStop(s)}),this.stops.push(s),s}removeStop(e){this.stops.length<=2||(this.canvas.remove(e),this.stops=this.stops.filter(t=>t!==e),this.activeStop===e&&(this.activeStop=this.stops[0]||null),this.update())}addStopFromEvent(e){const t=this.canvas.getPointer(e.e),n=vm(new Se(t.x,t.y),new Se(this.start.left,this.start.top),new Se(this.end.left,this.end.top)),s=this.createStop(n,this.getColor());this.canvas.add(s),this.setActiveStop(s),this.update()}setActiveStop(e){this.activeStop=e,this.stops.forEach(t=>t.set("stroke",t===e?"#000":void 0)),this.canvas.requestRenderAll()}updateActiveColor(e){this.activeStop&&(this.activeStop.set("fill",e),this.update())}toggleGradientType(){this.gradientType=this.gradientType==="linear"?"radial":"linear",this.update()}update=()=>{if(!this.activeObj)return;this.line.set({x1:this.start.left,y1:this.start.top,x2:this.end.left,y2:this.end.top}),this.stops.forEach(a=>{const h=this.pointAt(a.offset);a.set({left:h.x,top:h.y})});const e=mm(this.activeObj,new Se(this.start.left,this.start.top)),t=mm(this.activeObj,new Se(this.end.left,this.end.top)),n=this.stops.sort((a,h)=>a.offset-h.offset).map(a=>({offset:a.offset,color:a.fill})),s=this.gradientType==="linear"?new Oi({type:"linear",gradientUnits:"pixels",coords:{x1:e.x,y1:e.y,x2:t.x,y2:t.y},colorStops:n}):new Oi({type:"radial",gradientUnits:"pixels",coords:{x1:e.x,y1:e.y,r1:0,x2:t.x,y2:t.y,r2:Math.hypot(t.x-e.x,t.y-e.y)},colorStops:n});this.activeObj.set("fill",s),this.canvas.requestRenderAll()};pointAt(e){return{x:this.start.left+(this.end.left-this.start.left)*e,y:this.start.top+(this.end.top-this.start.top)*e}}cleanup(){this.canvas.remove(this.start,this.end,this.line,...this.stops),this.stops=[],this.activeStop=null,this.activeObj=null}syncFromObject(e){return!e.fill||!e.fill.type?(this.disable(),null):(this.gradientType=e.fill.type,this.gradientType)}}function I2(l,e){const t=l.canvas,n=l.getCenterPoint();e.scaleX*=l.scaleX,e.scaleY*=l.scaleY,l.scaleX=1,l.scaleY=1,l.remove(e),e.set({left:n.x,top:n.y,angle:l.angle,flipX:l.flipX,flipY:l.flipY,originX:"center",originY:"center"}),t.remove(l),t.add(e),t.setActiveObject(e),e.enterEditing(),e.selectAll(),e.setCoords(),t.requestRenderAll()}const j2=(l,e,t)=>({canvas:null,activeTool:"select",isPanning:!1,isDrawingMode:!1,freeDrawingBrush:null,activePanel:null,selectedObject:"textbox",showTextToolbar:!0,hasActiveShape:!1,geditor:null,hasMultipleSelection:()=>{const n=e().canvas;return n?n.getActiveObjects().length>1:!1},init:async n=>{if(e().canvas)return;const s=new Jl(n,{backgroundColor:A2.bg,preserveObjectStacking:!1});e().saveState(),l({canvas:s}),e().setPageFormat(O2,k2),e().enablePan(),e().setBrush();const a=new U_(s,()=>e().fill);l({geditor:a});const h=p=>{const v=p.target;l({hasActiveShape:!!v}),e().setToolbar(p),e().updateFromFabric(v)};s.on("selection:created",p=>h(p)),s.on("selection:updated",p=>h(p)),s.on("selection:cleared",()=>{e().clearToolbar()}),s.on("mouse:down",p=>h(p)),s.on("mouse:dblclick",p=>{const v=p.target;!v||v.type!=="group"||!v.__text||(console.log(v.__text),I2(v,v.__text),v.__text.on("changed",function(){const y=this.__group;if(!y)return;const b=y.__box;if(!b)return;const O=20;b.width=Math.max(this.width+O,b.width),b.height=Math.max(this.height+O,b.height),window.gradientEditor=a,y.setCoords(),s.requestRenderAll()}),v.__text.on("editing:exited",function(){const y=this.canvas,b=this.__group;if(!b)return;const O=this.getCenterPoint();this.scaleX/=b.scaleX||1,this.scaleY/=b.scaleY||1,b.add(this),b.set({left:O.x,top:O.y,angle:this.angle,flipX:this.flipX,flipY:this.flipY,scaleX:1,scaleY:1}),y.remove(this),y.add(b),y.setActiveObject(b),b.setCoords(),y.requestRenderAll()}))}),s.on("object:modified",p=>h(p))},init1:async n=>{if(e().canvas)return;const s=new Jl(n,{backgroundColor:"#fff",preserveObjectStacking:!1});e().saveState(),l({canvas:s}),e().enablePan(),e().setPageFormat(T2,E2),e().setBrush();const a=y=>{!y||e()._isRestoring||(e().updateFromFabric(y),e().saveState())},h=(y,b=!1)=>{y?.type==="textbox"?(l({selectedObject:y,showTextToolbar:!0,isEditingText:b}),e().syncFromObject(y)):l({selectedObject:"shape"})},p=()=>{l({selectedObject:null,showTextToolbar:!1,isEditingText:!1})};Object.entries({"object:removed":y=>a(y.target),"selection:created":y=>h(y.target),"selection:updated":y=>h(y.target),"selection:cleared":()=>p(),"mouse:down":y=>h(y.target),"path:created":y=>{const b=y.path;console.log("New path created:",b),e().updateFromFabric(b),e().saveState()}}).forEach(([y,b])=>{s.on(y,b)})},setCanvas:n=>{l({canvas:n}),n&&(n.freeDrawingBrush=new Va(n),n.freeDrawingBrush.color="#000",n.freeDrawingBrush.width=2,e().enablePan(),e().setPageFormat("Freehand","landscape"),n.on("path:created",()=>e().pushState()),n.on("object:added",s=>{const a=s.target||null;a&&(l({selectedObject:a}),e().syncFromObject(a))}),n.on("selection:created",s=>{const a=s.selected?.[0]||null;l({selectedObject:a}),e().syncFromObject(a)}),n.on("selection:updated",s=>{const a=s.selected?.[0]||null;l({selectedObject:a}),e().syncFromObject(a)}),n.on("selection:cleared",()=>{l({selectedObject:null}),e().syncFromObject(null)}),n.on("object:modified",s=>{const a=s.target||null;l({selectedObject:a}),e().syncFromObject(a)}),n.on("before:transform",s=>{s.target?.type==="textbox"&&l({showTextToolbar:!1})}),n.on("object:scaling",s=>{console.log("Scaling:",s.target?.type)}),n.on("after:transform",s=>{const a=s.target||null;a?.type==="textbox"&&(l({showTextToolbar:!0,selectedObject:a}),e().syncFromObject(a))}))},setSelectedObject:()=>{l({selectedObject:!1})},setActiveTool:n=>{const s=e().canvas;if(s){switch(l({activeTool:n}),n){case"pan":s.isDrawingMode=!1,s.defaultCursor="grab",s.selection=!1,s.skipTargetFind=!0;break;case"draw":console.log("here"),s.isDrawingMode=!0,s.freeDrawingBrush.color="#000";break;case"select":default:s.isDrawingMode=!1,s.defaultCursor="default",s.selection=!0,s.skipTargetFind=!1;break}s.requestRenderAll()}},enablePan:()=>{const n=e().canvas;n&&(console.log("Pan tool enabled"),n.on("mouse:wheel",s=>{const a=s.e;let h=n.getZoom();const p=Math.pow(.999,a.deltaY);h*=p,h=Math.min(Math.max(h,.1),5);const v=new Se(a.offsetX,a.offsetY);n.zoomToPoint(v,h),a.preventDefault(),a.stopPropagation()}),n.on("mouse:down",()=>{e().activeTool==="pan"&&(l({isPanning:!0}),n.setCursor("grabbing"),n.requestRenderAll())}),n.on("mouse:move",s=>{if(!e().isPanning)return;const a=s.e;n.relativePan(new Se(a.movementX,a.movementY)),n.requestRenderAll()}),n.on("mouse:up",()=>{e().isPanning&&(l({isPanning:!1}),n.setCursor("grab"),n.requestRenderAll())}))},syncFromObject:n=>{n&&l({fill:n.fill||"#ffffff",stroke:n.stroke||"#111827",strokeWidth:n.strokeWidth||2,strokeStyle:n.strokeDashArray?n.strokeDashArray[0]===10?"dashed":"dotted":"solid"})},updateTextStyle:n=>{const s=e().canvas,a=e().selectedObject;!s||!a||a.type!=="textbox"||(n.fontSize&&a.set("fontSize",n.fontSize),n.fill&&a.set("fill",n.fill),n.bold!==void 0&&a.set("fontWeight",n.bold?"bold":"normal"),n.italic!==void 0&&a.set("fontStyle",n.italic?"italic":"normal"),n.underline!==void 0&&a.set("underline",n.underline),s.renderAll(),e().pushState())},clearBoard:()=>{const n=e().canvas;n&&(x2.local.clear(),n.clear(),n.backgroundColor="#FFF",n.requestRenderAll())},clearToolbar:()=>{l({selectedObject:null,showTextToolbar:!1,isEditingText:!1,hasActiveShape:!1})},setToolbar:(n,s=!1)=>{const a=n.target;a?.type==="textbox"?(l({selectedObject:a,showTextToolbar:!0,isEditingText:s}),e().syncFromObject(a)):a?.customType==="shape"||n?.selected?.length>0||a?.type=="group"||a?.type=="activeselection"?l({selectedObject:"shape"}):l({selectedObject:null})}}),L2=(l,e,t)=>({toolbarPosition:"left",isFullScreen:!1,setToolbarPosition:n=>l({toolbarPosition:n}),toggleFullscreen:()=>{const n=document.documentElement;document.fullscreenElement?(document.exitFullscreen?.(),l({isFullScreen:!1})):(n.requestFullscreen?.(),l({isFullScreen:!0}))},zoomIn:()=>{const n=e().canvas;if(!n)return;const s=new Se(n.width/2,n.height/2),a=Math.min(n.getZoom()*1.1,5);n.zoomToPoint(s,a),n.requestRenderAll()},zoomOut:()=>{const n=e().canvas;if(!n)return;const s=new Se(n.width/2,n.height/2),a=Math.max(n.getZoom()/1.1,.1);n.zoomToPoint(s,a),n.requestRenderAll()},zoomFit:()=>{const n=e().canvas;if(!n)return;const s=n.getObjects().filter(ee=>ee.visible);if(s.length===0){const ee=n.viewportTransform,ae=1;ee[0]=ae,ee[3]=ae,ee[4]=0,ee[5]=0,n.setViewportTransform(ee),n.requestRenderAll();return}let a=1/0,h=1/0,p=-1/0,v=-1/0;s.forEach(ee=>{const ae=ee.getBoundingRect(!0,!0);a=Math.min(a,ae.left),h=Math.min(h,ae.top),p=Math.max(p,ae.left+ae.width),v=Math.max(v,ae.top+ae.height)});const y={left:a,top:h,width:p-a,height:v-h},b=20,O=n.width-b*2,F=n.height-b*2;let E=Math.min(O/y.width,F/y.height);E=Math.min(Math.max(E,.1),5);const Z=y.left+y.width/2,N=y.top+y.height/2,$=n.viewportTransform;$[0]=E,$[3]=E,$[4]=n.width/2-Z*E,$[5]=n.height/2-N*E,n.setViewportTransform($),n.requestRenderAll()}}),D2=(l,e,t)=>({layers:[],clipboard:null,setLayers:n=>l({layers:n}),addLayer:(n,s)=>{const a=e().layers||[],h=n.toObject().id||Date.now();l({layers:[...a,{id:h,type:s,object:n,name:s,visible:!0,locked:!1}]}),e().canvas?.requestRenderAll()},renameLayer:(n,s)=>{const a=e().layers.map(h=>(h.id===n&&(h.name=s),h));l({layers:a})},removeLayer:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();if(!s||s.length===0)return;const a=e().layers.filter(h=>!s.includes(h.object));l({layers:a}),s.forEach(h=>n.remove(h)),n.discardActiveObject(),n.requestRenderAll()},toggleVisibility:n=>{const s=e().layers.map(a=>(a.id===n&&(a.visible=!a.visible,a.object&&(a.object.visible=a.visible)),a));l({layers:s}),e().canvas?.requestRenderAll()},duplicateLayer:n=>{const s=e().layers.find(a=>a.id===n);s?.object&&s.object.clone(a=>{a.set({left:s.object.left+10,top:s.object.top+10,id:Date.now()}),e().canvas.add(a),e().canvas.setActiveObject(a),e().canvas.requestRenderAll();const h=e().layers;l({layers:[...h,{id:a.id,type:s.type,name:s.name+"_copy",object:a}]})})},toggleLayerLock:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObject();if(!s)return;const a=e().layers.map(h=>{if(h.object===s){const p=!h.locked;return s.selectable=!p,s.evented=!p,{...h,locked:p}}return h});console.log(e().layers),l({layers:a})},isActiveObjectLocked:()=>e().selectedObject?._locked===!0,toggleActiveObjectLock:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObject();if(!s)return;!s._locked?(s.lockMovementX=!0,s.lockMovementY=!0,s.lockScalingX=!0,s.lockScalingY=!0,s.lockRotation=!0,s.hasControls=!1,s._locked=!0):(s.lockMovementX=!1,s.lockMovementY=!1,s.lockScalingX=!1,s.lockScalingY=!1,s.lockRotation=!1,s.hasControls=!0,s._locked=!1),n.renderAll()},bringForward:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();if(!s.length)return;s.sort((h,p)=>n.getObjects().indexOf(h)-n.getObjects().indexOf(p)).forEach(h=>n.bringObjectForward(h)),n.requestRenderAll()},sendBackward:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();if(!s.length)return;s.sort((h,p)=>n.getObjects().indexOf(p)-n.getObjects().indexOf(h)).forEach(h=>n.sendObjectBackwards(h)),n.requestRenderAll()},bringToFront:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();if(!s.length)return;s.sort((h,p)=>n.getObjects().indexOf(h)-n.getObjects().indexOf(p)).forEach(h=>n.bringToFront(h)),n.requestRenderAll()},sendToBack:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();if(!s.length)return;s.sort((h,p)=>n.getObjects().indexOf(p)-n.getObjects().indexOf(h)).forEach(h=>n.sendToBack(h)),n.requestRenderAll()},deleteObject:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObjects();s&&(s.forEach(a=>n.remove(a)),n.discardActiveObject(),n.requestRenderAll())},groupLayers:n=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects();e().deleteObject();const h=new ur(a);s.add(h),s.requestRenderAll()},ungroupSelected:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObject();s&&(n.remove(s),n.add(...s.removeAll()),n.requestRenderAll())},groupLayers1:n=>{const s=e(),a="group-"+Date.now(),h={id:a,name:"Group",visible:!0,locked:!1,parentId:null},p=s.layers.map(v=>n.includes(v.id)?{...v,parentId:a}:v);l({layers:[...p,h]})},ungroupLayers1:n=>{const a=e().layers.map(h=>n.includes(h.id)&&h.children?.length?null:n.includes(h.parentId)?{...h,parentId:null}:h).filter(Boolean);l({layers:a})},alignLayers:(n,s)=>{const a=e();if(!s.length)return;const h=a.layers.filter(y=>s.includes(y.id));let p;switch(n){case"left":p=Math.min(...h.map(y=>y.x||0));break;case"center":p=Math.round(h.reduce((y,b)=>y+(b.x||0),0)/h.length);break;case"right":p=Math.max(...h.map(y=>(y.x||0)+(y.width||0)));break;default:return}const v=a.layers.map(y=>s.includes(y.id)?{...y,x:n==="right"?p-(y.width||0):p}:y);l({layers:v})},distributeLayers:(n,s)=>{const a=e(),h=a.layers.filter(p=>s.includes(p.id));if(!(h.length<3)){if(n==="horizontal"){const p=h.sort((F,E)=>(F.x||0)-(E.x||0)),v=p[0].x||0,b=((p[p.length-1].x||0)-v)/(p.length-1),O=a.layers.map(F=>{const E=p.findIndex(Z=>Z.id===F.id);return E>=0?{...F,x:v+b*E}:F});l({layers:O})}if(n==="vertical"){const p=h.sort((F,E)=>(F.y||0)-(E.y||0)),v=p[0].y||0,b=((p[p.length-1].y||0)-v)/(p.length-1),O=a.layers.map(F=>{const E=p.findIndex(Z=>Z.id===F.id);return E>=0?{...F,y:v+b*E}:F});l({layers:O})}}},copy:()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObject();s&&s.clone().then(a=>{l({clipboard:a})})},paste:async()=>{const n=e().canvas,s=e().clipboard;if(!n||!s)return;const a=await s.clone();n.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0,customType:"shape"}),a.type==="activeSelection"?(a.canvas=n,a.forEachObject(h=>n.add(h)),a.setCoords()):n.add(a),l({clipboard:a}),n.setActiveObject(a),n.requestRenderAll()},duplicate:async()=>{const n=e().canvas;if(!n)return;const s=n.getActiveObject();if(!s)return;const a=await s.clone();n.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0}),console.log(a.type),a.type==="activeselection"?(a.canvas=n,a.forEachObject(h=>n.add(h)),a.setCoords()):n.add(a),l({clipboard:a}),n.setActiveObject(a),n.requestRenderAll()},alignObjects:n=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects();if(!a||a.length<2)return;const h=a.map(N=>({o:N,box:N.getBoundingRect(!0,!0)})),p=Math.min(...h.map(N=>N.box.left)),v=Math.max(...h.map(N=>N.box.left+N.box.width)),y=Math.min(...h.map(N=>N.box.top)),b=Math.max(...h.map(N=>N.box.top+N.box.height)),O=v-p,F=b-y,E=(N,$)=>{const ee=N-$.box.left;$.o.set({left:$.o.left+ee})},Z=(N,$)=>{const ee=N-$.box.top;$.o.set({top:$.o.top+ee})};switch(console.log("key..",n),n){case"align-left":h.forEach(N=>E(p,N));break;case"align-hcenter":{const N=p+O/2;h.forEach($=>{const ee=N-$.box.width/2;E(ee,$)});break}case"align-right":h.forEach(N=>{const $=v-N.box.width;E($,N)});break;case"align-top":h.forEach(N=>Z(y,N));break;case"align-vcenter":{const N=y+F/2;h.forEach($=>{const ee=N-$.box.height/2;Z(ee,$)});break}case"align-bottom":h.forEach(N=>{const $=b-N.box.height;Z($,N)});break;case"distribute-h":{const N=[...h].sort((ue,xe)=>ue.box.left-xe.box.left);if(N.length<3)break;const $=N[0].box.left+N[0].box.width/2,ae=(N[N.length-1].box.left+N[N.length-1].box.width/2-$)/(N.length-1);N.forEach((ue,xe)=>{const z=$+ae*xe-ue.box.width/2;E(z,ue)});break}case"distribute-v":{const N=[...h].sort((ue,xe)=>ue.box.top-xe.box.top);if(N.length<3)break;const $=N[0].box.top+N[0].box.height/2,ae=(N[N.length-1].box.top+N[N.length-1].box.height/2-$)/(N.length-1);N.forEach((ue,xe)=>{const z=$+ae*xe-ue.box.height/2;Z(z,ue)});break}}a.forEach(N=>N.setCoords()),s.requestRenderAll()},distributeObjects:n=>{const{canvas:s}=e();if(!s)return;const a=s.getActiveObjects();if(a.length<3)return;n==="horizontal"?a.sort((v,y)=>v.left-y.left):a.sort((v,y)=>v.top-y.top);const h=a[0],p=a[a.length-1];if(n==="horizontal"){const y=(p.left-h.left-(h.getScaledWidth()+p.getScaledWidth())/2)/(a.length-1);a.forEach((b,O)=>{O!==0&&O!==a.length-1&&(b.set({left:h.left+O*y}),b.setCoords())})}else{const y=(p.top-h.top-(h.getScaledHeight()+p.getScaledHeight())/2)/(a.length-1);a.forEach((b,O)=>{O!==0&&O!==a.length-1&&(b.set({top:h.top+O*y}),b.setCoords())})}s.requestRenderAll()},canPaste(){return!!this.clipboard},isGroupSelected(){const n=e().canvas?.getActiveObject();return n?n.type==="group"||Array.isArray(n._objects):!1}}),R2=(l,e,t)=>({pageFormat:"Freehand",orientation:"landscape",zoom:1,scale:1,setPageFormat:(n,s="portrait")=>{l({pageFormat:n,orientation:s}),e().applyPageSize(n,s)},setOrientation:n=>{l({orientation:n}),e().applyPageSize(e().pageFormat,n)},setZoom:n=>{const s=e().canvas;s&&(s.setZoom(n),l({zoom:n}),e().drawBackground(),s.renderAll())},applyPageSize:(n=e().pageFormat,s=e().orientation)=>{const a=e().canvas;if(!a)return;if(String(n||"").toLowerCase()==="freehand"){a.setWidth(window.innerWidth*2),a.setHeight(window.innerHeight*2),a.setZoom(1),a.calcOffset(),a.renderAll(),l({scale:1,pageWidth:a.getWidth(),pageHeight:a.getHeight()});return}const{w:p,h:v}=P2[n],y=s==="portrait"?p:v,b=s==="portrait"?v:p,F=800/y;a.setWidth(y*F),a.setHeight(b*F),a.setZoom(F),a.calcOffset(),a.renderAll(),l({scale:F,pageWidth:y,pageHeight:b}),e().drawBackground()}}),gh=()=>Yb,F2=({get:l})=>{const e=gh(),t=Math.max(2,l().gridSize),n=Math.max(1,l().gridMajorEvery),s=t*n,a=document.createElement("canvas");a.width=a.height=s;const h=a.getContext("2d");if(!h)return null;const p=(v,y,b,O,F,E)=>{h.beginPath(),h.moveTo(v+.5,y+.5),h.lineTo(b+.5,O+.5),h.lineWidth=F,h.strokeStyle=E,h.stroke()};for(let v=1;v<n;v++){const y=v*t;p(y,0,y,s,l().gridLineWidth,l().gridColor),p(0,y,s,y,l().gridLineWidth,l().gridColor)}return p(s-1,0,s-1,s,l().gridMajorLineWidth,l().gridMajorColor),p(0,s-1,s,s-1,l().gridMajorLineWidth,l().gridMajorColor),new e.Pattern({source:a,repeat:"repeat"})},N2=({get:l})=>{const e=gh(),t=Math.max(2,l().ruledLineHeight),n=document.createElement("canvas");n.width=2,n.height=t;const s=n.getContext("2d");return s?(s.beginPath(),s.moveTo(0,t-1+.5),s.lineTo(n.width,t-1+.5),s.lineWidth=l().ruledLineWidth,s.strokeStyle=l().ruledColor,s.stroke(),new e.Pattern({source:n,repeat:"repeat"})):null},B2=({get:l})=>{const e=gh(),t=Math.max(6,l().gridSize),n=document.createElement("canvas");n.width=n.height=t;const s=n.getContext("2d");return s?(s.beginPath(),s.arc(1,1,1,0,Math.PI*2),s.fillStyle=l().gridColor,s.fill(),new e.Pattern({source:n,repeat:"repeat"})):null},z2=({get:l})=>{const e=gh(),t=Math.max(16,l().gridSize*2),n=document.createElement("canvas");n.width=n.height=t;const s=n.getContext("2d");return s?(s.strokeStyle=l().gridColor,s.lineWidth=1,s.beginPath(),s.moveTo(0,t),s.lineTo(t/2,0),s.lineTo(t,t),s.stroke(),new e.Pattern({source:n,repeat:"repeat"})):null},V2={none:null,grid:F2,ruled:N2,dots:B2,isometric:z2},W2=(l,e,t)=>({backgroundStyle:"none",gridSize:20,gridColor:"#e0e0e0",gridMajorEvery:5,gridMajorColor:"#bdbdbd",gridLineWidth:1,gridMajorLineWidth:1,ruledLineHeight:24,ruledColor:"#c0d6ff",ruledLineWidth:1,setBackgroundStyle:n=>{l({backgroundStyle:n}),e().drawBackground()},toggleGrid:()=>{const n=e().backgroundStyle==="grid"?"none":"grid";l({backgroundStyle:n}),e().drawBackground()},setGridOptions:n=>{l(n),e().drawBackground()},setRuledOptions:n=>{l(n),e().drawBackground()},drawBackground:()=>{const n=e().canvas;if(!n)return;const s=e().backgroundStyle,a=V2[s];if(!a){n.backgroundColor=null,n.requestRenderAll();return}const h=a({get:e});n.backgroundColor=h||null,n.requestRenderAll()}}),U2=[{id:"newfile",description:"New File",shortcut:["Meta+n","Ctrl+n"],handler:({get:l,set:e})=>{const{clearBoard:t}=l();t()}},{id:"copy",description:"Copy selected object",shortcut:["Meta+c","Ctrl+c"],handler:({get:l,set:e})=>{const{copy:t}=l();t()}},{id:"paste",description:"Paste object",shortcut:["Meta+v","Ctrl+v"],handler:({get:l,set:e})=>{const{paste:t}=l();t()}},{id:"duplicate",description:"Duplicate object",shortcut:["Meta+D","Ctrl+D"],handler:({get:l,set:e})=>{const{duplicate:t}=l();t()}},{id:"delete",description:"Delete selected object",shortcut:["Delete","Backspace"],handler:({get:l,set:e})=>{const{removeLayer:t}=l();t()}},{id:"group",description:"Group selected object",shortcut:["Meta+G","Ctrl+G"],handler:({get:l,set:e})=>{const{groupLayers:t}=l();t()}},{id:"ungroup",description:"Ungroup selected object",shortcut:["Meta+Shift+U","Ctrl+Shift+U"],handler:({get:l,set:e})=>{const{ungroupSelected:t}=l();t()}},{id:"undo",description:"Undo",shortcut:["Meta+Z","Ctrl+Z"],handler:({get:l,set:e})=>{const{undo:t}=l();t()}},{id:"redo",description:"Redo",shortcut:["Meta+Shift+Z","Ctrl+Y"],handler:({get:l,set:e})=>{const{redo:t}=l();t()}}],H2=(l,e,t)=>({commands:U2.map(s=>({...s,handler:()=>s.handler({get:e,set:l})})),runCommand:s=>{const a=e().commands.find(h=>h.id===s);a&&a.handler()}}),X2=(l,e,t)=>({brush:"pencil",width:4,color:"#000",cursor:"crosshair",setBrush:(n={})=>{const s=e().canvas;if(!s)return;const a={pencil:()=>new Va(s),circle:()=>new x_(s),spray:()=>new w_(s),pattern:()=>new b_(s),eraser:()=>new(void 0)(s)},h=n?.brush??e().brush,p=a[h]?a[h]():a.pencil(),v=n?.color??e().color,y=n?.width??e().width,b=n.cursor??"url('/pencil.svg') 0 32, crosshair";p.color=v,p.width=y,s.freeDrawingBrush=p,s.freeDrawingCursor=b,l({brush:h,color:v,width:y,cursor:b}),s.renderAll()},setBrushWidth:(n={})=>{const s=e().canvas;if(!s)return;console.log(n);const a=n?.width??e().width;s.freeDrawingBrush.width=a,l({width:a})},setBrushColor:(n={})=>{const s=e().canvas;if(!s)return;console.log(n);const a=n?.color??e().color;s.freeDrawingBrush.color=a,l({color:a})}});var H_={inherit:"inherit",current:"currentcolor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"oklch(98.4% 0.003 247.858)",100:"oklch(96.8% 0.007 247.896)",200:"oklch(92.9% 0.013 255.508)",300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)",700:"oklch(37.2% 0.044 257.287)",800:"oklch(27.9% 0.041 260.031)",900:"oklch(20.8% 0.042 265.755)",950:"oklch(12.9% 0.042 264.695)"},gray:{50:"oklch(98.5% 0.002 247.839)",100:"oklch(96.7% 0.003 264.542)",200:"oklch(92.8% 0.006 264.531)",300:"oklch(87.2% 0.01 258.338)",400:"oklch(70.7% 0.022 261.325)",500:"oklch(55.1% 0.027 264.364)",600:"oklch(44.6% 0.03 256.802)",700:"oklch(37.3% 0.034 259.733)",800:"oklch(27.8% 0.033 256.848)",900:"oklch(21% 0.034 264.665)",950:"oklch(13% 0.028 261.692)"},zinc:{50:"oklch(98.5% 0 0)",100:"oklch(96.7% 0.001 286.375)",200:"oklch(92% 0.004 286.32)",300:"oklch(87.1% 0.006 286.286)",400:"oklch(70.5% 0.015 286.067)",500:"oklch(55.2% 0.016 285.938)",600:"oklch(44.2% 0.017 285.786)",700:"oklch(37% 0.013 285.805)",800:"oklch(27.4% 0.006 286.033)",900:"oklch(21% 0.006 285.885)",950:"oklch(14.1% 0.005 285.823)"},neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},stone:{50:"oklch(98.5% 0.001 106.423)",100:"oklch(97% 0.001 106.424)",200:"oklch(92.3% 0.003 48.717)",300:"oklch(86.9% 0.005 56.366)",400:"oklch(70.9% 0.01 56.259)",500:"oklch(55.3% 0.013 58.071)",600:"oklch(44.4% 0.011 73.639)",700:"oklch(37.4% 0.01 67.558)",800:"oklch(26.8% 0.007 34.298)",900:"oklch(21.6% 0.006 56.043)",950:"oklch(14.7% 0.004 49.25)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},orange:{50:"oklch(98% 0.016 73.684)",100:"oklch(95.4% 0.038 75.164)",200:"oklch(90.1% 0.076 70.697)",300:"oklch(83.7% 0.128 66.29)",400:"oklch(75% 0.183 55.934)",500:"oklch(70.5% 0.213 47.604)",600:"oklch(64.6% 0.222 41.116)",700:"oklch(55.3% 0.195 38.402)",800:"oklch(47% 0.157 37.304)",900:"oklch(40.8% 0.123 38.172)",950:"oklch(26.6% 0.079 36.259)"},amber:{50:"oklch(98.7% 0.022 95.277)",100:"oklch(96.2% 0.059 95.617)",200:"oklch(92.4% 0.12 95.746)",300:"oklch(87.9% 0.169 91.605)",400:"oklch(82.8% 0.189 84.429)",500:"oklch(76.9% 0.188 70.08)",600:"oklch(66.6% 0.179 58.318)",700:"oklch(55.5% 0.163 48.998)",800:"oklch(47.3% 0.137 46.201)",900:"oklch(41.4% 0.112 45.904)",950:"oklch(27.9% 0.077 45.635)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},lime:{50:"oklch(98.6% 0.031 120.757)",100:"oklch(96.7% 0.067 122.328)",200:"oklch(93.8% 0.127 124.321)",300:"oklch(89.7% 0.196 126.665)",400:"oklch(84.1% 0.238 128.85)",500:"oklch(76.8% 0.233 130.85)",600:"oklch(64.8% 0.2 131.684)",700:"oklch(53.2% 0.157 131.589)",800:"oklch(45.3% 0.124 130.933)",900:"oklch(40.5% 0.101 131.063)",950:"oklch(27.4% 0.072 132.109)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},emerald:{50:"oklch(97.9% 0.021 166.113)",100:"oklch(95% 0.052 163.051)",200:"oklch(90.5% 0.093 164.15)",300:"oklch(84.5% 0.143 164.978)",400:"oklch(76.5% 0.177 163.223)",500:"oklch(69.6% 0.17 162.48)",600:"oklch(59.6% 0.145 163.225)",700:"oklch(50.8% 0.118 165.612)",800:"oklch(43.2% 0.095 166.913)",900:"oklch(37.8% 0.077 168.94)",950:"oklch(26.2% 0.051 172.552)"},teal:{50:"oklch(98.4% 0.014 180.72)",100:"oklch(95.3% 0.051 180.801)",200:"oklch(91% 0.096 180.426)",300:"oklch(85.5% 0.138 181.071)",400:"oklch(77.7% 0.152 181.912)",500:"oklch(70.4% 0.14 182.503)",600:"oklch(60% 0.118 184.704)",700:"oklch(51.1% 0.096 186.391)",800:"oklch(43.7% 0.078 188.216)",900:"oklch(38.6% 0.063 188.416)",950:"oklch(27.7% 0.046 192.524)"},cyan:{50:"oklch(98.4% 0.019 200.873)",100:"oklch(95.6% 0.045 203.388)",200:"oklch(91.7% 0.08 205.041)",300:"oklch(86.5% 0.127 207.078)",400:"oklch(78.9% 0.154 211.53)",500:"oklch(71.5% 0.143 215.221)",600:"oklch(60.9% 0.126 221.723)",700:"oklch(52% 0.105 223.128)",800:"oklch(45% 0.085 224.283)",900:"oklch(39.8% 0.07 227.392)",950:"oklch(30.2% 0.056 229.695)"},sky:{50:"oklch(97.7% 0.013 236.62)",100:"oklch(95.1% 0.026 236.824)",200:"oklch(90.1% 0.058 230.902)",300:"oklch(82.8% 0.111 230.318)",400:"oklch(74.6% 0.16 232.661)",500:"oklch(68.5% 0.169 237.323)",600:"oklch(58.8% 0.158 241.966)",700:"oklch(50% 0.134 242.749)",800:"oklch(44.3% 0.11 240.79)",900:"oklch(39.1% 0.09 240.876)",950:"oklch(29.3% 0.066 243.157)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"},indigo:{50:"oklch(96.2% 0.018 272.314)",100:"oklch(93% 0.034 272.788)",200:"oklch(87% 0.065 274.039)",300:"oklch(78.5% 0.115 274.713)",400:"oklch(67.3% 0.182 276.935)",500:"oklch(58.5% 0.233 277.117)",600:"oklch(51.1% 0.262 276.966)",700:"oklch(45.7% 0.24 277.023)",800:"oklch(39.8% 0.195 277.366)",900:"oklch(35.9% 0.144 278.697)",950:"oklch(25.7% 0.09 281.288)"},violet:{50:"oklch(96.9% 0.016 293.756)",100:"oklch(94.3% 0.029 294.588)",200:"oklch(89.4% 0.057 293.283)",300:"oklch(81.1% 0.111 293.571)",400:"oklch(70.2% 0.183 293.541)",500:"oklch(60.6% 0.25 292.717)",600:"oklch(54.1% 0.281 293.009)",700:"oklch(49.1% 0.27 292.581)",800:"oklch(43.2% 0.232 292.759)",900:"oklch(38% 0.189 293.745)",950:"oklch(28.3% 0.141 291.089)"},purple:{50:"oklch(97.7% 0.014 308.299)",100:"oklch(94.6% 0.033 307.174)",200:"oklch(90.2% 0.063 306.703)",300:"oklch(82.7% 0.119 306.383)",400:"oklch(71.4% 0.203 305.504)",500:"oklch(62.7% 0.265 303.9)",600:"oklch(55.8% 0.288 302.321)",700:"oklch(49.6% 0.265 301.924)",800:"oklch(43.8% 0.218 303.724)",900:"oklch(38.1% 0.176 304.987)",950:"oklch(29.1% 0.149 302.717)"},fuchsia:{50:"oklch(97.7% 0.017 320.058)",100:"oklch(95.2% 0.037 318.852)",200:"oklch(90.3% 0.076 319.62)",300:"oklch(83.3% 0.145 321.434)",400:"oklch(74% 0.238 322.16)",500:"oklch(66.7% 0.295 322.15)",600:"oklch(59.1% 0.293 322.896)",700:"oklch(51.8% 0.253 323.949)",800:"oklch(45.2% 0.211 324.591)",900:"oklch(40.1% 0.17 325.612)",950:"oklch(29.3% 0.136 325.661)"},pink:{50:"oklch(97.1% 0.014 343.198)",100:"oklch(94.8% 0.028 342.258)",200:"oklch(89.9% 0.061 343.231)",300:"oklch(82.3% 0.12 346.018)",400:"oklch(71.8% 0.202 349.761)",500:"oklch(65.6% 0.241 354.308)",600:"oklch(59.2% 0.249 0.584)",700:"oklch(52.5% 0.223 3.958)",800:"oklch(45.9% 0.187 3.815)",900:"oklch(40.8% 0.153 2.432)",950:"oklch(28.4% 0.109 3.907)"},rose:{50:"oklch(96.9% 0.015 12.422)",100:"oklch(94.1% 0.03 12.58)",200:"oklch(89.2% 0.058 10.001)",300:"oklch(81% 0.117 11.638)",400:"oklch(71.2% 0.194 13.428)",500:"oklch(64.5% 0.246 16.439)",600:"oklch(58.6% 0.253 17.585)",700:"oklch(51.4% 0.222 16.935)",800:"oklch(45.5% 0.188 13.697)",900:"oklch(41% 0.159 10.272)",950:"oklch(27.1% 0.105 12.094)"}};function Y2(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lc={exports:{}};const G2={},q2=Object.freeze(Object.defineProperty({__proto__:null,default:G2},Symbol.toStringTag,{value:"Module"})),_m=Vy(q2);var Bl={exports:{}},K2=Bl.exports,ym;function Z2(){return ym||(ym=1,(function(l,e){(function(t,n){n(e)})(K2,(function(t){var n=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],a="-----------------------------------------------------------------------------------------------------------------------------------------------------",h="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",p={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},v="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",y={5:v,"5module":v+" export import",6:v+" const class extends export import super"},b=/^in(stanceof)?$/,O=new RegExp("["+h+"]"),F=new RegExp("["+h+a+"]");function E(c,x){for(var D=65536,Y=0;Y<x.length;Y+=2){if(D+=x[Y],D>c)return!1;if(D+=x[Y+1],D>=c)return!0}return!1}function Z(c,x){return c<65?c===36:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&O.test(String.fromCharCode(c)):x===!1?!1:E(c,s)}function N(c,x){return c<48?c===36:c<58?!0:c<65?!1:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&F.test(String.fromCharCode(c)):x===!1?!1:E(c,s)||E(c,n)}var $=function(x,D){D===void 0&&(D={}),this.label=x,this.keyword=D.keyword,this.beforeExpr=!!D.beforeExpr,this.startsExpr=!!D.startsExpr,this.isLoop=!!D.isLoop,this.isAssign=!!D.isAssign,this.prefix=!!D.prefix,this.postfix=!!D.postfix,this.binop=D.binop||null,this.updateContext=null};function ee(c,x){return new $(c,{beforeExpr:!0,binop:x})}var ae={beforeExpr:!0},ue={startsExpr:!0},xe={};function Ce(c,x){return x===void 0&&(x={}),x.keyword=c,xe[c]=new $(c,x)}var z={num:new $("num",ue),regexp:new $("regexp",ue),string:new $("string",ue),name:new $("name",ue),privateId:new $("privateId",ue),eof:new $("eof"),bracketL:new $("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new $("]"),braceL:new $("{",{beforeExpr:!0,startsExpr:!0}),braceR:new $("}"),parenL:new $("(",{beforeExpr:!0,startsExpr:!0}),parenR:new $(")"),comma:new $(",",ae),semi:new $(";",ae),colon:new $(":",ae),dot:new $("."),question:new $("?",ae),questionDot:new $("?."),arrow:new $("=>",ae),template:new $("template"),invalidTemplate:new $("invalidTemplate"),ellipsis:new $("...",ae),backQuote:new $("`",ue),dollarBraceL:new $("${",{beforeExpr:!0,startsExpr:!0}),eq:new $("=",{beforeExpr:!0,isAssign:!0}),assign:new $("_=",{beforeExpr:!0,isAssign:!0}),incDec:new $("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new $("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ee("||",1),logicalAND:ee("&&",2),bitwiseOR:ee("|",3),bitwiseXOR:ee("^",4),bitwiseAND:ee("&",5),equality:ee("==/!=/===/!==",6),relational:ee("</>/<=/>=",7),bitShift:ee("<</>>/>>>",8),plusMin:new $("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ee("%",10),star:ee("*",10),slash:ee("/",10),starstar:new $("**",{beforeExpr:!0}),coalesce:ee("??",1),_break:Ce("break"),_case:Ce("case",ae),_catch:Ce("catch"),_continue:Ce("continue"),_debugger:Ce("debugger"),_default:Ce("default",ae),_do:Ce("do",{isLoop:!0,beforeExpr:!0}),_else:Ce("else",ae),_finally:Ce("finally"),_for:Ce("for",{isLoop:!0}),_function:Ce("function",ue),_if:Ce("if"),_return:Ce("return",ae),_switch:Ce("switch"),_throw:Ce("throw",ae),_try:Ce("try"),_var:Ce("var"),_const:Ce("const"),_while:Ce("while",{isLoop:!0}),_with:Ce("with"),_new:Ce("new",{beforeExpr:!0,startsExpr:!0}),_this:Ce("this",ue),_super:Ce("super",ue),_class:Ce("class",ue),_extends:Ce("extends",ae),_export:Ce("export"),_import:Ce("import",ue),_null:Ce("null",ue),_true:Ce("true",ue),_false:Ce("false",ue),_in:Ce("in",{beforeExpr:!0,binop:7}),_instanceof:Ce("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ce("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ce("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ce("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ve=/\r\n?|\n|\u2028|\u2029/,He=new RegExp(Ve.source,"g");function Je(c){return c===10||c===13||c===8232||c===8233}function ut(c,x,D){D===void 0&&(D=c.length);for(var Y=x;Y<D;Y++){var re=c.charCodeAt(Y);if(Je(re))return Y<D-1&&re===13&&c.charCodeAt(Y+1)===10?Y+2:Y+1}return-1}var Ie=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ke=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,dt=Object.prototype,ze=dt.hasOwnProperty,Bt=dt.toString,Le=Object.hasOwn||(function(c,x){return ze.call(c,x)}),wt=Array.isArray||(function(c){return Bt.call(c)==="[object Array]"}),Be=Object.create(null);function Xe(c){return Be[c]||(Be[c]=new RegExp("^(?:"+c.replace(/ /g,"|")+")$"))}function Ze(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}var we=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Fe=function(x,D){this.line=x,this.column=D};Fe.prototype.offset=function(x){return new Fe(this.line,this.column+x)};var _t=function(x,D,Y){this.start=D,this.end=Y,x.sourceFile!==null&&(this.source=x.sourceFile)};function Ct(c,x){for(var D=1,Y=0;;){var re=ut(c,Y,x);if(re<0)return new Fe(D,x-Y);++D,Y=re}}var pt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Mt=!1;function zt(c){var x={};for(var D in pt)x[D]=c&&Le(c,D)?c[D]:pt[D];if(x.ecmaVersion==="latest"?x.ecmaVersion=1e8:x.ecmaVersion==null?(!Mt&&typeof console=="object"&&console.warn&&(Mt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),x.ecmaVersion=11):x.ecmaVersion>=2015&&(x.ecmaVersion-=2009),x.allowReserved==null&&(x.allowReserved=x.ecmaVersion<5),(!c||c.allowHashBang==null)&&(x.allowHashBang=x.ecmaVersion>=14),wt(x.onToken)){var Y=x.onToken;x.onToken=function(re){return Y.push(re)}}return wt(x.onComment)&&(x.onComment=Ut(x,x.onComment)),x}function Ut(c,x){return function(D,Y,re,be,Oe,Ye){var nt={type:D?"Block":"Line",value:Y,start:re,end:be};c.locations&&(nt.loc=new _t(this,Oe,Ye)),c.ranges&&(nt.range=[re,be]),x.push(nt)}}var yt=1,At=2,en=4,oa=8,Rr=16,ks=32,Li=64,la=128,Fr=256,Di=512,Ri=yt|At|Fr;function qr(c,x){return At|(c?en:0)|(x?oa:0)}var tn=0,fi=1,Yt=2,Ts=3,Ft=4,r=5,u=function(x,D,Y){this.options=x=zt(x),this.sourceFile=x.sourceFile,this.keywords=Xe(y[x.ecmaVersion>=6?6:x.sourceType==="module"?"5module":5]);var re="";x.allowReserved!==!0&&(re=p[x.ecmaVersion>=6?6:x.ecmaVersion===5?5:3],x.sourceType==="module"&&(re+=" await")),this.reservedWords=Xe(re);var be=(re?re+" ":"")+p.strict;this.reservedWordsStrict=Xe(be),this.reservedWordsStrictBind=Xe(be+" "+p.strictBind),this.input=String(D),this.containsEsc=!1,Y?(this.pos=Y,this.lineStart=this.input.lastIndexOf(`
`,Y-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ve).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=x.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&x.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(yt),this.regexpState=null,this.privateNameStack=[]},f={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};u.prototype.parse=function(){var x=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(x)},f.inFunction.get=function(){return(this.currentVarScope().flags&At)>0},f.inGenerator.get=function(){return(this.currentVarScope().flags&oa)>0},f.inAsync.get=function(){return(this.currentVarScope().flags&en)>0},f.canAwait.get=function(){for(var c=this.scopeStack.length-1;c>=0;c--){var x=this.scopeStack[c],D=x.flags;if(D&(Fr|Di))return!1;if(D&At)return(D&en)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},f.allowSuper.get=function(){var c=this.currentThisScope(),x=c.flags;return(x&Li)>0||this.options.allowSuperOutsideMethod},f.allowDirectSuper.get=function(){return(this.currentThisScope().flags&la)>0},f.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},f.allowNewDotTarget.get=function(){for(var c=this.scopeStack.length-1;c>=0;c--){var x=this.scopeStack[c],D=x.flags;if(D&(Fr|Di)||D&At&&!(D&Rr))return!0}return!1},f.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Fr)>0},u.extend=function(){for(var x=[],D=arguments.length;D--;)x[D]=arguments[D];for(var Y=this,re=0;re<x.length;re++)Y=x[re](Y);return Y},u.parse=function(x,D){return new this(D,x).parse()},u.parseExpressionAt=function(x,D,Y){var re=new this(Y,x,D);return re.nextToken(),re.parseExpression()},u.tokenizer=function(x,D){return new this(D,x)},Object.defineProperties(u.prototype,f);var g=u.prototype,m=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;g.strictDirective=function(c){if(this.options.ecmaVersion<5)return!1;for(;;){Ke.lastIndex=c,c+=Ke.exec(this.input)[0].length;var x=m.exec(this.input.slice(c));if(!x)return!1;if((x[1]||x[2])==="use strict"){Ke.lastIndex=c+x[0].length;var D=Ke.exec(this.input),Y=D.index+D[0].length,re=this.input.charAt(Y);return re===";"||re==="}"||Ve.test(D[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(re)||re==="!"&&this.input.charAt(Y+1)==="=")}c+=x[0].length,Ke.lastIndex=c,c+=Ke.exec(this.input)[0].length,this.input[c]===";"&&c++}},g.eat=function(c){return this.type===c?(this.next(),!0):!1},g.isContextual=function(c){return this.type===z.name&&this.value===c&&!this.containsEsc},g.eatContextual=function(c){return this.isContextual(c)?(this.next(),!0):!1},g.expectContextual=function(c){this.eatContextual(c)||this.unexpected()},g.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||Ve.test(this.input.slice(this.lastTokEnd,this.start))},g.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},g.semicolon=function(){!this.eat(z.semi)&&!this.insertSemicolon()&&this.unexpected()},g.afterTrailingComma=function(c,x){if(this.type===c)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),x||this.next(),!0},g.expect=function(c){this.eat(c)||this.unexpected()},g.unexpected=function(c){this.raise(c??this.start,"Unexpected token")};var w=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};g.checkPatternErrors=function(c,x){if(c){c.trailingComma>-1&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element");var D=x?c.parenthesizedAssign:c.parenthesizedBind;D>-1&&this.raiseRecoverable(D,x?"Assigning to rvalue":"Parenthesized pattern")}},g.checkExpressionErrors=function(c,x){if(!c)return!1;var D=c.shorthandAssign,Y=c.doubleProto;if(!x)return D>=0||Y>=0;D>=0&&this.raise(D,"Shorthand property assignments are valid only in destructuring patterns"),Y>=0&&this.raiseRecoverable(Y,"Redefinition of __proto__ property")},g.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},g.isSimpleAssignTarget=function(c){return c.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(c.expression):c.type==="Identifier"||c.type==="MemberExpression"};var S=u.prototype;S.parseTopLevel=function(c){var x=Object.create(null);for(c.body||(c.body=[]);this.type!==z.eof;){var D=this.parseStatement(null,!0,x);c.body.push(D)}if(this.inModule)for(var Y=0,re=Object.keys(this.undefinedExports);Y<re.length;Y+=1){var be=re[Y];this.raiseRecoverable(this.undefinedExports[be].start,"Export '"+be+"' is not defined")}return this.adaptDirectivePrologue(c.body),this.next(),c.sourceType=this.options.sourceType,this.finishNode(c,"Program")};var C={kind:"loop"},T={kind:"switch"};S.isLet=function(c){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ke.lastIndex=this.pos;var x=Ke.exec(this.input),D=this.pos+x[0].length,Y=this.input.charCodeAt(D);if(Y===91||Y===92)return!0;if(c)return!1;if(Y===123||Y>55295&&Y<56320)return!0;if(Z(Y,!0)){for(var re=D+1;N(Y=this.input.charCodeAt(re),!0);)++re;if(Y===92||Y>55295&&Y<56320)return!0;var be=this.input.slice(D,re);if(!b.test(be))return!0}return!1},S.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ke.lastIndex=this.pos;var c=Ke.exec(this.input),x=this.pos+c[0].length,D;return!Ve.test(this.input.slice(this.pos,x))&&this.input.slice(x,x+8)==="function"&&(x+8===this.input.length||!(N(D=this.input.charCodeAt(x+8))||D>55295&&D<56320))},S.isUsingKeyword=function(c,x){if(this.options.ecmaVersion<17||!this.isContextual(c?"await":"using"))return!1;Ke.lastIndex=this.pos;var D=Ke.exec(this.input),Y=this.pos+D[0].length;if(Ve.test(this.input.slice(this.pos,Y)))return!1;if(c){var re=Y+5,be;if(this.input.slice(Y,re)!=="using"||re===this.input.length||N(be=this.input.charCodeAt(re))||be>55295&&be<56320)return!1;Ke.lastIndex=re;var Oe=Ke.exec(this.input);if(Oe&&Ve.test(this.input.slice(re,re+Oe[0].length)))return!1}if(x){var Ye=Y+2,nt;if(this.input.slice(Y,Ye)==="of"&&(Ye===this.input.length||!N(nt=this.input.charCodeAt(Ye))&&!(nt>55295&&nt<56320)))return!1}var Ot=this.input.charCodeAt(Y);return Z(Ot,!0)||Ot===92},S.isAwaitUsing=function(c){return this.isUsingKeyword(!0,c)},S.isUsing=function(c){return this.isUsingKeyword(!1,c)},S.parseStatement=function(c,x,D){var Y=this.type,re=this.startNode(),be;switch(this.isLet(c)&&(Y=z._var,be="let"),Y){case z._break:case z._continue:return this.parseBreakContinueStatement(re,Y.keyword);case z._debugger:return this.parseDebuggerStatement(re);case z._do:return this.parseDoStatement(re);case z._for:return this.parseForStatement(re);case z._function:return c&&(this.strict||c!=="if"&&c!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(re,!1,!c);case z._class:return c&&this.unexpected(),this.parseClass(re,!0);case z._if:return this.parseIfStatement(re);case z._return:return this.parseReturnStatement(re);case z._switch:return this.parseSwitchStatement(re);case z._throw:return this.parseThrowStatement(re);case z._try:return this.parseTryStatement(re);case z._const:case z._var:return be=be||this.value,c&&be!=="var"&&this.unexpected(),this.parseVarStatement(re,be);case z._while:return this.parseWhileStatement(re);case z._with:return this.parseWithStatement(re);case z.braceL:return this.parseBlock(!0,re);case z.semi:return this.parseEmptyStatement(re);case z._export:case z._import:if(this.options.ecmaVersion>10&&Y===z._import){Ke.lastIndex=this.pos;var Oe=Ke.exec(this.input),Ye=this.pos+Oe[0].length,nt=this.input.charCodeAt(Ye);if(nt===40||nt===46)return this.parseExpressionStatement(re,this.parseExpression())}return this.options.allowImportExportEverywhere||(x||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Y===z._import?this.parseImport(re):this.parseExport(re,D);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(re,!0,!c);var Ot=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(Ot)return x&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),Ot==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(re,!1,Ot),this.semicolon(),this.finishNode(re,"VariableDeclaration");var It=this.value,Kt=this.parseExpression();return Y===z.name&&Kt.type==="Identifier"&&this.eat(z.colon)?this.parseLabeledStatement(re,It,Kt,c):this.parseExpressionStatement(re,Kt)}},S.parseBreakContinueStatement=function(c,x){var D=x==="break";this.next(),this.eat(z.semi)||this.insertSemicolon()?c.label=null:this.type!==z.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var Y=0;Y<this.labels.length;++Y){var re=this.labels[Y];if((c.label==null||re.name===c.label.name)&&(re.kind!=null&&(D||re.kind==="loop")||c.label&&D))break}return Y===this.labels.length&&this.raise(c.start,"Unsyntactic "+x),this.finishNode(c,D?"BreakStatement":"ContinueStatement")},S.parseDebuggerStatement=function(c){return this.next(),this.semicolon(),this.finishNode(c,"DebuggerStatement")},S.parseDoStatement=function(c){return this.next(),this.labels.push(C),c.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),c.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(c,"DoWhileStatement")},S.parseForStatement=function(c){this.next();var x=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(C),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return x>-1&&this.unexpected(x),this.parseFor(c,null);var D=this.isLet();if(this.type===z._var||this.type===z._const||D){var Y=this.startNode(),re=D?"let":this.value;return this.next(),this.parseVar(Y,!0,re),this.finishNode(Y,"VariableDeclaration"),this.parseForAfterInit(c,Y,x)}var be=this.isContextual("let"),Oe=!1,Ye=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(Ye){var nt=this.startNode();return this.next(),Ye==="await using"&&this.next(),this.parseVar(nt,!0,Ye),this.finishNode(nt,"VariableDeclaration"),this.parseForAfterInit(c,nt,x)}var Ot=this.containsEsc,It=new w,Kt=this.start,cn=x>-1?this.parseExprSubscripts(It,"await"):this.parseExpression(!0,It);return this.type===z._in||(Oe=this.options.ecmaVersion>=6&&this.isContextual("of"))?(x>-1?(this.type===z._in&&this.unexpected(x),c.await=!0):Oe&&this.options.ecmaVersion>=8&&(cn.start===Kt&&!Ot&&cn.type==="Identifier"&&cn.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(c.await=!1)),be&&Oe&&this.raise(cn.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(cn,!1,It),this.checkLValPattern(cn),this.parseForIn(c,cn)):(this.checkExpressionErrors(It,!0),x>-1&&this.unexpected(x),this.parseFor(c,cn))},S.parseForAfterInit=function(c,x,D){return(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&x.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===z._in?D>-1&&this.unexpected(D):c.await=D>-1),this.parseForIn(c,x)):(D>-1&&this.unexpected(D),this.parseFor(c,x))},S.parseFunctionStatement=function(c,x,D){return this.next(),this.parseFunction(c,R|(D?0:B),!1,x)},S.parseIfStatement=function(c){return this.next(),c.test=this.parseParenExpression(),c.consequent=this.parseStatement("if"),c.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(c,"IfStatement")},S.parseReturnStatement=function(c){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon()),this.finishNode(c,"ReturnStatement")},S.parseSwitchStatement=function(c){this.next(),c.discriminant=this.parseParenExpression(),c.cases=[],this.expect(z.braceL),this.labels.push(T),this.enterScope(0);for(var x,D=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var Y=this.type===z._case;x&&this.finishNode(x,"SwitchCase"),c.cases.push(x=this.startNode()),x.consequent=[],this.next(),Y?x.test=this.parseExpression():(D&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),D=!0,x.test=null),this.expect(z.colon)}else x||this.unexpected(),x.consequent.push(this.parseStatement(null));return this.exitScope(),x&&this.finishNode(x,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(c,"SwitchStatement")},S.parseThrowStatement=function(c){return this.next(),Ve.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),c.argument=this.parseExpression(),this.semicolon(),this.finishNode(c,"ThrowStatement")};var P=[];S.parseCatchClauseParam=function(){var c=this.parseBindingAtom(),x=c.type==="Identifier";return this.enterScope(x?ks:0),this.checkLValPattern(c,x?Ft:Yt),this.expect(z.parenR),c},S.parseTryStatement=function(c){if(this.next(),c.block=this.parseBlock(),c.handler=null,this.type===z._catch){var x=this.startNode();this.next(),this.eat(z.parenL)?x.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),x.param=null,this.enterScope(0)),x.body=this.parseBlock(!1),this.exitScope(),c.handler=this.finishNode(x,"CatchClause")}return c.finalizer=this.eat(z._finally)?this.parseBlock():null,!c.handler&&!c.finalizer&&this.raise(c.start,"Missing catch or finally clause"),this.finishNode(c,"TryStatement")},S.parseVarStatement=function(c,x,D){return this.next(),this.parseVar(c,!1,x,D),this.semicolon(),this.finishNode(c,"VariableDeclaration")},S.parseWhileStatement=function(c){return this.next(),c.test=this.parseParenExpression(),this.labels.push(C),c.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(c,"WhileStatement")},S.parseWithStatement=function(c){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),c.object=this.parseParenExpression(),c.body=this.parseStatement("with"),this.finishNode(c,"WithStatement")},S.parseEmptyStatement=function(c){return this.next(),this.finishNode(c,"EmptyStatement")},S.parseLabeledStatement=function(c,x,D,Y){for(var re=0,be=this.labels;re<be.length;re+=1){var Oe=be[re];Oe.name===x&&this.raise(D.start,"Label '"+x+"' is already declared")}for(var Ye=this.type.isLoop?"loop":this.type===z._switch?"switch":null,nt=this.labels.length-1;nt>=0;nt--){var Ot=this.labels[nt];if(Ot.statementStart===c.start)Ot.statementStart=this.start,Ot.kind=Ye;else break}return this.labels.push({name:x,kind:Ye,statementStart:this.start}),c.body=this.parseStatement(Y?Y.indexOf("label")===-1?Y+"label":Y:"label"),this.labels.pop(),c.label=D,this.finishNode(c,"LabeledStatement")},S.parseExpressionStatement=function(c,x){return c.expression=x,this.semicolon(),this.finishNode(c,"ExpressionStatement")},S.parseBlock=function(c,x,D){for(c===void 0&&(c=!0),x===void 0&&(x=this.startNode()),x.body=[],this.expect(z.braceL),c&&this.enterScope(0);this.type!==z.braceR;){var Y=this.parseStatement(null);x.body.push(Y)}return D&&(this.strict=!1),this.next(),c&&this.exitScope(),this.finishNode(x,"BlockStatement")},S.parseFor=function(c,x){return c.init=x,this.expect(z.semi),c.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),c.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,"ForStatement")},S.parseForIn=function(c,x){var D=this.type===z._in;return this.next(),x.type==="VariableDeclaration"&&x.declarations[0].init!=null&&(!D||this.options.ecmaVersion<8||this.strict||x.kind!=="var"||x.declarations[0].id.type!=="Identifier")&&this.raise(x.start,(D?"for-in":"for-of")+" loop variable declaration may not have an initializer"),c.left=x,c.right=D?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,D?"ForInStatement":"ForOfStatement")},S.parseVar=function(c,x,D,Y){for(c.declarations=[],c.kind=D;;){var re=this.startNode();if(this.parseVarId(re,D),this.eat(z.eq)?re.init=this.parseMaybeAssign(x):!Y&&D==="const"&&!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!Y&&(D==="using"||D==="await using")&&this.options.ecmaVersion>=17&&this.type!==z._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+D+" declaration"):!Y&&re.id.type!=="Identifier"&&!(x&&(this.type===z._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):re.init=null,c.declarations.push(this.finishNode(re,"VariableDeclarator")),!this.eat(z.comma))break}return c},S.parseVarId=function(c,x){c.id=x==="using"||x==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(c.id,x==="var"?fi:Yt,!1)};var R=1,B=2,j=4;S.parseFunction=function(c,x,D,Y,re){this.initFunction(c),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Y)&&(this.type===z.star&&x&B&&this.unexpected(),c.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(c.async=!!Y),x&R&&(c.id=x&j&&this.type!==z.name?null:this.parseIdent(),c.id&&!(x&B)&&this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?fi:Yt:Ts));var be=this.yieldPos,Oe=this.awaitPos,Ye=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qr(c.async,c.generator)),x&R||(c.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(c),this.parseFunctionBody(c,D,!1,re),this.yieldPos=be,this.awaitPos=Oe,this.awaitIdentPos=Ye,this.finishNode(c,x&R?"FunctionDeclaration":"FunctionExpression")},S.parseFunctionParams=function(c){this.expect(z.parenL),c.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},S.parseClass=function(c,x){this.next();var D=this.strict;this.strict=!0,this.parseClassId(c,x),this.parseClassSuper(c);var Y=this.enterClassBody(),re=this.startNode(),be=!1;for(re.body=[],this.expect(z.braceL);this.type!==z.braceR;){var Oe=this.parseClassElement(c.superClass!==null);Oe&&(re.body.push(Oe),Oe.type==="MethodDefinition"&&Oe.kind==="constructor"?(be&&this.raiseRecoverable(Oe.start,"Duplicate constructor in the same class"),be=!0):Oe.key&&Oe.key.type==="PrivateIdentifier"&&I(Y,Oe)&&this.raiseRecoverable(Oe.key.start,"Identifier '#"+Oe.key.name+"' has already been declared"))}return this.strict=D,this.next(),c.body=this.finishNode(re,"ClassBody"),this.exitClassBody(),this.finishNode(c,x?"ClassDeclaration":"ClassExpression")},S.parseClassElement=function(c){if(this.eat(z.semi))return null;var x=this.options.ecmaVersion,D=this.startNode(),Y="",re=!1,be=!1,Oe="method",Ye=!1;if(this.eatContextual("static")){if(x>=13&&this.eat(z.braceL))return this.parseClassStaticBlock(D),D;this.isClassElementNameStart()||this.type===z.star?Ye=!0:Y="static"}if(D.static=Ye,!Y&&x>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===z.star)&&!this.canInsertSemicolon()?be=!0:Y="async"),!Y&&(x>=9||!be)&&this.eat(z.star)&&(re=!0),!Y&&!be&&!re){var nt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Oe=nt:Y=nt)}if(Y?(D.computed=!1,D.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),D.key.name=Y,this.finishNode(D.key,"Identifier")):this.parseClassElementName(D),x<13||this.type===z.parenL||Oe!=="method"||re||be){var Ot=!D.static&&G(D,"constructor"),It=Ot&&c;Ot&&Oe!=="method"&&this.raise(D.key.start,"Constructor can't have get/set modifier"),D.kind=Ot?"constructor":Oe,this.parseClassMethod(D,re,be,It)}else this.parseClassField(D);return D},S.isClassElementNameStart=function(){return this.type===z.name||this.type===z.privateId||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword},S.parseClassElementName=function(c){this.type===z.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)},S.parseClassMethod=function(c,x,D,Y){var re=c.key;c.kind==="constructor"?(x&&this.raise(re.start,"Constructor can't be a generator"),D&&this.raise(re.start,"Constructor can't be an async method")):c.static&&G(c,"prototype")&&this.raise(re.start,"Classes may not have a static property named prototype");var be=c.value=this.parseMethod(x,D,Y);return c.kind==="get"&&be.params.length!==0&&this.raiseRecoverable(be.start,"getter should have no params"),c.kind==="set"&&be.params.length!==1&&this.raiseRecoverable(be.start,"setter should have exactly one param"),c.kind==="set"&&be.params[0].type==="RestElement"&&this.raiseRecoverable(be.params[0].start,"Setter cannot use rest params"),this.finishNode(c,"MethodDefinition")},S.parseClassField=function(c){return G(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&G(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'"),this.eat(z.eq)?(this.enterScope(Di|Li),c.value=this.parseMaybeAssign(),this.exitScope()):c.value=null,this.semicolon(),this.finishNode(c,"PropertyDefinition")},S.parseClassStaticBlock=function(c){c.body=[];var x=this.labels;for(this.labels=[],this.enterScope(Fr|Li);this.type!==z.braceR;){var D=this.parseStatement(null);c.body.push(D)}return this.next(),this.exitScope(),this.labels=x,this.finishNode(c,"StaticBlock")},S.parseClassId=function(c,x){this.type===z.name?(c.id=this.parseIdent(),x&&this.checkLValSimple(c.id,Yt,!1)):(x===!0&&this.unexpected(),c.id=null)},S.parseClassSuper=function(c){c.superClass=this.eat(z._extends)?this.parseExprSubscripts(null,!1):null},S.enterClassBody=function(){var c={declared:Object.create(null),used:[]};return this.privateNameStack.push(c),c.declared},S.exitClassBody=function(){var c=this.privateNameStack.pop(),x=c.declared,D=c.used;if(this.options.checkPrivateFields)for(var Y=this.privateNameStack.length,re=Y===0?null:this.privateNameStack[Y-1],be=0;be<D.length;++be){var Oe=D[be];Le(x,Oe.name)||(re?re.used.push(Oe):this.raiseRecoverable(Oe.start,"Private field '#"+Oe.name+"' must be declared in an enclosing class"))}};function I(c,x){var D=x.key.name,Y=c[D],re="true";return x.type==="MethodDefinition"&&(x.kind==="get"||x.kind==="set")&&(re=(x.static?"s":"i")+x.kind),Y==="iget"&&re==="iset"||Y==="iset"&&re==="iget"||Y==="sget"&&re==="sset"||Y==="sset"&&re==="sget"?(c[D]="true",!1):Y?!0:(c[D]=re,!1)}function G(c,x){var D=c.computed,Y=c.key;return!D&&(Y.type==="Identifier"&&Y.name===x||Y.type==="Literal"&&Y.value===x)}S.parseExportAllDeclaration=function(c,x){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(c.exported=this.parseModuleExportName(),this.checkExport(x,c.exported,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==z.string&&this.unexpected(),c.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(c,"ExportAllDeclaration")},S.parseExport=function(c,x){if(this.next(),this.eat(z.star))return this.parseExportAllDeclaration(c,x);if(this.eat(z._default))return this.checkExport(x,"default",this.lastTokStart),c.declaration=this.parseExportDefaultDeclaration(),this.finishNode(c,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())c.declaration=this.parseExportDeclaration(c),c.declaration.type==="VariableDeclaration"?this.checkVariableExport(x,c.declaration.declarations):this.checkExport(x,c.declaration.id,c.declaration.id.start),c.specifiers=[],c.source=null,this.options.ecmaVersion>=16&&(c.attributes=[]);else{if(c.declaration=null,c.specifiers=this.parseExportSpecifiers(x),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),c.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause());else{for(var D=0,Y=c.specifiers;D<Y.length;D+=1){var re=Y[D];this.checkUnreserved(re.local),this.checkLocalExport(re.local),re.local.type==="Literal"&&this.raise(re.local.start,"A string literal cannot be used as an exported binding without `from`.")}c.source=null,this.options.ecmaVersion>=16&&(c.attributes=[])}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")},S.parseExportDeclaration=function(c){return this.parseStatement(null)},S.parseExportDefaultDeclaration=function(){var c;if(this.type===z._function||(c=this.isAsyncFunction())){var x=this.startNode();return this.next(),c&&this.next(),this.parseFunction(x,R|j,!1,c)}else if(this.type===z._class){var D=this.startNode();return this.parseClass(D,"nullableID")}else{var Y=this.parseMaybeAssign();return this.semicolon(),Y}},S.checkExport=function(c,x,D){c&&(typeof x!="string"&&(x=x.type==="Identifier"?x.name:x.value),Le(c,x)&&this.raiseRecoverable(D,"Duplicate export '"+x+"'"),c[x]=!0)},S.checkPatternExport=function(c,x){var D=x.type;if(D==="Identifier")this.checkExport(c,x,x.start);else if(D==="ObjectPattern")for(var Y=0,re=x.properties;Y<re.length;Y+=1){var be=re[Y];this.checkPatternExport(c,be)}else if(D==="ArrayPattern")for(var Oe=0,Ye=x.elements;Oe<Ye.length;Oe+=1){var nt=Ye[Oe];nt&&this.checkPatternExport(c,nt)}else D==="Property"?this.checkPatternExport(c,x.value):D==="AssignmentPattern"?this.checkPatternExport(c,x.left):D==="RestElement"&&this.checkPatternExport(c,x.argument)},S.checkVariableExport=function(c,x){if(c)for(var D=0,Y=x;D<Y.length;D+=1){var re=Y[D];this.checkPatternExport(c,re.id)}},S.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},S.parseExportSpecifier=function(c){var x=this.startNode();return x.local=this.parseModuleExportName(),x.exported=this.eatContextual("as")?this.parseModuleExportName():x.local,this.checkExport(c,x.exported,x.exported.start),this.finishNode(x,"ExportSpecifier")},S.parseExportSpecifiers=function(c){var x=[],D=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(D)D=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;x.push(this.parseExportSpecifier(c))}return x},S.parseImport=function(c){return this.next(),this.type===z.string?(c.specifiers=P,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(c,"ImportDeclaration")},S.parseImportSpecifier=function(){var c=this.startNode();return c.imported=this.parseModuleExportName(),this.eatContextual("as")?c.local=this.parseIdent():(this.checkUnreserved(c.imported),c.local=c.imported),this.checkLValSimple(c.local,Yt),this.finishNode(c,"ImportSpecifier")},S.parseImportDefaultSpecifier=function(){var c=this.startNode();return c.local=this.parseIdent(),this.checkLValSimple(c.local,Yt),this.finishNode(c,"ImportDefaultSpecifier")},S.parseImportNamespaceSpecifier=function(){var c=this.startNode();return this.next(),this.expectContextual("as"),c.local=this.parseIdent(),this.checkLValSimple(c.local,Yt),this.finishNode(c,"ImportNamespaceSpecifier")},S.parseImportSpecifiers=function(){var c=[],x=!0;if(this.type===z.name&&(c.push(this.parseImportDefaultSpecifier()),!this.eat(z.comma)))return c;if(this.type===z.star)return c.push(this.parseImportNamespaceSpecifier()),c;for(this.expect(z.braceL);!this.eat(z.braceR);){if(x)x=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;c.push(this.parseImportSpecifier())}return c},S.parseWithClause=function(){var c=[];if(!this.eat(z._with))return c;this.expect(z.braceL);for(var x={},D=!0;!this.eat(z.braceR);){if(D)D=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var Y=this.parseImportAttribute(),re=Y.key.type==="Identifier"?Y.key.name:Y.key.value;Le(x,re)&&this.raiseRecoverable(Y.key.start,"Duplicate attribute key '"+re+"'"),x[re]=!0,c.push(Y)}return c},S.parseImportAttribute=function(){var c=this.startNode();return c.key=this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(z.colon),this.type!==z.string&&this.unexpected(),c.value=this.parseExprAtom(),this.finishNode(c,"ImportAttribute")},S.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===z.string){var c=this.parseLiteral(this.value);return we.test(c.value)&&this.raise(c.start,"An export name cannot include a lone surrogate."),c}return this.parseIdent(!0)},S.adaptDirectivePrologue=function(c){for(var x=0;x<c.length&&this.isDirectiveCandidate(c[x]);++x)c[x].directive=c[x].expression.raw.slice(1,-1)},S.isDirectiveCandidate=function(c){return this.options.ecmaVersion>=5&&c.type==="ExpressionStatement"&&c.expression.type==="Literal"&&typeof c.expression.value=="string"&&(this.input[c.start]==='"'||this.input[c.start]==="'")};var V=u.prototype;V.toAssignable=function(c,x,D){if(this.options.ecmaVersion>=6&&c)switch(c.type){case"Identifier":this.inAsync&&c.name==="await"&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":c.type="ObjectPattern",D&&this.checkPatternErrors(D,!0);for(var Y=0,re=c.properties;Y<re.length;Y+=1){var be=re[Y];this.toAssignable(be,x),be.type==="RestElement"&&(be.argument.type==="ArrayPattern"||be.argument.type==="ObjectPattern")&&this.raise(be.argument.start,"Unexpected token")}break;case"Property":c.kind!=="init"&&this.raise(c.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(c.value,x);break;case"ArrayExpression":c.type="ArrayPattern",D&&this.checkPatternErrors(D,!0),this.toAssignableList(c.elements,x);break;case"SpreadElement":c.type="RestElement",this.toAssignable(c.argument,x),c.argument.type==="AssignmentPattern"&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":c.operator!=="="&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value."),c.type="AssignmentPattern",delete c.operator,this.toAssignable(c.left,x);break;case"ParenthesizedExpression":this.toAssignable(c.expression,x,D);break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!x)break;default:this.raise(c.start,"Assigning to rvalue")}else D&&this.checkPatternErrors(D,!0);return c},V.toAssignableList=function(c,x){for(var D=c.length,Y=0;Y<D;Y++){var re=c[Y];re&&this.toAssignable(re,x)}if(D){var be=c[D-1];this.options.ecmaVersion===6&&x&&be&&be.type==="RestElement"&&be.argument.type!=="Identifier"&&this.unexpected(be.argument.start)}return c},V.parseSpread=function(c){var x=this.startNode();return this.next(),x.argument=this.parseMaybeAssign(!1,c),this.finishNode(x,"SpreadElement")},V.parseRestBinding=function(){var c=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==z.name&&this.unexpected(),c.argument=this.parseBindingAtom(),this.finishNode(c,"RestElement")},V.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var c=this.startNode();return this.next(),c.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(c,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()},V.parseBindingList=function(c,x,D,Y){for(var re=[],be=!0;!this.eat(c);)if(be?be=!1:this.expect(z.comma),x&&this.type===z.comma)re.push(null);else{if(D&&this.afterTrailingComma(c))break;if(this.type===z.ellipsis){var Oe=this.parseRestBinding();this.parseBindingListItem(Oe),re.push(Oe),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(c);break}else re.push(this.parseAssignableListItem(Y))}return re},V.parseAssignableListItem=function(c){var x=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(x),x},V.parseBindingListItem=function(c){return c},V.parseMaybeDefault=function(c,x,D){if(D=D||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return D;var Y=this.startNodeAt(c,x);return Y.left=D,Y.right=this.parseMaybeAssign(),this.finishNode(Y,"AssignmentPattern")},V.checkLValSimple=function(c,x,D){x===void 0&&(x=tn);var Y=x!==tn;switch(c.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(Y?"Binding ":"Assigning to ")+c.name+" in strict mode"),Y&&(x===Yt&&c.name==="let"&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),D&&(Le(D,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),D[c.name]=!0),x!==r&&this.declareName(c.name,x,c.start));break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Y&&this.raiseRecoverable(c.start,"Binding member expression");break;case"ParenthesizedExpression":return Y&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,x,D);default:this.raise(c.start,(Y?"Binding":"Assigning to")+" rvalue")}},V.checkLValPattern=function(c,x,D){switch(x===void 0&&(x=tn),c.type){case"ObjectPattern":for(var Y=0,re=c.properties;Y<re.length;Y+=1){var be=re[Y];this.checkLValInnerPattern(be,x,D)}break;case"ArrayPattern":for(var Oe=0,Ye=c.elements;Oe<Ye.length;Oe+=1){var nt=Ye[Oe];nt&&this.checkLValInnerPattern(nt,x,D)}break;default:this.checkLValSimple(c,x,D)}},V.checkLValInnerPattern=function(c,x,D){switch(x===void 0&&(x=tn),c.type){case"Property":this.checkLValInnerPattern(c.value,x,D);break;case"AssignmentPattern":this.checkLValPattern(c.left,x,D);break;case"RestElement":this.checkLValPattern(c.argument,x,D);break;default:this.checkLValPattern(c,x,D)}};var H=function(x,D,Y,re,be){this.token=x,this.isExpr=!!D,this.preserveSpace=!!Y,this.override=re,this.generator=!!be},L={b_stat:new H("{",!1),b_expr:new H("{",!0),b_tmpl:new H("${",!1),p_stat:new H("(",!1),p_expr:new H("(",!0),q_tmpl:new H("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new H("function",!1),f_expr:new H("function",!0),f_expr_gen:new H("function",!0,!1,null,!0),f_gen:new H("function",!1,!1,null,!0)},U=u.prototype;U.initialContext=function(){return[L.b_stat]},U.curContext=function(){return this.context[this.context.length-1]},U.braceIsBlock=function(c){var x=this.curContext();return x===L.f_expr||x===L.f_stat?!0:c===z.colon&&(x===L.b_stat||x===L.b_expr)?!x.isExpr:c===z._return||c===z.name&&this.exprAllowed?Ve.test(this.input.slice(this.lastTokEnd,this.start)):c===z._else||c===z.semi||c===z.eof||c===z.parenR||c===z.arrow?!0:c===z.braceL?x===L.b_stat:c===z._var||c===z._const||c===z.name?!1:!this.exprAllowed},U.inGeneratorContext=function(){for(var c=this.context.length-1;c>=1;c--){var x=this.context[c];if(x.token==="function")return x.generator}return!1},U.updateContext=function(c){var x,D=this.type;D.keyword&&c===z.dot?this.exprAllowed=!1:(x=D.updateContext)?x.call(this,c):this.exprAllowed=D.beforeExpr},U.overrideContext=function(c){this.curContext()!==c&&(this.context[this.context.length-1]=c)},z.parenR.updateContext=z.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var c=this.context.pop();c===L.b_stat&&this.curContext().token==="function"&&(c=this.context.pop()),this.exprAllowed=!c.isExpr},z.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?L.b_stat:L.b_expr),this.exprAllowed=!0},z.dollarBraceL.updateContext=function(){this.context.push(L.b_tmpl),this.exprAllowed=!0},z.parenL.updateContext=function(c){var x=c===z._if||c===z._for||c===z._with||c===z._while;this.context.push(x?L.p_stat:L.p_expr),this.exprAllowed=!0},z.incDec.updateContext=function(){},z._function.updateContext=z._class.updateContext=function(c){c.beforeExpr&&c!==z._else&&!(c===z.semi&&this.curContext()!==L.p_stat)&&!(c===z._return&&Ve.test(this.input.slice(this.lastTokEnd,this.start)))&&!((c===z.colon||c===z.braceL)&&this.curContext()===L.b_stat)?this.context.push(L.f_expr):this.context.push(L.f_stat),this.exprAllowed=!1},z.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},z.backQuote.updateContext=function(){this.curContext()===L.q_tmpl?this.context.pop():this.context.push(L.q_tmpl),this.exprAllowed=!1},z.star.updateContext=function(c){if(c===z._function){var x=this.context.length-1;this.context[x]===L.f_expr?this.context[x]=L.f_expr_gen:this.context[x]=L.f_gen}this.exprAllowed=!0},z.name.updateContext=function(c){var x=!1;this.options.ecmaVersion>=6&&c!==z.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(x=!0),this.exprAllowed=x};var A=u.prototype;A.checkPropClash=function(c,x,D){if(!(this.options.ecmaVersion>=9&&c.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(c.computed||c.method||c.shorthand))){var Y=c.key,re;switch(Y.type){case"Identifier":re=Y.name;break;case"Literal":re=String(Y.value);break;default:return}var be=c.kind;if(this.options.ecmaVersion>=6){re==="__proto__"&&be==="init"&&(x.proto&&(D?D.doubleProto<0&&(D.doubleProto=Y.start):this.raiseRecoverable(Y.start,"Redefinition of __proto__ property")),x.proto=!0);return}re="$"+re;var Oe=x[re];if(Oe){var Ye;be==="init"?Ye=this.strict&&Oe.init||Oe.get||Oe.set:Ye=Oe.init||Oe[be],Ye&&this.raiseRecoverable(Y.start,"Redefinition of property")}else Oe=x[re]={init:!1,get:!1,set:!1};Oe[be]=!0}},A.parseExpression=function(c,x){var D=this.start,Y=this.startLoc,re=this.parseMaybeAssign(c,x);if(this.type===z.comma){var be=this.startNodeAt(D,Y);for(be.expressions=[re];this.eat(z.comma);)be.expressions.push(this.parseMaybeAssign(c,x));return this.finishNode(be,"SequenceExpression")}return re},A.parseMaybeAssign=function(c,x,D){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var Y=!1,re=-1,be=-1,Oe=-1;x?(re=x.parenthesizedAssign,be=x.trailingComma,Oe=x.doubleProto,x.parenthesizedAssign=x.trailingComma=-1):(x=new w,Y=!0);var Ye=this.start,nt=this.startLoc;(this.type===z.parenL||this.type===z.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=c==="await");var Ot=this.parseMaybeConditional(c,x);if(D&&(Ot=D.call(this,Ot,Ye,nt)),this.type.isAssign){var It=this.startNodeAt(Ye,nt);return It.operator=this.value,this.type===z.eq&&(Ot=this.toAssignable(Ot,!1,x)),Y||(x.parenthesizedAssign=x.trailingComma=x.doubleProto=-1),x.shorthandAssign>=Ot.start&&(x.shorthandAssign=-1),this.type===z.eq?this.checkLValPattern(Ot):this.checkLValSimple(Ot),It.left=Ot,this.next(),It.right=this.parseMaybeAssign(c),Oe>-1&&(x.doubleProto=Oe),this.finishNode(It,"AssignmentExpression")}else Y&&this.checkExpressionErrors(x,!0);return re>-1&&(x.parenthesizedAssign=re),be>-1&&(x.trailingComma=be),Ot},A.parseMaybeConditional=function(c,x){var D=this.start,Y=this.startLoc,re=this.parseExprOps(c,x);if(this.checkExpressionErrors(x))return re;if(this.eat(z.question)){var be=this.startNodeAt(D,Y);return be.test=re,be.consequent=this.parseMaybeAssign(),this.expect(z.colon),be.alternate=this.parseMaybeAssign(c),this.finishNode(be,"ConditionalExpression")}return re},A.parseExprOps=function(c,x){var D=this.start,Y=this.startLoc,re=this.parseMaybeUnary(x,!1,!1,c);return this.checkExpressionErrors(x)||re.start===D&&re.type==="ArrowFunctionExpression"?re:this.parseExprOp(re,D,Y,-1,c)},A.parseExprOp=function(c,x,D,Y,re){var be=this.type.binop;if(be!=null&&(!re||this.type!==z._in)&&be>Y){var Oe=this.type===z.logicalOR||this.type===z.logicalAND,Ye=this.type===z.coalesce;Ye&&(be=z.logicalAND.binop);var nt=this.value;this.next();var Ot=this.start,It=this.startLoc,Kt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,re),Ot,It,be,re),cn=this.buildBinary(x,D,c,Kt,nt,Oe||Ye);return(Oe&&this.type===z.coalesce||Ye&&(this.type===z.logicalOR||this.type===z.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(cn,x,D,Y,re)}return c},A.buildBinary=function(c,x,D,Y,re,be){Y.type==="PrivateIdentifier"&&this.raise(Y.start,"Private identifier can only be left side of binary expression");var Oe=this.startNodeAt(c,x);return Oe.left=D,Oe.operator=re,Oe.right=Y,this.finishNode(Oe,be?"LogicalExpression":"BinaryExpression")},A.parseMaybeUnary=function(c,x,D,Y){var re=this.start,be=this.startLoc,Oe;if(this.isContextual("await")&&this.canAwait)Oe=this.parseAwait(Y),x=!0;else if(this.type.prefix){var Ye=this.startNode(),nt=this.type===z.incDec;Ye.operator=this.value,Ye.prefix=!0,this.next(),Ye.argument=this.parseMaybeUnary(null,!0,nt,Y),this.checkExpressionErrors(c,!0),nt?this.checkLValSimple(Ye.argument):this.strict&&Ye.operator==="delete"&&W(Ye.argument)?this.raiseRecoverable(Ye.start,"Deleting local variable in strict mode"):Ye.operator==="delete"&&q(Ye.argument)?this.raiseRecoverable(Ye.start,"Private fields can not be deleted"):x=!0,Oe=this.finishNode(Ye,nt?"UpdateExpression":"UnaryExpression")}else if(!x&&this.type===z.privateId)(Y||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Oe=this.parsePrivateIdent(),this.type!==z._in&&this.unexpected();else{if(Oe=this.parseExprSubscripts(c,Y),this.checkExpressionErrors(c))return Oe;for(;this.type.postfix&&!this.canInsertSemicolon();){var Ot=this.startNodeAt(re,be);Ot.operator=this.value,Ot.prefix=!1,Ot.argument=Oe,this.checkLValSimple(Oe),this.next(),Oe=this.finishNode(Ot,"UpdateExpression")}}if(!D&&this.eat(z.starstar))if(x)this.unexpected(this.lastTokStart);else return this.buildBinary(re,be,Oe,this.parseMaybeUnary(null,!1,!1,Y),"**",!1);else return Oe};function W(c){return c.type==="Identifier"||c.type==="ParenthesizedExpression"&&W(c.expression)}function q(c){return c.type==="MemberExpression"&&c.property.type==="PrivateIdentifier"||c.type==="ChainExpression"&&q(c.expression)||c.type==="ParenthesizedExpression"&&q(c.expression)}A.parseExprSubscripts=function(c,x){var D=this.start,Y=this.startLoc,re=this.parseExprAtom(c,x);if(re.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return re;var be=this.parseSubscripts(re,D,Y,!1,x);return c&&be.type==="MemberExpression"&&(c.parenthesizedAssign>=be.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=be.start&&(c.parenthesizedBind=-1),c.trailingComma>=be.start&&(c.trailingComma=-1)),be},A.parseSubscripts=function(c,x,D,Y,re){for(var be=this.options.ecmaVersion>=8&&c.type==="Identifier"&&c.name==="async"&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&c.end-c.start===5&&this.potentialArrowAt===c.start,Oe=!1;;){var Ye=this.parseSubscript(c,x,D,Y,be,Oe,re);if(Ye.optional&&(Oe=!0),Ye===c||Ye.type==="ArrowFunctionExpression"){if(Oe){var nt=this.startNodeAt(x,D);nt.expression=Ye,Ye=this.finishNode(nt,"ChainExpression")}return Ye}c=Ye}},A.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(z.arrow)},A.parseSubscriptAsyncArrow=function(c,x,D,Y){return this.parseArrowExpression(this.startNodeAt(c,x),D,!0,Y)},A.parseSubscript=function(c,x,D,Y,re,be,Oe){var Ye=this.options.ecmaVersion>=11,nt=Ye&&this.eat(z.questionDot);Y&&nt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Ot=this.eat(z.bracketL);if(Ot||nt&&this.type!==z.parenL&&this.type!==z.backQuote||this.eat(z.dot)){var It=this.startNodeAt(x,D);It.object=c,Ot?(It.property=this.parseExpression(),this.expect(z.bracketR)):this.type===z.privateId&&c.type!=="Super"?It.property=this.parsePrivateIdent():It.property=this.parseIdent(this.options.allowReserved!=="never"),It.computed=!!Ot,Ye&&(It.optional=nt),c=this.finishNode(It,"MemberExpression")}else if(!Y&&this.eat(z.parenL)){var Kt=new w,cn=this.yieldPos,Kr=this.awaitPos,pi=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Zr=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,Kt);if(re&&!nt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Kt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=cn,this.awaitPos=Kr,this.awaitIdentPos=pi,this.parseSubscriptAsyncArrow(x,D,Zr,Oe);this.checkExpressionErrors(Kt,!0),this.yieldPos=cn||this.yieldPos,this.awaitPos=Kr||this.awaitPos,this.awaitIdentPos=pi||this.awaitIdentPos;var Qr=this.startNodeAt(x,D);Qr.callee=c,Qr.arguments=Zr,Ye&&(Qr.optional=nt),c=this.finishNode(Qr,"CallExpression")}else if(this.type===z.backQuote){(nt||be)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var zr=this.startNodeAt(x,D);zr.tag=c,zr.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(zr,"TaggedTemplateExpression")}return c},A.parseExprAtom=function(c,x,D){this.type===z.slash&&this.readRegexp();var Y,re=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Y=this.startNode(),this.next(),this.type===z.parenL&&!this.allowDirectSuper&&this.raise(Y.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(Y,"Super");case z._this:return Y=this.startNode(),this.next(),this.finishNode(Y,"ThisExpression");case z.name:var be=this.start,Oe=this.startLoc,Ye=this.containsEsc,nt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ye&&nt.name==="async"&&!this.canInsertSemicolon()&&this.eat(z._function))return this.overrideContext(L.f_expr),this.parseFunction(this.startNodeAt(be,Oe),0,!1,!0,x);if(re&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(be,Oe),[nt],!1,x);if(this.options.ecmaVersion>=8&&nt.name==="async"&&this.type===z.name&&!Ye&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return nt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(z.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(be,Oe),[nt],!0,x)}return nt;case z.regexp:var Ot=this.value;return Y=this.parseLiteral(Ot.value),Y.regex={pattern:Ot.pattern,flags:Ot.flags},Y;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return Y=this.startNode(),Y.value=this.type===z._null?null:this.type===z._true,Y.raw=this.type.keyword,this.next(),this.finishNode(Y,"Literal");case z.parenL:var It=this.start,Kt=this.parseParenAndDistinguishExpression(re,x);return c&&(c.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Kt)&&(c.parenthesizedAssign=It),c.parenthesizedBind<0&&(c.parenthesizedBind=It)),Kt;case z.bracketL:return Y=this.startNode(),this.next(),Y.elements=this.parseExprList(z.bracketR,!0,!0,c),this.finishNode(Y,"ArrayExpression");case z.braceL:return this.overrideContext(L.b_expr),this.parseObj(!1,c);case z._function:return Y=this.startNode(),this.next(),this.parseFunction(Y,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();case z._import:return this.options.ecmaVersion>=11?this.parseExprImport(D):this.unexpected();default:return this.parseExprAtomDefault()}},A.parseExprAtomDefault=function(){this.unexpected()},A.parseExprImport=function(c){var x=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===z.parenL&&!c)return this.parseDynamicImport(x);if(this.type===z.dot){var D=this.startNodeAt(x.start,x.loc&&x.loc.start);return D.name="import",x.meta=this.finishNode(D,"Identifier"),this.parseImportMeta(x)}else this.unexpected()},A.parseDynamicImport=function(c){if(this.next(),c.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(z.parenR)?c.options=null:(this.expect(z.comma),this.afterTrailingComma(z.parenR)?c.options=null:(c.options=this.parseMaybeAssign(),this.eat(z.parenR)||(this.expect(z.comma),this.afterTrailingComma(z.parenR)||this.unexpected())));else if(!this.eat(z.parenR)){var x=this.start;this.eat(z.comma)&&this.eat(z.parenR)?this.raiseRecoverable(x,"Trailing comma is not allowed in import()"):this.unexpected(x)}return this.finishNode(c,"ImportExpression")},A.parseImportMeta=function(c){this.next();var x=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="meta"&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'"),x&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module"),this.finishNode(c,"MetaProperty")},A.parseLiteral=function(c){var x=this.startNode();return x.value=c,x.raw=this.input.slice(this.start,this.end),x.raw.charCodeAt(x.raw.length-1)===110&&(x.bigint=x.value!=null?x.value.toString():x.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(x,"Literal")},A.parseParenExpression=function(){this.expect(z.parenL);var c=this.parseExpression();return this.expect(z.parenR),c},A.shouldParseArrow=function(c){return!this.canInsertSemicolon()},A.parseParenAndDistinguishExpression=function(c,x){var D=this.start,Y=this.startLoc,re,be=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Oe=this.start,Ye=this.startLoc,nt=[],Ot=!0,It=!1,Kt=new w,cn=this.yieldPos,Kr=this.awaitPos,pi;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;)if(Ot?Ot=!1:this.expect(z.comma),be&&this.afterTrailingComma(z.parenR,!0)){It=!0;break}else if(this.type===z.ellipsis){pi=this.start,nt.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else nt.push(this.parseMaybeAssign(!1,Kt,this.parseParenItem));var Zr=this.lastTokEnd,Qr=this.lastTokEndLoc;if(this.expect(z.parenR),c&&this.shouldParseArrow(nt)&&this.eat(z.arrow))return this.checkPatternErrors(Kt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=cn,this.awaitPos=Kr,this.parseParenArrowList(D,Y,nt,x);(!nt.length||It)&&this.unexpected(this.lastTokStart),pi&&this.unexpected(pi),this.checkExpressionErrors(Kt,!0),this.yieldPos=cn||this.yieldPos,this.awaitPos=Kr||this.awaitPos,nt.length>1?(re=this.startNodeAt(Oe,Ye),re.expressions=nt,this.finishNodeAt(re,"SequenceExpression",Zr,Qr)):re=nt[0]}else re=this.parseParenExpression();if(this.options.preserveParens){var zr=this.startNodeAt(D,Y);return zr.expression=re,this.finishNode(zr,"ParenthesizedExpression")}else return re},A.parseParenItem=function(c){return c},A.parseParenArrowList=function(c,x,D,Y){return this.parseArrowExpression(this.startNodeAt(c,x),D,!1,Y)};var Q=[];A.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===z.dot){var x=this.startNodeAt(c.start,c.loc&&c.loc.start);x.name="new",c.meta=this.finishNode(x,"Identifier"),this.next();var D=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="target"&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),D&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(c.start,"'new.target' can only be used in functions and class static block"),this.finishNode(c,"MetaProperty")}var Y=this.start,re=this.startLoc;return c.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),Y,re,!0,!1),this.eat(z.parenL)?c.arguments=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):c.arguments=Q,this.finishNode(c,"NewExpression")},A.parseTemplateElement=function(c){var x=c.isTagged,D=this.startNode();return this.type===z.invalidTemplate?(x||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),D.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):D.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),D.tail=this.type===z.backQuote,this.finishNode(D,"TemplateElement")},A.parseTemplate=function(c){c===void 0&&(c={});var x=c.isTagged;x===void 0&&(x=!1);var D=this.startNode();this.next(),D.expressions=[];var Y=this.parseTemplateElement({isTagged:x});for(D.quasis=[Y];!Y.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),D.expressions.push(this.parseExpression()),this.expect(z.braceR),D.quasis.push(Y=this.parseTemplateElement({isTagged:x}));return this.next(),this.finishNode(D,"TemplateLiteral")},A.isAsyncProp=function(c){return!c.computed&&c.key.type==="Identifier"&&c.key.name==="async"&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!Ve.test(this.input.slice(this.lastTokEnd,this.start))},A.parseObj=function(c,x){var D=this.startNode(),Y=!0,re={};for(D.properties=[],this.next();!this.eat(z.braceR);){if(Y)Y=!1;else if(this.expect(z.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(z.braceR))break;var be=this.parseProperty(c,x);c||this.checkPropClash(be,re,x),D.properties.push(be)}return this.finishNode(D,c?"ObjectPattern":"ObjectExpression")},A.parseProperty=function(c,x){var D=this.startNode(),Y,re,be,Oe;if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return c?(D.argument=this.parseIdent(!1),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(D,"RestElement")):(D.argument=this.parseMaybeAssign(!1,x),this.type===z.comma&&x&&x.trailingComma<0&&(x.trailingComma=this.start),this.finishNode(D,"SpreadElement"));this.options.ecmaVersion>=6&&(D.method=!1,D.shorthand=!1,(c||x)&&(be=this.start,Oe=this.startLoc),c||(Y=this.eat(z.star)));var Ye=this.containsEsc;return this.parsePropertyName(D),!c&&!Ye&&this.options.ecmaVersion>=8&&!Y&&this.isAsyncProp(D)?(re=!0,Y=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(D)):re=!1,this.parsePropertyValue(D,c,Y,re,be,Oe,x,Ye),this.finishNode(D,"Property")},A.parseGetterSetter=function(c){var x=c.key.name;this.parsePropertyName(c),c.value=this.parseMethod(!1),c.kind=x;var D=c.kind==="get"?0:1;if(c.value.params.length!==D){var Y=c.value.start;c.kind==="get"?this.raiseRecoverable(Y,"getter should have no params"):this.raiseRecoverable(Y,"setter should have exactly one param")}else c.kind==="set"&&c.value.params[0].type==="RestElement"&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params")},A.parsePropertyValue=function(c,x,D,Y,re,be,Oe,Ye){(D||Y)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon)?(c.value=x?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Oe),c.kind="init"):this.options.ecmaVersion>=6&&this.type===z.parenL?(x&&this.unexpected(),c.method=!0,c.value=this.parseMethod(D,Y),c.kind="init"):!x&&!Ye&&this.options.ecmaVersion>=5&&!c.computed&&c.key.type==="Identifier"&&(c.key.name==="get"||c.key.name==="set")&&this.type!==z.comma&&this.type!==z.braceR&&this.type!==z.eq?((D||Y)&&this.unexpected(),this.parseGetterSetter(c)):this.options.ecmaVersion>=6&&!c.computed&&c.key.type==="Identifier"?((D||Y)&&this.unexpected(),this.checkUnreserved(c.key),c.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=re),x?c.value=this.parseMaybeDefault(re,be,this.copyNode(c.key)):this.type===z.eq&&Oe?(Oe.shorthandAssign<0&&(Oe.shorthandAssign=this.start),c.value=this.parseMaybeDefault(re,be,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.kind="init",c.shorthand=!0):this.unexpected()},A.parsePropertyName=function(c){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(z.bracketR),c.key;c.computed=!1}return c.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},A.initFunction=function(c){c.id=null,this.options.ecmaVersion>=6&&(c.generator=c.expression=!1),this.options.ecmaVersion>=8&&(c.async=!1)},A.parseMethod=function(c,x,D){var Y=this.startNode(),re=this.yieldPos,be=this.awaitPos,Oe=this.awaitIdentPos;return this.initFunction(Y),this.options.ecmaVersion>=6&&(Y.generator=c),this.options.ecmaVersion>=8&&(Y.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qr(x,Y.generator)|Li|(D?la:0)),this.expect(z.parenL),Y.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Y,!1,!0,!1),this.yieldPos=re,this.awaitPos=be,this.awaitIdentPos=Oe,this.finishNode(Y,"FunctionExpression")},A.parseArrowExpression=function(c,x,D,Y){var re=this.yieldPos,be=this.awaitPos,Oe=this.awaitIdentPos;return this.enterScope(qr(D,!1)|Rr),this.initFunction(c),this.options.ecmaVersion>=8&&(c.async=!!D),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,c.params=this.toAssignableList(x,!0),this.parseFunctionBody(c,!0,!1,Y),this.yieldPos=re,this.awaitPos=be,this.awaitIdentPos=Oe,this.finishNode(c,"ArrowFunctionExpression")},A.parseFunctionBody=function(c,x,D,Y){var re=x&&this.type!==z.braceL,be=this.strict,Oe=!1;if(re)c.body=this.parseMaybeAssign(Y),c.expression=!0,this.checkParams(c,!1);else{var Ye=this.options.ecmaVersion>=7&&!this.isSimpleParamList(c.params);(!be||Ye)&&(Oe=this.strictDirective(this.end),Oe&&Ye&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var nt=this.labels;this.labels=[],Oe&&(this.strict=!0),this.checkParams(c,!be&&!Oe&&!x&&!D&&this.isSimpleParamList(c.params)),this.strict&&c.id&&this.checkLValSimple(c.id,r),c.body=this.parseBlock(!1,void 0,Oe&&!be),c.expression=!1,this.adaptDirectivePrologue(c.body.body),this.labels=nt}this.exitScope()},A.isSimpleParamList=function(c){for(var x=0,D=c;x<D.length;x+=1){var Y=D[x];if(Y.type!=="Identifier")return!1}return!0},A.checkParams=function(c,x){for(var D=Object.create(null),Y=0,re=c.params;Y<re.length;Y+=1){var be=re[Y];this.checkLValInnerPattern(be,fi,x?null:D)}},A.parseExprList=function(c,x,D,Y){for(var re=[],be=!0;!this.eat(c);){if(be)be=!1;else if(this.expect(z.comma),x&&this.afterTrailingComma(c))break;var Oe=void 0;D&&this.type===z.comma?Oe=null:this.type===z.ellipsis?(Oe=this.parseSpread(Y),Y&&this.type===z.comma&&Y.trailingComma<0&&(Y.trailingComma=this.start)):Oe=this.parseMaybeAssign(!1,Y),re.push(Oe)}return re},A.checkUnreserved=function(c){var x=c.start,D=c.end,Y=c.name;if(this.inGenerator&&Y==="yield"&&this.raiseRecoverable(x,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Y==="await"&&this.raiseRecoverable(x,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Ri)&&Y==="arguments"&&this.raiseRecoverable(x,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(Y==="arguments"||Y==="await")&&this.raise(x,"Cannot use "+Y+" in class static initialization block"),this.keywords.test(Y)&&this.raise(x,"Unexpected keyword '"+Y+"'"),!(this.options.ecmaVersion<6&&this.input.slice(x,D).indexOf("\\")!==-1)){var re=this.strict?this.reservedWordsStrict:this.reservedWords;re.test(Y)&&(!this.inAsync&&Y==="await"&&this.raiseRecoverable(x,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(x,"The keyword '"+Y+"' is reserved"))}},A.parseIdent=function(c){var x=this.parseIdentNode();return this.next(!!c),this.finishNode(x,"Identifier"),c||(this.checkUnreserved(x),x.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=x.start)),x},A.parseIdentNode=function(){var c=this.startNode();return this.type===z.name?c.name=this.value:this.type.keyword?(c.name=this.type.keyword,(c.name==="class"||c.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=z.name):this.unexpected(),c},A.parsePrivateIdent=function(){var c=this.startNode();return this.type===z.privateId?c.name=this.value:this.unexpected(),this.next(),this.finishNode(c,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c)),c},A.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var x=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(x.delegate=!1,x.argument=null):(x.delegate=this.eat(z.star),x.argument=this.parseMaybeAssign(c)),this.finishNode(x,"YieldExpression")},A.parseAwait=function(c){this.awaitPos||(this.awaitPos=this.start);var x=this.startNode();return this.next(),x.argument=this.parseMaybeUnary(null,!0,!1,c),this.finishNode(x,"AwaitExpression")};var X=u.prototype;X.raise=function(c,x){var D=Ct(this.input,c);x+=" ("+D.line+":"+D.column+")",this.sourceFile&&(x+=" in "+this.sourceFile);var Y=new SyntaxError(x);throw Y.pos=c,Y.loc=D,Y.raisedAt=this.pos,Y},X.raiseRecoverable=X.raise,X.curPosition=function(){if(this.options.locations)return new Fe(this.curLine,this.pos-this.lineStart)};var te=u.prototype,ie=function(x){this.flags=x,this.var=[],this.lexical=[],this.functions=[]};te.enterScope=function(c){this.scopeStack.push(new ie(c))},te.exitScope=function(){this.scopeStack.pop()},te.treatFunctionsAsVarInScope=function(c){return c.flags&At||!this.inModule&&c.flags&yt},te.declareName=function(c,x,D){var Y=!1;if(x===Yt){var re=this.currentScope();Y=re.lexical.indexOf(c)>-1||re.functions.indexOf(c)>-1||re.var.indexOf(c)>-1,re.lexical.push(c),this.inModule&&re.flags&yt&&delete this.undefinedExports[c]}else if(x===Ft){var be=this.currentScope();be.lexical.push(c)}else if(x===Ts){var Oe=this.currentScope();this.treatFunctionsAsVar?Y=Oe.lexical.indexOf(c)>-1:Y=Oe.lexical.indexOf(c)>-1||Oe.var.indexOf(c)>-1,Oe.functions.push(c)}else for(var Ye=this.scopeStack.length-1;Ye>=0;--Ye){var nt=this.scopeStack[Ye];if(nt.lexical.indexOf(c)>-1&&!(nt.flags&ks&&nt.lexical[0]===c)||!this.treatFunctionsAsVarInScope(nt)&&nt.functions.indexOf(c)>-1){Y=!0;break}if(nt.var.push(c),this.inModule&&nt.flags&yt&&delete this.undefinedExports[c],nt.flags&Ri)break}Y&&this.raiseRecoverable(D,"Identifier '"+c+"' has already been declared")},te.checkLocalExport=function(c){this.scopeStack[0].lexical.indexOf(c.name)===-1&&this.scopeStack[0].var.indexOf(c.name)===-1&&(this.undefinedExports[c.name]=c)},te.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},te.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var x=this.scopeStack[c];if(x.flags&(Ri|Di|Fr))return x}},te.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var x=this.scopeStack[c];if(x.flags&(Ri|Di|Fr)&&!(x.flags&Rr))return x}};var se=function(x,D,Y){this.type="",this.start=D,this.end=0,x.options.locations&&(this.loc=new _t(x,Y)),x.options.directSourceFile&&(this.sourceFile=x.options.directSourceFile),x.options.ranges&&(this.range=[D,0])},he=u.prototype;he.startNode=function(){return new se(this,this.start,this.startLoc)},he.startNodeAt=function(c,x){return new se(this,c,x)};function ne(c,x,D,Y){return c.type=x,c.end=D,this.options.locations&&(c.loc.end=Y),this.options.ranges&&(c.range[1]=D),c}he.finishNode=function(c,x){return ne.call(this,c,x,this.lastTokEnd,this.lastTokEndLoc)},he.finishNodeAt=function(c,x,D,Y){return ne.call(this,c,x,D,Y)},he.copyNode=function(c){var x=new se(this,c.start,this.startLoc);for(var D in c)x[D]=c[D];return x};var ce="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",fe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ve=fe+" Extended_Pictographic",ye=ve,Ee=ye+" EBase EComp EMod EPres ExtPict",Ne=Ee,We=Ne,$e={9:fe,10:ve,11:ye,12:Ee,13:Ne,14:We},it="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",je={9:"",10:"",11:"",12:"",13:"",14:it},De="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",et="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",at=et+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",st=at+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",xt=st+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",vt=xt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ot=vt+" "+ce,Lt={9:et,10:at,11:st,12:xt,13:vt,14:ot},bt={};function pn(c){var x=bt[c]={binary:Xe($e[c]+" "+De),binaryOfStrings:Xe(je[c]),nonBinary:{General_Category:Xe(De),Script:Xe(Lt[c])}};x.nonBinary.Script_Extensions=x.nonBinary.Script,x.nonBinary.gc=x.nonBinary.General_Category,x.nonBinary.sc=x.nonBinary.Script,x.nonBinary.scx=x.nonBinary.Script_Extensions}for(var sn=0,Sn=[9,10,11,12,13,14];sn<Sn.length;sn+=1){var ln=Sn[sn];pn(ln)}var qe=u.prototype,Ht=function(x,D){this.parent=x,this.base=D||this};Ht.prototype.separatedFrom=function(x){for(var D=this;D;D=D.parent)for(var Y=x;Y;Y=Y.parent)if(D.base===Y.base&&D!==Y)return!0;return!1},Ht.prototype.sibling=function(){return new Ht(this.parent,this.base)};var an=function(x){this.parser=x,this.validFlags="gim"+(x.options.ecmaVersion>=6?"uy":"")+(x.options.ecmaVersion>=9?"s":"")+(x.options.ecmaVersion>=13?"d":"")+(x.options.ecmaVersion>=15?"v":""),this.unicodeProperties=bt[x.options.ecmaVersion>=14?14:x.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};an.prototype.reset=function(x,D,Y){var re=Y.indexOf("v")!==-1,be=Y.indexOf("u")!==-1;this.start=x|0,this.source=D+"",this.flags=Y,re&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=be&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=be&&this.parser.options.ecmaVersion>=9)},an.prototype.raise=function(x){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+x)},an.prototype.at=function(x,D){D===void 0&&(D=!1);var Y=this.source,re=Y.length;if(x>=re)return-1;var be=Y.charCodeAt(x);if(!(D||this.switchU)||be<=55295||be>=57344||x+1>=re)return be;var Oe=Y.charCodeAt(x+1);return Oe>=56320&&Oe<=57343?(be<<10)+Oe-56613888:be},an.prototype.nextIndex=function(x,D){D===void 0&&(D=!1);var Y=this.source,re=Y.length;if(x>=re)return re;var be=Y.charCodeAt(x),Oe;return!(D||this.switchU)||be<=55295||be>=57344||x+1>=re||(Oe=Y.charCodeAt(x+1))<56320||Oe>57343?x+1:x+2},an.prototype.current=function(x){return x===void 0&&(x=!1),this.at(this.pos,x)},an.prototype.lookahead=function(x){return x===void 0&&(x=!1),this.at(this.nextIndex(this.pos,x),x)},an.prototype.advance=function(x){x===void 0&&(x=!1),this.pos=this.nextIndex(this.pos,x)},an.prototype.eat=function(x,D){return D===void 0&&(D=!1),this.current(D)===x?(this.advance(D),!0):!1},an.prototype.eatChars=function(x,D){D===void 0&&(D=!1);for(var Y=this.pos,re=0,be=x;re<be.length;re+=1){var Oe=be[re],Ye=this.at(Y,D);if(Ye===-1||Ye!==Oe)return!1;Y=this.nextIndex(Y,D)}return this.pos=Y,!0},qe.validateRegExpFlags=function(c){for(var x=c.validFlags,D=c.flags,Y=!1,re=!1,be=0;be<D.length;be++){var Oe=D.charAt(be);x.indexOf(Oe)===-1&&this.raise(c.start,"Invalid regular expression flag"),D.indexOf(Oe,be+1)>-1&&this.raise(c.start,"Duplicate regular expression flag"),Oe==="u"&&(Y=!0),Oe==="v"&&(re=!0)}this.options.ecmaVersion>=15&&Y&&re&&this.raise(c.start,"Invalid regular expression flag")};function qt(c){for(var x in c)return!0;return!1}qe.validateRegExpPattern=function(c){this.regexp_pattern(c),!c.switchN&&this.options.ecmaVersion>=9&&qt(c.groupNames)&&(c.switchN=!0,this.regexp_pattern(c))},qe.regexp_pattern=function(c){c.pos=0,c.lastIntValue=0,c.lastStringValue="",c.lastAssertionIsQuantifiable=!1,c.numCapturingParens=0,c.maxBackReference=0,c.groupNames=Object.create(null),c.backReferenceNames.length=0,c.branchID=null,this.regexp_disjunction(c),c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets")),c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var x=0,D=c.backReferenceNames;x<D.length;x+=1){var Y=D[x];c.groupNames[Y]||c.raise("Invalid named capture referenced")}},qe.regexp_disjunction=function(c){var x=this.options.ecmaVersion>=16;for(x&&(c.branchID=new Ht(c.branchID,null)),this.regexp_alternative(c);c.eat(124);)x&&(c.branchID=c.branchID.sibling()),this.regexp_alternative(c);x&&(c.branchID=c.branchID.parent),this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat"),c.eat(123)&&c.raise("Lone quantifier brackets")},qe.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););},qe.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1},qe.regexp_eatAssertion=function(c){var x=c.pos;if(c.lastAssertionIsQuantifiable=!1,c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=x}if(c.eat(40)&&c.eat(63)){var D=!1;if(this.options.ecmaVersion>=9&&(D=c.eat(60)),c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=!D,!0}return c.pos=x,!1},qe.regexp_eatQuantifier=function(c,x){return x===void 0&&(x=!1),this.regexp_eatQuantifierPrefix(c,x)?(c.eat(63),!0):!1},qe.regexp_eatQuantifierPrefix=function(c,x){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,x)},qe.regexp_eatBracedQuantifier=function(c,x){var D=c.pos;if(c.eat(123)){var Y=0,re=-1;if(this.regexp_eatDecimalDigits(c)&&(Y=c.lastIntValue,c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(re=c.lastIntValue),c.eat(125)))return re!==-1&&re<Y&&!x&&c.raise("numbers out of order in {} quantifier"),!0;c.switchU&&!x&&c.raise("Incomplete quantifier"),c.pos=D}return!1},qe.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)},qe.regexp_eatReverseSolidusAtomEscape=function(c){var x=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=x}return!1},qe.regexp_eatUncapturingGroup=function(c){var x=c.pos;if(c.eat(40)){if(c.eat(63)){if(this.options.ecmaVersion>=16){var D=this.regexp_eatModifiers(c),Y=c.eat(45);if(D||Y){for(var re=0;re<D.length;re++){var be=D.charAt(re);D.indexOf(be,re+1)>-1&&c.raise("Duplicate regular expression modifiers")}if(Y){var Oe=this.regexp_eatModifiers(c);!D&&!Oe&&c.current()===58&&c.raise("Invalid regular expression modifiers");for(var Ye=0;Ye<Oe.length;Ye++){var nt=Oe.charAt(Ye);(Oe.indexOf(nt,Ye+1)>-1||D.indexOf(nt)>-1)&&c.raise("Duplicate regular expression modifiers")}}}}if(c.eat(58)){if(this.regexp_disjunction(c),c.eat(41))return!0;c.raise("Unterminated group")}}c.pos=x}return!1},qe.regexp_eatCapturingGroup=function(c){if(c.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(c):c.current()===63&&c.raise("Invalid group"),this.regexp_disjunction(c),c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1},qe.regexp_eatModifiers=function(c){for(var x="",D=0;(D=c.current())!==-1&&er(D);)x+=Ze(D),c.advance();return x};function er(c){return c===105||c===109||c===115}qe.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)},qe.regexp_eatInvalidBracedQuantifier=function(c){return this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat"),!1},qe.regexp_eatSyntaxCharacter=function(c){var x=c.current();return Nr(x)?(c.lastIntValue=x,c.advance(),!0):!1};function Nr(c){return c===36||c>=40&&c<=43||c===46||c===63||c>=91&&c<=94||c>=123&&c<=125}qe.regexp_eatPatternCharacters=function(c){for(var x=c.pos,D=0;(D=c.current())!==-1&&!Nr(D);)c.advance();return c.pos!==x},qe.regexp_eatExtendedPatternCharacter=function(c){var x=c.current();return x!==-1&&x!==36&&!(x>=40&&x<=43)&&x!==46&&x!==63&&x!==91&&x!==94&&x!==124?(c.advance(),!0):!1},qe.regexp_groupSpecifier=function(c){if(c.eat(63)){this.regexp_eatGroupName(c)||c.raise("Invalid group");var x=this.options.ecmaVersion>=16,D=c.groupNames[c.lastStringValue];if(D)if(x)for(var Y=0,re=D;Y<re.length;Y+=1){var be=re[Y];be.separatedFrom(c.branchID)||c.raise("Duplicate capture group name")}else c.raise("Duplicate capture group name");x?(D||(c.groupNames[c.lastStringValue]=[])).push(c.branchID):c.groupNames[c.lastStringValue]=!0}},qe.regexp_eatGroupName=function(c){if(c.lastStringValue="",c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&c.eat(62))return!0;c.raise("Invalid capture group name")}return!1},qe.regexp_eatRegExpIdentifierName=function(c){if(c.lastStringValue="",this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=Ze(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=Ze(c.lastIntValue);return!0}return!1},qe.regexp_eatRegExpIdentifierStart=function(c){var x=c.pos,D=this.options.ecmaVersion>=11,Y=c.current(D);return c.advance(D),Y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,D)&&(Y=c.lastIntValue),hr(Y)?(c.lastIntValue=Y,!0):(c.pos=x,!1)};function hr(c){return Z(c,!0)||c===36||c===95}qe.regexp_eatRegExpIdentifierPart=function(c){var x=c.pos,D=this.options.ecmaVersion>=11,Y=c.current(D);return c.advance(D),Y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,D)&&(Y=c.lastIntValue),Wn(Y)?(c.lastIntValue=Y,!0):(c.pos=x,!1)};function Wn(c){return N(c,!0)||c===36||c===95||c===8204||c===8205}qe.regexp_eatAtomEscape=function(c){return this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||c.switchN&&this.regexp_eatKGroupName(c)?!0:(c.switchU&&(c.current()===99&&c.raise("Invalid unicode escape"),c.raise("Invalid escape")),!1)},qe.regexp_eatBackReference=function(c){var x=c.pos;if(this.regexp_eatDecimalEscape(c)){var D=c.lastIntValue;if(c.switchU)return D>c.maxBackReference&&(c.maxBackReference=D),!0;if(D<=c.numCapturingParens)return!0;c.pos=x}return!1},qe.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),!0;c.raise("Invalid named reference")}return!1},qe.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)},qe.regexp_eatCControlLetter=function(c){var x=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=x}return!1},qe.regexp_eatZero=function(c){return c.current()===48&&!Vt(c.lookahead())?(c.lastIntValue=0,c.advance(),!0):!1},qe.regexp_eatControlEscape=function(c){var x=c.current();return x===116?(c.lastIntValue=9,c.advance(),!0):x===110?(c.lastIntValue=10,c.advance(),!0):x===118?(c.lastIntValue=11,c.advance(),!0):x===102?(c.lastIntValue=12,c.advance(),!0):x===114?(c.lastIntValue=13,c.advance(),!0):!1},qe.regexp_eatControlLetter=function(c){var x=c.current();return Cn(x)?(c.lastIntValue=x%32,c.advance(),!0):!1};function Cn(c){return c>=65&&c<=90||c>=97&&c<=122}qe.regexp_eatRegExpUnicodeEscapeSequence=function(c,x){x===void 0&&(x=!1);var D=c.pos,Y=x||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){var re=c.lastIntValue;if(Y&&re>=55296&&re<=56319){var be=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var Oe=c.lastIntValue;if(Oe>=56320&&Oe<=57343)return c.lastIntValue=(re-55296)*1024+(Oe-56320)+65536,!0}c.pos=be,c.lastIntValue=re}return!0}if(Y&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125)&&On(c.lastIntValue))return!0;Y&&c.raise("Invalid unicode escape"),c.pos=D}return!1};function On(c){return c>=0&&c<=1114111}qe.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var x=c.current();return x!==99&&(!c.switchN||x!==107)?(c.lastIntValue=x,c.advance(),!0):!1},qe.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var x=c.current();if(x>=49&&x<=57){do c.lastIntValue=10*c.lastIntValue+(x-48),c.advance();while((x=c.current())>=48&&x<=57);return!0}return!1};var tr=0,vn=1,Nn=2;qe.regexp_eatCharacterClassEscape=function(c){var x=c.current();if(Es(x))return c.lastIntValue=-1,c.advance(),vn;var D=!1;if(c.switchU&&this.options.ecmaVersion>=9&&((D=x===80)||x===112)){c.lastIntValue=-1,c.advance();var Y;if(c.eat(123)&&(Y=this.regexp_eatUnicodePropertyValueExpression(c))&&c.eat(125))return D&&Y===Nn&&c.raise("Invalid property name"),Y;c.raise("Invalid property name")}return tr};function Es(c){return c===100||c===68||c===115||c===83||c===119||c===87}qe.regexp_eatUnicodePropertyValueExpression=function(c){var x=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var D=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c)){var Y=c.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(c,D,Y),vn}}if(c.pos=x,this.regexp_eatLoneUnicodePropertyNameOrValue(c)){var re=c.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(c,re)}return tr},qe.regexp_validateUnicodePropertyNameAndValue=function(c,x,D){Le(c.unicodeProperties.nonBinary,x)||c.raise("Invalid property name"),c.unicodeProperties.nonBinary[x].test(D)||c.raise("Invalid property value")},qe.regexp_validateUnicodePropertyNameOrValue=function(c,x){if(c.unicodeProperties.binary.test(x))return vn;if(c.switchV&&c.unicodeProperties.binaryOfStrings.test(x))return Nn;c.raise("Invalid property name")},qe.regexp_eatUnicodePropertyName=function(c){var x=0;for(c.lastStringValue="";Os(x=c.current());)c.lastStringValue+=Ze(x),c.advance();return c.lastStringValue!==""};function Os(c){return Cn(c)||c===95}qe.regexp_eatUnicodePropertyValue=function(c){var x=0;for(c.lastStringValue="";Ps(x=c.current());)c.lastStringValue+=Ze(x),c.advance();return c.lastStringValue!==""};function Ps(c){return Os(c)||Vt(c)}qe.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)},qe.regexp_eatCharacterClass=function(c){if(c.eat(91)){var x=c.eat(94),D=this.regexp_classContents(c);return c.eat(93)||c.raise("Unterminated character class"),x&&D===Nn&&c.raise("Negated character class may contain strings"),!0}return!1},qe.regexp_classContents=function(c){return c.current()===93?vn:c.switchV?this.regexp_classSetExpression(c):(this.regexp_nonEmptyClassRanges(c),vn)},qe.regexp_nonEmptyClassRanges=function(c){for(;this.regexp_eatClassAtom(c);){var x=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var D=c.lastIntValue;c.switchU&&(x===-1||D===-1)&&c.raise("Invalid character class"),x!==-1&&D!==-1&&x>D&&c.raise("Range out of order in character class")}}},qe.regexp_eatClassAtom=function(c){var x=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var D=c.current();(D===99||Br(D))&&c.raise("Invalid class escape"),c.raise("Invalid escape")}c.pos=x}var Y=c.current();return Y!==93?(c.lastIntValue=Y,c.advance(),!0):!1},qe.regexp_eatClassEscape=function(c){var x=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=x}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)},qe.regexp_classSetExpression=function(c){var x=vn,D;if(!this.regexp_eatClassSetRange(c))if(D=this.regexp_eatClassSetOperand(c)){D===Nn&&(x=Nn);for(var Y=c.pos;c.eatChars([38,38]);){if(c.current()!==38&&(D=this.regexp_eatClassSetOperand(c))){D!==Nn&&(x=vn);continue}c.raise("Invalid character in character class")}if(Y!==c.pos)return x;for(;c.eatChars([45,45]);)this.regexp_eatClassSetOperand(c)||c.raise("Invalid character in character class");if(Y!==c.pos)return x}else c.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(c)){if(D=this.regexp_eatClassSetOperand(c),!D)return x;D===Nn&&(x=Nn)}},qe.regexp_eatClassSetRange=function(c){var x=c.pos;if(this.regexp_eatClassSetCharacter(c)){var D=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassSetCharacter(c)){var Y=c.lastIntValue;return D!==-1&&Y!==-1&&D>Y&&c.raise("Range out of order in character class"),!0}c.pos=x}return!1},qe.regexp_eatClassSetOperand=function(c){return this.regexp_eatClassSetCharacter(c)?vn:this.regexp_eatClassStringDisjunction(c)||this.regexp_eatNestedClass(c)},qe.regexp_eatNestedClass=function(c){var x=c.pos;if(c.eat(91)){var D=c.eat(94),Y=this.regexp_classContents(c);if(c.eat(93))return D&&Y===Nn&&c.raise("Negated character class may contain strings"),Y;c.pos=x}if(c.eat(92)){var re=this.regexp_eatCharacterClassEscape(c);if(re)return re;c.pos=x}return null},qe.regexp_eatClassStringDisjunction=function(c){var x=c.pos;if(c.eatChars([92,113])){if(c.eat(123)){var D=this.regexp_classStringDisjunctionContents(c);if(c.eat(125))return D}else c.raise("Invalid escape");c.pos=x}return null},qe.regexp_classStringDisjunctionContents=function(c){for(var x=this.regexp_classString(c);c.eat(124);)this.regexp_classString(c)===Nn&&(x=Nn);return x},qe.regexp_classString=function(c){for(var x=0;this.regexp_eatClassSetCharacter(c);)x++;return x===1?vn:Nn},qe.regexp_eatClassSetCharacter=function(c){var x=c.pos;if(c.eat(92))return this.regexp_eatCharacterEscape(c)||this.regexp_eatClassSetReservedPunctuator(c)?!0:c.eat(98)?(c.lastIntValue=8,!0):(c.pos=x,!1);var D=c.current();return D<0||D===c.lookahead()&&Fi(D)||qa(D)?!1:(c.advance(),c.lastIntValue=D,!0)};function Fi(c){return c===33||c>=35&&c<=38||c>=42&&c<=44||c===46||c>=58&&c<=64||c===94||c===96||c===126}function qa(c){return c===40||c===41||c===45||c===47||c>=91&&c<=93||c>=123&&c<=125}qe.regexp_eatClassSetReservedPunctuator=function(c){var x=c.current();return Ni(x)?(c.lastIntValue=x,c.advance(),!0):!1};function Ni(c){return c===33||c===35||c===37||c===38||c===44||c===45||c>=58&&c<=62||c===64||c===96||c===126}qe.regexp_eatClassControlLetter=function(c){var x=c.current();return Vt(x)||x===95?(c.lastIntValue=x%32,c.advance(),!0):!1},qe.regexp_eatHexEscapeSequence=function(c){var x=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape"),c.pos=x}return!1},qe.regexp_eatDecimalDigits=function(c){var x=c.pos,D=0;for(c.lastIntValue=0;Vt(D=c.current());)c.lastIntValue=10*c.lastIntValue+(D-48),c.advance();return c.pos!==x};function Vt(c){return c>=48&&c<=57}qe.regexp_eatHexDigits=function(c){var x=c.pos,D=0;for(c.lastIntValue=0;Bi(D=c.current());)c.lastIntValue=16*c.lastIntValue+zi(D),c.advance();return c.pos!==x};function Bi(c){return c>=48&&c<=57||c>=65&&c<=70||c>=97&&c<=102}function zi(c){return c>=65&&c<=70?10+(c-65):c>=97&&c<=102?10+(c-97):c-48}qe.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var x=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var D=c.lastIntValue;x<=3&&this.regexp_eatOctalDigit(c)?c.lastIntValue=x*64+D*8+c.lastIntValue:c.lastIntValue=x*8+D}else c.lastIntValue=x;return!0}return!1},qe.regexp_eatOctalDigit=function(c){var x=c.current();return Br(x)?(c.lastIntValue=x-48,c.advance(),!0):(c.lastIntValue=0,!1)};function Br(c){return c>=48&&c<=55}qe.regexp_eatFixedHexDigits=function(c,x){var D=c.pos;c.lastIntValue=0;for(var Y=0;Y<x;++Y){var re=c.current();if(!Bi(re))return c.pos=D,!1;c.lastIntValue=16*c.lastIntValue+zi(re),c.advance()}return!0};var fr=function(x){this.type=x.type,this.value=x.value,this.start=x.start,this.end=x.end,x.options.locations&&(this.loc=new _t(x,x.startLoc,x.endLoc)),x.options.ranges&&(this.range=[x.start,x.end])},Pt=u.prototype;Pt.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Pt.getToken=function(){return this.next(),new fr(this)},typeof Symbol<"u"&&(Pt[Symbol.iterator]=function(){var c=this;return{next:function(){var x=c.getToken();return{done:x.type===z.eof,value:x}}}}),Pt.nextToken=function(){var c=this.curContext();if((!c||!c.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(z.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())},Pt.readToken=function(c){return Z(c,this.options.ecmaVersion>=6)||c===92?this.readWord():this.getTokenFromCode(c)},Pt.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(c<=55295||c>=56320)return c;var x=this.input.charCodeAt(this.pos+1);return x<=56319||x>=57344?c:(c<<10)+x-56613888},Pt.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),x=this.pos,D=this.input.indexOf("*/",this.pos+=2);if(D===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=D+2,this.options.locations)for(var Y=void 0,re=x;(Y=ut(this.input,re,this.pos))>-1;)++this.curLine,re=this.lineStart=Y;this.options.onComment&&this.options.onComment(!0,this.input.slice(x+2,D),x,this.pos,c,this.curPosition())},Pt.skipLineComment=function(c){for(var x=this.pos,D=this.options.onComment&&this.curPosition(),Y=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Je(Y);)Y=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(x+c,this.pos),x,this.pos,D,this.curPosition())},Pt.skipSpace=function(){e:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(c>8&&c<14||c>=5760&&Ie.test(String.fromCharCode(c)))++this.pos;else break e}}},Pt.finishToken=function(c,x){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var D=this.type;this.type=c,this.value=x,this.updateContext(D)},Pt.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(c>=48&&c<=57)return this.readNumber(!0);var x=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&c===46&&x===46?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))},Pt.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):c===61?this.finishOp(z.assign,2):this.finishOp(z.slash,1)},Pt.readToken_mult_modulo_exp=function(c){var x=this.input.charCodeAt(this.pos+1),D=1,Y=c===42?z.star:z.modulo;return this.options.ecmaVersion>=7&&c===42&&x===42&&(++D,Y=z.starstar,x=this.input.charCodeAt(this.pos+2)),x===61?this.finishOp(z.assign,D+1):this.finishOp(Y,D)},Pt.readToken_pipe_amp=function(c){var x=this.input.charCodeAt(this.pos+1);if(x===c){if(this.options.ecmaVersion>=12){var D=this.input.charCodeAt(this.pos+2);if(D===61)return this.finishOp(z.assign,3)}return this.finishOp(c===124?z.logicalOR:z.logicalAND,2)}return x===61?this.finishOp(z.assign,2):this.finishOp(c===124?z.bitwiseOR:z.bitwiseAND,1)},Pt.readToken_caret=function(){var c=this.input.charCodeAt(this.pos+1);return c===61?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)},Pt.readToken_plus_min=function(c){var x=this.input.charCodeAt(this.pos+1);return x===c?x===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ve.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(z.incDec,2):x===61?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)},Pt.readToken_lt_gt=function(c){var x=this.input.charCodeAt(this.pos+1),D=1;return x===c?(D=c===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+D)===61?this.finishOp(z.assign,D+1):this.finishOp(z.bitShift,D)):x===33&&c===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(x===61&&(D=2),this.finishOp(z.relational,D))},Pt.readToken_eq_excl=function(c){var x=this.input.charCodeAt(this.pos+1);return x===61?this.finishOp(z.equality,this.input.charCodeAt(this.pos+2)===61?3:2):c===61&&x===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(c===61?z.eq:z.prefix,1)},Pt.readToken_question=function(){var c=this.options.ecmaVersion;if(c>=11){var x=this.input.charCodeAt(this.pos+1);if(x===46){var D=this.input.charCodeAt(this.pos+2);if(D<48||D>57)return this.finishOp(z.questionDot,2)}if(x===63){if(c>=12){var Y=this.input.charCodeAt(this.pos+2);if(Y===61)return this.finishOp(z.assign,3)}return this.finishOp(z.coalesce,2)}}return this.finishOp(z.question,1)},Pt.readToken_numberSign=function(){var c=this.options.ecmaVersion,x=35;if(c>=13&&(++this.pos,x=this.fullCharCodeAtPos(),Z(x,!0)||x===92))return this.finishToken(z.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ze(x)+"'")},Pt.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var x=this.input.charCodeAt(this.pos+1);if(x===120||x===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(x===111||x===79)return this.readRadixNumber(8);if(x===98||x===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(z.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ze(c)+"'")},Pt.finishOp=function(c,x){var D=this.input.slice(this.pos,this.pos+x);return this.pos+=x,this.finishToken(c,D)},Pt.readRegexp=function(){for(var c,x,D=this.pos;;){this.pos>=this.input.length&&this.raise(D,"Unterminated regular expression");var Y=this.input.charAt(this.pos);if(Ve.test(Y)&&this.raise(D,"Unterminated regular expression"),c)c=!1;else{if(Y==="[")x=!0;else if(Y==="]"&&x)x=!1;else if(Y==="/"&&!x)break;c=Y==="\\"}++this.pos}var re=this.input.slice(D,this.pos);++this.pos;var be=this.pos,Oe=this.readWord1();this.containsEsc&&this.unexpected(be);var Ye=this.regexpState||(this.regexpState=new an(this));Ye.reset(D,re,Oe),this.validateRegExpFlags(Ye),this.validateRegExpPattern(Ye);var nt=null;try{nt=new RegExp(re,Oe)}catch{}return this.finishToken(z.regexp,{pattern:re,flags:Oe,value:nt})},Pt.readInt=function(c,x,D){for(var Y=this.options.ecmaVersion>=12&&x===void 0,re=D&&this.input.charCodeAt(this.pos)===48,be=this.pos,Oe=0,Ye=0,nt=0,Ot=x??1/0;nt<Ot;++nt,++this.pos){var It=this.input.charCodeAt(this.pos),Kt=void 0;if(Y&&It===95){re&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ye===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),nt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ye=It;continue}if(It>=97?Kt=It-97+10:It>=65?Kt=It-65+10:It>=48&&It<=57?Kt=It-48:Kt=1/0,Kt>=c)break;Ye=It,Oe=Oe*c+Kt}return Y&&Ye===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===be||x!=null&&this.pos-be!==x?null:Oe};function nr(c,x){return x?parseInt(c,8):parseFloat(c.replace(/_/g,""))}function rr(c){return typeof BigInt!="function"?null:BigInt(c.replace(/_/g,""))}Pt.readRadixNumber=function(c){var x=this.pos;this.pos+=2;var D=this.readInt(c);return D==null&&this.raise(this.start+2,"Expected number in radix "+c),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(D=rr(this.input.slice(x,this.pos)),++this.pos):Z(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,D)},Pt.readNumber=function(c){var x=this.pos;!c&&this.readInt(10,void 0,!0)===null&&this.raise(x,"Invalid number");var D=this.pos-x>=2&&this.input.charCodeAt(x)===48;D&&this.strict&&this.raise(x,"Invalid number");var Y=this.input.charCodeAt(this.pos);if(!D&&!c&&this.options.ecmaVersion>=11&&Y===110){var re=rr(this.input.slice(x,this.pos));return++this.pos,Z(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,re)}D&&/[89]/.test(this.input.slice(x,this.pos))&&(D=!1),Y===46&&!D&&(++this.pos,this.readInt(10),Y=this.input.charCodeAt(this.pos)),(Y===69||Y===101)&&!D&&(Y=this.input.charCodeAt(++this.pos),(Y===43||Y===45)&&++this.pos,this.readInt(10)===null&&this.raise(x,"Invalid number")),Z(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var be=nr(this.input.slice(x,this.pos),D);return this.finishToken(z.num,be)},Pt.readCodePoint=function(){var c=this.input.charCodeAt(this.pos),x;if(c===123){this.options.ecmaVersion<6&&this.unexpected();var D=++this.pos;x=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,x>1114111&&this.invalidStringToken(D,"Code point out of bounds")}else x=this.readHexChar(4);return x},Pt.readString=function(c){for(var x="",D=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Y=this.input.charCodeAt(this.pos);if(Y===c)break;Y===92?(x+=this.input.slice(D,this.pos),x+=this.readEscapedChar(!1),D=this.pos):Y===8232||Y===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Je(Y)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return x+=this.input.slice(D,this.pos++),this.finishToken(z.string,x)};var Un={};Pt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===Un)this.readInvalidTemplateToken();else throw c}this.inTemplateElement=!1},Pt.invalidStringToken=function(c,x){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Un;this.raise(c,x)},Pt.readTmplToken=function(){for(var c="",x=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var D=this.input.charCodeAt(this.pos);if(D===96||D===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===z.template||this.type===z.invalidTemplate)?D===36?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote)):(c+=this.input.slice(x,this.pos),this.finishToken(z.template,c));if(D===92)c+=this.input.slice(x,this.pos),c+=this.readEscapedChar(!0),x=this.pos;else if(Je(D)){switch(c+=this.input.slice(x,this.pos),++this.pos,D){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:c+=`
`;break;default:c+=String.fromCharCode(D);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),x=this.pos}else++this.pos}},Pt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Pt.readEscapedChar=function(c){var x=this.input.charCodeAt(++this.pos);switch(++this.pos,x){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ze(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c){var D=this.pos-1;this.invalidStringToken(D,"Invalid escape sequence in template string")}default:if(x>=48&&x<=55){var Y=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],re=parseInt(Y,8);return re>255&&(Y=Y.slice(0,-1),re=parseInt(Y,8)),this.pos+=Y.length-1,x=this.input.charCodeAt(this.pos),(Y!=="0"||x===56||x===57)&&(this.strict||c)&&this.invalidStringToken(this.pos-1-Y.length,c?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(re)}return Je(x)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(x)}},Pt.readHexChar=function(c){var x=this.pos,D=this.readInt(16,c);return D===null&&this.invalidStringToken(x,"Bad character escape sequence"),D},Pt.readWord1=function(){this.containsEsc=!1;for(var c="",x=!0,D=this.pos,Y=this.options.ecmaVersion>=6;this.pos<this.input.length;){var re=this.fullCharCodeAtPos();if(N(re,Y))this.pos+=re<=65535?1:2;else if(re===92){this.containsEsc=!0,c+=this.input.slice(D,this.pos);var be=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Oe=this.readCodePoint();(x?Z:N)(Oe,Y)||this.invalidStringToken(be,"Invalid Unicode escape"),c+=Ze(Oe),D=this.pos}else break;x=!1}return c+this.input.slice(D,this.pos)},Pt.readWord=function(){var c=this.readWord1(),x=z.name;return this.keywords.test(c)&&(x=xe[c]),this.finishToken(x,c)};var Hn="8.15.0";u.acorn={Parser:u,version:Hn,defaultOptions:pt,Position:Fe,SourceLocation:_t,getLineInfo:Ct,Node:se,TokenType:$,tokTypes:z,keywordTypes:xe,TokContext:H,tokContexts:L,isIdentifierChar:N,isIdentifierStart:Z,Token:fr,isNewLine:Je,lineBreak:Ve,lineBreakG:He,nonASCIIwhitespace:Ie};function Sr(c,x){return u.parse(c,x)}function Cr(c,x,D){return u.parseExpressionAt(c,x,D)}function di(c,x){return u.tokenizer(c,x)}t.Node=se,t.Parser=u,t.Position=Fe,t.SourceLocation=_t,t.TokContext=H,t.Token=fr,t.TokenType=$,t.defaultOptions=pt,t.getLineInfo=Ct,t.isIdentifierChar=N,t.isIdentifierStart=Z,t.isNewLine=Je,t.keywordTypes=xe,t.lineBreak=Ve,t.lineBreakG=He,t.nonASCIIwhitespace=Ie,t.parse=Sr,t.parseExpressionAt=Cr,t.tokContexts=L,t.tokTypes=z,t.tokenizer=di,t.version=Hn}))})(Bl,Bl.exports)),Bl.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */var Q2=Lc.exports,xm;function J2(){return xm||(xm=1,(function(l){(function(e,t){e=e||_m;var n=e.window,s=e.document,a=new function(){var r=/^(statics|enumerable|beans|preserve)$/,u=[],f=u.slice,g=Object.create,m=Object.getOwnPropertyDescriptor,w=Object.defineProperty,S=u.forEach||function(j,I){for(var G=0,V=this.length;G<V;G++)j.call(I,this[G],G,this)},C=function(j,I){for(var G in this)this.hasOwnProperty(G)&&j.call(I,this[G],G,this)},T=Object.assign||function(j){for(var I=1,G=arguments.length;I<G;I++){var V=arguments[I];for(var H in V)V.hasOwnProperty(H)&&(j[H]=V[H])}return j},P=function(j,I,G){if(j){var V=m(j,"length");(V&&typeof V.value=="number"?S:C).call(j,I,G=G||j)}return G};function R(j,I,G,V,H){var L={};function U(X,te){te=te||(te=m(I,X))&&(te.get?te:te.value),typeof te=="string"&&te[0]==="#"&&(te=j[te.substring(1)]||te);var ie=typeof te=="function",se=te,he=H||ie&&!te.base?te&&te.get?X in j:j[X]:null,ne;(!H||!he)&&(ie&&he&&(te.base=he),ie&&V!==!1&&(ne=X.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(L[ne[3].toLowerCase()+ne[4]]=ne[2]),(!se||ie||!se.get||typeof se.get!="function"||!B.isPlainObject(se))&&(se={value:se,writable:!0}),(m(j,X)||{configurable:!0}).configurable&&(se.configurable=!0,se.enumerable=G??!ne),w(j,X,se))}if(I){for(var A in I)I.hasOwnProperty(A)&&!r.test(A)&&U(A);for(var A in L){var W=L[A],q=j["set"+W],Q=j["get"+W]||q&&j["is"+W];Q&&(V===!0||Q.length===0)&&U(A,{get:Q,set:q})}}return j}function B(){for(var j=0,I=arguments.length;j<I;j++){var G=arguments[j];G&&T(this,G)}return this}return R(B,{inject:function(j){if(j){var I=j.statics===!0?j:j.statics,G=j.beans,V=j.preserve;I!==j&&R(this.prototype,j,j.enumerable,G,V),R(this,I,null,G,V)}for(var H=1,L=arguments.length;H<L;H++)this.inject(arguments[H]);return this},extend:function(){for(var j=this,I,G,V=0,H,L=arguments.length;V<L&&!(I&&G);V++)H=arguments[V],I=I||H.initialize,G=G||H.prototype;return I=I||function(){j.apply(this,arguments)},G=I.prototype=G||g(this.prototype),w(G,"constructor",{value:I,writable:!0,configurable:!0}),R(I,this),arguments.length&&this.inject.apply(I,arguments),I.base=j,I}}).inject({enumerable:!1,initialize:B,set:B,inject:function(){for(var j=0,I=arguments.length;j<I;j++){var G=arguments[j];G&&R(this,G,G.enumerable,G.beans,G.preserve)}return this},extend:function(){var j=g(this);return j.inject.apply(j,arguments)},each:function(j,I){return P(this,j,I)},clone:function(){return new this.constructor(this)},statics:{set:T,each:P,create:g,define:w,describe:m,clone:function(j){return T(new j.constructor,j)},isPlainObject:function(j){var I=j!=null&&j.constructor;return I&&(I===Object||I===B||I.name==="Object")},pick:function(j,I){return j!==t?j:I},slice:function(j,I,G){return f.call(j,I,G)}}})};l.exports=a,a.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,function(r,u){if(!/^_/.test(u)){var f=typeof r;this.push(u+": "+(f==="number"?b.instance.number(r):f==="string"?"'"+r+"'":r))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(r){return a.importJSON(r,this)},exportJSON:function(r){return a.exportJSON(this,r)},toJSON:function(){return a.serialize(this)},set:function(r,u){return r&&a.filter(this,r,u,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function r(){var u=r.base.apply(this,arguments),f=u.prototype._class;return f&&!a.exports[f]&&(a.exports[f]=u),u},equals:function(r,u){if(r===u)return!0;if(r&&r.equals)return r.equals(u);if(u&&u.equals)return u.equals(r);if(r&&u&&typeof r=="object"&&typeof u=="object"){if(Array.isArray(r)&&Array.isArray(u)){var f=r.length;if(f!==u.length)return!1;for(;f--;)if(!a.equals(r[f],u[f]))return!1}else{var g=Object.keys(r),f=g.length;if(f!==Object.keys(u).length)return!1;for(;f--;){var m=g[f];if(!(u.hasOwnProperty(m)&&a.equals(r[m],u[m])))return!1}}return!0}return!1},read:function(r,u,f,g){if(this===a){var m=this.peek(r,u);return r.__index++,m}var w=this.prototype,S=w._readIndex,C=u||S&&r.__index||0,T=r.length,P=r[C];if(g=g||T-C,P instanceof this||f&&f.readNull&&P==null&&g<=1)return S&&(r.__index=C+1),P&&f&&f.clone?P.clone():P;if(P=a.create(w),S&&(P.__read=!0),P=P.initialize.apply(P,C>0||C+g<T?a.slice(r,C,C+g):r)||P,S){r.__index=C+P.__read;var R=P.__filtered;R&&(r.__filtered=R,P.__filtered=t),P.__read=t}return P},peek:function(r,u){return r[r.__index=u||r.__index||0]},remain:function(r){return r.length-(r.__index||0)},readList:function(r,u,f,g){for(var m=[],w,S=u||0,C=g?S+g:r.length,T=S;T<C;T++)m.push(Array.isArray(w=r[T])?this.read(w,0,f):this.read(r,T,f,1));return m},readNamed:function(r,u,f,g,m){var w=this.getNamed(r,u),S=w!==t;if(S){var C=r.__filtered;if(!C){var T=this.getSource(r);C=r.__filtered=a.create(T),C.__unfiltered=T}C[u]=t}return this.read(S?[w]:r,f,g,m)},readSupported:function(r,u){var f=this.getSource(r),g=this,m=!1;return f&&Object.keys(f).forEach(function(w){if(w in u){var S=g.readNamed(r,w);S!==t&&(u[w]=S),m=!0}}),m},getSource:function(r){var u=r.__source;if(u===t){var f=r.length===1&&r[0];u=r.__source=f&&a.isPlainObject(f)?f:null}return u},getNamed:function(r,u){var f=this.getSource(r);if(f)return u?f[u]:r.__filtered||f},hasNamed:function(r,u){return!!this.getNamed(r,u)},filter:function(r,u,f,g){var m;function w(R){if(!(f&&R in f)&&!(m&&R in m)){var B=u[R];B!==t&&(r[R]=B)}}if(g){for(var S={},C=0,T,P=g.length;C<P;C++)(T=g[C])in u&&(w(T),S[T]=!0);m=S}return Object.keys(u.__unfiltered||u).forEach(w),r},isPlainValue:function(r,u){return a.isPlainObject(r)||Array.isArray(r)||u&&typeof r=="string"},serialize:function(r,u,f,g){u=u||{};var m=!g,w;if(m&&(u.formatter=new b(u.precision),g={length:0,definitions:{},references:{},add:function(B,j){var I="#"+B._id,G=this.references[I];if(!G){this.length++;var V=j.call(B),H=B._class;H&&V[0]!==H&&V.unshift(H),this.definitions[I]=V,G=this.references[I]=[I]}return G}}),r&&r._serialize){w=r._serialize(u,g);var S=r._class;S&&!r._compactSerialize&&(m||!f)&&w[0]!==S&&w.unshift(S)}else if(Array.isArray(r)){w=[];for(var C=0,T=r.length;C<T;C++)w[C]=a.serialize(r[C],u,f,g)}else if(a.isPlainObject(r)){w={};for(var P=Object.keys(r),C=0,T=P.length;C<T;C++){var R=P[C];w[R]=a.serialize(r[R],u,f,g)}}else typeof r=="number"?w=u.formatter.number(r,u.precision):w=r;return m&&g.length>0?[["dictionary",g.definitions],w]:w},deserialize:function(r,u,f,g,m){var w=r,S=!f,C=S&&r&&r.length&&r[0][0]==="dictionary";if(f=f||{},Array.isArray(r)){var T=r[0],P=T==="dictionary";if(r.length==1&&/^#/.test(T))return f.dictionary[T];T=a.exports[T],w=[];for(var R=T?1:0,B=r.length;R<B;R++)w.push(a.deserialize(r[R],u,f,P,C));if(T){var j=w;u?w=u(T,j,S||m):w=new T(j)}}else if(a.isPlainObject(r)){w={},g&&(f.dictionary=w);for(var I in r)w[I]=a.deserialize(r[I],u,f)}return C?w[1]:w},exportJSON:function(r,u){var f=a.serialize(r,u);return u&&u.asString==!1?f:JSON.stringify(f)},importJSON:function(r,u){return a.deserialize(typeof r=="string"?JSON.parse(r):r,function(f,g,m){var w=m&&u&&u.constructor===f,S=w?u:a.create(f.prototype);if(g.length===1&&S instanceof z&&(w||!(S instanceof He))){var C=g[0];a.isPlainObject(C)&&(C.insert=!1,w&&(g=g.concat([z.INSERT])))}return(w?S.set:f).apply(S,g),w&&(u=null),S})},push:function(r,u){var f=u.length;if(f<4096)r.push.apply(r,u);else{var g=r.length;r.length+=f;for(var m=0;m<f;m++)r[g+m]=u[m]}return r},splice:function(r,u,f,g){var m=u&&u.length,w=f===t;f=w?r.length:f,f>r.length&&(f=r.length);for(var S=0;S<m;S++)u[S]._index=f+S;if(w)return a.push(r,u),[];var C=[f,g];u&&a.push(C,u);for(var T=r.splice.apply(r,C),S=0,P=T.length;S<P;S++)T[S]._index=t;for(var S=f+m,P=r.length;S<P;S++)r[S]._index=S;return T},capitalize:function(r){return r.replace(/\b[a-z]/g,function(u){return u.toUpperCase()})},camelize:function(r){return r.replace(/-(.)/g,function(u,f){return f.toUpperCase()})},hyphenate:function(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(r,u){if(typeof r!="string")a.each(r,function(w,S){this.on(S,w)},this);else{var f=this._eventTypes,g=f&&f[r],m=this._callbacks=this._callbacks||{};m=m[r]=m[r]||[],m.indexOf(u)===-1&&(m.push(u),g&&g.install&&m.length===1&&g.install.call(this,r))}return this},off:function(r,u){if(typeof r!="string"){a.each(r,function(S,C){this.off(C,S)},this);return}var f=this._eventTypes,g=f&&f[r],m=this._callbacks&&this._callbacks[r],w;return m&&(!u||(w=m.indexOf(u))!==-1&&m.length===1?(g&&g.uninstall&&g.uninstall.call(this,r),delete this._callbacks[r]):w!==-1&&m.splice(w,1)),this},once:function(r,u){return this.on(r,function f(){u.apply(this,arguments),this.off(r,f)})},emit:function(r,u){var f=this._callbacks&&this._callbacks[r];if(!f)return!1;var g=a.slice(arguments,1),m=u&&u.target&&!u.currentTarget;f=f.slice(),m&&(u.currentTarget=this);for(var w=0,S=f.length;w<S;w++)if(f[w].apply(this,g)==!1){u&&u.stop&&u.stop();break}return m&&delete u.currentTarget,!0},responds:function(r){return!!(this._callbacks&&this._callbacks[r])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(r){var u=this._eventTypes,f=this._callbacks,g=r?"install":"uninstall";if(u){for(var m in f)if(f[m].length>0){var w=u[m],S=w&&w[g];S&&S.call(this,m)}}},statics:{inject:function r(u){var f=u._events;if(f){var g={};a.each(f,function(m,w){var S=typeof m=="string",C=S?m:w,T=a.capitalize(C),P=C.substring(2).toLowerCase();g[P]=S?{}:m,C="_"+C,u["get"+T]=function(){return this[C]},u["set"+T]=function(R){var B=this[C];B&&this.off(P,B),R&&this.on(P,R),this[C]=R}}),u._eventTypes=g}return r.base.apply(this,arguments)}}},p=a.extend({_class:"PaperScope",initialize:function r(){Ft=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=r._id++,r._scopes[this._id]=this;var u=r.prototype;if(!this.support){var f=tn.getContext(1,1)||{};u.support={nativeDash:"setLineDash"in f||"mozDash"in f,nativeBlendModes:fi.nativeModes},tn.release(f)}if(!this.agent){var g=e.navigator.userAgent.toLowerCase(),m=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(g)||[])[0],w=m==="darwin"?"mac":m,S=u.agent=u.browser={platform:w};w&&(S[w]=!0),g.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(C,T,P,R,B){if(!S.chrome){var j=T==="opera"?R:/^(node|trident)$/.test(T)?B:P;S.version=j,S.versionNumber=parseFloat(j),T={trident:"msie",jsdom:"node"}[T]||T,S.name=T,S[T]=!0}}),S.chrome&&delete S.webkit,S.atom&&delete S.chrome}},version:"0.12.18",getView:function(){var r=this.project;return r&&r._view},getPaper:function(){return this},execute:function(r,u){var f=Ft.PaperScript.execute(r,this,u);return en.updateFocus(),f},install:function(r){var u=this;a.each(["project","view","tool"],function(g){a.define(r,g,{configurable:!0,get:function(){return u[g]}})});for(var f in this)!/^_/.test(f)&&this[f]&&(r[f]=this[f])},setup:function(r){return Ft=this,this.project=new Ce(r),this},createCanvas:function(r,u){return tn.getCanvas(r,u)},activate:function(){Ft=this},clear:function(){for(var r=this.projects,u=this.tools,f=r.length-1;f>=0;f--)r[f].remove();for(var f=u.length-1;f>=0;f--)u[f].remove()},remove:function(){this.clear(),delete p._scopes[this._id]},statics:new function(){function r(u){return u+="Attribute",function(f,g){return f[u](g)||f[u]("data-paper-"+g)}}return{_scopes:{},_id:0,get:function(u){return this._scopes[u]||null},getAttribute:r("get"),hasAttribute:r("has")}}}),v=a.extend(h,{initialize:function(r){this._scope=Ft,this._index=this._scope[this._list].push(this)-1,(r||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var r=this._scope[this._reference];return r&&r!==this&&r.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",r),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),y={findItemBoundsCollisions:function(r,u,f){function g(S){for(var C=new Array(S.length),T=0;T<S.length;T++){var P=S[T].getBounds();C[T]=[P.left,P.top,P.right,P.bottom]}return C}var m=g(r),w=!u||u===r?m:g(u);return this.findBoundsCollisions(m,w,f||0)},findCurveBoundsCollisions:function(r,u,f,g){function m(j){for(var I=Math.min,G=Math.max,V=new Array(j.length),H=0;H<j.length;H++){var L=j[H];V[H]=[I(L[0],L[2],L[4],L[6]),I(L[1],L[3],L[5],L[7]),G(L[0],L[2],L[4],L[6]),G(L[1],L[3],L[5],L[7])]}return V}var w=m(r),S=!u||u===r?w:m(u);if(g){for(var C=this.findBoundsCollisions(w,S,f||0,!1,!0),T=this.findBoundsCollisions(w,S,f||0,!0,!0),P=[],R=0,B=C.length;R<B;R++)P[R]={hor:C[R],ver:T[R]};return P}return this.findBoundsCollisions(w,S,f||0)},findBoundsCollisions:function(r,u,f,g,m){var w=!u||r===u,S=w?r:r.concat(u),C=r.length,T=S.length;function P(We,$e,it){for(var je=0,De=We.length;je<De;){var et=De+je>>>1;S[We[et]][$e]<it?je=et+1:De=et}return je-1}for(var R=g?1:0,B=R+2,j=g?0:1,I=j+2,G=new Array(T),V=0;V<T;V++)G[V]=V;G.sort(function(We,$e){return S[We][R]-S[$e][R]});for(var H=[],L=new Array(C),V=0;V<T;V++){var U=G[V],A=S[U],W=w?U:U-C,q=U<C,Q=w||!q,X=q?[]:null;if(H.length){var te=P(H,B,A[R]-f)+1;if(H.splice(0,te),w&&m){X=X.concat(H);for(var ie=0;ie<H.length;ie++){var se=H[ie];L[se].push(W)}}else for(var he=A[I],ne=A[j],ie=0;ie<H.length;ie++){var se=H[ie],ce=S[se],fe=se<C,ve=w||se>=C;(m||(q&&ve||Q&&fe)&&he>=ce[j]-f&&ne<=ce[I]+f)&&(q&&ve&&X.push(w?se:se-C),Q&&fe&&L[se].push(W))}}if(q&&(r===u&&X.push(U),L[U]=X),H.length){var ye=A[B],Ee=P(H,B,ye);H.splice(Ee+1,0,U)}else H.push(U)}for(var V=0;V<L.length;V++){var Ne=L[V];Ne&&Ne.sort(function($e,it){return $e-it})}return L}},b=a.extend({initialize:function(r){this.precision=a.pick(r,5),this.multiplier=Math.pow(10,this.precision)},number:function(r){return this.precision<16?Math.round(r*this.multiplier)/this.multiplier:r},pair:function(r,u,f){return this.number(r)+(f||",")+this.number(u)},point:function(r,u){return this.number(r.x)+(u||",")+this.number(r.y)},size:function(r,u){return this.number(r.width)+(u||",")+this.number(r.height)},rectangle:function(r,u){return this.point(r,u)+(u||",")+this.size(r,u)}});b.instance=new b;var O=new function(){var r=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],u=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],f=Math.abs,g=Math.sqrt,m=Math.pow,w=Math.log2||function(B){return Math.log(B)*Math.LOG2E},S=1e-12,C=112e-18;function T(B,j,I){return B<j?j:B>I?I:B}function P(B,j,I){function G(te){var ie=te*134217729,se=te-ie,he=se+ie,ne=te-he;return[he,ne]}var V=j*j-B*I,H=j*j+B*I;if(f(V)*3<H){var L=G(B),U=G(j),A=G(I),W=j*j,q=U[0]*U[0]-W+2*U[0]*U[1]+U[1]*U[1],Q=B*I,X=L[0]*A[0]-Q+L[0]*A[1]+L[1]*A[0]+L[1]*A[1];V=W-Q+(q-X)}return V}function R(){var B=Math.max.apply(Math,arguments);return B&&(B<1e-8||B>1e8)?m(2,-Math.round(w(B))):0}return{EPSILON:S,MACHINE_EPSILON:C,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(g(2)-1)/3,isZero:function(B){return B>=-S&&B<=S},isMachineZero:function(B){return B>=-C&&B<=C},clamp:T,integrate:function(B,j,I,G){for(var V=r[G-2],H=u[G-2],L=(I-j)*.5,U=L+j,A=0,W=G+1>>1,q=G&1?H[A++]*B(U):0;A<W;){var Q=L*V[A];q+=H[A++]*(B(U+Q)+B(U-Q))}return L*q},findRoot:function(B,j,I,G,V,H,L){for(var U=0;U<H;U++){var A=B(I),W=A/j(I),q=I-W;if(f(W)<L){I=q;break}A>0?(V=I,I=q<=G?(G+V)*.5:q):(G=I,I=q>=V?(G+V)*.5:q)}return T(I,G,V)},solveQuadratic:function(B,j,I,G,V,H){var L,U=1/0;if(f(B)<S){if(f(j)<S)return f(I)<S?-1:0;L=-I/j}else{j*=-.5;var A=P(B,j,I);if(A&&f(A)<C){var W=R(f(B),f(j),f(I));W&&(B*=W,j*=W,I*=W,A=P(B,j,I))}if(A>=-C){var q=A<0?0:g(A),Q=j+(j<0?-q:q);Q===0?(L=I/B,U=-L):(L=Q/B,U=I/Q)}}var X=0,te=V==null,ie=V-S,se=H+S;return isFinite(L)&&(te||L>ie&&L<se)&&(G[X++]=te?L:T(L,V,H)),U!==L&&isFinite(U)&&(te||U>ie&&U<se)&&(G[X++]=te?U:T(U,V,H)),X},solveCubic:function(B,j,I,G,V,H,L){var U=R(f(B),f(j),f(I),f(G)),A,W,q,Q,X;U&&(B*=U,j*=U,I*=U,G*=U);function te(Ee){A=Ee;var Ne=B*A;W=Ne+j,q=W*A+I,Q=(Ne+W)*A+q,X=q*A+G}if(f(B)<S)B=j,W=I,q=G,A=1/0;else if(f(G)<S)W=j,q=I,A=0;else{te(-(j/B)/3);var ie=X/B,se=m(f(ie),1/3),he=ie<0?-1:1,ne=-Q/B,ce=ne>0?1.324717957244746*Math.max(se,g(ne)):se,fe=A-he*ce;if(fe!==A){do te(fe),fe=Q===0?A:A-X/Q/(1+C);while(he*fe>he*A);f(B)*A*A>f(G/A)&&(q=-G/A,W=(q-I)/A)}}var ve=O.solveQuadratic(B,W,q,V,H,L),ye=H==null;return isFinite(A)&&(ve===0||ve>0&&A!==V[0]&&A!==V[1])&&(ye||A>H-S&&A<L+S)&&(V[ve++]=ye?A:T(A,H,L)),ve}}},F={_id:1,_pools:{},get:function(r){if(r){var u=this._pools[r];return u||(u=this._pools[r]={_id:1}),u._id++}else return this._id++}},E=a.extend({_class:"Point",_readIndex:!0,initialize:function(u,f){var g=typeof u,m=this.__read,w=0;if(g==="number"){var S=typeof f=="number";this._set(u,S?f:u),m&&(w=S?2:1)}else if(g==="undefined"||u===null)this._set(0,0),m&&(w=u===null?1:0);else{var C=g==="string"?u.split(/[\s,]+/)||[]:u;w=1,Array.isArray(C)?this._set(+C[0],+(C.length>1?C[1]:C[0])):"x"in C?this._set(C.x||0,C.y||0):"width"in C?this._set(C.width||0,C.height||0):"angle"in C?(this._set(C.length||0,0),this.setAngle(C.angle||0)):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(r,u){return this.x=r,this.y=u,this},equals:function(r){return this===r||r&&(this.x===r.x&&this.y===r.y||Array.isArray(r)&&this.x===r[0]&&this.y===r[1])||!1},clone:function(){return new E(this.x,this.y)},toString:function(){var r=b.instance;return"{ x: "+r.number(this.x)+", y: "+r.number(this.y)+" }"},_serialize:function(r){var u=r.formatter;return[u.number(this.x),u.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(r){if(this.isZero()){var u=this._angle||0;this._set(Math.cos(u)*r,Math.sin(u)*r)}else{var f=r/this.getLength();O.isZero(f)&&this.getAngle(),this._set(this.x*f,this.y*f)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(r){this.setAngleInRadians.call(this,r*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var r=E.read(arguments),u=this.getLength()*r.getLength();if(O.isZero(u))return NaN;var f=this.dot(r)/u;return Math.acos(f<-1?-1:f>1?1:f)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(r){if(this._angle=r,!this.isZero()){var u=this.getLength();this._set(Math.cos(r)*u,Math.sin(r)*u)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var r=E.read(arguments);return Math.atan2(this.cross(r),this.dot(r))*180/Math.PI},getDistance:function(){var r=arguments,u=E.read(r),f=u.x-this.x,g=u.y-this.y,m=f*f+g*g,w=a.read(r);return w?m:Math.sqrt(m)},normalize:function(r){r===t&&(r=1);var u=this.getLength(),f=u!==0?r/u:0,g=new E(this.x*f,this.y*f);return f>=0&&(g._angle=this._angle),g},rotate:function(r,u){if(r===0)return this.clone();r=r*Math.PI/180;var f=u?this.subtract(u):this,g=Math.sin(r),m=Math.cos(r);return f=new E(f.x*m-f.y*g,f.x*g+f.y*m),u?f.add(u):f},transform:function(r){return r?r._transformPoint(this):this},add:function(){var r=E.read(arguments);return new E(this.x+r.x,this.y+r.y)},subtract:function(){var r=E.read(arguments);return new E(this.x-r.x,this.y-r.y)},multiply:function(){var r=E.read(arguments);return new E(this.x*r.x,this.y*r.y)},divide:function(){var r=E.read(arguments);return new E(this.x/r.x,this.y/r.y)},modulo:function(){var r=E.read(arguments);return new E(this.x%r.x,this.y%r.y)},negate:function(){return new E(-this.x,-this.y)},isInside:function(){return ee.read(arguments).contains(this)},isClose:function(){var r=arguments,u=E.read(r),f=a.read(r);return this.getDistance(u)<=f},isCollinear:function(){var r=E.read(arguments);return E.isCollinear(this.x,this.y,r.x,r.y)},isColinear:"#isCollinear",isOrthogonal:function(){var r=E.read(arguments);return E.isOrthogonal(this.x,this.y,r.x,r.y)},isZero:function(){var r=O.isZero;return r(this.x)&&r(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(r){return this.x*(r>1&&r<4?-1:1)>=0&&this.y*(r>2?-1:1)>=0},dot:function(){var r=E.read(arguments);return this.x*r.x+this.y*r.y},cross:function(){var r=E.read(arguments);return this.x*r.y-this.y*r.x},project:function(){var r=E.read(arguments),u=r.isZero()?0:this.dot(r)/r.dot(r);return new E(r.x*u,r.y*u)},statics:{min:function(){var r=arguments,u=E.read(r),f=E.read(r);return new E(Math.min(u.x,f.x),Math.min(u.y,f.y))},max:function(){var r=arguments,u=E.read(r),f=E.read(r);return new E(Math.max(u.x,f.x),Math.max(u.y,f.y))},random:function(){return new E(Math.random(),Math.random())},isCollinear:function(r,u,f,g){return Math.abs(r*g-u*f)<=Math.sqrt((r*r+u*u)*(f*f+g*g))*1e-8},isOrthogonal:function(r,u,f,g){return Math.abs(r*f+u*g)<=Math.sqrt((r*r+u*u)*(f*f+g*g))*1e-8}}},a.each(["round","ceil","floor","abs"],function(r){var u=Math[r];this[r]=function(){return new E(u(this.x),u(this.y))}},{})),Z=E.extend({initialize:function(u,f,g,m){this._x=u,this._y=f,this._owner=g,this._setter=m},_set:function(r,u,f){return this._x=r,this._y=u,f||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(r){this._x=r,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(r){this._y=r,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(r){this._owner._changeSelection(this._getSelection(),r)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),N=a.extend({_class:"Size",_readIndex:!0,initialize:function(u,f){var g=typeof u,m=this.__read,w=0;if(g==="number"){var S=typeof f=="number";this._set(u,S?f:u),m&&(w=S?2:1)}else if(g==="undefined"||u===null)this._set(0,0),m&&(w=u===null?1:0);else{var C=g==="string"?u.split(/[\s,]+/)||[]:u;w=1,Array.isArray(C)?this._set(+C[0],+(C.length>1?C[1]:C[0])):"width"in C?this._set(C.width||0,C.height||0):"x"in C?this._set(C.x||0,C.y||0):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(r,u){return this.width=r,this.height=u,this},equals:function(r){return r===this||r&&(this.width===r.width&&this.height===r.height||Array.isArray(r)&&this.width===r[0]&&this.height===r[1])||!1},clone:function(){return new N(this.width,this.height)},toString:function(){var r=b.instance;return"{ width: "+r.number(this.width)+", height: "+r.number(this.height)+" }"},_serialize:function(r){var u=r.formatter;return[u.number(this.width),u.number(this.height)]},add:function(){var r=N.read(arguments);return new N(this.width+r.width,this.height+r.height)},subtract:function(){var r=N.read(arguments);return new N(this.width-r.width,this.height-r.height)},multiply:function(){var r=N.read(arguments);return new N(this.width*r.width,this.height*r.height)},divide:function(){var r=N.read(arguments);return new N(this.width/r.width,this.height/r.height)},modulo:function(){var r=N.read(arguments);return new N(this.width%r.width,this.height%r.height)},negate:function(){return new N(-this.width,-this.height)},isZero:function(){var r=O.isZero;return r(this.width)&&r(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(r,u){return new N(Math.min(r.width,u.width),Math.min(r.height,u.height))},max:function(r,u){return new N(Math.max(r.width,u.width),Math.max(r.height,u.height))},random:function(){return new N(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],function(r){var u=Math[r];this[r]=function(){return new N(u(this.width),u(this.height))}},{})),$=N.extend({initialize:function(u,f,g,m){this._width=u,this._height=f,this._owner=g,this._setter=m},_set:function(r,u,f){return this._width=r,this._height=u,f||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(r){this._width=r,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(r){this._height=r,this._owner[this._setter](this)}}),ee=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(u,f,g,m){var w=arguments,S=typeof u,C;if(S==="number"?(this._set(u,f,g,m),C=4):S==="undefined"||u===null?(this._set(0,0,0,0),C=u===null?1:0):w.length===1&&(Array.isArray(u)?(this._set.apply(this,u),C=1):u.x!==t||u.width!==t?(this._set(u.x||0,u.y||0,u.width||0,u.height||0),C=1):u.from===t&&u.to===t&&(this._set(0,0,0,0),a.readSupported(w,this)&&(C=1))),C===t){var T=E.readNamed(w,"from"),P=a.peek(w),R=T.x,B=T.y,j,I;if(P&&P.x!==t||a.hasNamed(w,"to")){var G=E.readNamed(w,"to");j=G.x-R,I=G.y-B,j<0&&(R=G.x,j=-j),I<0&&(B=G.y,I=-I)}else{var V=N.read(w);j=V.width,I=V.height}this._set(R,B,j,I),C=w.__index}var H=w.__filtered;return H&&(this.__filtered=H),this.__read&&(this.__read=C),this},set:"#initialize",_set:function(r,u,f,g){return this.x=r,this.y=u,this.width=f,this.height=g,this},clone:function(){return new ee(this.x,this.y,this.width,this.height)},equals:function(r){var u=a.isPlainValue(r)?ee.read(arguments):r;return u===this||u&&this.x===u.x&&this.y===u.y&&this.width===u.width&&this.height===u.height||!1},toString:function(){var r=b.instance;return"{ x: "+r.number(this.x)+", y: "+r.number(this.y)+", width: "+r.number(this.width)+", height: "+r.number(this.height)+" }"},_serialize:function(r){var u=r.formatter;return[u.number(this.x),u.number(this.y),u.number(this.width),u.number(this.height)]},getPoint:function(r){var u=r?E:Z;return new u(this.x,this.y,this,"setPoint")},setPoint:function(){var r=E.read(arguments);this.x=r.x,this.y=r.y},getSize:function(r){var u=r?N:$;return new u(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var r=N.read(arguments),u=this._sx,f=this._sy,g=r.width,m=r.height;u&&(this.x+=(this.width-g)*u),f&&(this.y+=(this.height-m)*f),this.width=g,this.height=m,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(r){if(!this._fw){var u=r-this.x;this.width-=this._sx===.5?u*2:u}this.x=r,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(r){if(!this._fh){var u=r-this.y;this.height-=this._sy===.5?u*2:u}this.y=r,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(r){if(!this._fw){var u=r-this.x;this.width=this._sx===.5?u*2:u}this.x=r-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(r){if(!this._fh){var u=r-this.y;this.height=this._sy===.5?u*2:u}this.y=r-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(r){this._fw||this._sx===.5?this.x=r-this.width/2:(this._sx&&(this.x+=(r-this.x)*2*this._sx),this.width=(r-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(r){this._fh||this._sy===.5?this.y=r-this.height/2:(this._sy&&(this.y+=(r-this.y)*2*this._sy),this.height=(r-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(r){var u=r?E:Z;return new u(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var r=E.read(arguments);return this.setCenterX(r.x),this.setCenterY(r.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(r){return r&&r.width!==t||(Array.isArray(r)?r:arguments).length===4?this._containsRectangle(ee.read(arguments)):this._containsPoint(E.read(arguments))},_containsPoint:function(r){var u=r.x,f=r.y;return u>=this.x&&f>=this.y&&u<=this.x+this.width&&f<=this.y+this.height},_containsRectangle:function(r){var u=r.x,f=r.y;return u>=this.x&&f>=this.y&&u+r.width<=this.x+this.width&&f+r.height<=this.y+this.height},intersects:function(){var r=ee.read(arguments),u=a.read(arguments)||0;return r.x+r.width>this.x-u&&r.y+r.height>this.y-u&&r.x<this.x+this.width+u&&r.y<this.y+this.height+u},intersect:function(){var r=ee.read(arguments),u=Math.max(this.x,r.x),f=Math.max(this.y,r.y),g=Math.min(this.x+this.width,r.x+r.width),m=Math.min(this.y+this.height,r.y+r.height);return new ee(u,f,g-u,m-f)},unite:function(){var r=ee.read(arguments),u=Math.min(this.x,r.x),f=Math.min(this.y,r.y),g=Math.max(this.x+this.width,r.x+r.width),m=Math.max(this.y+this.height,r.y+r.height);return new ee(u,f,g-u,m-f)},include:function(){var r=E.read(arguments),u=Math.min(this.x,r.x),f=Math.min(this.y,r.y),g=Math.max(this.x+this.width,r.x),m=Math.max(this.y+this.height,r.y);return new ee(u,f,g-u,m-f)},expand:function(){var r=N.read(arguments),u=r.width,f=r.height;return new ee(this.x-u/2,this.y-f/2,this.width+u,this.height+f)},scale:function(r,u){return this.expand(this.width*r-this.width,this.height*(u===t?r:u)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(r,u){var f=r.join(""),g=/^[RL]/.test(f);u>=4&&(r[1]+=g?"Y":"X");var m=r[g?0:1],w=r[g?1:0],S="get"+m,C="get"+w,T="set"+m,P="set"+w,R="get"+f,B="set"+f;this[R]=function(j){var I=j?E:Z;return new I(this[S](),this[C](),this,B)},this[B]=function(){var j=E.read(arguments);this[T](j.x),this[P](j.y)}},{beans:!0})),ae=ee.extend({initialize:function(u,f,g,m,w,S){this._set(u,f,g,m,!0),this._owner=w,this._setter=S},_set:function(r,u,f,g,m){return this._x=r,this._y=u,this._width=f,this._height=g,m||this._owner[this._setter](this),this}},new function(){var r=ee.prototype;return a.each(["x","y","width","height"],function(u){var f=a.capitalize(u),g="_"+u;this["get"+f]=function(){return this[g]},this["set"+f]=function(m){this[g]=m,this._dontNotify||this._owner[this._setter](this)}},a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(u){var f="set"+u;this[f]=function(){this._dontNotify=!0,r[f].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(u){var f=this._owner;f._changeSelection&&f._changeSelection(2,u)}}))}),ue=a.extend({_class:"Matrix",initialize:function r(u,f){var g=arguments,m=g.length,w=!0;if(m>=6?this._set.apply(this,g):m===1||m===2?u instanceof r?this._set(u._a,u._b,u._c,u._d,u._tx,u._ty,f):Array.isArray(u)?this._set.apply(this,f?u.concat([f]):u):w=!1:m?w=!1:this.reset(),!w)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(r,u,f,g,m,w,S){return this._a=r,this._b=u,this._c=f,this._d=g,this._tx=m,this._ty=w,S||this._changed(),this},_serialize:function(r,u){return a.serialize(this.getValues(),r,!0,u)},_changed:function(){var r=this._owner;r&&(r._applyMatrix?r.transform(null,!0):r._changed(25))},clone:function(){return new ue(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(r){return r===this||r&&this._a===r._a&&this._b===r._b&&this._c===r._c&&this._d===r._d&&this._tx===r._tx&&this._ty===r._ty},toString:function(){var r=b.instance;return"[["+[r.number(this._a),r.number(this._c),r.number(this._tx)].join(", ")+"], ["+[r.number(this._b),r.number(this._d),r.number(this._ty)].join(", ")+"]]"},reset:function(r){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,r||this._changed(),this},apply:function(r,u){var f=this._owner;return f?(f.transform(null,a.pick(r,!0),u),this.isIdentity()):!1},translate:function(){var r=E.read(arguments),u=r.x,f=r.y;return this._tx+=u*this._a+f*this._c,this._ty+=u*this._b+f*this._d,this._changed(),this},scale:function(){var r=arguments,u=E.read(r),f=E.read(r,0,{readNull:!0});return f&&this.translate(f),this._a*=u.x,this._b*=u.x,this._c*=u.y,this._d*=u.y,f&&this.translate(f.negate()),this._changed(),this},rotate:function(r){r*=Math.PI/180;var u=E.read(arguments,1),f=u.x,g=u.y,m=Math.cos(r),w=Math.sin(r),S=f-f*m+g*w,C=g-f*w-g*m,T=this._a,P=this._b,R=this._c,B=this._d;return this._a=m*T+w*R,this._b=m*P+w*B,this._c=-w*T+m*R,this._d=-w*P+m*B,this._tx+=S*T+C*R,this._ty+=S*P+C*B,this._changed(),this},shear:function(){var r=arguments,u=E.read(r),f=E.read(r,0,{readNull:!0});f&&this.translate(f);var g=this._a,m=this._b;return this._a+=u.y*this._c,this._b+=u.y*this._d,this._c+=u.x*g,this._d+=u.x*m,f&&this.translate(f.negate()),this._changed(),this},skew:function(){var r=arguments,u=E.read(r),f=E.read(r,0,{readNull:!0}),g=Math.PI/180,m=new E(Math.tan(u.x*g),Math.tan(u.y*g));return this.shear(m,f)},append:function(r,u){if(r){var f=this._a,g=this._b,m=this._c,w=this._d,S=r._a,C=r._c,T=r._b,P=r._d,R=r._tx,B=r._ty;this._a=S*f+T*m,this._c=C*f+P*m,this._b=S*g+T*w,this._d=C*g+P*w,this._tx+=R*f+B*m,this._ty+=R*g+B*w,u||this._changed()}return this},prepend:function(r,u){if(r){var f=this._a,g=this._b,m=this._c,w=this._d,S=this._tx,C=this._ty,T=r._a,P=r._c,R=r._b,B=r._d,j=r._tx,I=r._ty;this._a=T*f+P*g,this._c=T*m+P*w,this._b=R*f+B*g,this._d=R*m+B*w,this._tx=T*S+P*C+j,this._ty=R*S+B*C+I,u||this._changed()}return this},appended:function(r){return this.clone().append(r)},prepended:function(r){return this.clone().prepend(r)},invert:function(){var r=this._a,u=this._b,f=this._c,g=this._d,m=this._tx,w=this._ty,S=r*g-u*f,C=null;return S&&!isNaN(S)&&isFinite(m)&&isFinite(w)&&(this._a=g/S,this._b=-u/S,this._c=-f/S,this._d=r/S,this._tx=(f*w-g*m)/S,this._ty=(u*m-r*w)/S,C=this),C},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new ue(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var r=this._a*this._d-this._c*this._b;return r&&!isNaN(r)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(r,u,f){return arguments.length<3?this._transformPoint(E.read(arguments)):this._transformCoordinates(r,u,f)},_transformPoint:function(r,u,f){var g=r.x,m=r.y;return u||(u=new E),u._set(g*this._a+m*this._c+this._tx,g*this._b+m*this._d+this._ty,f)},_transformCoordinates:function(r,u,f){for(var g=0,m=2*f;g<m;g+=2){var w=r[g],S=r[g+1];u[g]=w*this._a+S*this._c+this._tx,u[g+1]=w*this._b+S*this._d+this._ty}return u},_transformCorners:function(r){var u=r.x,f=r.y,g=u+r.width,m=f+r.height,w=[u,f,g,f,g,m,u,m];return this._transformCoordinates(w,w,4)},_transformBounds:function(r,u,f){for(var g=this._transformCorners(r),m=g.slice(0,2),w=m.slice(),S=2;S<8;S++){var C=g[S],T=S&1;C<m[T]?m[T]=C:C>w[T]&&(w[T]=C)}return u||(u=new ee),u._set(m[0],m[1],w[0]-m[0],w[1]-m[1],f)},inverseTransform:function(){return this._inverseTransform(E.read(arguments))},_inverseTransform:function(r,u,f){var g=this._a,m=this._b,w=this._c,S=this._d,C=this._tx,T=this._ty,P=g*S-m*w,R=null;if(P&&!isNaN(P)&&isFinite(C)&&isFinite(T)){var B=r.x-this._tx,j=r.y-this._ty;u||(u=new E),R=u._set((B*S-j*w)/P,(j*g-B*m)/P,f)}return R},decompose:function(){var r=this._a,u=this._b,f=this._c,g=this._d,m=r*g-u*f,w=Math.sqrt,S=Math.atan2,C=180/Math.PI,T,P,R;if(r!==0||u!==0){var B=w(r*r+u*u);T=Math.acos(r/B)*(u>0?1:-1),P=[B,m/B],R=[S(r*f+u*g,B*B),0]}else if(f!==0||g!==0){var j=w(f*f+g*g);T=Math.asin(f/j)*(g>0?1:-1),P=[m/j,j],R=[0,S(r*f+u*g,j*j)]}else T=0,R=P=[0,0];return{translation:this.getTranslation(),rotation:T*C,scaling:new E(P),skewing:new E(R[0]*C,R[1]*C)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new E(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(r){this.isIdentity()||r.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],function(r){var u=a.capitalize(r),f="_"+r;this["get"+u]=function(){return this[f]},this["set"+u]=function(g){this[f]=g,this._changed()}},{})),xe=a.extend({_class:"Line",initialize:function(u,f,g,m,w){var S=!1;arguments.length>=4?(this._px=u,this._py=f,this._vx=g,this._vy=m,S=w):(this._px=u.x,this._py=u.y,this._vx=f.x,this._vy=f.y,S=g),S||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new E(this._px,this._py)},getVector:function(){return new E(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(r,u){return xe.intersect(this._px,this._py,this._vx,this._vy,r._px,r._py,r._vx,r._vy,!0,u)},getSide:function(r,u){return xe.getSide(this._px,this._py,this._vx,this._vy,r.x,r.y,!0,u)},getDistance:function(r){return Math.abs(this.getSignedDistance(r))},getSignedDistance:function(r){return xe.getSignedDistance(this._px,this._py,this._vx,this._vy,r.x,r.y,!0)},isCollinear:function(r){return E.isCollinear(this._vx,this._vy,r._vx,r._vy)},isOrthogonal:function(r){return E.isOrthogonal(this._vx,this._vy,r._vx,r._vy)},statics:{intersect:function(r,u,f,g,m,w,S,C,T,P){T||(f-=r,g-=u,S-=m,C-=w);var R=f*C-g*S;if(!O.isMachineZero(R)){var B=r-m,j=u-w,I=(S*j-C*B)/R,G=(f*j-g*B)/R,V=1e-12,H=-V,L=1+V;if(P||H<I&&I<L&&H<G&&G<L)return P||(I=I<=0?0:I>=1?1:I),new E(r+I*f,u+I*g)}},getSide:function(r,u,f,g,m,w,S,C){S||(f-=r,g-=u);var T=m-r,P=w-u,R=T*g-P*f;return!C&&O.isMachineZero(R)&&(R=(T*f+T*f)/(f*f+g*g),R>=0&&R<=1&&(R=0)),R<0?-1:R>0?1:0},getSignedDistance:function(r,u,f,g,m,w,S){return S||(f-=r,g-=u),f===0?g>0?m-r:r-m:g===0?f<0?w-u:u-w:((m-r)*g-(w-u)*f)/(g>f?g*Math.sqrt(1+f*f/(g*g)):f*Math.sqrt(1+g*g/(f*f)))},getDistance:function(r,u,f,g,m,w,S){return Math.abs(xe.getSignedDistance(r,u,f,g,m,w,S))}}}),Ce=v.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(u){v.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ut(null,null,this),this._view=en.create(this,u||tn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(r,u){return a.serialize(this._children,r,!0,u)},_changed:function(r,u){if(r&1){var f=this._view;f&&(f._needsUpdate=!0,!f._requested&&f._autoUpdate&&f.requestUpdate())}var g=this._changes;if(g&&u){var m=this._changesById,w=u._id,S=m[w];S?S.flags|=r:g.push(m[w]={item:u,flags:r})}},clear:function(){for(var r=this._children,u=r.length-1;u>=0;u--)r[u].remove()},isEmpty:function(){return!this._children.length},remove:function r(){return r.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(r){this._currentStyle.set(r)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new He({project:this,insert:!0})},getSymbolDefinitions:function(){var r=[],u={};return this.getItems({class:Ie,match:function(f){var g=f._definition,m=g._id;return u[m]||(u[m]=!0,r.push(g)),!1}}),r},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var r=this._selectionItems,u=[];for(var f in r){var g=r[f],m=g._selection;m&1&&g.isInserted()?u.push(g):m||this._updateSelection(g)}return u},_updateSelection:function(r){var u=r._id,f=this._selectionItems;r._selection?f[u]!==r&&(this._selectionCount++,f[u]=r):f[u]===r&&(this._selectionCount--,delete f[u])},selectAll:function(){for(var r=this._children,u=0,f=r.length;u<f;u++)r[u].setFullySelected(!0)},deselectAll:function(){var r=this._selectionItems;for(var u in r)r[u].setFullySelected(!1)},addLayer:function(r){return this.insertLayer(t,r)},insertLayer:function(r,u){if(u instanceof He){u._remove(!1,!0),a.splice(this._children,[u],r,0),u._setProject(this,!0);var f=u._name;f&&u.setName(f),this._changes&&u._changed(5),this._activeLayer||(this._activeLayer=u)}else u=null;return u},_insertItem:function(r,u,f){return u=this.insertLayer(r,u)||(this._activeLayer||this._insertItem(t,new He(z.NO_INSERT),!0)).insertChild(r,u),f&&u.activate&&u.activate(),u},getItems:function(r){return z._getItems(this,r)},getItem:function(r){return z._getItems(this,r,null,null,!0)[0]||null},importJSON:function(r){this.activate();var u=this._activeLayer;return a.importJSON(r,u&&u.isEmpty()&&u)},removeOn:function(r){var u=this._removeSets;if(u){r==="mouseup"&&(u.mousedrag=null);var f=u[r];if(f){for(var g in f){var m=f[g];for(var w in u){var S=u[w];S&&S!=f&&delete S[m._id]}m.remove()}u[r]=null}}},draw:function(r,u,f){this._updateVersion++,r.save(),u.applyToContext(r);for(var g=this._children,m=new a({offset:new E(0,0),pixelRatio:f,viewMatrix:u.isIdentity()?null:u,matrices:[new ue],updateMatrix:!0}),w=0,S=g.length;w<S;w++)g[w].draw(r,m);if(r.restore(),this._selectionCount>0){r.save(),r.strokeWidth=1;var C=this._selectionItems,T=this._scope.settings.handleSize,P=this._updateVersion;for(var R in C)C[R]._drawSelection(r,u,T,C,P);r.restore()}}}),z=a.extend(h,{statics:{extend:function r(u){return u._serializeFields&&(u._serializeFields=a.set({},this.prototype._serializeFields,u._serializeFields)),r.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new ue,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var r=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(r,function(u){this._events[u]={install:function(f){this.getView()._countItemEvent(f,1)},uninstall:function(f){this.getView()._countItemEvent(f,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:r}})},{initialize:function(){},_initialize:function(r,u){var f=r&&a.isPlainObject(r),g=f&&r.internal===!0,m=this._matrix=new ue,w=f&&r.project||Ft.project,S=Ft.settings;return this._id=g?null:F.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&S.applyMatrix,u&&m.translate(u),m._owner=this,this._style=new Ut(w._currentStyle,this,w),g||f&&r.insert==!1||!S.insertItems&&!(f&&r.insert==!0)?this._setProject(w):(f&&r.parent||w)._insertItem(t,this,!0),f&&r!==z.NO_INSERT&&r!==z.INSERT&&this.set(r,{internal:!0,insert:!0,project:!0,parent:!0}),f},_serialize:function(r,u){var f={},g=this;function m(w){for(var S in w){var C=g[S];a.equals(C,S==="leading"?w.fontSize*1.2:w[S])||(f[S]=a.serialize(C,r,S!=="data",u))}}return m(this._serializeFields),this instanceof Ve||m(this._style._defaults),[this._class,f]},_changed:function(r){var u=this._symbol,f=this._parent||u,g=this._project;r&8&&(this._bounds=this._position=this._decomposed=t),r&16&&(this._globalMatrix=t),f&&r&72&&z._clearBoundsCache(f),r&2&&z._clearBoundsCache(this),g&&g._changed(r,this),u&&u._changed(r)},getId:function(){return this._id},getName:function(){return this._name},setName:function(r){if(this._name&&this._removeNamed(),r===+r+"")throw new Error("Names consisting only of numbers are not supported.");var u=this._getOwner();if(r&&u){var f=u._children,g=u._namedChildren;(g[r]=g[r]||[]).push(this),r in f||(f[r]=this)}this._name=r||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(r){this.getStyle().set(r)}},a.each(["locked","visible","blendMode","opacity","guide"],function(r){var u=a.capitalize(r),f="_"+r,g={locked:256,visible:265};this["get"+u]=function(){return this[f]},this["set"+u]=function(m){m!=this[f]&&(this[f]=m,this._changed(g[r]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(r){if(r!==this._selection){this._selection=r;var u=this._project;u&&(u._updateSelection(this),this._changed(257))}},_changeSelection:function(r,u){var f=this._selection;this.setSelection(u?f|r:f&~r)},isSelected:function(){if(this._selectChildren){for(var r=this._children,u=0,f=r.length;u<f;u++)if(r[u].isSelected())return!0}return!!(this._selection&1)},setSelected:function(r){if(this._selectChildren)for(var u=this._children,f=0,g=u.length;f<g;f++)u[f].setSelected(r);this._changeSelection(1,r)},isFullySelected:function(){var r=this._children,u=!!(this._selection&1);if(r&&u){for(var f=0,g=r.length;f<g;f++)if(!r[f].isFullySelected())return!1;return!0}return u},setFullySelected:function(r){var u=this._children;if(u)for(var f=0,g=u.length;f<g;f++)u[f].setFullySelected(r);this._changeSelection(1,r)},isClipMask:function(){return this._clipMask},setClipMask:function(r){this._clipMask!=(r=!!r)&&(this._clipMask=r,r&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(r){this._data=r},getPosition:function(r){var u=r?E:Z,f=this._position||(this._position=this._getPositionFromBounds());return new u(f.x,f.y,this,"setPosition")},setPosition:function(){this.translate(E.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(r){return this._pivot?this._matrix._transformPoint(this._pivot):(r||this.getBounds()).getCenter(!0)},getPivot:function(){var r=this._pivot;return r?new Z(r.x,r.y,this,"setPivot"):null},setPivot:function(){this._pivot=E.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(r,u){this[u]=function(f){return this.getBounds(f,r)}},{beans:!0,getBounds:function(r,u){var f=u||r instanceof ue,g=a.set({},f?u:r,this._boundsOptions);(!g.stroke||this.getStrokeScaling())&&(g.cacheItem=this);var m=this._getCachedBounds(f&&r,g).rect;return arguments.length?m:new ae(m.x,m.y,m.width,m.height,this,"setBounds")},setBounds:function(){var r=ee.read(arguments),u=this.getBounds(),f=this._matrix,g=new ue,m=r.getCenter();g.translate(m),(r.width!=u.width||r.height!=u.height)&&(f.isInvertible()||(f.set(f._backup||new ue().translate(f.getTranslation())),u=this.getBounds()),g.scale(u.width!==0?r.width/u.width:0,u.height!==0?r.height/u.height:0)),m=u.getCenter(),g.translate(-m.x,-m.y),this.transform(g)},_getBounds:function(r,u){var f=this._children;return!f||!f.length?new ee:(z._updateBoundsCache(this,u.cacheItem),z._getBounds(f,r,u))},_getBoundsCacheKey:function(r,u){return[r.stroke?1:0,r.handle?1:0,u?1:0].join("")},_getCachedBounds:function(r,u,f){r=r&&r._orNullIfIdentity();var g=u.internal&&!f,m=u.cacheItem,w=g?null:this._matrix._orNullIfIdentity(),S=m&&(!r||r.equals(w))&&this._getBoundsCacheKey(u,g),C=this._bounds;if(z._updateBoundsCache(this._parent||this._symbol,m),S&&C&&S in C){var T=C[S];return{rect:T.rect.clone(),nonscaling:T.nonscaling}}var P=this._getBounds(r||w,u),R=P.rect||P,B=this._style,j=P.nonscaling||B.hasStroke()&&!B.getStrokeScaling();if(S){C||(this._bounds=C={});var T=C[S]={rect:R.clone(),nonscaling:j,internal:g}}return{rect:R,nonscaling:j}},_getStrokeMatrix:function(r,u){var f=this.getStrokeScaling()?null:u&&u.internal?this:this._parent||this._symbol&&this._symbol._item,g=f?f.getViewMatrix().invert():r;return g&&g._shiftless()},statics:{_updateBoundsCache:function(r,u){if(r&&u){var f=u._id,g=r._boundsCache=r._boundsCache||{ids:{},list:[]};g.ids[f]||(g.list.push(u),g.ids[f]=u)}},_clearBoundsCache:function(r){var u=r._boundsCache;if(u){r._bounds=r._position=r._boundsCache=t;for(var f=0,g=u.list,m=g.length;f<m;f++){var w=g[f];w!==r&&(w._bounds=w._position=t,w._boundsCache&&z._clearBoundsCache(w))}}},_getBounds:function(r,u,f){var g=1/0,m=-g,w=g,S=m,C=!1;f=f||{};for(var T=0,P=r.length;T<P;T++){var R=r[T];if(R._visible&&!R.isEmpty(!0)){var B=R._getCachedBounds(u&&u.appended(R._matrix),f,!0),j=B.rect;g=Math.min(j.x,g),w=Math.min(j.y,w),m=Math.max(j.x+j.width,m),S=Math.max(j.y+j.height,S),B.nonscaling&&(C=!0)}}return{rect:isFinite(g)?new ee(g,w,m-g,S-w):new ee,nonscaling:C}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var r=this._decompose();return r?r.rotation:0},setRotation:function(r){var u=this.getRotation();if(u!=null&&r!=null){var f=this._decomposed;this.rotate(r-u),f&&(f.rotation=r,this._decomposed=f)}},getScaling:function(){var r=this._decompose(),u=r&&r.scaling;return new Z(u?u.x:1,u?u.y:1,this,"setScaling")},setScaling:function(){var r=this.getScaling(),u=E.read(arguments,0,{clone:!0,readNull:!0});if(r&&u&&!r.equals(u)){var f=this.getRotation(),g=this._decomposed,m=new ue,w=O.isZero;if(w(r.x)||w(r.y))m.translate(g.translation),f&&m.rotate(f),m.scale(u.x,u.y),this._matrix.set(m);else{var S=this.getPosition(!0);m.translate(S),f&&m.rotate(f),m.scale(u.x/r.x,u.y/r.y),f&&m.rotate(-f),m.translate(S.negate()),this.transform(m)}g&&(g.scaling=u,this._decomposed=g)}},getMatrix:function(){return this._matrix},setMatrix:function(){var r=this._matrix;r.set.apply(r,arguments)},getGlobalMatrix:function(r){var u=this._globalMatrix;if(u)for(var f=this._parent,g=[];f;){if(!f._globalMatrix){u=null;for(var m=0,w=g.length;m<w;m++)g[m]._globalMatrix=null;break}g.push(f),f=f._parent}if(!u){u=this._globalMatrix=this._matrix.clone();var f=this._parent;f&&u.prepend(f.getGlobalMatrix(!0))}return r?u:u.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(r){(this._applyMatrix=this._canApplyMatrix&&!!r)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(r,u){if(this._project!==r){this._project&&this._installEvents(!1),this._project=r;for(var f=this._children,g=0,m=f&&f.length;g<m;g++)f[g]._setProject(r);u=!0}u&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function r(u){r.base.call(this,u);for(var f=this._children,g=0,m=f&&f.length;g<m;g++)f[g]._installEvents(u)},getLayer:function(){for(var r=this;r=r._parent;)if(r instanceof He)return r;return null},getParent:function(){return this._parent},setParent:function(r){return r.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(r){this.removeChildren(),this.addChildren(r)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var r=this._getOwner();return r&&r._children[this._index+1]||null},getPreviousSibling:function(){var r=this._getOwner();return r&&r._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(r){var u=this._parent,f=u&&u._children;f&&u.insertChildren(r in f?r:t,[this])},equals:function(r){return r===this||r&&this._class===r._class&&this._style.equals(r._style)&&this._matrix.equals(r._matrix)&&this._locked===r._locked&&this._visible===r._visible&&this._blendMode===r._blendMode&&this._opacity===r._opacity&&this._clipMask===r._clipMask&&this._guide===r._guide&&this._equals(r)||!1},_equals:function(r){return a.equals(this._children,r._children)},clone:function(r){var u=new this.constructor(z.NO_INSERT),f=this._children,g=a.pick(r?r.insert:t,r===t||r===!0),m=a.pick(r?r.deep:t,!0);f&&u.copyAttributes(this),(!f||m)&&u.copyContent(this),f||u.copyAttributes(this),g&&u.insertAbove(this);var w=this._name,S=this._parent;if(w&&S){for(var f=S._children,C=w,T=1;f[w];)w=C+" "+T++;w!==C&&u.setName(w)}return u},copyContent:function(r){for(var u=r._children,f=0,g=u&&u.length;f<g;f++)this.addChild(u[f].clone(!1),!0)},copyAttributes:function(r,u){this.setStyle(r._style);for(var f=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],g=0,m=f.length;g<m;g++){var w=f[g];r.hasOwnProperty(w)&&(this[w]=r[w])}u||this._matrix.set(r._matrix,!0),this.setApplyMatrix(r._applyMatrix),this.setPivot(r._pivot),this.setSelection(r._selection);var S=r._data,C=r._name;this._data=S?a.clone(S):null,C&&this.setName(C)},rasterize:function(r,u){var f,g,m;a.isPlainObject(r)?(f=r.resolution,g=r.insert,m=r.raster):(f=r,g=u),m||(m=new ut(z.NO_INSERT));var w=this.getStrokeBounds(),S=(f||this.getView().getResolution())/72,C=w.getTopLeft().floor(),T=w.getBottomRight().ceil(),P=new N(T.subtract(C)),R=P.multiply(S);if(m.setSize(R,!0),!R.isZero()){var B=m.getContext(!0),j=new ue().scale(S).translate(C.negate());B.save(),j.applyToContext(B),this.draw(B,new a({matrices:[j]})),B.restore()}return m._matrix.set(new ue().translate(C.add(P.divide(2))).scale(1/S)),(g===t||g)&&m.insertAbove(this),m},contains:function(){var r=this._matrix;return r.isInvertible()&&!!this._contains(r._inverseTransform(E.read(arguments)))},_contains:function(r){var u=this._children;if(u){for(var f=u.length-1;f>=0;f--)if(u[f].contains(r))return!0;return!1}return r.isInside(this.getInternalBounds())},isInside:function(){return ee.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Xe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(r,u){return r instanceof z?this._asPathItem().getIntersections(r._asPathItem(),null,u,!0).length>0:!1}},new function(){function r(){var g=arguments;return this._hitTest(E.read(g),dt.getOptions(g))}function u(){var g=arguments,m=E.read(g),w=dt.getOptions(g),S=[];return this._hitTest(m,new a({all:S},w)),S}function f(g,m,w,S){var C=this._children;if(C)for(var T=C.length-1;T>=0;T--){var P=C[T],R=P!==S&&P._hitTest(g,m,w);if(R&&!m.all)return R}return null}return Ce.inject({hitTest:r,hitTestAll:u,_hitTest:f}),{hitTest:r,hitTestAll:u,_hitTestChildren:f}},{_hitTest:function(r,u,f){if(this._locked||!this._visible||this._guide&&!u.guides||this.isEmpty())return null;var g=this._matrix,m=f?f.appended(g):this.getGlobalMatrix().prepend(this.getView()._matrix),w=Math.max(u.tolerance,1e-12),S=u._tolerancePadding=new N(Xe._getStrokePadding(w,g._shiftless().invert()));if(r=g._inverseTransform(r),!r||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(S.multiply(2))._containsPoint(r))return null;var C=!(u.guides&&!this._guide||u.selected&&!this.isSelected()||u.type&&u.type!==a.hyphenate(this._class)||u.class&&!(this instanceof u.class)),T=u.match,P=this,R,B;function j(A){return A&&T&&!T(A)&&(A=null),A&&u.all&&u.all.push(A),A}function I(A,W){var q=W?R["get"+W]():P.getPosition();if(r.subtract(q).divide(S).length<=1)return new dt(A,P,{name:W?a.hyphenate(W):A,point:q})}var G=u.position,V=u.center,H=u.bounds;if(C&&this._parent&&(G||V||H)){if((V||H)&&(R=this.getInternalBounds()),B=G&&I("position")||V&&I("center","Center"),!B&&H)for(var L=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],U=0;U<8&&!B;U++)B=I("bounds",L[U]);B=j(B)}return B||(B=this._hitTestChildren(r,u,m)||C&&j(this._hitTestSelf(r,u,m,this.getStrokeScaling()?null:m._shiftless().invert()))||null),B&&B.point&&(B.point=g.transform(B.point)),B},_hitTestSelf:function(r,u){if(u.fill&&this.hasFill()&&this._contains(r))return new dt("fill",this)},matches:function(r,u){function f(S,C){for(var T in S)if(S.hasOwnProperty(T)){var P=S[T],R=C[T];if(a.isPlainObject(P)&&a.isPlainObject(R)){if(!f(P,R))return!1}else if(!a.equals(P,R))return!1}return!0}var g=typeof r;if(g==="object"){for(var m in r)if(r.hasOwnProperty(m)&&!this.matches(m,r[m]))return!1;return!0}else{if(g==="function")return r(this);if(r==="match")return u(this);var w=/^(empty|editable)$/.test(r)?this["is"+a.capitalize(r)]():r==="type"?a.hyphenate(this._class):this[r];if(r==="class"){if(typeof u=="function")return this instanceof u;w=this._class}if(typeof u=="function")return!!u(w);if(u){if(u.test)return u.test(w);if(a.isPlainObject(u))return f(u,w)}return a.equals(w,u)}},getItems:function(r){return z._getItems(this,r,this._matrix)},getItem:function(r){return z._getItems(this,r,this._matrix,null,!0)[0]||null},statics:{_getItems:function r(u,f,g,m,w){if(!m){var S=typeof f=="object"&&f,C=S&&S.overlapping,T=S&&S.inside,P=C||T,j=P&&ee.read([P]);m={items:[],recursive:S&&S.recursive!==!1,inside:!!T,overlapping:!!C,rect:j,path:C&&new Xe.Rectangle({rectangle:j,insert:!1})},S&&(f=a.filter({},f,{recursive:!0,inside:!0,overlapping:!0}))}var R=u._children,B=m.items,j=m.rect;g=j&&(g||new ue);for(var I=0,G=R&&R.length;I<G;I++){var V=R[I],H=g&&g.appended(V._matrix),L=!0;if(j){var P=V.getBounds(H);if(!j.intersects(P))continue;j.contains(P)||m.overlapping&&(P.contains(j)||m.path.intersects(V,H))||(L=!1)}if(L&&V.matches(f)&&(B.push(V),w)||(m.recursive!==!1&&r(V,f,H,m,w),w&&B.length>0))break}return B}}},{importJSON:function(r){var u=a.importJSON(r,this);return u!==this?this.addChild(u):u},addChild:function(r){return this.insertChild(t,r)},insertChild:function(r,u){var f=u?this.insertChildren(r,[u]):null;return f&&f[0]},addChildren:function(r){return this.insertChildren(this._children.length,r)},insertChildren:function(r,u){var f=this._children;if(f&&u&&u.length>0){u=a.slice(u);for(var g={},m=u.length-1;m>=0;m--){var w=u[m],S=w&&w._id;!w||g[S]?u.splice(m,1):(w._remove(!1,!0),g[S]=!0)}a.splice(f,u,r,0);for(var C=this._project,T=C._changes,m=0,P=u.length;m<P;m++){var w=u[m],R=w._name;w._parent=this,w._setProject(C,!0),R&&w.setName(R),T&&w._changed(5)}this._changed(11)}else u=null;return u},_insertItem:"#insertChild",_insertAt:function(r,u){var f=r&&r._getOwner(),g=r!==this&&f?this:null;return g&&(g._remove(!1,!0),f._insertItem(r._index+u,g)),g},insertAbove:function(r){return this._insertAt(r,1)},insertBelow:function(r){return this._insertAt(r,0)},sendToBack:function(){var r=this._getOwner();return r?r._insertItem(0,this):null},bringToFront:function(){var r=this._getOwner();return r?r._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(r){return this.insertChild(0,r)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(r){return r._insertItem(t,this)},copyTo:function(r){return this.clone(!1).addTo(r)},reduce:function(r){var u=this._children;if(u&&u.length===1){var f=u[0].reduce(r);return this._parent?(f.insertAbove(this),this.remove()):f.remove(),f}return this},_removeNamed:function(){var r=this._getOwner();if(r){var u=r._children,f=r._namedChildren,g=this._name,m=f[g],w=m?m.indexOf(this):-1;w!==-1&&(u[g]==this&&delete u[g],m.splice(w,1),m.length?u[g]=m[0]:delete f[g])}},_remove:function(r,u){var f=this._getOwner(),g=this._project,m=this._index;return this._style&&this._style._dispose(),f?(this._name&&this._removeNamed(),m!=null&&(g._activeLayer===this&&(g._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(f._children,null,m,1)),this._installEvents(!1),r&&g._changes&&this._changed(5),u&&f._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(r){var u=r&&r.insertBelow(this);return u&&this.remove(),u},removeChildren:function(r,u){if(!this._children)return null;r=r||0,u=a.pick(u,this._children.length);for(var f=a.splice(this._children,null,r,u-r),g=f.length-1;g>=0;g--)f[g]._remove(!0,!1);return f.length>0&&this._changed(11),f},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var r=0,u=this._children.length;r<u;r++)this._children[r]._index=r;this._changed(11)}},isEmpty:function(r){var u=this._children,f=u?u.length:0;if(r){for(var g=0;g<f;g++)if(!u[g].isEmpty(r))return!1;return!0}return!f},isEditable:function(){for(var r=this;r;){if(!r._visible||r._locked)return!1;r=r._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(r){function u(S){var C=[];do C.unshift(S);while(S=S._parent);return C}for(var f=u(this),g=u(r),m=0,w=Math.min(f.length,g.length);m<w;m++)if(f[m]!=g[m])return f[m]._index<g[m]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(r){return this._getOrder(r)===-1},isBelow:function(r){return this._getOrder(r)===1},isParent:function(r){return this._parent===r},isChild:function(r){return r&&r._parent===this},isDescendant:function(r){for(var u=this;u=u._parent;)if(u===r)return!0;return!1},isAncestor:function(r){return r?r.isDescendant(this):!1},isSibling:function(r){return this._parent===r._parent},isGroupedWith:function(r){for(var u=this._parent;u;){if(u._parent&&/^(Group|Layer|CompoundPath)$/.test(u._class)&&r.isDescendant(u))return!0;u=u._parent}return!1}},a.each(["rotate","scale","shear","skew"],function(r){var u=r==="rotate";this[r]=function(){var f=arguments,g=(u?a:E).read(f),m=E.read(f,0,{readNull:!0});return this.transform(new ue()[r](g,m||this.getPosition(!0)))}},{translate:function(){var r=new ue;return this.transform(r.translate.apply(r,arguments))},transform:function(r,u,f){var g=this._matrix,m=r&&!r.isIdentity(),w=f&&this._canApplyMatrix||this._applyMatrix&&(m||!g.isIdentity()||u&&this._children);if(!m&&!w)return this;if(m){!r.isInvertible()&&g.isInvertible()&&(g._backup=g.getValues()),g.prepend(r,!0);var S=this._style,C=S.getFillColor(!0),T=S.getStrokeColor(!0);C&&C.transform(r),T&&T.transform(r)}if(w&&(w=this._transformContent(g,u,f))){var P=this._pivot;P&&g._transformPoint(P,P,!0),g.reset(!0),f&&this._canApplyMatrix&&(this._applyMatrix=!0)}var R=this._bounds,B=this._position;(m||w)&&this._changed(25);var j=m&&R&&r.decompose();if(j&&j.skewing.isZero()&&j.rotation%90===0){for(var I in R){var G=R[I];if(G.nonscaling)delete R[I];else if(w||!G.internal){var V=G.rect;r._transformBounds(V,V)}}this._bounds=R;var H=R[this._getBoundsCacheKey(this._boundsOptions||{})];H&&(this._position=this._getPositionFromBounds(H.rect))}else m&&B&&this._pivot&&(this._position=r._transformPoint(B,B));return this},_transformContent:function(r,u,f){var g=this._children;if(g){for(var m=0,w=g.length;m<w;m++)g[m].transform(r,u,f);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(E.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(E.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(E.read(arguments))},localToParent:function(){return this._matrix._transformPoint(E.read(arguments))},fitBounds:function(r,u){r=ee.read(arguments);var f=this.getBounds(),g=f.height/f.width,m=r.height/r.width,w=(u?g>m:g<m)?r.width/f.width:r.height/f.height,S=new ee(new E,new N(f.width*w,f.height*w));S.setCenter(r.getCenter()),this.setBounds(S)}}),{_setStyles:function(r,u,f){var g=this._style,m=this._matrix;if(g.hasFill()&&(r.fillStyle=g.getFillColor().toCanvasStyle(r,m)),g.hasStroke()){r.strokeStyle=g.getStrokeColor().toCanvasStyle(r,m),r.lineWidth=g.getStrokeWidth();var w=g.getStrokeJoin(),S=g.getStrokeCap(),C=g.getMiterLimit();if(w&&(r.lineJoin=w),S&&(r.lineCap=S),C&&(r.miterLimit=C),Ft.support.nativeDash){var T=g.getDashArray(),P=g.getDashOffset();T&&T.length&&("setLineDash"in r?(r.setLineDash(T),r.lineDashOffset=P):(r.mozDash=T,r.mozDashOffset=P))}}if(g.hasShadow()){var R=u.pixelRatio||1,B=f._shiftless().prepend(new ue().scale(R,R)),j=B.transform(new E(g.getShadowBlur(),0)),I=B.transform(this.getShadowOffset());r.shadowColor=g.getShadowColor().toCanvasStyle(r),r.shadowBlur=j.getLength(),r.shadowOffsetX=I.x,r.shadowOffsetY=I.y}},draw:function(r,u,f){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var g=u.matrices,m=u.viewMatrix,w=this._matrix,S=g[g.length-1].appended(w);if(S.isInvertible()){m=m?m.appended(S):S,g.push(S),u.updateMatrix&&(this._globalMatrix=S);var C=this._blendMode,T=O.clamp(this._opacity,0,1),P=C==="normal",R=fi.nativeModes[C],B=P&&T===1||u.dontStart||u.clip||(R||P&&T<1)&&this._canComposite(),j=u.pixelRatio||1,I,G,V;if(!B){var H=this.getStrokeBounds(m);if(!H.width||!H.height){g.pop();return}V=u.offset,G=u.offset=H.getTopLeft().floor(),I=r,r=tn.getContext(H.getSize().ceil().add(1).multiply(j)),j!==1&&r.scale(j,j)}r.save();var L=f?f.appended(w):this._canScaleStroke&&!this.getStrokeScaling(!0)&&m,U=!B&&u.clipItem,A=!L||U;if(B?(r.globalAlpha=T,R&&(r.globalCompositeOperation=C)):A&&r.translate(-G.x,-G.y),A&&(B?w:m).applyToContext(r),U&&u.clipItem.draw(r,u.extend({clip:!0})),L){r.setTransform(j,0,0,j,0,0);var W=u.offset;W&&r.translate(-W.x,-W.y)}this._draw(r,u,m,L),r.restore(),g.pop(),u.clip&&!u.dontFinish&&r.clip(this.getFillRule()),B||(fi.process(C,r,I,T,G.subtract(V).multiply(j)),tn.release(r),u.offset=V)}}},_isUpdated:function(r){var u=this._parent;if(u instanceof Ze)return u._isUpdated(r);var f=this._updateVersion===r;return!f&&u&&u._visible&&u._isUpdated(r)&&(this._updateVersion=r,f=!0),f},_drawSelection:function(r,u,f,g,m){var w=this._selection,S=w&1,C=w&2||S&&this._selectBounds,T=w&4;if(this._drawSelected||(S=!1),(S||C||T)&&this._isUpdated(m)){var P,R=this.getSelectedColor(!0)||(P=this.getLayer())&&P.getSelectedColor(!0),B=u.appended(this.getGlobalMatrix(!0)),j=f/2;if(r.strokeStyle=r.fillStyle=R?R.toCanvasStyle(r):"#009dec",S&&this._drawSelected(r,B,g),T){var I=this.getPosition(!0),G=this._parent,V=G?G.localToGlobal(I):I,H=V.x,L=V.y;r.beginPath(),r.arc(H,L,j,0,Math.PI*2,!0),r.stroke();for(var U=[[0,-1],[1,0],[0,1],[-1,0]],A=j,W=f+1,q=0;q<4;q++){var Q=U[q],X=Q[0],te=Q[1];r.moveTo(H+X*A,L+te*A),r.lineTo(H+X*W,L+te*W),r.stroke()}}if(C){var ie=B._transformCorners(this.getInternalBounds());r.beginPath();for(var q=0;q<8;q++)r[q?"lineTo":"moveTo"](ie[q],ie[++q]);r.closePath(),r.stroke();for(var q=0;q<8;q++)r.fillRect(ie[q]-j,ie[++q]-j,f,f)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],function(r){this["removeOn"+a.capitalize(r)]=function(){var u={};return u[r]=!0,this.removeOn(u)}},{removeOn:function(r){for(var u in r)if(r[u]){var f="mouse"+u,g=this._project,m=g._removeSets=g._removeSets||{};m[f]=m[f]||{},m[f][this._id]=this}return this}}),{tween:function(r,u,f){f||(f=u,u=r,r=null,f||(f=u,u=null));var g=f&&f.easing,m=f&&f.start,w=f!=null&&(typeof f=="number"?f:f.duration),S=new Ri(this,r,u,w,g,m);function C(T){S._handleFrame(T.time*1e3),S.running||this.off("frame",C)}return w&&this.on("frame",C),S},tweenTo:function(r,u){return this.tween(null,r,u)},tweenFrom:function(r,u){return this.tween(r,null,u)}}),Ve=z.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(u){this._children=[],this._namedChildren={},this._initialize(u)||this.addChildren(Array.isArray(u)?u:arguments)},_changed:function r(u){r.base.call(this,u),u&2050&&(this._clipItem=t)},_getClipItem:function(){var r=this._clipItem;if(r===t){r=null;for(var u=this._children,f=0,g=u.length;f<g;f++)if(u[f]._clipMask){r=u[f];break}this._clipItem=r}return r},isClipped:function(){return!!this._getClipItem()},setClipped:function(r){var u=this.getFirstChild();u&&u.setClipMask(r)},_getBounds:function r(u,f){var g=this._getClipItem();return g?g._getCachedBounds(g._matrix.prepended(u),a.set({},f,{stroke:!1})):r.base.call(this,u,f)},_hitTestChildren:function r(u,f,g){var m=this._getClipItem();return(!m||m.contains(u))&&r.base.call(this,u,f,g,m)},_draw:function(r,u){var f=u.clip,g=!f&&this._getClipItem();u=u.extend({clipItem:g,clip:!1}),f?(r.beginPath(),u.dontStart=u.dontFinish=!0):g&&g.draw(r,u.extend({clip:!0}));for(var m=this._children,w=0,S=m.length;w<S;w++){var C=m[w];C!==g&&C.draw(r,u)}}}),He=Ve.extend({_class:"Layer",initialize:function(){Ve.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function r(){return this._parent?r.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Je=z.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(u,f){this._initialize(u,f)},_equals:function(r){return this._type===r._type&&this._size.equals(r._size)&&a.equals(this._radius,r._radius)},copyContent:function(r){this.setType(r._type),this.setSize(r._size),this.setRadius(r._radius)},getType:function(){return this._type},setType:function(r){this._type=r},getShape:"#getType",setShape:"#setType",getSize:function(){var r=this._size;return new $(r.width,r.height,this,"setSize")},setSize:function(){var r=N.read(arguments);if(!this._size)this._size=r.clone();else if(!this._size.equals(r)){var u=this._type,f=r.width,g=r.height;u==="rectangle"?this._radius.set(N.min(this._radius,r.divide(2).abs())):u==="circle"?(f=g=(f+g)/2,this._radius=f/2):u==="ellipse"&&this._radius._set(f/2,g/2),this._size._set(f,g),this._changed(9)}},getRadius:function(){var r=this._radius;return this._type==="circle"?r:new $(r.width,r.height,this,"setRadius")},setRadius:function(r){var u=this._type;if(u==="circle"){if(r===this._radius)return;var f=r*2;this._radius=r,this._size._set(f,f)}else if(r=N.read(arguments),!this._radius)this._radius=r.clone();else{if(this._radius.equals(r))return;if(this._radius.set(r),u==="rectangle"){var f=N.max(this._size,r.multiply(2));this._size.set(f)}else u==="ellipse"&&this._size._set(r.width*2,r.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(r){var u=new Xe[a.capitalize(this._type)]({center:new E,size:this._size,radius:this._radius,insert:!1});return u.copyAttributes(this),Ft.settings.applyMatrix&&u.setApplyMatrix(!0),(r===t||r)&&u.insertAbove(this),u},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(r,u,f,g){var m=this._style,w=m.hasFill(),S=m.hasStroke(),C=u.dontFinish||u.clip,T=!g;if(w||S||C){var P=this._type,R=this._radius,B=P==="circle";if(u.dontStart||r.beginPath(),T&&B)r.arc(0,0,R,0,Math.PI*2,!0);else{var j=B?R:R.width,I=B?R:R.height,G=this._size,V=G.width,H=G.height;if(T&&P==="rectangle"&&j===0&&I===0)r.rect(-V/2,-H/2,V,H);else{var L=V/2,U=H/2,A=1-.5522847498307936,W=j*A,q=I*A,Q=[-L,-U+I,-L,-U+q,-L+W,-U,-L+j,-U,L-j,-U,L-W,-U,L,-U+q,L,-U+I,L,U-I,L,U-q,L-W,U,L-j,U,-L+j,U,-L+W,U,-L,U-q,-L,U-I];g&&g.transform(Q,Q,32),r.moveTo(Q[0],Q[1]),r.bezierCurveTo(Q[2],Q[3],Q[4],Q[5],Q[6],Q[7]),L!==j&&r.lineTo(Q[8],Q[9]),r.bezierCurveTo(Q[10],Q[11],Q[12],Q[13],Q[14],Q[15]),U!==I&&r.lineTo(Q[16],Q[17]),r.bezierCurveTo(Q[18],Q[19],Q[20],Q[21],Q[22],Q[23]),L!==j&&r.lineTo(Q[24],Q[25]),r.bezierCurveTo(Q[26],Q[27],Q[28],Q[29],Q[30],Q[31])}}r.closePath()}!C&&(w||S)&&(this._setStyles(r,u,f),w&&(r.fill(m.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),S&&r.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(r,u){var f=new ee(this._size).setCenter(0,0),g=this._style,m=u.stroke&&g.hasStroke()&&g.getStrokeWidth();return r&&(f=r._transformBounds(f)),m?f.expand(Xe._getStrokePadding(m,this._getStrokeMatrix(r,u))):f}},new function(){function r(f,g,m){var w=f._radius;if(!w.isZero())for(var S=f._size.divide(2),C=1;C<=4;C++){var T=new E(C>1&&C<4?-1:1,C>2?-1:1),P=T.multiply(S),R=P.subtract(T.multiply(w)),B=new ee(m?P.add(T.multiply(m)):P,R);if(B.contains(g))return{point:R,quadrant:C}}}function u(f,g,m,w){var S=f.divide(g);return(!w||S.isInQuadrant(w))&&S.subtract(S.normalize()).multiply(g).divide(m).length<=1}return{_contains:function f(g){if(this._type==="rectangle"){var m=r(this,g);return m?g.subtract(m.point).divide(this._radius).getLength()<=1:f.base.call(this,g)}else return g.divide(this.size).getLength()<=.5},_hitTestSelf:function f(g,m,w,S){var C=!1,T=this._style,P=m.stroke&&T.hasStroke(),R=m.fill&&T.hasFill();if(P||R){var B=this._type,j=this._radius,I=P?T.getStrokeWidth()/2:0,G=m._tolerancePadding.add(Xe._getStrokePadding(I,!T.getStrokeScaling()&&S));if(B==="rectangle"){var V=G.multiply(2),H=r(this,g,V);if(H)C=u(g.subtract(H.point),j,G,H.quadrant);else{var L=new ee(this._size).setCenter(0,0),U=L.expand(V),A=L.expand(V.negate());C=U._containsPoint(g)&&!A._containsPoint(g)}}else C=u(g,j,G)}return C?new dt(P?"stroke":"fill",this):f.base.apply(this,arguments)}}},{statics:new function(){function r(u,f,g,m,w){var S=a.create(Je.prototype);return S._type=u,S._size=g,S._radius=m,S._initialize(a.getNamed(w),f),S}return{Circle:function(){var u=arguments,f=E.readNamed(u,"center"),g=a.readNamed(u,"radius");return r("circle",f,new N(g*2),g,u)},Rectangle:function(){var u=arguments,f=ee.readNamed(u,"rectangle"),g=N.min(N.readNamed(u,"radius"),f.getSize(!0).divide(2));return r("rectangle",f.getCenter(!0),f.getSize(!0),g,u)},Ellipse:function(){var u=arguments,f=Je._readEllipse(u),g=f.radius;return r("ellipse",f.center,g.multiply(2),g,u)},_readEllipse:function(u){var f,g;if(a.hasNamed(u,"radius"))f=E.readNamed(u,"center"),g=N.readNamed(u,"radius");else{var m=ee.readNamed(u,"rectangle");f=m.getCenter(!0),g=m.getSize(!0).divide(2)}return{center:f,radius:g}}}}}),ut=z.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(u,f){if(!this._initialize(u,f!==t&&E.read(arguments))){var g,m=typeof u,w=m==="string"?s.getElementById(u):m==="object"?u:null;if(w&&w!==z.NO_INSERT){if(w.getContext||w.naturalHeight!=null)g=w;else if(w){var S=N.read(arguments);S.isZero()||(g=tn.getCanvas(S))}}g?this.setImage(g):this.setSource(u)}this._size||(this._size=new N,this._loaded=!1)},_equals:function(r){return this.getSource()===r.getSource()},copyContent:function(r){var u=r._image,f=r._canvas;if(u)this._setImage(u);else if(f){var g=tn.getCanvas(r._size);g.getContext("2d").drawImage(f,0,0),this._setImage(g)}this._crossOrigin=r._crossOrigin},getSize:function(){var r=this._size;return new $(r?r.width:0,r?r.height:0,this,"setSize")},setSize:function(r,u){var f=N.read(arguments);if(f.equals(this._size))u&&this.clear();else if(f.width>0&&f.height>0){var g=!u&&this.getElement();this._setImage(tn.getCanvas(f)),g&&this.getContext(!0).drawImage(g,0,0,f.width,f.height)}else this._canvas&&tn.release(this._canvas),this._size=f.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(r){this.setSize(r,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(r){this.setSize(this.getWidth(),r)},getLoaded:function(){return this._loaded},isEmpty:function(){var r=this._size;return!r||r.width===0&&r.height===0},getResolution:function(){var r=this._matrix,u=new E(0,0).transform(r),f=new E(1,0).transform(r).subtract(u),g=new E(0,1).transform(r).subtract(u);return new N(72/f.getLength(),72/g.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(r){var u=this;function f(g){var m=u.getView(),w=g&&g.type||"load";m&&u.responds(w)&&(Ft=m._scope,u.emit(w,new Rr(g)))}this._setImage(r),this._loaded?setTimeout(f,0):r&&At.add(r,{load:function(g){u._setImage(r),f(g)},error:f})},_setImage:function(r){this._canvas&&tn.release(this._canvas),r&&r.getContext?(this._image=null,this._canvas=r,this._loaded=!0):(this._image=r,this._canvas=null,this._loaded=!!(r&&r.src&&r.complete)),this._size=new N(r?r.naturalWidth||r.width:0,r?r.naturalHeight||r.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var r=tn.getContext(this._size);try{this._image&&r.drawImage(this._image,0,0),this._canvas=r.canvas}catch{tn.release(r)}}return this._canvas},setCanvas:"#setImage",getContext:function(r){return this._context||(this._context=this.getCanvas().getContext("2d")),r&&(this._image=null,this._changed(1025)),this._context},setContext:function(r){this._context=r},getSource:function(){var r=this._image;return r&&r.src||this.toDataURL()},setSource:function(r){var u=new e.Image,f=this._crossOrigin;f&&(u.crossOrigin=f),r&&(u.src=r),this.setImage(u)},getCrossOrigin:function(){var r=this._image;return r&&r.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(r){this._crossOrigin=r;var u=this._image;u&&(u.crossOrigin=r)},getSmoothing:function(){return this._smoothing},setSmoothing:function(r){this._smoothing=typeof r=="string"?r:r?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var r=ee.read(arguments),u=tn.getContext(r.getSize());return u.drawImage(this.getCanvas(),r.x,r.y,r.width,r.height,0,0,r.width,r.height),u.canvas},getSubRaster:function(){var r=ee.read(arguments),u=new ut(z.NO_INSERT);return u._setImage(this.getSubCanvas(r)),u.translate(r.getCenter().subtract(this.getSize().divide(2))),u._matrix.prepend(this._matrix),u.insertAbove(this),u},toDataURL:function(){var r=this._image,u=r&&r.src;if(/^data:/.test(u))return u;var f=this.getCanvas();return f?f.toDataURL.apply(f,arguments):null},drawImage:function(r){var u=E.read(arguments,1);this.getContext(!0).drawImage(r,u.x,u.y)},getAverageColor:function(r){var u,f;if(r?r instanceof Be?(f=r,u=r.getBounds()):typeof r=="object"&&("width"in r?u=new ee(r):"x"in r&&(u=new ee(r.x-.5,r.y-.5,1,1))):u=this.getBounds(),!u)return null;var g=32,m=Math.min(u.width,g),w=Math.min(u.height,g),S=ut._sampleContext;S?S.clearRect(0,0,g+1,g+1):S=ut._sampleContext=tn.getContext(new N(g)),S.save();var C=new ue().scale(m/u.width,w/u.height).translate(-u.x,-u.y);C.applyToContext(S),f&&f.draw(S,new a({clip:!0,matrices:[C]})),this._matrix.applyToContext(S);var T=this.getElement(),P=this._size;T&&S.drawImage(T,-P.width/2,-P.height/2),S.restore();for(var R=S.getImageData(.5,.5,Math.ceil(m),Math.ceil(w)).data,B=[0,0,0],j=0,I=0,G=R.length;I<G;I+=4){var V=R[I+3];j+=V,V/=255,B[0]+=R[I]*V,B[1]+=R[I+1]*V,B[2]+=R[I+2]*V}for(var I=0;I<3;I++)B[I]/=j;return j?pt.read(B):null},getPixel:function(){var r=E.read(arguments),u=this.getContext().getImageData(r.x,r.y,1,1).data;return new pt("rgb",[u[0]/255,u[1]/255,u[2]/255],u[3]/255)},setPixel:function(){var r=arguments,u=E.read(r),f=pt.read(r),g=f._convert("rgb"),m=f._alpha,w=this.getContext(!0),S=w.createImageData(1,1),C=S.data;C[0]=g[0]*255,C[1]=g[1]*255,C[2]=g[2]*255,C[3]=m!=null?m*255:255,w.putImageData(S,u.x,u.y)},clear:function(){var r=this._size;this.getContext(!0).clearRect(0,0,r.width+1,r.height+1)},createImageData:function(){var r=N.read(arguments);return this.getContext().createImageData(r.width,r.height)},getImageData:function(){var r=ee.read(arguments);return r.isEmpty()&&(r=new ee(this._size)),this.getContext().getImageData(r.x,r.y,r.width,r.height)},putImageData:function(r){var u=E.read(arguments,1);this.getContext(!0).putImageData(r,u.x,u.y)},setImageData:function(r){this.setSize(r),this.getContext(!0).putImageData(r,0,0)},_getBounds:function(r,u){var f=new ee(this._size).setCenter(0,0);return r?r._transformBounds(f):f},_hitTestSelf:function(r){if(this._contains(r)){var u=this;return new dt("pixel",u,{offset:r.add(u._size.divide(2)).round(),color:{get:function(){return u.getPixel(this.offset)}}})}},_draw:function(r,u,f){var g=this.getElement();if(g&&g.width>0&&g.height>0){r.globalAlpha=O.clamp(this._opacity,0,1),this._setStyles(r,u,f);var m=this._smoothing,w=m==="off";yt.setPrefixed(r,w?"imageSmoothingEnabled":"imageSmoothingQuality",w?!1:m),r.drawImage(g,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ie=z.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(u,f){this._initialize(u,f!==t&&E.read(arguments,1))||this.setDefinition(u instanceof Ke?u:new Ke(u))},_equals:function(r){return this._definition===r._definition},copyContent:function(r){this.setDefinition(r._definition)},getDefinition:function(){return this._definition},setDefinition:function(r){this._definition=r,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(r,u){var f=this._definition._item;return f._getCachedBounds(f._matrix.prepended(r),u)},_hitTestSelf:function(r,u,f){var g=u.extend({all:!1}),m=this._definition._item._hitTest(r,g,f);return m&&(m.item=this),m},_draw:function(r,u){this._definition._item.draw(r,u)}}),Ke=a.extend({_class:"SymbolDefinition",initialize:function(u,f){this._id=F.get(),this.project=Ft.project,u&&this.setItem(u,f)},_serialize:function(r,u){return u.add(this,function(){return a.serialize([this._class,this._item],r,!1,u)})},_changed:function(r){r&8&&z._clearBoundsCache(this),r&1&&this.project._changed(r)},getItem:function(){return this._item},setItem:function(r,u){r._symbol&&(r=r.clone()),this._item&&(this._item._symbol=null),this._item=r,r.remove(),r.setSelected(!1),u||r.setPosition(new E),r._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(r){return new Ie(this,r)},clone:function(){return new Ke(this._item.clone(!1))},equals:function(r){return r===this||r&&this._item.equals(r._item)||!1}}),dt=a.extend({_class:"HitResult",initialize:function(u,f,g){this.type=u,this.item=f,g&&this.inject(g)},statics:{getOptions:function(r){var u=r&&a.read(r);return new a({type:null,tolerance:Ft.settings.hitTolerance,fill:!u,stroke:!u,segments:!u,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},u)}}}),ze=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(u,f,g,m,w,S){var C=arguments.length,T,P,R,B;C>0&&(u==null||typeof u=="object"?C===1&&u&&"point"in u?(T=u.point,P=u.handleIn,R=u.handleOut,B=u.selection):(T=u,P=f,R=g,B=m):(T=[u,f],P=g!==t?[g,m]:null,R=w!==t?[w,S]:null)),new Bt(T,this,"_point"),new Bt(P,this,"_handleIn"),new Bt(R,this,"_handleOut"),B&&this.setSelection(B)},_serialize:function(r,u){var f=this._point,g=this._selection,m=g||this.hasHandles()?[f,this._handleIn,this._handleOut]:f;return g&&m.push(g),a.serialize(m,r,!0,u)},_changed:function(r){var u=this._path;if(u){var f=u._curves,g=this._index,m;f&&((!r||r===this._point||r===this._handleIn)&&(m=g>0?f[g-1]:u._closed?f[f.length-1]:null)&&m._changed(),(!r||r===this._point||r===this._handleOut)&&(m=f[g])&&m._changed()),u._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(E.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(E.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(E.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var r=this._handleIn,u=this._handleOut;return!r.isZero()&&!u.isZero()&&r.isCollinear(u)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(r){var u=this._selection,f=this._path;this._selection=r=r||0,f&&r!==u&&(f._updateSelection(this,u,r),f._changed(257))},_changeSelection:function(r,u){var f=this._selection;this.setSelection(u?f|r:f&~r)},isSelected:function(){return!!(this._selection&7)},setSelected:function(r){this._changeSelection(7,r)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var r=this._path,u=this._index;return r?(u>0&&!r._closed&&u===r._segments.length-1&&u--,r.getCurves()[u]||null):null},getLocation:function(){var r=this.getCurve();return r?new wt(r,this===r._segment1?0:1):null},getNext:function(){var r=this._path&&this._path._segments;return r&&(r[this._index+1]||this._path._closed&&r[0])||null},smooth:function(r,u,f){var g=r||{},m=g.type,w=g.factor,S=this.getPrevious(),C=this.getNext(),T=(S||this)._point,P=this._point,R=(C||this)._point,B=T.getDistance(P),j=P.getDistance(R);if(!m||m==="catmull-rom"){var I=w===t?.5:w,G=Math.pow(B,I),V=G*G,H=Math.pow(j,I),L=H*H;if(!u&&S){var U=2*L+3*H*G+V,A=3*H*(H+G);this.setHandleIn(A!==0?new E((L*T._x+U*P._x-V*R._x)/A-P._x,(L*T._y+U*P._y-V*R._y)/A-P._y):new E)}if(!f&&C){var U=2*V+3*G*H+L,A=3*G*(G+H);this.setHandleOut(A!==0?new E((V*R._x+U*P._x-L*T._x)/A-P._x,(V*R._y+U*P._y-L*T._y)/A-P._y):new E)}}else if(m==="geometric"){if(S&&C){var W=T.subtract(R),q=w===t?.4:w,Q=q*B/(B+j);u||this.setHandleIn(W.multiply(Q)),f||this.setHandleOut(W.multiply(Q-q))}}else throw new Error("Smoothing method '"+m+"' not supported.")},getPrevious:function(){var r=this._path&&this._path._segments;return r&&(r[this._index-1]||this._path._closed&&r[r.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var r=this._path;return r&&this._index===r._segments.length-1||!1},reverse:function(){var r=this._handleIn,u=this._handleOut,f=r.clone();r.set(u),u.set(f)},reversed:function(){return new ze(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ze(this._point,this._handleIn,this._handleOut)},equals:function(r){return r===this||r&&this._class===r._class&&this._point.equals(r._point)&&this._handleIn.equals(r._handleIn)&&this._handleOut.equals(r._handleOut)||!1},toString:function(){var r=["point: "+this._point];return this._handleIn.isZero()||r.push("handleIn: "+this._handleIn),this._handleOut.isZero()||r.push("handleOut: "+this._handleOut),"{ "+r.join(", ")+" }"},transform:function(r){this._transformCoordinates(r,new Array(6),!0),this._changed()},interpolate:function(r,u,f){var g=1-f,m=f,w=r._point,S=u._point,C=r._handleIn,T=u._handleIn,P=u._handleOut,R=r._handleOut;this._point._set(g*w._x+m*S._x,g*w._y+m*S._y,!0),this._handleIn._set(g*C._x+m*T._x,g*C._y+m*T._y,!0),this._handleOut._set(g*R._x+m*P._x,g*R._y+m*P._y,!0),this._changed()},_transformCoordinates:function(r,u,f){var g=this._point,m=!f||!this._handleIn.isZero()?this._handleIn:null,w=!f||!this._handleOut.isZero()?this._handleOut:null,S=g._x,C=g._y,T=2;return u[0]=S,u[1]=C,m&&(u[T++]=m._x+S,u[T++]=m._y+C),w&&(u[T++]=w._x+S,u[T++]=w._y+C),r&&(r._transformCoordinates(u,u,T/2),S=u[0],C=u[1],f?(g._x=S,g._y=C,T=2,m&&(m._x=u[T++]-S,m._y=u[T++]-C),w&&(w._x=u[T++]-S,w._y=u[T++]-C)):(m||(u[T++]=S,u[T++]=C),w||(u[T++]=S,u[T++]=C))),u}}),Bt=E.extend({initialize:function(u,f,g){var m,w,S;if(!u)m=w=0;else if((m=u[0])!==t)w=u[1];else{var C=u;(m=C.x)===t&&(C=E.read(arguments),m=C.x),w=C.y,S=C.selected}this._x=m,this._y=w,this._owner=f,f[g]=this,S&&this.setSelected(!0)},_set:function(r,u){return this._x=r,this._y=u,this._owner._changed(this),this},getX:function(){return this._x},setX:function(r){this._x=r,this._owner._changed(this)},getY:function(){return this._y},setY:function(r){this._y=r,this._owner._changed(this)},isZero:function(){var r=O.isZero;return r(this._x)&&r(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(r){this._owner._changeSelection(this._getSelection(),r)},_getSelection:function(){var r=this._owner;return this===r._point?1:this===r._handleIn?2:this===r._handleOut?4:0}}),Le=a.extend({_class:"Curve",beans:!0,initialize:function(u,f,g,m,w,S,C,T){var P=arguments.length,R,B,j,I,G,V;P===3?(this._path=u,R=f,B=g):P?P===1?"segment1"in u?(R=new ze(u.segment1),B=new ze(u.segment2)):"point1"in u?(j=u.point1,G=u.handle1,V=u.handle2,I=u.point2):Array.isArray(u)&&(j=[u[0],u[1]],I=[u[6],u[7]],G=[u[2]-u[0],u[3]-u[1]],V=[u[4]-u[6],u[5]-u[7]]):P===2?(R=new ze(u),B=new ze(f)):P===4?(j=u,G=f,V=g,I=m):P===8&&(j=[u,f],I=[C,T],G=[g-u,m-f],V=[w-C,S-T]):(R=new ze,B=new ze),this._segment1=R||new ze(j,null,G),this._segment2=B||new ze(I,V,null)},_serialize:function(r,u){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],r,!0,u)},_changed:function(){this._length=this._bounds=t},clone:function(){return new Le(this._segment1,this._segment2)},toString:function(){var r=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||r.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||r.push("handle2: "+this._segment2._handleIn),r.push("point2: "+this._segment2._point),"{ "+r.join(", ")+" }"},classify:function(){return Le.classify(this.getValues())},remove:function(){var r=!1;if(this._path){var u=this._segment2,f=u._handleOut;r=u.remove(),r&&this._segment1._handleOut.set(f)}return r},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(E.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(E.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(E.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(E.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var r=this._path&&this._path._curves;return r&&(r[this._segment1._index+1]||this._path._closed&&r[0])||null},getPrevious:function(){var r=this._path&&this._path._curves;return r&&(r[this._segment1._index-1]||this._path._closed&&r[r.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var r=this._path;return r&&this._segment1._index===r._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(r){this.getPoint1().setSelected(r),this.getHandle1().setSelected(r),this.getHandle2().setSelected(r),this.getPoint2().setSelected(r)},getValues:function(r){return Le.getValues(this._segment1,this._segment2,r)},getPoints:function(){for(var r=this.getValues(),u=[],f=0;f<8;f+=2)u.push(new E(r[f],r[f+1]));return u}},{getLength:function(){return this._length==null&&(this._length=Le.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Le.getArea(this.getValues())},getLine:function(){return new xe(this._segment1._point,this._segment2._point)},getPart:function(r,u){return new Le(Le.getPart(this.getValues(),r,u))},getPartLength:function(r,u){return Le.getLength(this.getValues(),r,u)},divideAt:function(r){return this.divideAtTime(r&&r.curve===this?r.time:this.getTimeAt(r))},divideAtTime:function(r,u){var f=1e-8,g=1-f,m=null;if(r>=f&&r<=g){var w=Le.subdivide(this.getValues(),r),S=w[0],C=w[1],T=u||this.hasHandles(),P=this._segment1,R=this._segment2,B=this._path;T&&(P._handleOut._set(S[2]-S[0],S[3]-S[1]),R._handleIn._set(C[4]-C[6],C[5]-C[7]));var j=S[6],I=S[7],G=new ze(new E(j,I),T&&new E(S[4]-j,S[5]-I),T&&new E(C[2]-j,C[3]-I));B?(B.insert(P._index+1,G),m=this.getNext()):(this._segment2=G,this._changed(),m=new Le(G,R))}return m},splitAt:function(r){var u=this._path;return u?u.splitAt(r):null},splitAtTime:function(r){return this.splitAt(this.getLocationAtTime(r))},divide:function(r,u){return this.divideAtTime(r===t?.5:u?r:this.getTimeAt(r))},split:function(r,u){return this.splitAtTime(r===t?.5:u?r:this.getTimeAt(r))},reversed:function(){return new Le(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(r,u,f,g){var m=r._point,w=r._handleOut,S=u._handleIn,C=u._point,T=m.x,P=m.y,R=C.x,B=C.y,j=g?[T,P,T,P,R,B,R,B]:[T,P,T+w._x,P+w._y,R+S._x,B+S._y,R,B];return f&&f._transformCoordinates(j,j,4),j},subdivide:function(r,u){var f=r[0],g=r[1],m=r[2],w=r[3],S=r[4],C=r[5],T=r[6],P=r[7];u===t&&(u=.5);var R=1-u,B=R*f+u*m,j=R*g+u*w,I=R*m+u*S,G=R*w+u*C,V=R*S+u*T,H=R*C+u*P,L=R*B+u*I,U=R*j+u*G,A=R*I+u*V,W=R*G+u*H,q=R*L+u*A,Q=R*U+u*W;return[[f,g,B,j,L,U,q,Q],[q,Q,A,W,V,H,T,P]]},getMonoCurves:function(r,u){var f=[],g=u?0:1,m=r[g+0],w=r[g+2],S=r[g+4],C=r[g+6];if(m>=w==w>=S&&w>=S==S>=C||Le.isStraight(r))f.push(r);else{var T=3*(w-S)-m+C,P=2*(m+S)-4*w,R=w-m,B=1e-8,j=1-B,I=[],G=O.solveQuadratic(T,P,R,I,B,j);if(!G)f.push(r);else{I.sort();var V=I[0],H=Le.subdivide(r,V);f.push(H[0]),G>1&&(V=(I[1]-V)/(1-V),H=Le.subdivide(H[1],V),f.push(H[0])),f.push(H[1])}}return f},solveCubic:function(r,u,f,g,m,w){var S=r[u],C=r[u+2],T=r[u+4],P=r[u+6],R=0;if(!(S<f&&P<f&&C<f&&T<f||S>f&&P>f&&C>f&&T>f)){var B=3*(C-S),j=3*(T-C)-B,I=P-S-B-j;R=O.solveCubic(I,j,B,S-f,g,m,w)}return R},getTimeOf:function(r,u){var f=new E(r[0],r[1]),g=new E(r[6],r[7]),m=1e-12,w=1e-7,S=u.isClose(f,m)?0:u.isClose(g,m)?1:null;if(S===null)for(var C=[u.x,u.y],T=[],P=0;P<2;P++)for(var R=Le.solveCubic(r,P,C[P],T,0,1),B=0;B<R;B++){var j=T[B];if(u.isClose(Le.getPoint(r,j),w))return j}return u.isClose(f,w)?0:u.isClose(g,w)?1:null},getNearestTime:function(r,u){if(Le.isStraight(r)){var f=r[0],g=r[1],m=r[6],w=r[7],S=m-f,C=w-g,T=S*S+C*C;if(T===0)return 0;var P=((u.x-f)*S+(u.y-g)*C)/T;return P<1e-12?0:P>.999999999999?1:Le.getTimeOf(r,new E(f+P*S,g+P*C))}var R=100,B=1/0,j=0;function I(H){if(H>=0&&H<=1){var L=u.getDistance(Le.getPoint(r,H),!0);if(L<B)return B=L,j=H,!0}}for(var G=0;G<=R;G++)I(G/R);for(var V=1/(R*2);V>1e-8;)!I(j-V)&&!I(j+V)&&(V/=2);return j},getPart:function(r,u,f){var g=u>f;if(g){var m=u;u=f,f=m}return u>0&&(r=Le.subdivide(r,u)[1]),f<1&&(r=Le.subdivide(r,(f-u)/(1-u))[0]),g?[r[6],r[7],r[4],r[5],r[2],r[3],r[0],r[1]]:r},isFlatEnough:function(r,u){var f=r[0],g=r[1],m=r[2],w=r[3],S=r[4],C=r[5],T=r[6],P=r[7],R=3*m-2*f-T,B=3*w-2*g-P,j=3*S-2*T-f,I=3*C-2*P-g;return Math.max(R*R,j*j)+Math.max(B*B,I*I)<=16*u*u},getArea:function(r){var u=r[0],f=r[1],g=r[2],m=r[3],w=r[4],S=r[5],C=r[6],T=r[7];return 3*((T-f)*(g+w)-(C-u)*(m+S)+m*(u-w)-g*(f-S)+T*(w+u/3)-C*(S+f/3))/20},getBounds:function(r){for(var u=r.slice(0,2),f=u.slice(),g=[0,0],m=0;m<2;m++)Le._addBounds(r[m],r[m+2],r[m+4],r[m+6],m,0,u,f,g);return new ee(u[0],u[1],f[0]-u[0],f[1]-u[1])},_addBounds:function(r,u,f,g,m,w,S,C,T){function P(q,Q){var X=q-Q,te=q+Q;X<S[m]&&(S[m]=X),te>C[m]&&(C[m]=te)}w/=2;var R=S[m]+w,B=C[m]-w;if(r<R||u<R||f<R||g<R||r>B||u>B||f>B||g>B)if(u<r!=u<g&&f<r!=f<g)P(r,0),P(g,0);else{var j=3*(u-f)-r+g,I=2*(r+f)-4*u,G=u-r,V=O.solveQuadratic(j,I,G,T),H=1e-8,L=1-H;P(g,0);for(var U=0;U<V;U++){var A=T[U],W=1-A;H<=A&&A<=L&&P(W*W*W*r+3*W*W*A*u+3*W*A*A*f+A*A*A*g,w)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],function(r){this[r]=function(){this._bounds||(this._bounds={});var u=this._bounds[r];return u||(u=this._bounds[r]=Xe[r]([this._segment1,this._segment2],!1,this._path)),u.clone()}},{}),a.each({isStraight:function(r,u,f,g){if(u.isZero()&&f.isZero())return!0;var m=g.subtract(r);if(m.isZero())return!1;if(m.isCollinear(u)&&m.isCollinear(f)){var w=new xe(r,g),S=1e-7;if(w.getDistance(r.add(u))<S&&w.getDistance(g.add(f))<S){var C=m.dot(m),T=m.dot(u)/C,P=m.dot(f)/C;return T>=0&&T<=1&&P<=0&&P>=-1}}return!1},isLinear:function(r,u,f,g){var m=g.subtract(r).divide(3);return u.equals(m)&&f.negate().equals(m)}},function(r,u){this[u]=function(f){var g=this._segment1,m=this._segment2;return r(g._point,g._handleOut,m._handleIn,m._point,f)},this.statics[u]=function(f,g){var m=f[0],w=f[1],S=f[6],C=f[7];return r(new E(m,w),new E(f[2]-m,f[3]-w),new E(f[4]-S,f[5]-C),new E(S,C),g)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(r){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(r||0)},isCollinear:function(r){return r&&this.isStraight()&&r.isStraight()&&this.getLine().isCollinear(r.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(r,u){return this.getLocationAtTime(u?r:this.getTimeAt(r))},getLocationAtTime:function(r){return r!=null&&r>=0&&r<=1?new wt(this,r):null},getTimeAt:function(r,u){return Le.getTimeAt(this.getValues(),r,u)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var r=E.read(arguments);return r.isZero()?[]:Le.getTimesWithTangent(this.getValues(),r)},getOffsetAtTime:function(r){return this.getPartLength(0,r)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(E.read(arguments)))},getOffsetOf:function(){var r=this.getLocationOf.apply(this,arguments);return r?r.getOffset():null},getTimeOf:function(){return Le.getTimeOf(this.getValues(),E.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var r=E.read(arguments),u=this.getValues(),f=Le.getNearestTime(u,r),g=Le.getPoint(u,f);return new wt(this,f,g,null,r.getDistance(g))},getNearestPoint:function(){var r=this.getNearestLocation.apply(this,arguments);return r&&r.getPoint()}},new function(){var r=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(r,function(u){this[u+"At"]=function(f,g){var m=this.getValues();return Le[u](m,g?f:Le.getTimeAt(m,f))},this[u+"AtTime"]=function(f){return Le[u](this.getValues(),f)}},{statics:{_evaluateMethods:r}})},new function(){function r(g){var m=g[0],w=g[1],S=g[2],C=g[3],T=g[4],P=g[5],R=g[6],B=g[7],j=9*(S-T)+3*(R-m),I=6*(m+T)-12*S,G=3*(S-m),V=9*(C-P)+3*(B-w),H=6*(w+P)-12*C,L=3*(C-w);return function(U){var A=(j*U+I)*U+G,W=(V*U+H)*U+L;return Math.sqrt(A*A+W*W)}}function u(g,m){return Math.max(2,Math.min(16,Math.ceil(Math.abs(m-g)*32)))}function f(g,m,w,S){if(m==null||m<0||m>1)return null;var C=g[0],T=g[1],P=g[2],R=g[3],B=g[4],j=g[5],I=g[6],G=g[7],V=O.isZero;V(P-C)&&V(R-T)&&(P=C,R=T),V(B-I)&&V(j-G)&&(B=I,j=G);var H=3*(P-C),L=3*(B-P)-H,U=I-C-H-L,A=3*(R-T),W=3*(j-R)-A,q=G-T-A-W,Q,X;if(w===0)Q=m===0?C:m===1?I:((U*m+L)*m+H)*m+C,X=m===0?T:m===1?G:((q*m+W)*m+A)*m+T;else{var te=1e-8,ie=1-te;if(m<te?(Q=H,X=A):m>ie?(Q=3*(I-B),X=3*(G-j)):(Q=(3*U*m+2*L)*m+H,X=(3*q*m+2*W)*m+A),S){Q===0&&X===0&&(m<te||m>ie)&&(Q=B-P,X=j-R);var se=Math.sqrt(Q*Q+X*X);se&&(Q/=se,X/=se)}if(w===3){var B=6*U*m+2*L,j=6*q*m+2*W,he=Math.pow(Q*Q+X*X,3/2);Q=he!==0?(Q*j-X*B)/he:0,X=0}}return w===2?new E(X,-Q):new E(Q,X)}return{statics:{classify:function(g){var m=g[0],w=g[1],S=g[2],C=g[3],T=g[4],P=g[5],R=g[6],B=g[7],j=m*(B-P)+w*(T-R)+R*P-B*T,I=S*(w-B)+C*(R-m)+m*B-w*R,G=T*(C-w)+P*(m-S)+S*w-C*m,V=3*G,H=V-I,L=H-I+j,U=Math.sqrt(L*L+H*H+V*V),A=U!==0?1/U:0,W=O.isZero,q="serpentine";L*=A,H*=A,V*=A;function Q(se,he,ne){var ce=he!==t,fe=ce&&he>0&&he<1,ve=ce&&ne>0&&ne<1;return ce&&(!(fe||ve)||se==="loop"&&!(fe&&ve))&&(se="arch",fe=ve=!1),{type:se,roots:fe||ve?fe&&ve?he<ne?[he,ne]:[ne,he]:[fe?he:ne]:null}}if(W(L))return W(H)?Q(W(V)?"line":"quadratic"):Q(q,V/(3*H));var X=3*H*H-4*L*V;if(W(X))return Q("cusp",H/(2*L));var te=X>0?Math.sqrt(X/3):Math.sqrt(-X),ie=2*L;return Q(X>0?q:"loop",(H+te)/ie,(H-te)/ie)},getLength:function(g,m,w,S){if(m===t&&(m=0),w===t&&(w=1),Le.isStraight(g)){var C=g;w<1&&(C=Le.subdivide(C,w)[0],m/=w),m>0&&(C=Le.subdivide(C,m)[1]);var T=C[6]-C[0],P=C[7]-C[1];return Math.sqrt(T*T+P*P)}return O.integrate(S||r(g),m,w,u(m,w))},getTimeAt:function(g,m,w){if(w===t&&(w=m<0?1:0),m===0)return w;var S=Math.abs,C=1e-12,T=m>0,P=T?w:0,R=T?1:w,B=r(g),j=Le.getLength(g,P,R,B),I=S(m)-j;if(S(I)<C)return T?R:P;if(I>C)return null;var G=m/j,V=0;function H(L){return V+=O.integrate(B,w,L,u(w,L)),w=L,V-m}return O.findRoot(H,B,w+G,P,R,32,1e-12)},getPoint:function(g,m){return f(g,m,0,!1)},getTangent:function(g,m){return f(g,m,1,!0)},getWeightedTangent:function(g,m){return f(g,m,1,!1)},getNormal:function(g,m){return f(g,m,2,!0)},getWeightedNormal:function(g,m){return f(g,m,2,!1)},getCurvature:function(g,m){return f(g,m,3,!1).x},getPeaks:function(g){var m=g[0],w=g[1],S=g[2],C=g[3],T=g[4],P=g[5],R=g[6],B=g[7],j=-m+3*S-3*T+R,I=3*m-6*S+3*T,G=-3*m+3*S,V=-w+3*C-3*P+B,H=3*w-6*C+3*P,L=-3*w+3*C,U=1e-8,A=1-U,W=[];return O.solveCubic(9*(j*j+V*V),9*(j*I+H*V),2*(I*I+H*H)+3*(G*j+L*V),G*I+H*L,W,U,A),W.sort()}}}},new function(){function r(I,G,V,H,L,U,A){var W=!A&&V.getPrevious()===L,q=!A&&V!==L&&V.getNext()===L,Q=1e-8,X=1-Q;if(H!==null&&H>=(W?Q:0)&&H<=(q?X:1)&&U!==null&&U>=(q?Q:0)&&U<=(W?X:1)){var te=new wt(V,H,null,A),ie=new wt(L,U,null,A);te._intersection=ie,ie._intersection=te,(!G||G(te))&&wt.insert(I,te,!0)}}function u(I,G,V,H,L,U,A,W,q,Q,X,te,ie){if(++q>=4096||++W>=40)return q;var se=1e-9,he=G[0],ne=G[1],ce=G[6],fe=G[7],ve=xe.getSignedDistance,ye=ve(he,ne,ce,fe,G[2],G[3]),Ee=ve(he,ne,ce,fe,G[4],G[5]),Ne=ye*Ee>0?3/4:4/9,We=Ne*Math.min(0,ye,Ee),$e=Ne*Math.max(0,ye,Ee),it=ve(he,ne,ce,fe,I[0],I[1]),je=ve(he,ne,ce,fe,I[2],I[3]),De=ve(he,ne,ce,fe,I[4],I[5]),et=ve(he,ne,ce,fe,I[6],I[7]),at=f(it,je,De,et),st=at[0],xt=at[1],vt,ot;if(ye===0&&Ee===0&&it===0&&je===0&&De===0&&et===0||(vt=g(st,xt,We,$e))==null||(ot=g(st.reverse(),xt.reverse(),We,$e))==null)return q;var Lt=Q+(X-Q)*vt,bt=Q+(X-Q)*ot;if(Math.max(ie-te,bt-Lt)<se){var pn=(Lt+bt)/2,sn=(te+ie)/2;r(L,U,A?H:V,A?sn:pn,A?V:H,A?pn:sn)}else{I=Le.getPart(I,vt,ot);var Sn=ie-te;if(ot-vt>.8)if(bt-Lt>Sn){var ln=Le.subdivide(I,.5),pn=(Lt+bt)/2;q=u(G,ln[0],H,V,L,U,!A,W,q,te,ie,Lt,pn),q=u(G,ln[1],H,V,L,U,!A,W,q,te,ie,pn,bt)}else{var ln=Le.subdivide(G,.5),sn=(te+ie)/2;q=u(ln[0],I,H,V,L,U,!A,W,q,te,sn,Lt,bt),q=u(ln[1],I,H,V,L,U,!A,W,q,sn,ie,Lt,bt)}else Sn===0||Sn>=se?q=u(G,I,H,V,L,U,!A,W,q,te,ie,Lt,bt):q=u(I,G,V,H,L,U,A,W,q,Lt,bt,te,ie)}return q}function f(I,G,V,H){var L=[0,I],U=[1/3,G],A=[2/3,V],W=[1,H],q=G-(2*I+H)/3,Q=V-(I+2*H)/3,X;if(q*Q<0)X=[[L,U,W],[L,A,W]];else{var te=q/Q;X=[te>=2?[L,U,W]:te<=.5?[L,A,W]:[L,U,A,W],[L,W]]}return(q||Q)<0?X.reverse():X}function g(I,G,V,H){return I[0][1]<V?m(I,!0,V):G[0][1]>H?m(G,!1,H):I[0][0]}function m(I,G,V){for(var H=I[0][0],L=I[0][1],U=1,A=I.length;U<A;U++){var W=I[U][0],q=I[U][1];if(G?q>=V:q<=V)return q===V?W:H+(V-L)*(W-H)/(q-L);H=W,L=q}return null}function w(I,G,V,H,L){var U=O.isZero;if(U(H)&&U(L)){var A=Le.getTimeOf(I,new E(G,V));return A===null?[]:[A]}for(var W=Math.atan2(-L,H),q=Math.sin(W),Q=Math.cos(W),X=[],te=[],ie=0;ie<8;ie+=2){var se=I[ie]-G,he=I[ie+1]-V;X.push(se*Q-he*q,se*q+he*Q)}return Le.solveCubic(X,1,0,te,0,1),te}function S(I,G,V,H,L,U,A){for(var W=G[0],q=G[1],Q=G[6],X=G[7],te=w(I,W,q,Q-W,X-q),ie=0,se=te.length;ie<se;ie++){var he=te[ie],ne=Le.getPoint(I,he),ce=Le.getTimeOf(G,ne);ce!==null&&r(L,U,A?H:V,A?ce:he,A?V:H,A?he:ce)}}function C(I,G,V,H,L,U){var A=xe.intersect(I[0],I[1],I[6],I[7],G[0],G[1],G[6],G[7]);A&&r(L,U,V,Le.getTimeOf(I,A),H,Le.getTimeOf(G,A))}function T(I,G,V,H,L,U){var A=1e-12,W=Math.min,q=Math.max;if(q(I[0],I[2],I[4],I[6])+A>W(G[0],G[2],G[4],G[6])&&W(I[0],I[2],I[4],I[6])-A<q(G[0],G[2],G[4],G[6])&&q(I[1],I[3],I[5],I[7])+A>W(G[1],G[3],G[5],G[7])&&W(I[1],I[3],I[5],I[7])-A<q(G[1],G[3],G[5],G[7])){var Q=B(I,G);if(Q)for(var X=0;X<2;X++){var te=Q[X];r(L,U,V,te[0],H,te[1],!0)}else{var ie=Le.isStraight(I),se=Le.isStraight(G),he=ie&&se,ne=ie&&!se,ce=L.length;if((he?C:ie||se?S:u)(ne?G:I,ne?I:G,ne?H:V,ne?V:H,L,U,ne,0,0,0,1,0,1),!he||L.length===ce)for(var X=0;X<4;X++){var fe=X>>1,ve=X&1,ye=fe*6,Ee=ve*6,Ne=new E(I[ye],I[ye+1]),We=new E(G[Ee],G[Ee+1]);Ne.isClose(We,A)&&r(L,U,V,fe,H,ve)}}}return L}function P(I,G,V,H){var L=Le.classify(I);if(L.type==="loop"){var U=L.roots;r(V,H,G,U[0],G,U[1])}return V}function R(I,G,V,H,L,U){var A=1e-7,W=!G;W&&(G=I);for(var q=I.length,Q=G.length,X=new Array(q),te=W?X:new Array(Q),ie=[],se=0;se<q;se++)X[se]=I[se].getValues(H);if(!W)for(var se=0;se<Q;se++)te[se]=G[se].getValues(L);for(var he=y.findCurveBoundsCollisions(X,te,A),ne=0;ne<q;ne++){var ce=I[ne],fe=X[ne];W&&P(fe,ce,ie,V);var ve=he[ne];if(ve)for(var ye=0;ye<ve.length;ye++){if(U&&ie.length)return ie;var Ee=ve[ye];if(!W||Ee>ne){var Ne=G[Ee],We=te[Ee];T(fe,We,ce,Ne,ie,V)}}}return ie}function B(I,G){function V(et){var at=et[6]-et[0],st=et[7]-et[1];return at*at+st*st}var H=Math.abs,L=xe.getDistance,U=1e-8,A=1e-7,W=Le.isStraight(I),q=Le.isStraight(G),Q=W&&q,X=V(I)<V(G),te=X?G:I,ie=X?I:G,se=te[0],he=te[1],ne=te[6]-se,ce=te[7]-he;if(L(se,he,ne,ce,ie[0],ie[1],!0)<A&&L(se,he,ne,ce,ie[6],ie[7],!0)<A)!Q&&L(se,he,ne,ce,te[2],te[3],!0)<A&&L(se,he,ne,ce,te[4],te[5],!0)<A&&L(se,he,ne,ce,ie[2],ie[3],!0)<A&&L(se,he,ne,ce,ie[4],ie[5],!0)<A&&(W=q=Q=!0);else if(Q)return null;if(W^q)return null;for(var fe=[I,G],ve=[],ye=0;ye<4&&ve.length<2;ye++){var Ee=ye&1,Ne=Ee^1,We=ye>>1,$e=Le.getTimeOf(fe[Ee],new E(fe[Ne][We?6:0],fe[Ne][We?7:1]));if($e!=null){var it=Ee?[We,$e]:[$e,We];(!ve.length||H(it[0]-ve[0][0])>U&&H(it[1]-ve[0][1])>U)&&ve.push(it)}if(ye>2&&!ve.length)break}if(ve.length!==2)ve=null;else if(!Q){var je=Le.getPart(I,ve[0][0],ve[1][0]),De=Le.getPart(G,ve[0][1],ve[1][1]);(H(De[2]-je[2])>A||H(De[3]-je[3])>A||H(De[4]-je[4])>A||H(De[5]-je[5])>A)&&(ve=null)}return ve}function j(I,G){var V=I[0],H=I[1],L=I[2],U=I[3],A=I[4],W=I[5],q=I[6],Q=I[7],X=G.normalize(),te=X.x,ie=X.y,se=3*q-9*A+9*L-3*V,he=3*Q-9*W+9*U-3*H,ne=6*A-12*L+6*V,ce=6*W-12*U+6*H,fe=3*L-3*V,ve=3*U-3*H,ye=2*se*ie-2*he*te,Ee=[];if(Math.abs(ye)<O.CURVETIME_EPSILON){var Ne=se*ve-he*fe,ye=se*ce-he*ne;if(ye!=0){var We=-Ne/ye;We>=0&&We<=1&&Ee.push(We)}}else{var $e=(ne*ne-4*se*fe)*ie*ie+(-2*ne*ce+4*he*fe+4*se*ve)*te*ie+(ce*ce-4*he*ve)*te*te,it=ne*ie-ce*te;if($e>=0&&ye!=0){var je=Math.sqrt($e),De=-(it+je)/ye,et=(-it+je)/ye;De>=0&&De<=1&&Ee.push(De),et>=0&&et<=1&&Ee.push(et)}}return Ee}return{getIntersections:function(I){var G=this.getValues(),V=I&&I!==this&&I.getValues();return V?T(G,V,this,I,[]):P(G,this,[])},statics:{getOverlaps:B,getIntersections:R,getCurveLineIntersections:w,getTimesWithTangent:j}}}),wt=a.extend({_class:"CurveLocation",initialize:function(u,f,g,m,w){if(f>=.99999999){var S=u.getNext();S&&(f=0,u=S)}this._setCurve(u),this._time=f,this._point=g||u.getPointAtTime(f),this._overlap=m,this._distance=w,this._intersection=this._next=this._previous=null},_setPath:function(r){this._path=r,this._version=r?r._version:0},_setCurve:function(r){this._setPath(r._path),this._curve=r,this._segment=null,this._segment1=r._segment1,this._segment2=r._segment2},_setSegment:function(r){var u=r.getCurve();u?this._setCurve(u):(this._setPath(r._path),this._segment1=r,this._segment2=null),this._segment=r,this._time=r===this._segment1?0:1,this._point=r._point.clone()},getSegment:function(){var r=this._segment;if(!r){var u=this.getCurve(),f=this.getTime();f===0?r=u._segment1:f===1?r=u._segment2:f!=null&&(r=u.getPartLength(0,f)<u.getPartLength(f,1)?u._segment1:u._segment2),this._segment=r}return r},getCurve:function(){var r=this._path,u=this;r&&r._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function f(g){var m=g&&g.getCurve();if(m&&(u._time=m.getTimeOf(u._point))!=null)return u._setCurve(m),m}return this._curve||f(this._segment)||f(this._segment1)||f(this._segment2.getPrevious())},getPath:function(){var r=this.getCurve();return r&&r._path},getIndex:function(){var r=this.getCurve();return r&&r.getIndex()},getTime:function(){var r=this.getCurve(),u=this._time;return r&&u==null?this._time=r.getTimeOf(this._point):u},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var r=this._offset;if(r==null){r=0;var u=this.getPath(),f=this.getIndex();if(u&&f!=null)for(var g=u.getCurves(),m=0;m<f;m++)r+=g[m].getLength();this._offset=r+=this.getCurveOffset()}return r},getCurveOffset:function(){var r=this._curveOffset;if(r==null){var u=this.getCurve(),f=this.getTime();this._curveOffset=r=f!=null&&u&&u.getPartLength(0,f)}return r},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var r=this.getCurve(),u=r&&r.divideAtTime(this.getTime());return u&&this._setSegment(u._segment1),u},split:function(){var r=this.getCurve(),u=r._path,f=r&&r.splitAtTime(this.getTime());return f&&this._setSegment(u.getLastSegment()),f},equals:function(r,u){var f=this===r;if(!f&&r instanceof wt){var g=this.getCurve(),m=r.getCurve(),w=g._path,S=m._path;if(w===S){var C=Math.abs,T=1e-7,P=C(this.getOffset()-r.getOffset()),R=!u&&this._intersection,B=!u&&r._intersection;f=(P<T||w&&C(w.getLength()-P)<T)&&(!R&&!B||R&&B&&R.equals(B,!0))}}return f},toString:function(){var r=[],u=this.getPoint(),f=b.instance;u&&r.push("point: "+u);var g=this.getIndex();g!=null&&r.push("index: "+g);var m=this.getTime();return m!=null&&r.push("time: "+f.number(m)),this._distance!=null&&r.push("distance: "+f.number(this._distance)),"{ "+r.join(", ")+" }"},isTouching:function(){var r=this._intersection;if(r&&this.getTangent().isCollinear(r.getTangent())){var u=this.getCurve(),f=r.getCurve();return!(u.isStraight()&&f.isStraight()&&u.getLine().intersect(f.getLine()))}return!1},isCrossing:function(){var r=this._intersection;if(!r)return!1;var u=this.getTime(),f=r.getTime(),g=1e-8,m=1-g,w=u>=g&&u<=m,S=f>=g&&f<=m;if(w&&S)return!this.isTouching();var C=this.getCurve(),T=C&&u<g?C.getPrevious():C,P=r.getCurve(),R=P&&f<g?P.getPrevious():P;if(u>m&&(C=C.getNext()),f>m&&(P=P.getNext()),!T||!C||!R||!P)return!1;var B=[];function j(te,ie){var se=te.getValues(),he=Le.classify(se).roots||Le.getPeaks(se),ne=he.length,ce=Le.getLength(se,ie&&ne?he[ne-1]:0,!ie&&ne?he[0]:1);B.push(ne?ce:ce/32)}function I(te,ie,se){return ie<se?te>ie&&te<se:te>ie||te<se}w||(j(T,!0),j(C,!1)),S||(j(R,!0),j(P,!1));var G=this.getPoint(),V=Math.min.apply(Math,B),H=w?C.getTangentAtTime(u):C.getPointAt(V).subtract(G),L=w?H.negate():T.getPointAt(-V).subtract(G),U=S?P.getTangentAtTime(f):P.getPointAt(V).subtract(G),A=S?U.negate():R.getPointAt(-V).subtract(G),W=L.getAngle(),q=H.getAngle(),Q=A.getAngle(),X=U.getAngle();return!!(w?I(W,Q,X)^I(q,Q,X)&&I(W,X,Q)^I(q,X,Q):I(Q,W,q)^I(X,W,q)&&I(Q,q,W)^I(X,q,W))},hasOverlap:function(){return!!this._overlap}},a.each(Le._evaluateMethods,function(r){var u=r+"At";this[r]=function(){var f=this.getCurve(),g=this.getTime();return g!=null&&f&&f[u](g,!0)}},{preserve:!0}),new function(){function r(u,f,g){var m=u.length,w=0,S=m-1;function C(G,V){for(var H=G+V;H>=-1&&H<=m;H+=V){var L=u[(H%m+m)%m];if(!f.getPoint().isClose(L.getPoint(),1e-7))break;if(f.equals(L))return L}return null}for(;w<=S;){var T=w+S>>>1,P=u[T],R;if(g&&(R=f.equals(P)?P:C(T,-1)||C(T,1)))return f._overlap&&(R._overlap=R._intersection._overlap=!0),R;var B=f.getPath(),j=P.getPath(),I=B!==j?B._id-j._id:f.getIndex()+f.getTime()-(P.getIndex()+P.getTime());I<0?S=T-1:w=T+1}return u.splice(w,0,f),f}return{statics:{insert:r,expand:function(u){for(var f=u.slice(),g=u.length-1;g>=0;g--)r(f,u[g]._intersection,!1);return f}}}}),Be=z.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(r){var u,f,g;if(a.isPlainObject(r)?(f=r.segments,u=r.pathData):Array.isArray(r)?f=r:typeof r=="string"&&(u=r),f){var m=f[0];g=m&&Array.isArray(m[0])}else u&&(g=(u.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(u));var w=g?Ze:Xe;return new w(r)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(r){this.isClockwise()!=(r=!!r)&&this.reverse()},setPathData:function(r){var u=r&&r.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),f,g=!1,m,w,S=new E,C=new E;function T(A,W){var q=+f[A];return g&&(q+=S[W]),q}function P(A){return new E(T(A,"x"),T(A+1,"y"))}this.clear();for(var R=0,B=u&&u.length;R<B;R++){var j=u[R],I=j[0],G=I.toLowerCase();f=j.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var V=f&&f.length;switch(g=I===G,m==="z"&&!/[mz]/.test(G)&&this.moveTo(S),G){case"m":case"l":for(var H=G==="m",L=0;L<V;L+=2)this[H?"moveTo":"lineTo"](S=P(L)),H&&(C=S,H=!1);w=S;break;case"h":case"v":var U=G==="h"?"x":"y";S=S.clone();for(var L=0;L<V;L++)S[U]=T(L,U),this.lineTo(S);w=S;break;case"c":for(var L=0;L<V;L+=6)this.cubicCurveTo(P(L),w=P(L+2),S=P(L+4));break;case"s":for(var L=0;L<V;L+=4)this.cubicCurveTo(/[cs]/.test(m)?S.multiply(2).subtract(w):S,w=P(L),S=P(L+2)),m=G;break;case"q":for(var L=0;L<V;L+=4)this.quadraticCurveTo(w=P(L),S=P(L+2));break;case"t":for(var L=0;L<V;L+=2)this.quadraticCurveTo(w=/[qt]/.test(m)?S.multiply(2).subtract(w):S,S=P(L)),m=G;break;case"a":for(var L=0;L<V;L+=7)this.arcTo(S=P(L+5),new N(+f[L],+f[L+1]),+f[L+2],+f[L+4],+f[L+3]);break;case"z":this.closePath(1e-12),S=C;break}m=G}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(r){var u=r.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(r):{};return u.onPath||!!(this.getFillRule()==="evenodd"?u.windingL&1||u.windingR&1:u.winding)},getIntersections:function(r,u,f,g){var m=this===r||!r,w=this._matrix._orNullIfIdentity(),S=m?w:(f||r._matrix)._orNullIfIdentity();return m||this.getBounds(w).intersects(r.getBounds(S),1e-12)?Le.getIntersections(this.getCurves(),!m&&r.getCurves(),u,w,S,g):[]},getCrossings:function(r){return this.getIntersections(r,function(u){return u.isCrossing()})},getNearestLocation:function(){for(var r=E.read(arguments),u=this.getCurves(),f=1/0,g=null,m=0,w=u.length;m<w;m++){var S=u[m].getNearestLocation(r);S._distance<f&&(f=S._distance,g=S)}return g},getNearestPoint:function(){var r=this.getNearestLocation.apply(this,arguments);return r&&r.getPoint()},interpolate:function(r,u,f){var g=!this._children,m=g?"_segments":"_children",w=r[m],S=u[m],C=this[m];if(!w||!S||w.length!==S.length)throw new Error("Invalid operands in interpolate() call: "+r+", "+u);var T=C.length,P=S.length;if(T<P)for(var R=g?ze:Xe,B=T;B<P;B++)this.add(new R);else T>P&&this[g?"removeSegments":"removeChildren"](P,T);for(var B=0;B<P;B++)C[B].interpolate(w[B],S[B],f);g&&(this.setClosed(r._closed),this._changed(9))},compare:function(r){var u=!1;if(r){var f=this._children||[this],g=r._children?r._children.slice():[r],m=f.length,w=g.length,S=[],C=0;u=!0;for(var T=y.findItemBoundsCollisions(f,g,O.GEOMETRIC_EPSILON),P=m-1;P>=0&&u;P--){var R=f[P];u=!1;var B=T[P];if(B)for(var j=B.length-1;j>=0&&!u;j--)R.compare(g[B[j]])&&(S[B[j]]||(S[B[j]]=!0,C++),u=!0)}u=u&&C===w}return u}}),Xe=Be.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(u){this._closed=!1,this._segments=[],this._version=0;var f=arguments,g=Array.isArray(u)?typeof u[0]=="object"?u:f:u&&u.size===t&&(u.x!==t||u.point!==t)?f:null;g&&g.length>0?this.setSegments(g):(this._curves=t,this._segmentSelection=0,!g&&typeof u=="string"&&(this.setPathData(u),u=null)),this._initialize(!g&&u)},_equals:function(r){return this._closed===r._closed&&a.equals(this._segments,r._segments)},copyContent:function(r){this.setSegments(r._segments),this._closed=r._closed},_changed:function r(u){if(r.base.call(this,u),u&8){if(this._length=this._area=t,u&32)this._version++;else if(this._curves)for(var f=0,g=this._curves.length;f<g;f++)this._curves[f]._changed()}else u&64&&(this._bounds=t)},getStyle:function(){var r=this._parent;return(r instanceof Ze?r:this)._style},getSegments:function(){return this._segments},setSegments:function(r){var u=this.isFullySelected(),f=r&&r.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,f){var g=r[f-1];typeof g=="boolean"&&(this.setClosed(g),f--),this._add(ze.readList(r,0,{},f))}u&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var r=this._curves,u=this._segments;if(!r){var f=this._countCurves();r=this._curves=new Array(f);for(var g=0;g<f;g++)r[g]=new Le(this,u[g],u[g+1]||u[0])}return r},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var r=this.getCurves();return r[r.length-1]},isClosed:function(){return this._closed},setClosed:function(r){if(this._closed!=(r=!!r)){if(this._closed=r,this._curves){var u=this._curves.length=this._countCurves();r&&(this._curves[u-1]=new Le(this,this._segments[u-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(r,u){var f=this._segments,g=f.length,m=new b(u),w=new Array(6),S=!0,C,T,P,R,B,j,I,G,V=[];function H(U,A){if(U._transformCoordinates(r,w),C=w[0],T=w[1],S)V.push("M"+m.pair(C,T)),S=!1;else if(B=w[2],j=w[3],B===C&&j===T&&I===P&&G===R){if(!A){var W=C-P,q=T-R;V.push(W===0?"v"+m.number(q):q===0?"h"+m.number(W):"l"+m.pair(W,q))}}else V.push("c"+m.pair(I-P,G-R)+" "+m.pair(B-P,j-R)+" "+m.pair(C-P,T-R));P=C,R=T,I=w[4],G=w[5]}if(!g)return"";for(var L=0;L<g;L++)H(f[L]);return this._closed&&g>0&&(H(f[0],!0),V.push("z")),V.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(r){for(var u=this._segments,f=new Array(6),g=0,m=u.length;g<m;g++)u[g]._transformCoordinates(r,f,!0);return!0},_add:function(r,S){for(var f=this._segments,g=this._curves,m=r.length,w=S==null,S=w?f.length:S,C=0;C<m;C++){var T=r[C];T._path&&(T=r[C]=T.clone()),T._path=this,T._index=S+C,T._selection&&this._updateSelection(T,0,T._selection)}if(w)a.push(f,r);else{f.splice.apply(f,[S,0].concat(r));for(var C=S+m,P=f.length;C<P;C++)f[C]._index=C}if(g){var R=this._countCurves(),B=S>0&&S+m-1===R?S-1:S,j=B,I=Math.min(B+m,R);r._curves&&(g.splice.apply(g,[B,0].concat(r._curves)),j+=r._curves.length);for(var C=j;C<I;C++)g.splice(C,0,new Le(this,null,null));this._adjustCurves(B,I)}return this._changed(41),r},_adjustCurves:function(r,u){for(var f=this._segments,g=this._curves,m,w=r;w<u;w++)m=g[w],m._path=this,m._segment1=f[w],m._segment2=f[w+1]||f[0],m._changed();(m=g[this._closed&&!r?f.length-1:r-1])&&(m._segment2=f[r]||f[0],m._changed()),(m=g[u])&&(m._segment1=f[u],m._changed())},_countCurves:function(){var r=this._segments.length;return!this._closed&&r>0?r-1:r},add:function(r){var u=arguments;return u.length>1&&typeof r!="number"?this._add(ze.readList(u)):this._add([ze.read(u)])[0]},insert:function(r,u){var f=arguments;return f.length>2&&typeof u!="number"?this._add(ze.readList(f,1),r):this._add([ze.read(f,1)],r)[0]},addSegment:function(){return this._add([ze.read(arguments)])[0]},insertSegment:function(r){return this._add([ze.read(arguments,1)],r)[0]},addSegments:function(r){return this._add(ze.readList(r))},insertSegments:function(r,u){return this._add(ze.readList(u),r)},removeSegment:function(r){return this.removeSegments(r,r+1)[0]||null},removeSegments:function(r,u,f){r=r||0,u=a.pick(u,this._segments.length);var g=this._segments,m=this._curves,w=g.length,S=g.splice(r,u-r),C=S.length;if(!C)return S;for(var T=0;T<C;T++){var P=S[T];P._selection&&this._updateSelection(P,P._selection,0),P._index=P._path=null}for(var T=r,R=g.length;T<R;T++)g[T]._index=T;if(m){for(var B=r>0&&u===w+(this._closed?1:0)?r-1:r,m=m.splice(B,C),T=m.length-1;T>=0;T--)m[T]._path=null;f&&(S._curves=m.slice(1)),this._adjustCurves(B,B)}return this._changed(41),S},clear:"#removeSegments",hasHandles:function(){for(var r=this._segments,u=0,f=r.length;u<f;u++)if(r[u].hasHandles())return!0;return!1},clearHandles:function(){for(var r=this._segments,u=0,f=r.length;u<f;u++)r[u].clearHandles()},getLength:function(){if(this._length==null){for(var r=this.getCurves(),u=0,f=0,g=r.length;f<g;f++)u+=r[f].getLength();this._length=u}return this._length},getArea:function(){var r=this._area;if(r==null){var u=this._segments,f=this._closed;r=0;for(var g=0,m=u.length;g<m;g++){var w=g+1===m;r+=Le.getArea(Le.getValues(u[g],u[w?0:g+1],null,w&&!f))}this._area=r}return r},isFullySelected:function(){var r=this._segments.length;return this.isSelected()&&r>0&&this._segmentSelection===r*7},setFullySelected:function(r){r&&this._selectSegments(!0),this.setSelected(r)},setSelection:function r(u){u&1||this._selectSegments(!1),r.base.call(this,u)},_selectSegments:function(r){var u=this._segments,f=u.length,g=r?7:0;this._segmentSelection=g*f;for(var m=0;m<f;m++)u[m]._selection=g},_updateSelection:function(r,u,f){r._selection=f;var g=this._segmentSelection+=f-u;g>0&&this.setSelected(!0)},divideAt:function(r){var u=this.getLocationAt(r),f;return u&&(f=u.getCurve().divideAt(u.getCurveOffset()))?f._segment1:null},splitAt:function(r){var u=this.getLocationAt(r),f=u&&u.index,g=u&&u.time,m=1e-8,w=1-m;g>w&&(f++,g=0);var S=this.getCurves();if(f>=0&&f<S.length){g>=m&&S[f++].divideAtTime(g);var C=this.removeSegments(f,this._segments.length,!0),T;return this._closed?(this.setClosed(!1),T=this):(T=new Xe(z.NO_INSERT),T.insertAbove(this),T.copyAttributes(this)),T._add(C,0),this.addSegment(C[0]),T}return null},split:function(r,u){var f,g=u===t?r:(f=this.getCurves()[r])&&f.getLocationAtTime(u);return g!=null?this.splitAt(g):null},join:function(r,u){var f=u||0;if(r&&r!==this){var g=r._segments,m=this.getLastSegment(),w=r.getLastSegment();if(!w)return this;m&&m._point.isClose(w._point,f)&&r.reverse();var S=r.getFirstSegment();if(m&&m._point.isClose(S._point,f))m.setHandleOut(S._handleOut),this._add(g.slice(1));else{var C=this.getFirstSegment();C&&C._point.isClose(S._point,f)&&r.reverse(),w=r.getLastSegment(),C&&C._point.isClose(w._point,f)?(C.setHandleIn(w._handleIn),this._add(g.slice(0,g.length-1),0)):this._add(g.slice())}r._closed&&this._add([g[0]]),r.remove()}var T=this.getFirstSegment(),P=this.getLastSegment();return T!==P&&T._point.isClose(P._point,f)&&(T.setHandleIn(P._handleIn),P.remove(),this.setClosed(!0)),this},reduce:function(r){for(var u=this.getCurves(),f=r&&r.simplify,g=f?1e-7:0,m=u.length-1;m>=0;m--){var w=u[m];!w.hasHandles()&&(!w.hasLength(g)||f&&w.isCollinear(w.getNext()))&&w.remove()}return this},reverse:function(){this._segments.reverse();for(var r=0,u=this._segments.length;r<u;r++){var f=this._segments[r],g=f._handleIn;f._handleIn=f._handleOut,f._handleOut=g,f._index=r}this._curves=null,this._changed(9)},flatten:function(r){for(var u=new we(this,r||.25,256,!0),f=u.parts,g=f.length,m=[],w=0;w<g;w++)m.push(new ze(f[w].curve.slice(0,2)));!this._closed&&g>0&&m.push(new ze(f[g-1].curve.slice(6))),this.setSegments(m)},simplify:function(r){var u=new Fe(this).fit(r||2.5);return u&&this.setSegments(u),!!u},smooth:function(r){var u=this,f=r||{},g=f.type||"asymmetric",m=this._segments,w=m.length,S=this._closed;function C(st,xt){var vt=st&&st.index;if(vt!=null){var ot=st.path;if(ot&&ot!==u)throw new Error(st._class+" "+vt+" of "+ot+" is not part of "+u);xt&&st instanceof Le&&vt++}else vt=typeof st=="number"?st:xt;return Math.min(vt<0&&S?vt%w:vt<0?vt+w:vt,w-1)}var T=S&&f.from===t&&f.to===t,P=C(f.from,0),R=C(f.to,w-1);if(P>R)if(S)P-=w;else{var B=P;P=R,R=B}if(/^(?:asymmetric|continuous)$/.test(g)){var j=g==="asymmetric",I=Math.min,G=R-P+1,V=G-1,H=T?I(G,4):1,L=H,U=H,A=[];if(S||(L=I(1,P),U=I(1,w-R-1)),V+=L+U,V<=1)return;for(var W=0,q=P-L;W<=V;W++,q++)A[W]=m[(q<0?q+w:q)%w]._point;for(var Q=A[0]._x+2*A[1]._x,X=A[0]._y+2*A[1]._y,te=2,ie=V-1,se=[Q],he=[X],ne=[te],ce=[],fe=[],W=1;W<V;W++){var ve=W<ie,ye=ve||j?1:2,Ee=ve?4:j?2:7,Ne=ve?4:j?3:8,We=ve?2:j?0:1,$e=ye/te;te=ne[W]=Ee-$e,Q=se[W]=Ne*A[W]._x+We*A[W+1]._x-$e*Q,X=he[W]=Ne*A[W]._y+We*A[W+1]._y-$e*X}ce[ie]=se[ie]/ne[ie],fe[ie]=he[ie]/ne[ie];for(var W=V-2;W>=0;W--)ce[W]=(se[W]-ce[W+1])/ne[W],fe[W]=(he[W]-fe[W+1])/ne[W];ce[V]=(3*A[V]._x-ce[ie])/2,fe[V]=(3*A[V]._y-fe[ie])/2;for(var W=L,it=V-U,q=P;W<=it;W++,q++){var je=m[q<0?q+w:q],De=je._point,et=ce[W]-De._x,at=fe[W]-De._y;(T||W<it)&&je.setHandleOut(et,at),(T||W>L)&&je.setHandleIn(-et,-at)}}else for(var W=P;W<=R;W++)m[W<0?W+w:W].smooth(f,!T&&W===P,!T&&W===R)},toShape:function(r){if(!this._closed)return null;var u=this._segments,f,g,m,w;function S(j,I){var G=u[j],V=G.getNext(),H=u[I],L=H.getNext();return G._handleOut.isZero()&&V._handleIn.isZero()&&H._handleOut.isZero()&&L._handleIn.isZero()&&V._point.subtract(G._point).isCollinear(L._point.subtract(H._point))}function C(j){var I=u[j],G=I.getPrevious(),V=I.getNext();return G._handleOut.isZero()&&I._handleIn.isZero()&&I._handleOut.isZero()&&V._handleIn.isZero()&&I._point.subtract(G._point).isOrthogonal(V._point.subtract(I._point))}function T(j){var I=u[j],G=I.getNext(),V=I._handleOut,H=G._handleIn,L=.5522847498307936;if(V.isOrthogonal(H)){var U=I._point,A=G._point,W=new xe(U,V,!0).intersect(new xe(A,H,!0),!0);return W&&O.isZero(V.getLength()/W.subtract(U).getLength()-L)&&O.isZero(H.getLength()/W.subtract(A).getLength()-L)}return!1}function P(j,I){return u[j]._point.getDistance(u[I]._point)}if(!this.hasHandles()&&u.length===4&&S(0,2)&&S(1,3)&&C(1)?(f=Je.Rectangle,g=new N(P(0,3),P(0,1)),w=u[1]._point.add(u[2]._point).divide(2)):u.length===8&&T(0)&&T(2)&&T(4)&&T(6)&&S(1,5)&&S(3,7)?(f=Je.Rectangle,g=new N(P(1,6),P(0,3)),m=g.subtract(new N(P(0,7),P(1,2))).divide(2),w=u[3]._point.add(u[4]._point).divide(2)):u.length===4&&T(0)&&T(1)&&T(2)&&T(3)&&(O.isZero(P(0,2)-P(1,3))?(f=Je.Circle,m=P(0,2)/2):(f=Je.Ellipse,m=new N(P(2,0)/2,P(3,1)/2)),w=u[1]._point),f){var R=this.getPosition(!0),B=new f({center:R,size:g,radius:m,insert:!1});return B.copyAttributes(this,!0),B._matrix.prepend(this._matrix),B.rotate(w.subtract(R).getAngle()+90),(r===t||r)&&B.insertAbove(this),B}return null},toPath:"#clone",compare:function r(u){if(!u||u instanceof Ze)return r.base.call(this,u);var f=this.getCurves(),g=u.getCurves(),m=f.length,w=g.length;if(!m||!w)return m==w;for(var S=f[0].getValues(),C=[],T=0,P,R=0,B,j=0;j<w;j++){var H=g[j].getValues();C.push(H);var I=Le.getOverlaps(S,H);if(I){P=!j&&I[0][0]>0?w-1:j,B=I[0][1];break}}for(var G=Math.abs,V=1e-8,H=C[P],L;S&&H;){var I=Le.getOverlaps(S,H);if(I){var U=I[0][0];if(G(U-R)<V){R=I[1][0],R===1&&(S=++T<m?f[T].getValues():null,R=0);var A=I[0][1];if(G(A-B)<V){if(L||(L=[P,A]),B=I[1][1],B===1&&(++P>=w&&(P=0),H=C[P]||g[P].getValues(),B=0),!S)return L[0]===P&&L[1]===B;continue}}}break}return!1},_hitTestSelf:function(r,u,f,g){var m=this,w=this.getStyle(),S=this._segments,C=S.length,T=this._closed,P=u._tolerancePadding,R=P,B,j,I,G,V,H,L=u.stroke&&w.hasStroke(),U=u.fill&&w.hasFill(),A=u.curves,W=L?w.getStrokeWidth()/2:U&&u.tolerance>0||A?0:null;W!==null&&(W>0?(B=w.getStrokeJoin(),j=w.getStrokeCap(),I=w.getMiterLimit(),R=R.add(Xe._getStrokePadding(W,g))):B=j="round");function q(ce,fe){return r.subtract(ce).divide(fe).length<=1}function Q(ce,fe,ve){if(!u.selected||fe.isSelected()){var ye=ce._point;if(fe!==ye&&(fe=fe.add(ye)),q(fe,R))return new dt(ve,m,{segment:ce,point:fe})}}function X(ce,fe){return(fe||u.segments)&&Q(ce,ce._point,"segment")||!fe&&u.handles&&(Q(ce,ce._handleIn,"handle-in")||Q(ce,ce._handleOut,"handle-out"))}function te(ce){G.add(ce)}function ie(ce){var fe=T||ce._index>0&&ce._index<C-1;if((fe?B:j)==="round")return q(ce._point,R);if(G=new Xe({internal:!0,closed:!0}),fe?ce.isSmooth()||Xe._addBevelJoin(ce,B,W,I,null,g,te,!0):j==="square"&&Xe._addSquareCap(ce,j,W,null,g,te,!0),!G.isEmpty()){var ve;return G.contains(r)||(ve=G.getNearestLocation(r))&&q(ve.getPoint(),P)}}if(u.ends&&!u.segments&&!T){if(H=X(S[0],!0)||X(S[C-1],!0))return H}else if(u.segments||u.handles){for(var se=0;se<C;se++)if(H=X(S[se]))return H}if(W!==null){if(V=this.getNearestLocation(r),V){var he=V.getTime();he===0||he===1&&C>1?ie(V.getSegment())||(V=null):q(V.getPoint(),R)||(V=null)}if(!V&&B==="miter"&&C>1)for(var se=0;se<C;se++){var ne=S[se];if(r.getDistance(ne._point)<=I*W&&ie(ne)){V=ne.getLocation();break}}}return!V&&U&&this._contains(r)||V&&!L&&!A?new dt("fill",this):V?new dt(L?"stroke":"curve",this,{location:V,point:V.getPoint()}):null}},a.each(Le._evaluateMethods,function(r){this[r+"At"]=function(u){var f=this.getLocationAt(u);return f&&f[r]()}},{beans:!1,getLocationOf:function(){for(var r=E.read(arguments),u=this.getCurves(),f=0,g=u.length;f<g;f++){var m=u[f].getLocationOf(r);if(m)return m}return null},getOffsetOf:function(){var r=this.getLocationOf.apply(this,arguments);return r?r.getOffset():null},getLocationAt:function(r){if(typeof r=="number"){for(var u=this.getCurves(),f=0,g=0,m=u.length;g<m;g++){var w=f,S=u[g];if(f+=S.getLength(),f>r)return S.getLocationAt(r-w)}if(u.length>0&&r<=this.getLength())return new wt(u[u.length-1],1)}else if(r&&r.getPath&&r.getPath()===this)return r;return null},getOffsetsWithTangent:function(){var r=E.read(arguments);if(r.isZero())return[];for(var u=[],f=0,g=this.getCurves(),m=0,w=g.length;m<w;m++){for(var S=g[m],C=S.getTimesWithTangent(r),T=0,P=C.length;T<P;T++){var R=f+S.getOffsetAtTime(C[T]);u.indexOf(R)<0&&u.push(R)}f+=S.length}return u}}),new function(){function r(f,g,m,w){if(w<=0)return;var S=w/2,C=w-2,T=S-1,P=new Array(6),R,B;function j(U){var A=P[U],W=P[U+1];(R!=A||B!=W)&&(f.beginPath(),f.moveTo(R,B),f.lineTo(A,W),f.stroke(),f.beginPath(),f.arc(A,W,S,0,Math.PI*2,!0),f.fill())}for(var I=0,G=g.length;I<G;I++){var V=g[I],H=V._selection;if(V._transformCoordinates(m,P),R=P[0],B=P[1],H&2&&j(2),H&4&&j(4),f.fillRect(R-S,B-S,w,w),C>0&&!(H&1)){var L=f.fillStyle;f.fillStyle="#ffffff",f.fillRect(R-T,B-T,C,C),f.fillStyle=L}}}function u(f,g,m){var w=g._segments,S=w.length,C=new Array(6),T=!0,P,R,B,j,I,G,V,H;function L(A){if(m)A._transformCoordinates(m,C),P=C[0],R=C[1];else{var W=A._point;P=W._x,R=W._y}if(T)f.moveTo(P,R),T=!1;else{if(m)I=C[2],G=C[3];else{var q=A._handleIn;I=P+q._x,G=R+q._y}I===P&&G===R&&V===B&&H===j?f.lineTo(P,R):f.bezierCurveTo(V,H,I,G,P,R)}if(B=P,j=R,m)V=C[4],H=C[5];else{var q=A._handleOut;V=B+q._x,H=j+q._y}}for(var U=0;U<S;U++)L(w[U]);g._closed&&S>0&&L(w[0])}return{_draw:function(f,g,m,w){var S=g.dontStart,C=g.dontFinish||g.clip,T=this.getStyle(),P=T.hasFill(),R=T.hasStroke(),B=T.getDashArray(),j=!Ft.support.nativeDash&&R&&B&&B.length;S||f.beginPath(),(P||R&&!j||C)&&(u(f,this,w),this._closed&&f.closePath());function I(A){return B[(A%j+j)%j]}if(!C&&(P||R)&&(this._setStyles(f,g,m),P&&(f.fill(T.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),R)){if(j){S||f.beginPath();for(var G=new we(this,.25,32,!1,w),V=G.length,H=-T.getDashOffset(),L,U=0;H>0;)H-=I(U--)+I(U--);for(;H<V;)L=H+I(U++),(H>0||L>0)&&G.drawPart(f,Math.max(H,0),Math.max(L,0)),H=L+I(U++)}f.stroke()}},_drawSelected:function(f,g){f.beginPath(),u(f,this,g),f.stroke(),r(f,this._segments,g,Ft.settings.handleSize)}}},new function(){function r(u){var f=u._segments;if(!f.length)throw new Error("Use a moveTo() command first");return f[f.length-1]}return{moveTo:function(){var u=this._segments;u.length===1&&this.removeSegment(0),u.length||this._add([new ze(E.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ze(E.read(arguments))])},cubicCurveTo:function(){var u=arguments,f=E.read(u),g=E.read(u),m=E.read(u),w=r(this);w.setHandleOut(f.subtract(w._point)),this._add([new ze(m,g.subtract(m))])},quadraticCurveTo:function(){var u=arguments,f=E.read(u),g=E.read(u),m=r(this)._point;this.cubicCurveTo(f.add(m.subtract(f).multiply(1/3)),f.add(g.subtract(f).multiply(1/3)),g)},curveTo:function(){var u=arguments,f=E.read(u),g=E.read(u),m=a.pick(a.read(u),.5),w=1-m,S=r(this)._point,C=f.subtract(S.multiply(w*w)).subtract(g.multiply(m*m)).divide(2*m*w);if(C.isNaN())throw new Error("Cannot put a curve through points with parameter = "+m);this.quadraticCurveTo(C,g)},arcTo:function(){var u=arguments,f=Math.abs,g=Math.sqrt,m=r(this),w=m._point,S=E.read(u),C,T=a.peek(u),P=a.pick(T,!0),R,B,j,I;if(typeof P=="boolean")var G=w.add(S).divide(2),C=G.add(G.subtract(w).rotate(P?-90:90));else if(a.remain(u)<=2)C=S,S=E.read(u);else if(!w.equals(S)){var V=N.read(u),H=O.isZero;if(H(V.width)||H(V.height))return this.lineTo(S);var L=a.read(u),P=!!a.read(u),U=!!a.read(u),G=w.add(S).divide(2),A=w.subtract(G).rotate(-L),W=A.x,q=A.y,Q=f(V.width),X=f(V.height),te=Q*Q,ie=X*X,se=W*W,he=q*q,ne=g(se/te+he/ie);if(ne>1&&(Q*=ne,X*=ne,te=Q*Q,ie=X*X),ne=(te*ie-te*he-ie*se)/(te*he+ie*se),f(ne)<1e-12&&(ne=0),ne<0)throw new Error("Cannot create an arc with the given arguments");R=new E(Q*q/X,-X*W/Q).multiply((U===P?-1:1)*g(ne)).rotate(L).add(G),I=new ue().translate(R).rotate(L).scale(Q,X),j=I._inverseTransform(w),B=j.getDirectedAngle(I._inverseTransform(S)),!P&&B>0?B-=360:P&&B<0&&(B+=360)}if(C){var ce=new xe(w.add(C).divide(2),C.subtract(w).rotate(90),!0),fe=new xe(C.add(S).divide(2),S.subtract(C).rotate(90),!0),ve=new xe(w,S),ye=ve.getSide(C);if(R=ce.intersect(fe,!0),!R){if(!ye)return this.lineTo(S);throw new Error("Cannot create an arc with the given arguments")}j=w.subtract(R),B=j.getDirectedAngle(S.subtract(R));var Ee=ve.getSide(R,!0);Ee===0?B=ye*f(B):ye===Ee&&(B+=B<0?360:-360)}if(B){for(var Ne=1e-5,We=f(B),$e=We>=360?4:Math.ceil((We-Ne)/90),it=B/$e,je=it*Math.PI/360,De=4/3*Math.sin(je)/(1+Math.cos(je)),et=[],at=0;at<=$e;at++){var A=S,st=null;if(at<$e&&(st=j.rotate(90).multiply(De),I?(A=I._transformPoint(j),st=I._transformPoint(j.add(st)).subtract(A)):A=R.add(j)),!at)m.setHandleOut(st);else{var xt=j.rotate(-90).multiply(De);I&&(xt=I._transformPoint(j.add(xt)).subtract(A)),et.push(new ze(A,xt,st))}j=j.rotate(it)}this._add(et)}},lineBy:function(){var u=E.read(arguments),f=r(this)._point;this.lineTo(f.add(u))},curveBy:function(){var u=arguments,f=E.read(u),g=E.read(u),m=a.read(u),w=r(this)._point;this.curveTo(w.add(f),w.add(g),m)},cubicCurveBy:function(){var u=arguments,f=E.read(u),g=E.read(u),m=E.read(u),w=r(this)._point;this.cubicCurveTo(w.add(f),w.add(g),w.add(m))},quadraticCurveBy:function(){var u=arguments,f=E.read(u),g=E.read(u),m=r(this)._point;this.quadraticCurveTo(m.add(f),m.add(g))},arcBy:function(){var u=arguments,f=r(this)._point,g=f.add(E.read(u)),m=a.pick(a.peek(u),!0);typeof m=="boolean"?this.arcTo(g,m):this.arcTo(g,f.add(E.read(u)))},closePath:function(u){this.setClosed(!0),this.join(this,u)}}},{_getBounds:function(r,u){var f=u.handle?"getHandleBounds":u.stroke?"getStrokeBounds":"getBounds";return Xe[f](this._segments,this._closed,this,r,u)},statics:{getBounds:function(r,u,f,g,m,w){var S=r[0];if(!S)return new ee;var C=new Array(6),T=S._transformCoordinates(g,new Array(6)),P=T.slice(0,2),R=P.slice(),B=new Array(2);function j(V){V._transformCoordinates(g,C);for(var H=0;H<2;H++)Le._addBounds(T[H],T[H+4],C[H+2],C[H],H,w?w[H]:0,P,R,B);var L=T;T=C,C=L}for(var I=1,G=r.length;I<G;I++)j(r[I]);return u&&j(S),new ee(P[0],P[1],R[0]-P[0],R[1]-P[1])},getStrokeBounds:function(r,u,f,g,m){var w=f.getStyle(),S=w.hasStroke(),C=w.getStrokeWidth(),T=S&&f._getStrokeMatrix(g,m),P=S&&Xe._getStrokePadding(C,T),R=Xe.getBounds(r,u,f,g,m,P);if(!S)return R;var B=C/2,j=w.getStrokeJoin(),I=w.getStrokeCap(),G=w.getMiterLimit(),V=new ee(new N(P));function H(Q){R=R.include(Q)}function L(Q){R=R.unite(V.setCenter(Q._point.transform(g)))}function U(Q,X){X==="round"||Q.isSmooth()?L(Q):Xe._addBevelJoin(Q,X,B,G,g,T,H)}function A(Q,X){X==="round"?L(Q):Xe._addSquareCap(Q,X,B,g,T,H)}var W=r.length-(u?0:1);if(W>0){for(var q=1;q<W;q++)U(r[q],j);u?U(r[0],j):(A(r[0],I),A(r[r.length-1],I))}return R},_getStrokePadding:function(r,u){if(!u)return[r,r];var f=new E(r,0).transform(u),g=new E(0,r).transform(u),m=f.getAngleInRadians(),w=f.getLength(),S=g.getLength(),C=Math.sin(m),T=Math.cos(m),P=Math.tan(m),R=Math.atan2(S*P,w),B=Math.atan2(S,P*w);return[Math.abs(w*Math.cos(R)*T+S*Math.sin(R)*C),Math.abs(S*Math.sin(B)*T+w*Math.cos(B)*C)]},_addBevelJoin:function(r,u,f,g,m,w,S,C){var T=r.getCurve(),P=T.getPrevious(),R=T.getPoint1().transform(m),B=P.getNormalAtTime(1).multiply(f).transform(w),j=T.getNormalAtTime(0).multiply(f).transform(w),I=B.getDirectedAngle(j);if((I<0||I>=180)&&(B=B.negate(),j=j.negate()),C&&S(R),S(R.add(B)),u==="miter"){var G=new xe(R.add(B),new E(-B.y,B.x),!0).intersect(new xe(R.add(j),new E(-j.y,j.x),!0),!0);G&&R.getDistance(G)<=g*f&&S(G)}S(R.add(j))},_addSquareCap:function(r,u,f,g,m,w,S){var C=r._point.transform(g),T=r.getLocation(),P=T.getNormal().multiply(T.getTime()===0?f:-f).transform(m);u==="square"&&(S&&(w(C.subtract(P)),w(C.add(P))),C=C.add(P.rotate(-90))),w(C.add(P)),w(C.subtract(P))},getHandleBounds:function(r,u,f,g,m){var w=f.getStyle(),S=m.stroke&&w.hasStroke(),C,T;if(S){var P=f._getStrokeMatrix(g,m),R=w.getStrokeWidth()/2,B=R;w.getStrokeJoin()==="miter"&&(B=R*w.getMiterLimit()),w.getStrokeCap()==="square"&&(B=Math.max(B,R*Math.SQRT2)),C=Xe._getStrokePadding(R,P),T=Xe._getStrokePadding(B,P)}for(var j=new Array(6),I=1/0,G=-I,V=I,H=G,L=0,U=r.length;L<U;L++){var A=r[L];A._transformCoordinates(g,j);for(var W=0;W<6;W+=2){var q=W?C:T,Q=q?q[0]:0,X=q?q[1]:0,te=j[W],ie=j[W+1],se=te-Q,he=te+Q,ne=ie-X,ce=ie+X;se<I&&(I=se),he>G&&(G=he),ne<V&&(V=ne),ce>H&&(H=ce)}}return new ee(I,V,G-I,H-V)}}});Xe.inject({statics:new function(){var r=.5522847498307936,u=[new ze([-1,0],[0,r],[0,-r]),new ze([0,-1],[-r,0],[r,0]),new ze([1,0],[0,-r],[0,r]),new ze([0,1],[r,0],[-r,0])];function f(m,w,S){var C=a.getNamed(S),T=new Xe(C&&(C.insert==!0?z.INSERT:C.insert==!1?z.NO_INSERT:null));return T._add(m),T._closed=w,T.set(C,z.INSERT)}function g(m,w,S){for(var C=new Array(4),T=0;T<4;T++){var P=u[T];C[T]=new ze(P._point.multiply(w).add(m),P._handleIn.multiply(w),P._handleOut.multiply(w))}return f(C,!0,S)}return{Line:function(){var m=arguments;return f([new ze(E.readNamed(m,"from")),new ze(E.readNamed(m,"to"))],!1,m)},Circle:function(){var m=arguments,w=E.readNamed(m,"center"),S=a.readNamed(m,"radius");return g(w,new N(S),m)},Rectangle:function(){var m=arguments,w=ee.readNamed(m,"rectangle"),S=N.readNamed(m,"radius",0,{readNull:!0}),C=w.getBottomLeft(!0),T=w.getTopLeft(!0),P=w.getTopRight(!0),R=w.getBottomRight(!0),B;if(!S||S.isZero())B=[new ze(C),new ze(T),new ze(P),new ze(R)];else{S=N.min(S,w.getSize(!0).divide(2));var j=S.width,I=S.height,G=j*r,V=I*r;B=[new ze(C.add(j,0),null,[-G,0]),new ze(C.subtract(0,I),[0,V]),new ze(T.add(0,I),null,[0,-V]),new ze(T.add(j,0),[-G,0],null),new ze(P.subtract(j,0),null,[G,0]),new ze(P.add(0,I),[0,-V],null),new ze(R.subtract(0,I),null,[0,V]),new ze(R.subtract(j,0),[G,0])]}return f(B,!0,m)},RoundRectangle:"#Rectangle",Ellipse:function(){var m=arguments,w=Je._readEllipse(m);return g(w.center,w.radius,m)},Oval:"#Ellipse",Arc:function(){var m=arguments,w=E.readNamed(m,"from"),S=E.readNamed(m,"through"),C=E.readNamed(m,"to"),T=a.getNamed(m),P=new Xe(T&&T.insert==!1&&z.NO_INSERT);return P.moveTo(w),P.arcTo(S,C),P.set(T)},RegularPolygon:function(){for(var m=arguments,w=E.readNamed(m,"center"),S=a.readNamed(m,"sides"),C=a.readNamed(m,"radius"),T=360/S,P=S%3===0,R=new E(0,P?-C:C),B=P?-1:.5,j=new Array(S),I=0;I<S;I++)j[I]=new ze(w.add(R.rotate((I+B)*T)));return f(j,!0,m)},Star:function(){for(var m=arguments,w=E.readNamed(m,"center"),S=a.readNamed(m,"points")*2,C=a.readNamed(m,"radius1"),T=a.readNamed(m,"radius2"),P=360/S,R=new E(0,-1),B=new Array(S),j=0;j<S;j++)B[j]=new ze(w.add(R.rotate(P*j).multiply(j%2?T:C)));return f(B,!0,m)}}}});var Ze=Be.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(u){this._children=[],this._namedChildren={},this._initialize(u)||(typeof u=="string"?this.setPathData(u):this.addChildren(Array.isArray(u)?u:arguments))},insertChildren:function r(u,f){var g=f,m=g[0];m&&typeof m[0]=="number"&&(g=[g]);for(var w=f.length-1;w>=0;w--){var S=g[w];g===f&&!(S instanceof Xe)&&(g=a.slice(g)),Array.isArray(S)?g[w]=new Xe({segments:S,insert:!1}):S instanceof Ze&&(g.splice.apply(g,[w,1].concat(S.removeChildren())),S.remove())}return r.base.call(this,u,g)},reduce:function r(u){for(var f=this._children,g=f.length-1;g>=0;g--){var m=f[g].reduce(u);m.isEmpty()&&m.remove()}if(!f.length){var m=new Xe(z.NO_INSERT);return m.copyAttributes(this),m.insertAbove(this),this.remove(),m}return r.base.call(this)},isClosed:function(){for(var r=this._children,u=0,f=r.length;u<f;u++)if(!r[u]._closed)return!1;return!0},setClosed:function(r){for(var u=this._children,f=0,g=u.length;f<g;f++)u[f].setClosed(r)},getFirstSegment:function(){var r=this.getFirstChild();return r&&r.getFirstSegment()},getLastSegment:function(){var r=this.getLastChild();return r&&r.getLastSegment()},getCurves:function(){for(var r=this._children,u=[],f=0,g=r.length;f<g;f++)a.push(u,r[f].getCurves());return u},getFirstCurve:function(){var r=this.getFirstChild();return r&&r.getFirstCurve()},getLastCurve:function(){var r=this.getLastChild();return r&&r.getLastCurve()},getArea:function(){for(var r=this._children,u=0,f=0,g=r.length;f<g;f++)u+=r[f].getArea();return u},getLength:function(){for(var r=this._children,u=0,f=0,g=r.length;f<g;f++)u+=r[f].getLength();return u},getPathData:function(r,u){for(var f=this._children,g=[],m=0,w=f.length;m<w;m++){var S=f[m],C=S._matrix;g.push(S.getPathData(r&&!C.isIdentity()?r.appended(C):r,u))}return g.join("")},_hitTestChildren:function r(u,f,g){return r.base.call(this,u,f.class===Xe||f.type==="path"?f:a.set({},f,{fill:!1}),g)},_draw:function(r,u,f,g){var m=this._children;if(m.length){u=u.extend({dontStart:!0,dontFinish:!0}),r.beginPath();for(var w=0,S=m.length;w<S;w++)m[w].draw(r,u,g);if(!u.clip){this._setStyles(r,u,f);var C=this._style;C.hasFill()&&(r.fill(C.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),C.hasStroke()&&r.stroke()}}},_drawSelected:function(r,u,f){for(var g=this._children,m=0,w=g.length;m<w;m++){var S=g[m],C=S._matrix;f[S._id]||S._drawSelected(r,C.isIdentity()?u:u.appended(C))}}},new function(){function r(u,f){var g=u._children;if(f&&!g.length)throw new Error("Use a moveTo() command first");return g[g.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(u){this[u]=function(){var f=r(this,!0);f[u].apply(f,arguments)}},{moveTo:function(){var u=r(this),f=u&&u.isEmpty()?u:new Xe(z.NO_INSERT);f!==u&&this.addChild(f),f.moveTo.apply(f,arguments)},moveBy:function(){var u=r(this,!0),f=u&&u.getLastSegment(),g=E.read(arguments);this.moveTo(f?g.add(f._point):g)},closePath:function(u){r(this,!0).closePath(u)}})},a.each(["reverse","flatten","simplify","smooth"],function(r){this[r]=function(u){for(var f=this._children,g,m=0,w=f.length;m<w;m++)g=f[m][r](u)||g;return g}},{}));Be.inject(new function(){var r=Math.min,u=Math.max,f=Math.abs,g={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function m(L){return L._children||[L]}function w(L,U){var A=L.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(U){for(var W=m(A),q=0,Q=W.length;q<Q;q++){var L=W[q];!L._closed&&!L.isEmpty()&&(L.closePath(1e-12),L.getFirstSegment().setHandleIn(0,0),L.getLastSegment().setHandleOut(0,0))}A=A.resolveCrossings().reorient(A.getFillRule()==="nonzero",!0)}return A}function S(L,U,A,W,q){var Q=new Ze(z.NO_INSERT);return Q.addChildren(L,!0),Q=Q.reduce({simplify:U}),q&&q.insert==!1||Q.insertAbove(W&&A.isSibling(W)&&A.getIndex()<W.getIndex()?W:A),Q.copyAttributes(A,!0),Q}function C(L){return L.hasOverlap()||L.isCrossing()}function T(L,U,A,W){if(W&&(W.trace==!1||W.stroke)&&/^(subtract|intersect)$/.test(A))return P(L,U,A);var q=w(L,!0),Q=U&&L!==U&&w(U,!0),X=g[A];X[A]=!0,Q&&(X.subtract||X.exclude)^(Q.isClockwise()^q.isClockwise())&&Q.reverse();var te=I(wt.expand(q.getIntersections(Q,C))),ie=m(q),se=Q&&m(Q),he=[],ne=[],ce;function fe(st){for(var xt=0,vt=st.length;xt<vt;xt++){var ot=st[xt];a.push(he,ot._segments),a.push(ne,ot.getCurves()),ot._overlapsOnly=!0}}function ve(st){for(var xt=[],vt=0,ot=st&&st.length;vt<ot;vt++)xt.push(ne[st[vt]]);return xt}if(te.length){fe(ie),se&&fe(se);for(var ye=new Array(ne.length),Ee=0,Ne=ne.length;Ee<Ne;Ee++)ye[Ee]=ne[Ee].getValues();for(var We=y.findCurveBoundsCollisions(ye,ye,0,!0),$e={},Ee=0;Ee<ne.length;Ee++){var it=ne[Ee],je=it._path._id,De=$e[je]=$e[je]||{};De[it.getIndex()]={hor:ve(We[Ee].hor),ver:ve(We[Ee].ver)}}for(var Ee=0,Ne=te.length;Ee<Ne;Ee++)V(te[Ee]._segment,q,Q,$e,X);for(var Ee=0,Ne=he.length;Ee<Ne;Ee++){var et=he[Ee],at=et._intersection;et._winding||V(et,q,Q,$e,X),at&&at._overlap||(et._path._overlapsOnly=!1)}ce=H(he,X)}else ce=j(se?ie.concat(se):ie.slice(),function(st){return!!X[st]});return S(ce,!0,L,U,W)}function P(L,U,A){var W=w(L),q=w(U),Q=W.getIntersections(q,C),X=A==="subtract",te=A==="divide",ie={},se=[];function he(fe){if(!ie[fe._id]&&(te||q.contains(fe.getPointAt(fe.getLength()/2))^X))return se.unshift(fe),ie[fe._id]=!0}for(var ne=Q.length-1;ne>=0;ne--){var ce=Q[ne].split();ce&&(he(ce)&&ce.getFirstSegment().setHandleIn(0,0),W.getLastSegment().setHandleOut(0,0))}return he(W),S(se,!1,L,U)}function R(L,U){for(var A=L;A;){if(A===U)return;A=A._previous}for(;L._next&&L._next!==U;)L=L._next;if(!L._next){for(;U._previous;)U=U._previous;L._next=U,U._previous=L}}function B(L){for(var U=L.length-1;U>=0;U--)L[U].clearHandles()}function j(L,U,A){var W=L&&L.length;if(W){var q=a.each(L,function(We,$e){this[We._id]={container:null,winding:We.isClockwise()?1:-1,index:$e}},{}),Q=L.slice().sort(function(We,$e){return f($e.getArea())-f(We.getArea())}),X=Q[0],te=y.findItemBoundsCollisions(Q,null,O.GEOMETRIC_EPSILON);A==null&&(A=X.isClockwise());for(var ie=0;ie<W;ie++){var se=Q[ie],he=q[se._id],ne=0,ce=te[ie];if(ce){for(var fe=null,ve=ce.length-1;ve>=0;ve--)if(ce[ve]<ie){fe=fe||se.getInteriorPoint();var ye=Q[ce[ve]];if(ye.contains(fe)){var Ee=q[ye._id];ne=Ee.winding,he.winding+=ne,he.container=Ee.exclude?Ee.container:ye;break}}}if(U(he.winding)===U(ne))he.exclude=!0,L[he.index]=null;else{var Ne=he.container;se.setClockwise(Ne?!Ne.isClockwise():A)}}}return L}function I(L,U,A){var W=U&&[],q=1e-8,Q=1-q,X=!1,te=A||[],ie=A&&{},se,he,ne;function ce(xt){return xt._path._id+"."+xt._segment1._index}for(var fe=(A&&A.length)-1;fe>=0;fe--){var ve=A[fe];ve._path&&(ie[ce(ve)]=!0)}for(var fe=L.length-1;fe>=0;fe--){var ye=L[fe],Ee=ye._time,Ne=Ee,We=U&&!U(ye),ve=ye._curve,$e;if(ve&&(ve!==he?(X=!ve.hasHandles()||ie&&ie[ce(ve)],se=[],ne=null,he=ve):ne>=q&&(Ee/=ne)),We){se&&se.push(ye);continue}else U&&W.unshift(ye);if(ne=Ne,Ee<q)$e=ve._segment1;else if(Ee>Q)$e=ve._segment2;else{var it=ve.divideAtTime(Ee,!0);X&&te.push(ve,it),$e=it._segment1;for(var je=se.length-1;je>=0;je--){var De=se[je];De._time=(De._time-Ee)/(1-Ee)}}ye._setSegment($e);var et=$e._intersection,at=ye._intersection;if(et){R(et,at);for(var st=et;st;)R(st._intersection,et),st=st._next}else $e._intersection=at}return A||B(te),W||L}function G(L,U,A,W,q){var Q=Array.isArray(U)?U:U[A?"hor":"ver"],X=A?1:0,te=X^1,ie=[L.x,L.y],se=ie[X],he=ie[te],ne=1e-9,ce=1e-6,fe=se-ne,ve=se+ne,ye=0,Ee=0,Ne=0,We=0,$e=!1,it=!1,je=1,De=[],et,at;function st(qe){var Ht=qe[te+0],an=qe[te+6];if(!(he<r(Ht,an)||he>u(Ht,an))){var qt=qe[X+0],er=qe[X+2],Nr=qe[X+4],hr=qe[X+6];if(Ht===an){(qt<ve&&hr>fe||hr<ve&&qt>fe)&&($e=!0);return}var Wn=he===Ht?0:he===an||fe>u(qt,er,Nr,hr)||ve<r(qt,er,Nr,hr)?1:Le.solveCubic(qe,te,he,De,0,1)>0?De[0]:1,Cn=Wn===0?qt:Wn===1?hr:Le.getPoint(qe,Wn)[A?"y":"x"],On=Ht>an?1:-1,tr=et[te]>et[te+6]?1:-1,vn=et[X+6];return he!==Ht?(Cn<fe?Ne+=On:Cn>ve?We+=On:$e=!0,Cn>se-ce&&Cn<se+ce&&(je/=2)):(On!==tr?qt<fe?Ne+=On:qt>ve&&(We+=On):qt!=vn&&(vn<ve&&Cn>ve?(We+=On,$e=!0):vn>fe&&Cn<fe&&(Ne+=On,$e=!0)),je/=4),et=qe,!q&&Cn>fe&&Cn<ve&&Le.getTangent(qe,Wn)[A?"x":"y"]===0&&G(L,U,!A,W,!0)}}function xt(qe){var Ht=qe[te+0],an=qe[te+2],qt=qe[te+4],er=qe[te+6];if(he<=u(Ht,an,qt,er)&&he>=r(Ht,an,qt,er)){for(var Nr=qe[X+0],hr=qe[X+2],Wn=qe[X+4],Cn=qe[X+6],On=fe>u(Nr,hr,Wn,Cn)||ve<r(Nr,hr,Wn,Cn)?[qe]:Le.getMonoCurves(qe,A),tr,vn=0,Nn=On.length;vn<Nn;vn++)if(tr=st(On[vn]))return tr}}for(var vt=0,ot=Q.length;vt<ot;vt++){var Lt=Q[vt],bt=Lt._path,pn=Lt.getValues(),sn;if((!vt||Q[vt-1]._path!==bt)&&(et=null,bt._closed||(at=Le.getValues(bt.getLastCurve().getSegment2(),Lt.getSegment1(),null,!W),at[te]!==at[te+6]&&(et=at)),!et)){et=pn;for(var Sn=bt.getLastCurve();Sn&&Sn!==Lt;){var ln=Sn.getValues();if(ln[te]!==ln[te+6]){et=ln;break}Sn=Sn.getPrevious()}}if(sn=xt(pn))return sn;if(vt+1===ot||Q[vt+1]._path!==bt){if(at&&(sn=xt(at)))return sn;$e&&!Ne&&!We&&(Ne=We=bt.isClockwise(W)^A?1:-1),ye+=Ne,Ee+=We,Ne=We=0,$e&&(it=!0,$e=!1),at=null}}return ye=f(ye),Ee=f(Ee),{winding:u(ye,Ee),windingL:ye,windingR:Ee,quality:je,onPath:it}}function V(L,U,A,W,q){var Q=[],X=L,te=0,ne;do{var ie=L.getCurve();if(ie){var se=ie.getLength();Q.push({segment:L,curve:ie,length:se}),te+=se}L=L.getNext()}while(L&&!L._intersection&&L!==X);for(var he=[.5,.25,.75],ne={winding:0,quality:-1},ce=.001,fe=1-ce,ve=0;ve<he.length&&ne.quality<.5;ve++)for(var se=te*he[ve],ye=0,Ee=Q.length;ye<Ee;ye++){var Ne=Q[ye],We=Ne.length;if(se<=We){var ie=Ne.curve,$e=ie._path,it=$e._parent,je=it instanceof Ze?it:$e,De=O.clamp(ie.getTimeAt(se),ce,fe),et=ie.getPointAtTime(De),at=f(ie.getTangentAtTime(De).y)<Math.SQRT1_2,st=null;if(q.subtract&&A){var xt=je===U?A:U,vt=xt._getWinding(et,at,!0);if(je===U&&vt.winding||je===A&&!vt.winding){if(vt.quality<1)continue;st={winding:0,quality:1}}}st=st||G(et,W[$e._id][ie.getIndex()],at,!0),st.quality>ne.quality&&(ne=st);break}se-=We}for(var ye=Q.length-1;ye>=0;ye--)Q[ye].segment._winding=ne}function H(L,U){var A=[],W;function q(ot){var Lt;return!!(ot&&!ot._visited&&(!U||U[(Lt=ot._winding||{}).winding]&&!(U.unite&&Lt.winding===2&&Lt.windingL&&Lt.windingR)))}function Q(ot){if(ot){for(var Lt=0,bt=W.length;Lt<bt;Lt++)if(ot===W[Lt])return!0}return!1}function X(ot){for(var Lt=ot._segments,bt=0,pn=Lt.length;bt<pn;bt++)Lt[bt]._visited=!0}function te(ot,Lt){var bt=ot._intersection,pn=bt,sn=[];Lt&&(W=[ot]);function Sn(ln,qe){for(;ln&&ln!==qe;){var Ht=ln._segment,an=Ht&&Ht._path;if(an){var qt=Ht.getNext()||an.getFirstSegment(),er=qt._intersection;Ht!==ot&&(Q(Ht)||Q(qt)||qt&&q(Ht)&&(q(qt)||er&&q(er._segment)))&&sn.push(Ht),Lt&&W.push(Ht)}ln=ln._next}}if(bt){for(Sn(bt);bt&&bt._previous;)bt=bt._previous;Sn(bt,pn)}return sn}L.sort(function(ot,Lt){var bt=ot._intersection,pn=Lt._intersection,sn=!!(bt&&bt._overlap),Sn=!!(pn&&pn._overlap),ln=ot._path,qe=Lt._path;return sn^Sn?sn?1:-1:!bt^!pn?bt?1:-1:ln!==qe?ln._id-qe._id:ot._index-Lt._index});for(var ie=0,se=L.length;ie<se;ie++){var he=L[ie],ne=q(he),ce=null,fe=!1,ve=!0,ye=[],Ee,Ne,We;if(ne&&he._path._overlapsOnly){var $e=he._path,it=he._intersection._segment._path;$e.compare(it)&&($e.getArea()&&A.push($e.clone(!1)),X($e),X(it),ne=!1)}for(;ne;){var je=!ce,De=te(he,je),et=De.shift(),fe=!je&&(Q(he)||Q(et)),at=!fe&&et;if(je&&(ce=new Xe(z.NO_INSERT),Ee=null),fe){(he.isFirst()||he.isLast())&&(ve=he._path._closed),he._visited=!0;break}if(at&&Ee&&(ye.push(Ee),Ee=null),Ee||(at&&De.push(he),Ee={start:ce._segments.length,crossings:De,visited:Ne=[],handleIn:We}),at&&(he=et),!q(he)){ce.removeSegments(Ee.start);for(var st=0,xt=Ne.length;st<xt;st++)Ne[st]._visited=!1;Ne.length=0;do he=Ee&&Ee.crossings.shift(),(!he||!he._path)&&(he=null,Ee=ye.pop(),Ee&&(Ne=Ee.visited,We=Ee.handleIn));while(Ee&&!q(he));if(!he)break}var vt=he.getNext();ce.add(new ze(he._point,We,vt&&he._handleOut)),he._visited=!0,Ne.push(he),he=vt||he._path.getFirstSegment(),We=vt&&vt._handleIn}fe&&(ve&&(ce.getFirstSegment().setHandleIn(We),ce.setClosed(ve)),ce.getArea()!==0&&A.push(ce))}return A}return{_getWinding:function(L,U,A){return G(L,this.getCurves(),U,A)},unite:function(L,U){return T(this,L,"unite",U)},intersect:function(L,U){return T(this,L,"intersect",U)},subtract:function(L,U){return T(this,L,"subtract",U)},exclude:function(L,U){return T(this,L,"exclude",U)},divide:function(L,U){return U&&(U.trace==!1||U.stroke)?P(this,L,"divide"):S([this.subtract(L,U),this.intersect(L,U)],!0,this,L,U)},resolveCrossings:function(){var L=this._children,U=L||[this];function A(Ee,Ne){var We=Ee&&Ee._intersection;return We&&We._overlap&&We._path===Ne}var W=!1,q=!1,Q=this.getIntersections(null,function(Ee){return Ee.hasOverlap()&&(W=!0)||Ee.isCrossing()&&(q=!0)}),X=W&&q&&[];if(Q=wt.expand(Q),W)for(var te=I(Q,function(Ee){return Ee.hasOverlap()},X),ie=te.length-1;ie>=0;ie--){var se=te[ie],he=se._path,ne=se._segment,ce=ne.getPrevious(),fe=ne.getNext();A(ce,he)&&A(fe,he)&&(ne.remove(),ce._handleOut._set(0,0),fe._handleIn._set(0,0),ce!==ne&&!ce.getCurve().hasLength()&&(fe._handleIn.set(ce._handleIn),ce.remove()))}q&&(I(Q,W&&function(Ee){var Ne=Ee.getCurve(),We=Ee.getSegment(),$e=Ee._intersection,it=$e._curve,je=$e._segment;if(Ne&&it&&Ne._path&&it._path)return!0;We&&(We._intersection=null),je&&(je._intersection=null)},X),X&&B(X),U=H(a.each(U,function(Ee){a.push(this,Ee._segments)},[])));var ve=U.length,ye;return ve>1&&L?(U!==L&&this.setChildren(U),ye=this):ve===1&&!L&&(U[0]!==this&&this.setSegments(U[0].removeSegments()),ye=this),ye||(ye=new Ze(z.NO_INSERT),ye.addChildren(U),ye=ye.reduce(),ye.copyAttributes(this),this.replaceWith(ye)),ye},reorient:function(L,U){var A=this._children;return A&&A.length?this.setChildren(j(this.removeChildren(),function(W){return!!(L?W:W&1)},U)):U!==t&&this.setClockwise(U),this},getInteriorPoint:function(){var L=this.getBounds(),U=L.getCenter(!0);if(!this.contains(U)){for(var A=this.getCurves(),W=U.y,q=[],Q=[],X=0,te=A.length;X<te;X++){var ie=A[X].getValues(),se=ie[1],he=ie[3],ne=ie[5],ce=ie[7];if(W>=r(se,he,ne,ce)&&W<=u(se,he,ne,ce))for(var fe=Le.getMonoCurves(ie),ve=0,ye=fe.length;ve<ye;ve++){var Ee=fe[ve],Ne=Ee[1],We=Ee[7];if(Ne!==We&&(W>=Ne&&W<=We||W>=We&&W<=Ne)){var $e=W===Ne?Ee[0]:W===We?Ee[6]:Le.solveCubic(Ee,1,W,Q,0,1)===1?Le.getPoint(Ee,Q[0]).x:(Ee[0]+Ee[6])/2;q.push($e)}}}q.length>1&&(q.sort(function(it,je){return it-je}),U.x=(q[0]+q[1])/2)}return U}}});var we=a.extend({_class:"PathFlattener",initialize:function(r,u,f,g,m){var w=[],S=[],C=0,T=1/(f||32),P=r._segments,R=P[0],B;function j(H,L){var U=Le.getValues(H,L,m);w.push(U),I(U,H._index,0,1)}function I(H,L,U,A){if(A-U>T&&!(g&&Le.isStraight(H))&&!Le.isFlatEnough(H,u||.25)){var W=Le.subdivide(H,.5),q=(U+A)/2;I(W[0],L,U,q),I(W[1],L,q,A)}else{var Q=H[6]-H[0],X=H[7]-H[1],te=Math.sqrt(Q*Q+X*X);te>0&&(C+=te,S.push({offset:C,curve:H,index:L,time:A}))}}for(var G=1,V=P.length;G<V;G++)B=P[G],j(R,B),R=B;r._closed&&j(B||R,P[0]),this.curves=w,this.parts=S,this.length=C,this.index=0},_get:function(r){for(var u=this.parts,f=u.length,g,m=this.index;g=m,!(!m||u[--m].offset<r););for(;g<f;g++){var w=u[g];if(w.offset>=r){this.index=g;var S=u[g-1],C=S&&S.index===w.index?S.time:0,T=S?S.offset:0;return{index:w.index,time:C+(w.time-C)*(r-T)/(w.offset-T)}}}return{index:u[f-1].index,time:1}},drawPart:function(r,u,f){for(var g=this._get(u),m=this._get(f),w=g.index,S=m.index;w<=S;w++){var C=Le.getPart(this.curves[w],w===g.index?g.time:0,w===m.index?m.time:1);w===g.index&&r.moveTo(C[0],C[1]),r.bezierCurveTo.apply(r,C.slice(2))}}},a.each(Le._evaluateMethods,function(r){this[r+"At"]=function(u){var f=this._get(u);return Le[r](this.curves[f.index],f.time)}},{})),Fe=a.extend({initialize:function(r){for(var u=this.points=[],f=r._segments,g=r._closed,m=0,w,S=f.length;m<S;m++){var C=f[m].point;(!w||!w.equals(C))&&u.push(w=C.clone())}g&&(u.unshift(u[u.length-1]),u.push(u[1])),this.closed=g},fit:function(r){var u=this.points,f=u.length,g=null;return f>0&&(g=[new ze(u[0])],f>1&&(this.fitCubic(g,r,0,f-1,u[1].subtract(u[0]),u[f-2].subtract(u[f-1])),this.closed&&(g.shift(),g.pop()))),g},fitCubic:function(r,u,f,g,m,w){var S=this.points;if(g-f===1){var C=S[f],T=S[g],P=C.getDistance(T)/3;this.addCurve(r,[C,C.add(m.normalize(P)),T.add(w.normalize(P)),T]);return}for(var R=this.chordLengthParameterize(f,g),B=Math.max(u,u*u),j,I=!0,G=0;G<=4;G++){var V=this.generateBezier(f,g,R,m,w),H=this.findMaxError(f,g,V,R);if(H.error<u&&I){this.addCurve(r,V);return}if(j=H.index,H.error>=B)break;I=this.reparameterize(f,g,R,V),B=H.error}var L=S[j-1].subtract(S[j+1]);this.fitCubic(r,u,f,j,m,L),this.fitCubic(r,u,j,g,L.negate(),w)},addCurve:function(r,u){var f=r[r.length-1];f.setHandleOut(u[1].subtract(u[0])),r.push(new ze(u[3],u[2].subtract(u[3])))},generateBezier:function(r,u,f,g,m){for(var w=1e-12,S=Math.abs,C=this.points,T=C[r],P=C[u],R=[[0,0],[0,0]],B=[0,0],j=0,I=u-r+1;j<I;j++){var G=f[j],V=1-G,H=3*G*V,L=V*V*V,U=H*V,A=H*G,W=G*G*G,q=g.normalize(U),Q=m.normalize(A),X=C[r+j].subtract(T.multiply(L+U)).subtract(P.multiply(A+W));R[0][0]+=q.dot(q),R[0][1]+=q.dot(Q),R[1][0]=R[0][1],R[1][1]+=Q.dot(Q),B[0]+=q.dot(X),B[1]+=Q.dot(X)}var te=R[0][0]*R[1][1]-R[1][0]*R[0][1],ie,se;if(S(te)>w){var he=R[0][0]*B[1]-R[1][0]*B[0],ne=B[0]*R[1][1]-B[1]*R[0][1];ie=ne/te,se=he/te}else{var ce=R[0][0]+R[0][1],fe=R[1][0]+R[1][1];ie=se=S(ce)>w?B[0]/ce:S(fe)>w?B[1]/fe:0}var ve=P.getDistance(T),ye=w*ve,Ee,Ne;if(ie<ye||se<ye)ie=se=ve/3;else{var We=P.subtract(T);Ee=g.normalize(ie),Ne=m.normalize(se),Ee.dot(We)-Ne.dot(We)>ve*ve&&(ie=se=ve/3,Ee=Ne=null)}return[T,T.add(Ee||g.normalize(ie)),P.add(Ne||m.normalize(se)),P]},reparameterize:function(r,u,f,g){for(var m=r;m<=u;m++)f[m-r]=this.findRoot(g,this.points[m],f[m-r]);for(var m=1,w=f.length;m<w;m++)if(f[m]<=f[m-1])return!1;return!0},findRoot:function(r,u,f){for(var g=[],m=[],w=0;w<=2;w++)g[w]=r[w+1].subtract(r[w]).multiply(3);for(var w=0;w<=1;w++)m[w]=g[w+1].subtract(g[w]).multiply(2);var S=this.evaluate(3,r,f),C=this.evaluate(2,g,f),T=this.evaluate(1,m,f),P=S.subtract(u),R=C.dot(C)+P.dot(T);return O.isMachineZero(R)?f:f-P.dot(C)/R},evaluate:function(r,u,f){for(var g=u.slice(),m=1;m<=r;m++)for(var w=0;w<=r-m;w++)g[w]=g[w].multiply(1-f).add(g[w+1].multiply(f));return g[0]},chordLengthParameterize:function(r,u){for(var f=[0],g=r+1;g<=u;g++)f[g-r]=f[g-r-1]+this.points[g].getDistance(this.points[g-1]);for(var g=1,m=u-r;g<=m;g++)f[g]/=f[m];return f},findMaxError:function(r,u,f,g){for(var m=Math.floor((u-r+1)/2),w=0,S=r+1;S<u;S++){var C=this.evaluate(3,f,g[S-r]),T=C.subtract(this.points[S]),P=T.x*T.x+T.y*T.y;P>=w&&(w=P,m=S)}return{error:w,index:m}}}),_t=z.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(u){this._content="",this._lines=[];var f=u&&a.isPlainObject(u)&&u.x===t&&u.y===t;this._initialize(f&&u,!f&&E.read(arguments))},_equals:function(r){return this._content===r._content},copyContent:function(r){this.setContent(r._content)},getContent:function(){return this._content},setContent:function(r){this._content=""+r,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Ct=_t.extend({_class:"PointText",initialize:function(){_t.apply(this,arguments)},getPoint:function(){var r=this._matrix.getTranslation();return new Z(r.x,r.y,this,"setPoint")},setPoint:function(){var r=E.read(arguments);this.translate(r.subtract(this._matrix.getTranslation()))},_draw:function(r,u,f){if(this._content){this._setStyles(r,u,f);var g=this._lines,m=this._style,w=m.hasFill(),S=m.hasStroke(),C=m.getLeading(),T=r.shadowColor;r.font=m.getFontStyle(),r.textAlign=m.getJustification();for(var P=0,R=g.length;P<R;P++){r.shadowColor=T;var B=g[P];w&&(r.fillText(B,0,0),r.shadowColor="rgba(0,0,0,0)"),S&&r.strokeText(B,0,0),r.translate(0,C)}}},_getBounds:function(r,u){var f=this._style,g=this._lines,m=g.length,w=f.getJustification(),S=f.getLeading(),C=this.getView().getTextWidth(f.getFontStyle(),g),T=0;w!=="left"&&(T-=C/(w==="center"?2:1));var P=new ee(T,m?-.75*S:0,C,m*S);return r?r._transformBounds(P,P):P}}),pt=a.extend(new function(){var r={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},u={},f={transparent:[0,0,0,0]},g;function m(C){var T=C.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||C.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),P="rgb",R;if(T){var B=T[4]?4:3;R=new Array(B);for(var j=0;j<B;j++){var I=T[j+1];R[j]=parseInt(I.length==1?I+I:I,16)/255}}else if(T=C.match(/^(rgb|hsl)a?\((.*)\)$/)){P=T[1],R=T[2].trim().split(/[,\s]+/g);for(var G=P==="hsl",j=0,V=Math.min(R.length,4);j<V;j++){var H=R[j],I=parseFloat(H);if(G)if(j===0){var L=H.match(/([a-z]*)$/)[1];I*={turn:360,rad:180/Math.PI,grad:.9}[L]||1}else j<3&&(I/=100);else j<3&&(I/=/%$/.test(H)?100:255);R[j]=I}}else{var U=f[C];if(!U)if(n){g||(g=tn.getContext(1,1,{willReadFrequently:!0}),g.globalCompositeOperation="copy"),g.fillStyle="rgba(0,0,0,0)",g.fillStyle=C,g.fillRect(0,0,1,1);var A=g.getImageData(0,0,1,1).data;U=f[C]=[A[0]/255,A[1]/255,A[2]/255]}else U=[0,0,0];R=U.slice()}return[P,R]}var w=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],S={"rgb-hsb":function(C,T,P){var R=Math.max(C,T,P),B=Math.min(C,T,P),j=R-B,I=j===0?0:(R==C?(T-P)/j+(T<P?6:0):R==T?(P-C)/j+2:(C-T)/j+4)*60;return[I,R===0?0:j/R,R]},"hsb-rgb":function(C,T,P){C=(C/60%6+6)%6;var B=Math.floor(C),R=C-B,B=w[B],j=[P,P*(1-T),P*(1-T*R),P*(1-T*(1-R))];return[j[B[0]],j[B[1]],j[B[2]]]},"rgb-hsl":function(C,T,P){var R=Math.max(C,T,P),B=Math.min(C,T,P),j=R-B,I=j===0,G=I?0:(R==C?(T-P)/j+(T<P?6:0):R==T?(P-C)/j+2:(C-T)/j+4)*60,V=(R+B)/2,H=I?0:V<.5?j/(R+B):j/(2-R-B);return[G,H,V]},"hsl-rgb":function(C,T,P){if(C=(C/360%1+1)%1,T===0)return[P,P,P];for(var R=[C+1/3,C,C-1/3],B=P<.5?P*(1+T):P+T-P*T,j=2*P-B,I=[],G=0;G<3;G++){var V=R[G];V<0&&(V+=1),V>1&&(V-=1),I[G]=6*V<1?j+(B-j)*6*V:2*V<1?B:3*V<2?j+(B-j)*(2/3-V)*6:j}return I},"rgb-gray":function(C,T,P){return[C*.2989+T*.587+P*.114]},"gray-rgb":function(C){return[C,C,C]},"gray-hsb":function(C){return[0,0,C]},"gray-hsl":function(C){return[0,0,C]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(r,function(C,T){u[T]=[],a.each(C,function(P,R){var B=a.capitalize(P),j=/^(hue|saturation)$/.test(P),I=u[T][R]=T==="gradient"?P==="gradient"?function(G){var V=this._components[0];return G=Mt.read(Array.isArray(G)?G:arguments,0,{readNull:!0}),V!==G&&(V&&V._removeOwner(this),G&&G._addOwner(this)),G}:function(){return E.read(arguments,0,{readNull:P==="highlight",clone:!0})}:function(G){return G==null||isNaN(G)?0:+G};this["get"+B]=function(){return this._type===T||j&&/^hs[bl]$/.test(this._type)?this._components[R]:this._convert(T)[R]},this["set"+B]=function(G){this._type!==T&&!(j&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(T),this._properties=r[T],this._type=T),this._components[R]=I.call(this,G),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function C(T){var P=arguments,R=this.__read,B=0,j,I,G,V;Array.isArray(T)&&(P=T,T=P[0]);var H=T!=null&&typeof T;if(H==="string"&&T in r&&(j=T,T=P[1],Array.isArray(T)?(I=T,G=P[2]):(R&&(B=1),P=a.slice(P,1),H=typeof T)),!I){if(V=H==="number"?P:H==="object"&&T.length!=null?T:null,V){j||(j=V.length>=3?"rgb":"gray");var L=r[j].length;G=V[L],R&&(B+=V===arguments?L+(G!=null?1:0):1),V.length>L&&(V=a.slice(V,0,L))}else if(H==="string"){var U=m(T);j=U[0],I=U[1],I.length===4&&(G=I[3],I.length--)}else if(H==="object")if(T.constructor===C){if(j=T._type,I=T._components.slice(),G=T._alpha,j==="gradient")for(var A=1,W=I.length;A<W;A++){var q=I[A];q&&(I[A]=q.clone())}}else if(T.constructor===Mt)j="gradient",V=P;else{j="hue"in T?"lightness"in T?"hsl":"hsb":"gradient"in T||"stops"in T||"radial"in T?"gradient":"gray"in T?"gray":"rgb";var Q=r[j],X=u[j];this._components=I=[];for(var A=0,W=Q.length;A<W;A++){var te=T[Q[A]];te==null&&!A&&j==="gradient"&&"stops"in T&&(te={stops:T.stops,radial:T.radial}),te=X[A].call(this,te),te!=null&&(I[A]=te)}G=T.alpha}R&&j&&(B=1)}if(this._type=j||"rgb",!I){this._components=I=[];for(var X=u[this._type],A=0,W=X.length;A<W;A++){var te=X[A].call(this,V&&V[A]);te!=null&&(I[A]=te)}}return this._components=I,this._properties=r[this._type],this._alpha=G,R&&(this.__read=B),this},set:"#initialize",_serialize:function(C,T){var P=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?P:[this._type].concat(P),C,!0,T)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(C){var T;return this._type===C?this._components.slice():(T=S[this._type+"-"+C])?T.apply(this,this._components):S["rgb-"+C].apply(this,S[this._type+"-rgb"].apply(this,this._components))},convert:function(C){return new pt(C,this._convert(C),this._alpha)},getType:function(){return this._type},setType:function(C){this._components=this._convert(C),this._properties=r[C],this._type=C},getComponents:function(){var C=this._components.slice();return this._alpha!=null&&C.push(this._alpha),C},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(C){this._alpha=C==null?null:Math.min(Math.max(C,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(C){var T=a.isPlainValue(C,!0)?pt.read(arguments):C;return T===this||T&&this._class===T._class&&this._type===T._type&&this.getAlpha()===T.getAlpha()&&a.equals(this._components,T._components)||!1},toString:function(){for(var C=this._properties,T=[],P=this._type==="gradient",R=b.instance,B=0,j=C.length;B<j;B++){var I=this._components[B];I!=null&&T.push(C[B]+": "+(P?I:R.number(I)))}return this._alpha!=null&&T.push("alpha: "+R.number(this._alpha)),"{ "+T.join(", ")+" }"},toCSS:function(C){var T=this._convert("rgb"),P=C||this._alpha==null?1:this._alpha;function R(B){return Math.round((B<0?0:B>1?1:B)*255)}return T=[R(T[0]),R(T[1]),R(T[2])],P<1&&T.push(P<0?0:P),C?"#"+((1<<24)+(T[0]<<16)+(T[1]<<8)+T[2]).toString(16).slice(1):(T.length==4?"rgba(":"rgb(")+T.join(",")+")"},toCanvasStyle:function(C,T){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var P=this._components,R=P[0],B=R._stops,j=P[1],I=P[2],G=P[3],V=T&&T.inverted(),H;if(V&&(j=V._transformPoint(j),I=V._transformPoint(I),G&&(G=V._transformPoint(G))),R._radial){var L=I.getDistance(j);if(G){var U=G.subtract(j);U.getLength()>L&&(G=j.add(U.normalize(L-.1)))}var A=G||j;H=C.createRadialGradient(A.x,A.y,0,j.x,j.y,L)}else H=C.createLinearGradient(j.x,j.y,I.x,I.y);for(var W=0,q=B.length;W<q;W++){var Q=B[W],X=Q._offset;H.addColorStop(X??W/(q-1),Q._color.toCanvasStyle())}return this._canvasStyle=H},transform:function(C){if(this._type==="gradient"){for(var T=this._components,P=1,R=T.length;P<R;P++){var B=T[P];C._transformPoint(B,B,!0)}this._changed()}},statics:{_types:r,random:function(){var C=Math.random;return new pt(C(),C(),C())},_setOwner:function(C,T,P){return C&&(C._owner&&T&&C._owner!==T&&(C=C.clone()),!C._owner^!T&&(C._owner=T||null,C._setter=P||null)),C}}})},new function(){var r={add:function(u,f){return u+f},subtract:function(u,f){return u-f},multiply:function(u,f){return u*f},divide:function(u,f){return u/f}};return a.each(r,function(u,f){this[f]=function(g){g=pt.read(arguments);for(var m=this._type,w=this._components,S=g._convert(m),C=0,T=w.length;C<T;C++)S[C]=u(w[C],S[C]);return new pt(m,S,this._alpha!=null?u(this._alpha,g.getAlpha()):null)}},{})}),Mt=a.extend({_class:"Gradient",initialize:function(u,f){this._id=F.get(),u&&a.isPlainObject(u)&&(this.set(u),u=f=null),this._stops==null&&this.setStops(u||["white","black"]),this._radial==null&&this.setRadial(typeof f=="string"&&f==="radial"||f||!1)},_serialize:function(r,u){return u.add(this,function(){return a.serialize([this._stops,this._radial],r,!0,u)})},_changed:function(){for(var r=0,u=this._owners&&this._owners.length;r<u;r++)this._owners[r]._changed()},_addOwner:function(r){this._owners||(this._owners=[]),this._owners.push(r)},_removeOwner:function(r){var u=this._owners?this._owners.indexOf(r):-1;u!=-1&&(this._owners.splice(u,1),this._owners.length||(this._owners=t))},clone:function(){for(var r=[],u=0,f=this._stops.length;u<f;u++)r[u]=this._stops[u].clone();return new Mt(r,this._radial)},getStops:function(){return this._stops},setStops:function(r){if(r.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var u=this._stops;if(u)for(var f=0,g=u.length;f<g;f++)u[f]._owner=t;u=this._stops=zt.readList(r,0,{clone:!0});for(var f=0,g=u.length;f<g;f++)u[f]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(r){this._radial=r,this._changed()},equals:function(r){if(r===this)return!0;if(r&&this._class===r._class){var u=this._stops,f=r._stops,g=u.length;if(g===f.length){for(var m=0;m<g;m++)if(!u[m].equals(f[m]))return!1;return!0}}return!1}}),zt=a.extend({_class:"GradientStop",initialize:function(u,f){var g=u,m=f;typeof u=="object"&&f===t&&(Array.isArray(u)&&typeof u[0]!="number"?(g=u[0],m=u[1]):("color"in u||"offset"in u||"rampPoint"in u)&&(g=u.color,m=u.offset||u.rampPoint||0)),this.setColor(g),this.setOffset(m)},clone:function(){return new zt(this._color.clone(),this._offset)},_serialize:function(r,u){var f=this._color,g=this._offset;return a.serialize(g==null?[f]:[f,g],r,!0,u)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(r){this._offset=r,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){pt._setOwner(this._color,null),this._color=pt._setOwner(pt.read(arguments,0),this,"setColor"),this._changed()},equals:function(r){return r===this||r&&this._class===r._class&&this._color.equals(r._color)&&this._offset==r._offset||!1}}),Ut=a.extend(new function(){var r={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new E,selectedColor:null},u=a.set({},r,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),f=a.set({},u,{fillColor:new pt}),g={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},m={beans:!0},w={_class:"Style",beans:!0,initialize:function(C,T,P){this._values={},this._owner=T,this._project=T&&T._project||P||Ft.project,this._defaults=!T||T instanceof Ve?u:T instanceof _t?f:r,C&&this.set(C)}};return a.each(u,function(S,C){var T=/Color$/.test(C),P=C==="shadowOffset",R=a.capitalize(C),B=g[C],j="set"+R,I="get"+R;w[j]=function(G){var V=this._owner,H=V&&V._children,L=H&&H.length>0&&!(V instanceof Ze);if(L)for(var U=0,A=H.length;U<A;U++)H[U]._style[j](G);if((C==="selectedColor"||!L)&&C in this._defaults){var W=this._values[C];W!==G&&(T&&(W&&(pt._setOwner(W,null),W._canvasStyle=null),G&&G.constructor===pt&&(G=pt._setOwner(G,V,L&&j))),this._values[C]=G,V&&V._changed(B||129))}},w[I]=function(G){var V=this._owner,H=V&&V._children,L=H&&H.length>0&&!(V instanceof Ze),U;if(L&&!G)for(var A=0,W=H.length;A<W;A++){var q=H[A]._style[I]();if(!A)U=q;else if(!a.equals(U,q))return t}else if(C in this._defaults){var U=this._values[C];if(U===t)U=this._defaults[C],U&&U.clone&&(U=U.clone());else{var Q=T?pt:P?E:null;Q&&!(U&&U.constructor===Q)&&(this._values[C]=U=Q.read([U],0,{readNull:!0,clone:!0}))}}return U&&T&&(U=pt._setOwner(U,V,L&&j)),U},m[I]=function(G){return this._style[I](G)},m[j]=function(G){this._style[j](G)}}),a.each({Font:"FontFamily",WindingRule:"FillRule"},function(S,C){var T="get"+C,P="set"+C;w[T]=m[T]="#get"+S,w[P]=m[P]="#set"+S}),z.inject(m),w},{set:function(r){var u=r instanceof Ut,f=u?r._values:r;if(f){for(var g in f)if(g in this._defaults){var m=f[g];this[g]=m&&u&&m.clone?m.clone():m}}},equals:function(r){function u(f,g,m){var w=f._values,S=g._values,C=g._defaults;for(var T in w){var P=w[T],R=S[T];if(!(m&&T in S)&&!a.equals(P,R===t?C[T]:R))return!1}return!0}return r===this||r&&this._class===r._class&&u(this,r)&&u(r,this,!0)||!1},_dispose:function(){var r;r=this.getFillColor(),r&&(r._canvasStyle=null),r=this.getStrokeColor(),r&&(r._canvasStyle=null),r=this.getShadowColor(),r&&(r._canvasStyle=null)},hasFill:function(){var r=this.getFillColor();return!!r&&r.alpha>0},hasStroke:function(){var r=this.getStrokeColor();return!!r&&r.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var r=this.getShadowColor();return!!r&&r.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var r=this.getFontSize();return this.getFontWeight()+" "+r+(/[a-z]/i.test(r+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function r(){var u=r.base.call(this),f=this.getFontSize();return/pt|em|%|px/.test(f)&&(f=this.getView().getPixelSize(f)),u??f*1.2}}),yt=new function(){function r(u,f,g,m){for(var w=["","webkit","moz","Moz","ms","o"],S=f[0].toUpperCase()+f.substring(1),C=0;C<6;C++){var T=w[C],P=T?T+S:f;if(P in u){if(g)u[P]=m;else return u[P];break}}}return{getStyles:function(u){var f=u&&u.nodeType!==9?u.ownerDocument:u,g=f&&f.defaultView;return g&&g.getComputedStyle(u,"")},getBounds:function(u,f){var g=u.ownerDocument,m=g.body,w=g.documentElement,S;try{S=u.getBoundingClientRect()}catch{S={left:0,top:0,width:0,height:0}}var C=S.left-(w.clientLeft||m.clientLeft||0),T=S.top-(w.clientTop||m.clientTop||0);if(!f){var P=g.defaultView;C+=P.pageXOffset||w.scrollLeft||m.scrollLeft,T+=P.pageYOffset||w.scrollTop||m.scrollTop}return new ee(C,T,S.width,S.height)},getViewportBounds:function(u){var f=u.ownerDocument,g=f.defaultView,m=f.documentElement;return new ee(0,0,g.innerWidth||m.clientWidth,g.innerHeight||m.clientHeight)},getOffset:function(u,f){return yt.getBounds(u,f).getPoint()},getSize:function(u){return yt.getBounds(u,!0).getSize()},isInvisible:function(u){return yt.getSize(u).equals(new N(0,0))},isInView:function(u){return!yt.isInvisible(u)&&yt.getViewportBounds(u).intersects(yt.getBounds(u,!0))},isInserted:function(u){return s.body.contains(u)},getPrefixed:function(u,f){return u&&r(u,f)},setPrefixed:function(u,f,g){if(typeof f=="object")for(var m in f)r(u,m,!0,f[m]);else r(u,f,!0,g)}}},At={add:function(r,u){if(r)for(var f in u)for(var g=u[f],m=f.split(/[\s,]+/g),w=0,S=m.length;w<S;w++){var C=m[w],T=r===s&&(C==="touchstart"||C==="touchmove")?{passive:!1}:!1;r.addEventListener(C,g,T)}},remove:function(r,u){if(r)for(var f in u)for(var g=u[f],m=f.split(/[\s,]+/g),w=0,S=m.length;w<S;w++)r.removeEventListener(m[w],g,!1)},getPoint:function(r){var u=r.targetTouches?r.targetTouches.length?r.targetTouches[0]:r.changedTouches[0]:r;return new E(u.pageX||u.clientX+s.documentElement.scrollLeft,u.pageY||u.clientY+s.documentElement.scrollTop)},getTarget:function(r){return r.target||r.srcElement},getRelatedTarget:function(r){return r.relatedTarget||r.toElement},getOffset:function(r,u){return At.getPoint(r).subtract(yt.getOffset(u||At.getTarget(r)))}};At.requestAnimationFrame=new function(){var r=yt.getPrefixed(n,"requestAnimationFrame"),u=!1,f=[],g;function m(){var w=f;f=[];for(var S=0,C=w.length;S<C;S++)w[S]();u=r&&f.length,u&&r(m)}return function(w){f.push(w),r?u||(r(m),u=!0):g||(g=setInterval(m,1e3/60))}};var en=a.extend(h,{_class:"View",initialize:function r(u,f){function g(B){return f[B]||parseInt(f.getAttribute(B),10)}function m(){var B=yt.getSize(f);return B.isNaN()||B.isZero()?new N(g("width"),g("height")):B}var w;if(n&&f){this._id=f.getAttribute("id"),this._id==null&&f.setAttribute("id",this._id="paper-view-"+r._id++),At.add(f,this._viewEvents);var S="none";if(yt.setPrefixed(f.style,{userDrag:S,userSelect:S,touchCallout:S,contentZooming:S,tapHighlightColor:"rgba(0,0,0,0)"}),p.hasAttribute(f,"resize")){var C=this;At.add(n,this._windowEvents={resize:function(){C.setViewSize(m())}})}if(w=m(),p.hasAttribute(f,"stats")&&typeof Stats<"u"){this._stats=new Stats;var T=this._stats.domElement,P=T.style,R=yt.getOffset(f);P.position="absolute",P.left=R.x+"px",P.top=R.y+"px",s.body.appendChild(T)}}else w=new N(f),f=null;this._project=u,this._scope=u._scope,this._element=f,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(w.width,w.height),this._viewSize=w,r._views.push(this),r._viewsById[this._id]=this,(this._matrix=new ue)._owner=this,r._focused||(r._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ft.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;en._focused===this&&(en._focused=null),en._views.splice(en._views.indexOf(this),1),delete en._viewsById[this._id];var r=this._project;return r._view===this&&(r._view=null),At.remove(this._element,this._viewEvents),At.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(z._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(r){this[r]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(r){this._autoUpdate=r,r&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var r=this;At.requestAnimationFrame(function(){if(r._requested=!1,r._animate){r.requestUpdate();var u=r._element;(!yt.getPrefixed(s,"hidden")||p.getAttribute(u,"keepalive")==="true")&&yt.isInView(u)&&r._handleFrame()}r._autoUpdate&&r.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ft=this._scope;var r=Date.now()/1e3,u=this._last?r-this._last:0;this._last=r,this.emit("frame",new a({delta:u,time:this._time+=u,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(r,u){var f=this._frameItems;u?(f[r._id]={item:r,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete f[r._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(r){for(var u in this._frameItems){var f=this._frameItems[u];f.item.emit("frame",new a(r,{time:f.time+=r.delta,count:f.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var r=this._viewSize;return new $(r.width,r.height,this,"setViewSize")},setViewSize:function(){var r=N.read(arguments),u=r.subtract(this._viewSize);u.isZero()||(this._setElementSize(r.width,r.height),this._viewSize.set(r),this._changed(),this.emit("resize",{size:r,delta:u}),this._autoUpdate&&this.update())},_setElementSize:function(r,u){var f=this._element;f&&(f.width!==r&&(f.width=r),f.height!==u&&(f.height=u))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ee(new E,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return yt.isInView(this._element)},isInserted:function(){return yt.isInserted(this._element)},getPixelSize:function(r){var u=this._element,f;if(u){var g=u.parentNode,m=s.createElement("div");m.style.fontSize=r,g.appendChild(m),f=parseFloat(yt.getStyles(m).fontSize),g.removeChild(m)}else f=parseFloat(f);return f},getTextWidth:function(r,u){return 0}},a.each(["rotate","scale","shear","skew"],function(r){var u=r==="rotate";this[r]=function(){var f=arguments,g=(u?a:E).read(f),m=E.read(f,0,{readNull:!0});return this.transform(new ue()[r](g,m||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var r=new ue;return this.transform(r.translate.apply(r,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var r=E.read(arguments);this.translate(this.getCenter().subtract(r))},getZoom:function(){var r=this._decompose().scaling;return(r.x+r.y)/2},setZoom:function(r){this.transform(new ue().scale(r/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(r){var u=this.getRotation();u!=null&&r!=null&&this.rotate(r-u)},getScaling:function(){var r=this._decompose().scaling;return new Z(r.x,r.y,this,"setScaling")},setScaling:function(){var r=this.getScaling(),u=E.read(arguments,0,{clone:!0,readNull:!0});r&&u&&this.scale(u.x/r.x,u.y/r.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var r=this._matrix;r.set.apply(r,arguments)},transform:function(r){this._matrix.append(r)},scrollBy:function(){this.translate(E.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(E.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(E.read(arguments))},getEventPoint:function(r){return this.viewToProject(At.getOffset(r,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(r,u){s&&typeof u=="string"&&(u=s.getElementById(u));var f=n?oa:en;return new f(r,u)}}},new function(){if(!n)return;var r,u,f=!1,g=!1;function m(ne){var ce=At.getTarget(ne);return ce.getAttribute&&en._viewsById[ce.getAttribute("id")]}function w(){var ne=en._focused;if(!ne||!ne.isVisible()){for(var ce=0,fe=en._views.length;ce<fe;ce++)if((ne=en._views[ce]).isVisible()){en._focused=u=ne;break}}}function S(ne,ce,fe){ne._handleMouseEvent("mousemove",ce,fe)}var C=n.navigator,T,P,R;C.pointerEnabled||C.msPointerEnabled?(T="pointerdown MSPointerDown",P="pointermove MSPointerMove",R="pointerup pointercancel MSPointerUp MSPointerCancel"):(T="touchstart",P="touchmove",R="touchend touchcancel","ontouchstart"in n&&C.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(T+=" mousedown",P+=" mousemove",R+=" mouseup"));var B={},j={mouseout:function(ne){var ce=en._focused,fe=At.getRelatedTarget(ne);if(ce&&(!fe||fe.nodeName==="HTML")){var ve=At.getOffset(ne,ce._element),ye=ve.x,Ee=Math.abs,Ne=Ee(ye),We=1<<25,$e=Ne-We;ve.x=Ee($e)<Ne?$e*(ye<0?-1:1):ye,S(ce,ne,ce.viewToProject(ve))}},scroll:w};B[T]=function(ne){var ce=en._focused=m(ne);f||(f=!0,ce._handleMouseEvent("mousedown",ne))},j[P]=function(ne){var ce=en._focused;if(!g){var fe=m(ne);fe?ce!==fe&&(ce&&S(ce,ne),r||(r=ce),ce=en._focused=u=fe):u&&u===ce&&(r&&!r.isInserted()&&(r=null),ce=en._focused=r,r=null,w())}ce&&S(ce,ne)},j[T]=function(){g=!0},j[R]=function(ne){var ce=en._focused;ce&&f&&ce._handleMouseEvent("mouseup",ne),g=f=!1},At.add(s,j),At.add(n,{load:w});var I=!1,G=!1,V={doubleclick:"click",mousedrag:"mousemove"},H=!1,L,U,A,W,q,Q,X,te;function ie(ne,ce,fe,ve,ye,Ee,Ne){var We=!1,$e;function it(je,De){if(je.responds(De)){if($e||($e=new la(De,ve,ye,ce||je,Ee?ye.subtract(Ee):null)),je.emit(De,$e)&&(I=!0,$e.prevented&&(G=!0),$e.stopped))return We=!0}else{var et=V[De];if(et)return it(je,et)}}for(;ne&&ne!==Ne&&!it(ne,fe);)ne=ne._parent;return We}function se(ne,ce,fe,ve,ye,Ee){return ne._project.removeOn(fe),G=I=!1,q&&ie(q,null,fe,ve,ye,Ee)||ce&&ce!==q&&!ce.isDescendant(q)&&ie(ce,null,fe==="mousedrag"?"mousemove":fe,ve,ye,Ee,q)||ie(ne,q||ce||ne,fe,ve,ye,Ee)}var he={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:B,_handleMouseEvent:function(ne,ce,fe){var ve=this._itemEvents,ye=ve.native[ne],Ee=ne==="mousemove",Ne=this._scope.tool,We=this;function $e(xt){return ve.virtual[xt]||We.responds(xt)||Ne&&Ne.responds(xt)}Ee&&f&&$e("mousedrag")&&(ne="mousedrag"),fe||(fe=this.getEventPoint(ce));var it=this.getBounds().contains(fe),je=ye&&it&&We._project.hitTest(fe,{tolerance:0,fill:!0,stroke:!0}),De=je&&je.item||null,et=!1,at={};if(at[ne.substr(5)]=!0,ye&&De!==W&&(W&&ie(W,null,"mouseleave",ce,fe),De&&ie(De,null,"mouseenter",ce,fe),W=De),H^it&&(ie(this,null,it?"mouseenter":"mouseleave",ce,fe),et=!0),(it||at.drag)&&!fe.equals(U)&&(se(this,De,Ee?ne:"mousemove",ce,fe,U),et=!0),H=it,at.down&&it||at.up&&L){if(se(this,De,ne,ce,fe,L),at.down){if(te=De===Q&&Date.now()-X<300,A=Q=De,!G&&De){for(var st=De;st&&!st.responds("mousedrag");)st=st._parent;st&&(q=De)}L=fe}else at.up&&(!G&&De===A&&(X=Date.now(),se(this,De,te?"doubleclick":"click",ce,fe,L),te=!1),A=q=null);H=!1,et=!0}U=fe,et&&Ne&&(I=Ne._handleMouseEvent(ne,ce,fe,at)||I),ce.cancelable!==!1&&(I&&!at.move||at.down&&$e("mouseup"))&&ce.preventDefault()},_handleKeyEvent:function(ne,ce,fe,ve){var ye=this._scope,Ee=ye.tool,Ne;function We($e){$e.responds(ne)&&(Ft=ye,$e.emit(ne,Ne=Ne||new ks(ne,ce,fe,ve)))}this.isVisible()&&(We(this),Ee&&Ee.responds(ne)&&We(Ee))},_countItemEvent:function(ne,ce){var fe=this._itemEvents,ve=fe.native,ye=fe.virtual;for(var Ee in he)ve[Ee]=(ve[Ee]||0)+(he[Ee][ne]||0)*ce;ye[ne]=(ye[ne]||0)+ce},statics:{updateFocus:w,_resetState:function(){f=g=I=H=!1,r=u=L=U=A=W=q=Q=X=te=null}}}}),oa=en.extend({_class:"CanvasView",initialize:function(u,f){if(!(f instanceof n.HTMLCanvasElement)){var g=N.read(arguments,1);if(g.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));f=tn.getCanvas(g)}var m=this._context=f.getContext("2d");if(m.save(),this._pixelRatio=1,!/^off|false$/.test(p.getAttribute(f,"hidpi"))){var w=n.devicePixelRatio||1,S=yt.getPrefixed(m,"backingStorePixelRatio")||1;this._pixelRatio=w/S}en.call(this,u,f),this._needsUpdate=!0},remove:function r(){return this._context.restore(),r.base.call(this)},_setElementSize:function r(u,f){var g=this._pixelRatio;if(r.base.call(this,u*g,f*g),g!==1){var m=this._element,w=this._context;if(!p.hasAttribute(m,"resize")){var S=m.style;S.width=u+"px",S.height=f+"px"}w.restore(),w.save(),w.scale(g,g)}},getContext:function(){return this._context},getPixelSize:function r(u){var f=Ft.agent,g;if(f&&f.firefox)g=r.base.call(this,u);else{var m=this._context,w=m.font;m.font=u+" serif",g=parseFloat(m.font),m.font=w}return g},getTextWidth:function(r,u){var f=this._context,g=f.font,m=0;f.font=r;for(var w=0,S=u.length;w<S;w++)m=Math.max(m,f.measureText(u[w]).width);return f.font=g,m},update:function(){if(!this._needsUpdate)return!1;var r=this._project,u=this._context,f=this._viewSize;return u.clearRect(0,0,f.width+1,f.height+1),r&&r.draw(u,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Rr=a.extend({_class:"Event",initialize:function(u){this.event=u,this.type=u&&u.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Li.modifiers}}),ks=Rr.extend({_class:"KeyEvent",initialize:function(u,f,g,m){this.type=u,this.event=f,this.key=g,this.character=m},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Li=new function(){var r={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},u={tab:"	",space:" ",enter:"\r"},f={},g={},m,w,S=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var P=Ft&&Ft.agent;return P&&P.mac?this.meta:this.control}}});function C(P){var R=P.key||P.keyIdentifier;return R=/^U\+/.test(R)?String.fromCharCode(parseInt(R.substr(2),16)):/^Arrow[A-Z]/.test(R)?R.substr(5):R==="Unidentified"||R===t?String.fromCharCode(P.keyCode):R,r[R]||(R.length>1?a.hyphenate(R):R.toLowerCase())}function T(P,R,B,j){var I=en._focused,G;if(f[R]=P,P?g[R]=B:delete g[R],R.length>1&&(G=a.camelize(R))in S){S[G]=P;var V=Ft&&Ft.agent;if(G==="meta"&&V&&V.mac)if(P)m={};else{for(var H in m)H in g&&T(!1,H,m[H],j);m=null}}else P&&m&&(m[R]=B);I&&I._handleKeyEvent(P?"keydown":"keyup",j,R,B)}return At.add(s,{keydown:function(P){var R=C(P),B=Ft&&Ft.agent;R.length>1||B&&B.chrome&&(P.altKey||B.mac&&P.metaKey||!B.mac&&P.ctrlKey)?T(!0,R,u[R]||(R.length>1?"":R),P):w=R},keypress:function(P){if(w){var R=C(P),B=P.charCode,j=B>=32?String.fromCharCode(B):R.length>1?"":R;R!==w&&(R=j.toLowerCase()),T(!0,R,j,P),w=null}},keyup:function(P){var R=C(P);R in g&&T(!1,R,g[R],P)}}),At.add(n,{blur:function(P){for(var R in g)T(!1,R,g[R],P)}}),{modifiers:S,isDown:function(P){return!!f[P]}}},la=Rr.extend({_class:"MouseEvent",initialize:function(u,f,g,m,w){this.type=u,this.event=f,this.point=g,this.target=m,this.delta=w},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Fr=Rr.extend({_class:"ToolEvent",_item:null,initialize:function(u,f,g){this.tool=u,this.type=f,this.event=g},_choosePoint:function(r,u){return r||(u?u.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(r){this._point=r},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(r){this._lastPoint=r},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(r){this._downPoint=r},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(r){this._middlePoint=r},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(r){this._delta=r},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(r){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=r},getItem:function(){if(!this._item){var r=this.tool._scope.project.hitTest(this.getPoint());if(r){for(var u=r.item,f=u._parent;/^(Group|CompoundPath)$/.test(f._class);)u=f,f=f._parent;this._item=u}}return this._item},setItem:function(r){this._item=r},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Di=v.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(u){v.call(this),this._moveCount=-1,this._downCount=-1,this.set(u)},getMinDistance:function(){return this._minDistance},setMinDistance:function(r){this._minDistance=r,r!=null&&this._maxDistance!=null&&r>this._maxDistance&&(this._maxDistance=r)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(r){this._maxDistance=r,this._minDistance!=null&&r!=null&&r<this._minDistance&&(this._minDistance=r)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(r){this._minDistance=this._maxDistance=r},_handleMouseEvent:function(r,u,f,g){Ft=this._scope,g.drag&&!this.responds(r)&&(r="mousemove");var m=g.move||g.drag,w=this.responds(r),S=!1,C=this;function T(R,B){var j=f,I=m?C._point:C._downPoint||j;if(m){if(C._moveCount>=0&&j.equals(I))return!1;if(I&&(R!=null||B!=null)){var G=j.subtract(I),V=G.getLength();if(V<(R||0))return!1;B&&(j=I.add(G.normalize(Math.min(V,B))))}C._moveCount++}return C._point=j,C._lastPoint=I||j,g.down&&(C._moveCount=-1,C._downPoint=j,C._downCount++),!0}function P(){w&&(S=C.emit(r,new Fr(C,r,u))||S)}if(g.down)T(),P();else if(g.up)T(null,this._maxDistance),P();else if(w)for(;T(this._minDistance,this._maxDistance);)P();return S}}),Ri=a.extend(h,{_class:"Tween",statics:{easings:new a({linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+2*(2-r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}})},initialize:function r(u,f,g,m,w,S){this.object=u;var C=typeof w,T=C==="function";this.type=T?C:C==="string"?w:"linear",this.easing=T?w:r.easings[this.type],this.duration=m,this.running=!1,this._then=null,this._startTime=null;var P=f||g;this._keys=P?Object.keys(P):[],this._parsedKeys=this._parseKeys(this._keys),this._from=P&&this._getState(f),this._to=P&&this._getState(g),S!==!1&&this.start()},then:function(r){return this._then=r,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(r){if(this.running){r>=1&&(r=1,this.running=!1);for(var u=this.easing(r),f=this._keys,g=function(R){return typeof R=="function"?R(u,r):R},m=0,w=f&&f.length;m<w;m++){var S=f[m],C=g(this._from[S]),T=g(this._to[S]),P=C&&T&&C.__add&&T.__add?T.__subtract(C).__multiply(u).__add(C):(T-C)*u+C;this._setProperty(this._parsedKeys[S],P)}this.responds("update")&&this.emit("update",new a({progress:r,factor:u})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(r){var u=this._startTime,f=u?(r-u)/this.duration:0;u||(this._startTime=r),this.update(f)},_getState:function(r){for(var u=this._keys,f={},g=0,m=u.length;g<m;g++){var w=u[g],S=this._parsedKeys[w],C=this._getProperty(S),T;if(r){var P=this._resolveValue(C,r[w]);this._setProperty(S,P),T=this._getProperty(S),T=T&&T.clone?T.clone():T,this._setProperty(S,C)}else T=C&&C.clone?C.clone():C;f[w]=T}return f},_resolveValue:function(r,u){if(u){if(Array.isArray(u)&&u.length===2){var f=u[0];return f&&f.match&&f.match(/^[+\-\*\/]=/)?this._calculate(r,f[0],u[1]):u}else if(typeof u=="string"){var g=u.match(/^[+\-*/]=(.*)/);if(g){var m=JSON.parse(g[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(r,u[0],m)}}}return u},_calculate:function(r,u,f){return Ft.PaperScript.calculateBinary(r,u,f)},_parseKeys:function(r){for(var u={},f=0,g=r.length;f<g;f++){var m=r[f],w=m.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");u[m]=w.split("/")}return u},_getProperty:function(r,u){for(var f=this.object,g=0,m=r.length-(u||0);g<m&&f;g++)f=f[r[g]];return f},_setProperty:function(r,u){var f=this._getProperty(r,1);f&&(f[r[r.length-1]]=u)}}),qr={request:function(r){var u=new e.XMLHttpRequest;return u.open((r.method||"get").toUpperCase(),r.url,a.pick(r.async,!0)),r.mimeType&&u.overrideMimeType(r.mimeType),u.onload=function(){var f=u.status;f===0||f===200?r.onLoad&&r.onLoad.call(u,u.responseText):u.onerror()},u.onerror=function(){var f=u.status,g='Could not load "'+r.url+'" (Status: '+f+")";if(r.onError)r.onError(g,f);else throw new Error(g)},u.send(null)}},tn=a.exports.CanvasProvider={canvases:[],getCanvas:function(r,u,f){if(!n)return null;var g,m=!0;typeof r=="object"&&(u=r.height,r=r.width),this.canvases.length?g=this.canvases.pop():(g=s.createElement("canvas"),m=!1);var w=g.getContext("2d",f||{});if(!w)throw new Error("Canvas "+g+" is unable to provide a 2D context.");return g.width===r&&g.height===u?m&&w.clearRect(0,0,r+1,u+1):(g.width=r,g.height=u),w.save(),g},getContext:function(r,u,f){var g=this.getCanvas(r,u,f);return g?g.getContext("2d",f||{}):null},release:function(r){var u=r&&r.canvas?r.canvas:r;u&&u.getContext&&(u.getContext("2d").restore(),this.canvases.push(u))}},fi=new function(){var r=Math.min,u=Math.max,f=Math.abs,g,m,w,S,C,T,P,R,B,j,I;function G(q,Q,X){return .2989*q+.587*Q+.114*X}function V(q,Q,X,se){var ie=se-G(q,Q,X);B=q+ie,j=Q+ie,I=X+ie;var se=G(B,j,I),he=r(B,j,I),ne=u(B,j,I);if(he<0){var ce=se-he;B=se+(B-se)*se/ce,j=se+(j-se)*se/ce,I=se+(I-se)*se/ce}if(ne>255){var fe=255-se,ve=ne-se;B=se+(B-se)*fe/ve,j=se+(j-se)*fe/ve,I=se+(I-se)*fe/ve}}function H(q,Q,X){return u(q,Q,X)-r(q,Q,X)}function L(q,Q,X,te){var ie=[q,Q,X],se=u(q,Q,X),he=r(q,Q,X),ne;he=he===q?0:he===Q?1:2,se=se===q?0:se===Q?1:2,ne=r(he,se)===0?u(he,se)===1?2:1:0,ie[se]>ie[he]?(ie[ne]=(ie[ne]-ie[he])*te/(ie[se]-ie[he]),ie[se]=te):ie[ne]=ie[se]=0,ie[he]=0,B=ie[0],j=ie[1],I=ie[2]}var U={multiply:function(){B=C*g/255,j=T*m/255,I=P*w/255},screen:function(){B=C+g-C*g/255,j=T+m-T*m/255,I=P+w-P*w/255},overlay:function(){B=C<128?2*C*g/255:255-2*(255-C)*(255-g)/255,j=T<128?2*T*m/255:255-2*(255-T)*(255-m)/255,I=P<128?2*P*w/255:255-2*(255-P)*(255-w)/255},"soft-light":function(){var q=g*C/255;B=q+C*(255-(255-C)*(255-g)/255-q)/255,q=m*T/255,j=q+T*(255-(255-T)*(255-m)/255-q)/255,q=w*P/255,I=q+P*(255-(255-P)*(255-w)/255-q)/255},"hard-light":function(){B=g<128?2*g*C/255:255-2*(255-g)*(255-C)/255,j=m<128?2*m*T/255:255-2*(255-m)*(255-T)/255,I=w<128?2*w*P/255:255-2*(255-w)*(255-P)/255},"color-dodge":function(){B=C===0?0:g===255?255:r(255,255*C/(255-g)),j=T===0?0:m===255?255:r(255,255*T/(255-m)),I=P===0?0:w===255?255:r(255,255*P/(255-w))},"color-burn":function(){B=C===255?255:g===0?0:u(0,255-(255-C)*255/g),j=T===255?255:m===0?0:u(0,255-(255-T)*255/m),I=P===255?255:w===0?0:u(0,255-(255-P)*255/w)},darken:function(){B=C<g?C:g,j=T<m?T:m,I=P<w?P:w},lighten:function(){B=C>g?C:g,j=T>m?T:m,I=P>w?P:w},difference:function(){B=C-g,B<0&&(B=-B),j=T-m,j<0&&(j=-j),I=P-w,I<0&&(I=-I)},exclusion:function(){B=C+g*(255-C-C)/255,j=T+m*(255-T-T)/255,I=P+w*(255-P-P)/255},hue:function(){L(g,m,w,H(C,T,P)),V(B,j,I,G(C,T,P))},saturation:function(){L(C,T,P,H(g,m,w)),V(B,j,I,G(C,T,P))},luminosity:function(){V(C,T,P,G(g,m,w))},color:function(){V(g,m,w,G(C,T,P))},add:function(){B=r(C+g,255),j=r(T+m,255),I=r(P+w,255)},subtract:function(){B=u(C-g,0),j=u(T-m,0),I=u(P-w,0)},average:function(){B=(C+g)/2,j=(T+m)/2,I=(P+w)/2},negation:function(){B=255-f(255-g-C),j=255-f(255-m-T),I=255-f(255-w-P)}},A=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(q){this[q]=!0},{}),W=tn.getContext(1,1,{willReadFrequently:!0});W&&(a.each(U,function(q,Q){var X=Q==="darken",te=!1;W.save();try{W.fillStyle=X?"#300":"#a00",W.fillRect(0,0,1,1),W.globalCompositeOperation=Q,W.globalCompositeOperation===Q&&(W.fillStyle=X?"#a00":"#300",W.fillRect(0,0,1,1),te=W.getImageData(0,0,1,1).data[0]!==X?170:51)}catch{}W.restore(),A[Q]=te}),tn.release(W)),this.process=function(q,Q,X,te,ie){var se=Q.canvas,he=q==="normal";if(he||A[q])X.save(),X.setTransform(1,0,0,1,0,0),X.globalAlpha=te,he||(X.globalCompositeOperation=q),X.drawImage(se,ie.x,ie.y),X.restore();else{var ne=U[q];if(!ne)return;for(var ce=X.getImageData(ie.x,ie.y,se.width,se.height),fe=ce.data,ve=Q.getImageData(0,0,se.width,se.height).data,ye=0,Ee=fe.length;ye<Ee;ye+=4){g=ve[ye],C=fe[ye],m=ve[ye+1],T=fe[ye+1],w=ve[ye+2],P=fe[ye+2],S=ve[ye+3],R=fe[ye+3],ne();var Ne=S*te/255,We=1-Ne;fe[ye]=Ne*B+We*C,fe[ye+1]=Ne*j+We*T,fe[ye+2]=Ne*I+We*P,fe[ye+3]=S*te+We*R}X.putImageData(ce,ie.x,ie.y)}}},Yt=new function(){var r="http://www.w3.org/2000/svg",u="http://www.w3.org/2000/xmlns",f="http://www.w3.org/1999/xlink",g={href:f,xlink:u,xmlns:u+"/","xmlns:xlink":u+"/"};function m(C,T,P){return S(s.createElementNS(r,C),T,P)}function w(C,T){var P=g[T],R=P?C.getAttributeNS(P,T):C.getAttribute(T);return R==="null"?null:R}function S(C,T,P){for(var R in T){var B=T[R],j=g[R];typeof B=="number"&&P&&(B=P.number(B)),j?C.setAttributeNS(j,R,B):C.setAttribute(R,B)}return C}return{svg:r,xmlns:u,xlink:f,create:m,get:w,set:S}},Ts=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(r,u){return!u&&(r instanceof Be||r instanceof Je||r instanceof _t)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(r,u){var f=a.capitalize(u),g=r[2];this[u]={type:r[1],property:u,attribute:r[0],toSVG:g,fromSVG:g&&a.each(g,function(m,w){this[m]=w},{}),exportFilter:r[3],get:"get"+f,set:"set"+f}},{});new function(){var r;function u(U,A,W){var q=new a,Q=U.getTranslation();if(A){var X;U.isInvertible()?(U=U._shiftless(),X=U._inverseTransform(Q),Q=null):X=new E,q[W?"cx":"x"]=X.x,q[W?"cy":"y"]=X.y}if(!U.isIdentity()){var te=U.decompose();if(te){var ie=[],se=te.rotation,he=te.scaling,ne=te.skewing;Q&&!Q.isZero()&&ie.push("translate("+r.point(Q)+")"),se&&ie.push("rotate("+r.number(se)+")"),(!O.isZero(he.x-1)||!O.isZero(he.y-1))&&ie.push("scale("+r.point(he)+")"),ne.x&&ie.push("skewX("+r.number(ne.x)+")"),ne.y&&ie.push("skewY("+r.number(ne.y)+")"),q.transform=ie.join(" ")}else q.transform="matrix("+U.getValues().join(",")+")"}return q}function f(U,A){for(var W=u(U._matrix),q=U._children,Q=Yt.create("g",W,r),X=0,te=q.length;X<te;X++){var ie=q[X],se=H(ie,A);if(se)if(ie.isClipMask()){var he=Yt.create("clipPath");he.appendChild(se),G(ie,he,"clip"),Yt.set(Q,{"clip-path":"url(#"+he.id+")"})}else Q.appendChild(se)}return Q}function g(U,A){var W=u(U._matrix,!0),q=U.getSize(),Q=U.getImage();return W.x-=q.width/2,W.y-=q.height/2,W.width=q.width,W.height=q.height,W.href=A.embedImages==!1&&Q&&Q.src||U.toDataURL(),Yt.create("image",W,r)}function m(U,A){var W=A.matchShapes;if(W){var q=U.toShape(!1);if(q)return w(q)}var Q=U._segments,X=Q.length,te,ie=u(U._matrix);if(W&&X>=2&&!U.hasHandles())if(X>2){te=U._closed?"polygon":"polyline";for(var se=[],he=0;he<X;he++)se.push(r.point(Q[he]._point));ie.points=se.join(" ")}else{te="line";var ne=Q[0]._point,ce=Q[1]._point;ie.set({x1:ne.x,y1:ne.y,x2:ce.x,y2:ce.y})}else te="path",ie.d=U.getPathData(null,A.precision);return Yt.create(te,ie,r)}function w(U){var A=U._type,W=U._radius,q=u(U._matrix,!0,A!=="rectangle");if(A==="rectangle"){A="rect";var Q=U._size,X=Q.width,te=Q.height;q.x-=X/2,q.y-=te/2,q.width=X,q.height=te,W.isZero()&&(W=null)}return W&&(A==="circle"?q.r=W:(q.rx=W.width,q.ry=W.height)),Yt.create(A,q,r)}function S(U,A){var W=u(U._matrix),q=U.getPathData(null,A.precision);return q&&(W.d=q),Yt.create("path",W,r)}function C(U,A){var W=u(U._matrix,!0),q=U._definition,Q=I(q,"symbol"),X=q._item,te=X.getStrokeBounds();return Q||(Q=Yt.create("symbol",{viewBox:r.rectangle(te)}),Q.appendChild(H(X,A)),G(q,Q,"symbol")),W.href="#"+Q.id,W.x+=te.x,W.y+=te.y,W.width=te.width,W.height=te.height,W.overflow="visible",Yt.create("use",W,r)}function T(U){var A=I(U,"color");if(!A){var W=U.getGradient(),q=W._radial,Q=U.getOrigin(),X=U.getDestination(),te;if(q){te={cx:Q.x,cy:Q.y,r:Q.getDistance(X)};var ie=U.getHighlight();ie&&(te.fx=ie.x,te.fy=ie.y)}else te={x1:Q.x,y1:Q.y,x2:X.x,y2:X.y};te.gradientUnits="userSpaceOnUse",A=Yt.create((q?"radial":"linear")+"Gradient",te,r);for(var se=W._stops,he=0,ne=se.length;he<ne;he++){var ce=se[he],fe=ce._color,ve=fe.getAlpha(),ye=ce._offset;te={offset:ye??he/(ne-1)},fe&&(te["stop-color"]=fe.toCSS(!0)),ve<1&&(te["stop-opacity"]=ve),A.appendChild(Yt.create("stop",te,r))}G(U,A,"color")}return"url(#"+A.id+")"}function P(U){var A=Yt.create("text",u(U._matrix,!0),r);return A.textContent=U._content,A}var R={Group:f,Layer:f,Raster:g,Path:m,Shape:w,CompoundPath:S,SymbolItem:C,PointText:P};function B(U,A,W,q){var Q={},X=!q&&U.getParent(),te=[];return U._name!=null&&(Q.id=U._name),a.each(Ts,function(ie){var se=ie.get,he=ie.type,ne=U[se]();if(ie.exportFilter?ie.exportFilter(U,ne):W.reduceAttributes==!1||!X||!a.equals(X[se](),ne)){if(he==="color"&&ne!=null){var ce=ne.getAlpha();ce<1&&(Q[ie.attribute+"-opacity"]=ce)}he==="style"?te.push(ie.attribute+": "+ne):Q[ie.attribute]=ne==null?"none":he==="color"?ne.gradient?T(ne):ne.toCSS(!0):he==="array"?ne.join(","):he==="lookup"?ie.toSVG[ne]:ne}}),te.length&&(Q.style=te.join(";")),Q.opacity===1&&delete Q.opacity,U._visible||(Q.visibility="hidden"),Yt.set(A,Q,r)}var j;function I(U,A){return j||(j={ids:{},svgs:{}}),U&&j.svgs[A+"-"+(U._id||U.__id||(U.__id=F.get("svg")))]}function G(U,A,W){j||I();var q=j.ids[W]=(j.ids[W]||0)+1;A.id=W+"-"+q,j.svgs[W+"-"+(U._id||U.__id)]=A}function V(U,A){var W=U,q=null;if(j){W=U.nodeName.toLowerCase()==="svg"&&U;for(var Q in j.svgs)q||(W||(W=Yt.create("svg"),W.appendChild(U)),q=W.insertBefore(Yt.create("defs"),W.firstChild)),q.appendChild(j.svgs[Q]);j=null}return A.asString?new e.XMLSerializer().serializeToString(W):W}function H(U,A,W){var q=R[U._class],Q=q&&q(U,A);if(Q){var X=A.onExport;X&&(Q=X(U,Q,A)||Q);var te=JSON.stringify(U._data);te&&te!=="{}"&&te!=="null"&&Q.setAttribute("data-paper-data",te)}return Q&&B(U,Q,A,W)}function L(U){return U||(U={}),r=new b(U.precision),U}z.inject({exportSVG:function(U){return U=L(U),V(H(this,U,!0),U)}}),Ce.inject({exportSVG:function(U){U=L(U);var A=this._children,W=this.getView(),q=a.pick(U.bounds,"view"),Q=U.matrix||q==="view"&&W._matrix,X=Q&&ue.read([Q]),te=q==="view"?new ee([0,0],W.getViewSize()):q==="content"?z._getBounds(A,X,{stroke:!0}).rect:ee.read([q],0,{readNull:!0}),ie={version:"1.1",xmlns:Yt.svg,"xmlns:xlink":Yt.xlink};te&&(ie.width=te.width,ie.height=te.height,(te.x||te.x===0||te.y||te.y===0)&&(ie.viewBox=r.rectangle(te)));var se=Yt.create("svg",ie,r),he=se;X&&!X.isIdentity()&&(he=se.appendChild(Yt.create("g",u(X),r)));for(var ne=0,ce=A.length;ne<ce;ne++)he.appendChild(H(A[ne],U,!0));return V(se,U)}})},new function(){var r={},u;function f(A,W,q,Q,X,te){var ie=Yt.get(A,W)||te,se=ie==null?Q?null:q?"":0:q?ie:parseFloat(ie);return/%\s*$/.test(ie)?se/100*(X?1:u[/x|^width/.test(W)?"width":"height"]):se}function g(A,W,q,Q,X,te,ie){return W=f(A,W||"x",!1,Q,X,te),q=f(A,q||"y",!1,Q,X,ie),Q&&(W==null||q==null)?null:new E(W,q)}function m(A,W,q,Q,X){return W=f(A,W||"width",!1,Q,X),q=f(A,q||"height",!1,Q,X),Q&&(W==null||q==null)?null:new N(W,q)}function w(A,W,q){return A==="none"?null:W==="number"?parseFloat(A):W==="array"?A?A.split(/[\s,]+/g).map(parseFloat):[]:W==="color"?H(A)||A:W==="lookup"?q[A]:A}function S(A,W,q,Q){var X=A.childNodes,te=W==="clippath",ie=W==="defs",se=new Ve,he=se._project,ne=he._currentStyle,ce=[];if(!te&&!ie&&(se=V(se,A,Q),he._currentStyle=se._style.clone()),Q)for(var fe=A.querySelectorAll("defs"),ve=0,ye=fe.length;ve<ye;ve++)L(fe[ve],q,!1);for(var ve=0,ye=X.length;ve<ye;ve++){var Ee=X[ve],Ne;Ee.nodeType===1&&!/^defs$/i.test(Ee.nodeName)&&(Ne=L(Ee,q,!1))&&!(Ne instanceof Ke)&&ce.push(Ne)}return se.addChildren(ce),te&&(se=V(se.reduce(),A,Q)),he._currentStyle=ne,(te||ie)&&(se.remove(),se=null),se}function C(A,W){for(var q=A.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),Q=[],X=0,te=q.length;X<te;X+=2)Q.push(new E(parseFloat(q[X]),parseFloat(q[X+1])));var ie=new Xe(Q);return W==="polygon"&&ie.closePath(),ie}function T(A){return Be.create(A.getAttribute("d"))}function P(A,W){var q=(f(A,"href",!0)||"").substring(1),Q=W==="radialgradient",X;if(q)X=r[q].getGradient(),X._radial^Q&&(X=X.clone(),X._radial=Q);else{for(var te=A.childNodes,ie=[],se=0,he=te.length;se<he;se++){var ne=te[se];ne.nodeType===1&&ie.push(V(new zt,ne))}X=new Mt(ie,Q)}var ce,fe,ve,ye=f(A,"gradientUnits",!0)!=="userSpaceOnUse";Q?(ce=g(A,"cx","cy",!1,ye,"50%","50%"),fe=ce.add(f(A,"r",!1,!1,ye,"50%"),0),ve=g(A,"fx","fy",!0,ye)):(ce=g(A,"x1","y1",!1,ye,"0%","0%"),fe=g(A,"x2","y2",!1,ye,"100%","0%"));var Ee=V(new pt(X,ce,fe,ve),A);return Ee._scaleToBounds=ye,null}var R={"#document":function(A,W,q,Q){for(var X=A.childNodes,te=0,ie=X.length;te<ie;te++){var se=X[te];if(se.nodeType===1)return L(se,q,Q)}},g:S,svg:S,clippath:S,polygon:C,polyline:C,path:T,lineargradient:P,radialgradient:P,image:function(A){var W=new ut(f(A,"href",!0));return W.on("load",function(){var q=m(A);this.setSize(q);var Q=g(A).add(q.divide(2));this._matrix.append(new ue().translate(Q))}),W},symbol:function(A,W,q,Q){return new Ke(S(A,W,q,Q),!0)},defs:S,use:function(A){var W=(f(A,"href",!0)||"").substring(1),q=r[W],Q=g(A);return q?q instanceof Ke?q.place(Q):q.clone().translate(Q):null},circle:function(A){return new Je.Circle(g(A,"cx","cy"),f(A,"r"))},ellipse:function(A){return new Je.Ellipse({center:g(A,"cx","cy"),radius:m(A,"rx","ry")})},rect:function(A){return new Je.Rectangle(new ee(g(A),m(A)),m(A,"rx","ry"))},line:function(A){return new Xe.Line(g(A,"x1","y1"),g(A,"x2","y2"))},text:function(A){var W=new Ct(g(A).add(g(A,"dx","dy")));return W.setContent(A.textContent.trim()||""),W},switch:S};function B(A,W,q,Q){if(A.transform){for(var X=(Q.getAttribute(q)||"").split(/\)\s*/g),te=new ue,ie=0,se=X.length;ie<se;ie++){var he=X[ie];if(!he)break;for(var ne=he.split(/\(\s*/),ce=ne[0].trim(),fe=ne[1].split(/[\s,]+/g),ve=0,ye=fe.length;ve<ye;ve++)fe[ve]=parseFloat(fe[ve]);switch(ce){case"matrix":te.append(new ue(fe[0],fe[1],fe[2],fe[3],fe[4],fe[5]));break;case"rotate":te.rotate(fe[0],fe[1]||0,fe[2]||0);break;case"translate":te.translate(fe[0],fe[1]||0);break;case"scale":te.scale(fe);break;case"skewX":te.skew(fe[0],0);break;case"skewY":te.skew(0,fe[0]);break}}A.transform(te)}}function j(A,W,q){var Q=q==="fill-opacity"?"getFillColor":"getStrokeColor",X=A[Q]&&A[Q]();X&&X.setAlpha(parseFloat(W))}var I=a.set(a.each(Ts,function(A){this[A.attribute]=function(W,q){if(W[A.set]&&(W[A.set](w(q,A.type,A.fromSVG)),A.type==="color")){var Q=W[A.get]();if(Q&&Q._scaleToBounds){var X=W.getBounds();Q.transform(new ue().translate(X.getPoint()).scale(X.getSize()))}}}},{}),{id:function(A,W){r[W]=A,A.setName&&A.setName(W)},"clip-path":function(A,W){var q=H(W);if(q)if(q=q.clone(),q.setClipMask(!0),A instanceof Ve)A.insertChild(0,q);else return new Ve(q,A)},gradientTransform:B,transform:B,"fill-opacity":j,"stroke-opacity":j,visibility:function(A,W){A.setVisible&&A.setVisible(W==="visible")},display:function(A,W){A.setVisible&&A.setVisible(W!==null)},"stop-color":function(A,W){A.setColor&&A.setColor(W)},"stop-opacity":function(A,W){A._color&&A._color.setAlpha(parseFloat(W))},offset:function(A,W){if(A.setOffset){var q=W.match(/(.*)%$/);A.setOffset(q?q[1]/100:parseFloat(W))}},viewBox:function(A,W,q,Q,X){var te=new ee(w(W,"array")),ie=m(Q,null,null,!0),se,he;if(A instanceof Ve){var ne=ie?ie.divide(te.getSize()):1,he=new ue().scale(ne).translate(te.getPoint().negate());se=A}else A instanceof Ke&&(ie&&te.setSize(ie),se=A._item);if(se){if(G(Q,"overflow",X)!=="visible"){var ce=new Je.Rectangle(te);ce.setClipMask(!0),se.addChild(ce)}he&&se.transform(he)}}});function G(A,W,q){var Q=A.attributes[W],X=Q&&Q.value;if(!X&&A.style){var te=a.camelize(W);X=A.style[te],!X&&q.node[te]!==q.parent[te]&&(X=q.node[te])}return X?X==="none"?null:X:t}function V(A,W,q){var Q=W.parentNode,X={node:yt.getStyles(W)||{},parent:!q&&!/^defs$/i.test(Q.tagName)&&yt.getStyles(Q)||{}};return a.each(I,function(te,ie){var se=G(W,ie,X);A=se!==t&&te(A,se,ie,W,X)||A}),A}function H(A){var W=A&&A.match(/\((?:["'#]*)([^"')]+)/),q=W&&W[1],Q=q&&r[n?q.replace(n.location.href.split("#")[0]+"#",""):q];return Q&&Q._scaleToBounds&&(Q=Q.clone(),Q._scaleToBounds=!0),Q}function L(A,W,q){var Q=A.nodeName.toLowerCase(),X=Q!=="#document",te=s.body,ie,se,he;q&&X&&(u=Ft.getView().getSize(),u=m(A,null,null,!0)||u,ie=Yt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),se=A.parentNode,he=A.nextSibling,ie.appendChild(A),te.appendChild(ie));var ne=Ft.settings,ce=ne.applyMatrix,fe=ne.insertItems;ne.applyMatrix=!1,ne.insertItems=!1;var ve=R[Q],ye=ve&&ve(A,Q,W,q)||null;if(ne.insertItems=fe,ne.applyMatrix=ce,ye){X&&!(ye instanceof Ve)&&(ye=V(ye,A,q));var Ee=W.onImport,Ne=X&&A.getAttribute("data-paper-data");Ee&&(ye=Ee(A,ye,W)||ye),W.expandShapes&&ye instanceof Je&&(ye.remove(),ye=ye.toPath()),Ne&&(ye._data=JSON.parse(Ne))}return ie&&(te.removeChild(ie),se&&(he?se.insertBefore(A,he):se.appendChild(A))),q&&(r={},ye&&a.pick(W.applyMatrix,ce)&&ye.matrix.apply(!0,!0)),ye}function U(A,W,q){if(!A)return null;W=typeof W=="function"?{onLoad:W}:W||{};var Q=Ft,X=null;function te(ne){try{var ce=typeof ne=="object"?ne:new e.DOMParser().parseFromString(ne.trim(),"image/svg+xml");if(!ce.nodeName)throw ce=null,new Error("Unsupported SVG source: "+A);Ft=Q,X=L(ce,W,!0),(!W||W.insert!==!1)&&q._insertItem(t,X);var fe=W.onLoad;fe&&fe(X,ne)}catch(ve){ie(ve)}}function ie(ne,ce){var fe=W.onError;if(fe)fe(ne,ce);else throw new Error(ne)}if(typeof A=="string"&&!/^[\s\S]*</.test(A)){var se=s.getElementById(A);se?te(se):qr.request({url:A,async:!0,onLoad:te,onError:ie})}else if(typeof File<"u"&&A instanceof File){var he=new FileReader;return he.onload=function(){te(he.result)},he.onerror=function(){ie(he.error)},he.readAsText(A)}else te(A);return X}z.inject({importSVG:function(A,W){return U(A,W,this)}}),Ce.inject({importSVG:function(A,W){return this.activate(),U(A,W,this)}})},a.exports.PaperScript=(function(){var r=this,u=r.acorn;if(!u&&typeof Y2<"u")try{u=Z2()}catch{}if(!u){var f,g;u=f=g={},(function(V,H){if(typeof f=="object"&&typeof g=="object")return H(f);if(typeof t=="function"&&t.amd)return t(["exports"],H);H(V.acorn||(V.acorn={}))})(this,function(V){V.version="0.5.0";var H,L,U,A;V.parse=function(oe,pe){return L=String(oe),U=L.length,q(pe),hu(),_u(H.program)};var W=V.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function q(oe){H=oe||{};for(var pe in W)Object.prototype.hasOwnProperty.call(H,pe)||(H[pe]=W[pe]);A=H.sourceFile||null}var Q=V.getLineInfo=function(oe,pe){for(var Me=1,Re=0;;){In.lastIndex=Re;var St=In.exec(oe);if(St&&St.index<pe)++Me,Re=St.index+St[0].length;else break}return{line:Me,column:pe-Re}};V.tokenize=function(oe,pe){L=String(oe),U=L.length,q(pe),hu();var Me={};function Re(St){return Ne=ie,os(St),Me.start=te,Me.end=ie,Me.startLoc=se,Me.endLoc=he,Me.type=ne,Me.value=ce,Me}return Re.jumpTo=function(St,kt){if(X=St,H.locations){ve=1,ye=In.lastIndex=0;for(var jt;(jt=In.exec(L))&&jt.index<St;)++ve,ye=jt.index+jt[0].length}fe=kt,mi()},Re};var X,te,ie,se,he,ne,ce,fe,ve,ye,Ee,Ne,We,$e,it,je;function De(oe,pe){var Me=Q(L,oe);pe+=" ("+Me.line+":"+Me.column+")";var Re=new SyntaxError(pe);throw Re.pos=oe,Re.loc=Me,Re.raisedAt=X,Re}var et=[],at={type:"num"},st={type:"regexp"},xt={type:"string"},vt={type:"name"},ot={type:"eof"},Lt={keyword:"break"},bt={keyword:"case",beforeExpr:!0},pn={keyword:"catch"},sn={keyword:"continue"},Sn={keyword:"debugger"},ln={keyword:"default"},qe={keyword:"do",isLoop:!0},Ht={keyword:"else",beforeExpr:!0},an={keyword:"finally"},qt={keyword:"for",isLoop:!0},er={keyword:"function"},Nr={keyword:"if"},hr={keyword:"return",beforeExpr:!0},Wn={keyword:"switch"},Cn={keyword:"throw",beforeExpr:!0},On={keyword:"try"},tr={keyword:"var"},vn={keyword:"while",isLoop:!0},Nn={keyword:"with"},Es={keyword:"new",beforeExpr:!0},Os={keyword:"this"},Ps={keyword:"null",atomValue:null},Fi={keyword:"true",atomValue:!0},qa={keyword:"false",atomValue:!1},Ni={keyword:"in",binop:7,beforeExpr:!0},Vt={break:Lt,case:bt,catch:pn,continue:sn,debugger:Sn,default:ln,do:qe,else:Ht,finally:an,for:qt,function:er,if:Nr,return:hr,switch:Wn,throw:Cn,try:On,var:tr,while:vn,with:Nn,null:Ps,true:Fi,false:qa,new:Es,in:Ni,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Os,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Bi={type:"[",beforeExpr:!0},zi={type:"]"},Br={type:"{",beforeExpr:!0},fr={type:"}"},Pt={type:"(",beforeExpr:!0},nr={type:")"},rr={type:",",beforeExpr:!0},Un={type:";",beforeExpr:!0},Hn={type:":",beforeExpr:!0},Sr={type:"."},Cr={type:"?",beforeExpr:!0},di={binop:10,beforeExpr:!0},c={isAssign:!0,beforeExpr:!0},x={isAssign:!0,beforeExpr:!0},D={postfix:!0,prefix:!0,isUpdate:!0},Y={prefix:!0,beforeExpr:!0},re={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},Oe={binop:3,beforeExpr:!0},Ye={binop:4,beforeExpr:!0},nt={binop:5,beforeExpr:!0},Ot={binop:6,beforeExpr:!0},It={binop:7,beforeExpr:!0},Kt={binop:8,beforeExpr:!0},cn={binop:9,prefix:!0,beforeExpr:!0},Kr={binop:10,beforeExpr:!0};V.tokTypes={bracketL:Bi,bracketR:zi,braceL:Br,braceR:fr,parenL:Pt,parenR:nr,comma:rr,semi:Un,colon:Hn,dot:Sr,question:Cr,slash:di,eq:c,name:vt,eof:ot,num:at,regexp:st,string:xt};for(var pi in Vt)V.tokTypes["_"+pi]=Vt[pi];function Zr(oe){oe=oe.split(" ");var pe="",Me=[];e:for(var Re=0;Re<oe.length;++Re){for(var St=0;St<Me.length;++St)if(Me[St][0].length==oe[Re].length){Me[St].push(oe[Re]);continue e}Me.push([oe[Re]])}function kt(Zt){if(Zt.length==1)return pe+="return str === "+JSON.stringify(Zt[0])+";";pe+="switch(str){";for(var Yn=0;Yn<Zt.length;++Yn)pe+="case "+JSON.stringify(Zt[Yn])+":";pe+="return true}return false;"}if(Me.length>3){Me.sort(function(Zt,Yn){return Yn.length-Zt.length}),pe+="switch(str.length){";for(var Re=0;Re<Me.length;++Re){var jt=Me[Re];pe+="case "+jt[0].length+":",kt(jt)}pe+="}"}else kt(oe);return new Function("str",pe)}var Qr=Zr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),zr=Zr("class enum extends super const export import"),Ka=Zr("implements interface let package private protected public static yield"),ua=Zr("eval arguments"),Vi=Zr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Uo=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ca="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",cu="------------------------------------------------------------------------------------------------------------------------------------------",ha=new RegExp("["+ca+"]"),Za=new RegExp("["+ca+cu+"]"),fa=/[\n\r\u2028\u2029]/,In=/\r\n|[\n\r\u2028\u2029]/g,gi=V.isIdentifierStart=function(oe){return oe<65?oe===36:oe<91?!0:oe<97?oe===95:oe<123?!0:oe>=170&&ha.test(String.fromCharCode(oe))},Qa=V.isIdentifierChar=function(oe){return oe<48?oe===36:oe<58?!0:oe<65?!1:oe<91?!0:oe<97?oe===95:oe<123?!0:oe>=170&&Za.test(String.fromCharCode(oe))};function Vr(){this.line=ve,this.column=X-ye}function hu(){ve=1,X=ye=0,fe=!0,mi()}function kn(oe,pe){ie=X,H.locations&&(he=new Vr),ne=oe,mi(),ce=pe,fe=oe.beforeExpr}function Ho(){var oe=H.onComment&&H.locations&&new Vr,pe=X,Me=L.indexOf("*/",X+=2);if(Me===-1&&De(X-2,"Unterminated comment"),X=Me+2,H.locations){In.lastIndex=pe;for(var Re;(Re=In.exec(L))&&Re.index<X;)++ve,ye=Re.index+Re[0].length}H.onComment&&H.onComment(!0,L.slice(pe+2,Me),pe,X,oe,H.locations&&new Vr)}function as(){for(var oe=X,pe=H.onComment&&H.locations&&new Vr,Me=L.charCodeAt(X+=2);X<U&&Me!==10&&Me!==13&&Me!==8232&&Me!==8233;)++X,Me=L.charCodeAt(X);H.onComment&&H.onComment(!1,L.slice(oe+2,X),oe,X,pe,H.locations&&new Vr)}function mi(){for(;X<U;){var oe=L.charCodeAt(X);if(oe===32)++X;else if(oe===13){++X;var pe=L.charCodeAt(X);pe===10&&++X,H.locations&&(++ve,ye=X)}else if(oe===10||oe===8232||oe===8233)++X,H.locations&&(++ve,ye=X);else if(oe>8&&oe<14)++X;else if(oe===47){var pe=L.charCodeAt(X+1);if(pe===42)Ho();else if(pe===47)as();else break}else if(oe===160)++X;else if(oe>=5760&&Uo.test(String.fromCharCode(oe)))++X;else break}}function fu(){var oe=L.charCodeAt(X+1);return oe>=48&&oe<=57?pu(!0):(++X,kn(Sr))}function vh(){var oe=L.charCodeAt(X+1);return fe?(++X,du()):oe===61?Pn(x,2):Pn(di,1)}function _h(){var oe=L.charCodeAt(X+1);return oe===61?Pn(x,2):Pn(Kr,1)}function yh(oe){var pe=L.charCodeAt(X+1);return pe===oe?Pn(oe===124?re:be,2):pe===61?Pn(x,2):Pn(oe===124?Oe:nt,1)}function Xo(){var oe=L.charCodeAt(X+1);return oe===61?Pn(x,2):Pn(Ye,1)}function xh(oe){var pe=L.charCodeAt(X+1);return pe===oe?pe==45&&L.charCodeAt(X+2)==62&&fa.test(L.slice(Ne,X))?(X+=3,as(),mi(),os()):Pn(D,2):pe===61?Pn(x,2):Pn(cn,1)}function wh(oe){var pe=L.charCodeAt(X+1),Me=1;return pe===oe?(Me=oe===62&&L.charCodeAt(X+2)===62?3:2,L.charCodeAt(X+Me)===61?Pn(x,Me+1):Pn(Kt,Me)):pe==33&&oe==60&&L.charCodeAt(X+2)==45&&L.charCodeAt(X+3)==45?(X+=4,as(),mi(),os()):(pe===61&&(Me=L.charCodeAt(X+2)===61?3:2),Pn(It,Me))}function bh(oe){var pe=L.charCodeAt(X+1);return pe===61?Pn(Ot,L.charCodeAt(X+2)===61?3:2):Pn(oe===61?c:Y,1)}function Sh(oe){switch(oe){case 46:return fu();case 40:return++X,kn(Pt);case 41:return++X,kn(nr);case 59:return++X,kn(Un);case 44:return++X,kn(rr);case 91:return++X,kn(Bi);case 93:return++X,kn(zi);case 123:return++X,kn(Br);case 125:return++X,kn(fr);case 58:return++X,kn(Hn);case 63:return++X,kn(Cr);case 48:var pe=L.charCodeAt(X+1);if(pe===120||pe===88)return Ch();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return pu(!1);case 34:case 39:return Yo(oe);case 47:return vh();case 37:case 42:return _h();case 124:case 38:return yh(oe);case 94:return Xo();case 43:case 45:return xh(oe);case 60:case 62:return wh(oe);case 61:case 33:return bh(oe);case 126:return Pn(Y,1)}return!1}function os(oe){if(oe?X=te+1:te=X,H.locations&&(se=new Vr),oe)return du();if(X>=U)return kn(ot);var pe=L.charCodeAt(X);if(gi(pe)||pe===92)return Go();var Me=Sh(pe);if(Me===!1){var Re=String.fromCharCode(pe);if(Re==="\\"||ha.test(Re))return Go();De(X,"Unexpected character '"+Re+"'")}return Me}function Pn(oe,pe){var Me=L.slice(X,X+pe);X+=pe,kn(oe,Me)}function du(){for(var St="",oe,pe,Me=X;;){X>=U&&De(Me,"Unterminated regular expression");var Re=L.charAt(X);if(fa.test(Re)&&De(Me,"Unterminated regular expression"),oe)oe=!1;else{if(Re==="[")pe=!0;else if(Re==="]"&&pe)pe=!1;else if(Re==="/"&&!pe)break;oe=Re==="\\"}++X}var St=L.slice(Me,X);++X;var kt=gu();kt&&!/^[gmsiy]*$/.test(kt)&&De(Me,"Invalid regexp flag");try{var jt=new RegExp(St,kt)}catch(Zt){Zt instanceof SyntaxError&&De(Me,Zt.message),De(Zt)}return kn(st,jt)}function da(oe,pe){for(var Me=X,Re=0,St=0,kt=pe??1/0;St<kt;++St){var jt=L.charCodeAt(X),Zt;if(jt>=97?Zt=jt-97+10:jt>=65?Zt=jt-65+10:jt>=48&&jt<=57?Zt=jt-48:Zt=1/0,Zt>=oe)break;++X,Re=Re*oe+Zt}return X===Me||pe!=null&&X-Me!==pe?null:Re}function Ch(){X+=2;var oe=da(16);return oe==null&&De(te+2,"Expected hexadecimal number"),gi(L.charCodeAt(X))&&De(X,"Identifier directly after number"),kn(at,oe)}function pu(oe){var pe=X,Me=!1,Re=L.charCodeAt(X)===48;!oe&&da(10)===null&&De(pe,"Invalid number"),L.charCodeAt(X)===46&&(++X,da(10),Me=!0);var St=L.charCodeAt(X);(St===69||St===101)&&(St=L.charCodeAt(++X),(St===43||St===45)&&++X,da(10)===null&&De(pe,"Invalid number"),Me=!0),gi(L.charCodeAt(X))&&De(X,"Identifier directly after number");var kt=L.slice(pe,X),jt;return Me?jt=parseFloat(kt):!Re||kt.length===1?jt=parseInt(kt,10):/[89]/.test(kt)||je?De(pe,"Invalid number"):jt=parseInt(kt,8),kn(at,jt)}function Yo(oe){X++;for(var pe="";;){X>=U&&De(te,"Unterminated string constant");var Me=L.charCodeAt(X);if(Me===oe)return++X,kn(xt,pe);if(Me===92){Me=L.charCodeAt(++X);var Re=/^[0-7]+/.exec(L.slice(X,X+3));for(Re&&(Re=Re[0]);Re&&parseInt(Re,8)>255;)Re=Re.slice(0,-1);if(Re==="0"&&(Re=null),++X,Re)je&&De(X-2,"Octal literal in strict mode"),pe+=String.fromCharCode(parseInt(Re,8)),X+=Re.length-1;else switch(Me){case 110:pe+=`
`;break;case 114:pe+="\r";break;case 120:pe+=String.fromCharCode(Ja(2));break;case 117:pe+=String.fromCharCode(Ja(4));break;case 85:pe+=String.fromCharCode(Ja(8));break;case 116:pe+="	";break;case 98:pe+="\b";break;case 118:pe+="\v";break;case 102:pe+="\f";break;case 48:pe+="\0";break;case 13:L.charCodeAt(X)===10&&++X;case 10:H.locations&&(ye=X,++ve);break;default:pe+=String.fromCharCode(Me);break}}else(Me===13||Me===10||Me===8232||Me===8233)&&De(te,"Unterminated string constant"),pe+=String.fromCharCode(Me),++X}}function Ja(oe){var pe=da(16,oe);return pe===null&&De(te,"Bad character escape sequence"),pe}var As;function gu(){As=!1;for(var oe,pe=!0,Me=X;;){var Re=L.charCodeAt(X);if(Qa(Re))As&&(oe+=L.charAt(X)),++X;else if(Re===92){As||(oe=L.slice(Me,X)),As=!0,L.charCodeAt(++X)!=117&&De(X,"Expecting Unicode escape sequence \\uXXXX"),++X;var St=Ja(4),kt=String.fromCharCode(St);kt||De(X-1,"Invalid Unicode escape"),(pe?gi(St):Qa(St))||De(X-4,"Invalid Unicode escape"),oe+=kt}else break;pe=!1}return As?oe:L.slice(Me,X)}function Go(){var oe=gu(),pe=vt;return!As&&Vi(oe)&&(pe=Vt[oe]),kn(pe,oe)}function Xt(){Ee=te,Ne=ie,We=he,os()}function qo(oe){if(je=oe,X=te,H.locations)for(;X<ye;)ye=L.lastIndexOf(`
`,ye-2)+1,--ve;mi(),os()}function mu(){this.type=null,this.start=te,this.end=null}function vu(){this.start=se,this.end=null,A!==null&&(this.source=A)}function Bn(){var oe=new mu;return H.locations&&(oe.loc=new vu),H.directSourceFile&&(oe.sourceFile=H.directSourceFile),H.ranges&&(oe.range=[te,0]),oe}function Wi(oe){var pe=new mu;return pe.start=oe.start,H.locations&&(pe.loc=new vu,pe.loc.start=oe.loc.start),H.ranges&&(pe.range=[oe.range[0],0]),pe}function Nt(oe,pe){return oe.type=pe,oe.end=Ne,H.locations&&(oe.loc.end=We),H.ranges&&(oe.range[1]=Ne),oe}function pa(oe){return H.ecmaVersion>=5&&oe.type==="ExpressionStatement"&&oe.expression.type==="Literal"&&oe.expression.value==="use strict"}function rn(oe){if(ne===oe)return Xt(),!0}function $a(){return!H.strictSemicolons&&(ne===ot||ne===fr||fa.test(L.slice(Ne,te)))}function Ui(){!rn(Un)&&!$a()&&Jr()}function _n(oe){ne===oe?Xt():Jr()}function Jr(){De(te,"Unexpected token")}function ga(oe){oe.type!=="Identifier"&&oe.type!=="MemberExpression"&&De(oe.start,"Assigning to rvalue"),je&&oe.type==="Identifier"&&ua(oe.name)&&De(oe.start,"Assigning to "+oe.name+" in strict mode")}function _u(oe){Ee=Ne=X,H.locations&&(We=new Vr),$e=je=null,it=[],os();var pe=oe||Bn(),Me=!0;for(oe||(pe.body=[]);ne!==ot;){var Re=Wr();pe.body.push(Re),Me&&pa(Re)&&qo(!0),Me=!1}return Nt(pe,"Program")}var Hi={kind:"loop"},kh={kind:"switch"};function Wr(){(ne===di||ne===x&&ce=="/=")&&os(!0);var oe=ne,pe=Bn();switch(oe){case Lt:case sn:Xt();var Me=oe===Lt;rn(Un)||$a()?pe.label=null:ne!==vt?Jr():(pe.label=jn(),Ui());for(var Re=0;Re<it.length;++Re){var St=it[Re];if((pe.label==null||St.name===pe.label.name)&&(St.kind!=null&&(Me||St.kind==="loop")||pe.label&&Me))break}return Re===it.length&&De(pe.start,"Unsyntactic "+oe.keyword),Nt(pe,Me?"BreakStatement":"ContinueStatement");case Sn:return Xt(),Ui(),Nt(pe,"DebuggerStatement");case qe:return Xt(),it.push(Hi),pe.body=Wr(),it.pop(),_n(vn),pe.test=ma(),Ui(),Nt(pe,"DoWhileStatement");case qt:if(Xt(),it.push(Hi),_n(Pt),ne===Un)return eo(pe,null);if(ne===tr){var kt=Bn();return Xt(),js(kt,!0),Nt(kt,"VariableDeclaration"),kt.declarations.length===1&&rn(Ni)?Is(pe,kt):eo(pe,kt)}var kt=Xn(!1,!0);return rn(Ni)?(ga(kt),Is(pe,kt)):eo(pe,kt);case er:return Xt(),Ko(pe,!0);case Nr:return Xt(),pe.test=ma(),pe.consequent=Wr(),pe.alternate=rn(Ht)?Wr():null,Nt(pe,"IfStatement");case hr:return!$e&&!H.allowReturnOutsideFunction&&De(te,"'return' outside of function"),Xt(),rn(Un)||$a()?pe.argument=null:(pe.argument=Xn(),Ui()),Nt(pe,"ReturnStatement");case Wn:Xt(),pe.discriminant=ma(),pe.cases=[],_n(Br),it.push(kh);for(var jt,Zt;ne!=fr;)if(ne===bt||ne===ln){var Yn=ne===bt;jt&&Nt(jt,"SwitchCase"),pe.cases.push(jt=Bn()),jt.consequent=[],Xt(),Yn?jt.test=Xn():(Zt&&De(Ee,"Multiple default clauses"),Zt=!0,jt.test=null),_n(Hn)}else jt||Jr(),jt.consequent.push(Wr());return jt&&Nt(jt,"SwitchCase"),Xt(),it.pop(),Nt(pe,"SwitchStatement");case Cn:return Xt(),fa.test(L.slice(Ne,te))&&De(Ne,"Illegal newline after throw"),pe.argument=Xn(),Ui(),Nt(pe,"ThrowStatement");case On:if(Xt(),pe.block=Ms(),pe.handler=null,ne===pn){var vi=Bn();Xt(),_n(Pt),vi.param=jn(),je&&ua(vi.param.name)&&De(vi.param.start,"Binding "+vi.param.name+" in strict mode"),_n(nr),vi.guard=null,vi.body=Ms(),pe.handler=Nt(vi,"CatchClause")}return pe.guardedHandlers=et,pe.finalizer=rn(an)?Ms():null,!pe.handler&&!pe.finalizer&&De(pe.start,"Missing catch or finally clause"),Nt(pe,"TryStatement");case tr:return Xt(),js(pe),Ui(),Nt(pe,"VariableDeclaration");case vn:return Xt(),pe.test=ma(),it.push(Hi),pe.body=Wr(),it.pop(),Nt(pe,"WhileStatement");case Nn:return je&&De(te,"'with' in strict mode"),Xt(),pe.object=ma(),pe.body=Wr(),Nt(pe,"WithStatement");case Br:return Ms();case Un:return Xt(),Nt(pe,"EmptyStatement");default:var ls=ce,Rs=Xn();if(oe===vt&&Rs.type==="Identifier"&&rn(Hn)){for(var Re=0;Re<it.length;++Re)it[Re].name===ls&&De(Rs.start,"Label '"+ls+"' is already declared");var bu=ne.isLoop?"loop":ne===Wn?"switch":null;return it.push({name:ls,kind:bu}),pe.body=Wr(),it.pop(),pe.label=Rs,Nt(pe,"LabeledStatement")}else return pe.expression=Rs,Ui(),Nt(pe,"ExpressionStatement")}}function ma(){_n(Pt);var oe=Xn();return _n(nr),oe}function Ms(oe){var pe=Bn(),Me=!0,Re=!1,St;for(pe.body=[],_n(Br);!rn(fr);){var kt=Wr();pe.body.push(kt),Me&&oe&&pa(kt)&&(St=Re,qo(Re=!0)),Me=!1}return Re&&!St&&qo(!1),Nt(pe,"BlockStatement")}function eo(oe,pe){return oe.init=pe,_n(Un),oe.test=ne===Un?null:Xn(),_n(Un),oe.update=ne===nr?null:Xn(),_n(nr),oe.body=Wr(),it.pop(),Nt(oe,"ForStatement")}function Is(oe,pe){return oe.left=pe,oe.right=Xn(),_n(nr),oe.body=Wr(),it.pop(),Nt(oe,"ForInStatement")}function js(oe,pe){for(oe.declarations=[],oe.kind="var";;){var Me=Bn();if(Me.id=jn(),je&&ua(Me.id.name)&&De(Me.id.start,"Binding "+Me.id.name+" in strict mode"),Me.init=rn(c)?Xn(!0,pe):null,oe.declarations.push(Nt(Me,"VariableDeclarator")),!rn(rr))break}return oe}function Xn(oe,pe){var Me=Ls(pe);if(!oe&&ne===rr){var Re=Wi(Me);for(Re.expressions=[Me];rn(rr);)Re.expressions.push(Ls(pe));return Nt(Re,"SequenceExpression")}return Me}function Ls(oe){var pe=Th(oe);if(ne.isAssign){var Me=Wi(pe);return Me.operator=ce,Me.left=pe,Xt(),Me.right=Ls(oe),ga(pe),Nt(Me,"AssignmentExpression")}return pe}function Th(oe){var pe=yu(oe);if(rn(Cr)){var Me=Wi(pe);return Me.test=pe,Me.consequent=Xn(!0),_n(Hn),Me.alternate=Xn(!0,oe),Nt(Me,"ConditionalExpression")}return pe}function yu(oe){return va(_a(),-1,oe)}function va(oe,pe,Me){var Re=ne.binop;if(Re!=null&&(!Me||ne!==Ni)&&Re>pe){var St=Wi(oe);St.left=oe,St.operator=ce;var kt=ne;Xt(),St.right=va(_a(),Re,Me);var jt=Nt(St,kt===re||kt===be?"LogicalExpression":"BinaryExpression");return va(jt,pe,Me)}return oe}function _a(){if(ne.prefix){var oe=Bn(),pe=ne.isUpdate;return oe.operator=ce,oe.prefix=!0,fe=!0,Xt(),oe.argument=_a(),pe?ga(oe.argument):je&&oe.operator==="delete"&&oe.argument.type==="Identifier"&&De(oe.start,"Deleting local variable in strict mode"),Nt(oe,pe?"UpdateExpression":"UnaryExpression")}for(var Me=xu();ne.postfix&&!$a();){var oe=Wi(Me);oe.operator=ce,oe.prefix=!1,oe.argument=Me,ga(Me),Xt(),Me=Nt(oe,"UpdateExpression")}return Me}function xu(){return Ds(to())}function Ds(oe,pe){if(rn(Sr)){var Me=Wi(oe);return Me.object=oe,Me.property=jn(!0),Me.computed=!1,Ds(Nt(Me,"MemberExpression"),pe)}else if(rn(Bi)){var Me=Wi(oe);return Me.object=oe,Me.property=Xn(),Me.computed=!0,_n(zi),Ds(Nt(Me,"MemberExpression"),pe)}else if(!pe&&rn(Pt)){var Me=Wi(oe);return Me.callee=oe,Me.arguments=Zo(nr,!1),Ds(Nt(Me,"CallExpression"),pe)}else return oe}function to(){switch(ne){case Os:var Re=Bn();return Xt(),Nt(Re,"ThisExpression");case vt:return jn();case at:case xt:case st:var Re=Bn();return Re.value=ce,Re.raw=L.slice(te,ie),Xt(),Nt(Re,"Literal");case Ps:case Fi:case qa:var Re=Bn();return Re.value=ne.atomValue,Re.raw=ne.keyword,Xt(),Nt(Re,"Literal");case Pt:var oe=se,pe=te;Xt();var Me=Xn();return Me.start=pe,Me.end=ie,H.locations&&(Me.loc.start=oe,Me.loc.end=he),H.ranges&&(Me.range=[pe,ie]),_n(nr),Me;case Bi:var Re=Bn();return Xt(),Re.elements=Zo(zi,!0,!0),Nt(Re,"ArrayExpression");case Br:return Oh();case er:var Re=Bn();return Xt(),Ko(Re,!1);case Es:return Eh();default:Jr()}}function Eh(){var oe=Bn();return Xt(),oe.callee=Ds(to(),!0),rn(Pt)?oe.arguments=Zo(nr,!1):oe.arguments=et,Nt(oe,"NewExpression")}function Oh(){var oe=Bn(),pe=!0,Me=!1;for(oe.properties=[],Xt();!rn(fr);){if(pe)pe=!1;else if(_n(rr),H.allowTrailingCommas&&rn(fr))break;var Re={key:wu()},St=!1,kt;if(rn(Hn)?(Re.value=Xn(!0),kt=Re.kind="init"):H.ecmaVersion>=5&&Re.key.type==="Identifier"&&(Re.key.name==="get"||Re.key.name==="set")?(St=Me=!0,kt=Re.kind=Re.key.name,Re.key=wu(),ne!==Pt&&Jr(),Re.value=Ko(Bn(),!1)):Jr(),Re.key.type==="Identifier"&&(je||Me))for(var jt=0;jt<oe.properties.length;++jt){var Zt=oe.properties[jt];if(Zt.key.name===Re.key.name){var Yn=kt==Zt.kind||St&&Zt.kind==="init"||kt==="init"&&(Zt.kind==="get"||Zt.kind==="set");Yn&&!je&&kt==="init"&&Zt.kind==="init"&&(Yn=!1),Yn&&De(Re.key.start,"Redefinition of property")}}oe.properties.push(Re)}return Nt(oe,"ObjectExpression")}function wu(){return ne===at||ne===xt?to():jn(!0)}function Ko(oe,pe){ne===vt?oe.id=jn():pe?Jr():oe.id=null,oe.params=[];var Me=!0;for(_n(Pt);!rn(nr);)Me?Me=!1:_n(rr),oe.params.push(jn());var Re=$e,St=it;if($e=!0,it=[],oe.body=Ms(!0),$e=Re,it=St,je||oe.body.body.length&&pa(oe.body.body[0]))for(var kt=oe.id?-1:0;kt<oe.params.length;++kt){var jt=kt<0?oe.id:oe.params[kt];if((Ka(jt.name)||ua(jt.name))&&De(jt.start,"Defining '"+jt.name+"' in strict mode"),kt>=0)for(var Zt=0;Zt<kt;++Zt)jt.name===oe.params[Zt].name&&De(jt.start,"Argument name clash in strict mode")}return Nt(oe,pe?"FunctionDeclaration":"FunctionExpression")}function Zo(oe,pe,Me){for(var Re=[],St=!0;!rn(oe);){if(St)St=!1;else if(_n(rr),pe&&H.allowTrailingCommas&&rn(oe))break;Me&&ne===rr?Re.push(null):Re.push(Xn(!0))}return Re}function jn(oe){var pe=Bn();return oe&&H.forbidReserved=="everywhere"&&(oe=!1),ne===vt?(!oe&&(H.forbidReserved&&(H.ecmaVersion===3?Qr:zr)(ce)||je&&Ka(ce))&&L.slice(te,ie).indexOf("\\")==-1&&De(te,"The keyword '"+ce+"' is reserved"),pe.name=ce):oe&&ne.keyword?pe.name=ne.keyword:Jr(),fe=!1,Xt(),Nt(pe,"Identifier")}}),u.version||(u=null)}function m(V,H){return(r.acorn||u).parse(V,H)}var w={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},S={"-":"__negate","+":"__self"},C=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(V){this["__"+V]="#"+V},{__self:function(){return this}});E.inject(C),N.inject(C),pt.inject(C);function T(V,H,L){var U=w[H];if(V&&V[U]){var A=V[U](L);return H==="!="?!A:A}switch(H){case"+":return V+L;case"-":return V-L;case"*":return V*L;case"/":return V/L;case"%":return V%L;case"==":return V==L;case"!=":return V!=L}}function P(V,H){var L=S[V];if(H&&H[L])return H[L]();switch(V){case"+":return+H;case"-":return-H}}function R(V,H){if(!V)return"";H=H||{};var L=[];function U(je){for(var De=0,et=L.length;De<et;De++){var at=L[De];if(at[0]>=je)break;je+=at[1]}return je}function A(je){return V.substring(U(je.range[0]),U(je.range[1]))}function W(je,De){return V.substring(U(je.range[1]),U(De.range[0]))}function q(je,De){for(var et=U(je.range[0]),at=U(je.range[1]),st=0,xt=L.length-1;xt>=0;xt--)if(et>L[xt][0]){st=xt+1;break}L.splice(st,0,[et,De.length-at+et]),V=V.substring(0,et)+De+V.substring(at)}function Q(je,De){switch(je.type){case"UnaryExpression":if(je.operator in S&&je.argument.type!=="Literal"){var et=A(je.argument);q(je,'$__("'+je.operator+'", '+et+")")}break;case"BinaryExpression":if(je.operator in w&&je.left.type!=="Literal"){var at=A(je.left),st=A(je.right),xt=W(je.left,je.right),vt=je.operator;q(je,"__$__("+at+","+xt.replace(new RegExp("\\"+vt),'"'+vt+'"')+", "+st+")")}break;case"UpdateExpression":case"AssignmentExpression":var ot=De&&De.type;if(!(ot==="ForStatement"||ot==="BinaryExpression"&&/^[=!<>]/.test(De.operator)||ot==="MemberExpression"&&De.computed)){if(je.type==="UpdateExpression"){var et=A(je.argument),Lt="__$__("+et+', "'+je.operator[0]+'", 1)',bt=et+" = "+Lt;je.prefix?bt="("+bt+")":(ot==="AssignmentExpression"||ot==="VariableDeclarator"||ot==="BinaryExpression")&&(A(De.left||De.id)===et&&(bt=Lt),bt=et+"; "+bt),q(je,bt)}else if(/^.=$/.test(je.operator)&&je.left.type!=="Literal"){var at=A(je.left),st=A(je.right),Lt=at+" = __$__("+at+', "'+je.operator[0]+'", '+st+")";q(je,/^\(.*\)$/.test(A(je))?"("+Lt+")":Lt)}}break}}function X(je){switch(je.type){case"ExportDefaultDeclaration":q({range:[je.start,je.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var De=je.declaration,et=je.specifiers;if(De){var at=De.declarations;at&&(at.forEach(function(xt){q(xt,"module.exports."+A(xt))}),q({range:[je.start,De.start+De.kind.length]},""))}else if(et){var st=et.map(function(xt){var vt=A(xt);return"module.exports."+vt+" = "+vt+"; "}).join("");st&&q(je,st)}break}}function te(je,De,et){if(je){for(var at in je)if(at!=="range"&&at!=="loc"){var st=je[at];if(Array.isArray(st))for(var xt=0,vt=st.length;xt<vt;xt++)te(st[xt],je,et);else st&&typeof st=="object"&&te(st,je,et)}et.operatorOverloading!==!1&&Q(je,De),et.moduleExports!==!1&&X(je)}}function ie(je){var De="",et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(je=(Math.abs(je)<<1)+(je<0?1:0);je||!De;){var at=je&31;je>>=5,je&&(at|=32),De+=et[at]}return De}var se=H.url||"",he=H.sourceMaps,ne=H.paperFeatures||{},ce=H.source||V,fe=H.offset||0,ve=Ft.agent,ye=ve.versionNumber,Ee=!1,Ne=/\r\n|\n|\r/mg,We;if(he&&(ve.chrome&&ye>=30||ve.webkit&&ye>=537.76||ve.firefox&&ye>=23||ve.node)){if(ve.node)fe-=2;else if(n&&se&&!n.location.href.indexOf(se)){var $e=s.getElementsByTagName("html")[0].innerHTML;fe=$e.substr(0,$e.indexOf(V)+1).match(Ne).length+1}Ee=fe>0&&!(ve.chrome&&ye>=36||ve.safari&&ye>=600||ve.firefox&&ye>=40||ve.node);var it=["AA"+ie(Ee?0:fe)+"A"];it.length=(V.match(Ne)||[]).length+1+(Ee?fe:0),We={version:3,file:se,names:[],mappings:it.join(";AACA"),sourceRoot:"",sources:[se],sourcesContent:[ce]}}return(ne.operatorOverloading!==!1||ne.moduleExports!==!1)&&te(m(V,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,ne),We&&(Ee&&(V=new Array(fe+1).join(`
`)+V),/^(inline|both)$/.test(he)&&(V+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(We))))),V+=`
//# sourceURL=`+(se||"paperscript")),{url:se,source:ce,code:V,map:We}}function B(V,H,L){Ft=H;var U=H.getView(),A=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(V)&&!/\bnew\s+Tool\b/.test(V)?new Di:null,W=A?A._events:[],q=["onFrame","onResize"].concat(W),Q=[],X=[],te,ie=typeof V=="object"?V:R(V,L);V=ie.code;function se(ye,Ee){for(var Ne in ye)(Ee||!/^_/.test(Ne))&&new RegExp("([\\b\\s\\W]|^)"+Ne.replace(/\$/g,"\\$")+"\\b").test(V)&&(Q.push(Ne),X.push(ye[Ne]))}se({__$__:T,$__:P,paper:H,tool:A},!0),se(H),V="var module = { exports: {} }; "+V;var fe=a.each(q,function(ye){new RegExp("\\s+"+ye+"\\b").test(V)&&(Q.push(ye),this.push("module.exports."+ye+" = "+ye+";"))},[]).join(`
`);fe&&(V+=`
`+fe),V+=`
return module.exports;`;var he=Ft.agent;if(s&&(he.chrome||he.firefox&&he.versionNumber<40)){var ne=s.createElement("script"),ce=s.head||s.getElementsByTagName("head")[0];he.firefox&&(V=`
`+V),ne.appendChild(s.createTextNode("document.__paperscript__ = function("+Q+") {"+V+`
}`)),ce.appendChild(ne),te=s.__paperscript__,delete s.__paperscript__,ce.removeChild(ne)}else te=Function(Q,V);var fe=te&&te.apply(H,X),ve=fe||{};return a.each(W,function(ye){var Ee=ve[ye];Ee&&(A[ye]=Ee)}),U&&(ve.onResize&&U.setOnResize(ve.onResize),U.emit("resize",{size:U.size,delta:new E}),ve.onFrame&&U.setOnFrame(ve.onFrame),U.requestUpdate()),fe}function j(V){if(/^text\/(?:x-|)paperscript$/.test(V.type)&&p.getAttribute(V,"ignore")!=="true"){var H=p.getAttribute(V,"canvas"),L=s.getElementById(H),U=V.src||V.getAttribute("data-src"),A=p.hasAttribute(V,"async"),W="data-paper-scope";if(!L)throw new Error('Unable to find canvas with id "'+H+'"');var q=p.get(L.getAttribute(W))||new p().setup(L);return L.setAttribute(W,q._id),U?qr.request({url:U,async:A,mimeType:"text/plain",onLoad:function(Q){B(Q,q,U)}}):B(V.innerHTML,q,V.baseURI),V.setAttribute("data-paper-ignore","true"),q}}function I(){a.each(s&&s.getElementsByTagName("script"),j)}function G(V){return V?j(V):I()}return n&&(s.readyState==="complete"?setTimeout(I):At.add(n,{load:I})),{compile:R,execute:B,load:G,parse:m,calculateBinary:T,calculateUnary:P}}).call(this);var Ft=new(p.inject(a.exports,{Base:a,Numerical:O,Key:Li,DomEvent:At,DomElement:yt,document:s,window:n,Symbol:Ke,PlacedSymbol:Ie}));return Ft.agent.node&&_m(Ft),typeof t=="function"&&t.amd?t("paper",Ft):l&&(l.exports=Ft),Ft}).call(Q2,typeof self=="object"?self:null)})(Lc)),Lc.exports}var $2=J2();const wm=Om($2);function bm(l){const[,e,t]=l.split("-");return H_[e]?.[t]}function eS(l){const e=document.createElement("canvas").getContext("2d");return e?(e.fillStyle="#000",e.fillStyle=l,e.fillStyle||null):null}let xl=null;const tS={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},Sm={union:"unite",subtract:"subtract",intersect:"intersect",exclude:"exclude"};function nS(l){const e=l*Math.PI/180;return{x1:.5-Math.cos(e)/2,y1:.5-Math.sin(e)/2,x2:.5+Math.cos(e)/2,y2:.5+Math.sin(e)/2}}function rS(l){if(l.type==="linear"){const{x1:e,y1:t,x2:n,y2:s}=nS(l.angle);return new Oi({type:"linear",gradientUnits:"objectBoundingBox",coords:{x1:e,y1:t,x2:n,y2:s},colorStops:l.stops})}return new Oi({type:"radial",gradientUnits:"objectBoundingBox",coords:{x1:.5,y1:.5,r1:0,x2:.5,y2:.5,r2:.5},colorStops:l.stops})}const iS=(l,e,t)=>({activePaint:"fill",fill:"#FFFFFF",stroke:"#000000",strokeWidth:1,strokeStyle:"solid",opacity:1,gradient:{type:"linear",angle:90,stops:[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}]},setGradient:n=>{l(s=>({gradient:{...s.gradient,...n}}))},applyFillGradient:()=>{const n=e().canvas,s=n?.getActiveObject();if(!n||!s)return;const a=rS(e().gradient);s.set("fill",a),n.requestRenderAll()},strokeStyleList:[{value:"solid",label:"Solid",dash:null,supported:!0},{value:"dashed",label:"Dashed",dash:[6,4],supported:!0},{value:"dotted",label:"Dotted",dash:[2,2],supported:!0},{value:"double",label:"Double",dash:null,supported:!1},{value:"groove",label:"Groove",dash:null,supported:!1},{value:"ridge",label:"Ridge",dash:null,supported:!1},{value:"inset",label:"Inset",dash:null,supported:!1},{value:"outset",label:"Outset",dash:null,supported:!1}],strokeStyleMap:{solid:{dashArray:null,lineCap:"butt"},dashed:{dashArray:[10,5],lineCap:"butt"},dotted:{dashArray:[2,5],lineCap:"round"},double:{dashArray:[1,3,1,3],lineCap:"butt"},groove:{dashArray:[4,2,1,2],lineCap:"butt"},ridge:{dashArray:[1,2,4,2],lineCap:"butt"},inset:{dashArray:[1,1],lineCap:"butt"},outset:{dashArray:[2,1],lineCap:"butt"}},setActivePaint:n=>l({activePaint:n}),setFill:n=>{const s=e().canvas;if(!s||typeof n=="string"&&n.startsWith("bg-")&&(n=bm(n),!n))return;s.getActiveObjects().forEach(h=>h.set({fill:n})),s.requestRenderAll(),l({fill:n})},setStroke:n=>{const s=e().canvas;if(!s)return;s.getActiveObjects().forEach(h=>h.set({stroke:n})),s.requestRenderAll(),l({stroke:n})},setStrokeWidthN:n=>{const s=e().canvas;if(!s)return;s.getActiveObjects().forEach(h=>h.set({strokeWidth:n})),s.requestRenderAll(),l({strokeWidth:n})},setStrokeStyle:n=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects(),h=e().strokeStyleMap[n]||e().strokeStyleMap.solid;a.forEach(p=>{p.set({strokeDashArray:h.dashArray,strokeLineCap:h.lineCap})}),s.requestRenderAll(),l({strokeStyle:n})},setOpacity1:n=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const h=n/100;a.set("opacity",h),s.requestRenderAll(),l({opacity:n})},setOpacity:n=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const h=Math.min(1,Math.max(.05,n));a.set("opacity",h),s.requestRenderAll(),l({opacity:h})},previewOpacity:n=>{const s=e().canvas?.getActiveObject();s&&(xl===null&&(xl=s.opacity??1),s.set("opacity",n/100),e().canvas?.requestRenderAll())},endOpacityPreview:()=>{const n=e().canvas?.getActiveObject();!n||xl===null||(n.set("opacity",xl),xl=null,e().canvas?.requestRenderAll())},handleColorChange:n=>{const s=e().canvas,a=e().geditor;if(!s)return;if(n.startsWith("bg-")){const v=bm(n);if(!v)return;n=v}const h=eS(n);if(!h)return;const p=s.getActiveObjects();if(a&&a.activeStop&&e().activePaint==="fill"){a.updateActiveColor(h),l({fill:h}),s.requestRenderAll();return}if(p.length===0){e().activePaint==="stroke"?l({stroke:h}):l({fill:h});return}p.forEach(v=>{if(e().activePaint==="stroke")v.set({stroke:h});else{if(v.fill instanceof Oi)return;v.set({fill:h})}}),e().activePaint==="stroke"?l({stroke:h}):l({fill:h}),s.requestRenderAll()},addShadow:n=>{const s=e().canvas,a=s?.getActiveObject();a&&(a.set("shadow",new wr(n)),s.requestRenderAll())},applyShadowPreset:n=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const h=tS[n];if(!h)return;const p=new wr({...h});a.set("shadow",p),s.requestRenderAll(),l({activeObjectShadow:p})},removeShadow:()=>{const n=e().canvas,s=n?.getActiveObject();s&&(s.set("shadow",null),n.requestRenderAll(),l({activeObjectShadow:null}))},toFabricPath(n){if(n.type==="path")return n;const a=n.toSVG().match(/d="([^"]+)"/);return a?new Qi(a[1],{fill:n.fill,stroke:n.stroke,strokeWidth:n.strokeWidth,scaleX:n.scaleX,scaleY:n.scaleY,angle:n.angle}):null},async boolMe(n){const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}const h=a.getObjects(),p=a.getBoundingRect(!0),v={x:p.left+p.width/2,y:p.top+p.height/2},y=h[0],b={fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth};s.discardActiveObject();const O=new wm.PaperScope;O.setup(new O.Size(5e3,5e3));let F=null;h.forEach((N,$)=>{const ee=O.project.importSVG(N.toSVG(),{expandShapes:!0,insert:!1}),ae=ee.children?.[0]??ee;ae.fill="black",ae.strokeColor=null,F=$===0?ae:F.unite(ae)});const Z=`
               <svg xmlns="http://www.w3.org/2000/svg">
                 ${F.exportSVG({asString:!0,bounds:"content",precision:3})}
               </svg>
             `;Ad(Z).then(({objects:N})=>{const $=N[0];$.set({...b,originX:"center",originY:"center",scaleX:1,scaleY:1,angle:0}),$.setPositionByOrigin(new Se(v.x,v.y),"center","center"),$.setCoords(),s.remove(...h),s.add($),s.setActiveObject($),s.requestRenderAll()})},_booleanSelected(n,s={}){},booleanOperation:async(n="union")=>{const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}if(!Sm[n]){console.error("Invalid boolean operation:",n);return}const h=a.getObjects();if(h.length<2)return;const p=a.getBoundingRect(!0),v={x:p.left+p.width/2,y:p.top+p.height/2},y=h[0],b=sS(y);s.discardActiveObject();const O=new wm.PaperScope;O.setup(new O.Size(5e3,5e3));let F=null;if(h.forEach((ee,ae)=>{const ue=O.project.importSVG(ee.toSVG(),{expandShapes:!0,insert:!1}),xe=oS(ue.children?.[0]??ue);ae===0?F=xe:F=F[Sm[n]](xe)}),!F||F.area<=0)return;const Z=`
           <svg xmlns="http://www.w3.org/2000/svg">
             ${F.exportSVG({asString:!0,bounds:"content",precision:3})}
           </svg>
         `,{objects:N}=await Ad(Z);if(!N||N.length===0)return;const $=N[0];$.set({...b,strokeUniform:!0,originX:"center",originY:"center",scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1}),$.setPositionByOrigin(new Se(v.x,v.y),"center","center"),$.setCoords(),aS(s,h),s.remove(...h),s.add($),s.setActiveObject($),s.requestRenderAll()},unionSelected(n){return e().booleanOperation("union",n)},intersectSelected(n){return e().booleanOperation("intersect",n)},subtractSelected(n){return e().booleanOperation("subtract",n)},excludeSelected(n){return e().booleanOperation("exclude",n)}});function sS(l){return{fill:l.fill,stroke:l.stroke,strokeWidth:l.strokeWidth,strokeDashArray:l.strokeDashArray,strokeLineCap:l.strokeLineCap,strokeLineJoin:l.strokeLineJoin,opacity:l.opacity}}function aS(l,e){const t=l.getObjects();return Math.max(...e.map(n=>t.indexOf(n)))}function oS(l){return l.strokeWidth&&(l.strokeColor=null,l.strokeWidth=0,l.fill="black",l.closed=!0),l}const lS=(l,e,t)=>({MAX_HISTORY:20,_isRestoring:!1,undoStack:[],redoStack:[],saveState:()=>{const{canvas:n,_isRestoring:s,undoStack:a}=e();if(!n||s)return;const h=JSON.stringify(n.toJSON()),p=[...a,h];l({undoStack:p,redoStack:[]})},undo:()=>{const{canvas:n,undoStack:s,redoStack:a}=e();if(!n||s.length<=1)return;const h=JSON.stringify(n.toJSON()),p=s[s.length-1],v=s.slice(0,-1);l({_isRestoring:!0}),n.loadFromJSON(p,()=>{l({undoStack:v,redoStack:[h,...a],_isRestoring:!1}),n.requestRenderAll()})},redo:()=>{const{canvas:n,undoStack:s,redoStack:a}=e();if(!n||a.length===0)return;const h=JSON.stringify(n.toJSON()),p=a[0],v=a.slice(1);l({_isRestoring:!0}),n.loadFromJSON(p,()=>{l({undoStack:[...s,h],redoStack:v,_isRestoring:!1}),n.requestRenderAll()})},clearHistory:()=>l({undoStack:[],redoStack:[]})});function uS(l,e,t){return e&&!t?-l:!e&&t?180-l:l}function wl(l){return Math.round(l??0)}const cS=(l,e,t)=>({transform:{x:0,y:0,width:100,height:100,rotation:0,flipX:!1,flipY:!1,originX:"center",centerY:"center",id:"c"},hasSelection:!1,_isSyncing:!1,updateFromFabric:n=>{if(!n){l({hasSelection:!1});return}if(e()._isSyncing)return;const s={x:wl(n.left),y:wl(n.top),width:wl(n.getScaledWidth?.()??(n.width||0)*(n.scaleX||1)),height:wl(n.getScaledHeight?.()??(n.height||0)*(n.scaleY||1)),rotation:wl(n.angle||0),flipX:n.scaleX<0,flipY:n.scaleY<0},a=e().transform;(a.x!==s.x||a.y!==s.y||a.width!==s.width||a.height!==s.height||a.rotation!==s.rotation||a.flipX!==s.flipX||a.flipY!==s.flipY)&&l({transform:s,hasSelection:!0})},updateFabricFromStore1:()=>{const{transform:n,canvas:s}=e(),a=s?.getActiveObject();if(!a)return;l({_isSyncing:!0}),a.set({originX:"center",originY:"center",objectCaching:!1});const h=a._originalWidth||a.width||1,p=a._originalHeight||a.height||1;a._originalWidth||(a._originalWidth=h,a._originalHeight=p);const v=n.width/h,y=n.height/p;a.set({angle:n.rotation||0,scaleX:n.flipX?-Math.abs(v):Math.abs(v),scaleY:n.flipY?-Math.abs(y):Math.abs(y)}),a.setPositionByOrigin(new Se(n.x,n.y),"center","center"),a.setCoords(),s.requestRenderAll(),l({_isSyncing:!1})},updateFabricFromStore:()=>{const{transform:n,canvas:s}=e(),a=s?.getActiveObject();if(!a||e()._isSyncing)return;l({_isSyncing:!0});const h=Number(n.x)||0,p=Number(n.y)||0,v=Math.max(1,Number(n.width)||1),y=Math.max(1,Number(n.height)||1),b=Number(n.rotation)||0,O=!!n.flipX,F=!!n.flipY,E=uS(b,O,F);a.set({left:h,top:p,width:v,height:y,angle:E,flipX:O,flipY:F}),a.setCoords(),s.requestRenderAll(),l({_isSyncing:!1})},updateFabricFromStore11:()=>{const{transform:n,canvas:s}=e(),a=s?.getActiveObject();if(!a||e()._isSyncing)return;l({_isSyncing:!0});const h=Number(n.x)||0,p=Number(n.y)||0,v=Number(n.width)||1,y=Number(n.height)||1;let b=Number(n.rotation)||0;const O=!!n.flipX,F=!!n.flipY;console.log(h,p),O&&!F?b=-b:!O&&F&&(b=180-b);const E=a.getCenterPoint();a.set({originX:"center",originY:"center",left:E.x,top:E.y,width:v,height:y,angle:b,flipX:O,flipY:F}),a.setCoords(),s.renderAll(),l({_isSyncing:!1})},setTransform:(n,s)=>{l(a=>({transform:{...a.transform,[n]:s}})),requestAnimationFrame(()=>e().updateFabricFromStore())},flipX:()=>{l(n=>({transform:{...n.transform,flipX:!n.transform.flipX}})),requestAnimationFrame(()=>e().updateFabricFromStore())},flipY:()=>{l(n=>({transform:{...n.transform,flipY:!n.transform.flipY}})),requestAnimationFrame(()=>e().updateFabricFromStore())},setOrigin:n=>{l(s=>({transform:{...s.transform,originX:n.originX,originY:n.originY,id:n.id}})),requestAnimationFrame(()=>e().updateFabricFromStore())}}),hS=(l,e,t)=>({addShape:(n,s={})=>{const a=e().canvas;if(!a)return;const{pageWidth:h,pageHeight:p,scale:v}=e(),y=h/4*v,b=p/2*v;s={...{left:y,top:b,originX:"center",originY:"center",selection:!0,hasControls:!0,customType:"shape"},...s};let F;switch(n){case"rect":F=new _r({width:80,height:80,fill:"transparent",stroke:"black",...s});break;case"circle":F=new Ir({radius:48,fill:"transparent",stroke:"black",...s});break;case"capsule":F=new _r({radius:48,fill:"transparent",stroke:"black",...s});break;case"ellipse":F=new Ci({rx:70,ry:45,fill:"transparent",stroke:"black",...s});break;case"triangle":F=new $i({width:100,height:100,fill:"transparent",stroke:"black",...s});break;case"line":F=new li([50,50,200,50],{stroke:"black",strokeWidth:2,selectable:!0,hasControls:!0,hasBorders:!1,...s});break;case"polygon":case"pentagon":F=new ea(s.points||[{x:0,y:0},{x:50,y:0},{x:25,y:50}],{fill:"transparent",stroke:"black",...s});break;case"diamond":F=new ea([{x:0,y:s.height/2||40},{x:s.width/2||40,y:0},{x:s.width||80,y:s.height/2||40},{x:s.width/2||40,y:s.height||80}],{fill:"transparent",stroke:"black",...s});break;case"star":F=new ea(e().generateStarPoints(s.numPoints||5,s.outerRadius||50,s.innerRadius||20),{fill:"transparent",stroke:"black",...s});break;case"arrow":F=e().createArrowShape({...s});break;case"paper":{const E=new _r({width:300,height:80,fill:"#FFFFFF",originX:"center",originY:"center",stroke:1,fontFamily:"Bubblegum Sans"}),Z=new ts("Type to enter text",{fontSize:20,width:200,textAlign:"center",originX:"center",originY:"center",fontFamily:"Bubblegum Sans"});F=new ur([E,Z],s),F.__text=Z,F.__box=E,Z.__group=F}break;default:console.warn("Shape not supported:",n);return}a.add(F),a.setActiveObject(F),a.renderAll(),e().setToolbar({target:F}),e().updateFromFabric(F),e().saveState(),e().addLayer(F,n)},generateStarPoints:(n=5,s=50,a=20)=>{const h=[],p=Math.PI/n;for(let v=0;v<2*n;v++){const y=v%2===0?s:a,b=v*p-Math.PI/2;h.push({x:y*Math.cos(b),y:y*Math.sin(b)})}return h},createArrowShape:({width:n=120,stroke:s="black",strokeWidth:a=2,headLength:h=12,headWidth:p=12,left:v=0,top:y=0})=>{const b=new li([0,0,n,0],{stroke:s,strokeWidth:a,originX:"left",originY:"center"}),O=new $i({width:h,height:p,fill:s,left:n,top:0,angle:90,originX:"center",originY:"center"});return new ur([b,O],{left:v,top:y,originX:"center",originY:"center"})}}),fS=["Arial","Bubblegum Sans","Comic Neue","Consolas","Courier New","Fredoka One","Georgia","Helvetica","Monaco","Palatino","Patrick Hand","Tahoma","Times New Roman","Trebuchet MS","Verdana"],dS=(l,e,t)=>({fonts:fS,fontSize:16,bgColor:"#000000",setBgColor:n=>l({bgColor:n}),setFontSize:n=>l({fontSize:n}),color:"#000000",hasShadow:!1,setHasShadow:n=>l({hasShadow:n}),shadowColor:"",setShadowColor:n=>l({shadowColor:n}),setColor:n=>l({color:n}),fontFamily:"Arial",setFontFamily:n=>l({fontFamily:n}),isBold:!1,setIsBold:n=>l({isBold:n}),isItalic:!1,setIsItalic:n=>l({isItalic:n}),isUnderline:!1,setIsUnderline:n=>l({isUnderline:n}),charSpacing:0,setCharSpacing:n=>l({charSpacing:n}),lineHeight:1.2,setLineHeight:n=>l({lineHeight:n}),strokeColor:"#000000",setStrokeColor:n=>l({strokeColor:n}),strokeWidth:1,setStrokeWidth:n=>l({strokeWidth:n}),fillColor:"#000000",setFillColor:n=>l({fillColor:n}),addText:(n={})=>{const s=e().canvas;if(!s)return;const{text:a="Enter text",fontSize:h=36,bold:p=!1,italic:v=!1,underline:y=!1,fontFamily:b="Bubblegum Sans",width:O=300,textColor:F="#000000",placeholderColor:E="#9ca3af"}=n,{pageWidth:Z,pageHeight:N,scale:$}=e(),ee=Z/4*$,ae=N/2*$,ue=new ts(a,{left:ee,top:ae,originX:"center",originY:"center",fontSize:h,fontWeight:p?"bold":"normal",fontStyle:v?"italic":"normal",underline:y,fill:E,fontFamily:b,width:O,editable:!0,objectCaching:!1,padding:6,splitByGrapheme:!0});ue.on("editing:entered",()=>{ue.fill===E&&(ue.selectAll(),ue.set("fill",F),s.requestRenderAll())}),ue.on("editing:exited",()=>{ue.text.trim()?ue.set("fill",F):(ue.text=a,ue.set("fill",E)),s.requestRenderAll()}),s.add(ue),s.setActiveObject(ue),ue.enterEditing(),setTimeout(()=>{ue.hiddenTextarea?.focus(),ue.selectAll()},0),l({showTextToolbar:!0,selectedObject:ue}),e().saveState(),s.requestRenderAll()}});function pS(l){const[,e,t]=l.split("-");return H_[e]?.[t]}const gS=(l,e,t)=>({backgroundColor:"#ff0000",borderColor:"#000000",borderWidth:"1",borderStyle:"solid",setBackgroundColor:n=>{const s=e().canvas;if(!s)return;const a=pS(n);if(!a)return;const h=s.getActiveObject();h&&(h.set("fill",a),s.requestRenderAll(),l({backgroundColor:n}))}}),mS=(l,e,t)=>({visible:!1,x:0,y:0,items:[],openMenu:(n,s,a)=>{const p=a.length*36,v=Math.min(n,window.innerWidth-220),y=Math.min(s,window.innerHeight-p);l({visible:!0,x:v,y,items:a})},closeMenu:()=>l({visible:!1})}),vS=(l,e,t)=>({...j2(l,e),...X2(l,e),...L2(l,e),...D2(l,e),...R2(l,e),...W2(l,e),...H2(l,e),...iS(l,e),...lS(l,e),...cS(l,e),...hS(l,e),...dS(l,e),...gS(l,e),...mS(l)}),rt=C2(vS);function _S(){const l=rt(t=>t.commands),e=rt(t=>t.runCommand);Te.useEffect(()=>{const t=n=>{const s=n.target;if(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)return;const a=[n.metaKey?"Meta":"",n.ctrlKey?"Ctrl":"",n.shiftKey?"Shift":"",n.altKey?"Alt":"",n.key.length===1?n.key.toLowerCase():n.key].filter(Boolean).join("+"),h=l.find(p=>p.shortcut?.some(v=>v.toLowerCase()===a.toLowerCase()));h&&(n.preventDefault(),e(h.id))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l,e])}function X_(l){var e,t,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var s=l.length;for(e=0;e<s;e++)l[e]&&(t=X_(l[e]))&&(n&&(n+=" "),n+=t)}else for(t in l)l[t]&&(n&&(n+=" "),n+=t);return n}function ci(){for(var l,e,t=0,n="",s=arguments.length;t<s;t++)(l=arguments[t])&&(e=X_(l))&&(n&&(n+=" "),n+=e);return n}const Y_=({options:l,value:e,onChange:t,className:n=""})=>K.jsxs("div",{className:ci("relative inline-block",n),children:[K.jsx("select",{value:e,onChange:s=>t(s.target.value),className:ci("w-full appearance-none rounded-md border border-gray-300 bg-white px-3 py-1 pr-8 text-sm shadow-sm","focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:outline-none hover:border-gray-400 transition"),children:l.map(s=>K.jsx("option",{value:s,style:{fontFamily:s},children:s},s))}),K.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-500",children:""})]}),Sc=8,yS=300,Ro=({content:l,position:e="top",children:t})=>{const n=Te.useRef(null),s=Te.useRef(null),a=Te.useRef(null),[h,p]=Te.useState(!1),[v,y]=Te.useState({top:0,left:0}),[b,O]=Te.useState(e);Te.useEffect(()=>()=>{a.current&&window.clearTimeout(a.current)},[]);const F=()=>{a.current&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{a.current=null,p(!0)},yS)},E=()=>{a.current&&(window.clearTimeout(a.current),a.current=null),p(!1)};Te.useLayoutEffect(()=>{if(!h||!n.current||!s.current)return;const ee=n.current.getBoundingClientRect(),ae=s.current.getBoundingClientRect(),ue=Ve=>{switch(Ve){case"bottom":return{top:ee.bottom+Sc,left:ee.left+ee.width/2-ae.width/2};case"left":return{top:ee.top+ee.height/2-ae.height/2,left:ee.left-ae.width-Sc};case"right":return{top:ee.top+ee.height/2-ae.height/2,left:ee.right+Sc};default:return{top:ee.top-ae.height-Sc,left:ee.left+ee.width/2-ae.width/2}}};let xe=e,{top:Ce,left:z}=ue(xe);Ce<4&&xe==="top"&&(xe="bottom"),Ce+ae.height>window.innerHeight&&xe==="bottom"&&(xe="top"),z<4&&xe==="left"&&(xe="right"),z+ae.width>window.innerWidth&&xe==="right"&&(xe="left"),{top:Ce,left:z}=ue(xe),O(xe),y({top:Math.max(6,Math.round(Ce)),left:Math.max(6,Math.round(z))})},[h,e]);const Z=ee=>{ee.key==="Escape"&&E()},N=Te.useRef(`tooltip-${Math.random().toString(36).slice(2)}`),$=typeof document<"u"?document.body:null;return K.jsxs(K.Fragment,{children:[K.jsx("span",{ref:n,className:"inline-flex",onMouseEnter:F,onMouseLeave:E,onClick:E,onFocus:F,onBlur:E,onKeyDown:Z,tabIndex:0,"aria-describedby":l?N.current:void 0,children:t}),h&&$?Zm.createPortal(K.jsxs("div",{id:N.current,ref:s,role:"tooltip","aria-hidden":!h,style:{position:"fixed",top:v.top,left:v.left},className:"animate-tooltip z-[9999] rounded-md bg-white px-3 py-1.5 text-[11px] font-medium text-gray-900 shadow-[0_8px_24px_rgba(0,0,0,0.18)] whitespace-nowrap pointer-events-none animate-tooltip-min",children:[l,K.jsx("div",{className:`absolute w-1.5 h-1.5 bg-white rotate-45 ${b==="top"?"bottom-[-3px] left-1/2 -translate-x-1/2":b==="bottom"?"top-[-3px] left-1/2 -translate-x-1/2":b==="left"?"right-[-3px] top-1/2 -translate-y-1/2":"left-[-3px] top-1/2 -translate-y-1/2"}`})]}),$):null]})},$s=({options:l,value:e={},onChange:t,single:n=!1})=>{const[s,a]=Te.useState(e),h=p=>{let v;n?v=Object.fromEntries(l.map(y=>[y.key,y.key===p])):v={...s,[p]:!s[p]},a(v),t?.(v)};return K.jsx("div",{className:`
        inline-flex overflow-hidden
        rounded-lg
        border border-gray-200
        bg-white
        shadow-[0_1px_2px_rgba(0,0,0,0.03)]
      `,children:l.map(({key:p,icon:v,label:y,tooltip:b})=>{const O=s[p];return K.jsx(Ro,{content:b,position:"bottom",children:K.jsxs("button",{type:"button",onClick:()=>h(p),className:`
              flex items-center gap-1.5
              px-2.5 py-1.5
              text-[11px] font-medium
              transition-colors
              border-r border-gray-100 last:border-r-0

              ${O?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-50"}
            `,children:[v&&K.jsx("i",{className:`${v} text-[11px]`}),y&&K.jsx("span",{children:y})]},p)},p)})})},zl=({label:l,value:e,onChange:t,min:n=0,max:s=100,step:a=1,className:h=""})=>{const p=()=>t(Math.min(s,e+a)),v=()=>t(Math.max(n,e-a));return K.jsxs("div",{className:ci("inline-flex items-center gap-2",h),children:[l&&K.jsxs("label",{className:"text-xs",children:[l,":"]}),K.jsxs("div",{className:"relative inline-flex w-18 rounded-md shadow-sm",children:[K.jsx("input",{type:"number",value:Number(e).toString(),onChange:y=>t(Number(y.target.value)),min:n,max:s,step:a,className:"w-full rounded-full border border-gray-300 bg-white px-3 py-[2px] text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:outline-none hover:border-gray-400 transition appearance-textfield"}),K.jsxs("div",{className:"absolute inset-y-1 right-1 flex flex-col divide-y border-l divide-gray-300 border-gray-300 bg-white rounded-r-md overflow-hidden",children:[K.jsx("button",{type:"button",onClick:p,className:"flex-1 flex items-center justify-center px-1 text-gray-600 hover:bg-gray-100",children:K.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",stroke:"currentColor",children:K.jsx("path",{d:"M2 5L4 3L6 5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),K.jsx("button",{type:"button",onClick:v,className:"flex-1 flex items-center justify-center px-1 text-gray-600 hover:bg-gray-100",children:K.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",stroke:"currentColor",children:K.jsx("path",{d:"M2 3L4 5L6 3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})};function xS({target:l,canvas:e,onChange:t}){const n=rt(Z=>Z.fontSize),s=rt(Z=>Z.setFontSize),a=rt(Z=>Z.color),h=rt(Z=>Z.setColor),p=rt(Z=>Z.fontFamily),v=rt(Z=>Z.setFontFamily);rt(Z=>Z.isBold);const y=rt(Z=>Z.setIsBold);rt(Z=>Z.isItalic);const b=rt(Z=>Z.setIsItalic);rt(Z=>Z.isUnderline);const O=rt(Z=>Z.setIsUnderline),F=rt(Z=>Z.fonts),E=Te.useRef(null);return Te.useEffect(()=>{l&&(s(l.fontSize||16),h(l.fill||"#000000"),y(l.fontWeight==="bold"))},[l]),Te.useLayoutEffect(()=>{if(!l||!e||!E.current)return;const Z=E.current,N=()=>{if(!l||!Z)return;l.setCoords();const{tl:ue,tr:xe,bl:Ce,br:z}=l.aCoords,Ve=(ue.x+xe.x)/2,He=(Ce.y+z.y)/2,Je=e.viewportTransform||[1,0,0,1,0,0],ut=Je[0]*Ve+Je[2]*He+Je[4],Ie=Je[1]*Ve+Je[3]*He+Je[5],Ke=e.getElement().getBoundingClientRect(),dt=8,ze=Ke.left+ut,Bt=Ke.top+Ie+dt,Le=Z.getBoundingClientRect();Z.style.position="fixed",Z.style.left=`${ze-Le.width/2}px`,Z.style.top=`${Bt}px`,Z.style.zIndex="500"};let $=null;const ee=()=>{$==null&&($=requestAnimationFrame(()=>{$=null,N()}))};N();const ae=["object:moving","object:scaling","object:rotating","object:modified","mouse:wheel","after:render"];return ae.forEach(ue=>e.on(ue,ee)),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{ae.forEach(ue=>e.off(ue,ee)),window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0),$!=null&&cancelAnimationFrame($)}},[l,e]),l?K.jsxs("div",{ref:E,className:"absolute z-50 flex items-center gap-2 bg-white shadow-lg rounded-full px-4 py-2",children:[K.jsxs("label",{className:"relative cursor-pointer",children:[K.jsx("input",{type:"color",value:a,onChange:Z=>{const N=Z.target.value;h(N),t?.({fill:N})},className:"absolute inset-0 opacity-0 cursor-pointer"}),K.jsx("div",{className:"h-6 w-6 rounded-full border shadow-sm",style:{backgroundColor:a}})]}),K.jsx(Y_,{onChange:Z=>{console.log(Z),v(Z),t?.({fontFamily:Z})},options:F,value:p}),K.jsx(zl,{value:n,onChange:Z=>{const N=parseInt(String(Z),10);s(N),t?.({fontSize:N})}}),K.jsx($s,{options:[{key:"bold",icon:"fa-solid fa-bold"},{key:"italic",icon:"fa-solid fa-italic"},{key:"underline",icon:"fa-solid fa-underline"}],onChange:Z=>{console.log("formats:",Z);const{bold:N,italic:$,underline:ee}=Z;y(N),b($),O(ee),t?.({fontWeight:N?"bold":"normal",fontStyle:$?"italic":"normal",underline:ee})}})]}):null}const wS=typeof navigator<"u"&&/Mac|iPhone|iPad/i.test(navigator.platform),So=(l,e)=>wS?l:e;function bS(){const l=Te.useRef(null),e=Te.useRef(null),{init:t,selectedObject:n,canvas:s,openMenu:a,fill:h}=rt(),p=rt();_S(),Te.useEffect(()=>(l.current&&(t(l.current),e.current=new U_(s,()=>h)),()=>{s&&(s.dispose(),e.current?.disable(),e.current=null)}),[t]);const v=y=>{y.preventDefault(),a(y.clientX,y.clientY,[{label:"Copy",icon:K.jsx("i",{className:"fa-solid fa-copy"}),shortcut:So("C","Ctrl+C"),when:()=>p.hasSelection,onClick:()=>p.copy()},{label:"Paste",icon:K.jsx("i",{className:"fa-solid fa-paste"}),shortcut:So("V","Ctrl+V"),when:()=>p.canPaste(),onClick:()=>p.paste()},{label:"Duplicate",icon:K.jsx("i",{className:"fa-solid fa-clone"}),shortcut:So("D","Ctrl+D"),when:()=>p.hasSelection,onClick:()=>p.duplicate()},{type:"divider"},{label:"Group",icon:K.jsx("i",{className:"fa-solid fa-object-group"}),shortcut:So("G","Ctrl+G"),when:()=>p.hasMultipleSelection(),onClick:()=>p.groupLayers()},{label:"Ungroup",icon:K.jsx("i",{className:"fa-solid fa-object-ungroup"}),shortcut:So("G","Ctrl+Shift+G"),when:()=>p.isGroupSelected(),onClick:()=>p.ungroupSelected()},{type:"divider"},{label:"Delete",icon:K.jsx("i",{className:"fa-solid fa-trash"}),shortcut:So("","Del"),when:()=>p.hasSelection,onClick:()=>p.removeLayer()}])};return K.jsxs("main",{className:"bg-white shadow-lg relative",onContextMenu:v,children:[K.jsx("canvas",{ref:l}),n?.type==="textbox"&&s&&K.jsx(xS,{target:n,canvas:s,onChange:y=>{n&&(n.set(y),s.requestRenderAll())}})]})}const Cm={tl:{x:"left",y:"top",left:"12%",top:"12%"},tr:{x:"right",y:"top",left:"88%",top:"12%"},c:{x:"center",y:"center",left:"50%",top:"50%"},bl:{x:"left",y:"bottom",left:"12%",top:"88%"},br:{x:"right",y:"bottom",left:"88%",top:"88%"}};function SS({size:l=24,value:e="c",onChange:t}){const n=Cm[e],s=l*.34;return K.jsxs("div",{style:{width:l,height:l,position:"relative",cursor:"pointer"},children:[K.jsx("div",{style:{position:"absolute",inset:2,borderRadius:3,border:"1px solid #cbd5e1",background:"linear-gradient(#ffffff, #f8fafc)"}}),K.jsx("div",{style:{position:"absolute",inset:"50% 4px auto 4px",height:1,background:"#e2e8f0"}}),K.jsx("div",{style:{position:"absolute",inset:"4px auto 4px 50%",width:1,background:"#e2e8f0"}}),Object.entries(Cm).map(([a,h])=>K.jsx("div",{onClick:()=>t?.({originX:h.x,originY:h.y,id:a}),style:{position:"absolute",left:h.left,top:h.top,width:l*.45,height:l*.45,transform:"translate(-50%,-50%)"}},a)),e==="c"?K.jsx("div",{style:{position:"absolute",left:n.left,top:n.top,width:s,height:s,borderRadius:"50%",background:"#ffffff",border:"2px solid #3b82f6",boxShadow:`
              0 1px 2px rgba(0,0,0,0.15),
              0 0 0 3px rgba(59,130,246,0.15)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}}):K.jsx("div",{style:{position:"absolute",left:n.left,top:n.top,width:s,height:s,borderRadius:"50%",background:"#3b82f6",boxShadow:`
              0 2px 4px rgba(0,0,0,0.2),
              0 0 0 3px rgba(59,130,246,0.25)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}})]})}const Cc=l=>K.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:[K.jsx("path",{d:"M10 5L3.5 19H10V5Z",className:"fill-current opacity-50"}),K.jsx("path",{d:"M14 5L20.5 19H14V5Z",className:"fill-current"}),K.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21","stroke-width":"2","stroke-dasharray":"3 2","stroke-linecap":"round",className:"stroke-current"})]});function Yl({action:l,toggleType:e="switch",iconOn:t,iconOff:n,tooltipOn:s="",tooltipOff:a="",initial:h=!1,size:p=26,onChange:v}){const[y,b]=Te.useState(h),O=()=>{let E=y;e==="switch"&&(E=!y),e==="exclusive"&&(E=!0),b(E),v?.({action:l,value:E})},F=E=>typeof E=="string"?K.jsx("i",{className:E,style:{fontSize:p*.55}}):E;return K.jsx(Ro,{content:y?s:a,position:"bottom",children:K.jsx("button",{onClick:O,style:{width:p,height:p,borderRadius:6,background:y?"linear-gradient(#3b82f6, #2563eb)":"linear-gradient(#ffffff, #f1f5f9)",border:"1px solid #cbd5e1",boxShadow:y?"0 2px 4px rgba(37,99,235,0.4)":"0 1px 2px rgba(0,0,0,0.12)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 140ms ease",color:y?"#fff":"#334155"},children:K.jsx("div",{style:{width:p*.6,height:p*.6,display:"flex",alignItems:"center",justifyContent:"center"},children:F(y?t:n)})})})}const CS=({label:l,value:e=0,min:t=0,max:n=100,step:s=1,onChange:a,onKeyDown:h,unit:p,disabled:v,className:y=""})=>K.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[K.jsxs("span",{children:[l,":"]}),K.jsxs("div",{className:"flex items-center gap-0.5",children:[K.jsx("input",{type:"number",min:t,max:n,step:s,value:e,disabled:v,onChange:b=>a?.(Number(b.target.value)),onKeyDown:h,className:`w-14 h-6 px-1.5 text-[11px] text-gray-500 border border-gray-200
            rounded bg-transparent focus:outline-none focus:border-gray-300`}),p&&K.jsx("span",{className:"text-[10px] text-gray-400",children:p})]})]}),G_=({label:l,value:e,disabled:t,onChange:n,max:s})=>{const a=p=>{const v=p;if(v===""){n(0);return}let y=parseInt(String(v),10);isNaN(y)&&(y=0),n(y==0?"":y)},h=p=>{(p.key==="."||p.key==="e")&&p.preventDefault()};return K.jsx(CS,{label:l,value:e??0,onChange:a,disabled:t,onKeyDown:h,max:s})},kS=[{key:"x",label:"X"},{key:"y",label:"Y"},{key:"width",label:"W"},{key:"height",label:"H"},{key:"rotation",label:"R"}],TS=()=>{const l=rt(N=>N.transform),e=rt(N=>N.setTransform),t=rt(N=>N.groupLayers),n=rt(N=>N.ungroupSelected),s=rt(N=>N.bringForward),a=rt(N=>N.sendBackward),h=rt(N=>N.toggleActiveObjectLock),p=rt(N=>N.alignObjects),v=rt(N=>N.hasSelection),y=rt(N=>N.removeLayer),b=rt(N=>N.setOrigin);rt(N=>N.canvas);const[O,F]=Te.useState(!1),E=(N,$)=>{N==="group"?t():N==="ungroup"?n():N==="sendtoback"?s():N==="bringtofront"?a():N==="lock"||N==="unlock"?h():N==="delete"&&y()},Z=(N,$)=>{p(N)};return K.jsx("div",{className:"px-5 py-2 overflow-x-auto shadow-sm bg-white",children:K.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm",children:[K.jsxs("div",{className:"flex items-center gap-4",children:[K.jsx(SS,{size:24,value:l.id,onChange:N=>{console.log(N),b(N)}}),K.jsx("div",{className:"flex items-center gap-2",children:kS.map(N=>K.jsx(G_,{label:N.label,value:l[N.key],disabled:!v,onChange:$=>e(N.key,$)},N.key))}),K.jsx("div",{className:"border-l h-6 border-gray-300"}),K.jsx(Yl,{action:"flipX",toggleType:"switch",iconOn:K.jsx(Cc,{className:"cursor-pointer"}),iconOff:K.jsx(Cc,{className:"cursor-pointer"}),tooltipOn:"Flipped horizontally",tooltipOff:"Flip horizontally",initial:!1,onChange:N=>{const{action:$,value:ee}=N;console.log($,ee),e($,ee)}}),K.jsx(Yl,{action:"flipY",toggleType:"switch",iconOn:K.jsx(Cc,{className:"rotate-90 cursor-pointer"}),iconOff:K.jsx(Cc,{className:"rotate-90 cursor-pointer"}),tooltipOn:"Flipped vertically",tooltipOff:"Flip vertically",initial:!1,onChange:N=>{console.log(N);const{action:$,value:ee}=N;e($,ee)}})]}),K.jsxs("div",{className:"flex items-center gap-4",children:[K.jsx($s,{single:!0,options:[{key:"group",icon:"fa-solid fa-object-group",tooltip:"Group"},{key:"ungroup",icon:"fa-solid fa-object-ungroup",tooltip:"Ungroup"}],onChange:N=>{const{group:$,ungroup:ee}=N,ae=Object.entries(N).find(([ue,xe])=>xe);if(console.log("Group:",ae),ae){const[ue,xe]=ae;E(ue)}}}),K.jsx("div",{className:"border-l h-6 border-gray-300"}),K.jsx(Yl,{action:"lock",toggleType:"switch",iconOn:"fa-solid fa-lock",iconOff:"fa-solid fa-unlock",tooltipOn:"Locked",tooltipOff:"Unlocked",initial:!1,onChange:N=>{const{action:$,value:ee}=N;console.log($,ee),E($)}}),K.jsx($s,{single:!0,options:[{key:"sendtoback",icon:"fa-solid fa-arrow-down",tooltip:"Send to back"},{key:"bringtofront",icon:"fa-solid fa-arrow-up",tooltip:"Bring to bfront"}],onChange:N=>{const{sendtoback:$,bringtofront:ee}=N,ae=Object.entries(N).find(([ue,xe])=>xe);if(console.log("Back:",ae),ae){const[ue,xe]=ae;E(ue)}}}),K.jsx($s,{single:!0,options:[{key:"left",icon:"fa-solid fa-align-left",tooltip:"Align Left"},{key:"center",icon:"fa-solid fa-align-center",tooltip:"Align Center"},{key:"right",icon:"fa-solid fa-align-right",tooltip:"Align Right"}],onChange:N=>{console.log("align:",N);const{left:$,center:ee,right:ae,justify:ue}=N;let xe="align-left";ee?xe="align-hcenter":ae&&(xe="align-right"),Z(xe)}}),K.jsx("div",{className:"border-l h-6 border-gray-300"}),K.jsx($s,{single:!0,options:[{key:"top",icon:"fa-solid fa-align-left rotate-90",tooltip:"Align Top"},{key:"middle",icon:"fa-solid fa-align-center -rotate-90",tooltip:"Align Middle"},{key:"bottom",icon:"fa-solid fa-align-right rotate-90",tooltip:"Align Bottom"}],onChange:N=>{console.log("align:",N);const{top:$,middle:ee,bottom:ae}=N;let ue="align-left";$?ue="align-top":ee?ue="align-vcenter":ae&&(ue="align-bottom"),Z(ue)}}),K.jsx($s,{single:!0,options:[{key:"distribute-h",icon:"fa-solid fa-align-left rotate-90",tooltip:"Distribute horizontally"},{key:"distribute-v",icon:"fa-solid fa-align-center -rotate-90",tooltip:"Distribute vertically"}],onChange:N=>{console.log("align:",N);const{"distribute-v":$,"distribute-h":ee}=N;let ae="align-left";ee?ae="distribute-h":$&&(ae="distribute-v"),Z(ae)}})]})]})})};function tu({icon:l,active:e,className:t,...n}){return K.jsx("button",{...n,className:ci("flex items-center justify-center cursor-pointer transition h-8 w-8 p-2 rounded-sm",e?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200",t),children:l})}const jd=({src:l,...e})=>K.jsx(K.Fragment,{children:K.jsx("img",{src:l,...e})});function kc({label:l,value:e,onChange:t,className:n=""}){return K.jsxs("label",{className:"inline-flex items-center gap-1.5 text-[11px] text-gray-600",children:[l?K.jsxs("span",{className:"font-medium",children:[l,":"]}):null,K.jsx("div",{className:"w-5 h-5 rounded-full p-[2px] border border-gray-200 shadow-sm",style:{backgroundColor:e},children:K.jsx("input",{type:"color",value:e,onChange:s=>t?.(s.target.value),className:`w-full h-full rounded-full opacity-0 cursor-pointer ${n}`})})]})}const ES=()=>{const{canvas:l}=rt(),e=rt(Ie=>Ie.fontSize),t=rt(Ie=>Ie.setFontSize),n=rt(Ie=>Ie.bgColor),s=rt(Ie=>Ie.setBgColor),a=rt(Ie=>Ie.color);rt(Ie=>Ie.setColor);const h=rt(Ie=>Ie.hasShadow),p=rt(Ie=>Ie.setHasShadow),v=rt(Ie=>Ie.shadowColor),y=rt(Ie=>Ie.setShadowColor),b=rt(Ie=>Ie.fontFamily),O=rt(Ie=>Ie.setFontFamily);rt(Ie=>Ie.align),rt(Ie=>Ie.setAlign),rt(Ie=>Ie.isBold);const F=rt(Ie=>Ie.setIsBold);rt(Ie=>Ie.isItalic);const E=rt(Ie=>Ie.setIsItalic);rt(Ie=>Ie.isUnderline);const Z=rt(Ie=>Ie.setIsUnderline),N=rt(Ie=>Ie.charSpacing),$=rt(Ie=>Ie.setCharSpacing),ee=rt(Ie=>Ie.lineHeight),ae=rt(Ie=>Ie.setLineHeight),ue=rt(Ie=>Ie.strokeWidth),xe=rt(Ie=>Ie.setStrokeWidth),Ce=rt(Ie=>Ie.strokeColor),z=rt(Ie=>Ie.setStrokeColor),Ve=rt(Ie=>Ie.fillColor),He=rt(Ie=>Ie.setFillColor),Je=rt(Ie=>Ie.fonts),ut=Ie=>{const Ke=l?.getActiveObject();Ke&&Ke.type.includes("text")&&(Ke.set(Ie),l.requestRenderAll())};return Te.useEffect(()=>{if(!l)return;const Ie=()=>{const Ke=l.getActiveObject();Ke&&Ke.type.includes("text")&&(t(Ke.fontSize||24),O(Ke.fontFamily||"Arial"))};return l.on("selection:created",Ie),l.on("selection:updated",Ie),()=>{l.off("selection:created",Ie),l.off("selection:updated",Ie)}},[l]),K.jsx("div",{className:"px-5 py-2 flex flex-wrap gap-3 overflow-x-auto items-center bg-white shadow-sm text-sm",children:K.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm gap-4",children:[K.jsx(kc,{label:"BG",value:n,onChange:Ie=>{s(a),ut({backgroundColor:Ie})}}),K.jsx(kc,{label:"TXT",value:Ve,onChange:Ie=>{He(Ie),ut({fill:Ie})}}),K.jsx(Y_,{onChange:Ie=>{console.log(Ie),O(Ie),ut({fontFamily:Ie})},options:Je,value:b}),K.jsx(zl,{value:e,onChange:Ie=>{const Ke=parseInt(String(Ie),10);t(Ke),ut({fontSize:Ke})}}),K.jsx($s,{options:[{key:"bold",icon:"fa-solid fa-bold",tooltip:"Bold"},{key:"italic",icon:"fa-solid fa-italic",tooltip:"Italic"},{key:"underline",icon:"fa-solid fa-underline",tooltip:"Underline"}],onChange:Ie=>{console.log("formats:",Ie);const{bold:Ke,italic:dt,underline:ze}=Ie;F(Ke),E(dt),Z(ze),ut({fontWeight:Ke?"bold":"normal"}),ut({fontStyle:dt?"italic":"normal"}),ut({underline:ze})}}),K.jsx($s,{single:!0,options:[{key:"left",icon:"fa-solid fa-align-left",tooltip:"Left Align"},{key:"center",icon:"fa-solid fa-align-center",tooltip:"Center Align"},{key:"right",icon:"fa-solid fa-align-right",tooltip:"Right Align"},{key:"justify",icon:"fa-solid fa-align-justify",tooltip:"Justify"}],onChange:Ie=>{console.log("align:",Ie);const{left:Ke,center:dt,right:ze,justify:Bt}=Ie;let Le="left";dt?Le="center":ze?Le="right":Bt&&(Le="justify"),ut({textAlign:Le})}}),K.jsxs("div",{className:"flex items-center gap-2",children:[K.jsx(kc,{label:"Stroke",value:Ce,onChange:Ie=>{z(Ie),ut({stroke:Ie})}}),K.jsx(zl,{label:"STR",max:10,value:ue,onChange:Ie=>{const Ke=parseInt(String(Ie),10);xe(Ke),ut({strokeWidth:Ke})}})]}),K.jsxs("div",{className:"flex items-center gap-2",children:[K.jsx(zl,{label:"LH",step:.1,value:ee,onChange:Ie=>{const Ke=parseFloat(String(Ie));ae(Ke),ut({lineHeight:Ke})}}),K.jsx(zl,{label:"LS",value:N,onChange:Ie=>{const Ke=parseInt(String(Ie),10);$(Ke),ut({charSpacing:Ke})}})]}),K.jsx(tu,{icon:K.jsx("i",{className:"fa-solid fa-square text-xs"}),onClick:()=>{const Ie=!h;p(Ie),ut({shadow:Ie?{color:v,blur:5,offsetX:2,offsetY:2}:null})},active:h,title:"Shadow"}),h&&K.jsx(kc,{label:"Shadow",value:v,onChange:Ie=>{y(Ie),ut({shadow:{color:Ie,blur:5,offsetX:2,offsetY:2}})}})]})})},Ma=({children:l,onClick:e,position:t="middle"})=>{const n=t==="top"?"hover:rounded-t-lg":t==="bottom"?"hover:rounded-b-lg":"";return K.jsx("button",{onClick:e,className:`w-full text-left px-4 py-2 text-sm hover:bg-stone-200 hover:text-stone-900
        ${n}`,children:l})},OS=({trigger:l,children:e})=>{const[t,n]=Te.useState(!1),s=Te.useRef(null);return Te.useEffect(()=>{const a=h=>{s.current&&!s.current.contains(h.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),K.jsxs("div",{className:"relative inline-block",ref:s,children:[K.jsx(tu,{icon:l,onClick:()=>n(!t),title:"Menu"}),t&&K.jsx("div",{className:"z-1000 absolute right-0 mt-2 w-40 rounded-lg bg-white shadow-lg ring-1 ring-black/10 bg-white text-gray-500",children:e})]})};function PS(){const l=Rd(),e=rt(E=>E.canvas),t=rt(E=>E.toggleGrid),n=rt(E=>E.clearBoard),[s,a]=Te.useState(!1),h=Te.useRef(null),{selectedObject:p}=rt(),v=()=>{if(!e)return;const E=JSON.stringify(e.toJSON(["backgroundColor","customId"])),Z=new Blob([E],{type:"application/json"}),N=document.createElement("a");N.href=URL.createObjectURL(Z),N.download="drawing.fateboard",N.click(),URL.revokeObjectURL(N.href)},y=()=>{h.current?.click()},b=E=>{if(!E)return;const Z=E.getActiveObject();if(!Z)return alert("Select something first");const N=Z.toSVG(),$=new Blob([N],{type:"image/svg+xml"}),ee=URL.createObjectURL($),ae=document.createElement("a");ae.href=ee,ae.download="selection.svg",ae.click(),URL.revokeObjectURL(ee)},O=(E,Z="whiteboard.svg")=>{if(!E)return;const N=E.toSVG(),$=new Blob([N],{type:"image/svg+xml;charset=utf-8"}),ee=URL.createObjectURL($),ae=document.createElement("a");ae.href=ee,ae.download=Z,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),URL.revokeObjectURL(ee)},F=E=>{const Z=E.target.files?.[0];if(!Z||!e)return;const N=new FileReader;N.onload=$=>{try{const ee=$.target?.result;let ae=null;if(typeof ee=="string"?ae=ee:ee instanceof ArrayBuffer&&(ae=new TextDecoder().decode(ee)),!ae)throw new Error("Invalid file content");const ue=JSON.parse(ae);e.clear(),e.loadFromJSON(ue,()=>{e.requestRenderAll()})}catch(ee){console.error("Failed to load canvas:",ee)}},N.readAsText(Z)};return K.jsx("header",{className:"fixed top-0 left-0 right-0 bg-stone-100 flex flex-row justify-between items-center z-50",children:K.jsxs("div",{className:"flex flex-col w-full",children:[K.jsxs("div",{className:"flex items-center justify-between w-full shadow-sm px-2",children:[K.jsx(jd,{src:"fate.svg",className:"h-10 cursor-pointer hidden md:block"}),K.jsx(jd,{src:"fateicon.svg",className:"h-8 cursor-pointer md:hidden"}),K.jsxs("div",{className:"flex gap-4 p-2",children:[K.jsx("input",{type:"file",accept:".fateboard",ref:h,className:"hidden",onChange:F}),K.jsx(Ro,{position:"bottom",content:"Grid View",children:K.jsx(tu,{active:s,icon:K.jsx("i",{className:"fa-solid fa-table-cells-large"}),onClick:()=>{a(!s),t()},title:"Grid View"})}),K.jsx(Ro,{position:"bottom",content:"Create New Board",children:K.jsx(tu,{icon:K.jsx("img",{src:"/edit.svg",alt:"New Draw",height:"16"}),onClick:n,title:"Grid View"})}),K.jsx("div",{className:"flex items-center justify-center cursor-pointer hover:bg-stone-200 h-8 w-8 rounded-sm",children:K.jsxs(OS,{trigger:K.jsx("i",{className:"fa-solid fa-ellipsis-vertical cursor-pointer"}),children:[K.jsx(Ma,{position:"top",onClick:n,children:"Create"}),K.jsx(Ma,{onClick:v,children:"Save"}),K.jsx(Ma,{onClick:()=>O(e),children:"Download Svg"}),K.jsx(Ma,{onClick:()=>b(e),children:"Download Selected"}),K.jsx(Ma,{onClick:y,children:"Load"}),K.jsx(Ma,{onClick:()=>l("/command-palette"),children:"Command Palette"}),K.jsx(Ma,{position:"bottom",onClick:()=>l("/setting"),children:"Settings"})]})})]})]}),p==="shape"&&K.jsx(TS,{}),p&&p?.type==="textbox"&&K.jsx(ES,{})]})})}function AS(l,e,t){switch(l){case"left":return{top:e.top-10,left:e.right+18};case"right":return{top:e.top,left:e.left-t.width-18};case"top":return{top:e.bottom+18,left:e.left};case"bottom":return{top:e.top-t.height-18,left:e.left};default:return{top:e.top,left:e.right+18}}}function MS({tools:l,activeTool:e,onToolClick:t,position:n}){const s=rt(h=>h.isActiveObjectLocked()),a={left:"fixed top-1/2 left-2 -translate-y-1/2 flex-col",right:"fixed top-1/2 right-2 -translate-y-1/2 flex-col",top:"fixed top-0 left-1/2 -translate-x-1/2 flex-row",bottom:"fixed bottom-0 left-1/2 -translate-x-1/2 flex-row"};return K.jsx("div",{className:`flex justify-center items-center bg-white border border-stone-200 shadow rounded-md gap-2 z-50 p-2 ${a[n]}`,children:l.map(h=>{const p=h.id==="lock"?s?"fa-solid fa-lock":"fa-solid fa-unlock":h.icon;return K.jsx(Ro,{content:h.tooltip,position:h.position,children:K.jsx("button",{onClick:v=>t(h.id,v),className:ci("flex justify-center items-center cursor-pointer h-8 w-8 p-2 rounded-md",e===h.id?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200"),children:K.jsx("i",{className:p})},h.id)},h.id)})})}function IS({isOpen:l,position:e,from:t="left",children:n}){return e?Zm.createPortal(K.jsx("aside",{style:{position:"fixed",top:"50%",left:`${e.left}px`},className:ci("bg-stone-100 border border-stone-200 rounded-md shadow-lg w-70 p-4 z-50 transform -translate-y-1/2 transition-all duration-300 ease-out",l?"opacity-100 translate-x-0 pointer-events-auto":t==="left"?"-translate-x-4 opacity-0 pointer-events-none":"translate-x-4 opacity-0 pointer-events-none"),children:n}),document.body):null}const jS=(l,e)=>({select:()=>l.setActiveTool("select"),pan:()=>l.setActiveTool("pan"),draw:()=>l.setActiveTool("draw"),shapes:()=>{},text:()=>l.addText({}),delete:()=>e(),undo:()=>l.undo(),redo:()=>l.redo(),group:()=>l.groupLayers(),ungroup:()=>l.ungroupSelected(),forward:()=>l.bringForward(),backward:()=>l.sendBackward(),forwards:()=>l.bringToFront(),backwards:()=>l.sendToBack(),lock:()=>l.toggleActiveObjectLock(),fullscreen:()=>l.toggleFullscreen(),zoomIn:()=>l.zoomIn(),zoomOut:()=>l.zoomOut(),zoomFit:()=>l.zoomFit(),copy:()=>l.copy(),paste:()=>l.paste(),duplicate:()=>l.duplicate()}),LS=(l,e,t)=>{if(!l?.component)return null;const n=e.currentTarget.getBoundingClientRect(),s=l.panelSize||{width:288,height:300};return AS(t,n,s)};function DS({config:l,toolbarPosition:e="left"}){const[t,n]=Te.useState(null),[s,a]=Te.useState(null),h=rt(),p=h.removeLayer,v=jS(h,p),y=(O,F)=>{const E=l.find(Z=>Z.id===O);if(E){if(E.type==="momentary"){h.setActiveTool(O),setTimeout(()=>h.setActiveTool(null),400),v[O]?.();return}if(E.type==="exclusive"){h.activeTool===O?(h.setActiveTool("select"),n(null)):(h.setActiveTool(O),n(null),v[O]?.());return}if(E.type==="panel"){t===O?(n(null),h.setActiveTool("select")):(n(O),a(LS(E,F,e)),h.setActiveTool(O),v[O]?.());return}}},b=O=>{const F=l.find(E=>E.id===O);F&&(n(null),F.id!=="draw"&&h.setActiveTool("select"))};return K.jsxs(K.Fragment,{children:[K.jsx(MS,{tools:l,activeTool:h.activeTool,onToolClick:y,position:e}),l.map(O=>t===O.id&&O.component&&K.jsx(IS,{isOpen:!0,position:s,from:e,children:typeof O.component=="function"?K.jsx(O.component,{closePanel:()=>b(O.id)}):O.component},O.id))]})}const RS=({onClick:l,size:e=24,className:t="",title:n="Close"})=>K.jsx("button",{onClick:l,title:n,"aria-label":n,className:ci("flex items-center justify-center rounded-full hover:bg-gray-200 cursor-pointer",t),style:{width:e,height:e},children:""});function q_({title:l,onClose:e}){return K.jsxs("div",{className:"flex items-center justify-between pb-3",children:[K.jsx("h3",{className:"text-lg font-bold text-gray-800",children:l}),K.jsx(RS,{onClick:e})]})}function FS({closePanel:l}){rt(v=>v.canvas);const e=rt(v=>v.color),t=rt(v=>v.setBrushColor),n=rt(v=>v.width),s=rt(v=>v.setBrushWidth),a=rt(v=>v.brush),h=rt(v=>v.setBrush),p=["pencil","circle","spray","pattern","eraser"];return K.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[K.jsx(q_,{title:"Draw",onClose:l}),K.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[K.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:K.jsx("input",{type:"range",min:"1",max:"50",value:n,onChange:v=>s({width:Number(v.target.value)}),className:"rotate-[-90deg] w-48 cursor-pointer"})}),K.jsxs("div",{className:"flex items-center justify-between pl-4",children:[K.jsx("span",{className:"text-sm font-medium",children:"Color:"}),K.jsx("input",{type:"color",value:e,onChange:v=>t({color:v.target.value}),className:"w-6 h-6 p-0 rounded border"})]}),K.jsxs("div",{className:"flex items-center justify-between pl-4",children:[K.jsx("span",{className:"text-sm font-medium",children:"Brush:"}),K.jsx("select",{value:a,onChange:v=>h({color:e,width:n,brush:v.target.value}),className:"ml-2 border rounded p-1 flex-1",children:p.map(v=>K.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),K.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[K.jsx("span",{className:"text-sm font-medium",children:"Width:"}),[15,10,5,4,2].map(v=>K.jsx("div",{onClick:()=>s({width:v}),className:`rounded-full border cursor-pointer flex items-center justify-center transition-transform
                        ${n===v?"scale-110 border-blue-500":"border-gray-400"}`,style:{width:`${v*2}px`,height:`${v*2}px`,backgroundColor:e}},v))]}),K.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[K.jsx("div",{className:"flex items-center justify-center rounded-full border h-6 w-6",style:{backgroundColor:e,borderColor:"#333"},children:K.jsx("span",{className:"text-xs text-white select-none",children:a.charAt(0).toUpperCase()})}),K.jsxs("span",{className:"text-sm",children:[n,"px"]})]})]})]})}const km=[{type:"rect",icon:"fa-regular fa-square",defaultProps:{width:120,height:80,rx:0,ry:0,fill:"transparent",stroke:"black"}},{type:"circle",icon:"fa-solid fa-circle",defaultProps:{radius:48,fill:"transparent",stroke:"black"}},{type:"paper",icon:"fa-solid fa-square-pen",defaultProps:{with:120,height:80,fill:"transparent",strock:"black"}},{type:"triangle",icon:"fas fa-play rotate-270",defaultProps:{width:100,height:100,fill:"transparent",stroke:"black"}},{type:"ellipse",icon:"fa-solid fa-circle transform scale-x-120",defaultProps:{rx:70,ry:45,fill:"transparent",stroke:"black"}},{type:"line",icon:"fa-solid fa-slash",defaultProps:{strokeWidth:2,stroke:"black"}},{type:"polygon",icon:"fa-solid fa-caret-up",defaultProps:{points:[{x:50,y:0},{x:100,y:50},{x:75,y:100},{x:25,y:100},{x:0,y:50}],fill:"transparent",stroke:"black",strokeWidth:2}},{type:"star",icon:"fa-solid fa-star",defaultProps:{numPoints:5,innerRadius:20,outerRadius:50,fill:"transparent",stroke:"black",strokeWidth:2}},{type:"arrow",icon:"fa-solid fa-arrow-up",defaultProps:{width:120,height:20,fill:"transparent",stroke:"black",strokeWidth:3,headLength:15}},{type:"diamond",icon:"fa-solid fa-gem",defaultProps:{width:80,height:80,fill:"transparent",stroke:"black",strokeWidth:2,angle:45}},{type:"pentagon",icon:"fa-solid fa-star-half-stroke",defaultProps:{points:[{x:50,y:0},{x:95,y:38},{x:78,y:90},{x:22,y:90},{x:5,y:38}],fill:"transparent",stroke:"black",strokeWidth:2}}],NS=()=>{const l=rt(F=>F.canvas),e=rt(F=>F.addShape),t=rt(F=>F.setActiveTool),n=(F,E={})=>{if(!l)return;const Z=km.find(N=>N.type===F);Z&&e(F,{...Z.defaultProps,...E})};let s=null,a=!1,h=!1;const p=F=>{if(F.target)return;a=!0;const E=l.getPointer(F.e),Z=[E.x,E.y,E.x,E.y];s=new li(Z,{strokeWidth:2,stroke:"black",selectable:!0,evented:!0}),l.add(s)},v=F=>{if(!a||!s)return;const E=l.getPointer(F.e);s.set({x2:E.x,y2:E.y}),l.renderAll()},y=()=>{a&&(a=!1,s=null,t("select"),O())},b=()=>{!l||h||(l.on("mouse:down",p),l.on("mouse:move",v),l.on("mouse:up",y),h=!0,l.isDrawingMode=!1)},O=()=>{!l||!h||(l.off("mouse:down",p),l.off("mouse:move",v),l.off("mouse:up",y),h=!1)};return{shapesList:km,add:n,enableLineDrawing:b,disableLineDrawing:O}};function BS({closePanel:l}){const{fill:e,stroke:t,strokeWidth:n,strokeStyle:s,strokeStyleList:a,setFill:h,setStroke:p,setStrokeWidth:v,setStrokeStyle:y}=rt(),{shapesList:b,add:O,enableLineDrawing:F}=NS(),E={fill:e,stroke:t,strokeWidth:n};function Z(N){N==="line"?F():O(N,E),l?.(N)}return K.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[K.jsx(q_,{title:"Shapes",onClose:l}),K.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[K.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:K.jsx("input",{type:"range",min:"0",max:"16",value:n,onChange:N=>v(Number(N.target.value)),className:"rotate-[-90deg] w-48 cursor-pointer"})}),K.jsx("div",{className:"flex items-center justify-between pl-4 flex-wrap py-4",children:b.map(N=>K.jsx("button",{className:"rounded-sm hover:bg-gray-200 h-8 w-8 cursor-pointer",onClick:()=>Z(N.type),title:N.type,children:K.jsx("i",{className:N.icon})},N.type))}),K.jsxs("div",{className:"flex items-center justify-between pl-4 py-2",children:[K.jsx("span",{className:"text-sm font-medium",children:"Stork:"}),K.jsx("input",{type:"color",value:t,onChange:N=>p(N.target.value),className:"w-6 h-6 p-0 rounded border"}),K.jsx("span",{className:"text-sm font-medium",children:"Fill:"}),K.jsx("input",{type:"color",value:e,onChange:N=>h(N.target.value),className:"w-6 h-6 p-0 rounded border"})]}),K.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[K.jsx("span",{className:"text-sm font-medium",children:"Width:"}),K.jsx("select",{value:s,onChange:N=>y(N.target.value),className:"ml-2 border rounded p-1 flex-1",children:a.map(N=>K.jsx("option",{value:N.value,children:N.label},N.label))})]}),K.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[K.jsx("div",{className:"flex items-center justify-center rounded-full border h-6 w-6",style:{backgroundColor:e,borderColor:"#333"},children:K.jsx("span",{className:"text-xs text-white select-none",children:"A"})}),K.jsxs("span",{className:"text-sm",children:[e,"px"]})]})]})]})}const zS=[{id:"select",type:"exclusive",icon:"fa-solid fa-location-arrow rotate-280",position:"left",component:null,tooltip:"Selector Tool"},{id:"pan",type:"exclusive",icon:"fa-solid fa-hand",position:"left",component:null,tooltip:"Hand Tool"},{id:"draw",type:"panel",icon:"fa-solid fa-pencil",position:"left",component:FS,panelSize:{width:300,height:250},tooltip:"Pencil Tool"},{id:"shapes",type:"panel",icon:"fa-solid fa-shapes",position:"left",component:l=>K.jsx(BS,{...l,panelId:"shapes"}),tooltip:"Shape Builder Tool"},{id:"text",type:"momentary",icon:"fa-solid fa-font",position:"left",component:null,tooltip:"Text Tool"}],VS=()=>{const l=rt(t=>t.toggleFullscreen),e=rt(t=>t.isFullScreen);return K.jsx(Ro,{position:"bottom",content:"Fullscreen",children:K.jsx(tu,{active:e,icon:K.jsx("i",{className:`fa-solid ${e?"fa-compress":"fa-expand"}`}),onClick:l,title:"Toggle Fullscreen",className:"border border-stone-200"})})},WS=({colorTool:l,zoomTool:e,strokeTool:t})=>K.jsxs("div",{className:"flex bg-white flex-col items-start px-2 py-1",children:[l&&K.jsx("div",{className:"flex-1 flex justify-center",children:l}),K.jsxs("div",{className:"flex items-center gap-2",children:[e&&K.jsx("div",{className:"flex py-1",children:e}),t&&K.jsx("div",{className:"flex py-1",children:t})]})]}),US=({bgColor:l,isActive:e=!1,onClick:t,className:n=""})=>K.jsx("div",{onClick:t,role:"button",tabIndex:0,className:ci("relative w-8 h-5 ml-px mb-px border border-stone-300 cursor-pointer",l,n),children:e&&K.jsx("span",{className:"absolute inset-0 m-auto w-2 h-2 rounded-full bg-white",style:{boxShadow:"0 0 0 1px #000"}})}),HS=({fill:l,bgColors:e,onClick:t})=>K.jsx(K.Fragment,{children:[...e].reverse().map((n,s)=>K.jsx(US,{bgColor:n,isActive:n===l,onClick:()=>t(n,l)},s))}),XS=({scrollRef:l,fill:e,bgColors:t,colorsMap:n,onClick:s})=>K.jsx(K.Fragment,{children:K.jsx("div",{ref:l,className:"h-10 bg-white w-full flex flex-wrap gap-0.01 max-h-64 overflow-y-auto",children:t.flatMap((a,h)=>K.jsx(HS,{fill:e,bgColors:n[a],onClick:s},`${a}-${h}`))})}),YS=({scrollRef:l,className:e=""})=>{const[t,n]=Te.useState(!1),[s,a]=Te.useState(!1),h=()=>{const v=l.current;v&&(n(v.scrollTop>0),a(v.scrollTop<v.scrollHeight-v.clientHeight))};Te.useEffect(()=>{const v=l.current;if(v)return h(),v.addEventListener("scroll",h),()=>v.removeEventListener("scroll",h)},[l]);const p=v=>{const y=l.current;if(!y)return;const b=y.scrollHeight-y.clientHeight;let O=y.scrollTop+v;O<0&&(O=0),O>b&&(O=b),y.scrollTop=O,requestAnimationFrame(()=>{y.scrollTop=O,h()})};return K.jsxs("div",{className:ci("flex flex-row items-center gap-1",e),children:[K.jsx("button",{className:"h-10 w-8 flex items-center justify-center rounded hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t,onClick:()=>p(-20),children:K.jsx("i",{className:"fa-solid fa-chevron-up"})}),K.jsx("button",{className:"h-10 w-8 flex items-center justify-center rounded hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!s,onClick:()=>p(20),children:K.jsx("i",{className:"fa-solid fa-chevron-down"})})]})},GS={red:["bg-red-50","bg-red-100","bg-red-200","bg-red-300","bg-red-400","bg-red-500","bg-red-600","bg-red-700","bg-red-800","bg-red-900"],orange:["bg-orange-50","bg-orange-100","bg-orange-200","bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700","bg-orange-800","bg-orange-900"],amber:["bg-amber-50","bg-amber-100","bg-amber-200","bg-amber-300","bg-amber-400","bg-amber-500","bg-amber-600","bg-amber-700","bg-amber-800","bg-amber-900"],yellow:["bg-yellow-50","bg-yellow-100","bg-yellow-200","bg-yellow-300","bg-yellow-400","bg-yellow-500","bg-yellow-600","bg-yellow-700","bg-yellow-800","bg-yellow-900"],lime:["bg-lime-50","bg-lime-100","bg-lime-200","bg-lime-300","bg-lime-400","bg-lime-500","bg-lime-600","bg-lime-700","bg-lime-800","bg-lime-900"],green:["bg-green-50","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500","bg-green-600","bg-green-700","bg-green-800","bg-green-900"],emerald:["bg-emerald-50","bg-emerald-100","bg-emerald-200","bg-emerald-300","bg-emerald-400","bg-emerald-500","bg-emerald-600","bg-emerald-700","bg-emerald-800","bg-emerald-900"],teal:["bg-teal-50","bg-teal-100","bg-teal-200","bg-teal-300","bg-teal-400","bg-teal-500","bg-teal-600","bg-teal-700","bg-teal-800","bg-teal-900"],cyan:["bg-cyan-50","bg-cyan-100","bg-cyan-200","bg-cyan-300","bg-cyan-400","bg-cyan-500","bg-cyan-600","bg-cyan-700","bg-cyan-800","bg-cyan-900"],sky:["bg-sky-50","bg-sky-100","bg-sky-200","bg-sky-300","bg-sky-400","bg-sky-500","bg-sky-600","bg-sky-700","bg-sky-800","bg-sky-900"],blue:["bg-blue-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-400","bg-blue-500","bg-blue-600","bg-blue-700","bg-blue-800","bg-blue-900"],indigo:["bg-indigo-50","bg-indigo-100","bg-indigo-200","bg-indigo-300","bg-indigo-400","bg-indigo-500","bg-indigo-600","bg-indigo-700","bg-indigo-800","bg-indigo-900"],violet:["bg-violet-50","bg-violet-100","bg-violet-200","bg-violet-300","bg-violet-400","bg-violet-500","bg-violet-600","bg-violet-700","bg-violet-800","bg-violet-900"],purple:["bg-purple-50","bg-purple-100","bg-purple-200","bg-purple-300","bg-purple-400","bg-purple-500","bg-purple-600","bg-purple-700","bg-purple-800","bg-purple-900"],fuchsia:["bg-fuchsia-50","bg-fuchsia-100","bg-fuchsia-200","bg-fuchsia-300","bg-fuchsia-400","bg-fuchsia-500","bg-fuchsia-600","bg-fuchsia-700","bg-fuchsia-800","bg-fuchsia-900"],pink:["bg-pink-50","bg-pink-100","bg-pink-200","bg-pink-300","bg-pink-400","bg-pink-500","bg-pink-600","bg-pink-700","bg-pink-800","bg-pink-900"],rose:["bg-rose-50","bg-rose-100","bg-rose-200","bg-rose-300","bg-rose-400","bg-rose-500","bg-rose-600","bg-rose-700","bg-rose-800","bg-rose-900"],slate:["bg-slate-50","bg-slate-100","bg-slate-200","bg-slate-300","bg-slate-400","bg-slate-500","bg-slate-600","bg-slate-700","bg-slate-800","bg-slate-900"],gray:["bg-gray-50","bg-gray-100","bg-gray-200","bg-gray-300","bg-gray-400","bg-gray-500","bg-gray-600","bg-gray-700","bg-gray-800","bg-gray-900"],zinc:["bg-zinc-50","bg-zinc-100","bg-zinc-200","bg-zinc-300","bg-zinc-400","bg-zinc-500","bg-zinc-600","bg-zinc-700","bg-zinc-800","bg-zinc-900"],neutral:["bg-neutral-50","bg-neutral-100","bg-neutral-200","bg-neutral-300","bg-neutral-400","bg-neutral-500","bg-neutral-600","bg-neutral-700","bg-neutral-800","bg-neutral-900"],stone:["bg-stone-50","bg-stone-100","bg-stone-200","bg-stone-300","bg-stone-400","bg-stone-500","bg-stone-600","bg-stone-700","bg-stone-800","bg-stone-900"]},qS=()=>{const[l,e]=Te.useState(["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","slate","gray","zinc","neutral","stone"]),t=Te.useRef(null),{handleColorChange:n,fill:s}=rt();return K.jsxs("div",{className:"flex flex-row items-start bg-white",children:[K.jsx(XS,{scrollRef:t,fill:s,bgColors:l,colorsMap:GS,onClick:n}),K.jsx(YS,{scrollRef:t})]})};function yp({options:l=[],value:e,onChange:t,className:n="",label:s,preview:a,disabled:h}){return K.jsxs("div",{className:ci("flex items-center gap-1",n),children:[s&&K.jsx("span",{className:"text-xs text-gray-600",children:s}),a&&K.jsx("div",{children:a}),K.jsx("select",{value:e,onChange:p=>t?.(p.target.value),disabled:h,className:"p-1 text-xs border border-gray-300 rounded cursor-pointer",children:l.map(p=>K.jsx("option",{value:p.value,children:p.label},p.value))})]})}const Tm=({label:l,hasActiveShape:e,isTileActive:t,setActiveTile:n,color:s})=>K.jsxs("div",{className:"flex items-center h-4",children:[K.jsx("label",{className:"text-[11px] font-medium text-gray-500 w-10 leading-none select-none",children:l}),e?K.jsx("div",{onClick:()=>n("fill"),title:"Edit fill color",className:ci("ml-2 h-4 w-10 rounded border cursor-pointer",t?"ring-1 ring-blue-500 border-blue-500":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:s}}):K.jsx("span",{className:"ml-2 w-8 text-center text-[10px] text-gray-400",children:"N/A"})]}),KS=({label:l,strokeStyleList:e,strokeStyle:t,setStrokeStyle:n,disabled:s})=>K.jsxs("div",{className:"flex items-center justify-center h-8 gap-2",children:[K.jsx("span",{className:"text-[11px] font-medium text-gray-500 leading-none select-none",children:l}),K.jsx(yp,{disabled:s,options:e,value:t,onChange:n})]}),ZS=({value:l,min:e=0,max:t=100,step:n=1,unit:s,onChange:a,disabled:h=!1})=>{const p=v=>Math.min(t,Math.max(e,v));return K.jsxs("div",{className:ci("inline-flex items-center rounded-lg border border-gray-300 bg-white shadow-sm",h&&"opacity-40 pointer-events-none"),children:[K.jsx("button",{onClick:()=>a(p(l-n)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-l-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Decrease",children:K.jsx("i",{className:"fa-solid fa-minus"})}),K.jsxs("div",{className:`px-3 text-sm font-semibold text-gray-800 bg-gray-50 border-x border-gray-300
                   min-w-[44px] text-center`,title:"Value",children:[l,s]}),K.jsx("button",{onClick:()=>a(p(l+n)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-r-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Increase",children:K.jsx("i",{className:"fa-solid fa-plus"})})]})},QS=({value:l=1,onChange:e,disabled:t})=>{const n=Math.round(l*100);return K.jsx(ZS,{value:n,min:0,max:100,step:5,unit:"%",disabled:t,onChange:s=>e(s/100)})},JS=({size:l=20})=>K.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"g1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[K.jsx("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.15"}),K.jsx("stop",{offset:"100%",stopColor:"currentColor"})]})}),K.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",fill:"url(#g1)"})]}),$S=({size:l=20})=>K.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[K.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),K.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),K.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),K.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),K.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.07",y2:"7.07"}),K.jsx("line",{x1:"16.93",y1:"16.93",x2:"19.07",y2:"19.07"}),K.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.07",y2:"16.93"}),K.jsx("line",{x1:"16.93",y1:"7.07",x2:"19.07",y2:"4.93"}),K.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"currentColor",opacity:"0.3"})]}),Em=({size:l=20})=>K.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[K.jsx("line",{x1:"5",y1:"19",x2:"19",y2:"5"}),K.jsx("circle",{cx:"5",cy:"19",r:"2",fill:"currentColor"}),K.jsx("circle",{cx:"19",cy:"5",r:"2",fill:"currentColor"})]}),eC=[{label:"Select Operation",value:""},{label:"Union",value:"union"},{label:"Intersect",value:"intersect"},{label:"Subtract",value:"subtract"},{label:"Exclude",value:"exclude"}],tC=()=>{const[l,e]=Te.useState(""),t=rt(),n=s=>{switch(s){case"union":t.unionSelected({fill:"green"});break;case"intersect":t.intersectSelected({fill:"orange"});break;case"subtract":t.subtractSelected({fill:"pink"});break;case"exclude":t.excludeSelected({fill:"purple"});break}};return K.jsx("div",{className:"flex items-center space-x-2",children:K.jsx(yp,{value:l,options:eC,onChange:s=>{e(s),n(s)}})})},Jc={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},nC=({disabled:l})=>{const e=rt(a=>a.activeObjectShadow),t=rt(a=>a.applyShadowPreset),n=rt(a=>a.removeShadow),s=e?Object.entries(Jc).find(([,a])=>a.blur===e.blur&&a.offsetX===e.offsetX&&a.offsetY===e.offsetY&&a.color===e.color)?.[0]??"custom":"none";return K.jsx(yp,{value:s,disabled:l,options:[{label:"None",value:"none"},...Object.keys(Jc).map(a=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:a}))],onChange:a=>{if(a==="none")return n();t(a)}})};function rC(){const{fill:l,stroke:e,strokeWidth:t,activePaint:n,setActivePaint:s,setStroke:a,setStrokeWidthN:h,opacity:p,setOpacity:v,hasActiveShape:y,strokeStyleList:b,strokeStyle:O,setStrokeStyle:F,addShadow:E,applyShadowPreset:Z,geditor:N}=rt(),[$,ee]=Te.useState(!1),xe=rt(He=>He.canvas)?.getActiveObject()?.shadow?.blur,Ce=n==="fill",z=n==="stroke",Ve=He=>{const Je=Math.max(0,Number(He)||0);h(Je)};return[...Object.keys(Jc).map(He=>({label:He.charAt(0).toUpperCase()+He.slice(1),value:He}))],Object.entries(Jc).find(([,He])=>He.blur===xe)?.[0],K.jsxs("div",{className:"flex flex-row justify-center items-center gap-5 bg-white",children:[K.jsxs("div",{className:"flex flex-col gap-2",children:[K.jsx(Tm,{label:"Fill",hasActiveShape:y,isTileActive:Ce,setActiveTile:()=>s("fill"),color:l}),K.jsx(Tm,{label:"Stroke",hasActiveShape:y,isTileActive:z,setActiveTile:()=>s("stroke"),color:e})]}),K.jsxs("div",{className:"flex gap-2 items-center",children:[K.jsx(G_,{disabled:!y,label:"Width",value:t,onChange:Ve,max:"16"}),K.jsx(KS,{label:"Style",strokeStyleList:b,strokeStyle:O,setStrokeStyle:F,disabled:!y})]}),K.jsx("div",{className:"flex gap-2 items-center",children:K.jsx(QS,{value:p,onChange:v,disabled:!y})}),K.jsx("div",{className:"flex",children:K.jsx(nC,{disabled:!y})}),K.jsxs("div",{className:"flex items-center gap-1 bg-stone-100 p-1 rounded-lg",children:[K.jsx(Yl,{action:"gradient",toggleType:"switch",iconOn:K.jsx(Em,{}),iconOff:K.jsx(Em,{}),tooltipOn:"Gradient",tooltipOff:"Normal",initial:!1,onChange:He=>{He.value?N.enable():N.disable()}}),K.jsx(Yl,{action:"gradienttype",toggleType:"switch",iconOn:K.jsx(JS,{}),iconOff:K.jsx($S,{}),tooltipOn:"Linear Gradient",tooltipOff:"Radial Graient",initial:!1,onChange:He=>{N.toggleGradientType()}})]}),K.jsx("div",{className:"flex",children:K.jsx(tC,{})})]})}function iC(){return K.jsx("footer",{className:"flex flex-col",children:K.jsx(WS,{colorTool:K.jsx(qS,{}),zoomTool:K.jsx(VS,{}),strokeTool:K.jsx(rC,{})})})}const sC=()=>{const{visible:l,x:e,y:t,items:n,closeMenu:s}=rt();if(!l)return null;const a=n.filter(p=>typeof p.when=="function"?p.when():!0),h=a.filter((p,v)=>{if(p.type!=="divider")return!0;const y=a[v-1],b=a[v+1];return y&&b&&y.type!=="divider"&&b.type!=="divider"});return h.length===0?null:K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"fixed inset-0 z-40",onClick:s}),K.jsx("div",{className:`fixed z-50 min-w-[220px] rounded-lg
                   bg-white shadow-lg border border-stone-200 p-1`,style:{top:t,left:e},children:h.map((p,v)=>p.type==="divider"?K.jsx("div",{className:"my-1 h-px bg-stone-200"},p.id??v):K.jsxs("button",{disabled:p.disabled,onClick:()=>{p.onClick(),s()},className:`
                flex w-full items-center justify-between
                rounded-lg px-3 py-2 text-sm
                hover:bg-gray-100
                disabled:opacity-40
              `,children:[K.jsxs("span",{className:"flex items-center gap-2",children:[p.icon,p.label]}),p.shortcut&&K.jsx("span",{className:"text-xs text-gray-400",children:p.shortcut})]},p.id??v))})]})};function K_(l){Te.useEffect(()=>{document.title=l},[l])}const aC=()=>(K_("Draw | Fateboard"),K.jsxs("div",{children:[K.jsx(Tx,{header:K.jsx(PS,{}),leftSidebar:K.jsx(DS,{config:zS,toolbarPosition:"left"}),canvasBoard:K.jsx(bS,{}),footer:K.jsx(iC,{})}),K.jsx(sC,{})]}));function oC(){const l=Te.useRef(null),[e,t]=Te.useState(0),[n,s]=Te.useState(!1),[a,h]=Te.useState(0),p=Te.useRef(0);return Te.useEffect(()=>{const v=l.current,y=v?.getContext("2d");if(!v||!y)return;const b=20,O=[{x:8*b,y:10*b},{x:7*b,y:10*b},{x:6*b,y:10*b}];let F=Z(),E="RIGHT";function Z(){return{x:Math.floor(Math.random()*(v.width/b))*b,y:Math.floor(Math.random()*(v.height/b))*b}}const N=ue=>{ue.key==="ArrowLeft"&&E!=="RIGHT"&&(E="LEFT"),ue.key==="ArrowUp"&&E!=="DOWN"&&(E="UP"),ue.key==="ArrowRight"&&E!=="LEFT"&&(E="RIGHT"),ue.key==="ArrowDown"&&E!=="UP"&&(E="DOWN")};document.addEventListener("keydown",N);const $=()=>{y.fillStyle="#fdfdfd",y.fillRect(0,0,v.width,v.height);for(let Ve=0;Ve<O.length;Ve++)y.fillStyle=Ve===0?"#2ecc71":"#27ae60",y.fillRect(O[Ve].x,O[Ve].y,b,b),y.strokeStyle="#ecf0f1",y.strokeRect(O[Ve].x,O[Ve].y,b,b);y.fillStyle="#e74c3c",y.fillRect(F.x,F.y,b,b);let ue=O[0].x,xe=O[0].y;E==="LEFT"&&(ue-=b),E==="UP"&&(xe-=b),E==="RIGHT"&&(ue+=b),E==="DOWN"&&(xe+=b),ue===F.x&&xe===F.y?(p.current+=1,t(p.current),F=Z()):O.pop();const z={x:ue,y:xe};(ue<0||xe<0||ue>=v.width||xe>=v.height||ee(z,O))&&(s(!0),clearInterval(ae),document.removeEventListener("keydown",N)),O.unshift(z),y.fillStyle="#2c3e50",y.font="18px Arial",y.fillText("Score: "+p.current,b,b)},ee=(ue,xe)=>{for(let Ce=0;Ce<xe.length;Ce++)if(ue.x===xe[Ce].x&&ue.y===xe[Ce].y)return!0;return!1},ae=setInterval($,100);return()=>{clearInterval(ae),document.removeEventListener("keydown",N)}},[a]),K.jsxs("div",{className:"flex flex-col items-center p-6 font-sans m-4",children:[K.jsx("h1",{className:"text-7xl font-bold text-red-600",children:"404"}),K.jsx("p",{className:"m-4 text-lg text-gray-700",children:"Oops! Page not found."}),n?K.jsxs("div",{className:"flex flex-col items-center",children:[K.jsxs("p",{className:"text-xl text-red-600 font-semibold m-4",children:[" Game Over! Final Score: ",e]}),K.jsx("button",{onClick:()=>{t(0),p.current=0,s(!1),h(v=>v+1)},className:"mt-4 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-800",children:" Restart Game"})]}):K.jsx("canvas",{ref:l,width:600,height:400,className:"border border-gray-400 rounded shadow"},a),K.jsx(Vd,{to:"/",className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-800 transition",children:"Go Back Home"})]})}function lC({checked:l,onCheckedChange:e}){return K.jsx("button",{type:"button",role:"switch","aria-checked":l,onClick:()=>e(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-300"}`,children:K.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})}function uC(){const[l,e]=Te.useState(!1);return Te.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]),K.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 transition-colors",children:[K.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:" Settings"}),K.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:K.jsxs("div",{className:"rounded-2xl shadow p-4 bg-white dark:bg-gray-800 transition-colors",children:[K.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Appearance"}),K.jsxs("div",{className:"flex items-center justify-between mt-3",children:[K.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Dark Mode"}),K.jsx(lC,{checked:l,onCheckedChange:e})]})]})})]})}function mh(...l){return l.filter(Boolean).join(" ")}function cC({className:l,...e}){return K.jsx("div",{className:mh("rounded-2xl border bg-white shadow-md dark:bg-gray-100 dark:border-gray-800",l),...e})}function hC({className:l,...e}){return K.jsx("div",{className:mh("p-4 border-b dark:border-gray-800",l),...e})}function fC({className:l,...e}){return K.jsx("h3",{className:mh("text-lg font-semibold leading-none tracking-tight",l),...e})}function dC({className:l,...e}){return K.jsx("div",{className:mh("p-4",l),...e})}const pC=[{id:1,name:"New File",mac:"N",win:"Ctrl+N"},{id:2,name:"Open Settings",mac:",",win:"Ctrl+,"},{id:3,name:"Copy",mac:"C",win:"Ctrl+C"},{id:4,name:"Paste",mac:"V",win:"Ctrl+V"},{id:5,name:"Group",mac:"G",win:"Ctrl+G"},{id:6,name:"Ungroup",mac:"U",win:"Ctrl+Shift+U"}];function gC(){const[l,e]=Te.useState(""),[t,n]=Te.useState("win");Te.useEffect(()=>{navigator.platform.toLowerCase().includes("mac")&&n("mac")},[]);const s=pC.filter(a=>a.name.toLowerCase().includes(l.toLowerCase()));return K.jsx("div",{className:"flex justify-center items-start pt-20",children:K.jsxs(cC,{className:"w-full max-w-lg shadow-xl rounded-2xl",children:[K.jsx(hC,{children:K.jsx(fC,{className:"text-xl",children:"Command Palette"})}),K.jsxs(dC,{children:[K.jsx("input",{placeholder:"Type a command...",value:l,onChange:a=>e(a.target.value),className:"mb-4"}),K.jsxs("ul",{className:"space-y-2",children:[s.map(a=>K.jsxs("li",{className:"flex justify-between items-center p-2 rounded-lg hover:bg-gray-100 cursor-pointer",children:[K.jsx("span",{children:a.name}),K.jsx("span",{className:"text-sm text-gray-500",children:t==="mac"?a.mac:a.win})]},a.id)),s.length===0&&K.jsx("li",{className:"text-gray-500 text-sm",children:"No results found"})]})]})]})})}function mC({images:l}){const[e,t]=ko.useState(0);return ko.useEffect(()=>{const n=setInterval(()=>{t(s=>(s+1)%l.length)},2500);return()=>clearInterval(n)},[l.length]),K.jsxs("div",{className:"relative bg-white rounded-2xl shadow overflow-hidden",children:[K.jsx("img",{src:l[e],alt:"Fateboard glimpse",className:"w-full h-64 object-cover transition-all"}),K.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2",children:l.map((n,s)=>K.jsx("span",{className:`h-2 w-2 rounded-full ${s===e?"bg-blue-600":"bg-gray-300"}`},s))})]})}function vC(){K_("Online Whiteboard | Fateboard");const l=Rd(),e=()=>{l("/draw")};return K.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800",children:[K.jsx("header",{className:"bg-white shadow-sm",children:K.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex justify-between items-center",children:[K.jsx(jd,{src:"fate.svg",className:"h-10 cursor-pointer"}),K.jsxs("nav",{className:"space-x-6 text-sm",children:[K.jsx("a",{href:"#features",className:"hover:text-blue-600",children:"Features"}),K.jsx("a",{href:"#process",className:"hover:text-blue-600",children:"Action"})]})]})}),K.jsx("section",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white",children:K.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-24 text-center",children:[K.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Draw the Fate"}),K.jsx("p",{className:"max-w-2xl mx-auto text-lg mb-8 opacity-90",children:"Just start with a blank canvas and the freedom to move the draw fate."}),K.jsx("button",{className:"bg-white text-blue-600 px-8 py-3 rounded-full font-semibold shadow hover:scale-105 transition",onClick:e,children:"Start Now"})]})}),K.jsx("section",{id:"features",className:"py-20",children:K.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[K.jsx("h3",{className:"text-3xl font-bold text-center mb-12",children:"Key Features"}),K.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{title:"Shape Creation",desc:"Draw rectangles, circles, arrows, and freehand shapes just like on a real whiteboard."},{title:"Easy to Use",desc:"No learning curve. Pick a tool, draw, and your idea comes to life instantly."},{title:"Color Options",desc:"Choose colors that feel right  soft, bold, or playful  to match your story."}].map(t=>K.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow hover:shadow-lg transition",children:[K.jsx("h4",{className:"text-xl font-semibold mb-3",children:t.title}),K.jsx("p",{className:"text-sm text-gray-600",children:t.desc})]},t.title))})]})}),K.jsx("section",{id:"process",className:"bg-gray-100 py-20",children:K.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[K.jsx("h3",{className:"text-3xl font-bold text-center mb-6",children:"See It In Action"}),K.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"A quick look at how ideas turn into visuals  simple, smooth, and human."}),K.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[K.jsxs("div",{className:"space-y-6",children:[K.jsxs("div",{children:[K.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Draw Naturally"}),K.jsx("p",{className:"text-sm text-gray-600",children:"Pick a shape or pen and draw freely, just like on a real whiteboard."})]}),K.jsxs("div",{children:[K.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Adjust as You Go"}),K.jsx("p",{className:"text-sm text-gray-600",children:"Resize, recolor, and tweak elements until it feels right."})]}),K.jsxs("div",{children:[K.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Bring It to Life"}),K.jsx("p",{className:"text-sm text-gray-600",children:"Watch your board come alive with smooth visual flow."})]})]}),K.jsx(mC,{images:["./demo.png","./shape.png","./draw.png","./text.png"]})]})]})}),K.jsx("footer",{className:"bg-white border-t",children:K.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-6 text-sm text-center text-gray-500",children:[" ",new Date().getFullYear()," fateboard. All rights reserved."]})})]})}function _C(){return K.jsx(mx,{basename:"/",children:K.jsxs(Y1,{children:[K.jsx(Co,{path:"/",element:K.jsx(vC,{})}),K.jsx(Co,{path:"/draw",element:K.jsx(aC,{})}),K.jsx(Co,{path:"/setting",element:K.jsx(uC,{})}),K.jsx(Co,{path:"/command-palette",element:K.jsx(gC,{})}),K.jsx(Co,{path:"*",element:K.jsx(oC,{})})]})})}function yC(){return K.jsx(_C,{})}Ky.createRoot(document.getElementById("fateboard")).render(K.jsx(Te.StrictMode,{children:K.jsx(yC,{})}));
