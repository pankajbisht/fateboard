(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Kx(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function IS(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var e=o.default;if(typeof e=="function"){var t=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var s=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return o[i]}})}),t}var Lg={exports:{}},xc={};var ky;function FS(){if(ky)return xc;ky=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var p in s)p!=="key"&&(a[p]=s[p])}else a=s;return s=a.ref,{$$typeof:o,type:i,key:u,ref:s!==void 0?s:null,props:a}}return xc.Fragment=e,xc.jsx=t,xc.jsxs=t,xc}var Ay;function VS(){return Ay||(Ay=1,Lg.exports=FS()),Lg.exports}var k=VS(),Pg={exports:{}},Rt={};var Oy;function US(){if(Oy)return Rt;Oy=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),N=Symbol.iterator;function E(_e){return _e===null||typeof _e!="object"?null:(_e=N&&_e[N]||_e["@@iterator"],typeof _e=="function"?_e:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,ee={};function G(_e,Ve,tt){this.props=_e,this.context=Ve,this.refs=ee,this.updater=tt||V}G.prototype.isReactComponent={},G.prototype.setState=function(_e,Ve){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,Ve,"setState")},G.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function te(){}te.prototype=G.prototype;function ne(_e,Ve,tt){this.props=_e,this.context=Ve,this.refs=ee,this.updater=tt||V}var de=ne.prototype=new te;de.constructor=ne,L(de,G.prototype),de.isPureReactComponent=!0;var be=Array.isArray;function I(){}var Ee={H:null,A:null,T:null,S:null},Ye=Object.prototype.hasOwnProperty;function Be(_e,Ve,tt){var ot=tt.ref;return{$$typeof:o,type:_e,key:Ve,ref:ot!==void 0?ot:null,props:tt}}function ct(_e,Ve){return Be(_e.type,Ve,_e.props)}function nt(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===o}function et(_e){var Ve={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(tt){return Ve[tt]})}var ft=/\/+/g;function Ge(_e,Ve){return typeof _e=="object"&&_e!==null&&_e.key!=null?et(""+_e.key):Ve.toString(36)}function Mt(_e){switch(_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason;default:switch(typeof _e.status=="string"?_e.then(I,I):(_e.status="pending",_e.then(function(Ve){_e.status==="pending"&&(_e.status="fulfilled",_e.value=Ve)},function(Ve){_e.status==="pending"&&(_e.status="rejected",_e.reason=Ve)})),_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason}}throw _e}function he(_e,Ve,tt,ot,ut){var wt=typeof _e;(wt==="undefined"||wt==="boolean")&&(_e=null);var Lt=!1;if(_e===null)Lt=!0;else switch(wt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(_e.$$typeof){case o:case e:Lt=!0;break;case b:return Lt=_e._init,he(Lt(_e._payload),Ve,tt,ot,ut)}}if(Lt)return ut=ut(_e),Lt=ot===""?"."+Ge(_e,0):ot,be(ut)?(tt="",Lt!=null&&(tt=Lt.replace(ft,"$&/")+"/"),he(ut,Ve,tt,"",function(zt){return zt})):ut!=null&&(nt(ut)&&(ut=ct(ut,tt+(ut.key==null||_e&&_e.key===ut.key?"":(""+ut.key).replace(ft,"$&/")+"/")+Lt)),Ve.push(ut)),1;Lt=0;var Oi=ot===""?".":ot+":";if(be(_e))for(var Ct=0;Ct<_e.length;Ct++)ot=_e[Ct],wt=Oi+Ge(ot,Ct),Lt+=he(ot,Ve,tt,wt,ut);else if(Ct=E(_e),typeof Ct=="function")for(_e=Ct.call(_e),Ct=0;!(ot=_e.next()).done;)ot=ot.value,wt=Oi+Ge(ot,Ct++),Lt+=he(ot,Ve,tt,wt,ut);else if(wt==="object"){if(typeof _e.then=="function")return he(Mt(_e),Ve,tt,ot,ut);throw Ve=String(_e),Error("Objects are not valid as a React child (found: "+(Ve==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":Ve)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function qe(_e,Ve,tt){if(_e==null)return _e;var ot=[],ut=0;return he(_e,ot,"","",function(wt){return Ve.call(tt,wt,ut++)}),ot}function it(_e){if(_e._status===-1){var Ve=_e._result;Ve=Ve(),Ve.then(function(tt){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=tt)},function(tt){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=tt)}),_e._status===-1&&(_e._status=0,_e._result=Ve)}if(_e._status===1)return _e._result.default;throw _e._result}var rt=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(Ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},yt={map:qe,forEach:function(_e,Ve,tt){qe(_e,function(){Ve.apply(this,arguments)},tt)},count:function(_e){var Ve=0;return qe(_e,function(){Ve++}),Ve},toArray:function(_e){return qe(_e,function(Ve){return Ve})||[]},only:function(_e){if(!nt(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};return Rt.Activity=C,Rt.Children=yt,Rt.Component=G,Rt.Fragment=t,Rt.Profiler=s,Rt.PureComponent=ne,Rt.StrictMode=i,Rt.Suspense=m,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ee,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(_e){return Ee.H.useMemoCache(_e)}},Rt.cache=function(_e){return function(){return _e.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(_e,Ve,tt){if(_e==null)throw Error("The argument must be a React element, but you passed "+_e+".");var ot=L({},_e.props),ut=_e.key;if(Ve!=null)for(wt in Ve.key!==void 0&&(ut=""+Ve.key),Ve)!Ye.call(Ve,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&Ve.ref===void 0||(ot[wt]=Ve[wt]);var wt=arguments.length-2;if(wt===1)ot.children=tt;else if(1<wt){for(var Lt=Array(wt),Oi=0;Oi<wt;Oi++)Lt[Oi]=arguments[Oi+2];ot.children=Lt}return Be(_e.type,ut,ot)},Rt.createContext=function(_e){return _e={$$typeof:u,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null},_e.Provider=_e,_e.Consumer={$$typeof:a,_context:_e},_e},Rt.createElement=function(_e,Ve,tt){var ot,ut={},wt=null;if(Ve!=null)for(ot in Ve.key!==void 0&&(wt=""+Ve.key),Ve)Ye.call(Ve,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(ut[ot]=Ve[ot]);var Lt=arguments.length-2;if(Lt===1)ut.children=tt;else if(1<Lt){for(var Oi=Array(Lt),Ct=0;Ct<Lt;Ct++)Oi[Ct]=arguments[Ct+2];ut.children=Oi}if(_e&&_e.defaultProps)for(ot in Lt=_e.defaultProps,Lt)ut[ot]===void 0&&(ut[ot]=Lt[ot]);return Be(_e,wt,ut)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(_e){return{$$typeof:p,render:_e}},Rt.isValidElement=nt,Rt.lazy=function(_e){return{$$typeof:b,_payload:{_status:-1,_result:_e},_init:it}},Rt.memo=function(_e,Ve){return{$$typeof:y,type:_e,compare:Ve===void 0?null:Ve}},Rt.startTransition=function(_e){var Ve=Ee.T,tt={};Ee.T=tt;try{var ot=_e(),ut=Ee.S;ut!==null&&ut(tt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(I,rt)}catch(wt){rt(wt)}finally{Ve!==null&&tt.types!==null&&(Ve.types=tt.types),Ee.T=Ve}},Rt.unstable_useCacheRefresh=function(){return Ee.H.useCacheRefresh()},Rt.use=function(_e){return Ee.H.use(_e)},Rt.useActionState=function(_e,Ve,tt){return Ee.H.useActionState(_e,Ve,tt)},Rt.useCallback=function(_e,Ve){return Ee.H.useCallback(_e,Ve)},Rt.useContext=function(_e){return Ee.H.useContext(_e)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(_e,Ve){return Ee.H.useDeferredValue(_e,Ve)},Rt.useEffect=function(_e,Ve){return Ee.H.useEffect(_e,Ve)},Rt.useEffectEvent=function(_e){return Ee.H.useEffectEvent(_e)},Rt.useId=function(){return Ee.H.useId()},Rt.useImperativeHandle=function(_e,Ve,tt){return Ee.H.useImperativeHandle(_e,Ve,tt)},Rt.useInsertionEffect=function(_e,Ve){return Ee.H.useInsertionEffect(_e,Ve)},Rt.useLayoutEffect=function(_e,Ve){return Ee.H.useLayoutEffect(_e,Ve)},Rt.useMemo=function(_e,Ve){return Ee.H.useMemo(_e,Ve)},Rt.useOptimistic=function(_e,Ve){return Ee.H.useOptimistic(_e,Ve)},Rt.useReducer=function(_e,Ve,tt){return Ee.H.useReducer(_e,Ve,tt)},Rt.useRef=function(_e){return Ee.H.useRef(_e)},Rt.useState=function(_e){return Ee.H.useState(_e)},Rt.useSyncExternalStore=function(_e,Ve,tt){return Ee.H.useSyncExternalStore(_e,Ve,tt)},Rt.useTransition=function(){return Ee.H.useTransition()},Rt.version="19.2.4",Rt}var Ey;function Dp(){return Ey||(Ey=1,Pg.exports=US()),Pg.exports}var fe=Dp();const Yr=Kx(fe);var Bg={exports:{}},bc={},zg={exports:{}},Ig={};var jy;function HS(){return jy||(jy=1,(function(o){function e(he,qe){var it=he.length;he.push(qe);e:for(;0<it;){var rt=it-1>>>1,yt=he[rt];if(0<s(yt,qe))he[rt]=qe,he[it]=yt,it=rt;else break e}}function t(he){return he.length===0?null:he[0]}function i(he){if(he.length===0)return null;var qe=he[0],it=he.pop();if(it!==qe){he[0]=it;e:for(var rt=0,yt=he.length,_e=yt>>>1;rt<_e;){var Ve=2*(rt+1)-1,tt=he[Ve],ot=Ve+1,ut=he[ot];if(0>s(tt,it))ot<yt&&0>s(ut,tt)?(he[rt]=ut,he[ot]=it,rt=ot):(he[rt]=tt,he[Ve]=it,rt=Ve);else if(ot<yt&&0>s(ut,it))he[rt]=ut,he[ot]=it,rt=ot;else break e}}return qe}function s(he,qe){var it=he.sortIndex-qe.sortIndex;return it!==0?it:he.id-qe.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var u=Date,p=u.now();o.unstable_now=function(){return u.now()-p}}var m=[],y=[],b=1,C=null,N=3,E=!1,V=!1,L=!1,ee=!1,G=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function de(he){for(var qe=t(y);qe!==null;){if(qe.callback===null)i(y);else if(qe.startTime<=he)i(y),qe.sortIndex=qe.expirationTime,e(m,qe);else break;qe=t(y)}}function be(he){if(L=!1,de(he),!V)if(t(m)!==null)V=!0,I||(I=!0,et());else{var qe=t(y);qe!==null&&Mt(be,qe.startTime-he)}}var I=!1,Ee=-1,Ye=5,Be=-1;function ct(){return ee?!0:!(o.unstable_now()-Be<Ye)}function nt(){if(ee=!1,I){var he=o.unstable_now();Be=he;var qe=!0;try{e:{V=!1,L&&(L=!1,te(Ee),Ee=-1),E=!0;var it=N;try{t:{for(de(he),C=t(m);C!==null&&!(C.expirationTime>he&&ct());){var rt=C.callback;if(typeof rt=="function"){C.callback=null,N=C.priorityLevel;var yt=rt(C.expirationTime<=he);if(he=o.unstable_now(),typeof yt=="function"){C.callback=yt,de(he),qe=!0;break t}C===t(m)&&i(m),de(he)}else i(m);C=t(m)}if(C!==null)qe=!0;else{var _e=t(y);_e!==null&&Mt(be,_e.startTime-he),qe=!1}}break e}finally{C=null,N=it,E=!1}qe=void 0}}finally{qe?et():I=!1}}}var et;if(typeof ne=="function")et=function(){ne(nt)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Ge=ft.port2;ft.port1.onmessage=nt,et=function(){Ge.postMessage(null)}}else et=function(){G(nt,0)};function Mt(he,qe){Ee=G(function(){he(o.unstable_now())},qe)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(he){he.callback=null},o.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<he?Math.floor(1e3/he):5},o.unstable_getCurrentPriorityLevel=function(){return N},o.unstable_next=function(he){switch(N){case 1:case 2:case 3:var qe=3;break;default:qe=N}var it=N;N=qe;try{return he()}finally{N=it}},o.unstable_requestPaint=function(){ee=!0},o.unstable_runWithPriority=function(he,qe){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var it=N;N=he;try{return qe()}finally{N=it}},o.unstable_scheduleCallback=function(he,qe,it){var rt=o.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?rt+it:rt):it=rt,he){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=it+yt,he={id:b++,callback:qe,priorityLevel:he,startTime:it,expirationTime:yt,sortIndex:-1},it>rt?(he.sortIndex=it,e(y,he),t(m)===null&&he===t(y)&&(L?(te(Ee),Ee=-1):L=!0,Mt(be,it-rt))):(he.sortIndex=yt,e(m,he),V||E||(V=!0,I||(I=!0,et()))),he},o.unstable_shouldYield=ct,o.unstable_wrapCallback=function(he){var qe=N;return function(){var it=N;N=qe;try{return he.apply(this,arguments)}finally{N=it}}}})(Ig)),Ig}var My;function YS(){return My||(My=1,zg.exports=HS()),zg.exports}var Fg={exports:{}},_n={};var Dy;function XS(){if(Dy)return _n;Dy=1;var o=Dp();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(m,y,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:C==null?null:""+C,children:m,containerInfo:y,implementation:b}}var u=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_n.createPortal=function(m,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return a(m,y,null,b)},_n.flushSync=function(m){var y=u.T,b=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=y,i.p=b,i.d.f()}},_n.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},_n.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},_n.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var b=y.as,C=p(b,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,E=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:C,integrity:N,fetchPriority:E}):b==="script"&&i.d.X(m,{crossOrigin:C,integrity:N,fetchPriority:E,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_n.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},_n.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,C=p(b,y.crossOrigin);i.d.L(m,b,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_n.preloadModule=function(m,y){if(typeof m=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},_n.requestFormReset=function(m){i.d.r(m)},_n.unstable_batchedUpdates=function(m,y){return m(y)},_n.useFormState=function(m,y,b){return u.H.useFormState(m,y,b)},_n.useFormStatus=function(){return u.H.useHostTransitionStatus()},_n.version="19.2.4",_n}var Ny;function Qx(){if(Ny)return Fg.exports;Ny=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Fg.exports=XS(),Fg.exports}var Ry;function GS(){if(Ry)return bc;Ry=1;var o=YS(),e=Dp(),t=Qx();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var r=n,c=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(c=r.return),n=r.return;while(n)}return r.tag===3?c:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(a(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=a(n),r===null)throw Error(i(188));return r!==n?null:n}for(var c=n,d=r;;){var _=c.return;if(_===null)break;var w=_.alternate;if(w===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===c)return m(_),n;if(w===d)return m(_),r;w=w.sibling}throw Error(i(188))}if(c.return!==d.return)c=_,d=w;else{for(var U=!1,ie=_.child;ie;){if(ie===c){U=!0,c=_,d=w;break}if(ie===d){U=!0,d=_,c=w;break}ie=ie.sibling}if(!U){for(ie=w.child;ie;){if(ie===c){U=!0,c=w,d=_;break}if(ie===d){U=!0,d=w,c=_;break}ie=ie.sibling}if(!U)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var C=Object.assign,N=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),Be=Symbol.for("react.activity"),ct=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function et(n){return n===null||typeof n!="object"?null:(n=nt&&n[nt]||n["@@iterator"],typeof n=="function"?n:null)}var ft=Symbol.for("react.client.reference");function Ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ft?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case G:return"Profiler";case ee:return"StrictMode";case be:return"Suspense";case I:return"SuspenseList";case Be:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case ne:return n.displayName||"Context";case te:return(n._context.displayName||"Context")+".Consumer";case de:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ee:return r=n.displayName||null,r!==null?r:Ge(n.type)||"Memo";case Ye:r=n._payload,n=n._init;try{return Ge(n(r))}catch{}}return null}var Mt=Array.isArray,he=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},rt=[],yt=-1;function _e(n){return{current:n}}function Ve(n){0>yt||(n.current=rt[yt],rt[yt]=null,yt--)}function tt(n,r){yt++,rt[yt]=n.current,n.current=r}var ot=_e(null),ut=_e(null),wt=_e(null),Lt=_e(null);function Oi(n,r){switch(tt(wt,r),tt(ut,n),tt(ot,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Zv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Zv(r),n=$v(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Ve(ot),tt(ot,n)}function Ct(){Ve(ot),Ve(ut),Ve(wt)}function zt(n){n.memoizedState!==null&&tt(Lt,n);var r=ot.current,c=$v(r,n.type);r!==c&&(tt(ut,n),tt(ot,c))}function Qt(n){ut.current===n&&(Ve(ot),Ve(ut)),Lt.current===n&&(Ve(Lt),pc._currentValue=it)}var ta,Ms;function fs(n){if(ta===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);ta=r&&r[1]||"",Ms=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+n+Ms}var Ds=!1;function ia(n,r){if(!n||Ds)return"";Ds=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Le){var Ne=Le}Reflect.construct(n,[],Xe)}else{try{Xe.call()}catch(Le){Ne=Le}n.call(Xe.prototype)}}else{try{throw Error()}catch(Le){Ne=Le}(Xe=n())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Le){if(Le&&Ne&&typeof Le.stack=="string")return[Le.stack,Ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),U=w[0],ie=w[1];if(U&&ie){var pe=U.split(`
`),De=ie.split(`
`);for(_=d=0;d<pe.length&&!pe[d].includes("DetermineComponentFrameRoot");)d++;for(;_<De.length&&!De[_].includes("DetermineComponentFrameRoot");)_++;if(d===pe.length||_===De.length)for(d=pe.length-1,_=De.length-1;1<=d&&0<=_&&pe[d]!==De[_];)_--;for(;1<=d&&0<=_;d--,_--)if(pe[d]!==De[_]){if(d!==1||_!==1)do if(d--,_--,0>_||pe[d]!==De[_]){var Fe=`
`+pe[d].replace(" at new "," at ");return n.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",n.displayName)),Fe}while(1<=d&&0<=_);break}}}finally{Ds=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?fs(c):""}function Ns(n,r){switch(n.tag){case 26:case 27:case 5:return fs(n.type);case 16:return fs("Lazy");case 13:return n.child!==r&&r!==null?fs("Suspense Fallback"):fs("Suspense");case 19:return fs("SuspenseList");case 0:case 15:return ia(n.type,!1);case 11:return ia(n.type.render,!1);case 1:return ia(n.type,!0);case 31:return fs("Activity");default:return""}}function Qs(n){try{var r="",c=null;do r+=Ns(n,c),c=n,n=n.return;while(n);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Js=Object.prototype.hasOwnProperty,er=o.unstable_scheduleCallback,oi=o.unstable_cancelCallback,mr=o.unstable_shouldYield,Wt=o.unstable_requestPaint,$i=o.unstable_now,Nt=o.unstable_getCurrentPriorityLevel,l=o.unstable_ImmediatePriority,h=o.unstable_UserBlockingPriority,g=o.unstable_NormalPriority,v=o.unstable_LowPriority,x=o.unstable_IdlePriority,T=o.log,A=o.unstable_setDisableYieldValue,O=null,j=null;function M(n){if(typeof T=="function"&&A(n),j&&typeof j.setStrictMode=="function")try{j.setStrictMode(O,n)}catch{}}var P=Math.clz32?Math.clz32:R,H=Math.log,z=Math.LN2;function R(n){return n>>>=0,n===0?32:31-(H(n)/z|0)|0}var K=256,Y=262144,Z=4194304;function B(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function q(n,r,c){var d=n.pendingLanes;if(d===0)return 0;var _=0,w=n.suspendedLanes,U=n.pingedLanes;n=n.warmLanes;var ie=d&134217727;return ie!==0?(d=ie&~w,d!==0?_=B(d):(U&=ie,U!==0?_=B(U):c||(c=ie&~n,c!==0&&(_=B(c))))):(ie=d&~w,ie!==0?_=B(ie):U!==0?_=B(U):c||(c=d&~n,c!==0&&(_=B(c)))),_===0?0:r!==0&&r!==_&&(r&w)===0&&(w=_&-_,c=r&-r,w>=c||w===32&&(c&4194048)!==0)?r:_}function D(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function X(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q(){var n=Z;return Z<<=1,(Z&62914560)===0&&(Z=4194304),n}function J(n){for(var r=[],c=0;31>c;c++)r.push(n);return r}function W(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function se(n,r,c,d,_,w){var U=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var ie=n.entanglements,pe=n.expirationTimes,De=n.hiddenUpdates;for(c=U&~c;0<c;){var Fe=31-P(c),Xe=1<<Fe;ie[Fe]=0,pe[Fe]=-1;var Ne=De[Fe];if(Ne!==null)for(De[Fe]=null,Fe=0;Fe<Ne.length;Fe++){var Le=Ne[Fe];Le!==null&&(Le.lane&=-536870913)}c&=~Xe}d!==0&&oe(n,d,0),w!==0&&_===0&&n.tag!==0&&(n.suspendedLanes|=w&~(U&~r))}function oe(n,r,c){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-P(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function le(n,r){var c=n.entangledLanes|=r;for(n=n.entanglements;c;){var d=31-P(c),_=1<<d;_&r|n[d]&r&&(n[d]|=r),c&=~_}}function ge(n,r){var c=r&-r;return c=(c&42)!==0?1:re(c),(c&(n.suspendedLanes|r))!==0?0:c}function re(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ue(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function me(){var n=qe.p;return n!==0?n:(n=window.event,n===void 0?32:xy(n.type))}function Ce(n,r){var c=qe.p;try{return qe.p=n,r()}finally{qe.p=c}}var we=Math.random().toString(36).slice(2),Ae="__reactFiber$"+we,ze="__reactProps$"+we,We="__reactContainer$"+we,Je="__reactEvents$"+we,lt="__reactListeners$"+we,Pe="__reactHandles$"+we,Ie="__reactResources$"+we,Qe="__reactMarker$"+we;function at(n){delete n[Ae],delete n[ze],delete n[Je],delete n[lt],delete n[Pe]}function st(n){var r=n[Ae];if(r)return r;for(var c=n.parentNode;c;){if(r=c[We]||c[Ae]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(n=ny(n);n!==null;){if(c=n[Ae])return c;n=ny(n)}return r}n=c,c=n.parentNode}return null}function mt(n){if(n=n[Ae]||n[We]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function pt(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function xt(n){var r=n[Ie];return r||(r=n[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(n){n[Qe]=!0}var Tt=new Set,Ci={};function Jt(n,r){hi(n,r),hi(n+"Capture",r)}function hi(n,r){for(Ci[n]=r,n=0;n<r.length;n++)Tt.add(r[n])}var xi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},si={};function fi(n){return Js.call(si,n)?!0:Js.call($e,n)?!1:xi.test(n)?si[n]=!0:($e[n]=!0,!1)}function pi(n,r,c){if(fi(r))if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+c)}}function Ki(n,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+c)}}function Pi(n,r,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(r,c,""+d)}}function mi(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xn(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qi(n,r,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,w=d.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return _.call(this)},set:function(U){c=""+U,w.call(this,U)}}),Object.defineProperty(n,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(U){c=""+U},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ji(n){if(!n._valueTracker){var r=xn(n)?"checked":"value";n._valueTracker=Qi(n,r,""+n[r])}}function zn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return n&&(d=xn(n)?n.checked?"true":"false":n.value),n=d,n!==c?(r.setValue(n),!0):!1}function vi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var en=/[\n"\\]/g;function fn(n){return n.replace(en,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vr(n,r,c,d,_,w,U,ie){n.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.type=U:n.removeAttribute("type"),r!=null?U==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+mi(r)):n.value!==""+mi(r)&&(n.value=""+mi(r)):U!=="submit"&&U!=="reset"||n.removeAttribute("value"),r!=null?na(n,U,mi(r)):c!=null?na(n,U,mi(c)):d!=null&&n.removeAttribute("value"),_==null&&w!=null&&(n.defaultChecked=!!w),_!=null&&(n.checked=_&&typeof _!="function"&&typeof _!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?n.name=""+mi(ie):n.removeAttribute("name")}function Ya(n,r,c,d,_,w,U,ie){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){Ji(n);return}c=c!=null?""+mi(c):"",r=r!=null?""+mi(r):c,ie||r===n.value||(n.value=r),n.defaultValue=r}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=ie?n.checked:!!d,n.defaultChecked=!!d,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(n.name=U),Ji(n)}function na(n,r,c){r==="number"&&vi(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Rs(n,r,c,d){if(n=n.options,r){r={};for(var _=0;_<c.length;_++)r["$"+c[_]]=!0;for(c=0;c<n.length;c++)_=r.hasOwnProperty("$"+n[c].value),n[c].selected!==_&&(n[c].selected=_),_&&d&&(n[c].defaultSelected=!0)}else{for(c=""+mi(c),r=null,_=0;_<n.length;_++){if(n[_].value===c){n[_].selected=!0,d&&(n[_].defaultSelected=!0);return}r!==null||n[_].disabled||(r=n[_])}r!==null&&(r.selected=!0)}}function yr(n,r,c){if(r!=null&&(r=""+mi(r),r!==n.value&&(n.value=r),c==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=c!=null?""+mi(c):""}function Ls(n,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(i(92));if(Mt(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=mi(r),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),Ji(n)}function In(n,r){if(r){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=r;return}}n.textContent=r}var xr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ds(n,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,c):typeof c!="number"||c===0||xr.has(r)?r==="float"?n.cssFloat=c:n[r]=(""+c).trim():n[r]=c+"px"}function Tn(n,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var _ in r)d=r[_],r.hasOwnProperty(_)&&c[_]!==d&&ds(n,_,d)}else for(var w in r)r.hasOwnProperty(w)&&ds(n,w,r[w])}function At(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rn(n){return Fn.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function tn(){}var br=null;function _r(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gs=null,f=null;function S(n){var r=mt(n);if(r&&(n=r.stateNode)){var c=n[ze]||null;e:switch(n=r.stateNode,r.type){case"input":if(vr(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+fn(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==n&&d.form===n.form){var _=d[ze]||null;if(!_)throw Error(i(90));vr(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===n.form&&zn(d)}break e;case"textarea":yr(n,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Rs(n,!!c.multiple,r,!1)}}}var F=!1;function $(n,r,c){if(F)return n(r,c);F=!0;try{var d=n(r);return d}finally{if(F=!1,(gs!==null||f!==null)&&(sh(),gs&&(r=gs,n=f,f=gs=null,S(r),n)))for(r=0;r<n.length;r++)S(n[r])}}function ae(n,r){var c=n.stateNode;if(c===null)return null;var d=c[ze]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var Te=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Me=!1;if(Te)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Me=!1}var Ke=null,kt=null,Dt=null;function ti(){if(Dt)return Dt;var n,r=kt,c=r.length,d,_="value"in Ke?Ke.value:Ke.textContent,w=_.length;for(n=0;n<c&&r[n]===_[n];n++);var U=c-n;for(d=1;d<=U&&r[c-d]===_[w-d];d++);return Dt=_.slice(n,1<d?1-d:void 0)}function Ei(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ps(){return!0}function ms(){return!1}function bi(n){function r(c,d,_,w,U){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=w,this.target=U,this.currentTarget=null;for(var ie in n)n.hasOwnProperty(ie)&&(c=n[ie],this[ie]=c?c(w):w[ie]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ps:ms,this.isPropagationStopped=ms,this}return C(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),r}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=bi(bn),sa=C({},bn,{view:0,detail:0}),To=bi(sa),jl,Ml,ra,ko=C({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ra&&(ra&&n.type==="mousemove"?(jl=n.screenX-ra.screenX,Ml=n.screenY-ra.screenY):Ml=jl=0,ra=n),jl)},movementY:function(n){return"movementY"in n?n.movementY:Ml}}),Dl=bi(ko),Rf=C({},ko,{dataTransfer:0}),Ao=bi(Rf),aa=C({},sa,{relatedTarget:0}),oa=bi(aa),du=C({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=bi(du),gu=C({},bn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fi=bi(gu),Lf=C({},bn,{data:0}),Oo=bi(Lf),la={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zf(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Bf[n])?!!r[n]:!1}function Nl(){return zf}var If=C({},sa,{key:function(n){if(n.key){var r=la[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pf[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(n){return n.type==="keypress"?Ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ff=bi(If),Vf=C({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=bi(Vf),Uf=C({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),wr=bi(Uf),Vi=C({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mu=bi(Vi),Xa=C({},ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hf=bi(Xa),vu=C({},bn,{newState:0,oldState:0}),Yf=bi(vu),Eo=[9,13,27,32],tr=Te&&"CompositionEvent"in window,ca=null;Te&&"documentMode"in document&&(ca=document.documentMode);var yu=Te&&"TextEvent"in window&&!ca,Ut=Te&&(!tr||ca&&8<ca&&11>=ca),jo=" ",Rl=!1;function Ll(n,r){switch(n){case"keyup":return Eo.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var An=!1;function Pt(n,r){switch(n){case"compositionend":return Ui(r);case"keypress":return r.which!==32?null:(Rl=!0,jo);case"textInput":return n=r.data,n===jo&&Rl?null:n;default:return null}}function Pl(n,r){if(An)return n==="compositionend"||!tr&&Ll(n,r)?(n=ti(),Dt=kt=Ke=null,An=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ut&&r.locale!=="ko"?null:r.data;default:return null}}var _i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ga(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_i[n.type]:r==="textarea"}function ir(n,r,c,d){gs?f?f.push(d):f=[d]:gs=d,r=hh(r,"onChange"),0<r.length&&(c=new ts("onChange","change",null,c,d),n.push({event:c,listeners:r}))}var yi=null,On=null;function Mo(n){Hv(n,0)}function Do(n){var r=pt(n);if(zn(r))return n}function No(n,r){if(n==="change")return r}var xu=!1;if(Te){var En;if(Te){var Cr="oninput"in document;if(!Cr){var ua=document.createElement("div");ua.setAttribute("oninput","return;"),Cr=typeof ua.oninput=="function"}En=Cr}else En=!1;xu=En&&(!document.documentMode||9<document.documentMode)}function Ro(){yi&&(yi.detachEvent("onpropertychange",Bl),On=yi=null)}function Bl(n){if(n.propertyName==="value"&&Do(On)){var r=[];ir(r,On,n,_r(n)),$(Mo,r)}}function bu(n,r,c){n==="focusin"?(Ro(),yi=r,On=c,yi.attachEvent("onpropertychange",Bl)):n==="focusout"&&Ro()}function an(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Do(On)}function zl(n,r){if(n==="click")return Do(r)}function Xf(n,r){if(n==="input"||n==="change")return Do(r)}function Gf(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var dn=typeof Object.is=="function"?Object.is:Gf;function Tr(n,r){if(dn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var c=Object.keys(n),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!Js.call(r,_)||!dn(n[_],r[_]))return!1}return!0}function _u(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ha(n,r){var c=_u(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=r&&d>=r)return{node:c,offset:r-n};n=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_u(c)}}function Lo(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Lo(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Su(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=vi(n.document);r instanceof n.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)n=r.contentWindow;else break;r=vi(n.document)}return r}function Il(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var wu=Te&&"documentMode"in document&&11>=document.documentMode,nr=null,qa=null,Vn=null,ce=!1;function ve(n,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ce||nr==null||nr!==vi(d)||(d=nr,"selectionStart"in d&&Il(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Vn&&Tr(Vn,d)||(Vn=d,d=hh(qa,"onSelect"),0<d.length&&(r=new ts("onSelect","select",null,r,c),n.push({event:r,listeners:d}),r.target=nr)))}function Re(n,r){var c={};return c[n.toLowerCase()]=r.toLowerCase(),c["Webkit"+n]="webkit"+r,c["Moz"+n]="moz"+r,c}var Ue={animationend:Re("Animation","AnimationEnd"),animationiteration:Re("Animation","AnimationIteration"),animationstart:Re("Animation","AnimationStart"),transitionrun:Re("Transition","TransitionRun"),transitionstart:Re("Transition","TransitionStart"),transitioncancel:Re("Transition","TransitionCancel"),transitionend:Re("Transition","TransitionEnd")},_t={},Ot={};Te&&(Ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ue.animationend.animation,delete Ue.animationiteration.animation,delete Ue.animationstart.animation),"TransitionEvent"in window||delete Ue.transitionend.transition);function St(n){if(_t[n])return _t[n];if(!Ue[n])return n;var r=Ue[n],c;for(c in r)if(r.hasOwnProperty(c)&&c in Ot)return _t[n]=r[c];return n}var Gt=St("animationend"),Un=St("animationiteration"),sr=St("animationstart"),Fl=St("transitionrun"),Po=St("transitionstart"),qf=St("transitioncancel"),S0=St("transitionend"),w0=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function Ps(n,r){w0.set(n,r),Jt(r,[n])}var Cu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},vs=[],Bo=0,Zf=0;function Tu(){for(var n=Bo,r=Zf=Bo=0;r<n;){var c=vs[r];vs[r++]=null;var d=vs[r];vs[r++]=null;var _=vs[r];vs[r++]=null;var w=vs[r];if(vs[r++]=null,d!==null&&_!==null){var U=d.pending;U===null?_.next=_:(_.next=U.next,U.next=_),d.pending=_}w!==0&&C0(c,_,w)}}function ku(n,r,c,d){vs[Bo++]=n,vs[Bo++]=r,vs[Bo++]=c,vs[Bo++]=d,Zf|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function $f(n,r,c,d){return ku(n,r,c,d),Au(n)}function Wa(n,r){return ku(n,null,null,r),Au(n)}function C0(n,r,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var _=!1,w=n.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(_=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,_&&r!==null&&(_=31-P(c),n=w.hiddenUpdates,d=n[_],d===null?n[_]=[r]:d.push(r),r.lane=c|536870912),w):null}function Au(n){if(50<lc)throw lc=0,rg=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var zo={};function S1(n,r,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(n,r,c,d){return new S1(n,r,c,d)}function Kf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kr(n,r){var c=n.alternate;return c===null?(c=is(n.tag,r,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=r,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,r=n.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function T0(n,r){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,r=c.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ou(n,r,c,d,_,w){var U=0;if(d=n,typeof n=="function")Kf(n)&&(U=1);else if(typeof n=="string")U=AS(n,c,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Be:return n=is(31,c,r,_),n.elementType=Be,n.lanes=w,n;case L:return Za(c.children,_,w,r);case ee:U=8,_|=24;break;case G:return n=is(12,c,r,_|2),n.elementType=G,n.lanes=w,n;case be:return n=is(13,c,r,_),n.elementType=be,n.lanes=w,n;case I:return n=is(19,c,r,_),n.elementType=I,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:U=10;break e;case te:U=9;break e;case de:U=11;break e;case Ee:U=14;break e;case Ye:U=16,d=null;break e}U=29,c=Error(i(130,n===null?"null":typeof n,"")),d=null}return r=is(U,c,r,_),r.elementType=n,r.type=d,r.lanes=w,r}function Za(n,r,c,d){return n=is(7,n,d,r),n.lanes=c,n}function Qf(n,r,c){return n=is(6,n,null,r),n.lanes=c,n}function k0(n){var r=is(18,null,null,0);return r.stateNode=n,r}function Jf(n,r,c){return r=is(4,n.children!==null?n.children:[],n.key,r),r.lanes=c,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var A0=new WeakMap;function ys(n,r){if(typeof n=="object"&&n!==null){var c=A0.get(n);return c!==void 0?c:(r={value:n,source:r,stack:Qs(r)},A0.set(n,r),r)}return{value:n,source:r,stack:Qs(r)}}var Io=[],Fo=0,Eu=null,Vl=0,xs=[],bs=0,fa=null,rr=1,ar="";function Ar(n,r){Io[Fo++]=Vl,Io[Fo++]=Eu,Eu=n,Vl=r}function O0(n,r,c){xs[bs++]=rr,xs[bs++]=ar,xs[bs++]=fa,fa=n;var d=rr;n=ar;var _=32-P(d)-1;d&=~(1<<_),c+=1;var w=32-P(r)+_;if(30<w){var U=_-_%5;w=(d&(1<<U)-1).toString(32),d>>=U,_-=U,rr=1<<32-P(r)+_|c<<_|d,ar=w+n}else rr=1<<w|c<<_|d,ar=n}function ed(n){n.return!==null&&(Ar(n,1),O0(n,1,0))}function td(n){for(;n===Eu;)Eu=Io[--Fo],Io[Fo]=null,Vl=Io[--Fo],Io[Fo]=null;for(;n===fa;)fa=xs[--bs],xs[bs]=null,ar=xs[--bs],xs[bs]=null,rr=xs[--bs],xs[bs]=null}function E0(n,r){xs[bs++]=rr,xs[bs++]=ar,xs[bs++]=fa,rr=r.id,ar=r.overflow,fa=n}var gn=null,Si=null,Xt=!1,da=null,_s=!1,id=Error(i(519));function ga(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(ys(r,n)),id}function j0(n){var r=n.stateNode,c=n.type,d=n.memoizedProps;switch(r[Ae]=n,r[ze]=d,c){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(c=0;c<uc.length;c++)Vt(uc[c],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":Vt("invalid",r),Ya(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Vt("invalid",r);break;case"textarea":Vt("invalid",r),Ls(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||qv(r.textContent,c)?(d.popover!=null&&(Vt("beforetoggle",r),Vt("toggle",r)),d.onScroll!=null&&Vt("scroll",r),d.onScrollEnd!=null&&Vt("scrollend",r),d.onClick!=null&&(r.onclick=tn),r=!0):r=!1,r||ga(n,!0)}function M0(n){for(gn=n.return;gn;)switch(gn.tag){case 5:case 31:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:gn=gn.return}}function Vo(n){if(n!==gn)return!1;if(!Xt)return M0(n),Xt=!0,!1;var r=n.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||bg(n.type,n.memoizedProps)),c=!c),c&&Si&&ga(n),M0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Si=iy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Si=iy(n)}else r===27?(r=Si,Oa(n.type)?(n=Tg,Tg=null,Si=n):Si=r):Si=gn?ws(n.stateNode.nextSibling):null;return!0}function $a(){Si=gn=null,Xt=!1}function nd(){var n=da;return n!==null&&(Gn===null?Gn=n:Gn.push.apply(Gn,n),da=null),n}function Ul(n){da===null?da=[n]:da.push(n)}var sd=_e(null),Ka=null,Or=null;function pa(n,r,c){tt(sd,r._currentValue),r._currentValue=c}function Er(n){n._currentValue=sd.current,Ve(sd)}function rd(n,r,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===c)break;n=n.return}}function ad(n,r,c,d){var _=n.child;for(_!==null&&(_.return=n);_!==null;){var w=_.dependencies;if(w!==null){var U=_.child;w=w.firstContext;e:for(;w!==null;){var ie=w;w=_;for(var pe=0;pe<r.length;pe++)if(ie.context===r[pe]){w.lanes|=c,ie=w.alternate,ie!==null&&(ie.lanes|=c),rd(w.return,c,n),d||(U=null);break e}w=ie.next}}else if(_.tag===18){if(U=_.return,U===null)throw Error(i(341));U.lanes|=c,w=U.alternate,w!==null&&(w.lanes|=c),rd(U,c,n),U=null}else U=_.child;if(U!==null)U.return=_;else for(U=_;U!==null;){if(U===n){U=null;break}if(_=U.sibling,_!==null){_.return=U.return,U=_;break}U=U.return}_=U}}function Uo(n,r,c,d){n=null;for(var _=r,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var U=_.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var ie=_.type;dn(_.pendingProps.value,U.value)||(n!==null?n.push(ie):n=[ie])}}else if(_===Lt.current){if(U=_.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(n!==null?n.push(pc):n=[pc])}_=_.return}n!==null&&ad(r,n,c,d),r.flags|=262144}function ju(n){for(n=n.firstContext;n!==null;){if(!dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qa(n){Ka=n,Or=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function pn(n){return D0(Ka,n)}function Mu(n,r){return Ka===null&&Qa(n),D0(n,r)}function D0(n,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Or===null){if(n===null)throw Error(i(308));Or=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Or=Or.next=r;return c}var w1=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(c){return c()})}},C1=o.unstable_scheduleCallback,T1=o.unstable_NormalPriority,Hi={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new w1,data:new Map,refCount:0}}function Hl(n){n.refCount--,n.refCount===0&&C1(T1,function(){n.controller.abort()})}var Yl=null,ld=0,Ho=0,Yo=null;function k1(n,r){if(Yl===null){var c=Yl=[];ld=0,Ho=hg(),Yo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return ld++,r.then(N0,N0),r}function N0(){if(--ld===0&&Yl!==null){Yo!==null&&(Yo.status="fulfilled");var n=Yl;Yl=null,Ho=0,Yo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function A1(n,r){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var _=0;_<c.length;_++)(0,c[_])(r)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var R0=he.S;he.S=function(n,r){vv=$i(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&k1(n,r),R0!==null&&R0(n,r)};var Ja=_e(null);function cd(){var n=Ja.current;return n!==null?n:di.pooledCache}function Du(n,r){r===null?tt(Ja,Ja.current):tt(Ja,r.pool)}function L0(){var n=cd();return n===null?null:{parent:Hi._currentValue,pool:n}}var Xo=Error(i(460)),ud=Error(i(474)),Nu=Error(i(542)),Ru={then:function(){}};function P0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function B0(n,r,c){switch(c=n[c],c===void 0?n.push(r):c!==r&&(r.then(tn,tn),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,I0(n),n;default:if(typeof r.status=="string")r.then(tn,tn);else{if(n=di,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=d}},function(d){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,I0(n),n}throw to=r,Xo}}function eo(n){try{var r=n._init;return r(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(to=c,Xo):c}}var to=null;function z0(){if(to===null)throw Error(i(459));var n=to;return to=null,n}function I0(n){if(n===Xo||n===Nu)throw Error(i(483))}var Go=null,Xl=0;function Lu(n){var r=Xl;return Xl+=1,Go===null&&(Go=[]),B0(Go,n,r)}function Gl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Pu(n,r){throw r.$$typeof===N?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function F0(n){function r(Oe,Se){if(n){var je=Oe.deletions;je===null?(Oe.deletions=[Se],Oe.flags|=16):je.push(Se)}}function c(Oe,Se){if(!n)return null;for(;Se!==null;)r(Oe,Se),Se=Se.sibling;return null}function d(Oe){for(var Se=new Map;Oe!==null;)Oe.key!==null?Se.set(Oe.key,Oe):Se.set(Oe.index,Oe),Oe=Oe.sibling;return Se}function _(Oe,Se){return Oe=kr(Oe,Se),Oe.index=0,Oe.sibling=null,Oe}function w(Oe,Se,je){return Oe.index=je,n?(je=Oe.alternate,je!==null?(je=je.index,je<Se?(Oe.flags|=67108866,Se):je):(Oe.flags|=67108866,Se)):(Oe.flags|=1048576,Se)}function U(Oe){return n&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function ie(Oe,Se,je,He){return Se===null||Se.tag!==6?(Se=Qf(je,Oe.mode,He),Se.return=Oe,Se):(Se=_(Se,je),Se.return=Oe,Se)}function pe(Oe,Se,je,He){var bt=je.type;return bt===L?Fe(Oe,Se,je.props.children,He,je.key):Se!==null&&(Se.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===Ye&&eo(bt)===Se.type)?(Se=_(Se,je.props),Gl(Se,je),Se.return=Oe,Se):(Se=Ou(je.type,je.key,je.props,null,Oe.mode,He),Gl(Se,je),Se.return=Oe,Se)}function De(Oe,Se,je,He){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==je.containerInfo||Se.stateNode.implementation!==je.implementation?(Se=Jf(je,Oe.mode,He),Se.return=Oe,Se):(Se=_(Se,je.children||[]),Se.return=Oe,Se)}function Fe(Oe,Se,je,He,bt){return Se===null||Se.tag!==7?(Se=Za(je,Oe.mode,He,bt),Se.return=Oe,Se):(Se=_(Se,je),Se.return=Oe,Se)}function Xe(Oe,Se,je){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=Qf(""+Se,Oe.mode,je),Se.return=Oe,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case E:return je=Ou(Se.type,Se.key,Se.props,null,Oe.mode,je),Gl(je,Se),je.return=Oe,je;case V:return Se=Jf(Se,Oe.mode,je),Se.return=Oe,Se;case Ye:return Se=eo(Se),Xe(Oe,Se,je)}if(Mt(Se)||et(Se))return Se=Za(Se,Oe.mode,je,null),Se.return=Oe,Se;if(typeof Se.then=="function")return Xe(Oe,Lu(Se),je);if(Se.$$typeof===ne)return Xe(Oe,Mu(Oe,Se),je);Pu(Oe,Se)}return null}function Ne(Oe,Se,je,He){var bt=Se!==null?Se.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return bt!==null?null:ie(Oe,Se,""+je,He);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case E:return je.key===bt?pe(Oe,Se,je,He):null;case V:return je.key===bt?De(Oe,Se,je,He):null;case Ye:return je=eo(je),Ne(Oe,Se,je,He)}if(Mt(je)||et(je))return bt!==null?null:Fe(Oe,Se,je,He,null);if(typeof je.then=="function")return Ne(Oe,Se,Lu(je),He);if(je.$$typeof===ne)return Ne(Oe,Se,Mu(Oe,je),He);Pu(Oe,je)}return null}function Le(Oe,Se,je,He,bt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return Oe=Oe.get(je)||null,ie(Se,Oe,""+He,bt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case E:return Oe=Oe.get(He.key===null?je:He.key)||null,pe(Se,Oe,He,bt);case V:return Oe=Oe.get(He.key===null?je:He.key)||null,De(Se,Oe,He,bt);case Ye:return He=eo(He),Le(Oe,Se,je,He,bt)}if(Mt(He)||et(He))return Oe=Oe.get(je)||null,Fe(Se,Oe,He,bt,null);if(typeof He.then=="function")return Le(Oe,Se,je,Lu(He),bt);if(He.$$typeof===ne)return Le(Oe,Se,je,Mu(Se,He),bt);Pu(Se,He)}return null}function dt(Oe,Se,je,He){for(var bt=null,Zt=null,vt=Se,It=Se=0,Yt=null;vt!==null&&It<je.length;It++){vt.index>It?(Yt=vt,vt=null):Yt=vt.sibling;var $t=Ne(Oe,vt,je[It],He);if($t===null){vt===null&&(vt=Yt);break}n&&vt&&$t.alternate===null&&r(Oe,vt),Se=w($t,Se,It),Zt===null?bt=$t:Zt.sibling=$t,Zt=$t,vt=Yt}if(It===je.length)return c(Oe,vt),Xt&&Ar(Oe,It),bt;if(vt===null){for(;It<je.length;It++)vt=Xe(Oe,je[It],He),vt!==null&&(Se=w(vt,Se,It),Zt===null?bt=vt:Zt.sibling=vt,Zt=vt);return Xt&&Ar(Oe,It),bt}for(vt=d(vt);It<je.length;It++)Yt=Le(vt,Oe,It,je[It],He),Yt!==null&&(n&&Yt.alternate!==null&&vt.delete(Yt.key===null?It:Yt.key),Se=w(Yt,Se,It),Zt===null?bt=Yt:Zt.sibling=Yt,Zt=Yt);return n&&vt.forEach(function(Na){return r(Oe,Na)}),Xt&&Ar(Oe,It),bt}function Et(Oe,Se,je,He){if(je==null)throw Error(i(151));for(var bt=null,Zt=null,vt=Se,It=Se=0,Yt=null,$t=je.next();vt!==null&&!$t.done;It++,$t=je.next()){vt.index>It?(Yt=vt,vt=null):Yt=vt.sibling;var Na=Ne(Oe,vt,$t.value,He);if(Na===null){vt===null&&(vt=Yt);break}n&&vt&&Na.alternate===null&&r(Oe,vt),Se=w(Na,Se,It),Zt===null?bt=Na:Zt.sibling=Na,Zt=Na,vt=Yt}if($t.done)return c(Oe,vt),Xt&&Ar(Oe,It),bt;if(vt===null){for(;!$t.done;It++,$t=je.next())$t=Xe(Oe,$t.value,He),$t!==null&&(Se=w($t,Se,It),Zt===null?bt=$t:Zt.sibling=$t,Zt=$t);return Xt&&Ar(Oe,It),bt}for(vt=d(vt);!$t.done;It++,$t=je.next())$t=Le(vt,Oe,It,$t.value,He),$t!==null&&(n&&$t.alternate!==null&&vt.delete($t.key===null?It:$t.key),Se=w($t,Se,It),Zt===null?bt=$t:Zt.sibling=$t,Zt=$t);return n&&vt.forEach(function(zS){return r(Oe,zS)}),Xt&&Ar(Oe,It),bt}function ui(Oe,Se,je,He){if(typeof je=="object"&&je!==null&&je.type===L&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case E:e:{for(var bt=je.key;Se!==null;){if(Se.key===bt){if(bt=je.type,bt===L){if(Se.tag===7){c(Oe,Se.sibling),He=_(Se,je.props.children),He.return=Oe,Oe=He;break e}}else if(Se.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===Ye&&eo(bt)===Se.type){c(Oe,Se.sibling),He=_(Se,je.props),Gl(He,je),He.return=Oe,Oe=He;break e}c(Oe,Se);break}else r(Oe,Se);Se=Se.sibling}je.type===L?(He=Za(je.props.children,Oe.mode,He,je.key),He.return=Oe,Oe=He):(He=Ou(je.type,je.key,je.props,null,Oe.mode,He),Gl(He,je),He.return=Oe,Oe=He)}return U(Oe);case V:e:{for(bt=je.key;Se!==null;){if(Se.key===bt)if(Se.tag===4&&Se.stateNode.containerInfo===je.containerInfo&&Se.stateNode.implementation===je.implementation){c(Oe,Se.sibling),He=_(Se,je.children||[]),He.return=Oe,Oe=He;break e}else{c(Oe,Se);break}else r(Oe,Se);Se=Se.sibling}He=Jf(je,Oe.mode,He),He.return=Oe,Oe=He}return U(Oe);case Ye:return je=eo(je),ui(Oe,Se,je,He)}if(Mt(je))return dt(Oe,Se,je,He);if(et(je)){if(bt=et(je),typeof bt!="function")throw Error(i(150));return je=bt.call(je),Et(Oe,Se,je,He)}if(typeof je.then=="function")return ui(Oe,Se,Lu(je),He);if(je.$$typeof===ne)return ui(Oe,Se,Mu(Oe,je),He);Pu(Oe,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Se!==null&&Se.tag===6?(c(Oe,Se.sibling),He=_(Se,je),He.return=Oe,Oe=He):(c(Oe,Se),He=Qf(je,Oe.mode,He),He.return=Oe,Oe=He),U(Oe)):c(Oe,Se)}return function(Oe,Se,je,He){try{Xl=0;var bt=ui(Oe,Se,je,He);return Go=null,bt}catch(vt){if(vt===Xo||vt===Nu)throw vt;var Zt=is(29,vt,null,Oe.mode);return Zt.lanes=He,Zt.return=Oe,Zt}}}var io=F0(!0),V0=F0(!1),ma=!1;function hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function va(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ya(n,r,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ei&2)!==0){var _=d.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),d.pending=r,r=Au(n),C0(n,null,c),r}return ku(n,d,r,c),Au(n)}function ql(n,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,c|=d,r.lanes=c,le(n,c)}}function dd(n,r){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var U={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?_=w=U:w=w.next=U,c=c.next}while(c!==null);w===null?_=w=r:w=w.next=r}else _=w=r;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=r:n.next=r,c.lastBaseUpdate=r}var gd=!1;function Wl(){if(gd){var n=Yo;if(n!==null)throw n}}function Zl(n,r,c,d){gd=!1;var _=n.updateQueue;ma=!1;var w=_.firstBaseUpdate,U=_.lastBaseUpdate,ie=_.shared.pending;if(ie!==null){_.shared.pending=null;var pe=ie,De=pe.next;pe.next=null,U===null?w=De:U.next=De,U=pe;var Fe=n.alternate;Fe!==null&&(Fe=Fe.updateQueue,ie=Fe.lastBaseUpdate,ie!==U&&(ie===null?Fe.firstBaseUpdate=De:ie.next=De,Fe.lastBaseUpdate=pe))}if(w!==null){var Xe=_.baseState;U=0,Fe=De=pe=null,ie=w;do{var Ne=ie.lane&-536870913,Le=Ne!==ie.lane;if(Le?(Ht&Ne)===Ne:(d&Ne)===Ne){Ne!==0&&Ne===Ho&&(gd=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var dt=n,Et=ie;Ne=r;var ui=c;switch(Et.tag){case 1:if(dt=Et.payload,typeof dt=="function"){Xe=dt.call(ui,Xe,Ne);break e}Xe=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Et.payload,Ne=typeof dt=="function"?dt.call(ui,Xe,Ne):dt,Ne==null)break e;Xe=C({},Xe,Ne);break e;case 2:ma=!0}}Ne=ie.callback,Ne!==null&&(n.flags|=64,Le&&(n.flags|=8192),Le=_.callbacks,Le===null?_.callbacks=[Ne]:Le.push(Ne))}else Le={lane:Ne,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Fe===null?(De=Fe=Le,pe=Xe):Fe=Fe.next=Le,U|=Ne;if(ie=ie.next,ie===null){if(ie=_.shared.pending,ie===null)break;Le=ie,ie=Le.next,Le.next=null,_.lastBaseUpdate=Le,_.shared.pending=null}}while(!0);Fe===null&&(pe=Xe),_.baseState=pe,_.firstBaseUpdate=De,_.lastBaseUpdate=Fe,w===null&&(_.shared.lanes=0),wa|=U,n.lanes=U,n.memoizedState=Xe}}function U0(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function H0(n,r){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)U0(c[n],r)}var qo=_e(null),Bu=_e(0);function Y0(n,r){n=zr,tt(Bu,n),tt(qo,r),zr=n|r.baseLanes}function pd(){tt(Bu,zr),tt(qo,qo.current)}function md(){zr=Bu.current,Ve(qo),Ve(Bu)}var ns=_e(null),Ss=null;function xa(n){var r=n.alternate;tt(Bi,Bi.current&1),tt(ns,n),Ss===null&&(r===null||qo.current!==null||r.memoizedState!==null)&&(Ss=n)}function vd(n){tt(Bi,Bi.current),tt(ns,n),Ss===null&&(Ss=n)}function X0(n){n.tag===22?(tt(Bi,Bi.current),tt(ns,n),Ss===null&&(Ss=n)):ba()}function ba(){tt(Bi,Bi.current),tt(ns,ns.current)}function ss(n){Ve(ns),Ss===n&&(Ss=null),Ve(Bi)}var Bi=_e(0);function zu(n){for(var r=n;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||wg(c)||Cg(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var jr=0,Bt=null,li=null,Yi=null,Iu=!1,Wo=!1,no=!1,Fu=0,$l=0,Zo=null,O1=0;function Ni(){throw Error(i(321))}function yd(n,r){if(r===null)return!1;for(var c=0;c<r.length&&c<n.length;c++)if(!dn(n[c],r[c]))return!1;return!0}function xd(n,r,c,d,_,w){return jr=w,Bt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,he.H=n===null||n.memoizedState===null?Om:Rd,no=!1,w=c(d,_),no=!1,Wo&&(w=q0(r,c,d,_)),G0(n),w}function G0(n){he.H=Jl;var r=li!==null&&li.next!==null;if(jr=0,Yi=li=Bt=null,Iu=!1,$l=0,Zo=null,r)throw Error(i(300));n===null||Xi||(n=n.dependencies,n!==null&&ju(n)&&(Xi=!0))}function q0(n,r,c,d){Bt=n;var _=0;do{if(Wo&&(Zo=null),$l=0,Wo=!1,25<=_)throw Error(i(301));if(_+=1,Yi=li=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}he.H=Em,w=r(c,d)}while(Wo);return w}function E1(){var n=he.H,r=n.useState()[0];return r=typeof r.then=="function"?Kl(r):r,n=n.useState()[0],(li!==null?li.memoizedState:null)!==n&&(Bt.flags|=1024),r}function bd(){var n=Fu!==0;return Fu=0,n}function _d(n,r,c){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~c}function Sd(n){if(Iu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Iu=!1}jr=0,Yi=li=Bt=null,Wo=!1,$l=Fu=0,Zo=null}function jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?Bt.memoizedState=Yi=n:Yi=Yi.next=n,Yi}function zi(){if(li===null){var n=Bt.alternate;n=n!==null?n.memoizedState:null}else n=li.next;var r=Yi===null?Bt.memoizedState:Yi.next;if(r!==null)Yi=r,li=n;else{if(n===null)throw Bt.alternate===null?Error(i(467)):Error(i(310));li=n,n={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},Yi===null?Bt.memoizedState=Yi=n:Yi=Yi.next=n}return Yi}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var r=$l;return $l+=1,Zo===null&&(Zo=[]),n=B0(Zo,n,r),r=Bt,(Yi===null?r.memoizedState:Yi.next)===null&&(r=r.alternate,he.H=r===null||r.memoizedState===null?Om:Rd),n}function Uu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===ne)return pn(n)}throw Error(i(438,String(n)))}function wd(n){var r=null,c=Bt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=Bt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Vu(),Bt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(n),d=0;d<n;d++)c[d]=ct;return r.index++,c}function Mr(n,r){return typeof r=="function"?r(n):r}function Hu(n){var r=zi();return Cd(r,li,n)}function Cd(n,r,c){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var _=n.baseQueue,w=d.pending;if(w!==null){if(_!==null){var U=_.next;_.next=w.next,w.next=U}r.baseQueue=_=w,d.pending=null}if(w=n.baseState,_===null)n.memoizedState=w;else{r=_.next;var ie=U=null,pe=null,De=r,Fe=!1;do{var Xe=De.lane&-536870913;if(Xe!==De.lane?(Ht&Xe)===Xe:(jr&Xe)===Xe){var Ne=De.revertLane;if(Ne===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Xe===Ho&&(Fe=!0);else if((jr&Ne)===Ne){De=De.next,Ne===Ho&&(Fe=!0);continue}else Xe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},pe===null?(ie=pe=Xe,U=w):pe=pe.next=Xe,Bt.lanes|=Ne,wa|=Ne;Xe=De.action,no&&c(w,Xe),w=De.hasEagerState?De.eagerState:c(w,Xe)}else Ne={lane:Xe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},pe===null?(ie=pe=Ne,U=w):pe=pe.next=Ne,Bt.lanes|=Xe,wa|=Xe;De=De.next}while(De!==null&&De!==r);if(pe===null?U=w:pe.next=ie,!dn(w,n.memoizedState)&&(Xi=!0,Fe&&(c=Yo,c!==null)))throw c;n.memoizedState=w,n.baseState=U,n.baseQueue=pe,d.lastRenderedState=w}return _===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Td(n){var r=zi(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=n;var d=c.dispatch,_=c.pending,w=r.memoizedState;if(_!==null){c.pending=null;var U=_=_.next;do w=n(w,U.action),U=U.next;while(U!==_);dn(w,r.memoizedState)||(Xi=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),c.lastRenderedState=w}return[w,d]}function W0(n,r,c){var d=Bt,_=zi(),w=Xt;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=r();var U=!dn((li||_).memoizedState,c);if(U&&(_.memoizedState=c,Xi=!0),_=_.queue,Od(K0.bind(null,d,_,n),[n]),_.getSnapshot!==r||U||Yi!==null&&Yi.memoizedState.tag&1){if(d.flags|=2048,$o(9,{destroy:void 0},$0.bind(null,d,_,c,r),null),di===null)throw Error(i(349));w||(jr&127)!==0||Z0(d,r,c)}return c}function Z0(n,r,c){n.flags|=16384,n={getSnapshot:r,value:c},r=Bt.updateQueue,r===null?(r=Vu(),Bt.updateQueue=r,r.stores=[n]):(c=r.stores,c===null?r.stores=[n]:c.push(n))}function $0(n,r,c,d){r.value=c,r.getSnapshot=d,Q0(r)&&J0(n)}function K0(n,r,c){return c(function(){Q0(r)&&J0(n)})}function Q0(n){var r=n.getSnapshot;n=n.value;try{var c=r();return!dn(n,c)}catch{return!0}}function J0(n){var r=Wa(n,2);r!==null&&qn(r,n,2)}function kd(n){var r=jn();if(typeof n=="function"){var c=n;if(n=c(),no){M(!0);try{c()}finally{M(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:n},r}function em(n,r,c,d){return n.baseState=c,Cd(n,li,typeof d=="function"?d:Mr)}function j1(n,r,c,d,_){if(Gu(n))throw Error(i(485));if(n=r.action,n!==null){var w={payload:_,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){w.listeners.push(U)}};he.T!==null?c(!0):w.isTransition=!1,d(w),c=r.pending,c===null?(w.next=r.pending=w,tm(r,w)):(w.next=c.next,r.pending=c.next=w)}}function tm(n,r){var c=r.action,d=r.payload,_=n.state;if(r.isTransition){var w=he.T,U={};he.T=U;try{var ie=c(_,d),pe=he.S;pe!==null&&pe(U,ie),im(n,r,ie)}catch(De){Ad(n,r,De)}finally{w!==null&&U.types!==null&&(w.types=U.types),he.T=w}}else try{w=c(_,d),im(n,r,w)}catch(De){Ad(n,r,De)}}function im(n,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){nm(n,r,d)},function(d){return Ad(n,r,d)}):nm(n,r,c)}function nm(n,r,c){r.status="fulfilled",r.value=c,sm(r),n.state=c,r=n.pending,r!==null&&(c=r.next,c===r?n.pending=null:(c=c.next,r.next=c,tm(n,c)))}function Ad(n,r,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,sm(r),r=r.next;while(r!==d)}n.action=null}function sm(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function rm(n,r){return r}function am(n,r){if(Xt){var c=di.formState;if(c!==null){e:{var d=Bt;if(Xt){if(Si){t:{for(var _=Si,w=_s;_.nodeType!==8;){if(!w){_=null;break t}if(_=ws(_.nextSibling),_===null){_=null;break t}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){Si=ws(_.nextSibling),d=_.data==="F!";break e}}ga(d)}d=!1}d&&(r=c[0])}}return c=jn(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:r},c.queue=d,c=Tm.bind(null,Bt,d),d.dispatch=c,d=kd(!1),w=Nd.bind(null,Bt,!1,d.queue),d=jn(),_={state:r,dispatch:null,action:n,pending:null},d.queue=_,c=j1.bind(null,Bt,_,w,c),_.dispatch=c,d.memoizedState=n,[r,c,!1]}function om(n){var r=zi();return lm(r,li,n)}function lm(n,r,c){if(r=Cd(n,r,rm)[0],n=Hu(Mr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Kl(r)}catch(U){throw U===Xo?Nu:U}else d=r;r=zi();var _=r.queue,w=_.dispatch;return c!==r.memoizedState&&(Bt.flags|=2048,$o(9,{destroy:void 0},M1.bind(null,_,c),null)),[d,w,n]}function M1(n,r){n.action=r}function cm(n){var r=zi(),c=li;if(c!==null)return lm(r,c,n);zi(),r=r.memoizedState,c=zi();var d=c.queue.dispatch;return c.memoizedState=n,[r,d,!1]}function $o(n,r,c,d){return n={tag:n,create:c,deps:d,inst:r,next:null},r=Bt.updateQueue,r===null&&(r=Vu(),Bt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,r.lastEffect=n),n}function um(){return zi().memoizedState}function Yu(n,r,c,d){var _=jn();Bt.flags|=n,_.memoizedState=$o(1|r,{destroy:void 0},c,d===void 0?null:d)}function Xu(n,r,c,d){var _=zi();d=d===void 0?null:d;var w=_.memoizedState.inst;li!==null&&d!==null&&yd(d,li.memoizedState.deps)?_.memoizedState=$o(r,w,c,d):(Bt.flags|=n,_.memoizedState=$o(1|r,w,c,d))}function hm(n,r){Yu(8390656,8,n,r)}function Od(n,r){Xu(2048,8,n,r)}function D1(n){Bt.flags|=4;var r=Bt.updateQueue;if(r===null)r=Vu(),Bt.updateQueue=r,r.events=[n];else{var c=r.events;c===null?r.events=[n]:c.push(n)}}function fm(n){var r=zi().memoizedState;return D1({ref:r,nextImpl:n}),function(){if((ei&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function dm(n,r){return Xu(4,2,n,r)}function gm(n,r){return Xu(4,4,n,r)}function pm(n,r){if(typeof r=="function"){n=n();var c=r(n);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function mm(n,r,c){c=c!=null?c.concat([n]):null,Xu(4,4,pm.bind(null,r,n),c)}function Ed(){}function vm(n,r){var c=zi();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&yd(r,d[1])?d[0]:(c.memoizedState=[n,r],n)}function ym(n,r){var c=zi();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&yd(r,d[1]))return d[0];if(d=n(),no){M(!0);try{n()}finally{M(!1)}}return c.memoizedState=[d,r],d}function jd(n,r,c){return c===void 0||(jr&1073741824)!==0&&(Ht&261930)===0?n.memoizedState=r:(n.memoizedState=c,n=xv(),Bt.lanes|=n,wa|=n,c)}function xm(n,r,c,d){return dn(c,r)?c:qo.current!==null?(n=jd(n,c,d),dn(n,r)||(Xi=!0),n):(jr&42)===0||(jr&1073741824)!==0&&(Ht&261930)===0?(Xi=!0,n.memoizedState=c):(n=xv(),Bt.lanes|=n,wa|=n,r)}function bm(n,r,c,d,_){var w=qe.p;qe.p=w!==0&&8>w?w:8;var U=he.T,ie={};he.T=ie,Nd(n,!1,r,c);try{var pe=_(),De=he.S;if(De!==null&&De(ie,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Fe=A1(pe,d);Ql(n,r,Fe,os(n))}else Ql(n,r,d,os(n))}catch(Xe){Ql(n,r,{then:function(){},status:"rejected",reason:Xe},os())}finally{qe.p=w,U!==null&&ie.types!==null&&(U.types=ie.types),he.T=U}}function N1(){}function Md(n,r,c,d){if(n.tag!==5)throw Error(i(476));var _=_m(n).queue;bm(n,_,r,it,c===null?N1:function(){return Sm(n),c(d)})}function _m(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:it},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:c},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Sm(n){var r=_m(n);r.next===null&&(r=n.alternate.memoizedState),Ql(n,r.next.queue,{},os())}function Dd(){return pn(pc)}function wm(){return zi().memoizedState}function Cm(){return zi().memoizedState}function R1(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var c=os();n=va(c);var d=ya(r,n,c);d!==null&&(qn(d,r,c),ql(d,r,c)),r={cache:od()},n.payload=r;return}r=r.return}}function L1(n,r,c){var d=os();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gu(n)?km(r,c):(c=$f(n,r,c,d),c!==null&&(qn(c,n,d),Am(c,r,d)))}function Tm(n,r,c){var d=os();Ql(n,r,c,d)}function Ql(n,r,c,d){var _={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gu(n))km(r,_);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var U=r.lastRenderedState,ie=w(U,c);if(_.hasEagerState=!0,_.eagerState=ie,dn(ie,U))return ku(n,r,_,0),di===null&&Tu(),!1}catch{}if(c=$f(n,r,_,d),c!==null)return qn(c,n,d),Am(c,r,d),!0}return!1}function Nd(n,r,c,d){if(d={lane:2,revertLane:hg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Gu(n)){if(r)throw Error(i(479))}else r=$f(n,c,d,2),r!==null&&qn(r,n,2)}function Gu(n){var r=n.alternate;return n===Bt||r!==null&&r===Bt}function km(n,r){Wo=Iu=!0;var c=n.pending;c===null?r.next=r:(r.next=c.next,c.next=r),n.pending=r}function Am(n,r,c){if((c&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,c|=d,r.lanes=c,le(n,c)}}var Jl={readContext:pn,use:Uu,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni,useHostTransitionStatus:Ni,useFormState:Ni,useActionState:Ni,useOptimistic:Ni,useMemoCache:Ni,useCacheRefresh:Ni};Jl.useEffectEvent=Ni;var Om={readContext:pn,use:Uu,useCallback:function(n,r){return jn().memoizedState=[n,r===void 0?null:r],n},useContext:pn,useEffect:hm,useImperativeHandle:function(n,r,c){c=c!=null?c.concat([n]):null,Yu(4194308,4,pm.bind(null,r,n),c)},useLayoutEffect:function(n,r){return Yu(4194308,4,n,r)},useInsertionEffect:function(n,r){Yu(4,2,n,r)},useMemo:function(n,r){var c=jn();r=r===void 0?null:r;var d=n();if(no){M(!0);try{n()}finally{M(!1)}}return c.memoizedState=[d,r],d},useReducer:function(n,r,c){var d=jn();if(c!==void 0){var _=c(r);if(no){M(!0);try{c(r)}finally{M(!1)}}}else _=r;return d.memoizedState=d.baseState=_,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:_},d.queue=n,n=n.dispatch=L1.bind(null,Bt,n),[d.memoizedState,n]},useRef:function(n){var r=jn();return n={current:n},r.memoizedState=n},useState:function(n){n=kd(n);var r=n.queue,c=Tm.bind(null,Bt,r);return r.dispatch=c,[n.memoizedState,c]},useDebugValue:Ed,useDeferredValue:function(n,r){var c=jn();return jd(c,n,r)},useTransition:function(){var n=kd(!1);return n=bm.bind(null,Bt,n.queue,!0,!1),jn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,c){var d=Bt,_=jn();if(Xt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),di===null)throw Error(i(349));(Ht&127)!==0||Z0(d,r,c)}_.memoizedState=c;var w={value:c,getSnapshot:r};return _.queue=w,hm(K0.bind(null,d,w,n),[n]),d.flags|=2048,$o(9,{destroy:void 0},$0.bind(null,d,w,c,r),null),c},useId:function(){var n=jn(),r=di.identifierPrefix;if(Xt){var c=ar,d=rr;c=(d&~(1<<32-P(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Fu++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=O1++,r="_"+r+"r_"+c.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Dd,useFormState:am,useActionState:am,useOptimistic:function(n){var r=jn();r.memoizedState=r.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Nd.bind(null,Bt,!0,c),c.dispatch=r,[n,r]},useMemoCache:wd,useCacheRefresh:function(){return jn().memoizedState=R1.bind(null,Bt)},useEffectEvent:function(n){var r=jn(),c={impl:n};return r.memoizedState=c,function(){if((ei&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Rd={readContext:pn,use:Uu,useCallback:vm,useContext:pn,useEffect:Od,useImperativeHandle:mm,useInsertionEffect:dm,useLayoutEffect:gm,useMemo:ym,useReducer:Hu,useRef:um,useState:function(){return Hu(Mr)},useDebugValue:Ed,useDeferredValue:function(n,r){var c=zi();return xm(c,li.memoizedState,n,r)},useTransition:function(){var n=Hu(Mr)[0],r=zi().memoizedState;return[typeof n=="boolean"?n:Kl(n),r]},useSyncExternalStore:W0,useId:wm,useHostTransitionStatus:Dd,useFormState:om,useActionState:om,useOptimistic:function(n,r){var c=zi();return em(c,li,n,r)},useMemoCache:wd,useCacheRefresh:Cm};Rd.useEffectEvent=fm;var Em={readContext:pn,use:Uu,useCallback:vm,useContext:pn,useEffect:Od,useImperativeHandle:mm,useInsertionEffect:dm,useLayoutEffect:gm,useMemo:ym,useReducer:Td,useRef:um,useState:function(){return Td(Mr)},useDebugValue:Ed,useDeferredValue:function(n,r){var c=zi();return li===null?jd(c,n,r):xm(c,li.memoizedState,n,r)},useTransition:function(){var n=Td(Mr)[0],r=zi().memoizedState;return[typeof n=="boolean"?n:Kl(n),r]},useSyncExternalStore:W0,useId:wm,useHostTransitionStatus:Dd,useFormState:cm,useActionState:cm,useOptimistic:function(n,r){var c=zi();return li!==null?em(c,li,n,r):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:wd,useCacheRefresh:Cm};Em.useEffectEvent=fm;function Ld(n,r,c,d){r=n.memoizedState,c=c(d,r),c=c==null?r:C({},r,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Pd={enqueueSetState:function(n,r,c){n=n._reactInternals;var d=os(),_=va(d);_.payload=r,c!=null&&(_.callback=c),r=ya(n,_,d),r!==null&&(qn(r,n,d),ql(r,n,d))},enqueueReplaceState:function(n,r,c){n=n._reactInternals;var d=os(),_=va(d);_.tag=1,_.payload=r,c!=null&&(_.callback=c),r=ya(n,_,d),r!==null&&(qn(r,n,d),ql(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var c=os(),d=va(c);d.tag=2,r!=null&&(d.callback=r),r=ya(n,d,c),r!==null&&(qn(r,n,c),ql(r,n,c))}};function jm(n,r,c,d,_,w,U){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,U):r.prototype&&r.prototype.isPureReactComponent?!Tr(c,d)||!Tr(_,w):!0}function Mm(n,r,c,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==n&&Pd.enqueueReplaceState(r,r.state,null)}function so(n,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(n=n.defaultProps){c===r&&(c=C({},c));for(var _ in n)c[_]===void 0&&(c[_]=n[_])}return c}function Dm(n){Cu(n)}function Nm(n){console.error(n)}function Rm(n){Cu(n)}function qu(n,r){try{var c=n.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Lm(n,r,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Bd(n,r,c){return c=va(c),c.tag=3,c.payload={element:null},c.callback=function(){qu(n,r)},c}function Pm(n){return n=va(n),n.tag=3,n}function Bm(n,r,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var w=d.value;n.payload=function(){return _(w)},n.callback=function(){Lm(r,c,d)}}var U=c.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(n.callback=function(){Lm(r,c,d),typeof _!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var ie=d.stack;this.componentDidCatch(d.value,{componentStack:ie!==null?ie:""})})}function P1(n,r,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&Uo(r,c,_,!0),c=ns.current,c!==null){switch(c.tag){case 31:case 13:return Ss===null?rh():c.alternate===null&&Ri===0&&(Ri=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Ru?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),lg(n,d,_)),!1;case 22:return c.flags|=65536,d===Ru?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),lg(n,d,_)),!1}throw Error(i(435,c.tag))}return lg(n,d,_),rh(),!1}if(Xt)return r=ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,d!==id&&(n=Error(i(422),{cause:d}),Ul(ys(n,c)))):(d!==id&&(r=Error(i(423),{cause:d}),Ul(ys(r,c))),n=n.current.alternate,n.flags|=65536,_&=-_,n.lanes|=_,d=ys(d,c),_=Bd(n.stateNode,d,_),dd(n,_),Ri!==4&&(Ri=2)),!1;var w=Error(i(520),{cause:d});if(w=ys(w,c),oc===null?oc=[w]:oc.push(w),Ri!==4&&(Ri=2),r===null)return!0;d=ys(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,n=_&-_,c.lanes|=n,n=Bd(c.stateNode,d,n),dd(c,n),!1;case 1:if(r=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ca===null||!Ca.has(w))))return c.flags|=65536,_&=-_,c.lanes|=_,_=Pm(_),Bm(_,n,c,d),dd(c,_),!1}c=c.return}while(c!==null);return!1}var zd=Error(i(461)),Xi=!1;function mn(n,r,c,d){r.child=n===null?V0(r,null,c,d):io(r,n.child,c,d)}function zm(n,r,c,d,_){c=c.render;var w=r.ref;if("ref"in d){var U={};for(var ie in d)ie!=="ref"&&(U[ie]=d[ie])}else U=d;return Qa(r),d=xd(n,r,c,U,w,_),ie=bd(),n!==null&&!Xi?(_d(n,r,_),Dr(n,r,_)):(Xt&&ie&&ed(r),r.flags|=1,mn(n,r,d,_),r.child)}function Im(n,r,c,d,_){if(n===null){var w=c.type;return typeof w=="function"&&!Kf(w)&&w.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=w,Fm(n,r,w,d,_)):(n=Ou(c.type,null,d,r,r.mode,_),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!Gd(n,_)){var U=w.memoizedProps;if(c=c.compare,c=c!==null?c:Tr,c(U,d)&&n.ref===r.ref)return Dr(n,r,_)}return r.flags|=1,n=kr(w,d),n.ref=r.ref,n.return=r,r.child=n}function Fm(n,r,c,d,_){if(n!==null){var w=n.memoizedProps;if(Tr(w,d)&&n.ref===r.ref)if(Xi=!1,r.pendingProps=d=w,Gd(n,_))(n.flags&131072)!==0&&(Xi=!0);else return r.lanes=n.lanes,Dr(n,r,_)}return Id(n,r,c,d,_)}function Vm(n,r,c,d){var _=d.children,w=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,n!==null){for(d=r.child=n.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~w}else d=0,r.child=null;return Um(n,r,w,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Du(r,w!==null?w.cachePool:null),w!==null?Y0(r,w):pd(),X0(r);else return d=r.lanes=536870912,Um(n,r,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Du(r,w.cachePool),Y0(r,w),ba(),r.memoizedState=null):(n!==null&&Du(r,null),pd(),ba());return mn(n,r,_,c),r.child}function ec(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Um(n,r,c,d,_){var w=cd();return w=w===null?null:{parent:Hi._currentValue,pool:w},r.memoizedState={baseLanes:c,cachePool:w},n!==null&&Du(r,null),pd(),X0(r),n!==null&&Uo(n,r,d,!0),r.childLanes=_,null}function Wu(n,r){return r=$u({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Hm(n,r,c){return io(r,n.child,null,c),n=Wu(r,r.pendingProps),n.flags|=2,ss(r),r.memoizedState=null,n}function B1(n,r,c){var d=r.pendingProps,_=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Xt){if(d.mode==="hidden")return n=Wu(r,d),r.lanes=536870912,ec(null,n);if(vd(r),(n=Si)?(n=ty(n,_s),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:fa!==null?{id:rr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},c=k0(n),c.return=r,r.child=c,gn=r,Si=null)):n=null,n===null)throw ga(r);return r.lanes=536870912,null}return Wu(r,d)}var w=n.memoizedState;if(w!==null){var U=w.dehydrated;if(vd(r),_)if(r.flags&256)r.flags&=-257,r=Hm(n,r,c);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(Xi||Uo(n,r,c,!1),_=(c&n.childLanes)!==0,Xi||_){if(d=di,d!==null&&(U=ge(d,c),U!==0&&U!==w.retryLane))throw w.retryLane=U,Wa(n,U),qn(d,n,U),zd;rh(),r=Hm(n,r,c)}else n=w.treeContext,Si=ws(U.nextSibling),gn=r,Xt=!0,da=null,_s=!1,n!==null&&E0(r,n),r=Wu(r,d),r.flags|=4096;return r}return n=kr(n.child,{mode:d.mode,children:d.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Zu(n,r){var c=r.ref;if(c===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(n===null||n.ref!==c)&&(r.flags|=4194816)}}function Id(n,r,c,d,_){return Qa(r),c=xd(n,r,c,d,void 0,_),d=bd(),n!==null&&!Xi?(_d(n,r,_),Dr(n,r,_)):(Xt&&d&&ed(r),r.flags|=1,mn(n,r,c,_),r.child)}function Ym(n,r,c,d,_,w){return Qa(r),r.updateQueue=null,c=q0(r,d,c,_),G0(n),d=bd(),n!==null&&!Xi?(_d(n,r,w),Dr(n,r,w)):(Xt&&d&&ed(r),r.flags|=1,mn(n,r,c,w),r.child)}function Xm(n,r,c,d,_){if(Qa(r),r.stateNode===null){var w=zo,U=c.contextType;typeof U=="object"&&U!==null&&(w=pn(U)),w=new c(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Pd,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},hd(r),U=c.contextType,w.context=typeof U=="object"&&U!==null?pn(U):zo,w.state=r.memoizedState,U=c.getDerivedStateFromProps,typeof U=="function"&&(Ld(r,c,U,d),w.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(U=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),U!==w.state&&Pd.enqueueReplaceState(w,w.state,null),Zl(r,d,w,_),Wl(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){w=r.stateNode;var ie=r.memoizedProps,pe=so(c,ie);w.props=pe;var De=w.context,Fe=c.contextType;U=zo,typeof Fe=="object"&&Fe!==null&&(U=pn(Fe));var Xe=c.getDerivedStateFromProps;Fe=typeof Xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",ie=r.pendingProps!==ie,Fe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ie||De!==U)&&Mm(r,w,d,U),ma=!1;var Ne=r.memoizedState;w.state=Ne,Zl(r,d,w,_),Wl(),De=r.memoizedState,ie||Ne!==De||ma?(typeof Xe=="function"&&(Ld(r,c,Xe,d),De=r.memoizedState),(pe=ma||jm(r,c,pe,d,Ne,De,U))?(Fe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=De),w.props=d,w.state=De,w.context=U,d=pe):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,fd(n,r),U=r.memoizedProps,Fe=so(c,U),w.props=Fe,Xe=r.pendingProps,Ne=w.context,De=c.contextType,pe=zo,typeof De=="object"&&De!==null&&(pe=pn(De)),ie=c.getDerivedStateFromProps,(De=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U!==Xe||Ne!==pe)&&Mm(r,w,d,pe),ma=!1,Ne=r.memoizedState,w.state=Ne,Zl(r,d,w,_),Wl();var Le=r.memoizedState;U!==Xe||Ne!==Le||ma||n!==null&&n.dependencies!==null&&ju(n.dependencies)?(typeof ie=="function"&&(Ld(r,c,ie,d),Le=r.memoizedState),(Fe=ma||jm(r,c,Fe,d,Ne,Le,pe)||n!==null&&n.dependencies!==null&&ju(n.dependencies))?(De||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Le,pe),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Le,pe)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||U===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Le),w.props=d,w.state=Le,w.context=pe,d=Fe):(typeof w.componentDidUpdate!="function"||U===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||U===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=1024),d=!1)}return w=d,Zu(n,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&d?(r.child=io(r,n.child,null,_),r.child=io(r,null,c,_)):mn(n,r,c,_),r.memoizedState=w.state,n=r.child):n=Dr(n,r,_),n}function Gm(n,r,c,d){return $a(),r.flags|=256,mn(n,r,c,d),r.child}var Fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(n){return{baseLanes:n,cachePool:L0()}}function Ud(n,r,c){return n=n!==null?n.childLanes&~c:0,r&&(n|=as),n}function qm(n,r,c){var d=r.pendingProps,_=!1,w=(r.flags&128)!==0,U;if((U=w)||(U=n!==null&&n.memoizedState===null?!1:(Bi.current&2)!==0),U&&(_=!0,r.flags&=-129),U=(r.flags&32)!==0,r.flags&=-33,n===null){if(Xt){if(_?xa(r):ba(),(n=Si)?(n=ty(n,_s),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:fa!==null?{id:rr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},c=k0(n),c.return=r,r.child=c,gn=r,Si=null)):n=null,n===null)throw ga(r);return Cg(n)?r.lanes=32:r.lanes=536870912,null}var ie=d.children;return d=d.fallback,_?(ba(),_=r.mode,ie=$u({mode:"hidden",children:ie},_),d=Za(d,_,c,null),ie.return=r,d.return=r,ie.sibling=d,r.child=ie,d=r.child,d.memoizedState=Vd(c),d.childLanes=Ud(n,U,c),r.memoizedState=Fd,ec(null,d)):(xa(r),Hd(r,ie))}var pe=n.memoizedState;if(pe!==null&&(ie=pe.dehydrated,ie!==null)){if(w)r.flags&256?(xa(r),r.flags&=-257,r=Yd(n,r,c)):r.memoizedState!==null?(ba(),r.child=n.child,r.flags|=128,r=null):(ba(),ie=d.fallback,_=r.mode,d=$u({mode:"visible",children:d.children},_),ie=Za(ie,_,c,null),ie.flags|=2,d.return=r,ie.return=r,d.sibling=ie,r.child=d,io(r,n.child,null,c),d=r.child,d.memoizedState=Vd(c),d.childLanes=Ud(n,U,c),r.memoizedState=Fd,r=ec(null,d));else if(xa(r),Cg(ie)){if(U=ie.nextSibling&&ie.nextSibling.dataset,U)var De=U.dgst;U=De,d=Error(i(419)),d.stack="",d.digest=U,Ul({value:d,source:null,stack:null}),r=Yd(n,r,c)}else if(Xi||Uo(n,r,c,!1),U=(c&n.childLanes)!==0,Xi||U){if(U=di,U!==null&&(d=ge(U,c),d!==0&&d!==pe.retryLane))throw pe.retryLane=d,Wa(n,d),qn(U,n,d),zd;wg(ie)||rh(),r=Yd(n,r,c)}else wg(ie)?(r.flags|=192,r.child=n.child,r=null):(n=pe.treeContext,Si=ws(ie.nextSibling),gn=r,Xt=!0,da=null,_s=!1,n!==null&&E0(r,n),r=Hd(r,d.children),r.flags|=4096);return r}return _?(ba(),ie=d.fallback,_=r.mode,pe=n.child,De=pe.sibling,d=kr(pe,{mode:"hidden",children:d.children}),d.subtreeFlags=pe.subtreeFlags&65011712,De!==null?ie=kr(De,ie):(ie=Za(ie,_,c,null),ie.flags|=2),ie.return=r,d.return=r,d.sibling=ie,r.child=d,ec(null,d),d=r.child,ie=n.child.memoizedState,ie===null?ie=Vd(c):(_=ie.cachePool,_!==null?(pe=Hi._currentValue,_=_.parent!==pe?{parent:pe,pool:pe}:_):_=L0(),ie={baseLanes:ie.baseLanes|c,cachePool:_}),d.memoizedState=ie,d.childLanes=Ud(n,U,c),r.memoizedState=Fd,ec(n.child,d)):(xa(r),c=n.child,n=c.sibling,c=kr(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,n!==null&&(U=r.deletions,U===null?(r.deletions=[n],r.flags|=16):U.push(n)),r.child=c,r.memoizedState=null,c)}function Hd(n,r){return r=$u({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function $u(n,r){return n=is(22,n,null,r),n.lanes=0,n}function Yd(n,r,c){return io(r,n.child,null,c),n=Hd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Wm(n,r,c){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),rd(n.return,r,c)}function Xd(n,r,c,d,_,w){var U=n.memoizedState;U===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_,treeForkCount:w}:(U.isBackwards=r,U.rendering=null,U.renderingStartTime=0,U.last=d,U.tail=c,U.tailMode=_,U.treeForkCount=w)}function Zm(n,r,c){var d=r.pendingProps,_=d.revealOrder,w=d.tail;d=d.children;var U=Bi.current,ie=(U&2)!==0;if(ie?(U=U&1|2,r.flags|=128):U&=1,tt(Bi,U),mn(n,r,d,c),d=Xt?Vl:0,!ie&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wm(n,c,r);else if(n.tag===19)Wm(n,c,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(_){case"forwards":for(c=r.child,_=null;c!==null;)n=c.alternate,n!==null&&zu(n)===null&&(_=c),c=c.sibling;c=_,c===null?(_=r.child,r.child=null):(_=c.sibling,c.sibling=null),Xd(r,!1,_,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=r.child,r.child=null;_!==null;){if(n=_.alternate,n!==null&&zu(n)===null){r.child=_;break}n=_.sibling,_.sibling=c,c=_,_=n}Xd(r,!0,c,null,w,d);break;case"together":Xd(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Dr(n,r,c){if(n!==null&&(r.dependencies=n.dependencies),wa|=r.lanes,(c&r.childLanes)===0)if(n!==null){if(Uo(n,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,c=kr(n,n.pendingProps),r.child=c,c.return=r;n.sibling!==null;)n=n.sibling,c=c.sibling=kr(n,n.pendingProps),c.return=r;c.sibling=null}return r.child}function Gd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ju(n)))}function z1(n,r,c){switch(r.tag){case 3:Oi(r,r.stateNode.containerInfo),pa(r,Hi,n.memoizedState.cache),$a();break;case 27:case 5:zt(r);break;case 4:Oi(r,r.stateNode.containerInfo);break;case 10:pa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,vd(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(xa(r),r.flags|=128,null):(c&r.child.childLanes)!==0?qm(n,r,c):(xa(r),n=Dr(n,r,c),n!==null?n.sibling:null);xa(r);break;case 19:var _=(n.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(Uo(n,r,c,!1),d=(c&r.childLanes)!==0),_){if(d)return Zm(n,r,c);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),tt(Bi,Bi.current),d)break;return null;case 22:return r.lanes=0,Vm(n,r,c,r.pendingProps);case 24:pa(r,Hi,n.memoizedState.cache)}return Dr(n,r,c)}function $m(n,r,c){if(n!==null)if(n.memoizedProps!==r.pendingProps)Xi=!0;else{if(!Gd(n,c)&&(r.flags&128)===0)return Xi=!1,z1(n,r,c);Xi=(n.flags&131072)!==0}else Xi=!1,Xt&&(r.flags&1048576)!==0&&O0(r,Vl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(n=eo(r.elementType),r.type=n,typeof n=="function")Kf(n)?(d=so(n,d),r.tag=1,r=Xm(null,r,n,d,c)):(r.tag=0,r=Id(null,r,n,d,c));else{if(n!=null){var _=n.$$typeof;if(_===de){r.tag=11,r=zm(null,r,n,d,c);break e}else if(_===Ee){r.tag=14,r=Im(null,r,n,d,c);break e}}throw r=Ge(n)||n,Error(i(306,r,""))}}return r;case 0:return Id(n,r,r.type,r.pendingProps,c);case 1:return d=r.type,_=so(d,r.pendingProps),Xm(n,r,d,_,c);case 3:e:{if(Oi(r,r.stateNode.containerInfo),n===null)throw Error(i(387));d=r.pendingProps;var w=r.memoizedState;_=w.element,fd(n,r),Zl(r,d,null,c);var U=r.memoizedState;if(d=U.cache,pa(r,Hi,d),d!==w.cache&&ad(r,[Hi],c,!0),Wl(),d=U.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:U.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=Gm(n,r,d,c);break e}else if(d!==_){_=ys(Error(i(424)),r),Ul(_),r=Gm(n,r,d,c);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Si=ws(n.firstChild),gn=r,Xt=!0,da=null,_s=!0,c=V0(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($a(),d===_){r=Dr(n,r,c);break e}mn(n,r,d,c)}r=r.child}return r;case 26:return Zu(n,r),n===null?(c=oy(r.type,null,r.pendingProps,null))?r.memoizedState=c:Xt||(c=r.type,n=r.pendingProps,d=fh(wt.current).createElement(c),d[Ae]=r,d[ze]=n,vn(d,c,n),gt(d),r.stateNode=d):r.memoizedState=oy(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return zt(r),n===null&&Xt&&(d=r.stateNode=sy(r.type,r.pendingProps,wt.current),gn=r,_s=!0,_=Si,Oa(r.type)?(Tg=_,Si=ws(d.firstChild)):Si=_),mn(n,r,r.pendingProps.children,c),Zu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Xt&&((_=d=Si)&&(d=gS(d,r.type,r.pendingProps,_s),d!==null?(r.stateNode=d,gn=r,Si=ws(d.firstChild),_s=!1,_=!0):_=!1),_||ga(r)),zt(r),_=r.type,w=r.pendingProps,U=n!==null?n.memoizedProps:null,d=w.children,bg(_,w)?d=null:U!==null&&bg(_,U)&&(r.flags|=32),r.memoizedState!==null&&(_=xd(n,r,E1,null,null,c),pc._currentValue=_),Zu(n,r),mn(n,r,d,c),r.child;case 6:return n===null&&Xt&&((n=c=Si)&&(c=pS(c,r.pendingProps,_s),c!==null?(r.stateNode=c,gn=r,Si=null,n=!0):n=!1),n||ga(r)),null;case 13:return qm(n,r,c);case 4:return Oi(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=io(r,null,d,c):mn(n,r,d,c),r.child;case 11:return zm(n,r,r.type,r.pendingProps,c);case 7:return mn(n,r,r.pendingProps,c),r.child;case 8:return mn(n,r,r.pendingProps.children,c),r.child;case 12:return mn(n,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,pa(r,r.type,d.value),mn(n,r,d.children,c),r.child;case 9:return _=r.type._context,d=r.pendingProps.children,Qa(r),_=pn(_),d=d(_),r.flags|=1,mn(n,r,d,c),r.child;case 14:return Im(n,r,r.type,r.pendingProps,c);case 15:return Fm(n,r,r.type,r.pendingProps,c);case 19:return Zm(n,r,c);case 31:return B1(n,r,c);case 22:return Vm(n,r,c,r.pendingProps);case 24:return Qa(r),d=pn(Hi),n===null?(_=cd(),_===null&&(_=di,w=od(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=c),_=w),r.memoizedState={parent:d,cache:_},hd(r),pa(r,Hi,_)):((n.lanes&c)!==0&&(fd(n,r),Zl(r,null,null,c),Wl()),_=n.memoizedState,w=r.memoizedState,_.parent!==d?(_={parent:d,cache:d},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),pa(r,Hi,d)):(d=w.cache,pa(r,Hi,d),d!==_.cache&&ad(r,[Hi],c,!0))),mn(n,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Nr(n){n.flags|=4}function qd(n,r,c,d,_){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(_&335544128)===_)if(n.stateNode.complete)n.flags|=8192;else if(wv())n.flags|=8192;else throw to=Ru,ud}else n.flags&=-16777217}function Km(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!fy(r))if(wv())n.flags|=8192;else throw to=Ru,ud}function Ku(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Q():536870912,n.lanes|=r,el|=r)}function tc(n,r){if(!Xt)switch(n.tailMode){case"hidden":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function wi(n){var r=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(r)for(var _=n.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=d,n.childLanes=c,r}function I1(n,r,c){var d=r.pendingProps;switch(td(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(r),null;case 1:return wi(r),null;case 3:return c=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Er(Hi),Ct(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Vo(r)?Nr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nd())),wi(r),null;case 26:var _=r.type,w=r.memoizedState;return n===null?(Nr(r),w!==null?(wi(r),Km(r,w)):(wi(r),qd(r,_,null,d,c))):w?w!==n.memoizedState?(Nr(r),wi(r),Km(r,w)):(wi(r),r.flags&=-16777217):(n=n.memoizedProps,n!==d&&Nr(r),wi(r),qd(r,_,n,d,c)),null;case 27:if(Qt(r),c=wt.current,_=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Nr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return wi(r),null}n=ot.current,Vo(r)?j0(r):(n=sy(_,d,c),r.stateNode=n,Nr(r))}return wi(r),null;case 5:if(Qt(r),_=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Nr(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return wi(r),null}if(w=ot.current,Vo(r))j0(r);else{var U=fh(wt.current);switch(w){case 1:w=U.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:w=U.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":w=U.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":w=U.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":w=U.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?U.createElement("select",{is:d.is}):U.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?U.createElement(_,{is:d.is}):U.createElement(_)}}w[Ae]=r,w[ze]=d;e:for(U=r.child;U!==null;){if(U.tag===5||U.tag===6)w.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===r)break e;for(;U.sibling===null;){if(U.return===null||U.return===r)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}r.stateNode=w;e:switch(vn(w,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Nr(r)}}return wi(r),qd(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,c),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&Nr(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(n=wt.current,Vo(r)){if(n=r.stateNode,c=r.memoizedProps,d=null,_=gn,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}n[Ae]=r,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||qv(n.nodeValue,c)),n||ga(r,!0)}else n=fh(n).createTextNode(d),n[Ae]=r,r.stateNode=n}return wi(r),null;case 31:if(c=r.memoizedState,n===null||n.memoizedState!==null){if(d=Vo(r),c!==null){if(n===null){if(!d)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ae]=r}else $a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wi(r),n=!1}else c=nd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return r.flags&256?(ss(r),r):(ss(r),null);if((r.flags&128)!==0)throw Error(i(558))}return wi(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_=Vo(r),d!==null&&d.dehydrated!==null){if(n===null){if(!_)throw Error(i(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Ae]=r}else $a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wi(r),_=!1}else _=nd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(ss(r),r):(ss(r),null)}return ss(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=r.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==_&&(d.flags|=2048)),c!==n&&c&&(r.child.flags|=8192),Ku(r,r.updateQueue),wi(r),null);case 4:return Ct(),n===null&&pg(r.stateNode.containerInfo),wi(r),null;case 10:return Er(r.type),wi(r),null;case 19:if(Ve(Bi),d=r.memoizedState,d===null)return wi(r),null;if(_=(r.flags&128)!==0,w=d.rendering,w===null)if(_)tc(d,!1);else{if(Ri!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=zu(n),w!==null){for(r.flags|=128,tc(d,!1),n=w.updateQueue,r.updateQueue=n,Ku(r,n),r.subtreeFlags=0,n=c,c=r.child;c!==null;)T0(c,n),c=c.sibling;return tt(Bi,Bi.current&1|2),Xt&&Ar(r,d.treeForkCount),r.child}n=n.sibling}d.tail!==null&&$i()>ih&&(r.flags|=128,_=!0,tc(d,!1),r.lanes=4194304)}else{if(!_)if(n=zu(w),n!==null){if(r.flags|=128,_=!0,n=n.updateQueue,r.updateQueue=n,Ku(r,n),tc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Xt)return wi(r),null}else 2*$i()-d.renderingStartTime>ih&&c!==536870912&&(r.flags|=128,_=!0,tc(d,!1),r.lanes=4194304);d.isBackwards?(w.sibling=r.child,r.child=w):(n=d.last,n!==null?n.sibling=w:r.child=w,d.last=w)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=$i(),n.sibling=null,c=Bi.current,tt(Bi,_?c&1|2:c&1),Xt&&Ar(r,d.treeForkCount),n):(wi(r),null);case 22:case 23:return ss(r),md(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(wi(r),r.subtreeFlags&6&&(r.flags|=8192)):wi(r),c=r.updateQueue,c!==null&&Ku(r,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),n!==null&&Ve(Ja),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Er(Hi),wi(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function F1(n,r){switch(td(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Er(Hi),Ct(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Qt(r),null;case 31:if(r.memoizedState!==null){if(ss(r),r.alternate===null)throw Error(i(340));$a()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(ss(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));$a()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ve(Bi),null;case 4:return Ct(),null;case 10:return Er(r.type),null;case 22:case 23:return ss(r),md(),n!==null&&Ve(Ja),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Er(Hi),null;case 25:return null;default:return null}}function Qm(n,r){switch(td(r),r.tag){case 3:Er(Hi),Ct();break;case 26:case 27:case 5:Qt(r);break;case 4:Ct();break;case 31:r.memoizedState!==null&&ss(r);break;case 13:ss(r);break;case 19:Ve(Bi);break;case 10:Er(r.type);break;case 22:case 23:ss(r),md(),n!==null&&Ve(Ja);break;case 24:Er(Hi)}}function ic(n,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&n)===n){d=void 0;var w=c.create,U=c.inst;d=w(),U.destroy=d}c=c.next}while(c!==_)}}catch(ie){ai(r,r.return,ie)}}function _a(n,r,c){try{var d=r.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var w=_.next;d=w;do{if((d.tag&n)===n){var U=d.inst,ie=U.destroy;if(ie!==void 0){U.destroy=void 0,_=r;var pe=c,De=ie;try{De()}catch(Fe){ai(_,pe,Fe)}}}d=d.next}while(d!==w)}}catch(Fe){ai(r,r.return,Fe)}}function Jm(n){var r=n.updateQueue;if(r!==null){var c=n.stateNode;try{H0(r,c)}catch(d){ai(n,n.return,d)}}}function ev(n,r,c){c.props=so(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){ai(n,r,d)}}function nc(n,r){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(_){ai(n,r,_)}}function or(n,r){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){ai(n,r,_)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){ai(n,r,_)}else c.current=null}function tv(n){var r=n.type,c=n.memoizedProps,d=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){ai(n,n.return,_)}}function Wd(n,r,c){try{var d=n.stateNode;lS(d,n.type,c,r),d[ze]=r}catch(_){ai(n,n.return,_)}}function iv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Oa(n.type)||n.tag===4}function Zd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||iv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Oa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $d(n,r,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(n),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=tn));else if(d!==4&&(d===27&&Oa(n.type)&&(c=n.stateNode,r=null),n=n.child,n!==null))for($d(n,r,c),n=n.sibling;n!==null;)$d(n,r,c),n=n.sibling}function Qu(n,r,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?c.insertBefore(n,r):c.appendChild(n);else if(d!==4&&(d===27&&Oa(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(Qu(n,r,c),n=n.sibling;n!==null;)Qu(n,r,c),n=n.sibling}function nv(n){var r=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);vn(r,d,c),r[Ae]=n,r[ze]=c}catch(w){ai(n,n.return,w)}}var Rr=!1,Gi=!1,Kd=!1,sv=typeof WeakSet=="function"?WeakSet:Set,on=null;function V1(n,r){if(n=n.containerInfo,yg=xh,n=Su(n),Il(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var U=0,ie=-1,pe=-1,De=0,Fe=0,Xe=n,Ne=null;t:for(;;){for(var Le;Xe!==c||_!==0&&Xe.nodeType!==3||(ie=U+_),Xe!==w||d!==0&&Xe.nodeType!==3||(pe=U+d),Xe.nodeType===3&&(U+=Xe.nodeValue.length),(Le=Xe.firstChild)!==null;)Ne=Xe,Xe=Le;for(;;){if(Xe===n)break t;if(Ne===c&&++De===_&&(ie=U),Ne===w&&++Fe===d&&(pe=U),(Le=Xe.nextSibling)!==null)break;Xe=Ne,Ne=Xe.parentNode}Xe=Le}c=ie===-1||pe===-1?null:{start:ie,end:pe}}else c=null}c=c||{start:0,end:0}}else c=null;for(xg={focusedElem:n,selectionRange:c},xh=!1,on=r;on!==null;)if(r=on,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,on=n;else for(;on!==null;){switch(r=on,w=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)_=n[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,c=r,_=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var dt=so(c.type,_);n=d.getSnapshotBeforeUpdate(dt,w),d.__reactInternalSnapshotBeforeUpdate=n}catch(Et){ai(c,c.return,Et)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,c=n.nodeType,c===9)Sg(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,on=n;break}on=r.return}}function rv(n,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Pr(n,c),d&4&&ic(5,c);break;case 1:if(Pr(n,c),d&4)if(n=c.stateNode,r===null)try{n.componentDidMount()}catch(U){ai(c,c.return,U)}else{var _=so(c.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(_,r,n.__reactInternalSnapshotBeforeUpdate)}catch(U){ai(c,c.return,U)}}d&64&&Jm(c),d&512&&nc(c,c.return);break;case 3:if(Pr(n,c),d&64&&(n=c.updateQueue,n!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{H0(n,r)}catch(U){ai(c,c.return,U)}}break;case 27:r===null&&d&4&&nv(c);case 26:case 5:Pr(n,c),r===null&&d&4&&tv(c),d&512&&nc(c,c.return);break;case 12:Pr(n,c);break;case 31:Pr(n,c),d&4&&lv(n,c);break;case 13:Pr(n,c),d&4&&cv(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=$1.bind(null,c),mS(n,c))));break;case 22:if(d=c.memoizedState!==null||Rr,!d){r=r!==null&&r.memoizedState!==null||Gi,_=Rr;var w=Gi;Rr=d,(Gi=r)&&!w?Br(n,c,(c.subtreeFlags&8772)!==0):Pr(n,c),Rr=_,Gi=w}break;case 30:break;default:Pr(n,c)}}function av(n){var r=n.alternate;r!==null&&(n.alternate=null,av(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&at(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ti=null,Hn=!1;function Lr(n,r,c){for(c=c.child;c!==null;)ov(n,r,c),c=c.sibling}function ov(n,r,c){if(j&&typeof j.onCommitFiberUnmount=="function")try{j.onCommitFiberUnmount(O,c)}catch{}switch(c.tag){case 26:Gi||or(c,r),Lr(n,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Gi||or(c,r);var d=Ti,_=Hn;Oa(c.type)&&(Ti=c.stateNode,Hn=!1),Lr(n,r,c),fc(c.stateNode),Ti=d,Hn=_;break;case 5:Gi||or(c,r);case 6:if(d=Ti,_=Hn,Ti=null,Lr(n,r,c),Ti=d,Hn=_,Ti!==null)if(Hn)try{(Ti.nodeType===9?Ti.body:Ti.nodeName==="HTML"?Ti.ownerDocument.body:Ti).removeChild(c.stateNode)}catch(w){ai(c,r,w)}else try{Ti.removeChild(c.stateNode)}catch(w){ai(c,r,w)}break;case 18:Ti!==null&&(Hn?(n=Ti,Jv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),ll(n)):Jv(Ti,c.stateNode));break;case 4:d=Ti,_=Hn,Ti=c.stateNode.containerInfo,Hn=!0,Lr(n,r,c),Ti=d,Hn=_;break;case 0:case 11:case 14:case 15:_a(2,c,r),Gi||_a(4,c,r),Lr(n,r,c);break;case 1:Gi||(or(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&ev(c,r,d)),Lr(n,r,c);break;case 21:Lr(n,r,c);break;case 22:Gi=(d=Gi)||c.memoizedState!==null,Lr(n,r,c),Gi=d;break;default:Lr(n,r,c)}}function lv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ll(n)}catch(c){ai(r,r.return,c)}}}function cv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ll(n)}catch(c){ai(r,r.return,c)}}function U1(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new sv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new sv),r;default:throw Error(i(435,n.tag))}}function Ju(n,r){var c=U1(n);r.forEach(function(d){if(!c.has(d)){c.add(d);var _=K1.bind(null,n,d);d.then(_,_)}})}function Yn(n,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],w=n,U=r,ie=U;e:for(;ie!==null;){switch(ie.tag){case 27:if(Oa(ie.type)){Ti=ie.stateNode,Hn=!1;break e}break;case 5:Ti=ie.stateNode,Hn=!1;break e;case 3:case 4:Ti=ie.stateNode.containerInfo,Hn=!0;break e}ie=ie.return}if(Ti===null)throw Error(i(160));ov(w,U,_),Ti=null,Hn=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)uv(r,n),r=r.sibling}var Bs=null;function uv(n,r){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Yn(r,n),Xn(n),d&4&&(_a(3,n,n.return),ic(3,n),_a(5,n,n.return));break;case 1:Yn(r,n),Xn(n),d&512&&(Gi||c===null||or(c,c.return)),d&64&&Rr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=Bs;if(Yn(r,n),Xn(n),d&512&&(Gi||c===null||or(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){e:{d=n.type,c=n.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":w=_.getElementsByTagName("title")[0],(!w||w[Qe]||w[Ae]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(d),_.head.insertBefore(w,_.querySelector("head > title"))),vn(w,d,c),w[Ae]=n,gt(w),d=w;break e;case"link":var U=uy("link","href",_).get(d+(c.href||""));if(U){for(var ie=0;ie<U.length;ie++)if(w=U[ie],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){U.splice(ie,1);break t}}w=_.createElement(d),vn(w,d,c),_.head.appendChild(w);break;case"meta":if(U=uy("meta","content",_).get(d+(c.content||""))){for(ie=0;ie<U.length;ie++)if(w=U[ie],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){U.splice(ie,1);break t}}w=_.createElement(d),vn(w,d,c),_.head.appendChild(w);break;default:throw Error(i(468,d))}w[Ae]=n,gt(w),d=w}n.stateNode=d}else hy(_,n.type,n.stateNode);else n.stateNode=cy(_,d,n.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?hy(_,n.type,n.stateNode):cy(_,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Wd(n,n.memoizedProps,c.memoizedProps)}break;case 27:Yn(r,n),Xn(n),d&512&&(Gi||c===null||or(c,c.return)),c!==null&&d&4&&Wd(n,n.memoizedProps,c.memoizedProps);break;case 5:if(Yn(r,n),Xn(n),d&512&&(Gi||c===null||or(c,c.return)),n.flags&32){_=n.stateNode;try{In(_,"")}catch(dt){ai(n,n.return,dt)}}d&4&&n.stateNode!=null&&(_=n.memoizedProps,Wd(n,_,c!==null?c.memoizedProps:_)),d&1024&&(Kd=!0);break;case 6:if(Yn(r,n),Xn(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(dt){ai(n,n.return,dt)}}break;case 3:if(ph=null,_=Bs,Bs=dh(r.containerInfo),Yn(r,n),Bs=_,Xn(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{ll(r.containerInfo)}catch(dt){ai(n,n.return,dt)}Kd&&(Kd=!1,hv(n));break;case 4:d=Bs,Bs=dh(n.stateNode.containerInfo),Yn(r,n),Xn(n),Bs=d;break;case 12:Yn(r,n),Xn(n);break;case 31:Yn(r,n),Xn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ju(n,d)));break;case 13:Yn(r,n),Xn(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(th=$i()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ju(n,d)));break;case 22:_=n.memoizedState!==null;var pe=c!==null&&c.memoizedState!==null,De=Rr,Fe=Gi;if(Rr=De||_,Gi=Fe||pe,Yn(r,n),Gi=Fe,Rr=De,Xn(n),d&8192)e:for(r=n.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(c===null||pe||Rr||Gi||ro(n)),c=null,r=n;;){if(r.tag===5||r.tag===26){if(c===null){pe=c=r;try{if(w=pe.stateNode,_)U=w.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{ie=pe.stateNode;var Xe=pe.memoizedProps.style,Ne=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;ie.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(dt){ai(pe,pe.return,dt)}}}else if(r.tag===6){if(c===null){pe=r;try{pe.stateNode.nodeValue=_?"":pe.memoizedProps}catch(dt){ai(pe,pe.return,dt)}}}else if(r.tag===18){if(c===null){pe=r;try{var Le=pe.stateNode;_?ey(Le,!0):ey(pe.stateNode,!1)}catch(dt){ai(pe,pe.return,dt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Ju(n,c))));break;case 19:Yn(r,n),Xn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Ju(n,d)));break;case 30:break;case 21:break;default:Yn(r,n),Xn(n)}}function Xn(n){var r=n.flags;if(r&2){try{for(var c,d=n.return;d!==null;){if(iv(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var _=c.stateNode,w=Zd(n);Qu(n,w,_);break;case 5:var U=c.stateNode;c.flags&32&&(In(U,""),c.flags&=-33);var ie=Zd(n);Qu(n,ie,U);break;case 3:case 4:var pe=c.stateNode.containerInfo,De=Zd(n);$d(n,De,pe);break;default:throw Error(i(161))}}catch(Fe){ai(n,n.return,Fe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function hv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;hv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Pr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)rv(n,r.alternate,r),r=r.sibling}function ro(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:_a(4,r,r.return),ro(r);break;case 1:or(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&ev(r,r.return,c),ro(r);break;case 27:fc(r.stateNode);case 26:case 5:or(r,r.return),ro(r);break;case 22:r.memoizedState===null&&ro(r);break;case 30:ro(r);break;default:ro(r)}n=n.sibling}}function Br(n,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,_=n,w=r,U=w.flags;switch(w.tag){case 0:case 11:case 15:Br(_,w,c),ic(4,w);break;case 1:if(Br(_,w,c),d=w,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(De){ai(d,d.return,De)}if(d=w,_=d.updateQueue,_!==null){var ie=d.stateNode;try{var pe=_.shared.hiddenCallbacks;if(pe!==null)for(_.shared.hiddenCallbacks=null,_=0;_<pe.length;_++)U0(pe[_],ie)}catch(De){ai(d,d.return,De)}}c&&U&64&&Jm(w),nc(w,w.return);break;case 27:nv(w);case 26:case 5:Br(_,w,c),c&&d===null&&U&4&&tv(w),nc(w,w.return);break;case 12:Br(_,w,c);break;case 31:Br(_,w,c),c&&U&4&&lv(_,w);break;case 13:Br(_,w,c),c&&U&4&&cv(_,w);break;case 22:w.memoizedState===null&&Br(_,w,c),nc(w,w.return);break;case 30:break;default:Br(_,w,c)}r=r.sibling}}function Qd(n,r){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Hl(c))}function Jd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Hl(n))}function zs(n,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fv(n,r,c,d),r=r.sibling}function fv(n,r,c,d){var _=r.flags;switch(r.tag){case 0:case 11:case 15:zs(n,r,c,d),_&2048&&ic(9,r);break;case 1:zs(n,r,c,d);break;case 3:zs(n,r,c,d),_&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Hl(n)));break;case 12:if(_&2048){zs(n,r,c,d),n=r.stateNode;try{var w=r.memoizedProps,U=w.id,ie=w.onPostCommit;typeof ie=="function"&&ie(U,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(pe){ai(r,r.return,pe)}}else zs(n,r,c,d);break;case 31:zs(n,r,c,d);break;case 13:zs(n,r,c,d);break;case 23:break;case 22:w=r.stateNode,U=r.alternate,r.memoizedState!==null?w._visibility&2?zs(n,r,c,d):sc(n,r):w._visibility&2?zs(n,r,c,d):(w._visibility|=2,Ko(n,r,c,d,(r.subtreeFlags&10256)!==0||!1)),_&2048&&Qd(U,r);break;case 24:zs(n,r,c,d),_&2048&&Jd(r.alternate,r);break;default:zs(n,r,c,d)}}function Ko(n,r,c,d,_){for(_=_&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=n,U=r,ie=c,pe=d,De=U.flags;switch(U.tag){case 0:case 11:case 15:Ko(w,U,ie,pe,_),ic(8,U);break;case 23:break;case 22:var Fe=U.stateNode;U.memoizedState!==null?Fe._visibility&2?Ko(w,U,ie,pe,_):sc(w,U):(Fe._visibility|=2,Ko(w,U,ie,pe,_)),_&&De&2048&&Qd(U.alternate,U);break;case 24:Ko(w,U,ie,pe,_),_&&De&2048&&Jd(U.alternate,U);break;default:Ko(w,U,ie,pe,_)}r=r.sibling}}function sc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=n,d=r,_=d.flags;switch(d.tag){case 22:sc(c,d),_&2048&&Qd(d.alternate,d);break;case 24:sc(c,d),_&2048&&Jd(d.alternate,d);break;default:sc(c,d)}r=r.sibling}}var rc=8192;function Qo(n,r,c){if(n.subtreeFlags&rc)for(n=n.child;n!==null;)dv(n,r,c),n=n.sibling}function dv(n,r,c){switch(n.tag){case 26:Qo(n,r,c),n.flags&rc&&n.memoizedState!==null&&OS(c,Bs,n.memoizedState,n.memoizedProps);break;case 5:Qo(n,r,c);break;case 3:case 4:var d=Bs;Bs=dh(n.stateNode.containerInfo),Qo(n,r,c),Bs=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=rc,rc=16777216,Qo(n,r,c),rc=d):Qo(n,r,c));break;default:Qo(n,r,c)}}function gv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function ac(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];on=d,mv(d,n)}gv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)pv(n),n=n.sibling}function pv(n){switch(n.tag){case 0:case 11:case 15:ac(n),n.flags&2048&&_a(9,n,n.return);break;case 3:ac(n);break;case 12:ac(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,eh(n)):ac(n);break;default:ac(n)}}function eh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];on=d,mv(d,n)}gv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:_a(8,r,r.return),eh(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,eh(r));break;default:eh(r)}n=n.sibling}}function mv(n,r){for(;on!==null;){var c=on;switch(c.tag){case 0:case 11:case 15:_a(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Hl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,on=d;else e:for(c=n;on!==null;){d=on;var _=d.sibling,w=d.return;if(av(d),d===c){on=null;break e}if(_!==null){_.return=w,on=_;break e}on=w}}}var H1={getCacheForType:function(n){var r=pn(Hi),c=r.data.get(n);return c===void 0&&(c=n(),r.data.set(n,c)),c},cacheSignal:function(){return pn(Hi).controller.signal}},Y1=typeof WeakMap=="function"?WeakMap:Map,ei=0,di=null,Ft=null,Ht=0,ri=0,rs=null,Sa=!1,Jo=!1,eg=!1,zr=0,Ri=0,wa=0,ao=0,tg=0,as=0,el=0,oc=null,Gn=null,ig=!1,th=0,vv=0,ih=1/0,nh=null,Ca=null,nn=0,Ta=null,tl=null,Ir=0,ng=0,sg=null,yv=null,lc=0,rg=null;function os(){return(ei&2)!==0&&Ht!==0?Ht&-Ht:he.T!==null?hg():me()}function xv(){if(as===0)if((Ht&536870912)===0||Xt){var n=Y;Y<<=1,(Y&3932160)===0&&(Y=262144),as=n}else as=536870912;return n=ns.current,n!==null&&(n.flags|=32),as}function qn(n,r,c){(n===di&&(ri===2||ri===9)||n.cancelPendingCommit!==null)&&(il(n,0),ka(n,Ht,as,!1)),W(n,c),((ei&2)===0||n!==di)&&(n===di&&((ei&2)===0&&(ao|=c),Ri===4&&ka(n,Ht,as,!1)),lr(n))}function bv(n,r,c){if((ei&6)!==0)throw Error(i(327));var d=!c&&(r&127)===0&&(r&n.expiredLanes)===0||D(n,r),_=d?q1(n,r):og(n,r,!0),w=d;do{if(_===0){Jo&&!d&&ka(n,r,0,!1);break}else{if(c=n.current.alternate,w&&!X1(c)){_=og(n,r,!1),w=!1;continue}if(_===2){if(w=r,n.errorRecoveryDisabledLanes&w)var U=0;else U=n.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){r=U;e:{var ie=n;_=oc;var pe=ie.current.memoizedState.isDehydrated;if(pe&&(il(ie,U).flags|=256),U=og(ie,U,!1),U!==2){if(eg&&!pe){ie.errorRecoveryDisabledLanes|=w,ao|=w,_=4;break e}w=Gn,Gn=_,w!==null&&(Gn===null?Gn=w:Gn.push.apply(Gn,w))}_=U}if(w=!1,_!==2)continue}}if(_===1){il(n,0),ka(n,r,0,!0);break}e:{switch(d=n,w=_,w){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ka(d,r,as,!Sa);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(_=th+300-$i(),10<_)){if(ka(d,r,as,!Sa),q(d,0,!0)!==0)break e;Ir=r,d.timeoutHandle=Kv(_v.bind(null,d,c,Gn,nh,ig,r,as,ao,el,Sa,w,"Throttled",-0,0),_);break e}_v(d,c,Gn,nh,ig,r,as,ao,el,Sa,w,null,-0,0)}}break}while(!0);lr(n)}function _v(n,r,c,d,_,w,U,ie,pe,De,Fe,Xe,Ne,Le){if(n.timeoutHandle=-1,Xe=r.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tn},dv(r,w,Xe);var dt=(w&62914560)===w?th-$i():(w&4194048)===w?vv-$i():0;if(dt=ES(Xe,dt),dt!==null){Ir=w,n.cancelPendingCommit=dt(Ev.bind(null,n,r,w,c,d,_,U,ie,pe,Fe,Xe,null,Ne,Le)),ka(n,w,U,!De);return}}Ev(n,r,w,c,d,_,U,ie,pe)}function X1(n){for(var r=n;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],w=_.getSnapshot;_=_.value;try{if(!dn(w(),_))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ka(n,r,c,d){r&=~tg,r&=~ao,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var _=r;0<_;){var w=31-P(_),U=1<<w;d[w]=-1,_&=~U}c!==0&&oe(n,c,r)}function sh(){return(ei&6)===0?(cc(0),!1):!0}function ag(){if(Ft!==null){if(ri===0)var n=Ft.return;else n=Ft,Or=Ka=null,Sd(n),Go=null,Xl=0,n=Ft;for(;n!==null;)Qm(n.alternate,n),n=n.return;Ft=null}}function il(n,r){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,hS(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Ir=0,ag(),di=n,Ft=c=kr(n.current,null),Ht=r,ri=0,rs=null,Sa=!1,Jo=D(n,r),eg=!1,el=as=tg=ao=wa=Ri=0,Gn=oc=null,ig=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var _=31-P(d),w=1<<_;r|=n[_],d&=~w}return zr=r,Tu(),c}function Sv(n,r){Bt=null,he.H=Jl,r===Xo||r===Nu?(r=z0(),ri=3):r===ud?(r=z0(),ri=4):ri=r===zd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,rs=r,Ft===null&&(Ri=1,qu(n,ys(r,n.current)))}function wv(){var n=ns.current;return n===null?!0:(Ht&4194048)===Ht?Ss===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?n===Ss:!1}function Cv(){var n=he.H;return he.H=Jl,n===null?Jl:n}function Tv(){var n=he.A;return he.A=H1,n}function rh(){Ri=4,Sa||(Ht&4194048)!==Ht&&ns.current!==null||(Jo=!0),(wa&134217727)===0&&(ao&134217727)===0||di===null||ka(di,Ht,as,!1)}function og(n,r,c){var d=ei;ei|=2;var _=Cv(),w=Tv();(di!==n||Ht!==r)&&(nh=null,il(n,r)),r=!1;var U=Ri;e:do try{if(ri!==0&&Ft!==null){var ie=Ft,pe=rs;switch(ri){case 8:ag(),U=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(r=!0);var De=ri;if(ri=0,rs=null,nl(n,ie,pe,De),c&&Jo){U=0;break e}break;default:De=ri,ri=0,rs=null,nl(n,ie,pe,De)}}G1(),U=Ri;break}catch(Fe){Sv(n,Fe)}while(!0);return r&&n.shellSuspendCounter++,Or=Ka=null,ei=d,he.H=_,he.A=w,Ft===null&&(di=null,Ht=0,Tu()),U}function G1(){for(;Ft!==null;)kv(Ft)}function q1(n,r){var c=ei;ei|=2;var d=Cv(),_=Tv();di!==n||Ht!==r?(nh=null,ih=$i()+500,il(n,r)):Jo=D(n,r);e:do try{if(ri!==0&&Ft!==null){r=Ft;var w=rs;t:switch(ri){case 1:ri=0,rs=null,nl(n,r,w,1);break;case 2:case 9:if(P0(w)){ri=0,rs=null,Av(r);break}r=function(){ri!==2&&ri!==9||di!==n||(ri=7),lr(n)},w.then(r,r);break e;case 3:ri=7;break e;case 4:ri=5;break e;case 7:P0(w)?(ri=0,rs=null,Av(r)):(ri=0,rs=null,nl(n,r,w,7));break;case 5:var U=null;switch(Ft.tag){case 26:U=Ft.memoizedState;case 5:case 27:var ie=Ft;if(U?fy(U):ie.stateNode.complete){ri=0,rs=null;var pe=ie.sibling;if(pe!==null)Ft=pe;else{var De=ie.return;De!==null?(Ft=De,ah(De)):Ft=null}break t}}ri=0,rs=null,nl(n,r,w,5);break;case 6:ri=0,rs=null,nl(n,r,w,6);break;case 8:ag(),Ri=6;break e;default:throw Error(i(462))}}W1();break}catch(Fe){Sv(n,Fe)}while(!0);return Or=Ka=null,he.H=d,he.A=_,ei=c,Ft!==null?0:(di=null,Ht=0,Tu(),Ri)}function W1(){for(;Ft!==null&&!mr();)kv(Ft)}function kv(n){var r=$m(n.alternate,n,zr);n.memoizedProps=n.pendingProps,r===null?ah(n):Ft=r}function Av(n){var r=n,c=r.alternate;switch(r.tag){case 15:case 0:r=Ym(c,r,r.pendingProps,r.type,void 0,Ht);break;case 11:r=Ym(c,r,r.pendingProps,r.type.render,r.ref,Ht);break;case 5:Sd(r);default:Qm(c,r),r=Ft=T0(r,zr),r=$m(c,r,zr)}n.memoizedProps=n.pendingProps,r===null?ah(n):Ft=r}function nl(n,r,c,d){Or=Ka=null,Sd(r),Go=null,Xl=0;var _=r.return;try{if(P1(n,_,r,c,Ht)){Ri=1,qu(n,ys(c,n.current)),Ft=null;return}}catch(w){if(_!==null)throw Ft=_,w;Ri=1,qu(n,ys(c,n.current)),Ft=null;return}r.flags&32768?(Xt||d===1?n=!0:Jo||(Ht&536870912)!==0?n=!1:(Sa=n=!0,(d===2||d===9||d===3||d===6)&&(d=ns.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ov(r,n)):ah(r)}function ah(n){var r=n;do{if((r.flags&32768)!==0){Ov(r,Sa);return}n=r.return;var c=I1(r.alternate,r,zr);if(c!==null){Ft=c;return}if(r=r.sibling,r!==null){Ft=r;return}Ft=r=n}while(r!==null);Ri===0&&(Ri=5)}function Ov(n,r){do{var c=F1(n.alternate,n);if(c!==null){c.flags&=32767,Ft=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(n=n.sibling,n!==null)){Ft=n;return}Ft=n=c}while(n!==null);Ri=6,Ft=null}function Ev(n,r,c,d,_,w,U,ie,pe){n.cancelPendingCommit=null;do oh();while(nn!==0);if((ei&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(w=r.lanes|r.childLanes,w|=Zf,se(n,c,w,U,ie,pe),n===di&&(Ft=di=null,Ht=0),tl=r,Ta=n,Ir=c,ng=w,sg=_,yv=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Q1(g,function(){return Rv(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=he.T,he.T=null,_=qe.p,qe.p=2,U=ei,ei|=4;try{V1(n,r,c)}finally{ei=U,qe.p=_,he.T=d}}nn=1,jv(),Mv(),Dv()}}function jv(){if(nn===1){nn=0;var n=Ta,r=tl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=he.T,he.T=null;var d=qe.p;qe.p=2;var _=ei;ei|=4;try{uv(r,n);var w=xg,U=Su(n.containerInfo),ie=w.focusedElem,pe=w.selectionRange;if(U!==ie&&ie&&ie.ownerDocument&&Lo(ie.ownerDocument.documentElement,ie)){if(pe!==null&&Il(ie)){var De=pe.start,Fe=pe.end;if(Fe===void 0&&(Fe=De),"selectionStart"in ie)ie.selectionStart=De,ie.selectionEnd=Math.min(Fe,ie.value.length);else{var Xe=ie.ownerDocument||document,Ne=Xe&&Xe.defaultView||window;if(Ne.getSelection){var Le=Ne.getSelection(),dt=ie.textContent.length,Et=Math.min(pe.start,dt),ui=pe.end===void 0?Et:Math.min(pe.end,dt);!Le.extend&&Et>ui&&(U=ui,ui=Et,Et=U);var Oe=ha(ie,Et),Se=ha(ie,ui);if(Oe&&Se&&(Le.rangeCount!==1||Le.anchorNode!==Oe.node||Le.anchorOffset!==Oe.offset||Le.focusNode!==Se.node||Le.focusOffset!==Se.offset)){var je=Xe.createRange();je.setStart(Oe.node,Oe.offset),Le.removeAllRanges(),Et>ui?(Le.addRange(je),Le.extend(Se.node,Se.offset)):(je.setEnd(Se.node,Se.offset),Le.addRange(je))}}}}for(Xe=[],Le=ie;Le=Le.parentNode;)Le.nodeType===1&&Xe.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<Xe.length;ie++){var He=Xe[ie];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}xh=!!yg,xg=yg=null}finally{ei=_,qe.p=d,he.T=c}}n.current=r,nn=2}}function Mv(){if(nn===2){nn=0;var n=Ta,r=tl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=he.T,he.T=null;var d=qe.p;qe.p=2;var _=ei;ei|=4;try{rv(n,r.alternate,r)}finally{ei=_,qe.p=d,he.T=c}}nn=3}}function Dv(){if(nn===4||nn===3){nn=0,Wt();var n=Ta,r=tl,c=Ir,d=yv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?nn=5:(nn=0,tl=Ta=null,Nv(n,n.pendingLanes));var _=n.pendingLanes;if(_===0&&(Ca=null),ue(c),r=r.stateNode,j&&typeof j.onCommitFiberRoot=="function")try{j.onCommitFiberRoot(O,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=he.T,_=qe.p,qe.p=2,he.T=null;try{for(var w=n.onRecoverableError,U=0;U<d.length;U++){var ie=d[U];w(ie.value,{componentStack:ie.stack})}}finally{he.T=r,qe.p=_}}(Ir&3)!==0&&oh(),lr(n),_=n.pendingLanes,(c&261930)!==0&&(_&42)!==0?n===rg?lc++:(lc=0,rg=n):lc=0,cc(0)}}function Nv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Hl(r)))}function oh(){return jv(),Mv(),Dv(),Rv()}function Rv(){if(nn!==5)return!1;var n=Ta,r=ng;ng=0;var c=ue(Ir),d=he.T,_=qe.p;try{qe.p=32>c?32:c,he.T=null,c=sg,sg=null;var w=Ta,U=Ir;if(nn=0,tl=Ta=null,Ir=0,(ei&6)!==0)throw Error(i(331));var ie=ei;if(ei|=4,pv(w.current),fv(w,w.current,U,c),ei=ie,cc(0,!1),j&&typeof j.onPostCommitFiberRoot=="function")try{j.onPostCommitFiberRoot(O,w)}catch{}return!0}finally{qe.p=_,he.T=d,Nv(n,r)}}function Lv(n,r,c){r=ys(c,r),r=Bd(n.stateNode,r,2),n=ya(n,r,2),n!==null&&(W(n,2),lr(n))}function ai(n,r,c){if(n.tag===3)Lv(n,n,c);else for(;r!==null;){if(r.tag===3){Lv(r,n,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ca===null||!Ca.has(d))){n=ys(c,n),c=Pm(2),d=ya(r,c,2),d!==null&&(Bm(c,d,r,n),W(d,2),lr(d));break}}r=r.return}}function lg(n,r,c){var d=n.pingCache;if(d===null){d=n.pingCache=new Y1;var _=new Set;d.set(r,_)}else _=d.get(r),_===void 0&&(_=new Set,d.set(r,_));_.has(c)||(eg=!0,_.add(c),n=Z1.bind(null,n,r,c),r.then(n,n))}function Z1(n,r,c){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,di===n&&(Ht&c)===c&&(Ri===4||Ri===3&&(Ht&62914560)===Ht&&300>$i()-th?(ei&2)===0&&il(n,0):tg|=c,el===Ht&&(el=0)),lr(n)}function Pv(n,r){r===0&&(r=Q()),n=Wa(n,r),n!==null&&(W(n,r),lr(n))}function $1(n){var r=n.memoizedState,c=0;r!==null&&(c=r.retryLane),Pv(n,c)}function K1(n,r){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,_=n.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),Pv(n,c)}function Q1(n,r){return er(n,r)}var lh=null,sl=null,cg=!1,ch=!1,ug=!1,Aa=0;function lr(n){n!==sl&&n.next===null&&(sl===null?lh=sl=n:sl=sl.next=n),ch=!0,cg||(cg=!0,eS())}function cc(n,r){if(!ug&&ch){ug=!0;do for(var c=!1,d=lh;d!==null;){if(n!==0){var _=d.pendingLanes;if(_===0)var w=0;else{var U=d.suspendedLanes,ie=d.pingedLanes;w=(1<<31-P(42|n)+1)-1,w&=_&~(U&~ie),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Fv(d,w))}else w=Ht,w=q(d,d===di?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||D(d,w)||(c=!0,Fv(d,w));d=d.next}while(c);ug=!1}}function J1(){Bv()}function Bv(){ch=cg=!1;var n=0;Aa!==0&&uS()&&(n=Aa);for(var r=$i(),c=null,d=lh;d!==null;){var _=d.next,w=zv(d,r);w===0?(d.next=null,c===null?lh=_:c.next=_,_===null&&(sl=c)):(c=d,(n!==0||(w&3)!==0)&&(ch=!0)),d=_}nn!==0&&nn!==5||cc(n),Aa!==0&&(Aa=0)}function zv(n,r){for(var c=n.suspendedLanes,d=n.pingedLanes,_=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var U=31-P(w),ie=1<<U,pe=_[U];pe===-1?((ie&c)===0||(ie&d)!==0)&&(_[U]=X(ie,r)):pe<=r&&(n.expiredLanes|=ie),w&=~ie}if(r=di,c=Ht,c=q(n,n===r?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===r&&(ri===2||ri===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&oi(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||D(n,c)){if(r=c&-c,r===n.callbackPriority)return r;switch(d!==null&&oi(d),ue(c)){case 2:case 8:c=h;break;case 32:c=g;break;case 268435456:c=x;break;default:c=g}return d=Iv.bind(null,n),c=er(c,d),n.callbackPriority=r,n.callbackNode=c,r}return d!==null&&d!==null&&oi(d),n.callbackPriority=2,n.callbackNode=null,2}function Iv(n,r){if(nn!==0&&nn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(oh()&&n.callbackNode!==c)return null;var d=Ht;return d=q(n,n===di?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(bv(n,d,r),zv(n,$i()),n.callbackNode!=null&&n.callbackNode===c?Iv.bind(null,n):null)}function Fv(n,r){if(oh())return null;bv(n,r,!0)}function eS(){fS(function(){(ei&6)!==0?er(l,J1):Bv()})}function hg(){if(Aa===0){var n=Ho;n===0&&(n=K,K<<=1,(K&261888)===0&&(K=256)),Aa=n}return Aa}function Vv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:rn(""+n)}function Uv(n,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,n.id&&c.setAttribute("form",n.id),r.parentNode.insertBefore(c,r),n=new FormData(n),c.parentNode.removeChild(c),n}function tS(n,r,c,d,_){if(r==="submit"&&c&&c.stateNode===_){var w=Vv((_[ze]||null).action),U=d.submitter;U&&(r=(r=U[ze]||null)?Vv(r.formAction):U.getAttribute("formAction"),r!==null&&(w=r,U=null));var ie=new ts("action","action",null,d,_);n.push({event:ie,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Aa!==0){var pe=U?Uv(_,U):new FormData(_);Md(c,{pending:!0,data:pe,method:_.method,action:w},null,pe)}}else typeof w=="function"&&(ie.preventDefault(),pe=U?Uv(_,U):new FormData(_),Md(c,{pending:!0,data:pe,method:_.method,action:w},w,pe))},currentTarget:_}]})}}for(var fg=0;fg<Wf.length;fg++){var dg=Wf[fg],iS=dg.toLowerCase(),nS=dg[0].toUpperCase()+dg.slice(1);Ps(iS,"on"+nS)}Ps(Gt,"onAnimationEnd"),Ps(Un,"onAnimationIteration"),Ps(sr,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(Fl,"onTransitionRun"),Ps(Po,"onTransitionStart"),Ps(qf,"onTransitionCancel"),Ps(S0,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function Hv(n,r){r=(r&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],_=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var U=d.length-1;0<=U;U--){var ie=d[U],pe=ie.instance,De=ie.currentTarget;if(ie=ie.listener,pe!==w&&_.isPropagationStopped())break e;w=ie,_.currentTarget=De;try{w(_)}catch(Fe){Cu(Fe)}_.currentTarget=null,w=pe}else for(U=0;U<d.length;U++){if(ie=d[U],pe=ie.instance,De=ie.currentTarget,ie=ie.listener,pe!==w&&_.isPropagationStopped())break e;w=ie,_.currentTarget=De;try{w(_)}catch(Fe){Cu(Fe)}_.currentTarget=null,w=pe}}}}function Vt(n,r){var c=r[Je];c===void 0&&(c=r[Je]=new Set);var d=n+"__bubble";c.has(d)||(Yv(r,n,2,!1),c.add(d))}function gg(n,r,c){var d=0;r&&(d|=4),Yv(c,n,d,r)}var uh="_reactListening"+Math.random().toString(36).slice(2);function pg(n){if(!n[uh]){n[uh]=!0,Tt.forEach(function(c){c!=="selectionchange"&&(sS.has(c)||gg(c,!1,n),gg(c,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[uh]||(r[uh]=!0,gg("selectionchange",!1,r))}}function Yv(n,r,c,d){switch(xy(r)){case 2:var _=DS;break;case 8:_=NS;break;default:_=jg}c=_.bind(null,r,c,n),_=void 0,!Me||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),d?_!==void 0?n.addEventListener(r,c,{capture:!0,passive:_}):n.addEventListener(r,c,!0):_!==void 0?n.addEventListener(r,c,{passive:_}):n.addEventListener(r,c,!1)}function mg(n,r,c,d,_){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var U=d.tag;if(U===3||U===4){var ie=d.stateNode.containerInfo;if(ie===_)break;if(U===4)for(U=d.return;U!==null;){var pe=U.tag;if((pe===3||pe===4)&&U.stateNode.containerInfo===_)return;U=U.return}for(;ie!==null;){if(U=st(ie),U===null)return;if(pe=U.tag,pe===5||pe===6||pe===26||pe===27){d=w=U;continue e}ie=ie.parentNode}}d=d.return}$(function(){var De=w,Fe=_r(c),Xe=[];e:{var Ne=w0.get(n);if(Ne!==void 0){var Le=ts,dt=n;switch(n){case"keypress":if(Ei(c)===0)break e;case"keydown":case"keyup":Le=Ff;break;case"focusin":dt="focus",Le=oa;break;case"focusout":dt="blur",Le=oa;break;case"beforeblur":case"afterblur":Le=oa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=wr;break;case Gt:case Un:case sr:Le=Sr;break;case S0:Le=mu;break;case"scroll":case"scrollend":Le=To;break;case"wheel":Le=Hf;break;case"copy":case"cut":case"paste":Le=Fi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=pu;break;case"toggle":case"beforetoggle":Le=Yf}var Et=(r&4)!==0,ui=!Et&&(n==="scroll"||n==="scrollend"),Oe=Et?Ne!==null?Ne+"Capture":null:Ne;Et=[];for(var Se=De,je;Se!==null;){var He=Se;if(je=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||je===null||Oe===null||(He=ae(Se,Oe),He!=null&&Et.push(hc(Se,He,je))),ui)break;Se=Se.return}0<Et.length&&(Ne=new Le(Ne,dt,null,c,Fe),Xe.push({event:Ne,listeners:Et}))}}if((r&7)===0){e:{if(Ne=n==="mouseover"||n==="pointerover",Le=n==="mouseout"||n==="pointerout",Ne&&c!==br&&(dt=c.relatedTarget||c.fromElement)&&(st(dt)||dt[We]))break e;if((Le||Ne)&&(Ne=Fe.window===Fe?Fe:(Ne=Fe.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Le?(dt=c.relatedTarget||c.toElement,Le=De,dt=dt?st(dt):null,dt!==null&&(ui=a(dt),Et=dt.tag,dt!==ui||Et!==5&&Et!==27&&Et!==6)&&(dt=null)):(Le=null,dt=De),Le!==dt)){if(Et=Dl,He="onMouseLeave",Oe="onMouseEnter",Se="mouse",(n==="pointerout"||n==="pointerover")&&(Et=pu,He="onPointerLeave",Oe="onPointerEnter",Se="pointer"),ui=Le==null?Ne:pt(Le),je=dt==null?Ne:pt(dt),Ne=new Et(He,Se+"leave",Le,c,Fe),Ne.target=ui,Ne.relatedTarget=je,He=null,st(Fe)===De&&(Et=new Et(Oe,Se+"enter",dt,c,Fe),Et.target=je,Et.relatedTarget=ui,He=Et),ui=He,Le&&dt)t:{for(Et=rS,Oe=Le,Se=dt,je=0,He=Oe;He;He=Et(He))je++;He=0;for(var bt=Se;bt;bt=Et(bt))He++;for(;0<je-He;)Oe=Et(Oe),je--;for(;0<He-je;)Se=Et(Se),He--;for(;je--;){if(Oe===Se||Se!==null&&Oe===Se.alternate){Et=Oe;break t}Oe=Et(Oe),Se=Et(Se)}Et=null}else Et=null;Le!==null&&Xv(Xe,Ne,Le,Et,!1),dt!==null&&ui!==null&&Xv(Xe,ui,dt,Et,!0)}}e:{if(Ne=De?pt(De):window,Le=Ne.nodeName&&Ne.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ne.type==="file")var Zt=No;else if(Ga(Ne))if(xu)Zt=Xf;else{Zt=an;var vt=bu}else Le=Ne.nodeName,!Le||Le.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?De&&At(De.elementType)&&(Zt=No):Zt=zl;if(Zt&&(Zt=Zt(n,De))){ir(Xe,Zt,c,Fe);break e}vt&&vt(n,Ne,De),n==="focusout"&&De&&Ne.type==="number"&&De.memoizedProps.value!=null&&na(Ne,"number",Ne.value)}switch(vt=De?pt(De):window,n){case"focusin":(Ga(vt)||vt.contentEditable==="true")&&(nr=vt,qa=De,Vn=null);break;case"focusout":Vn=qa=nr=null;break;case"mousedown":ce=!0;break;case"contextmenu":case"mouseup":case"dragend":ce=!1,ve(Xe,c,Fe);break;case"selectionchange":if(wu)break;case"keydown":case"keyup":ve(Xe,c,Fe)}var It;if(tr)e:{switch(n){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else An?Ll(n,c)&&(Yt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Yt="onCompositionStart");Yt&&(Ut&&c.locale!=="ko"&&(An||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&An&&(It=ti()):(Ke=Fe,kt="value"in Ke?Ke.value:Ke.textContent,An=!0)),vt=hh(De,Yt),0<vt.length&&(Yt=new Oo(Yt,n,null,c,Fe),Xe.push({event:Yt,listeners:vt}),It?Yt.data=It:(It=Ui(c),It!==null&&(Yt.data=It)))),(It=yu?Pt(n,c):Pl(n,c))&&(Yt=hh(De,"onBeforeInput"),0<Yt.length&&(vt=new Oo("onBeforeInput","beforeinput",null,c,Fe),Xe.push({event:vt,listeners:Yt}),vt.data=It)),tS(Xe,n,De,c,Fe)}Hv(Xe,r)})}function hc(n,r,c){return{instance:n,listener:r,currentTarget:c}}function hh(n,r){for(var c=r+"Capture",d=[];n!==null;){var _=n,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=ae(n,c),_!=null&&d.unshift(hc(n,_,w)),_=ae(n,r),_!=null&&d.push(hc(n,_,w))),n.tag===3)return d;n=n.return}return[]}function rS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Xv(n,r,c,d,_){for(var w=r._reactName,U=[];c!==null&&c!==d;){var ie=c,pe=ie.alternate,De=ie.stateNode;if(ie=ie.tag,pe!==null&&pe===d)break;ie!==5&&ie!==26&&ie!==27||De===null||(pe=De,_?(De=ae(c,w),De!=null&&U.unshift(hc(c,De,pe))):_||(De=ae(c,w),De!=null&&U.push(hc(c,De,pe)))),c=c.return}U.length!==0&&n.push({event:r,listeners:U})}var aS=/\r\n?/g,oS=/\u0000|\uFFFD/g;function Gv(n){return(typeof n=="string"?n:""+n).replace(aS,`
`).replace(oS,"")}function qv(n,r){return r=Gv(r),Gv(n)===r}function ci(n,r,c,d,_,w){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||In(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&In(n,""+d);break;case"className":Ki(n,"class",d);break;case"tabIndex":Ki(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ki(n,c,d);break;case"style":Tn(n,d,w);break;case"data":if(r!=="object"){Ki(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=rn(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(r!=="input"&&ci(n,r,"name",_.name,_,null),ci(n,r,"formEncType",_.formEncType,_,null),ci(n,r,"formMethod",_.formMethod,_,null),ci(n,r,"formTarget",_.formTarget,_,null)):(ci(n,r,"encType",_.encType,_,null),ci(n,r,"method",_.method,_,null),ci(n,r,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=rn(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=tn);break;case"onScroll":d!=null&&Vt("scroll",n);break;case"onScrollEnd":d!=null&&Vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=rn(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":Vt("beforetoggle",n),Vt("toggle",n),pi(n,"popover",d);break;case"xlinkActuate":Pi(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pi(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pi(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pi(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pi(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":pi(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=kn.get(c)||c,pi(n,c,d))}}function vg(n,r,c,d,_,w){switch(c){case"style":Tn(n,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"children":typeof d=="string"?In(n,d):(typeof d=="number"||typeof d=="bigint")&&In(n,""+d);break;case"onScroll":d!=null&&Vt("scroll",n);break;case"onScrollEnd":d!=null&&Vt("scrollend",n);break;case"onClick":d!=null&&(n.onclick=tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ci.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),r=c.slice(2,_?c.length-7:void 0),w=n[ze]||null,w=w!=null?w[c]:null,typeof w=="function"&&n.removeEventListener(r,w,_),typeof d=="function")){typeof w!="function"&&w!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(r,d,_);break e}c in n?n[c]=d:d===!0?n.setAttribute(c,""):pi(n,c,d)}}}function vn(n,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",n),Vt("load",n);var d=!1,_=!1,w;for(w in c)if(c.hasOwnProperty(w)){var U=c[w];if(U!=null)switch(w){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ci(n,r,w,U,c,null)}}_&&ci(n,r,"srcSet",c.srcSet,c,null),d&&ci(n,r,"src",c.src,c,null);return;case"input":Vt("invalid",n);var ie=w=U=_=null,pe=null,De=null;for(d in c)if(c.hasOwnProperty(d)){var Fe=c[d];if(Fe!=null)switch(d){case"name":_=Fe;break;case"type":U=Fe;break;case"checked":pe=Fe;break;case"defaultChecked":De=Fe;break;case"value":w=Fe;break;case"defaultValue":ie=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(i(137,r));break;default:ci(n,r,d,Fe,c,null)}}Ya(n,w,ie,pe,De,U,_,!1);return;case"select":Vt("invalid",n),d=U=w=null;for(_ in c)if(c.hasOwnProperty(_)&&(ie=c[_],ie!=null))switch(_){case"value":w=ie;break;case"defaultValue":U=ie;break;case"multiple":d=ie;default:ci(n,r,_,ie,c,null)}r=w,c=U,n.multiple=!!d,r!=null?Rs(n,!!d,r,!1):c!=null&&Rs(n,!!d,c,!0);return;case"textarea":Vt("invalid",n),w=_=d=null;for(U in c)if(c.hasOwnProperty(U)&&(ie=c[U],ie!=null))switch(U){case"value":d=ie;break;case"defaultValue":_=ie;break;case"children":w=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(91));break;default:ci(n,r,U,ie,c,null)}Ls(n,d,_,w);return;case"option":for(pe in c)c.hasOwnProperty(pe)&&(d=c[pe],d!=null)&&(pe==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":ci(n,r,pe,d,c,null));return;case"dialog":Vt("beforetoggle",n),Vt("toggle",n),Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":Vt("load",n);break;case"video":case"audio":for(d=0;d<uc.length;d++)Vt(uc[d],n);break;case"image":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"embed":case"source":case"link":Vt("error",n),Vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in c)if(c.hasOwnProperty(De)&&(d=c[De],d!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ci(n,r,De,d,c,null)}return;default:if(At(r)){for(Fe in c)c.hasOwnProperty(Fe)&&(d=c[Fe],d!==void 0&&vg(n,r,Fe,d,c,void 0));return}}for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!=null&&ci(n,r,ie,d,c,null))}function lS(n,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,U=null,ie=null,pe=null,De=null,Fe=null;for(Le in c){var Xe=c[Le];if(c.hasOwnProperty(Le)&&Xe!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":pe=Xe;default:d.hasOwnProperty(Le)||ci(n,r,Le,null,d,Xe)}}for(var Ne in d){var Le=d[Ne];if(Xe=c[Ne],d.hasOwnProperty(Ne)&&(Le!=null||Xe!=null))switch(Ne){case"type":w=Le;break;case"name":_=Le;break;case"checked":De=Le;break;case"defaultChecked":Fe=Le;break;case"value":U=Le;break;case"defaultValue":ie=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(i(137,r));break;default:Le!==Xe&&ci(n,r,Ne,Le,d,Xe)}}vr(n,U,ie,pe,De,Fe,w,_);return;case"select":Le=U=ie=Ne=null;for(w in c)if(pe=c[w],c.hasOwnProperty(w)&&pe!=null)switch(w){case"value":break;case"multiple":Le=pe;default:d.hasOwnProperty(w)||ci(n,r,w,null,d,pe)}for(_ in d)if(w=d[_],pe=c[_],d.hasOwnProperty(_)&&(w!=null||pe!=null))switch(_){case"value":Ne=w;break;case"defaultValue":ie=w;break;case"multiple":U=w;default:w!==pe&&ci(n,r,_,w,d,pe)}r=ie,c=U,d=Le,Ne!=null?Rs(n,!!c,Ne,!1):!!d!=!!c&&(r!=null?Rs(n,!!c,r,!0):Rs(n,!!c,c?[]:"",!1));return;case"textarea":Le=Ne=null;for(ie in c)if(_=c[ie],c.hasOwnProperty(ie)&&_!=null&&!d.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:ci(n,r,ie,null,d,_)}for(U in d)if(_=d[U],w=c[U],d.hasOwnProperty(U)&&(_!=null||w!=null))switch(U){case"value":Ne=_;break;case"defaultValue":Le=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==w&&ci(n,r,U,_,d,w)}yr(n,Ne,Le);return;case"option":for(var dt in c)Ne=c[dt],c.hasOwnProperty(dt)&&Ne!=null&&!d.hasOwnProperty(dt)&&(dt==="selected"?n.selected=!1:ci(n,r,dt,null,d,Ne));for(pe in d)Ne=d[pe],Le=c[pe],d.hasOwnProperty(pe)&&Ne!==Le&&(Ne!=null||Le!=null)&&(pe==="selected"?n.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol":ci(n,r,pe,Ne,d,Le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in c)Ne=c[Et],c.hasOwnProperty(Et)&&Ne!=null&&!d.hasOwnProperty(Et)&&ci(n,r,Et,null,d,Ne);for(De in d)if(Ne=d[De],Le=c[De],d.hasOwnProperty(De)&&Ne!==Le&&(Ne!=null||Le!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,r));break;default:ci(n,r,De,Ne,d,Le)}return;default:if(At(r)){for(var ui in c)Ne=c[ui],c.hasOwnProperty(ui)&&Ne!==void 0&&!d.hasOwnProperty(ui)&&vg(n,r,ui,void 0,d,Ne);for(Fe in d)Ne=d[Fe],Le=c[Fe],!d.hasOwnProperty(Fe)||Ne===Le||Ne===void 0&&Le===void 0||vg(n,r,Fe,Ne,d,Le);return}}for(var Oe in c)Ne=c[Oe],c.hasOwnProperty(Oe)&&Ne!=null&&!d.hasOwnProperty(Oe)&&ci(n,r,Oe,null,d,Ne);for(Xe in d)Ne=d[Xe],Le=c[Xe],!d.hasOwnProperty(Xe)||Ne===Le||Ne==null&&Le==null||ci(n,r,Xe,Ne,d,Le)}function Wv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var _=c[d],w=_.transferSize,U=_.initiatorType,ie=_.duration;if(w&&ie&&Wv(U)){for(U=0,ie=_.responseEnd,d+=1;d<c.length;d++){var pe=c[d],De=pe.startTime;if(De>ie)break;var Fe=pe.transferSize,Xe=pe.initiatorType;Fe&&Wv(Xe)&&(pe=pe.responseEnd,U+=Fe*(pe<ie?1:(ie-De)/(pe-De)))}if(--d,r+=8*(w+U)/(_.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var yg=null,xg=null;function fh(n){return n.nodeType===9?n:n.ownerDocument}function Zv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $v(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function bg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _g=null;function uS(){var n=window.event;return n&&n.type==="popstate"?n===_g?!1:(_g=n,!0):(_g=null,!1)}var Kv=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(n){return Qv.resolve(null).then(n).catch(dS)}:Kv;function dS(n){setTimeout(function(){throw n})}function Oa(n){return n==="head"}function Jv(n,r){var c=r,d=0;do{var _=c.nextSibling;if(n.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(_),ll(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")fc(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,fc(c);for(var w=c.firstChild;w;){var U=w.nextSibling,ie=w.nodeName;w[Qe]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=U}}else c==="body"&&fc(n.ownerDocument.body);c=_}while(c);ll(r)}function ey(n,r){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function Sg(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Sg(c),at(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function gS(n,r,c,d){for(;n.nodeType===1;){var _=c;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Qe])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==_.rel||n.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||n.getAttribute("title")!==(_.title==null?null:_.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(_.src==null?null:_.src)||n.getAttribute("type")!==(_.type==null?null:_.type)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=ws(n.nextSibling),n===null)break}return null}function pS(n,r,c){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=ws(n.nextSibling),n===null))return null;return n}function ty(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ws(n.nextSibling),n===null))return null;return n}function wg(n){return n.data==="$?"||n.data==="$~"}function Cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function mS(n,r){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function ws(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Tg=null;function iy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(r===0)return ws(n.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}n=n.nextSibling}return null}function ny(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return n;r--}else c!=="/$"&&c!=="/&"||r++}n=n.previousSibling}return null}function sy(n,r,c){switch(r=fh(c),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function fc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);at(n)}var Cs=new Map,ry=new Set;function dh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Fr=qe.d;qe.d={f:vS,r:yS,D:xS,C:bS,L:_S,m:SS,X:CS,S:wS,M:TS};function vS(){var n=Fr.f(),r=sh();return n||r}function yS(n){var r=mt(n);r!==null&&r.tag===5&&r.type==="form"?Sm(r):Fr.r(n)}var rl=typeof document>"u"?null:document;function ay(n,r,c){var d=rl;if(d&&typeof r=="string"&&r){var _=fn(r);_='link[rel="'+n+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),ry.has(_)||(ry.add(_),n={rel:n,crossOrigin:c,href:r},d.querySelector(_)===null&&(r=d.createElement("link"),vn(r,"link",n),gt(r),d.head.appendChild(r)))}}function xS(n){Fr.D(n),ay("dns-prefetch",n,null)}function bS(n,r){Fr.C(n,r),ay("preconnect",n,r)}function _S(n,r,c){Fr.L(n,r,c);var d=rl;if(d&&n&&r){var _='link[rel="preload"][as="'+fn(r)+'"]';r==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+fn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+fn(c.imageSizes)+'"]')):_+='[href="'+fn(n)+'"]';var w=_;switch(r){case"style":w=al(n);break;case"script":w=ol(n)}Cs.has(w)||(n=C({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:n,as:r},c),Cs.set(w,n),d.querySelector(_)!==null||r==="style"&&d.querySelector(dc(w))||r==="script"&&d.querySelector(gc(w))||(r=d.createElement("link"),vn(r,"link",n),gt(r),d.head.appendChild(r)))}}function SS(n,r){Fr.m(n,r);var c=rl;if(c&&n){var d=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+fn(d)+'"][href="'+fn(n)+'"]',w=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ol(n)}if(!Cs.has(w)&&(n=C({rel:"modulepreload",href:n},r),Cs.set(w,n),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(gc(w)))return}d=c.createElement("link"),vn(d,"link",n),gt(d),c.head.appendChild(d)}}}function wS(n,r,c){Fr.S(n,r,c);var d=rl;if(d&&n){var _=xt(d).hoistableStyles,w=al(n);r=r||"default";var U=_.get(w);if(!U){var ie={loading:0,preload:null};if(U=d.querySelector(dc(w)))ie.loading=5;else{n=C({rel:"stylesheet",href:n,"data-precedence":r},c),(c=Cs.get(w))&&kg(n,c);var pe=U=d.createElement("link");gt(pe),vn(pe,"link",n),pe._p=new Promise(function(De,Fe){pe.onload=De,pe.onerror=Fe}),pe.addEventListener("load",function(){ie.loading|=1}),pe.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,gh(U,r,d)}U={type:"stylesheet",instance:U,count:1,state:ie},_.set(w,U)}}}function CS(n,r){Fr.X(n,r);var c=rl;if(c&&n){var d=xt(c).hoistableScripts,_=ol(n),w=d.get(_);w||(w=c.querySelector(gc(_)),w||(n=C({src:n,async:!0},r),(r=Cs.get(_))&&Ag(n,r),w=c.createElement("script"),gt(w),vn(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(_,w))}}function TS(n,r){Fr.M(n,r);var c=rl;if(c&&n){var d=xt(c).hoistableScripts,_=ol(n),w=d.get(_);w||(w=c.querySelector(gc(_)),w||(n=C({src:n,async:!0,type:"module"},r),(r=Cs.get(_))&&Ag(n,r),w=c.createElement("script"),gt(w),vn(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(_,w))}}function oy(n,r,c,d){var _=(_=wt.current)?dh(_):null;if(!_)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=al(c.href),c=xt(_).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=al(c.href);var w=xt(_).hoistableStyles,U=w.get(n);if(U||(_=_.ownerDocument||_,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,U),(w=_.querySelector(dc(n)))&&!w._p&&(U.instance=w,U.state.loading=5),Cs.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Cs.set(n,c),w||kS(_,n,c,U.state))),r&&d===null)throw Error(i(528,""));return U}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ol(c),c=xt(_).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function al(n){return'href="'+fn(n)+'"'}function dc(n){return'link[rel="stylesheet"]['+n+"]"}function ly(n){return C({},n,{"data-precedence":n.precedence,precedence:null})}function kS(n,r,c,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),vn(r,"link",c),gt(r),n.head.appendChild(r))}function ol(n){return'[src="'+fn(n)+'"]'}function gc(n){return"script[async]"+n}function cy(n,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+fn(c.href)+'"]');if(d)return r.instance=d,gt(d),d;var _=C({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),gt(d),vn(d,"style",_),gh(d,c.precedence,n),r.instance=d;case"stylesheet":_=al(c.href);var w=n.querySelector(dc(_));if(w)return r.state.loading|=4,r.instance=w,gt(w),w;d=ly(c),(_=Cs.get(_))&&kg(d,_),w=(n.ownerDocument||n).createElement("link"),gt(w);var U=w;return U._p=new Promise(function(ie,pe){U.onload=ie,U.onerror=pe}),vn(w,"link",d),r.state.loading|=4,gh(w,c.precedence,n),r.instance=w;case"script":return w=ol(c.src),(_=n.querySelector(gc(w)))?(r.instance=_,gt(_),_):(d=c,(_=Cs.get(w))&&(d=C({},c),Ag(d,_)),n=n.ownerDocument||n,_=n.createElement("script"),gt(_),vn(_,"link",d),n.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,gh(d,c.precedence,n));return r.instance}function gh(n,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,w=_,U=0;U<d.length;U++){var ie=d[U];if(ie.dataset.precedence===r)w=ie;else if(w!==_)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(n,r.firstChild))}function kg(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Ag(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var ph=null;function uy(n,r,c){if(ph===null){var d=new Map,_=ph=new Map;_.set(c,d)}else _=ph,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),_=0;_<c.length;_++){var w=c[_];if(!(w[Qe]||w[Ae]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var U=w.getAttribute(r)||"";U=n+U;var ie=d.get(U);ie?ie.push(w):d.set(U,[w])}}return d}function hy(n,r,c){n=n.ownerDocument||n,n.head.insertBefore(c,r==="title"?n.querySelector("head > title"):null)}function AS(n,r,c){if(c===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function fy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function OS(n,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=al(d.href),w=r.querySelector(dc(_));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=mh.bind(n),r.then(n,n)),c.state.loading|=4,c.instance=w,gt(w);return}w=r.ownerDocument||r,d=ly(d),(_=Cs.get(_))&&kg(d,_),w=w.createElement("link"),gt(w);var U=w;U._p=new Promise(function(ie,pe){U.onload=ie,U.onerror=pe}),vn(w,"link",d),c.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=mh.bind(n),r.addEventListener("load",c),r.addEventListener("error",c))}}var Og=0;function ES(n,r){return n.stylesheets&&n.count===0&&yh(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&yh(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+r);0<n.imgBytes&&Og===0&&(Og=62500*cS());var _=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&yh(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>Og?50:800)+r);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vh=null;function yh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vh=new Map,r.forEach(jS,n),vh=null,mh.call(n))}function jS(n,r){if(!(r.state.loading&4)){var c=vh.get(n);if(c)var d=c.get(null);else{c=new Map,vh.set(n,c);for(var _=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var U=_[w];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(c.set(U.dataset.precedence,U),d=U)}d&&c.set(null,d)}_=r.instance,U=_.getAttribute("data-precedence"),w=c.get(U)||d,w===d&&c.set(null,_),c.set(U,_),this.count++,d=mh.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),w?w.parentNode.insertBefore(_,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(_,n.firstChild)),r.state.loading|=4}}var pc={$$typeof:ne,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function MS(n,r,c,d,_,w,U,ie,pe){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.hiddenUpdates=J(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function dy(n,r,c,d,_,w,U,ie,pe,De,Fe,Xe){return n=new MS(n,r,c,U,pe,De,Fe,Xe,ie),r=1,w===!0&&(r|=24),w=is(3,null,null,r),n.current=w,w.stateNode=n,r=od(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:r},hd(w),n}function gy(n){return n?(n=zo,n):zo}function py(n,r,c,d,_,w){_=gy(_),d.context===null?d.context=_:d.pendingContext=_,d=va(r),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ya(n,d,r),c!==null&&(qn(c,n,r),ql(c,n,r))}function my(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<r?c:r}}function Eg(n,r){my(n,r),(n=n.alternate)&&my(n,r)}function vy(n){if(n.tag===13||n.tag===31){var r=Wa(n,67108864);r!==null&&qn(r,n,67108864),Eg(n,67108864)}}function yy(n){if(n.tag===13||n.tag===31){var r=os();r=re(r);var c=Wa(n,r);c!==null&&qn(c,n,r),Eg(n,r)}}var xh=!0;function DS(n,r,c,d){var _=he.T;he.T=null;var w=qe.p;try{qe.p=2,jg(n,r,c,d)}finally{qe.p=w,he.T=_}}function NS(n,r,c,d){var _=he.T;he.T=null;var w=qe.p;try{qe.p=8,jg(n,r,c,d)}finally{qe.p=w,he.T=_}}function jg(n,r,c,d){if(xh){var _=Mg(d);if(_===null)mg(n,r,d,bh,c),by(n,d);else if(LS(_,n,r,c,d))d.stopPropagation();else if(by(n,d),r&4&&-1<RS.indexOf(n)){for(;_!==null;){var w=mt(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var U=B(w.pendingLanes);if(U!==0){var ie=w;for(ie.pendingLanes|=2,ie.entangledLanes|=2;U;){var pe=1<<31-P(U);ie.entanglements[1]|=pe,U&=~pe}lr(w),(ei&6)===0&&(ih=$i()+500,cc(0))}}break;case 31:case 13:ie=Wa(w,2),ie!==null&&qn(ie,w,2),sh(),Eg(w,2)}if(w=Mg(d),w===null&&mg(n,r,d,bh,c),w===_)break;_=w}_!==null&&d.stopPropagation()}else mg(n,r,d,null,c)}}function Mg(n){return n=_r(n),Dg(n)}var bh=null;function Dg(n){if(bh=null,n=st(n),n!==null){var r=a(n);if(r===null)n=null;else{var c=r.tag;if(c===13){if(n=u(r),n!==null)return n;n=null}else if(c===31){if(n=p(r),n!==null)return n;n=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return bh=n,null}function xy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case l:return 2;case h:return 8;case g:case v:return 32;case x:return 268435456;default:return 32}default:return 32}}var Ng=!1,Ea=null,ja=null,Ma=null,mc=new Map,vc=new Map,Da=[],RS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function by(n,r){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":mc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(r.pointerId)}}function yc(n,r,c,d,_,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[_]},r!==null&&(r=mt(r),r!==null&&vy(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),n)}function LS(n,r,c,d,_){switch(r){case"focusin":return Ea=yc(Ea,n,r,c,d,_),!0;case"dragenter":return ja=yc(ja,n,r,c,d,_),!0;case"mouseover":return Ma=yc(Ma,n,r,c,d,_),!0;case"pointerover":var w=_.pointerId;return mc.set(w,yc(mc.get(w)||null,n,r,c,d,_)),!0;case"gotpointercapture":return w=_.pointerId,vc.set(w,yc(vc.get(w)||null,n,r,c,d,_)),!0}return!1}function _y(n){var r=st(n.target);if(r!==null){var c=a(r);if(c!==null){if(r=c.tag,r===13){if(r=u(c),r!==null){n.blockedOn=r,Ce(n.priority,function(){yy(c)});return}}else if(r===31){if(r=p(c),r!==null){n.blockedOn=r,Ce(n.priority,function(){yy(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _h(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var c=Mg(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);br=d,c.target.dispatchEvent(d),br=null}else return r=mt(c),r!==null&&vy(r),n.blockedOn=c,!1;r.shift()}return!0}function Sy(n,r,c){_h(n)&&c.delete(r)}function PS(){Ng=!1,Ea!==null&&_h(Ea)&&(Ea=null),ja!==null&&_h(ja)&&(ja=null),Ma!==null&&_h(Ma)&&(Ma=null),mc.forEach(Sy),vc.forEach(Sy)}function Sh(n,r){n.blockedOn===r&&(n.blockedOn=null,Ng||(Ng=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,PS)))}var wh=null;function wy(n){wh!==n&&(wh=n,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){wh===n&&(wh=null);for(var r=0;r<n.length;r+=3){var c=n[r],d=n[r+1],_=n[r+2];if(typeof d!="function"){if(Dg(d||c)===null)continue;break}var w=mt(c);w!==null&&(n.splice(r,3),r-=3,Md(w,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function ll(n){function r(pe){return Sh(pe,n)}Ea!==null&&Sh(Ea,n),ja!==null&&Sh(ja,n),Ma!==null&&Sh(Ma,n),mc.forEach(r),vc.forEach(r);for(var c=0;c<Da.length;c++){var d=Da[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Da.length&&(c=Da[0],c.blockedOn===null);)_y(c),c.blockedOn===null&&Da.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],w=c[d+1],U=_[ze]||null;if(typeof w=="function")U||wy(c);else if(U){var ie=null;if(w&&w.hasAttribute("formAction")){if(_=w,U=w[ze]||null)ie=U.formAction;else if(Dg(_)!==null)continue}else ie=U.action;typeof ie=="function"?c[d+1]=ie:(c.splice(d,3),d-=3),wy(c)}}}function Cy(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(U){return _=U})},focusReset:"manual",scroll:"manual"})}function r(){_!==null&&(_(),_=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),_!==null&&(_(),_=null)}}}function Rg(n){this._internalRoot=n}Ch.prototype.render=Rg.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,d=os();py(c,d,n,r,null,null)},Ch.prototype.unmount=Rg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;py(n.current,2,null,n,null,null),sh(),r[We]=null}};function Ch(n){this._internalRoot=n}Ch.prototype.unstable_scheduleHydration=function(n){if(n){var r=me();n={blockedOn:null,target:n,priority:r};for(var c=0;c<Da.length&&r!==0&&r<Da[c].priority;c++);Da.splice(c,0,n),c===0&&_y(n)}};var Ty=e.version;if(Ty!=="19.2.4")throw Error(i(527,Ty,"19.2.4"));qe.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var BS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{O=Th.inject(BS),j=Th}catch{}}return bc.createRoot=function(n,r){if(!s(n))throw Error(i(299));var c=!1,d="",_=Dm,w=Nm,U=Rm;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(U=r.onRecoverableError)),r=dy(n,1,!1,null,null,c,d,null,_,w,U,Cy),n[We]=r.current,pg(n),new Rg(r)},bc.hydrateRoot=function(n,r,c){if(!s(n))throw Error(i(299));var d=!1,_="",w=Dm,U=Nm,ie=Rm,pe=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(U=c.onCaughtError),c.onRecoverableError!==void 0&&(ie=c.onRecoverableError),c.formState!==void 0&&(pe=c.formState)),r=dy(n,1,!0,r,c??null,d,_,pe,w,U,ie,Cy),r.context=gy(null),c=r.current,d=os(),d=re(d),_=va(d),_.callback=null,ya(c,_,d),c=d,r.current.lanes=c,W(r,c),lr(r),n[We]=r.current,pg(n),new Ch(r)},bc.version="19.2.4",bc}var Ly;function qS(){if(Ly)return Bg.exports;Ly=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Bg.exports=GS(),Bg.exports}var WS=qS();var Py="popstate";function ZS(o={}){function e(s,a){let{pathname:u="/",search:p="",hash:m=""}=xo(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ap("",{pathname:u,search:p,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let u=s.document.querySelector("base"),p="";if(u&&u.getAttribute("href")){let m=s.location.href,y=m.indexOf("#");p=y===-1?m:m.slice(0,y)}return p+"#"+(typeof a=="string"?a:Kc(a))}function i(s,a){Os(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return KS(e,t,i,o)}function Di(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function Os(o,e){if(!o){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $S(){return Math.random().toString(36).substring(2,10)}function By(o,e){return{usr:o.state,key:o.key,idx:e}}function ap(o,e,t=null,i){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof e=="string"?xo(e):e,state:t,key:e&&e.key||i||$S()}}function Kc({pathname:o="/",search:e="",hash:t=""}){return e&&e!=="?"&&(o+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(o+=t.charAt(0)==="#"?t:"#"+t),o}function xo(o){let e={};if(o){let t=o.indexOf("#");t>=0&&(e.hash=o.substring(t),o=o.substring(0,t));let i=o.indexOf("?");i>=0&&(e.search=o.substring(i),o=o.substring(0,i)),o&&(e.pathname=o)}return e}function KS(o,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,p="POP",m=null,y=b();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function b(){return(u.state||{idx:null}).idx}function C(){p="POP";let ee=b(),G=ee==null?null:ee-y;y=ee,m&&m({action:p,location:L.location,delta:G})}function N(ee,G){p="PUSH";let te=ap(L.location,ee,G);t&&t(te,ee),y=b()+1;let ne=By(te,y),de=L.createHref(te);try{u.pushState(ne,"",de)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;s.location.assign(de)}a&&m&&m({action:p,location:L.location,delta:1})}function E(ee,G){p="REPLACE";let te=ap(L.location,ee,G);t&&t(te,ee),y=b();let ne=By(te,y),de=L.createHref(te);u.replaceState(ne,"",de),a&&m&&m({action:p,location:L.location,delta:0})}function V(ee){return QS(ee)}let L={get action(){return p},get location(){return o(s,u)},listen(ee){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Py,C),m=ee,()=>{s.removeEventListener(Py,C),m=null}},createHref(ee){return e(s,ee)},createURL:V,encodeLocation(ee){let G=V(ee);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:N,replace:E,go(ee){return u.go(ee)}};return L}function QS(o,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Di(t,"No window.location.(origin|href) available to create URL");let i=typeof o=="string"?o:Kc(o);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Jx(o,e,t="/"){return JS(o,e,t,!1)}function JS(o,e,t,i){let s=typeof e=="string"?xo(e):e,a=Wr(s.pathname||"/",t);if(a==null)return null;let u=eb(o);e2(u);let p=null;for(let m=0;p==null&&m<u.length;++m){let y=h2(a);p=c2(u[m],y,i)}return p}function eb(o,e=[],t=[],i="",s=!1){let a=(u,p,m=s,y)=>{let b={relativePath:y===void 0?u.path||"":y,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&m)return;Di(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let C=qr([i,b.relativePath]),N=t.concat(b);u.children&&u.children.length>0&&(Di(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),eb(u.children,e,N,C,m)),!(u.path==null&&!u.index)&&e.push({path:C,score:o2(C,u.index),routesMeta:N})};return o.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))a(u,p);else for(let m of tb(u.path))a(u,p,!0,m)}),e}function tb(o){let e=o.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let u=tb(i.join("/")),p=[];return p.push(...u.map(m=>m===""?a:[a,m].join("/"))),s&&p.push(...u),p.map(m=>o.startsWith("/")&&m===""?"/":m)}function e2(o){o.sort((e,t)=>e.score!==t.score?t.score-e.score:l2(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var t2=/^:[\w-]+$/,i2=3,n2=2,s2=1,r2=10,a2=-2,zy=o=>o==="*";function o2(o,e){let t=o.split("/"),i=t.length;return t.some(zy)&&(i+=a2),e&&(i+=n2),t.filter(s=>!zy(s)).reduce((s,a)=>s+(t2.test(a)?i2:a===""?s2:r2),i)}function l2(o,e){return o.length===e.length&&o.slice(0,-1).every((i,s)=>i===e[s])?o[o.length-1]-e[e.length-1]:0}function c2(o,e,t=!1){let{routesMeta:i}=o,s={},a="/",u=[];for(let p=0;p<i.length;++p){let m=i[p],y=p===i.length-1,b=a==="/"?e:e.slice(a.length)||"/",C=Qh({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},b),N=m.route;if(!C&&y&&t&&!i[i.length-1].route.index&&(C=Qh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!C)return null;Object.assign(s,C.params),u.push({params:s,pathname:qr([a,C.pathname]),pathnameBase:p2(qr([a,C.pathnameBase])),route:N}),C.pathnameBase!=="/"&&(a=qr([a,C.pathnameBase]))}return u}function Qh(o,e){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[t,i]=u2(o.path,o.caseSensitive,o.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:C},N)=>{if(b==="*"){let V=p[N]||"";u=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const E=p[N];return C&&!E?y[b]=void 0:y[b]=(E||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:u,pattern:o}}function u2(o,e=!1,t=!0){Os(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let i=[],s="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return o.endsWith("*")?(i.push({paramName:"*"}),s+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":o!==""&&o!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function h2(o){try{return o.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),o}}function Wr(o,e){if(e==="/")return o;if(!o.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=o.charAt(t);return i&&i!=="/"?null:o.slice(t)||"/"}var f2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function d2(o,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof o=="string"?xo(o):o,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=Iy(t.substring(1),"/"):a=Iy(t,e)):a=e,{pathname:a,search:m2(i),hash:v2(s)}}function Iy(o,e){let t=e.replace(/\/+$/,"").split("/");return o.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Vg(o,e,t,i){return`Cannot include a '${o}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g2(o){return o.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ib(o){let e=g2(o);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function nb(o,e,t,i=!1){let s;typeof o=="string"?s=xo(o):(s={...o},Di(!s.pathname||!s.pathname.includes("?"),Vg("?","pathname","search",s)),Di(!s.pathname||!s.pathname.includes("#"),Vg("#","pathname","hash",s)),Di(!s.search||!s.search.includes("#"),Vg("#","search","hash",s)));let a=o===""||s.pathname==="",u=a?"/":s.pathname,p;if(u==null)p=t;else{let C=e.length-1;if(!i&&u.startsWith("..")){let N=u.split("/");for(;N[0]==="..";)N.shift(),C-=1;s.pathname=N.join("/")}p=C>=0?e[C]:"/"}let m=d2(s,p),y=u&&u!=="/"&&u.endsWith("/"),b=(a||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||b)&&(m.pathname+="/"),m}var qr=o=>o.join("/").replace(/\/\/+/g,"/"),p2=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),m2=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,v2=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o,y2=class{constructor(o,e,t,i=!1){this.status=o,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function x2(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}function b2(o){return o.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rb(o,e){let t=o;if(typeof t!="string"||!f2.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(sb)try{let a=new URL(window.location.href),u=t.startsWith("//")?new URL(a.protocol+t):new URL(t),p=Wr(u.pathname,e);u.origin===a.origin&&p!=null?t=p+u.search+u.hash:s=!0}catch{Os(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ab=["POST","PUT","PATCH","DELETE"];new Set(ab);var _2=["GET",...ab];new Set(_2);var kl=fe.createContext(null);kl.displayName="DataRouter";var mf=fe.createContext(null);mf.displayName="DataRouterState";var S2=fe.createContext(!1),ob=fe.createContext({isTransitioning:!1});ob.displayName="ViewTransition";var w2=fe.createContext(new Map);w2.displayName="Fetchers";var C2=fe.createContext(null);C2.displayName="Await";var js=fe.createContext(null);js.displayName="Navigation";var ru=fe.createContext(null);ru.displayName="Location";var Ks=fe.createContext({outlet:null,matches:[],isDataRoute:!1});Ks.displayName="Route";var Np=fe.createContext(null);Np.displayName="RouteError";var lb="REACT_ROUTER_ERROR",T2="REDIRECT",k2="ROUTE_ERROR_RESPONSE";function A2(o){if(o.startsWith(`${lb}:${T2}:{`))try{let e=JSON.parse(o.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function O2(o){if(o.startsWith(`${lb}:${k2}:{`))try{let e=JSON.parse(o.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new y2(e.status,e.statusText,e.data)}catch{}}function E2(o,{relative:e}={}){Di(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=fe.useContext(js),{hash:s,pathname:a,search:u}=ou(o,{relative:e}),p=a;return t!=="/"&&(p=a==="/"?t:qr([t,a])),i.createHref({pathname:p,search:u,hash:s})}function au(){return fe.useContext(ru)!=null}function Va(){return Di(au(),"useLocation() may be used only in the context of a <Router> component."),fe.useContext(ru).location}var cb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ub(o){fe.useContext(js).static||fe.useLayoutEffect(o)}function vf(){let{isDataRoute:o}=fe.useContext(Ks);return o?X2():j2()}function j2(){Di(au(),"useNavigate() may be used only in the context of a <Router> component.");let o=fe.useContext(kl),{basename:e,navigator:t}=fe.useContext(js),{matches:i}=fe.useContext(Ks),{pathname:s}=Va(),a=JSON.stringify(ib(i)),u=fe.useRef(!1);return ub(()=>{u.current=!0}),fe.useCallback((m,y={})=>{if(Os(u.current,cb),!u.current)return;if(typeof m=="number"){t.go(m);return}let b=nb(m,JSON.parse(a),s,y.relative==="path");o==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:qr([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,a,s,o])}var M2=fe.createContext(null);function D2(o){let e=fe.useContext(Ks).outlet;return fe.useMemo(()=>e&&fe.createElement(M2.Provider,{value:o},e),[e,o])}function N2(){let{matches:o}=fe.useContext(Ks),e=o[o.length-1];return e?e.params:{}}function ou(o,{relative:e}={}){let{matches:t}=fe.useContext(Ks),{pathname:i}=Va(),s=JSON.stringify(ib(t));return fe.useMemo(()=>nb(o,JSON.parse(s),i,e==="path"),[o,s,i,e])}function R2(o,e){return hb(o,e)}function hb(o,e,t,i,s){Di(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=fe.useContext(js),{matches:u}=fe.useContext(Ks),p=u[u.length-1],m=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",C=p&&p.route;{let te=C&&C.path||"";db(y,!C||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let N=Va(),E;if(e){let te=typeof e=="string"?xo(e):e;Di(b==="/"||te.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${te.pathname}" was given in the \`location\` prop.`),E=te}else E=N;let V=E.pathname||"/",L=V;if(b!=="/"){let te=b.replace(/^\//,"").split("/");L="/"+V.replace(/^\//,"").split("/").slice(te.length).join("/")}let ee=Jx(o,{pathname:L});Os(C||ee!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Os(ee==null||ee[ee.length-1].route.element!==void 0||ee[ee.length-1].route.Component!==void 0||ee[ee.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=I2(ee&&ee.map(te=>Object.assign({},te,{params:Object.assign({},m,te.params),pathname:qr([b,a.encodeLocation?a.encodeLocation(te.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?b:qr([b,a.encodeLocation?a.encodeLocation(te.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathnameBase])})),u,t,i,s);return e&&G?fe.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},G):G}function L2(){let o=Y2(),e=x2(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),t=o instanceof Error?o.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",o),u=fe.createElement(fe.Fragment,null,fe.createElement("p",null," Hey developer "),fe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",fe.createElement("code",{style:a},"ErrorBoundary")," or"," ",fe.createElement("code",{style:a},"errorElement")," prop on your route.")),fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?fe.createElement("pre",{style:s},t):null,u)}var P2=fe.createElement(L2,null),fb=class extends fe.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,e){return e.location!==o.location||e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:e.error,location:e.location,revalidation:o.revalidation||e.revalidation}}componentDidCatch(o,e){this.props.onError?this.props.onError(o,e):console.error("React Router caught the following error during render",o)}render(){let o=this.state.error;if(this.context&&typeof o=="object"&&o&&"digest"in o&&typeof o.digest=="string"){const t=O2(o.digest);t&&(o=t)}let e=o!==void 0?fe.createElement(Ks.Provider,{value:this.props.routeContext},fe.createElement(Np.Provider,{value:o,children:this.props.component})):this.props.children;return this.context?fe.createElement(B2,{error:o},e):e}};fb.contextType=S2;var Ug=new WeakMap;function B2({children:o,error:e}){let{basename:t}=fe.useContext(js);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=A2(e.digest);if(i){let s=Ug.get(e);if(s)throw s;let a=rb(i.location,t);if(sb&&!Ug.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw Ug.set(e,u),u}return fe.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return o}function z2({routeContext:o,match:e,children:t}){let i=fe.useContext(kl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),fe.createElement(Ks.Provider,{value:o},t)}function I2(o,e=[],t=null,i=null,s=null){if(o==null){if(!t)return null;if(t.errors)o=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)o=t.matches;else return null}let a=o,u=t?.errors;if(u!=null){let b=a.findIndex(C=>C.route.id&&u?.[C.route.id]!==void 0);Di(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,b+1))}let p=!1,m=-1;if(t)for(let b=0;b<a.length;b++){let C=a[b];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(m=b),C.route.id){let{loaderData:N,errors:E}=t,V=C.route.loader&&!N.hasOwnProperty(C.route.id)&&(!E||E[C.route.id]===void 0);if(C.route.lazy||V){p=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}let y=t&&i?(b,C)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:b2(t.matches),errorInfo:C})}:void 0;return a.reduceRight((b,C,N)=>{let E,V=!1,L=null,ee=null;t&&(E=u&&C.route.id?u[C.route.id]:void 0,L=C.route.errorElement||P2,p&&(m<0&&N===0?(db("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,ee=null):m===N&&(V=!0,ee=C.route.hydrateFallbackElement||null)));let G=e.concat(a.slice(0,N+1)),te=()=>{let ne;return E?ne=L:V?ne=ee:C.route.Component?ne=fe.createElement(C.route.Component,null):C.route.element?ne=C.route.element:ne=b,fe.createElement(z2,{match:C,routeContext:{outlet:b,matches:G,isDataRoute:t!=null},children:ne})};return t&&(C.route.ErrorBoundary||C.route.errorElement||N===0)?fe.createElement(fb,{location:t.location,revalidation:t.revalidation,component:L,error:E,children:te(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:y}):te()},null)}function Rp(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F2(o){let e=fe.useContext(kl);return Di(e,Rp(o)),e}function V2(o){let e=fe.useContext(mf);return Di(e,Rp(o)),e}function U2(o){let e=fe.useContext(Ks);return Di(e,Rp(o)),e}function Lp(o){let e=U2(o),t=e.matches[e.matches.length-1];return Di(t.route.id,`${o} can only be used on routes that contain a unique "id"`),t.route.id}function H2(){return Lp("useRouteId")}function Y2(){let o=fe.useContext(Np),e=V2("useRouteError"),t=Lp("useRouteError");return o!==void 0?o:e.errors?.[t]}function X2(){let{router:o}=F2("useNavigate"),e=Lp("useNavigate"),t=fe.useRef(!1);return ub(()=>{t.current=!0}),fe.useCallback(async(s,a={})=>{Os(t.current,cb),t.current&&(typeof s=="number"?await o.navigate(s):await o.navigate(s,{fromRouteId:e,...a}))},[o,e])}var Fy={};function db(o,e,t){!e&&!Fy[o]&&(Fy[o]=!0,Os(!1,t))}fe.memo(G2);function G2({routes:o,future:e,state:t,onError:i}){return hb(o,void 0,t,i,e)}function q2(o){return D2(o.context)}function Vr(o){Di(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W2({basename:o="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1,unstable_useTransitions:u}){Di(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=o.replace(/^\/*/,"/"),m=fe.useMemo(()=>({basename:p,navigator:s,static:a,unstable_useTransitions:u,future:{}}),[p,s,a,u]);typeof t=="string"&&(t=xo(t));let{pathname:y="/",search:b="",hash:C="",state:N=null,key:E="default"}=t,V=fe.useMemo(()=>{let L=Wr(y,p);return L==null?null:{location:{pathname:L,search:b,hash:C,state:N,key:E},navigationType:i}},[p,y,b,C,N,E,i]);return Os(V!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${C}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:fe.createElement(js.Provider,{value:m},fe.createElement(ru.Provider,{children:e,value:V}))}function Z2({children:o,location:e}){return R2(op(o),e)}function op(o,e=[]){let t=[];return fe.Children.forEach(o,(i,s)=>{if(!fe.isValidElement(i))return;let a=[...e,s];if(i.type===fe.Fragment){t.push.apply(t,op(i.props.children,a));return}Di(i.type===Vr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Di(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=op(i.props.children,a)),t.push(u)}),t}var Fh="get",Vh="application/x-www-form-urlencoded";function yf(o){return typeof HTMLElement<"u"&&o instanceof HTMLElement}function $2(o){return yf(o)&&o.tagName.toLowerCase()==="button"}function K2(o){return yf(o)&&o.tagName.toLowerCase()==="form"}function Q2(o){return yf(o)&&o.tagName.toLowerCase()==="input"}function J2(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function ew(o,e){return o.button===0&&(!e||e==="_self")&&!J2(o)}function lp(o=""){return new URLSearchParams(typeof o=="string"||Array.isArray(o)||o instanceof URLSearchParams?o:Object.keys(o).reduce((e,t)=>{let i=o[t];return e.concat(Array.isArray(i)?i.map(s=>[t,s]):[[t,i]])},[]))}function tw(o,e){let t=lp(o);return e&&e.forEach((i,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}var kh=null;function iw(){if(kh===null)try{new FormData(document.createElement("form"),0),kh=!1}catch{kh=!0}return kh}var nw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hg(o){return o!=null&&!nw.has(o)?(Os(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vh}"`),null):o}function sw(o,e){let t,i,s,a,u;if(K2(o)){let p=o.getAttribute("action");i=p?Wr(p,e):null,t=o.getAttribute("method")||Fh,s=Hg(o.getAttribute("enctype"))||Vh,a=new FormData(o)}else if($2(o)||Q2(o)&&(o.type==="submit"||o.type==="image")){let p=o.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=o.getAttribute("formaction")||p.getAttribute("action");if(i=m?Wr(m,e):null,t=o.getAttribute("formmethod")||p.getAttribute("method")||Fh,s=Hg(o.getAttribute("formenctype"))||Hg(p.getAttribute("enctype"))||Vh,a=new FormData(p,o),!iw()){let{name:y,type:b,value:C}=o;if(b==="image"){let N=y?`${y}.`:"";a.append(`${N}x`,"0"),a.append(`${N}y`,"0")}else y&&a.append(y,C)}}else{if(yf(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Fh,i=null,s=Vh,u=o}return a&&s==="text/plain"&&(u=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pp(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function rw(o,e,t,i){let s=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&Wr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function aw(o,e){if(o.id in e)return e[o.id];try{let t=await import(o.module);return e[o.id]=t,t}catch(t){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ow(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function lw(o,e,t){let i=await Promise.all(o.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await aw(a,t);return u.links?u.links():[]}return[]}));return fw(i.flat(1).filter(ow).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Vy(o,e,t,i,s,a){let u=(m,y)=>t[y]?m.route.id!==t[y].route.id:!0,p=(m,y)=>t[y].pathname!==m.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==m.params["*"];return a==="assets"?e.filter((m,y)=>u(m,y)||p(m,y)):a==="data"?e.filter((m,y)=>{let b=i.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(u(m,y)||p(m,y))return!0;if(m.route.shouldRevalidate){let C=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function cw(o,e,{includeHydrateFallback:t}={}){return uw(o.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function uw(o){return[...new Set(o)]}function hw(o){let e={},t=Object.keys(o).sort();for(let i of t)e[i]=o[i];return e}function fw(o,e){let t=new Set;return new Set(e),o.reduce((i,s)=>{let a=JSON.stringify(hw(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function gb(){let o=fe.useContext(kl);return Pp(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function dw(){let o=fe.useContext(mf);return Pp(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Bp=fe.createContext(void 0);Bp.displayName="FrameworkContext";function pb(){let o=fe.useContext(Bp);return Pp(o,"You must render this element inside a <HydratedRouter> element"),o}function gw(o,e){let t=fe.useContext(Bp),[i,s]=fe.useState(!1),[a,u]=fe.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:y,onMouseLeave:b,onTouchStart:C}=e,N=fe.useRef(null);fe.useEffect(()=>{if(o==="render"&&u(!0),o==="viewport"){let L=G=>{G.forEach(te=>{u(te.isIntersecting)})},ee=new IntersectionObserver(L,{threshold:.5});return N.current&&ee.observe(N.current),()=>{ee.disconnect()}}},[o]),fe.useEffect(()=>{if(i){let L=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(L)}}},[i]);let E=()=>{s(!0)},V=()=>{s(!1),u(!1)};return t?o!=="intent"?[a,N,{}]:[a,N,{onFocus:_c(p,E),onBlur:_c(m,V),onMouseEnter:_c(y,E),onMouseLeave:_c(b,V),onTouchStart:_c(C,E)}]:[!1,N,{}]}function _c(o,e){return t=>{o&&o(t),t.defaultPrevented||e(t)}}function pw({page:o,...e}){let{router:t}=gb(),i=fe.useMemo(()=>Jx(t.routes,o,t.basename),[t.routes,o,t.basename]);return i?fe.createElement(vw,{page:o,matches:i,...e}):null}function mw(o){let{manifest:e,routeModules:t}=pb(),[i,s]=fe.useState([]);return fe.useEffect(()=>{let a=!1;return lw(o,e,t).then(u=>{a||s(u)}),()=>{a=!0}},[o,e,t]),i}function vw({page:o,matches:e,...t}){let i=Va(),{future:s,manifest:a,routeModules:u}=pb(),{basename:p}=gb(),{loaderData:m,matches:y}=dw(),b=fe.useMemo(()=>Vy(o,e,y,a,i,"data"),[o,e,y,a,i]),C=fe.useMemo(()=>Vy(o,e,y,a,i,"assets"),[o,e,y,a,i]),N=fe.useMemo(()=>{if(o===i.pathname+i.search+i.hash)return[];let L=new Set,ee=!1;if(e.forEach(te=>{let ne=a.routes[te.route.id];!ne||!ne.hasLoader||(!b.some(de=>de.route.id===te.route.id)&&te.route.id in m&&u[te.route.id]?.shouldRevalidate||ne.hasClientLoader?ee=!0:L.add(te.route.id))}),L.size===0)return[];let G=rw(o,p,s.unstable_trailingSlashAwareDataRequests,"data");return ee&&L.size>0&&G.searchParams.set("_routes",e.filter(te=>L.has(te.route.id)).map(te=>te.route.id).join(",")),[G.pathname+G.search]},[p,s.unstable_trailingSlashAwareDataRequests,m,i,a,b,e,o,u]),E=fe.useMemo(()=>cw(C,a),[C,a]),V=mw(C);return fe.createElement(fe.Fragment,null,N.map(L=>fe.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),E.map(L=>fe.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),V.map(({key:L,link:ee})=>fe.createElement("link",{key:L,nonce:t.nonce,...ee,crossOrigin:ee.crossOrigin??t.crossOrigin})))}function yw(...o){return e=>{o.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xw&&(window.__reactRouterVersion="7.13.0")}catch{}function bw({basename:o,children:e,unstable_useTransitions:t,window:i}){let s=fe.useRef();s.current==null&&(s.current=ZS({window:i,v5Compat:!0}));let a=s.current,[u,p]=fe.useState({action:a.action,location:a.location}),m=fe.useCallback(y=>{t===!1?p(y):fe.startTransition(()=>p(y))},[t]);return fe.useLayoutEffect(()=>a.listen(m),[a,m]),fe.createElement(W2,{basename:o,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:t})}var mb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zp=fe.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:u,state:p,target:m,to:y,preventScrollReset:b,viewTransition:C,unstable_defaultShouldRevalidate:N,...E},V){let{basename:L,unstable_useTransitions:ee}=fe.useContext(js),G=typeof y=="string"&&mb.test(y),te=rb(y,L);y=te.to;let ne=E2(y,{relative:s}),[de,be,I]=gw(i,E),Ee=Cw(y,{replace:u,state:p,target:m,preventScrollReset:b,relative:s,viewTransition:C,unstable_defaultShouldRevalidate:N,unstable_useTransitions:ee});function Ye(ct){e&&e(ct),ct.defaultPrevented||Ee(ct)}let Be=fe.createElement("a",{...E,...I,href:te.absoluteURL||ne,onClick:te.isExternal||a?e:Ye,ref:yw(V,be),target:m,"data-discover":!G&&t==="render"?"true":void 0});return de&&!G?fe.createElement(fe.Fragment,null,Be,fe.createElement(pw,{page:ne})):Be});zp.displayName="Link";var _w=fe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:u,viewTransition:p,children:m,...y},b){let C=ou(u,{relative:y.relative}),N=Va(),E=fe.useContext(mf),{navigator:V,basename:L}=fe.useContext(js),ee=E!=null&&jw(C)&&p===!0,G=V.encodeLocation?V.encodeLocation(C).pathname:C.pathname,te=N.pathname,ne=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(te=te.toLowerCase(),ne=ne?ne.toLowerCase():null,G=G.toLowerCase()),ne&&L&&(ne=Wr(ne,L)||ne);const de=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let be=te===G||!s&&te.startsWith(G)&&te.charAt(de)==="/",I=ne!=null&&(ne===G||!s&&ne.startsWith(G)&&ne.charAt(G.length)==="/"),Ee={isActive:be,isPending:I,isTransitioning:ee},Ye=be?e:void 0,Be;typeof i=="function"?Be=i(Ee):Be=[i,be?"active":null,I?"pending":null,ee?"transitioning":null].filter(Boolean).join(" ");let ct=typeof a=="function"?a(Ee):a;return fe.createElement(zp,{...y,"aria-current":Ye,className:Be,ref:b,style:ct,to:u,viewTransition:p},typeof m=="function"?m(Ee):m)});_w.displayName="NavLink";var Sw=fe.forwardRef(({discover:o="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:u=Fh,action:p,onSubmit:m,relative:y,preventScrollReset:b,viewTransition:C,unstable_defaultShouldRevalidate:N,...E},V)=>{let{unstable_useTransitions:L}=fe.useContext(js),ee=Ow(),G=Ew(p,{relative:y}),te=u.toLowerCase()==="get"?"get":"post",ne=typeof p=="string"&&mb.test(p),de=be=>{if(m&&m(be),be.defaultPrevented)return;be.preventDefault();let I=be.nativeEvent.submitter,Ee=I?.getAttribute("formmethod")||u,Ye=()=>ee(I||be.currentTarget,{fetcherKey:e,method:Ee,navigate:t,replace:s,state:a,relative:y,preventScrollReset:b,viewTransition:C,unstable_defaultShouldRevalidate:N});L&&t!==!1?fe.startTransition(()=>Ye()):Ye()};return fe.createElement("form",{ref:V,method:te,action:G,onSubmit:i?m:de,...E,"data-discover":!ne&&o==="render"?"true":void 0})});Sw.displayName="Form";function ww(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vb(o){let e=fe.useContext(kl);return Di(e,ww(o)),e}function Cw(o,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let y=vf(),b=Va(),C=ou(o,{relative:a});return fe.useCallback(N=>{if(ew(N,e)){N.preventDefault();let E=t!==void 0?t:Kc(b)===Kc(C),V=()=>y(o,{replace:E,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:p});m?fe.startTransition(()=>V()):V()}},[b,y,C,t,i,e,o,s,a,u,p,m])}function Tw(o){Os(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=fe.useRef(lp(o)),t=fe.useRef(!1),i=Va(),s=fe.useMemo(()=>tw(i.search,t.current?null:e.current),[i.search]),a=vf(),u=fe.useCallback((p,m)=>{const y=lp(typeof p=="function"?p(new URLSearchParams(s)):p);t.current=!0,a("?"+y,m)},[a,s]);return[s,u]}var kw=0,Aw=()=>`__${String(++kw)}__`;function Ow(){let{router:o}=vb("useSubmit"),{basename:e}=fe.useContext(js),t=H2(),i=o.fetch,s=o.navigate;return fe.useCallback(async(a,u={})=>{let{action:p,method:m,encType:y,formData:b,body:C}=sw(a,e);if(u.navigate===!1){let N=u.fetcherKey||Aw();await i(N,t,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:C,formMethod:u.method||m,formEncType:u.encType||y,flushSync:u.flushSync})}else await s(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:b,body:C,formMethod:u.method||m,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,s,e,t])}function Ew(o,{relative:e}={}){let{basename:t}=fe.useContext(js),i=fe.useContext(Ks);Di(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...ou(o||".",{relative:e})},u=Va();if(o==null){a.search=u.search;let p=new URLSearchParams(a.search),m=p.getAll("index");if(m.some(b=>b==="")){p.delete("index"),m.filter(C=>C).forEach(C=>p.append("index",C));let b=p.toString();a.search=b?`?${b}`:""}}return(!o||o===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qr([t,a.pathname])),Kc(a)}function jw(o,{relative:e}={}){let t=fe.useContext(ob);Di(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vb("useViewTransitionState"),s=ou(o,{relative:e});if(!t.isTransitioning)return!1;let a=Wr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Wr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Qh(s.pathname,u)!=null||Qh(s.pathname,a)!=null}var Ip=Qx();const Uy=o=>{let e;const t=new Set,i=(y,b)=>{const C=typeof y=="function"?y(e):y;if(!Object.is(C,e)){const N=e;e=b??(typeof C!="object"||C===null)?C:Object.assign({},e,C),t.forEach(E=>E(e,N))}},s=()=>e,p={setState:i,getState:s,getInitialState:()=>m,subscribe:y=>(t.add(y),()=>t.delete(y))},m=e=o(i,s,p);return p},Mw=(o=>o?Uy(o):Uy),Dw=o=>o;function Nw(o,e=Dw){const t=Yr.useSyncExternalStore(o.subscribe,Yr.useCallback(()=>e(o.getState()),[o,e]),Yr.useCallback(()=>e(o.getInitialState()),[o,e]));return Yr.useDebugValue(t),t}const Hy=o=>{const e=Mw(o),t=i=>Nw(e,i);return Object.assign(t,e),t},Rw=(o=>o?Hy(o):Hy),Yy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Xy=o=>!!o.dispatchFromDevtools&&typeof o.dispatch=="function",Qc=new Map,Ah=o=>{const e=Qc.get(o);return e?Object.fromEntries(Object.entries(e.stores).map(([t,i])=>[t,i.getState()])):{}},Lw=(o,e,t)=>{if(o===void 0)return{type:"untracked",connection:e.connect(t)};const i=Qc.get(t.name);if(i)return{type:"tracked",store:o,...i};const s={connection:e.connect(t),stores:{}};return Qc.set(t.name,s),{type:"tracked",store:o,...s}},Pw=(o,e)=>{if(e===void 0)return;const t=Qc.get(o);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&Qc.delete(o))},Bw=o=>{var e,t;if(!o)return;const i=o.split(`
`),s=i.findIndex(u=>u.includes("api.setState"));if(s<0)return;const a=((e=i[s+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(a))==null?void 0:t[1]},zw=(o,e={})=>(t,i,s)=>{const{enabled:a,anonymousActionType:u,store:p,...m}=e;let y;try{y=(a??(Yy?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!y)return o(t,i,s);const{connection:b,...C}=Lw(p,y,m);let N=!0;s.setState=((L,ee,G)=>{const te=t(L,ee);if(!N)return te;const ne=G===void 0?{type:u||Bw(new Error().stack)||"anonymous"}:typeof G=="string"?{type:G}:G;return p===void 0?(b?.send(ne,i()),te):(b?.send({...ne,type:`${p}/${ne.type}`},{...Ah(m.name),[p]:s.getState()}),te)}),s.devtools={cleanup:()=>{b&&typeof b.unsubscribe=="function"&&b.unsubscribe(),Pw(m.name,p)}};const E=(...L)=>{const ee=N;N=!1,t(...L),N=ee},V=o(s.setState,i,s);if(C.type==="untracked"?b?.init(V):(C.stores[C.store]=s,b?.init(Object.fromEntries(Object.entries(C.stores).map(([L,ee])=>[L,L===C.store?V:ee.getState()])))),Xy(s)){let L=!1;const ee=s.dispatch;s.dispatch=(...G)=>{(Yy?"production":void 0)!=="production"&&G[0].type==="__setState"&&!L&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),L=!0),ee(...G)}}return b.subscribe(L=>{var ee;switch(L.type){case"ACTION":if(typeof L.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Yg(L.payload,G=>{if(G.type==="__setState"){if(p===void 0){E(G.state);return}Object.keys(G.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const te=G.state[p];if(te==null)return;JSON.stringify(s.getState())!==JSON.stringify(te)&&E(te);return}Xy(s)&&s.dispatch(G)});case"DISPATCH":switch(L.payload.type){case"RESET":return E(V),p===void 0?b?.init(s.getState()):b?.init(Ah(m.name));case"COMMIT":if(p===void 0){b?.init(s.getState());return}return b?.init(Ah(m.name));case"ROLLBACK":return Yg(L.state,G=>{if(p===void 0){E(G),b?.init(s.getState());return}E(G[p]),b?.init(Ah(m.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Yg(L.state,G=>{if(p===void 0){E(G);return}JSON.stringify(s.getState())!==JSON.stringify(G[p])&&E(G[p])});case"IMPORT_STATE":{const{nextLiftedState:G}=L.payload,te=(ee=G.computedStates.slice(-1)[0])==null?void 0:ee.state;if(!te)return;E(p===void 0?te:te[p]),b?.send(null,G);return}case"PAUSE_RECORDING":return N=!N}return}}),V},Iw=zw,Yg=(o,e)=>{let t;try{t=JSON.parse(o)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}t!==void 0&&e(t)};function ye(o,e,t){return(e=(function(i){var s=(function(a,u){if(typeof a!="object"||!a)return a;var p=a[Symbol.toPrimitive];if(p!==void 0){var m=p.call(a,u);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(a)})(i,"string");return typeof s=="symbol"?s:s+""})(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}class Gy{constructor(){ye(this,"browserShadowBlurConstant",1),ye(this,"DPI",96),ye(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),ye(this,"perfLimitSizeTotal",2097152),ye(this,"maxCacheSideLimit",4096),ye(this,"minCacheSideLimit",256),ye(this,"disableStyleCopyPaste",!1),ye(this,"enableGLFiltering",!0),ye(this,"textureSize",4096),ye(this,"forceGLPutImageData",!1),ye(this,"cachesBoundsOfCurve",!1),ye(this,"fontPaths",{}),ye(this,"NUM_FRACTION_DIGITS",4)}}const qt=new class extends Gy{constructor(o){super(),this.configure(o)}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,o)}addFonts(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths={...this.fontPaths,...o}}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(o=>{delete this.fontPaths[o]})}clearFonts(){this.fontPaths={}}restoreDefaults(o){const e=new Gy,t=o?.reduce((i,s)=>(i[s]=e[s],i),{})||e;this.configure(t)}},Zr=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return console[o]("fabric",...t)};let Us=class extends Error{constructor(e,t){super(`fabric: ${e}`,t)}};class yb extends Us{constructor(e){super(`${e} 'options.signal' is in 'aborted' state`)}}class Fw{}class Vw extends Fw{testPrecision(e,t){const i=`precision ${t} float;
void main(){}`,s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,i),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(i=>this.testPrecision(t,i)),t.getExtension("WEBGL_lose_context").loseContext(),Zr("log",`WebGL: max texture size ${this.maxTextureSize}`))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Uw={};let cp;const Hw=o=>{cp=o},Gs=()=>cp||(cp={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Vw,dispose(){},copyPasteData:Uw}),bo=()=>Gs().document,ur=()=>Gs().window,xb=()=>{var o;return Math.max((o=qt.devicePixelRatio)!==null&&o!==void 0?o:ur().devicePixelRatio,1)},gl=new class{constructor(){ye(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(o){let{fontFamily:e,fontStyle:t,fontWeight:i}=o;e=e.toLowerCase();const s=this.charWidthsCache;s.has(e)||s.set(e,new Map);const a=s.get(e),u=`${t.toLowerCase()}_${(i+"").toLowerCase()}`;return a.has(u)||a.set(u,new Map),a.get(u)}clearFontCache(o){o?this.charWidthsCache.delete((o||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(o){const{perfLimitSizeTotal:e}=qt,t=Math.sqrt(e*o);return[Math.floor(t),Math.floor(e/t)]}},Jh="7.1.0";function Uh(){}const za=Math.PI/2,Yw=Math.PI/4,qs=2*Math.PI,Fp=Math.PI/180,Cn=Object.freeze([1,0,0,1,0,0]),Vp=16,Ra=.4477152502,jt="center",ni="left",Kn="top",up="bottom",Ii="right",Ln="none",Up=/\r?\n/,bb="moving",xf="scaling",_b="rotating",Hp="rotate",Sb="skewing",yl="resizing",wb="modifyPoly",Xw="modifyPath",ef="changed",bf="scale",Bn="scaleX",hs="scaleY",Al="skewX",Ol="skewY",sn="fill",Qn="stroke",tf="modified",lo="ltr",Hr="rtl",hp="normal",cl="json",Xg="svg",ht=new class{constructor(){this[cl]=new Map,this[Xg]=new Map}has(o){return this[cl].has(o)}getClass(o){const e=this[cl].get(o);if(!e)throw new Us(`No class registered for ${o}`);return e}setClass(o,e){e?this[cl].set(e,o):(this[cl].set(o.type,o),this[cl].set(o.type.toLowerCase(),o))}getSVGClass(o){return this[Xg].get(o)}setSVGClass(o,e){this[Xg].set(e??o.type.toLowerCase(),o)}},Jc=new class extends Array{remove(o){const e=this.indexOf(o);e>-1&&this.splice(e,1)}cancelAll(){const o=this.splice(0);return o.forEach(e=>e.abort()),o}cancelByCanvas(o){if(!o)return[];const e=this.filter(t=>{var i;return t.target===o||typeof t.target=="object"&&((i=t.target)===null||i===void 0?void 0:i.canvas)===o});return e.forEach(t=>t.abort()),e}cancelByTarget(o){if(!o)return[];const e=this.filter(t=>t.target===o);return e.forEach(t=>t.abort()),e}};class Cb{constructor(){ye(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(i=>{let[s,a]=i;this.on(s,a)}),()=>this.off(e);if(t){const i=e;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(t),()=>this.off(i,t)}return()=>!1}once(e,t){if(typeof e=="object"){const i=[];return Object.entries(e).forEach(s=>{let[a,u]=s;i.push(this.once(a,u))}),()=>i.forEach(s=>s())}if(t){const i=this.on(e,function(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];t.call(this,...a),i()});return i}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const i=this.__eventListeners[e],s=i.indexOf(t);s>-1&&i.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof e=="object"?Object.entries(e).forEach(i=>{let[s,a]=i;this._removeEventListener(s,a)}):this._removeEventListener(e,t)}fire(e,t){var i;if(!this.__eventListeners)return;const s=(i=this.__eventListeners[e])===null||i===void 0?void 0:i.concat();if(s)for(let a=0;a<s.length;a++)s[a].call(this,t||{})}}const co=(o,e)=>{const t=o.indexOf(e);return t!==-1&&o.splice(t,1),o},Ws=o=>{if(o===0)return 1;switch(Math.abs(o)/za){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},Zs=o=>{if(o===0)return 0;const e=o/za,t=Math.sign(o);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(o)};class ke{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ke(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ke(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ke(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ke(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ke(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ke(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ke(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ke(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ke(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)}midPointFrom(e){return this.lerp(e)}min(e){return new ke(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ke(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return`${this.x},${this.y}`}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,i=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=i}clone(){return new ke(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yp;const i=Zs(e),s=Ws(e),a=this.subtract(t);return new ke(a.x*s-a.y*i,a.x*i+a.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ke(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Yp=new ke(0,0),Hh=o=>!!o&&Array.isArray(o._objects);function Xp(o){class e extends o{constructor(){super(...arguments),ye(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];const u=this._objects.push(...s);return s.forEach(p=>this._onObjectAdded(p)),u}insertAt(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];return this._objects.splice(i,0,...a),a.forEach(p=>this._onObjectAdded(p)),this._objects.length}remove(){const i=this._objects,s=[];for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return u.forEach(m=>{const y=i.indexOf(m);y!==-1&&(i.splice(y,1),s.push(m),this._onObjectRemoved(m))}),s}forEachObject(i){this.getObjects().forEach((s,a,u)=>i(s,a,u))}getObjects(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length===0?[...this._objects]:this._objects.filter(u=>u.isType(...s))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,s){return!!this._objects.includes(i)||!!s&&this._objects.some(a=>a instanceof e&&a.contains(i,!0))}complexity(){return this._objects.reduce((i,s)=>i+=s.complexity?s.complexity():0,0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(co(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(co(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,s){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==0){const u=this.findNewLowerIndex(i,a,s);return co(this._objects,i),this._objects.splice(u,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,s){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==this._objects.length-1){const u=this.findNewUpperIndex(i,a,s);return co(this._objects,i),this._objects.splice(u,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,s){return i!==this._objects[s]&&(co(this._objects,i),this._objects.splice(s,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,s,a){let u;if(a){u=s;for(let p=s-1;p>=0;--p)if(i.isOverlapping(this._objects[p])){u=p;break}}else u=s-1;return u}findNewUpperIndex(i,s,a){let u;if(a){u=s;for(let p=s+1;p<this._objects.length;++p)if(i.isOverlapping(this._objects[p])){u=p;break}}else u=s+1;return u}collectObjects(i){let{left:s,top:a,width:u,height:p}=i,{includeIntersecting:m=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const y=[],b=new ke(s,a),C=b.add(new ke(u,p));for(let N=this._objects.length-1;N>=0;N--){const E=this._objects[N];E.selectable&&E.visible&&(m&&E.intersectsWithRect(b,C)||E.isContainedWithinRect(b,C)||m&&E.containsPoint(b)||m&&E.containsPoint(C))&&y.push(E)}return y}}return e}class Tb extends Cb{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Gc(o){return ur().requestAnimationFrame(o)}function kb(o){return ur().cancelAnimationFrame(o)}let Gw=0;const Ia=()=>Gw++,Es=()=>{const o=bo().createElement("canvas");if(!o||o.getContext===void 0)throw new Us("Failed to create `canvas` element");return o},Ab=()=>bo().createElement("img"),Jn=o=>{const e=Es();return e.width=o.width,e.height=o.height,e},Gp=(o,e,t)=>o.toDataURL(`image/${e}`,t),qp=(o,e,t)=>new Promise((i,s)=>{o.toBlob(i,`image/${e}`,t)}),Li=o=>o*Fp,$r=o=>o/Fp,Ob=o=>o.every((e,t)=>e===Cn[t]),Sn=(o,e,t)=>new ke(o).transform(e,t),$n=o=>{const e=1/(o[0]*o[3]-o[1]*o[2]),t=[e*o[3],-e*o[1],-e*o[2],e*o[0],0,0],{x:i,y:s}=new ke(o[4],o[5]).transform(t,!0);return t[4]=-i,t[5]=-s,t},Mi=(o,e,t)=>[o[0]*e[0]+o[2]*e[1],o[1]*e[0]+o[3]*e[1],o[0]*e[2]+o[2]*e[3],o[1]*e[2]+o[3]*e[3],t?0:o[0]*e[4]+o[2]*e[5]+o[4],t?0:o[1]*e[4]+o[3]*e[5]+o[5]],_f=(o,e)=>o.reduceRight((t,i)=>i&&t?Mi(i,t,e):i||t,void 0)||Cn.concat(),Eb=o=>{let[e,t]=o;return Math.atan2(t,e)},mo=o=>{const e=Eb(o),t=Math.pow(o[0],2)+Math.pow(o[1],2),i=Math.sqrt(t),s=(o[0]*o[3]-o[2]*o[1])/i,a=Math.atan2(o[0]*o[2]+o[1]*o[3],t);return{angle:$r(e),scaleX:i,scaleY:s,skewX:$r(a),skewY:0,translateX:o[4]||0,translateY:o[5]||0}},El=function(o){return[1,0,0,1,o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function _o(){let{angle:o=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Li(o),s=Ws(i),a=Zs(i);return[s,a,-a,s,e?e-(s*e-a*t):0,t?t-(a*e+s*t):0]}const Sf=function(o){return[o,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,0,0]},jb=o=>Math.tan(Li(o)),Wp=o=>[1,0,jb(o),1,0,0],Zp=o=>[1,jb(o),0,1,0,0],lu=o=>{let{scaleX:e=1,scaleY:t=1,flipX:i=!1,flipY:s=!1,skewX:a=0,skewY:u=0}=o,p=Sf(i?-e:e,s?-t:t);return a&&(p=Mi(p,Wp(a),!0)),u&&(p=Mi(p,Zp(u),!0)),p},Mb=o=>{const{translateX:e=0,translateY:t=0,angle:i=0}=o;let s=El(e,t);i&&(s=Mi(s,_o({angle:i})));const a=lu(o);return Ob(a)||(s=Mi(s,a)),s},qc=function(o){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(i,s){if(e&&e.aborted)return s(new yb("loadImage"));const a=Ab();let u;e&&(u=function(m){a.src="",s(m)},e.addEventListener("abort",u,{once:!0}));const p=function(){a.onload=a.onerror=null,u&&e?.removeEventListener("abort",u),i(a)};o?(a.onload=p,a.onerror=function(){u&&e?.removeEventListener("abort",u),s(new Us(`Error loading ${a.src}`))},t&&(a.crossOrigin=t),a.src=o):p()})},xl=function(o){let{signal:e,reviver:t=Uh}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((i,s)=>{const a=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(o.map(u=>ht.getClass(u.type).fromObject(u,{signal:e}).then(p=>(t(u,p),a.push(p),p)))).then(i).catch(u=>{a.forEach(p=>{p.dispose&&p.dispose()}),s(u)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},cu=function(o){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0});const a=Object.values(o).map(p=>p&&p.type&&ht.has(p.type)?xl([p],{signal:e}).then(m=>{let[y]=m;return s.push(y),y}):p),u=Object.keys(o);Promise.all(a).then(p=>p.reduce((m,y,b)=>(m[u[b]]=y,m),{})).then(t).catch(p=>{s.forEach(m=>{m.dispose&&m.dispose()}),i(p)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},So=function(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in o&&(e[t]=o[t]),e),{})},$p=(o,e)=>Object.keys(o).reduce((t,i)=>(e(o[i],i,o)&&(t[i]=o[i]),t),{}),gi=(o,e)=>parseFloat(Number(o).toFixed(e)),bl=o=>"matrix("+o.map(e=>gi(e,qt.NUM_FRACTION_DIGITS)).join(" ")+")",As=o=>!!o&&o.toLive!==void 0,qy=o=>!!o&&typeof o.toObject=="function",Wy=o=>!!o&&o.offsetX!==void 0&&"source"in o,uo=o=>!!o&&"multiSelectionStacking"in o;function Db(o){const e=o&&Vs(o);let t=0,i=0;if(!o||!e)return{left:t,top:i};let s=o;const a=e.documentElement,u=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=u.scrollLeft||a.scrollLeft||0,i=u.scrollTop||a.scrollTop||0):(t+=s.scrollLeft||0,i+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:i}}const Vs=o=>o.ownerDocument||null,Nb=o=>{var e;return((e=o.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Rb=function(o,e,t){let{width:i,height:s}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;o.width=i,o.height=s,a>1&&(o.setAttribute("width",(i*a).toString()),o.setAttribute("height",(s*a).toString()),e.scale(a,a))},fp=(o,e)=>{let{width:t,height:i}=e;t&&(o.style.width=typeof t=="number"?`${t}px`:t),i&&(o.style.height=typeof i=="number"?`${i}px`:i)};function Zy(o){return o.onselectstart!==void 0&&(o.onselectstart=()=>!1),o.style.userSelect=Ln,o}class Kp{constructor(e){ye(this,"_originalCanvasStyle",void 0),ye(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(i=e)&&i.getContext!==void 0?e:e&&bo().getElementById(e)||Es();var i;if(t.hasAttribute("data-fabric"))throw new Us("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:i}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width",`${t}`),s.setAttribute("height",`${i}`),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:i,ctx:s}=this.lower;Rb(i,s,e,t)}setCSSDimensions(e){fp(this.lower.el,e)}calcOffset(){return(function(e){var t;const i=e&&Vs(e),s={left:0,top:0};if(!i)return s;const a=((t=Nb(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(a.borderLeftWidth,10)||0,s.top+=parseInt(a.borderTopWidth,10)||0,s.left+=parseInt(a.paddingLeft,10)||0,s.top+=parseInt(a.paddingTop,10)||0;let u={left:0,top:0};const p=i.documentElement;e.getBoundingClientRect!==void 0&&(u=e.getBoundingClientRect());const m=Db(e);return{left:u.left+m.left-(p.clientLeft||0)+s.left,top:u.top+m.top-(p.clientTop||0)+s.top}})(this.lower.el)}dispose(){Gs().dispose(this.lower.el),delete this.lower}}const qw={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Cn],patternQuality:"best"};class wo extends Xp(Tb){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return wo.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Kp(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const a=super.insertAt(e,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Zr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?xb():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s={width:this.width,height:this.height,...e};this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}i||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const i=e,s=[...this.viewportTransform],a=Sn(e,$n(s));s[0]=t,s[3]=t;const u=Sn(a,s);s[4]+=i.x-u.x,s[5]+=i.y-u.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new ke(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ke(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Gc(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,i=$n(this.viewportTransform),s=Sn({x:0,y:0},i),a=Sn({x:e,y:t},i),u=s.min(a),p=s.max(a);return this.vptCoords={tl:u,tr:new ke(p.x,u.y),bl:new ke(u.x,p.y),br:p}}cancelRequestedRender(){this.nextRenderHandle&&(kb(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const i=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality=this.patternQuality,this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const i=this.viewportTransform;e.save(),e.transform(...i),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let i=0,s=t.length;i<s;++i)t[i]&&t[i].render(e)}_renderBackgroundOrOverlay(e,t){const i=this[`${t}Color`],s=this[`${t}Image`],a=this.viewportTransform,u=this[`${t}Vpt`];if(!i&&!s)return;const p=As(i);if(i){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=p?i.toLive(e):i,u&&e.transform(...a),p){e.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const m=i.gradientTransform||i.patternTransform;m&&e.transform(...m)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:m}=this;this.skipOffscreen=u,u&&e.transform(...a),s.render(e),this.skipOffscreen=m,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenterPoint(){return new ke(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ke(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ke(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ke(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ke(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Sn(this.getCenterPoint(),$n(this.viewportTransform))}_centerObject(e,t){e.setXY(t,jt,jt),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const i=this.clipPath,s=i&&!i.excludeFromExport?this._toObject(i,e,t):null;return{version:Jh,...So(this,t),objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t)),...this.__serializeBgOverlay(e,t),...s?{clipPath:s}:null}}_toObject(e,t,i){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](i);return this.includeDefaultValues||(e.includeDefaultValues=!!s),a}__serializeBgOverlay(e,t){const i={},s=this.backgroundImage,a=this.overlayImage,u=this.backgroundColor,p=this.overlayColor;return As(u)?u.excludeFromExport||(i.background=u.toObject(t)):u&&(i.background=u),As(p)?p.excludeFromExport||(i.overlay=p.toObject(t)):p&&(i.overlay=p),s&&!s.excludeFromExport&&(i.backgroundImage=this._toObject(s,e,t)),a&&!a.excludeFromExport&&(i.overlayImage=this._toObject(a,e,t)),i}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const i=[];return this._setSVGPreamble(i,e),this._setSVGHeader(i,e),this.clipPath&&i.push(`<g clip-path="url(#${this.clipPath.clipPathId})" >
`),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",t),this._setSVGObjects(i,t),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",t),i.push("</svg>"),i.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const i=t.width||`${this.width}`,s=t.height||`${this.height}`,a=qt.NUM_FRACTION_DIGITS,u=t.viewBox;let p;if(u)p=`viewBox="${u.x} ${u.y} ${u.width} ${u.height}" `;else if(this.svgViewportTransformation){const m=this.viewportTransform;p=`viewBox="${gi(-m[4]/m[0],a)} ${gi(-m[5]/m[3],a)} ${gi(this.width/m[0],a)} ${gi(this.height/m[3],a)}" `}else p=`viewBox="0 0 ${this.width} ${this.height}" `;e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',s,'" ',p,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Jh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId=`CLIPPATH_${Ia()}`,`<clipPath id="${t.clipPathId}" >
${t.toClipPathSVG(e.reviver)}</clipPath>
`):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this[`${e}Color`];if(As(t)){const i=this[`${e}Vpt`],s=this.viewportTransform,a={isType:()=>!1,width:this.width/(i?s[0]:1),height:this.height/(i?s[3]:1)};return t.toSVG(a,{additionalTransform:i?bl(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},i=qt.fontPaths;this._objects.forEach(function a(u){e.push(u),Hh(u)&&u._objects.forEach(a)}),e.forEach(a=>{if(!(u=a)||typeof u._renderText!="function")return;var u;const{styles:p,fontFamily:m}=a;!t[m]&&i[m]&&(t[m]=!0,p&&Object.values(p).forEach(y=>{Object.values(y).forEach(b=>{let{fontFamily:C=""}=b;!t[C]&&i[C]&&(t[C]=!0)})}))});const s=Object.keys(t).map(a=>`		@font-face {
			font-family: '${a}';
			src: url('${i[a]}');
		}
`).join("");return s?`	<style type="text/css"><![CDATA[
${s}]]></style>
`:""}_setSVGObjects(e,t){this.forEachObject(i=>{i.excludeFromExport||this._setSVGObject(e,i,t)})}_setSVGObject(e,t,i){e.push(t.toSVG(i))}_setSVGBgOverlayImage(e,t,i){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(i))}_setSVGBgOverlayColor(e,t){const i=this[`${t}Color`];if(i)if(As(i)){const s=i.repeat||"",a=this.width,u=this.height,p=this[`${t}Vpt`]?bl($n(this.viewportTransform)):"";e.push(`<rect transform="${p} translate(${a/2},${u/2})" x="${i.offsetX-a/2}" y="${i.offsetY-u/2}" width="${s!=="repeat-y"&&s!=="no-repeat"||!Wy(i)?a:i.source.width}" height="${s!=="repeat-x"&&s!=="no-repeat"||!Wy(i)?u:i.source.height}" fill="url(#SVGID_${i.id})"></rect>
`)}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Us("`json` is undefined"));const{objects:s=[],...a}=typeof e=="string"?JSON.parse(e):e,{backgroundImage:u,background:p,overlayImage:m,overlay:y,clipPath:b}=a,C=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([xl(s,{reviver:t,signal:i}),cu({backgroundImage:u,backgroundColor:p,overlayImage:m,overlayColor:y,clipPath:b},{signal:i})]).then(N=>{let[E,V]=N;return this.clear(),this.add(...E),this.set(a),this.set(V),this.renderOnAddRemove=C,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Jn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:i=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,u=s*(a?this.getRetinaScaling():1);return Gp(this.toCanvasElement(u,e),t,i)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:i=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,u=s*(a?this.getRetinaScaling():1);return qp(this.toCanvasElement(u,e),t,i)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:i,left:s,top:a,filter:u}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=(t||this.width)*e,m=(i||this.height)*e,y=this.getZoom(),b=this.width,C=this.height,N=this.skipControlsDrawing,E=y*e,V=this.viewportTransform,L=[E,0,0,E,(V[4]-(s||0))*e,(V[5]-(a||0))*e],ee=this.enableRetinaScaling,G=Jn({width:p,height:m}),te=u?this._objects.filter(ne=>u(ne)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=L,this.width=p,this.height=m,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(G.getContext("2d"),te),this.viewportTransform=V,this.width=b,this.height=C,this.calcViewportBoundaries(),this.enableRetinaScaling=ee,this.skipControlsDrawing=N,G}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Jc.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const i=()=>{this.destroy(),e(!0)};i.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=i:i()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return`#<Canvas (${this.complexity()}): { objects: ${this._objects.length} }>`}}ye(wo,"ownDefaults",qw);const Ww=["touchstart","touchmove","touchend"],Lb=o=>{const e=Db(o.target),t=(function(i){const s=i.changedTouches;return s&&s[0]?s[0]:i})(o);return new ke(t.clientX+e.left,t.clientY+e.top)},nf=o=>Ww.includes(o.type)||o.pointerType==="touch",$y=o=>{o.preventDefault(),o.stopPropagation()},pr=o=>{let e=0,t=0,i=0,s=0;for(let a=0,u=o.length;a<u;a++){const{x:p,y:m}=o[a];(p>i||!a)&&(i=p),(p<e||!a)&&(e=p),(m>s||!a)&&(s=m),(m<t||!a)&&(t=m)}return{left:e,top:t,width:i-e,height:s-t}},Pb=(o,e)=>_l(o,Mi(e,o.calcOwnMatrix())),_l=(o,e)=>{const{translateX:t,translateY:i,scaleX:s,scaleY:a,...u}=mo(e),p=new ke(t,i);o.flipX=!1,o.flipY=!1,Object.assign(o,u),o.set({scaleX:s,scaleY:a}),o.setPositionByOrigin(p,jt,jt)},Bb=o=>{o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},Qp=o=>({scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}),wf=(o,e,t)=>{const i=o/2,s=e/2,a=[new ke(-i,-s),new ke(i,-s),new ke(-i,s),new ke(i,s)].map(p=>p.transform(t)),u=pr(a);return new ke(u.width,u.height)},uu=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cn;return Mi($n(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn),o)},Kr=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cn;return o.transform(uu(e,t))},zb=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cn;return o.transform(uu(e,t),!0)},dp=(o,e,t)=>{const i=uu(e,t);return _l(o,Mi(i,o.calcOwnMatrix())),i},Zw={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Nn=o=>typeof o=="string"?Zw[o]:o-.5,$w=new ke(1,0),Ib=new ke,Jp=(o,e)=>o.rotate(e),eu=(o,e)=>new ke(e).subtract(o),sf=o=>o.distanceFrom(Ib),rf=(o,e)=>Math.atan2(pl(o,e),Fb(o,e)),e0=o=>rf($w,o),Cf=o=>o.eq(Ib)?o:o.scalarDivide(sf(o)),t0=function(o){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Cf(new ke(-o.y,o.x).scalarMultiply(e?1:-1))},pl=(o,e)=>o.x*e.y-o.y*e.x,Fb=(o,e)=>o.x*e.x+o.y*e.y,gp=(o,e,t)=>{if(o.eq(e)||o.eq(t))return!0;const i=pl(e,t),s=pl(e,o),a=pl(t,o);return i>=0?s>=0&&a<=0:!(s<=0&&a>=0)},af="not-allowed";function Vb(o){return Nn(o.originX)===Nn(jt)&&Nn(o.originY)===Nn(jt)}function Ky(o){return .5-Nn(o)}const Xs=(o,e)=>o[e],i0=(o,e,t,i)=>({e:o,transform:e,pointer:new ke(t,i)});function Ub(o,e,t){const i=t,s=Kr(o.getCenterPoint(),o.canvas.viewportTransform,void 0),a=e0(eu(s,i))+qs;return Math.round(a%qs/Yw)}function Tf(o,e,t,i,s){var a;let{target:u,corner:p}=o;const m=u.controls[p],y=((a=u.canvas)===null||a===void 0?void 0:a.getZoom())||1,b=u.padding/y,C=(function(N,E,V,L){const ee=N.getRelativeCenterPoint(),G=V!==void 0&&L!==void 0?N.translateToGivenOrigin(ee,jt,jt,V,L):new ke(N.left,N.top);return(N.angle?E.rotate(-Li(N.angle),ee):E).subtract(G)})(u,new ke(i,s),e,t);return C.x>=b&&(C.x-=b),C.x<=-b&&(C.x+=b),C.y>=b&&(C.y-=b),C.y<=b&&(C.y+=b),C.x-=m.offsetX,C.y-=m.offsetY,C}const of=o=>o.replace(/\s+/g," "),Qy={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Gg=(o,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o),Jy=(o,e,t,i)=>{o/=255,e/=255,t/=255;const s=Math.max(o,e,t),a=Math.min(o,e,t);let u,p;const m=(s+a)/2;if(s===a)u=p=0;else{const y=s-a;switch(p=m>.5?y/(2-s-a):y/(s+a),s){case o:u=(e-t)/y+(e<t?6:0);break;case e:u=(t-o)/y+2;break;case t:u=(o-e)/y+4}u/=6}return[Math.round(360*u),Math.round(100*p),Math.round(100*m),i]},ex=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(o)/(o.endsWith("%")?100:1)},Oh=o=>Math.min(Math.round(o),255).toString(16).toUpperCase().padStart(2,"0"),tx=o=>{let[e,t,i,s=1]=o;const a=Math.round(.3*e+.59*t+.11*i);return[a,a,a,s]};class ii{constructor(e){if(ye(this,"isUnrecognised",!1),e)if(e instanceof ii)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,i,s,a=1]=e;this.setSource([t,i,s,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Qy&&(e=Qy[e]),e==="transparent"?[255,255,255,0]:ii.sourceFromHex(e)||ii.sourceFromRgb(e)||ii.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,i]=this.getSource();return`rgb(${e},${t},${i})`}toRgba(){return`rgba(${this.getSource().join(",")})`}toHsl(){const[e,t,i]=Jy(...this.getSource());return`hsl(${e},${t}%,${i}%)`}toHsla(){const[e,t,i,s]=Jy(...this.getSource());return`hsla(${e},${t}%,${i}%,${s})`}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,i,s]=this.getSource();return`${Oh(e)}${Oh(t)}${Oh(i)}${Oh(Math.round(255*s))}`}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(tx(this.getSource())),this}toBlackWhite(e){const[t,,,i]=tx(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,i]),this}overlayWith(e){e instanceof ii||(e=new ii(e));const t=this.getSource(),i=e.getSource(),[s,a,u]=t.map((p,m)=>Math.round(.5*p+.5*i[m]));return this.setSource([s,a,u,t[3]]),this}static fromRgb(e){return ii.fromRgba(e)}static fromRgba(e){return new ii(ii.sourceFromRgb(e))}static sourceFromRgb(e){const t=of(e).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(t){const[i,s,a]=t.slice(1,4).map(u=>{const p=parseFloat(u);return u.endsWith("%")?Math.round(2.55*p):p});return[i,s,a,ex(t[4])]}}static fromHsl(e){return ii.fromHsla(e)}static fromHsla(e){return new ii(ii.sourceFromHsl(e))}static sourceFromHsl(e){const t=of(e).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!t)return;const i=(ii.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let u,p,m;if(s===0)u=p=m=a;else{const y=a<=.5?a*(s+1):a+s-a*s,b=2*a-y;u=Gg(b,y,i+1/3),p=Gg(b,y,i),m=Gg(b,y,i-1/3)}return[Math.round(255*u),Math.round(255*p),Math.round(255*m),ex(t[4])]}static fromHex(e){return new ii(ii.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let i;i=t.length<=4?t.split("").map(m=>m+m):t.match(/.{2}/g);const[s,a,u,p=255]=i.map(m=>parseInt(m,16));return[s,a,u,p/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),i=parseFloat(t);return t.includes("rad")?$r(i):t.includes("turn")?360*i:i}}const Dn=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vp;const t=/\D{0,2}$/.exec(o),i=parseFloat(o),s=qt.DPI;switch(t?.[0]){case"mm":return i*s/25.4;case"cm":return i*s/2.54;case"in":return i*s;case"pt":return i*s/72;case"pc":return i*s/72*12;case"em":return i*e;default:return i}},n0=o=>{const[e,t]=o.trim().split(" "),[i,s]=(a=e)&&a!==Ln?[a.slice(1,4),a.slice(5,8)]:a===Ln?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:i,alignY:s}},tu=function(o,e){let t,i,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t=`url(#SVGID_${e.id})`;else{const a=new ii(e),u=a.getAlpha();t=a.toRgb(),u!==1&&(i=u.toString())}else t="none";return s?`${o}: ${t}; ${i?`${o}-opacity: ${i}; `:""}`:`${o}="${t}" ${i?`${o}-opacity="${i}" `:""}`};class Hb{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Ln,a=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",m=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=this.opacity!==void 0?this.opacity:"1",b=this.visible?"":" visibility: hidden;",C=e?"":this.getSvgFilter(),N=tu(sn,this.fill);return[tu(Qn,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",m,"; ",N,"fill-rule: ",t,"; ","opacity: ",y,";",C,b].join("")}getSvgFilter(){return this.shadow?`filter: url(#SVGID_${this.shadow.id});`:""}getSvgCommons(){return[this.id?`id="${this.id}" `:"",this.clipPath?`clip-path="url(#${this.clipPath.clipPathId})" `:""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e?this.calcTransformMatrix():this.calcOwnMatrix();return`${`transform="${bl(i)}`}${t}" `}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:i,withShadow:s,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=t?"":`style="${this.getSvgStyles()}" `,p=s?`style="${this.getSvgFilter()}" `:"",m=this.clipPath,y=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=m&&m.absolutePositioned,C=this.stroke,N=this.fill,E=this.shadow,V=[],L=e.indexOf("COMMON_PARTS");let ee;m&&(m.clipPathId=`CLIPPATH_${Ia()}`,ee=`<clipPath id="${m.clipPathId}" >
${m.toClipPathSVG(i)}</clipPath>
`),b&&V.push("<g ",p,this.getSvgCommons(),` >
`),V.push("<g ",this.getSvgTransform(!1),b?"":p+this.getSvgCommons(),` >
`);const G=[u,y,t?"":this.addPaintOrder()," ",a?`transform="${a}" `:""].join("");return e[L]=G,As(N)&&V.push(N.toSVG(this)),As(C)&&V.push(C.toSVG(this)),E&&V.push(E.toSVG(this)),m&&V.push(ee),V.push(e.join("")),V.push(`</g>
`),b&&V.push(`</g>
`),i?i(V.join("")):V.join("")}addPaintOrder(){return this.paintFirst!==sn?` paint-order="${this.paintFirst}" `:""}}function kf(o){return new RegExp("^("+o.join("|")+")\\b","i")}const vo="textDecorationThickness",Yb=["fontSize","fontWeight","fontFamily","fontStyle"],Xb=["underline","overline","linethrough"],Gb=[...Yb,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],qb=[...Gb,...Xb,"textBackgroundColor","direction",vo],Kw=[...Yb,...Xb,Qn,"strokeWidth",sn,"deltaY","textBackgroundColor",vo],Qw={_reNewline:Up,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:hp,fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ni,fontStyle:hp,lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ni,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:lo,CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[vo]:66.667},hr="justify",lf="justify-left",Wc="justify-right",Zc="justify-center",Hs=String.raw`[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?`,qg=String.raw`(?:\s*,?\s+|\s*,\s*)`,pp="http://www.w3.org/2000/svg",Jw=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Hs+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Hs+"))?\\s+(.*)"),eC={cx:ni,x:ni,r:"radius",cy:Kn,y:Kn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":vo},Wg="font-size",Zg="clip-path",tC=kf(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),iC=kf(["symbol","image","marker","pattern","view","svg"]),ix=kf(["symbol","g","a","svg","clipPath","defs"]),nx=new RegExp(String.raw`^\s*(${Hs})${qg}(${Hs})${qg}(${Hs})${qg}(${Hs})\s*$`),sx="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",rx=new RegExp("(?:\\s|^)"+sx+sx+"("+Hs+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Pn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof e=="string"?Pn.parseShadow(e):e;Object.assign(this,Pn.ownDefaults,t),this.id=Ia()}static parseShadow(e){const t=e.trim(),[,i=0,s=0,a=0]=(rx.exec(t)||[]).map(u=>parseFloat(u)||0);return{color:(t.replace(rx,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:s,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Jp(new ke(this.offsetX,this.offsetY),Li(-e.angle)),i=new ii(this.color);let s=40,a=40;return e.width&&e.height&&(s=100*gi((Math.abs(t.x)+this.blur)/e.width,qt.NUM_FRACTION_DIGITS)+20,a=100*gi((Math.abs(t.y)+this.blur)/e.height,qt.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),`<filter id="SVGID_${this.id}" y="-${a}%" height="${100+2*a}%" x="-${s}%" width="${100+2*s}%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="${gi(this.blur?this.blur/2:0,qt.NUM_FRACTION_DIGITS)}"></feGaussianBlur>
	<feOffset dx="${gi(t.x,qt.NUM_FRACTION_DIGITS)}" dy="${gi(t.y,qt.NUM_FRACTION_DIGITS)}" result="oBlur" ></feOffset>
	<feFlood flood-color="${i.toRgb()}" flood-opacity="${i.getAlpha()}"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Pn.ownDefaults;return this.includeDefaultValues?e:$p(e,(i,s)=>i!==t[s])}static async fromObject(e){return new this(e)}}ye(Pn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),ye(Pn,"type","shadow"),ht.setClass(Pn,"shadow");const yo=(o,e,t)=>Math.max(o,Math.min(e,t)),nC=[Kn,ni,Bn,hs,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Al,Ol],Qr=[sn,Qn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],sC={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:jt,originY:jt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:sn,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},$g=(o,e,t,i)=>(o<Math.abs(e)?(o=e,i=t/4):i=e===0&&o===0?t/qs*Math.asin(1):t/qs*Math.asin(e/o),{a:o,c:e,p:t,s:i}),ax=(o,e,t,i,s)=>o*Math.pow(2,10*(i-=1))*Math.sin((i*s-e)*qs/t),Wb=(o,e,t,i)=>-t*Math.cos(o/i*za)+t+e,mp=(o,e,t,i)=>(o/=i)<1/2.75?t*(7.5625*o*o)+e:o<2/2.75?t*(7.5625*(o-=1.5/2.75)*o+.75)+e:o<2.5/2.75?t*(7.5625*(o-=2.25/2.75)*o+.9375)+e:t*(7.5625*(o-=2.625/2.75)*o+.984375)+e,ox=(o,e,t,i)=>t-mp(i-o,0,t,i)+e;var rC=Object.freeze({__proto__:null,defaultEasing:Wb,easeInBack:function(o,e,t,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(o/=i)*o*((s+1)*o-s)+e},easeInBounce:ox,easeInCirc:(o,e,t,i)=>-t*(Math.sqrt(1-(o/=i)*o)-1)+e,easeInCubic:(o,e,t,i)=>t*(o/i)**3+e,easeInElastic:(o,e,t,i)=>{const s=t;let a=0;if(o===0)return e;if((o/=i)===1)return e+t;a||(a=.3*i);const{a:u,s:p,p:m}=$g(s,t,a,1.70158);return-ax(u,p,m,o,i)+e},easeInExpo:(o,e,t,i)=>o===0?e:t*2**(10*(o/i-1))+e,easeInOutBack:function(o,e,t,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(o/=i/2)<1?t/2*(o*o*((1+(s*=1.525))*o-s))+e:t/2*((o-=2)*o*((1+(s*=1.525))*o+s)+2)+e},easeInOutBounce:(o,e,t,i)=>o<i/2?.5*ox(2*o,0,t,i)+e:.5*mp(2*o-i,0,t,i)+.5*t+e,easeInOutCirc:(o,e,t,i)=>(o/=i/2)<1?-t/2*(Math.sqrt(1-o**2)-1)+e:t/2*(Math.sqrt(1-(o-=2)*o)+1)+e,easeInOutCubic:(o,e,t,i)=>(o/=i/2)<1?t/2*o**3+e:t/2*((o-2)**3+2)+e,easeInOutElastic:(o,e,t,i)=>{const s=t;let a=0;if(o===0)return e;if((o/=i/2)===2)return e+t;a||(a=i*(.3*1.5));const{a:u,s:p,p:m,c:y}=$g(s,t,a,1.70158);return o<1?-.5*ax(u,p,m,o,i)+e:u*Math.pow(2,-10*(o-=1))*Math.sin((o*i-p)*qs/m)*.5+y+e},easeInOutExpo:(o,e,t,i)=>o===0?e:o===i?e+t:(o/=i/2)<1?t/2*2**(10*(o-1))+e:t/2*-(2**(-10*--o)+2)+e,easeInOutQuad:(o,e,t,i)=>(o/=i/2)<1?t/2*o**2+e:-t/2*(--o*(o-2)-1)+e,easeInOutQuart:(o,e,t,i)=>(o/=i/2)<1?t/2*o**4+e:-t/2*((o-=2)*o**3-2)+e,easeInOutQuint:(o,e,t,i)=>(o/=i/2)<1?t/2*o**5+e:t/2*((o-2)**5+2)+e,easeInOutSine:(o,e,t,i)=>-t/2*(Math.cos(Math.PI*o/i)-1)+e,easeInQuad:(o,e,t,i)=>t*(o/=i)*o+e,easeInQuart:(o,e,t,i)=>t*(o/=i)*o**3+e,easeInQuint:(o,e,t,i)=>t*(o/i)**5+e,easeInSine:(o,e,t,i)=>-t*Math.cos(o/i*za)+t+e,easeOutBack:function(o,e,t,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((o=o/i-1)*o*((s+1)*o+s)+1)+e},easeOutBounce:mp,easeOutCirc:(o,e,t,i)=>t*Math.sqrt(1-(o=o/i-1)*o)+e,easeOutCubic:(o,e,t,i)=>t*((o/i-1)**3+1)+e,easeOutElastic:(o,e,t,i)=>{const s=t;let a=0;if(o===0)return e;if((o/=i)===1)return e+t;a||(a=.3*i);const{a:u,s:p,p:m,c:y}=$g(s,t,a,1.70158);return u*2**(-10*o)*Math.sin((o*i-p)*qs/m)+y+e},easeOutExpo:(o,e,t,i)=>o===i?e+t:t*-(2**(-10*o/i)+1)+e,easeOutQuad:(o,e,t,i)=>-t*(o/=i)*(o-2)+e,easeOutQuart:(o,e,t,i)=>-t*((o=o/i-1)*o**3-1)+e,easeOutQuint:(o,e,t,i)=>t*((o/i-1)**5+1)+e,easeOutSine:(o,e,t,i)=>t*Math.sin(o/i*za)+e});const aC=()=>!1;class s0{constructor(e){let{startValue:t,byValue:i,duration:s=500,delay:a=0,easing:u=Wb,onStart:p=Uh,onChange:m=Uh,onComplete:y=Uh,abort:b=aC,target:C}=e;ye(this,"_state","pending"),ye(this,"durationProgress",0),ye(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=a,this.easing=u,this._onStart=p,this._onChange=m,this._onComplete=y,this._abort=b,this.target=C,this.startValue=t,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Gc(e),this.delay):Gc(e)}tick(e){const t=(e||+new Date)-this.startTime,i=Math.min(t,this.duration);this.durationProgress=i/this.duration;const{value:s,valueProgress:a}=this.calculate(i);this.value=Object.freeze(s),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Gc(this.tick)))}register(){Jc.push(this)}unregister(){Jc.remove(this)}abort(){this._state="aborted",this.unregister()}}class oC extends s0{constructor(e){let{startValue:t=0,endValue:i=100,...s}=e;super({...s,startValue:t,byValue:i-t})}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}class lC extends s0{constructor(e){let{startValue:t=[0],endValue:i=[100],...s}=e;super({...s,startValue:t,byValue:i.map((a,u)=>a-t[u])})}calculate(e){const t=this.startValue.map((i,s)=>this.easing(e,i,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const cC=(o,e,t,i)=>e+t*(1-Math.cos(o/i*za)),Kg=o=>o&&((e,t,i)=>o(new ii(e).toRgba(),t,i));class uC extends s0{constructor(e){let{startValue:t,endValue:i,easing:s=cC,onChange:a,onComplete:u,abort:p,...m}=e;const y=new ii(t).getSource(),b=new ii(i).getSource();super({...m,startValue:y,byValue:b.map((C,N)=>C-y[N]),easing:s,onChange:Kg(a),onComplete:Kg(u),abort:Kg(p)})}calculate(e){const[t,i,s,a]=this.startValue.map((p,m)=>this.easing(e,p,this.byValue[m],this.duration,m)),u=[...[t,i,s].map(Math.round),yo(0,a,1)];return{value:u,valueProgress:u.map((p,m)=>this.byValue[m]!==0?Math.abs((p-this.startValue[m])/this.byValue[m]):0).find(p=>p!==0)||0}}}function r0(o){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(o)?new lC(o):new oC(o);return e.start(),e}function Zb(o){const e=new uC(o);return e.start(),e}class ki{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(i))return e.eq(t);if(t.x===i.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,i.y)&&e.y<=Math.max(t.y,i.y));if(t.y===i.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,i.x)&&e.x<=Math.max(t.x,i.x));{const a=eu(t,i),u=eu(t,e).divide(a);return s?Math.abs(u.x)===Math.abs(u.y):u.x===u.y&&u.x>=0&&u.x<=1}}static isPointInPolygon(e,t){const i=new ke(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let s=0;for(let a=0;a<t.length;a++){const u=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,i);if(u.includes(e))return!0;s+=+(u.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,i,s){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],u=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const p=t.x-e.x,m=t.y-e.y,y=s.x-i.x,b=s.y-i.y,C=e.x-i.x,N=e.y-i.y,E=y*N-b*C,V=p*N-m*C,L=b*p-y*m;if(L!==0){const ee=E/L,G=V/L;return(a||0<=ee&&ee<=1)&&(u||0<=G&&G<=1)?new ki("Intersection").append(new ke(e.x+ee*p,e.y+ee*m)):new ki}if(E===0||V===0){const ee=a||u||ki.isPointContained(e,i,s)||ki.isPointContained(t,i,s)||ki.isPointContained(i,e,t)||ki.isPointContained(s,e,t);return new ki(ee?"Coincident":void 0)}return new ki("Parallel")}static intersectSegmentLine(e,t,i,s){return ki.intersectLineLine(e,t,i,s,!1,!0)}static intersectSegmentSegment(e,t,i,s){return ki.intersectLineLine(e,t,i,s,!1,!1)}static intersectLinePolygon(e,t,i){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new ki,u=i.length;for(let p,m,y,b=0;b<u;b++){if(p=i[b],m=i[(b+1)%u],y=ki.intersectLineLine(e,t,p,m,s,!1),y.status==="Coincident")return y;a.append(...y.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,i){return ki.intersectLinePolygon(e,t,i,!1)}static intersectPolygonPolygon(e,t){const i=new ki,s=e.length,a=[];for(let u=0;u<s;u++){const p=e[u],m=e[(u+1)%s],y=ki.intersectSegmentPolygon(p,m,t);y.status==="Coincident"?(a.push(y),i.append(p,m)):i.append(...y.points)}return a.length>0&&a.length===e.length?new ki("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(e,t,i){const s=t.min(i),a=t.max(i),u=new ke(a.x,s.y),p=new ke(s.x,a.y);return ki.intersectPolygonPolygon(e,[s,u,a,p])}}class hC extends Tb{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Sn(e,this.group.calcTransformMatrix()):e}setXY(e,t,i){this.group&&(e=Sn(e,$n(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,i)}getRelativeXY(){return new ke(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:i,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,i,s];if(this.group){const u=this.group.calcTransformMatrix();return a.map(p=>Sn(p,u))}return a}intersectsWithRect(e,t){return ki.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=ki.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:i,top:s,width:a,height:u}=this.getBoundingRect();return i>=e.x&&i+a<=t.x&&s>=e.y&&s+u<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return ki.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(i=>i.x<=t.x&&i.x>=e.x&&i.y<=t.y&&i.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(i=>(i.x>=t.x||i.x<=e.x)&&(i.y>=t.y||i.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return pr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Bn,e),this._set(hs,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?$r(Eb(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Cn.concat()}calcACoords(){const e=_o({angle:this.angle}),{x:t,y:i}=this.getRelativeCenterPoint(),s=El(t,i),a=Mi(s,e),u=this._getTransformedDimensions(),p=u.x/2,m=u.y/2;return{tl:Sn({x:-p,y:-m},a),tr:Sn({x:p,y:-m},a),bl:Sn({x:-p,y:m},a),br:Sn({x:p,y:m},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Nn(this.originX),Nn(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const i=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((a,u)=>a===i[u])?s.value:(this.group&&(t=Mi(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:i,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key.every((u,p)=>u===e[p]))return t.value;const i=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=Mb(s);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new ke(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth,...e},i=t.strokeWidth;let s=i,a=0;this.strokeUniform&&(s=0,a=i);const u=t.width+s,p=t.height+s;let m;return m=t.skewX===0&&t.skewY===0?new ke(u*t.scaleX,p*t.scaleY):wf(u,p,lu(t)),m.scalarAdd(a)}translateToGivenOrigin(e,t,i,s,a){let u=e.x,p=e.y;const m=Nn(s)-Nn(t),y=Nn(a)-Nn(i);if(m||y){const b=this._getTransformedDimensions();u+=m*b.x,p+=y*b.y}return new ke(u,p)}translateToCenterPoint(e,t,i){if(t===jt&&i===jt)return e;const s=this.translateToGivenOrigin(e,t,i,jt,jt);return this.angle?s.rotate(Li(this.angle),e):s}translateToOriginPoint(e,t,i){const s=this.translateToGivenOrigin(e,jt,jt,t,i);return this.angle?s.rotate(Li(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Sn(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ke(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.getPositionByOrigin(e,t)}getPositionByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,i){const s=this.translateToCenterPoint(e,t,i),a=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.getPositionByOrigin(ni,Kn)}positionByLeftTop(e){return this.setPositionByOrigin(e,ni,Kn)}}let cr=class Yh extends hC{static getDefaults(){return Yh.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Zr("warn","Setting type has no effect",e)}constructor(e){super(),ye(this,"_cacheContext",null),Object.assign(this,Yh.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Es(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,i=e.height,s=qt.maxCacheSideLimit,a=qt.minCacheSideLimit;if(t<=s&&i<=s&&t*i<=qt.perfLimitSizeTotal)return t<a&&(e.width=a),i<a&&(e.height=a),e;const u=t/i,[p,m]=gl.limitDimsByArea(u),y=yo(a,p,s),b=yo(a,m,s);return t>y&&(e.zoomX/=t/y,e.width=y,e.capped=!0),i>b&&(e.zoomY/=i/b,e.height=b,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),i=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:i,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:i,height:s,zoomX:a,zoomY:u,x:p,y:m}=this._limitCacheSize(this._getCacheCanvasDimensions()),y=i!==e.width||s!==e.height,b=this.zoomX!==a||this.zoomY!==u;if(!e||!t)return!1;if(y||b){i!==e.width||s!==e.height?(e.width=i,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const C=p/2,N=m/2;return this.cacheTranslationX=Math.round(e.width/2-C)+C,this.cacheTranslationY=Math.round(e.height/2-N)+N,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,u),this.zoomX=a,this.zoomY=u,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,i=this.calcTransformMatrix(!t);e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new ke(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=mo(this.calcTransformMatrix());return new ke(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return e.scalarMultiply(t*i)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Bn&&e!==hs||(t=this._constrainScale(t)),e===Bn&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Pn||(t=new Pn(t));const i=this[e]!==t;return this[e]=t,i&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:i,cacheTranslationX:s,cacheTranslationY:a}=this,{width:u,height:p}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:i,cacheTranslationX:s,cacheTranslationY:a,width:u,height:p,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return!!this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return!!this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Qn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,i){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0),e.restore()}drawObject(e,t,i){const s=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,i),this.fill=s,this.stroke=a}createClipPathLayer(e,t){const i=Jn(t),s=i.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=i,t.parentClipPaths.forEach(a=>{a.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=$n(this.calcTransformMatrix());s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(s),e.drawObject(s,!0,t),i}_drawClipPath(e,t,i){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,i);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,i=this._cacheContext;return!(!t||!i||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&i&&!e&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),i.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const i=t.stroke;i&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,As(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(e,i):(e.strokeStyle=i.toLive(e),this._applyPatternGradientTransform(e,i)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:i}=t;i&&(As(i)?(e.fillStyle=i.toLive(e),this._applyPatternGradientTransform(e,i)):e.fillStyle=i)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,i=this.canvas,s=this.getCanvasRetinaScaling(),[a,,,u]=i?.viewportTransform||Cn,p=a*s,m=u*s,y=t.nonScaling?new ke(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*qt.browserShadowBlurConstant*(p+m)*(y.x+y.y)/4,e.shadowOffsetX=t.offsetX*p*y.x,e.shadowOffsetY=t.offsetY*m*y.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!As(t))return{offsetX:0,offsetY:0};const i=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,a):e.transform(1,0,0,1,s,a),i&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:s,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Qn?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var i;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),u=s.x/this.scaleX/a,p=s.y/this.scaleY/a,m=Jn({width:Math.ceil(u),height:Math.ceil(p)}),y=m.getContext("2d");y&&(y.beginPath(),y.moveTo(0,0),y.lineTo(u,0),y.lineTo(u,p),y.lineTo(0,p),y.closePath(),y.translate(u/2,p/2),y.scale(s.zoomX/this.scaleX/a,s.zoomY/this.scaleY/a),this._applyPatternGradientTransform(y,t),y.fillStyle=t.toLive(e),y.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/s.zoomX,a*this.scaleY/s.zoomY),e.strokeStyle=(i=y.createPattern(m,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new ke(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ht.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Qp(this),i=this.group,s=this.shadow,a=Math.abs,u=e.enableRetinaScaling?xb():1,p=(e.multiplier||1)*u,m=e.canvasProvider||(te=>new wo(te,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Bb(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&dp(this,this.getViewportTransform()),this.setCoords();const y=Es(),b=this.getBoundingRect(),C=this.shadow,N=new ke;if(C){const te=C.blur,ne=C.nonScaling?new ke(1,1):this.getObjectScaling();N.x=2*Math.round(a(C.offsetX)+te)*a(ne.x),N.y=2*Math.round(a(C.offsetY)+te)*a(ne.y)}const E=b.width+N.x,V=b.height+N.y;y.width=Math.ceil(E),y.height=Math.ceil(V);const L=m(y);e.format==="jpeg"&&(L.backgroundColor="#fff"),this.setPositionByOrigin(new ke(L.width/2,L.height/2),jt,jt);const ee=this.canvas;L._objects=[this],this.set("canvas",L),this.setCoords();const G=L.toCanvasElement(p||1,e);return this.set("canvas",ee),this.shadow=s,i&&(this.group=i),this.set(t),this.setCoords(),L._objects=[],L.destroy(),G}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Gp(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qp(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:i,originY:s}=this;if(t){const{x:a,y:u}=this.getRelativeCenterPoint();this.originX=jt,this.originY=jt,this.left=a,this.top=u}if(this.set("angle",e),t){const{x:a,y:u}=this.getPositionByOrigin(i,s);this.left=a,this.top=u,this.originX=i,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Jc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Gs().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((i,s)=>{let[a,u]=s;return i[a]=this._animate(a,u,t),i},{})}_animate(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),a=this.constructor.colorProperties.includes(s[s.length-1]),{abort:u,startValue:p,onChange:m,onComplete:y}=i,b={...i,target:this,startValue:p??s.reduce((C,N)=>C[N],this),endValue:t,abort:u?.bind(this),onChange:(C,N,E)=>{s.reduce((V,L,ee)=>(ee===s.length-1&&(V[L]=C),V[L]),this),m&&m(C,N,E)},onComplete:(C,N,E)=>{this.setCoords(),y&&y(C,N,E)}};return a?Zb(b):r0(b)}isDescendantOf(e){const{parent:t,group:i}=this;return t===e||i===e||!!t&&t.isDescendantOf(e)||!!i&&i!==t&&i.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),i=e.getAncestors();if(t.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[e,...i.slice(0,i.length-1)],common:[this]};for(let s,a=0;a<t.length;a++){if(s=t[a],s===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let u=0;u<i.length;u++){if(this===i[u])return{fork:[],otherFork:[e,...i.slice(0,u)],common:[this,...t]};if(s===i[u])return{fork:[this,...t.slice(0,a)],otherFork:[e,...i.slice(0,u)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...i],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const i=t.common[0]||this.canvas;if(!i)return;const s=t.fork.pop(),a=t.otherFork.pop(),u=i._objects.indexOf(s),p=i._objects.indexOf(a);return u>-1&&u>p}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Yh.customProperties,this.constructor.customProperties||[]);let t;const i=qt.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:u,shadow:p,strokeDashArray:m,left:y,top:b,originX:C,originY:N,width:E,height:V,strokeWidth:L,strokeLineCap:ee,strokeDashOffset:G,strokeLineJoin:te,strokeUniform:ne,strokeMiterLimit:de,scaleX:be,scaleY:I,angle:Ee,flipX:Ye,flipY:Be,opacity:ct,visible:nt,backgroundColor:et,fillRule:ft,paintFirst:Ge,globalCompositeOperation:Mt,skewX:he,skewY:qe}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const it=yt=>gi(yt,i),rt={...So(this,e),type:this.constructor.type,version:Jh,originX:C,originY:N,left:it(y),top:it(b),width:it(E),height:it(V),fill:qy(a)?a.toObject():a,stroke:qy(u)?u.toObject():u,strokeWidth:it(L),strokeDashArray:m&&m.concat(),strokeLineCap:ee,strokeDashOffset:G,strokeLineJoin:te,strokeUniform:ne,strokeMiterLimit:it(de),scaleX:it(be),scaleY:it(I),angle:it(Ee),flipX:Ye,flipY:Be,opacity:it(ct),shadow:p&&p.toObject(),visible:nt,backgroundColor:et,fillRule:ft,paintFirst:Ge,globalCompositeOperation:Mt,skewX:it(he),skewY:it(qe),...t?{clipPath:t}:null};return this.includeDefaultValues?rt:this._removeDefaultValues(rt)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),i=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return $p(e,(s,a)=>{if(a===ni||a===Kn||a==="type")return!0;const u=i[a];return s!==u&&!(Array.isArray(s)&&Array.isArray(u)&&s.length===0&&u.length===0)})}toString(){return`#<${this.constructor.type}>`}static _fromObject(e){let{type:t,...i}=e,{extraParam:s,...a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cu(i,a).then(u=>s?(delete u[s],new this(i[s],u)):new this(u))}static fromObject(e,t){return this._fromObject(e,t)}};ye(cr,"stateProperties",nC),ye(cr,"cacheProperties",Qr),ye(cr,"ownDefaults",sC),ye(cr,"type","FabricObject"),ye(cr,"colorProperties",[sn,Qn,"backgroundColor"]),ye(cr,"customProperties",[]),ht.setClass(cr),ht.setClass(cr,"object");const a0=(o,e)=>{var t;const{transform:{target:i}}=e;(t=i.canvas)===null||t===void 0||t.fire(`object:${o}`,{...e,target:i}),i.fire(o,e)},Jr=(o,e,t)=>(i,s,a,u)=>{const p=e(i,s,a,u);return p&&a0(o,{...i0(i,s,a,u),...t}),p};function Ua(o){return(e,t,i,s)=>{const{target:a,originX:u,originY:p}=t,m=a.getPositionByOrigin(u,p),y=o(e,t,i,s);return a.setPositionByOrigin(m,t.originX,t.originY),y}}const $b=(o,e,t,i)=>(s,a,u,p)=>{const m=Tf(a,a.originX,a.originY,u,p)[t],y=Nn(a[e]);if(y===0||y>0&&m<0||y<0&&m>0){const{target:b}=a,C=b.strokeWidth/(b.strokeUniform?b[i]:1),N=Vb(a)?2:1,E=b[o],V=Math.abs(m*N/b[i])-C;return b.set(o,Math.max(V,1)),E!==b[o]}return!1},Kb=$b("width","originX","x","scaleX"),Qb=$b("height","originY","y","scaleY"),vp=Jr(yl,Ua(Kb)),fC=Jr(yl,Ua(Qb));function Jb(o,e,t,i,s){o.save();const{stroke:a,xSize:u,ySize:p,opName:m}=this.commonRenderProps(o,e,t,s,i);let y=u;u>p?o.scale(1,p/u):p>u&&(y=p,o.scale(u/p,1)),o.beginPath(),o.arc(0,0,y/2,0,qs,!1),o[m](),a&&o.stroke(),o.restore()}function e_(o,e,t,i,s){o.save();const{stroke:a,xSize:u,ySize:p,opName:m}=this.commonRenderProps(o,e,t,s,i),y=u/2,b=p/2;o[`${m}Rect`](-y,-b,u,p),a&&o.strokeRect(-y,-b,u,p),o.restore()}class Wn{constructor(e){ye(this,"visible",!0),ye(this,"actionName",bf),ye(this,"angle",0),ye(this,"x",0),ye(this,"y",0),ye(this,"offsetX",0),ye(this,"offsetY",0),ye(this,"sizeX",0),ye(this,"sizeY",0),ye(this,"touchSizeX",0),ye(this,"touchSizeY",0),ye(this,"cursorStyle","crosshair"),ye(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,i,s){var a;let{tl:u,tr:p,br:m,bl:y}=s;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&ki.isPointInPolygon(i,[u,p,m,y])}getActionHandler(e,t,i){return this.actionHandler}getMouseDownHandler(e,t,i){return this.mouseDownHandler}getMouseUpHandler(e,t,i){return this.mouseUpHandler}cursorStyleHandler(e,t,i,s){return t.cursorStyle}getActionName(e,t,i){return t.actionName}getVisibility(e,t){var i,s;return(i=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&i!==void 0?i:this.visible}setVisibility(e,t,i){this.visible=e}positionHandler(e,t,i,s){return new ke(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,i,s,a,u){const p=_f([El(i,s),_o({angle:e}),Sf((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new ke(-.5,-.5).transform(p),tr:new ke(.5,-.5).transform(p),br:new ke(.5,.5).transform(p),bl:new ke(-.5,.5).transform(p)}}commonRenderProps(e,t,i,s){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const{cornerSize:u,cornerColor:p,transparentCorners:m,cornerStrokeColor:y}=a,b=u||s.cornerSize,C=this.sizeX||b,N=this.sizeY||b,E=m!==void 0?m:s.transparentCorners,V=E?Qn:sn,L=y||s.cornerStrokeColor,ee=!E&&!!L;return e.fillStyle=p||s.cornerColor||"",e.strokeStyle=L||"",e.translate(t,i),e.rotate(Li(s.getTotalAngle())),{stroke:ee,xSize:C,ySize:N,transparentCorners:E,opName:V}}render(e,t,i,s,a){((s=s||{}).cornerStyle||a.cornerStyle)==="circle"?Jb.call(this,e,t,i,s,a):e_.call(this,e,t,i,s,a)}}const t_=(o,e,t)=>t.lockRotation?af:e.cursorStyle,i_=Jr(_b,Ua((o,e,t,i)=>{let{target:s,ex:a,ey:u,theta:p,originX:m,originY:y}=e;const b=s.getPositionByOrigin(m,y);if(Xs(s,"lockRotation"))return!1;const C=Math.atan2(u-b.y,a-b.x),N=Math.atan2(i-b.y,t-b.x);let E=$r(N-C+p);if(s.snapAngle&&s.snapAngle>0){const L=s.snapAngle,ee=s.snapThreshold||L,G=Math.ceil(E/L)*L,te=Math.floor(E/L)*L;Math.abs(E-te)<ee?E=te:Math.abs(E-G)<ee&&(E=G)}E<0&&(E=360+E),E%=360;const V=s.angle!==E;return s.angle=E,V}));function n_(o,e){const t=e.canvas,i=o[t.uniScaleKey];return t.uniformScaling&&!i||!t.uniformScaling&&i}function s_(o,e,t){const i=Xs(o,"lockScalingX"),s=Xs(o,"lockScalingY");if(i&&s||!e&&(i||s)&&t||i&&e==="x"||s&&e==="y")return!0;const{width:a,height:u,strokeWidth:p}=o;return a===0&&p===0&&e!=="y"||u===0&&p===0&&e!=="x"}const dC=["e","se","s","sw","w","nw","n","ne","e"],hl=(o,e,t,i)=>{const s=n_(o,t);if(s_(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return af;const a=Ub(t,0,i);return`${dC[a]}-resize`};function o0(o,e,t,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,u=s.by,p=n_(o,a);let m,y,b,C,N,E;if(s_(a,u,p))return!1;if(e.gestureScale)y=e.scaleX*e.gestureScale,b=e.scaleY*e.gestureScale;else{if(m=Tf(e,e.originX,e.originY,t,i),N=u!=="y"?Math.sign(m.x||e.signX||1):1,E=u!=="x"?Math.sign(m.y||e.signY||1):1,e.signX||(e.signX=N),e.signY||(e.signY=E),Xs(a,"lockScalingFlip")&&(e.signX!==N||e.signY!==E))return!1;if(C=a._getTransformedDimensions(),p&&!u){const ee=Math.abs(m.x)+Math.abs(m.y),{original:G}=e,te=ee/(Math.abs(C.x*G.scaleX/a.scaleX)+Math.abs(C.y*G.scaleY/a.scaleY));y=G.scaleX*te,b=G.scaleY*te}else y=Math.abs(m.x*a.scaleX/C.x),b=Math.abs(m.y*a.scaleY/C.y);Vb(e)&&(y*=2,b*=2),e.signX!==N&&u!=="y"&&(e.originX=Ky(e.originX),y*=-1,e.signX=N),e.signY!==E&&u!=="x"&&(e.originY=Ky(e.originY),b*=-1,e.signY=E)}const V=a.scaleX,L=a.scaleY;return u?(u==="x"&&a.set(Bn,y),u==="y"&&a.set(hs,b)):(!Xs(a,"lockScalingX")&&a.set(Bn,y),!Xs(a,"lockScalingY")&&a.set(hs,b)),V!==a.scaleX||L!==a.scaleY}const Ac=Jr(xf,Ua((o,e,t,i)=>o0(o,e,t,i))),r_=Jr(xf,Ua((o,e,t,i)=>o0(o,e,t,i,{by:"x"}))),a_=Jr(xf,Ua((o,e,t,i)=>o0(o,e,t,i,{by:"y"}))),Qg={x:{counterAxis:"y",scale:Bn,skew:Al,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:hs,skew:Ol,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},gC=["ns","nesw","ew","nwse"],o_=(o,e,t,i)=>{if(e.x!==0&&Xs(t,"lockSkewingY")||e.y!==0&&Xs(t,"lockSkewingX"))return af;const s=Ub(t,0,i)%4;return`${gC[s]}-resize`};function l_(o,e,t,i,s){const{target:a}=t,{counterAxis:u,origin:p,lockSkewing:m,skew:y,flip:b}=Qg[o];if(Xs(a,m))return!1;const{origin:C,flip:N}=Qg[u],E=Nn(t[C])*(a[N]?-1:1),V=-Math.sign(E)*(a[b]?-1:1),L=.5*-((a[y]===0&&Tf(t,jt,jt,i,s)[o]>0||a[y]>0?1:-1)*V)+.5;return Jr(Sb,Ua((G,te,ne,de)=>(function(be,I,Ee){let{target:Ye,ex:Be,ey:ct,skewingSide:nt,...et}=I;const{skew:ft}=Qg[be],Ge=Ee.subtract(new ke(Be,ct)).divide(new ke(Ye.scaleX,Ye.scaleY))[be],Mt=Ye[ft],he=et[ft],qe=Math.tan(Li(he)),it=be==="y"?Ye._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:Ye._getTransformedDimensions({scaleX:1,scaleY:1}).y,rt=2*Ge*nt/Math.max(it,1)+qe,yt=$r(Math.atan(rt));Ye.set(ft,yt);const _e=Mt!==Ye[ft];if(_e&&be==="y"){const{skewX:Ve,scaleX:tt}=Ye,ot=Ye._getTransformedDimensions({skewY:Mt}),ut=Ye._getTransformedDimensions(),wt=Ve!==0?ot.x/ut.x:1;wt!==1&&Ye.set(Bn,wt*tt)}return _e})(o,te,new ke(ne,de))))(e,{...t,[p]:L,skewingSide:V},i,s)}const c_=(o,e,t,i)=>l_("x",o,e,t,i),u_=(o,e,t,i)=>l_("y",o,e,t,i);function Af(o,e){return o[e.canvas.altActionKey]}const Oc=(o,e,t)=>{const i=Af(o,t);return e.x===0?i?Al:hs:e.y===0?i?Ol:Bn:""},ho=(o,e,t,i)=>Af(o,t)?o_(0,e,t,i):hl(o,e,t,i),yp=(o,e,t,i)=>Af(o,e.target)?u_(o,e,t,i):r_(o,e,t,i),xp=(o,e,t,i)=>Af(o,e.target)?c_(o,e,t,i):a_(o,e,t,i),l0=()=>({ml:new Wn({x:-.5,y:0,cursorStyleHandler:ho,actionHandler:yp,getActionName:Oc}),mr:new Wn({x:.5,y:0,cursorStyleHandler:ho,actionHandler:yp,getActionName:Oc}),mb:new Wn({x:0,y:.5,cursorStyleHandler:ho,actionHandler:xp,getActionName:Oc}),mt:new Wn({x:0,y:-.5,cursorStyleHandler:ho,actionHandler:xp,getActionName:Oc}),tl:new Wn({x:-.5,y:-.5,cursorStyleHandler:hl,actionHandler:Ac}),tr:new Wn({x:.5,y:-.5,cursorStyleHandler:hl,actionHandler:Ac}),bl:new Wn({x:-.5,y:.5,cursorStyleHandler:hl,actionHandler:Ac}),br:new Wn({x:.5,y:.5,cursorStyleHandler:hl,actionHandler:Ac}),mtr:new Wn({x:0,y:-.5,actionHandler:i_,cursorStyleHandler:t_,offsetY:-40,withConnection:!0,actionName:Hp})}),h_=()=>({mr:new Wn({x:.5,y:0,actionHandler:vp,cursorStyleHandler:ho,actionName:yl}),ml:new Wn({x:-.5,y:0,actionHandler:vp,cursorStyleHandler:ho,actionName:yl})}),f_=()=>({...l0(),...h_()});class Sl extends cr{static getDefaults(){return{...super.getDefaults(),...Sl.ownDefaults}}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Sl.ownDefaults),this.setOptions(e)}static createControls(){return{controls:l0()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,i=t.target,s=t.action;if(this===i&&s&&s.startsWith(bf))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let s=i.length-1;s>=0;s--){const[a,u]=i[s],p=this.controls[a];if(p.shouldActivate(a,this,e,t?u.touchCorner:u.corner))return this.__corner=a,{key:a,control:p,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),i=El(t.x,t.y),s=_o({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=Mi(i,s),u=Mi(e,a),p=Mi(u,[1/e[0],0,0,1/e[3],0,0]),m=this.group?mo(this.calcTransformMatrix()):void 0;m&&(m.scaleX=Math.abs(m.scaleX),m.scaleY=Math.abs(m.scaleY));const y=this._calculateCurrentDimensions(m),b={};return this.forEachControl((C,N)=>{const E=C.positionHandler(y,p,this,C);b[N]=Object.assign(E,this._calcCornerCoords(C,E))}),b}_calcCornerCoords(e,t){const i=this.getTotalAngle();return{corner:e.calcCornerCoords(i,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(i,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Li(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s={hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray,...i};e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:s}=this,a={hasBorders:i,hasControls:s,...t},u=this.getViewportTransform(),p=a.hasBorders,m=a.hasControls,y=Mi(u,this.calcTransformMatrix()),b=mo(y);e.save(),e.translate(b.translateX,b.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),e.rotate(Li(this.group?b.angle:this.angle)),p&&this.drawBorders(e,b,t),m&&this.drawControls(e,t),e.restore()}drawBorders(e,t,i){let s;if(i&&i.forActiveSelection||this.group){const a=wf(this.width,this.height,lu(t)),u=this.isStrokeAccountedForInDimensions()?Yp:(this.strokeUniform?new ke().scalarAdd(this.canvas?this.canvas.getZoom():1):new ke(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=a.add(u).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,i)}drawControlsConnectingLines(e,t){let i=!1;e.beginPath(),this.forEachControl((s,a)=>{s.withConnection&&s.getVisibility(this,a)&&(i=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),i&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:a,cornerColor:u}=this,p={cornerStrokeColor:s,cornerDashArray:a,cornerColor:u,...t};e.setTransform(i,0,0,i,0,0),e.strokeStyle=e.fillStyle=p.cornerColor,this.transparentCorners||(e.strokeStyle=p.cornerStrokeColor),this._setLineDash(e,p.cornerDashArray),this.forEachControl((m,y)=>{if(m.getVisibility(this,y)){const b=this.oCoords[y];m.render(e,b.x,b.y,p,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[i,s]=t;return this.setControlVisible(i,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const i=this.canvas.viewportTransform;t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(t);const s=this.width+4,a=this.height+4;return t.clearRect(-s/2,-a/2,s,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function d_(o,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(o.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))})}),o}ye(Sl,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class un extends Sl{}d_(un,[Hb]),ht.setClass(un),ht.setClass(un,"object");const g_=(o,e,t,i)=>{const s=2*(i=Math.round(i))+1,{data:a}=o.getImageData(e-i,t-i,s,s);for(let u=3;u<a.length;u+=4)if(a[u]>0)return!1;return!0};class p_{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ke(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ke(1/this.options.scaleX,1/this.options.scaleY):new ke(1,1)}createSideVector(e,t){const i=eu(e,t);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(e,t,i){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ke(e);return t.y+=t.x*Math.tan(Li(this.options.skewY)),t.x+=t.y*Math.tan(Li(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const pC=new ke;class ml extends p_{static getOrthogonalRotationFactor(e,t){const i=t?rf(e,t):e0(e);return Math.abs(i)<za?-1:1}constructor(e,t,i,s){super(s),ye(this,"AB",void 0),ye(this,"AC",void 0),ye(this,"alpha",void 0),ye(this,"bisector",void 0),this.A=new ke(e),this.B=new ke(t),this.C=new ke(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=rf(this.AB,this.AC),this.bisector=Cf(Jp(this.AB.eq(pC)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),a=t0(s),u=ml.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,i*u)}projectBevel(){const e=[];return(this.alpha%qs===0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),i=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),a=this.options.strokeUniform?sf(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return sf(s)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const i=[],s=new ke(ml.getOrthogonalRotationFactor(this.bisector),ml.getOrthogonalRotationFactor(new ke(this.bisector.y,this.bisector.x)));return[new ke(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new ke(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(a=>{gp(a,e,t)&&i.push(this.A.add(a))}),i}projectRoundWithSkew(e,t){const i=[],{skewX:s,skewY:a,scaleX:u,scaleY:p,strokeUniform:m}=this.options,y=new ke(Math.tan(Li(s)),Math.tan(Li(a))),b=this.strokeProjectionMagnitude,C=m?b/p/Math.sqrt(1/p**2+1/u**2*y.y**2):b/Math.sqrt(1+y.y**2),N=new ke(Math.sqrt(Math.max(b**2-C**2,0)),C),E=m?b/Math.sqrt(1+y.x**2*(1/p)**2/(1/u+1/u*y.x*y.y)**2):b/Math.sqrt(1+y.x**2/(1+y.x*y.y)**2),V=new ke(E,Math.sqrt(Math.max(b**2-E**2,0)));return[V,V.scalarMultiply(-1),N,N.scalarMultiply(-1)].map(L=>this.applySkew(m?L.multiply(this.strokeUniformScalar):L)).forEach(L=>{gp(L,e,t)&&i.push(this.applySkew(this.A).add(L))}),i}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%qs===0,i=this.applySkew(this.A),s=e[t?0:2].subtract(i),a=e[t?1:0].subtract(i),u=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),p=pl(s,u)>0,m=p?s:a,y=p?a:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(m,y)):e.push(...this.projectRoundNoSkew(m,y)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class lx extends p_{constructor(e,t,i){super(i),this.A=new ke(e),this.T=new ke(t)}calcOrthogonalProjection(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(t0(s),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ke(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ml(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ke(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(Cf(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(i);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const m_=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(o.length===0)return i;const s=o.reduce((a,u)=>(a[a.length-1].eq(u)||a.push(new ke(u)),a),[new ke(o[0])]);if(s.length===1)t=!0;else if(!t){const a=s[0],u=((p,m)=>{for(let y=p.length-1;y>=0;y--)if(m(p[y],y,p))return y;return-1})(s,p=>!p.eq(a));s.splice(u+1)}return s.forEach((a,u,p)=>{let m,y;u===0?(y=p[1],m=t?a:p[p.length-1]):u===p.length-1?(m=p[u-1],y=t?a:p[0]):(m=p[u-1],y=p[u+1]),t&&p.length===1?i.push(...new lx(a,a,e).project()):!t||u!==0&&u!==p.length-1?i.push(...new ml(a,m,y,e).project()):i.push(...new lx(a,u===0?y:m,e).project())}),i},c0=o=>{const e={};return Object.keys(o).forEach(t=>{e[t]={},Object.keys(o[t]).forEach(i=>{e[t][i]={...o[t][i]}})}),e},v_=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Sc;const Of=o=>{if(Sc||Sc||(Sc="Intl"in ur()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Sc){const e=Sc.segment(o);return Array.from(e).map(t=>{let{segment:i}=t;return i})}return mC(o)},mC=o=>{const e=[];for(let t,i=0;i<o.length;i++)(t=vC(o,i))!==!1&&e.push(t);return e},vC=(o,e)=>{const t=o.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return o.charAt(e);if(55296<=t&&t<=56319){if(o.length<=e+1)throw"High surrogate without following low surrogate";const s=o.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return o.charAt(e)+o.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const i=o.charCodeAt(e-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1};var yC=Object.freeze({__proto__:null,capitalize:function(o){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return`${o.charAt(0).toUpperCase()}${e?o.slice(1):o.slice(1).toLowerCase()}`},escapeXml:v_,graphemeSplit:Of});const Ef=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.fill!==e.fill||o.stroke!==e.stroke||o.strokeWidth!==e.strokeWidth||o.fontSize!==e.fontSize||o.fontFamily!==e.fontFamily||o.fontWeight!==e.fontWeight||o.fontStyle!==e.fontStyle||o.textDecorationThickness!==e.textDecorationThickness||o.textBackgroundColor!==e.textBackgroundColor||o.deltaY!==e.deltaY||t&&(o.overline!==e.overline||o.underline!==e.underline||o.linethrough!==e.linethrough)},y_=(o,e)=>{const t=e.split(`
`),i=[];let s=-1,a={};o=c0(o);for(let u=0;u<t.length;u++){const p=Of(t[u]);if(o[u])for(let m=0;m<p.length;m++){s++;const y=o[u][m];y&&Object.keys(y).length>0&&(Ef(a,y,!0)?i.push({start:s,end:s+1,style:y}):i[i.length-1].end++),a=y||{}}else s+=p.length,a={}}return i},x_=(o,e)=>{if(!Array.isArray(o))return c0(o);const t=e.split(Up),i={};let s=-1,a=0;for(let u=0;u<t.length;u++){const p=Of(t[u]);for(let m=0;m<p.length;m++)s++,o[a]&&o[a].start<=s&&s<o[a].end&&(i[u]=i[u]||{},i[u][m]={...o[a].style},s===o[a].end-1&&a++)}return i},Ha=["display","transform",sn,"fill-opacity","fill-rule","opacity",Qn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function cx(o,e){const t=o.nodeName,i=o.getAttribute("class"),s=o.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let u;if(u=new RegExp("^"+t,"i"),e=e.replace(u,""),s&&e.length&&(u=new RegExp("#"+s+a,"i"),e=e.replace(u,"")),i&&e.length){const p=i.split(" ");for(let m=p.length;m--;)u=new RegExp("\\."+p[m]+a,"i"),e=e.replace(u,"")}return e.length===0}function xC(o,e){let t=!0;const i=cx(o,e.pop());return i&&e.length&&(t=(function(s,a){let u,p=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&a.length;)p&&(u=a.pop()),p=cx(s=s.parentElement,u);return a.length===0})(o,e)),i&&t&&e.length===0}function bC(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={};for(const i in e)xC(o,i.split(" "))&&(t={...t,...e[i]});return t}const _C=o=>{var e;return(e=eC[o])!==null&&e!==void 0?e:o},SC=new RegExp(`(${Hs})`,"gi"),Rn=`(${Hs})`,wC=String.raw`(skewX)\(${Rn}\)`,CC=String.raw`(skewY)\(${Rn}\)`,TC=String.raw`(rotate)\(${Rn}(?: ${Rn} ${Rn})?\)`,kC=String.raw`(scale)\(${Rn}(?: ${Rn})?\)`,AC=String.raw`(translate)\(${Rn}(?: ${Rn})?\)`,u0=`(?:${String.raw`(matrix)\(${Rn} ${Rn} ${Rn} ${Rn} ${Rn} ${Rn}\)`}|${AC}|${TC}|${kC}|${wC}|${CC})`,OC=`(?:${u0}*)`,EC=String.raw`^\s*(?:${OC}?)\s*$`,jC=new RegExp(EC),MC=new RegExp(u0),DC=new RegExp(u0,"g");function cf(o){const e=[];if(!(o=(t=>of(t.replace(SC," $1 ").replace(/,/gi," ")))(o).replace(/\s*([()])\s*/gi,"$1"))||o&&!jC.test(o))return[...Cn];for(const t of o.matchAll(DC)){const i=MC.exec(t[0]);if(!i)continue;let s=Cn;const a=i.filter(V=>!!V),[,u,...p]=a,[m,y,b,C,N,E]=p.map(V=>parseFloat(V));switch(u){case"translate":s=El(m,y);break;case Hp:s=_o({angle:m},{x:y,y:b});break;case bf:s=Sf(m,y);break;case Al:s=Wp(m);break;case Ol:s=Zp(m);break;case"matrix":s=[m,y,b,C,N,E]}e.push(s)}return _f(e)}function NC(o,e,t,i){const s=Array.isArray(e);let a,u=e;if(o!==sn&&o!==Qn||e!==Ln){if(o==="strokeUniform")return e==="non-scaling-stroke";if(o==="strokeDashArray")u=e===Ln?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(o==="transformMatrix")u=t&&t.transformMatrix?Mi(t.transformMatrix,cf(e)):cf(e);else if(o==="visible")u=e!==Ln&&e!=="hidden",t&&t.visible===!1&&(u=!1);else if(o==="opacity")u=parseFloat(e),t&&t.opacity!==void 0&&(u*=t.opacity);else if(o==="textAnchor")u=e==="start"?ni:e==="end"?Ii:jt;else if(o==="charSpacing"||o===vo)a=Dn(e,i)/i*1e3;else if(o==="paintFirst"){const p=e.indexOf(sn),m=e.indexOf(Qn);u=sn,(p>-1&&m>-1&&m<p||p===-1&&m>-1)&&(u=Qn)}else{if(o==="href"||o==="xlink:href"||o==="font"||o==="id")return e;if(o==="imageSmoothing")return e==="optimizeQuality";a=s?e.map(Dn):Dn(e,i)}}else u="";return!s&&isNaN(a)?u:a}function bp(o,e){o.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[i,s]=t.split(":");e[i.trim().toLowerCase()]=s.trim()})}function RC(o){const e={},t=o.getAttribute("style");return t&&(typeof t=="string"?bp(t,e):(function(i,s){Object.entries(i).forEach(a=>{let[u,p]=a;p!==void 0&&(s[u.toLowerCase()]=p)})})(t,e)),e}const LC={stroke:"strokeOpacity",fill:"fillOpacity"};function ea(o,e,t){if(!o)return{};let i,s={},a=Vp;o.parentNode&&ix.test(o.parentNode.nodeName)&&(s=ea(o.parentElement,e,t),s.fontSize&&(i=a=Dn(s.fontSize)));const u={...e.reduce((y,b)=>{const C=o.getAttribute(b);return C&&(y[b]=C),y},{}),...bC(o,t),...RC(o)};u[Zg]&&o.setAttribute(Zg,u[Zg]),u[Wg]&&(i=Dn(u[Wg],a),u[Wg]=`${i}`);const p={};for(const y in u){const b=_C(y),C=NC(b,u[y],s,i);p[b]=C}p&&p.font&&(function(y,b){const C=y.match(Jw);if(!C)return;const N=C[1],E=C[3],V=C[4],L=C[5],ee=C[6];N&&(b.fontStyle=N),E&&(b.fontWeight=isNaN(parseFloat(E))?E:parseFloat(E)),V&&(b.fontSize=Dn(V)),ee&&(b.fontFamily=ee),L&&(b.lineHeight=L===hp?1:L)})(p.font,p);const m={...s,...p};return ix.test(o.nodeName)?m:(function(y){const b=un.getDefaults();return Object.entries(LC).forEach(C=>{let[N,E]=C;if(y[E]===void 0||y[N]==="")return;if(y[N]===void 0){if(!b[N])return;y[N]=b[N]}if(y[N].indexOf("url(")===0)return;const V=new ii(y[N]);y[N]=V.setAlpha(gi(V.getAlpha()*y[E],2)).toRgba()}),y})(m)}const b_=["rx","ry"];class wn extends un{static getDefaults(){return{...super.getDefaults(),...wn.ownDefaults}}constructor(e){super(),Object.assign(this,wn.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:i}=this,s=-t/2,a=-i/2,u=this.rx?Math.min(this.rx,t/2):0,p=this.ry?Math.min(this.ry,i/2):0,m=u!==0||p!==0;e.beginPath(),e.moveTo(s+u,a),e.lineTo(s+t-u,a),m&&e.bezierCurveTo(s+t-Ra*u,a,s+t,a+Ra*p,s+t,a+p),e.lineTo(s+t,a+i-p),m&&e.bezierCurveTo(s+t,a+i-Ra*p,s+t-Ra*u,a+i,s+t-u,a+i),e.lineTo(s+u,a+i),m&&e.bezierCurveTo(s+Ra*u,a+i,s,a+i-Ra*p,s,a+i-p),e.lineTo(s,a+p),m&&e.bezierCurveTo(s,a+Ra*p,s+Ra*u,a,s+u,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...b_,...e])}_toSVG(){const{width:e,height:t,rx:i,ry:s}=this;return["<rect ","COMMON_PARTS",`x="${-e/2}" y="${-t/2}" rx="${i}" ry="${s}" width="${e}" height="${t}" />
`]}static async fromElement(e,t,i){const{left:s=0,top:a=0,width:u=0,height:p=0,visible:m=!0,...y}=ea(e,this.ATTRIBUTE_NAMES,i);return new this({...t,...y,left:s,top:a,width:u,height:p,visible:!!(m&&u&&p)})}}ye(wn,"type","Rect"),ye(wn,"cacheProperties",[...Qr,...b_]),ye(wn,"ownDefaults",{rx:0,ry:0}),ye(wn,"ATTRIBUTE_NAMES",[...Ha,"x","y","rx","ry","width","height"]),ht.setClass(wn),ht.setSVGClass(wn);const Xr="initialization",uf="added",h0="removed",hf="imperative",__=(o,e)=>{const{strokeUniform:t,strokeWidth:i,width:s,height:a,group:u}=e,p=u&&u!==o?uu(u.calcTransformMatrix(),o.calcTransformMatrix()):null,m=p?e.getRelativeCenterPoint().transform(p):e.getRelativeCenterPoint(),y=!e.isStrokeAccountedForInDimensions(),b=t&&y?zb(new ke(i,i),void 0,o.calcTransformMatrix()):Yp,C=!t&&y?i:0,N=wf(s+C,a+C,_f([p,e.calcOwnMatrix()],!0)).add(b).scalarDivide(2);return[m.subtract(N),m.add(N)]};class hu{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:i,strategy:s}=e;return t===Xr||t===hf||!!i&&s!==i}shouldLayoutClipPath(e){let{type:t,target:{clipPath:i}}=e;return t!==Xr&&i&&!i.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:i,target:s}=t;if(i===hf&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:u,width:p,height:m}=pr(e.map(C=>__(s,C)).reduce((C,N)=>C.concat(N),[])),y=new ke(p,m),b=new ke(a,u).add(y.scalarDivide(2));if(i===Xr){const C=this.getInitialSize(t,{size:y,center:b});return{center:b,relativeCorrection:new ke(0,0),size:C}}return{center:b.transform(s.calcOwnMatrix()),size:y}}}ye(hu,"type","strategy");class ff extends hu{shouldPerformLayout(e){return!0}}ye(ff,"type","fit-content"),ht.setClass(ff);const S_="layoutManager";class wl{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ff;ye(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t={bubbles:!0,strategy:this.strategy,...e,prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}};this.onBeforeLayout(t);const i=this.getLayoutResult(t);i&&this.commitLayout(t,i),this.onAfterLayout(t,i),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:i}=t;return[tf,bb,yl,_b,xf,Sb,ef,wb,Xw].map(s=>e.on(s,a=>this.performLayout(s===tf?{type:"object_modified",trigger:s,e:a,target:i}:{type:"object_modifying",trigger:s,e:a,target:i})))}subscribe(e,t){this.unsubscribe(e,t);const i=this.attachHandlers(e,t);this._subscriptions.set(e,i)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(i=>i()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:i}=e,{canvas:s}=t;if(i===Xr||i===uf?this.subscribeTargets(e):i===h0&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),i===hf&&e.deep){const{strategy:a,...u}=e;t.forEachObject(p=>p.layoutManager&&p.layoutManager.performLayout({...u,bubbles:!1,target:p}))}}getLayoutResult(e){const{target:t,strategy:i,type:s}=e,a=i.calcLayoutResult(e,t.getObjects());if(!a)return;const u=s===Xr?new ke:t.getRelativeCenterPoint(),{center:p,correction:m=new ke,relativeCorrection:y=new ke}=a,b=u.subtract(p).add(m).transform(s===Xr?Cn:$n(t.calcOwnMatrix()),!0).add(y);return{result:a,prevCenter:u,nextCenter:p,offset:b}}commitLayout(e,t){const{target:i}=e,{result:{size:s},nextCenter:a}=t;var u,p;i.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===Xr?i.set({left:(u=e.x)!==null&&u!==void 0?u:a.x+s.x*Nn(i.originX),top:(p=e.y)!==null&&p!==void 0?p:a.y+s.y*Nn(i.originY)}):(i.setPositionByOrigin(a,jt,jt),i.setCoords(),i.set("dirty",!0))}layoutObjects(e,t){const{target:i}=e;i.forEachObject(s=>{s.group===i&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,i.clipPath)}layoutObject(e,t,i){let{offset:s}=t;i.set({left:i.left+s.x,top:i.top+s.y})}onAfterLayout(e,t){const{target:i,strategy:s,bubbles:a,prevStrategy:u,...p}=e,{canvas:m}=i;i.fire("layout:after",{context:e,result:t}),m&&m.fire("object:layout:after",{context:e,result:t,target:i});const y=i.parent;a&&y!=null&&y.layoutManager&&((p.path||(p.path=[])).push(i),y.layoutManager.performLayout({...p,target:y})),i.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(i=>i())),e.clear()}toObject(){return{type:S_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ht.setClass(wl,S_);class PC extends wl{performLayout(){}}class Wi extends Xp(un){static getDefaults(){return{...super.getDefaults(),...Wi.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ye(this,"_activeObjects",[]),ye(this,"__objectSelectionTracker",void 0),ye(this,"__objectSelectionDisposer",void 0),Object.assign(this,Wi.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var i;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(i=t.layoutManager)!==null&&i!==void 0?i:new wl,this.layoutManager.performLayout({type:Xr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Zr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Zr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,i,s)=>this.canEnterGroup(t)&&s.indexOf(t)===i)}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...s);return this._onAfterObjectsChange(uf,s),a}insertAt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const a=this._filterObjectsBeforeEnteringGroup(i),u=super.insertAt(e,...a);return this._onAfterObjectsChange(uf,a),u}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(h0,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const i=this[e];return super._set(e,t),e==="canvas"&&i!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:i}=t;const s=this._activeObjects;if(e)s.push(i),this._set("dirty",!0);else if(s.length>0){const a=s.indexOf(i);a>-1&&(s.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&_l(e,Mi($n(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===e||e.isDescendantOf(i))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(_l(e,Mi(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const i=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const e=un.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,i){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var s;const u=this._objects[a];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&u.group!==this?(e.save(),e.transform(...$n(this.calcTransformMatrix())),u.render(e),e.restore()):u.group===this&&u.render(e)}this._drawClipPath(e,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout({target:this,type:hf,...e})}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const i=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const a=s.includeDefaultValues;s.includeDefaultValues=i;const u=s[e||"toObject"](t);return s.includeDefaultValues=a,u})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return{...super.toObject(["subTargetCheck","interactive",...e]),...t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{},objects:this.__serializeObjects("toObject",e)}}toString(){return`#<Group: (${this.complexity()})>`}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=wn.prototype._toSVG.call(this),i=t.indexOf("COMMON_PARTS");t[i]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(e);i&&t.push("		",i);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?`opacity: ${this.opacity};`:"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],i=this._createSVGBgRect(e);i&&t.push("	",i);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:i,objects:s=[],layoutManager:a,...u}=e;return Promise.all([xl(s,t),cu(u,t)]).then(p=>{let[m,y]=p;const b=new this(m,{...u,...y,layoutManager:new PC});if(a){const C=ht.getClass(a.type),N=ht.getClass(a.strategy);b.layoutManager=new C(new N)}else b.layoutManager=new wl;return b.layoutManager.subscribeTargets({type:Xr,target:b,targets:b.getObjects()}),b.setCoords(),b})}}ye(Wi,"type","Group"),ye(Wi,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ht.setClass(Wi);const w_=(o,e)=>Math.min(e.width/o.width,e.height/o.height),C_=(o,e)=>Math.max(e.width/o.width,e.height/o.height),_p="\\s*,?\\s*",wc=`${_p}(${Hs})`,BC=`${wc}${wc}${wc}${_p}([01])${_p}([01])${wc}${wc}`,zC={m:"l",M:"L"},IC=(o,e,t,i,s,a,u,p,m,y,b)=>{const C=Ws(o),N=Zs(o),E=Ws(e),V=Zs(e),L=t*s*E-i*a*V+u,ee=i*s*E+t*a*V+p;return["C",y+m*(-t*s*N-i*a*C),b+m*(-i*s*N+t*a*C),L+m*(t*s*V+i*a*E),ee+m*(i*s*V-t*a*E),L,ee]},ux=(o,e,t,i)=>{const s=Math.atan2(e,o),a=Math.atan2(i,t);return a>=s?a-s:2*Math.PI-(s-a)};function Sp(o,e,t,i,s,a,u,p){let m;if(qt.cachesBoundsOfCurve&&(m=[...arguments].join(),gl.boundsOfCurveCache[m]))return gl.boundsOfCurveCache[m];const y=Math.sqrt,b=Math.abs,C=[],N=[[0,0],[0,0]];let E=6*o-12*t+6*s,V=-3*o+9*t-9*s+3*u,L=3*t-3*o;for(let de=0;de<2;++de){if(de>0&&(E=6*e-12*i+6*a,V=-3*e+9*i-9*a+3*p,L=3*i-3*e),b(V)<1e-12){if(b(E)<1e-12)continue;const Be=-L/E;0<Be&&Be<1&&C.push(Be);continue}const be=E*E-4*L*V;if(be<0)continue;const I=y(be),Ee=(-E+I)/(2*V);0<Ee&&Ee<1&&C.push(Ee);const Ye=(-E-I)/(2*V);0<Ye&&Ye<1&&C.push(Ye)}let ee=C.length;const G=ee,te=k_(o,e,t,i,s,a,u,p);for(;ee--;){const{x:de,y:be}=te(C[ee]);N[0][ee]=de,N[1][ee]=be}N[0][G]=o,N[1][G]=e,N[0][G+1]=u,N[1][G+1]=p;const ne=[new ke(Math.min(...N[0]),Math.min(...N[1])),new ke(Math.max(...N[0]),Math.max(...N[1]))];return qt.cachesBoundsOfCurve&&(gl.boundsOfCurveCache[m]=ne),ne}const FC=(o,e,t)=>{let[i,s,a,u,p,m,y,b]=t;const C=((N,E,V,L,ee,G,te)=>{if(V===0||L===0)return[];let ne=0,de=0,be=0;const I=Math.PI,Ee=te*Fp,Ye=Zs(Ee),Be=Ws(Ee),ct=.5*(-Be*N-Ye*E),nt=.5*(-Be*E+Ye*N),et=V**2,ft=L**2,Ge=nt**2,Mt=ct**2,he=et*ft-et*Ge-ft*Mt;let qe=Math.abs(V),it=Math.abs(L);if(he<0){const zt=Math.sqrt(1-he/(et*ft));qe*=zt,it*=zt}else be=(ee===G?-1:1)*Math.sqrt(he/(et*Ge+ft*Mt));const rt=be*qe*nt/it,yt=-be*it*ct/qe,_e=Be*rt-Ye*yt+.5*N,Ve=Ye*rt+Be*yt+.5*E;let tt=ux(1,0,(ct-rt)/qe,(nt-yt)/it),ot=ux((ct-rt)/qe,(nt-yt)/it,(-ct-rt)/qe,(-nt-yt)/it);G===0&&ot>0?ot-=2*I:G===1&&ot<0&&(ot+=2*I);const ut=Math.ceil(Math.abs(ot/I*2)),wt=[],Lt=ot/ut,Oi=8/3*Math.sin(Lt/4)*Math.sin(Lt/4)/Math.sin(Lt/2);let Ct=tt+Lt;for(let zt=0;zt<ut;zt++)wt[zt]=IC(tt,Ct,Be,Ye,qe,it,_e,Ve,Oi,ne,de),ne=wt[zt][5],de=wt[zt][6],tt=Ct,Ct+=Lt;return wt})(y-o,b-e,s,a,p,m,u);for(let N=0,E=C.length;N<E;N++)C[N][1]+=o,C[N][2]+=e,C[N][3]+=o,C[N][4]+=e,C[N][5]+=o,C[N][6]+=e;return C},T_=o=>{let e=0,t=0,i=0,s=0;const a=[];let u,p=0,m=0;for(const y of o){const b=[...y];let C;switch(b[0]){case"l":b[1]+=e,b[2]+=t;case"L":e=b[1],t=b[2],C=["L",e,t];break;case"h":b[1]+=e;case"H":e=b[1],C=["L",e,t];break;case"v":b[1]+=t;case"V":t=b[1],C=["L",e,t];break;case"m":b[1]+=e,b[2]+=t;case"M":e=b[1],t=b[2],i=b[1],s=b[2],C=["M",e,t];break;case"c":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t,b[5]+=e,b[6]+=t;case"C":p=b[3],m=b[4],e=b[5],t=b[6],C=["C",b[1],b[2],p,m,e,t];break;case"s":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t;case"S":u==="C"?(p=2*e-p,m=2*t-m):(p=e,m=t),e=b[3],t=b[4],C=["C",p,m,b[1],b[2],e,t],p=C[3],m=C[4];break;case"q":b[1]+=e,b[2]+=t,b[3]+=e,b[4]+=t;case"Q":p=b[1],m=b[2],e=b[3],t=b[4],C=["Q",p,m,e,t];break;case"t":b[1]+=e,b[2]+=t;case"T":u==="Q"?(p=2*e-p,m=2*t-m):(p=e,m=t),e=b[1],t=b[2],C=["Q",p,m,e,t];break;case"a":b[6]+=e,b[7]+=t;case"A":FC(e,t,b).forEach(N=>a.push(N)),e=b[6],t=b[7];break;case"z":case"Z":e=i,t=s,C=["Z"]}C?(a.push(C),u=C[0]):u=""}return a},df=(o,e,t,i)=>Math.sqrt((t-o)**2+(i-e)**2),k_=(o,e,t,i,s,a,u,p)=>m=>{const y=m**3,b=(E=>3*E**2*(1-E))(m),C=(E=>3*E*(1-E)**2)(m),N=(E=>(1-E)**3)(m);return new ke(u*y+s*b+t*C+o*N,p*y+a*b+i*C+e*N)},A_=o=>o**2,O_=o=>2*o*(1-o),E_=o=>(1-o)**2,VC=(o,e,t,i,s,a,u,p)=>m=>{const y=A_(m),b=O_(m),C=E_(m),N=3*(C*(t-o)+b*(s-t)+y*(u-s)),E=3*(C*(i-e)+b*(a-i)+y*(p-a));return Math.atan2(E,N)},UC=(o,e,t,i,s,a)=>u=>{const p=A_(u),m=O_(u),y=E_(u);return new ke(s*p+t*m+o*y,a*p+i*m+e*y)},HC=(o,e,t,i,s,a)=>u=>{const p=1-u,m=2*(p*(t-o)+u*(s-t)),y=2*(p*(i-e)+u*(a-i));return Math.atan2(y,m)},hx=(o,e,t)=>{let i=new ke(e,t),s=0;for(let a=1;a<=100;a+=1){const u=o(a/100);s+=df(i.x,i.y,u.x,u.y),i=u}return s},YC=(o,e)=>{let t,i=0,s=0,a={x:o.x,y:o.y},u={...a},p=.01,m=0;const y=o.iterator,b=o.angleFinder;for(;s<e&&p>1e-4;)u=y(i),m=i,t=df(a.x,a.y,u.x,u.y),t+s>e?(i-=p,p/=2):(a=u,i+=p,s+=t);return{...u,angle:b(m)}},f0=o=>{let e,t,i=0,s=0,a=0,u=0,p=0;const m=[];for(const y of o){const b={x:s,y:a,command:y[0],length:0};switch(y[0]){case"M":t=b,t.x=u=s=y[1],t.y=p=a=y[2];break;case"L":t=b,t.length=df(s,a,y[1],y[2]),s=y[1],a=y[2];break;case"C":e=k_(s,a,y[1],y[2],y[3],y[4],y[5],y[6]),t=b,t.iterator=e,t.angleFinder=VC(s,a,y[1],y[2],y[3],y[4],y[5],y[6]),t.length=hx(e,s,a),s=y[5],a=y[6];break;case"Q":e=UC(s,a,y[1],y[2],y[3],y[4]),t=b,t.iterator=e,t.angleFinder=HC(s,a,y[1],y[2],y[3],y[4]),t.length=hx(e,s,a),s=y[3],a=y[4];break;case"Z":t=b,t.destX=u,t.destY=p,t.length=df(s,a,u,p),s=u,a=p}i+=t.length,m.push(t)}return m.push({length:i,x:s,y:a}),m},j_=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f0(o),i=0;for(;e-t[i].length>0&&i<t.length-2;)e-=t[i].length,i++;const s=t[i],a=e/s.length,u=o[i];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return{...new ke(s.x,s.y).lerp(new ke(s.destX,s.destY),a),angle:Math.atan2(s.destY-s.y,s.destX-s.x)};case"L":return{...new ke(s.x,s.y).lerp(new ke(u[1],u[2]),a),angle:Math.atan2(u[2]-s.y,u[1]-s.x)};case"C":case"Q":return YC(s,e)}},XC=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),fx=new RegExp(BC,"g"),GC=new RegExp(Hs,"gi"),qC={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},M_=o=>{var e;const t=[],i=(e=o.match(XC))!==null&&e!==void 0?e:[];for(const s of i){const a=s[0];if(a==="z"||a==="Z"){t.push([a]);continue}const u=qC[a.toLowerCase()];let p=[];if(a==="a"||a==="A"){fx.lastIndex=0;for(let m=null;m=fx.exec(s);)p.push(...m.slice(1))}else p=s.match(GC)||[];for(let m=0;m<p.length;m+=u){const y=new Array(u),b=zC[a];y[0]=m>0&&b?b:a;for(let C=0;C<u;C++)y[C+1]=parseFloat(p[m+C]);t.push(y)}}return t},D_=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new ke(o[0]),i=new ke(o[1]),s=1,a=0;const u=[],p=o.length,m=p>2;let y;for(m&&(s=o[2].x<i.x?-1:o[2].x===i.x?0:1,a=o[2].y<i.y?-1:o[2].y===i.y?0:1),u.push(["M",t.x-s*e,t.y-a*e]),y=1;y<p;y++){if(!t.eq(i)){const b=t.midPointFrom(i);u.push(["Q",t.x,t.y,b.x,b.y])}t=o[y],y+1<o.length&&(i=o[y+1])}return m&&(s=t.x>o[y-2].x?1:t.x===o[y-2].x?0:-1,a=t.y>o[y-2].y?1:t.y===o[y-2].y?0:-1),u.push(["L",t.x+s*e,t.y+a*e]),u},d0=(o,e)=>o.map(t=>t.map((i,s)=>s===0||e===void 0?i:gi(i,e)).join(" ")).join(" "),fo=(o,e)=>Math.floor(Math.random()*(e-o+1))+o,Xh=(o,e)=>{let t=o._findCenterFromElement();o.transformMatrix&&((i=>{if(i.transformMatrix){const{scaleX:s,scaleY:a,angle:u,skewX:p}=mo(i.transformMatrix);i.flipX=!1,i.flipY=!1,i.set(Bn,s),i.set(hs,a),i.angle=u,i.skewX=p,i.skewY=0}})(o),t=t.transform(o.transformMatrix)),delete o.transformMatrix,e&&(o.scaleX*=e.scaleX,o.scaleY*=e.scaleY,o.cropX=e.cropX,o.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,o.width=e.width,o.height=e.height),o.setPositionByOrigin(t,jt,jt)};var Ai=Object.freeze({__proto__:null,addTransformToObject:Pb,animate:r0,animateColor:Zb,applyTransformToObject:_l,calcAngleBetweenVectors:rf,calcDimensionsMatrix:lu,calcPlaneChangeMatrix:uu,calcVectorRotation:e0,cancelAnimFrame:kb,capValue:yo,composeMatrix:Mb,copyCanvasElement:o=>{var e;const t=Jn(o);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(o,0,0),t},cos:Ws,createCanvasElement:Es,createImage:Ab,createRotateMatrix:_o,createScaleMatrix:Sf,createSkewXMatrix:Wp,createSkewYMatrix:Zp,createTranslateMatrix:El,createVector:eu,crossProduct:pl,degreesToRadians:Li,dotProduct:Fb,ease:rC,enlivenObjectEnlivables:cu,enlivenObjects:xl,findScaleToCover:C_,findScaleToFit:w_,getBoundsOfCurve:Sp,getOrthonormalVector:t0,getPathSegmentsInfo:f0,getPointOnPath:j_,getPointer:Lb,getRandomInt:fo,getRegularPolygonPath:(o,e)=>{const t=2*Math.PI/o;let i=-za;o%2==0&&(i+=t/2);const s=new Array(o+1);for(let a=0;a<o;a++){const u=a*t+i,{x:p,y:m}=new ke(Ws(u),Zs(u)).scalarMultiply(e);s[a]=[a===0?"M":"L",p,m]}return s[o]=["Z"],s},getSmoothPathFromPoints:D_,getSvgAttributes:o=>{const e=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:Cf,groupSVGElements:(o,e)=>o&&o.length===1?o[0]:new Wi(o,e),hasStyleChanged:Ef,invertTransform:$n,isBetweenVectors:gp,isIdentityMatrix:Ob,isTouchEvent:nf,isTransparent:g_,joinPath:d0,loadImage:qc,magnitude:sf,makeBoundingBoxFromPoints:pr,makePathSimpler:T_,matrixToSVG:bl,mergeClipPaths:(o,e)=>{var t;let i=o,s=e;i.inverted&&!s.inverted&&(i=e,s=o),dp(s,(t=s.group)===null||t===void 0?void 0:t.calcTransformMatrix(),i.calcTransformMatrix());const a=i.inverted&&s.inverted;return a&&(i.inverted=s.inverted=!1),new Wi([i],{clipPath:s,inverted:a})},multiplyTransformMatrices:Mi,multiplyTransformMatrixArray:_f,parsePath:M_,parsePreserveAspectRatioAttribute:n0,parseUnit:Dn,pick:So,projectStrokeOnPoints:m_,qrDecompose:mo,radiansToDegrees:$r,removeFromArray:co,removeTransformFromObject:(o,e)=>{const t=$n(e),i=Mi(t,o.calcOwnMatrix());_l(o,i)},removeTransformMatrixForSvgParsing:Xh,requestAnimFrame:Gc,resetObjectTransform:Bb,rotateVector:Jp,saveObjectTransform:Qp,sendObjectToPlane:dp,sendPointToPlane:Kr,sendVectorToPlane:zb,sin:Zs,sizeAfterTransform:wf,string:yC,stylesFromArray:x_,stylesToArray:y_,toBlob:qp,toDataURL:Gp,toFixed:gi,transformPath:(o,e,t)=>(t&&(e=Mi(e,[1,0,0,1,-t.x,-t.y])),o.map(i=>{const s=[...i];for(let a=1;a<i.length-1;a+=2){const{x:u,y:p}=Sn({x:i[a],y:i[a+1]},e);s[a]=u,s[a+1]=p}return s})),transformPoint:Sn});function wp(o,e){const t=o.style;t&&Object.entries(e).forEach(i=>{let[s,a]=i;return t.setProperty(s,a)})}class N_ extends Kp{constructor(e){let{allowTouchScrolling:t=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),ye(this,"upper",void 0),ye(this,"container",void 0);const{el:s}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const u=this.createContainerElement();u.classList.add(i),s.parentNode&&s.parentNode.replaceChild(u,s),u.append(s,a),this.container=u}createUpperCanvas(){const{el:e}=this.lower,t=Es();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=bo().createElement("div");return e.setAttribute("data-fabric","wrapper"),wp(e,{position:"relative"}),Zy(e),e}applyCanvasStyle(e,t){const{styles:i,allowTouchScrolling:s}=t;wp(e,{...i,"touch-action":s?"manipulation":Ln}),Zy(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:i,ctx:s}=this.upper;Rb(i,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),fp(this.upper.el,e),fp(this.container,e)}cleanupDOM(e){const t=this.container,{el:i}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(i),t.parentNode&&t.parentNode.replaceChild(i,t)}dispose(){super.dispose(),Gs().dispose(this.upper.el),delete this.upper,delete this.container}}const R_=(o,e,t,i)=>{const{target:s,offsetX:a,offsetY:u}=e,p=t-a,m=i-u,y=!Xs(s,"lockMovementX")&&s.left!==p,b=!Xs(s,"lockMovementY")&&s.top!==m;return y&&s.set(ni,p),b&&s.set(Kn,m),(y||b)&&a0(bb,i0(o,e,t,i)),y||b},L_=wb,dx=o=>function(e,t,i){const{points:s,pathOffset:a}=i;return new ke(s[o]).subtract(a).transform(Mi(i.getViewportTransform(),i.calcTransformMatrix()))},P_=(o,e,t,i)=>{const{target:s,pointIndex:a}=e,u=s,p=Kr(new ke(t,i),void 0,u.calcOwnMatrix());return u.points[a]=p.add(u.pathOffset),u.setDimensions(),u.set("dirty",!0),!0},B_=(o,e)=>function(t,i,s,a){const u=i.target,p=new ke(u.points[(o>0?o:u.points.length)-1]),m=p.subtract(u.pathOffset).transform(u.calcOwnMatrix()),y=e(t,{...i,pointIndex:o},s,a),b=p.subtract(u.pathOffset).transform(u.calcOwnMatrix()).subtract(m);return u.left-=b.x,u.top-=b.y,y},gx=o=>Jr(L_,B_(o,P_)),Cp=(o,e,t)=>{const{path:i,pathOffset:s}=o,a=i[e];return new ke(a[t]-s.x,a[t+1]-s.y).transform(Mi(o.getViewportTransform(),o.calcTransformMatrix()))};function WC(o,e,t){const{commandIndex:i,pointIndex:s}=this;return Cp(t,i,s)}function ZC(o,e,t,i){const{target:s}=e,{commandIndex:a,pointIndex:u}=this,p=((m,y,b,C,N)=>{const{path:E,pathOffset:V}=m,L=E[(C>0?C:E.length)-1],ee=new ke(L[N],L[N+1]),G=ee.subtract(V).transform(m.calcOwnMatrix()),te=Kr(new ke(y,b),void 0,m.calcOwnMatrix());E[C][N]=te.x+V.x,E[C][N+1]=te.y+V.y,m.setDimensions();const ne=ee.subtract(m.pathOffset).transform(m.calcOwnMatrix()).subtract(G);return m.left-=ne.x,m.top-=ne.y,m.set("dirty",!0),!0})(s,t,i,a,u);return a0(this.actionName,{...i0(o,e,t,i),commandIndex:a,pointIndex:u}),p}class z_ extends Wn{constructor(e){super(e)}render(e,t,i,s,a){const u={...s,cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill};super.render(e,t,i,u,a)}}class $C extends z_{constructor(e){super(e)}render(e,t,i,s,a){const{path:u}=a,{commandIndex:p,pointIndex:m,connectToCommandIndex:y,connectToPointIndex:b}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[C]=u[p],N=Cp(a,y,b);if(C==="Q"){const E=Cp(a,p,m+2);e.moveTo(E.x,E.y),e.lineTo(t,i)}else e.moveTo(t,i);e.lineTo(N.x,N.y),e.stroke(),e.restore(),super.render(e,t,i,s,a)}}const Eh=(o,e,t,i,s,a)=>new(t?$C:z_)({commandIndex:o,pointIndex:e,actionName:"modifyPath",positionHandler:WC,actionHandler:ZC,connectToCommandIndex:s,connectToPointIndex:a,...i,...t?i.controlPointStyle:i.pointStyle});var KC=Object.freeze({__proto__:null,changeHeight:fC,changeObjectHeight:Qb,changeObjectWidth:Kb,changeWidth:vp,createObjectDefaultControls:l0,createPathControls:function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};let i="M";return o.path.forEach((s,a)=>{const u=s[0];switch(u!=="Z"&&(t[`c_${a}_${u}`]=Eh(a,s.length-2,!1,e)),u){case"C":t[`c_${a}_C_CP_1`]=Eh(a,1,!0,e,a-1,(p=>p==="C"?5:p==="Q"?3:1)(i)),t[`c_${a}_C_CP_2`]=Eh(a,3,!0,e,a,5);break;case"Q":t[`c_${a}_Q_CP_1`]=Eh(a,1,!0,e,a,3)}i=u}),t},createPolyActionHandler:gx,createPolyControls:function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};for(let i=0;i<(typeof o=="number"?o:o.points.length);i++)t[`p${i}`]=new Wn({actionName:L_,positionHandler:dx(i),actionHandler:gx(i),...e});return t},createPolyPositionHandler:dx,createResizeControls:h_,createTextboxDefaultControls:f_,dragHandler:R_,factoryPolyActionHandler:B_,getLocalPoint:Tf,polyActionHandler:P_,renderCircleControl:Jb,renderSquareControl:e_,rotationStyleHandler:t_,rotationWithSnapping:i_,scaleCursorStyleHandler:hl,scaleOrSkewActionName:Oc,scaleSkewCursorStyleHandler:ho,scalingEqually:Ac,scalingX:r_,scalingXOrSkewingY:yp,scalingY:a_,scalingYOrSkewingX:xp,skewCursorStyleHandler:o_,skewHandlerX:c_,skewHandlerY:u_,wrapWithFireEvent:Jr,wrapWithFixedAnchor:Ua});class jf extends wo{constructor(){super(...arguments),ye(this,"_hoveredTargets",[]),ye(this,"_currentTransform",null),ye(this,"_groupSelector",null),ye(this,"contextTopDirty",!1)}static getDefaults(){return{...super.getDefaults(),...jf.ownDefaults}}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new N_(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),i=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,i){const s=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+s,-i+s),a.transform(...this.viewportTransform);const u=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=u,a.restore();const p=Math.round(s*this.getRetinaScaling());return g_(a,p,p,p)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(i=>!!i&&e[i]===!0):e[t])}_shouldClearSelection(e,t){const i=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&i.length>1&&i.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,i){if(!e)return;let s;return t===bf||t===Bn||t===hs||t===yl?s=this.centeredScaling||e.centeredScaling:t===Hp&&(s=this.centeredRotation||e.centeredRotation),s?!i:i}_getOriginFromCorner(e,t){const i={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?i.x=Ii:["mr","tr","br"].includes(t)&&(i.x=ni),["tl","mt","tr"].includes(t)?i.y=up:["bl","mb","br"].includes(t)&&(i.y=Kn)),i}_setupCurrentTransform(e,t,i){var s;const a=t.group?Kr(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:u="",control:p}=t.getActiveControl()||{},m=i&&p?(s=p.getActionHandler(e,t,p))===null||s===void 0?void 0:s.bind(p):R_,y=((Ye,Be,ct,nt)=>{if(!Be||!Ye)return"drag";const et=nt.controls[Be];return et.getActionName(ct,et,nt)})(i,u,e,t),b=e[this.centeredKey],C=this._shouldCenterTransform(t,y,b)?{x:jt,y:jt}:this._getOriginFromCorner(t,u),{scaleX:N,scaleY:E,skewX:V,skewY:L,left:ee,top:G,angle:te,width:ne,height:de,cropX:be,cropY:I}=t,Ee={target:t,action:y,actionHandler:m,actionPerformed:!1,corner:u,scaleX:N,scaleY:E,skewX:V,skewY:L,offsetX:a.x-ee,offsetY:a.y-G,originX:C.x,originY:C.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Li(te),width:ne,height:de,shiftKey:e.shiftKey,altKey:b,original:{...Qp(t),originX:C.x,originY:C.y,cropX:be,cropY:I}};this._currentTransform=Ee,this.fire("before:transform",{e,transform:Ee})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:i,deltaX:s,deltaY:a}=this._groupSelector,u=new ke(t,i).transform(this.viewportTransform),p=new ke(t+s,i+a).transform(this.viewportTransform),m=this.selectionLineWidth/2;let y=Math.min(u.x,p.x),b=Math.min(u.y,p.y),C=Math.max(u.x,p.x),N=Math.max(u.y,p.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(y,b,C-y,N-b)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,y+=m,b+=m,C-=m,N-=m,un.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(y,b,C-y,N-b))}findTarget(e){if(this._targetInfo)return this._targetInfo;if(this.skipTargetFind)return{subTargets:[],currentSubTargets:[]};const t=this.getScenePoint(e),i=this._activeObject,s=this.getActiveObjects(),a=this.searchPossibleTargets(this._objects,t),{subTargets:u,container:p,target:m}=a,y={...a,currentSubTargets:u,currentContainer:p,currentTarget:m};if(!i)return y;const b={...this.searchPossibleTargets([i],t),currentSubTargets:u,currentContainer:p,currentTarget:m};return i.findControl(this.getViewportPoint(e),nf(e))?{...b,target:i}:b.target&&(s.length>1||!this.preserveObjectStacking||this.preserveObjectStacking&&e[this.altSelectionKey])?b:y}_pointIsInObjectSelectionArea(e,t){let i=e.getCoords();const s=this.getZoom(),a=e.padding/s;if(a){const[u,p,m,y]=i,b=Math.atan2(p.y-u.y,p.x-u.x),C=Ws(b)*a,N=Zs(b)*a,E=C+N,V=C-N;i=[new ke(u.x-V,u.y-E),new ke(p.x+E,p.y-V),new ke(m.x+V,m.y+E),new ke(y.x-E,y.y+V)]}return ki.isPointInPolygon(t,i)}_checkTarget(e,t){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;{const i=t.transform(this.viewportTransform);if(!this.isTargetTransparent(e,i.x,i.y))return!0}}return!1}_searchPossibleTargets(e,t,i){let s=e.length;for(;s--;){const a=e[s];if(this._checkTarget(a,t)){if(Hh(a)&&a.subTargetCheck){const{target:u}=this._searchPossibleTargets(a._objects,t,i);u&&i.push(u)}return{target:a,subTargets:i}}}return{subTargets:[]}}searchPossibleTargets(e,t){const i=this._searchPossibleTargets(e,t,[]);i.container=i.target;const{container:s,subTargets:a}=i;if(s&&Hh(s)&&s.interactive&&a[0]){for(let u=a.length-1;u>0;u--){const p=a[u];if(!Hh(p)||!p.interactive)return i.target=p,i}return i.target=a[0],i}return i}getViewportPoint(e){return this._viewportPoint?this._viewportPoint:this._getPointerImpl(e,!0)}getScenePoint(e){return this._scenePoint?this._scenePoint:this._getPointerImpl(e)}_getPointerImpl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,s=i.getBoundingClientRect();let a=Lb(e),u=s.width||0,p=s.height||0;u&&p||(Kn in s&&up in s&&(p=Math.abs(s.top-s.bottom)),Ii in s&&ni in s&&(u=Math.abs(s.right-s.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=Kr(a,void 0,this.viewportTransform));const m=this.getRetinaScaling();m!==1&&(a.x/=m,a.y/=m);const y=u===0||p===0?new ke(1,1):new ke(i.width/u,i.height/p);return a.multiply(y)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Es(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return uo(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let i=!1,s=!1;const a=this.getActiveObjects(),u=[],p=[];e.forEach(m=>{a.includes(m)||(i=!0,m.fire("deselected",{e:t,target:m}),p.push(m))}),a.forEach(m=>{e.includes(m)||(i=!0,m.fire("selected",{e:t,target:m}),u.push(m))}),e.length>0&&a.length>0?(s=!0,i&&this.fire("selection:updated",{e:t,selected:u,deselected:p})):a.length>0?(s=!0,this.fire("selection:created",{e:t,selected:u})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:p})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const i=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(i,t),s}_setActiveObject(e,t){const i=this._activeObject;return i!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,uo(e)&&i!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const i=this._activeObject;return!!i&&!i.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(e),uo(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),i=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[i]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,i=t.target,s={e,target:i,transform:t,action:t.action};i._scaling&&(i._scaling=!1),i.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),i.fire(tf,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;uo(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,i){const s=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,i);return e.set(s),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&uo(t)&&this._activeObject===t){const i=So(e,["angle","flipX","flipY",ni,Bn,hs,Al,Ol,Kn]);return Pb(e,t.calcOwnMatrix()),i}return{}}_setSVGObject(e,t,i){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,i),t.set(s)}}ye(jf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!0,fireRightClick:!0,fireMiddleClick:!0,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!0});class QC{constructor(e){ye(this,"targets",[]),ye(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},i=e.upperCanvasEl;i.addEventListener("click",t),this.__disposer=()=>i.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),co(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const ls={passive:!1},oo=(o,e)=>({viewportPoint:o.getViewportPoint(e),scenePoint:o.getScenePoint(e)}),La=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return o.addEventListener(...t)},Ts=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return o.removeEventListener(...t)},JC={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class iu extends jf{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),ye(this,"_isClick",void 0),ye(this,"textEditingManager",new QC(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(La)}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,s=this._getEventPrefix();e(Nb(i),"resize",this._onResize),e(i,s+"down",this._onMouseDown),e(i,`${s}move`,this._onMouseMove,ls),e(i,`${s}out`,this._onMouseOut),e(i,`${s}enter`,this._onMouseEnter),e(i,"wheel",this._onMouseWheel,{passive:!1}),e(i,"contextmenu",this._onContextMenu),t||(e(i,"click",this._onClick),e(i,"dblclick",this._onClick)),e(i,"dragstart",this._onDragStart),e(i,"dragend",this._onDragEnd),e(i,"dragover",this._onDragOver),e(i,"dragenter",this._onDragEnter),e(i,"dragleave",this._onDragLeave),e(i,"drop",this._onDrop),this.enablePointerEvents||e(i,"touchstart",this._onTouchStart,ls)}removeListeners(){this.addOrRemove(Ts);const e=this._getEventPrefix(),t=Vs(this.upperCanvasEl);Ts(t,`${e}up`,this._onMouseUp),Ts(t,"touchend",this._onTouchEnd,ls),Ts(t,`${e}move`,this._onMouseMove,ls),Ts(t,"touchmove",this._onMouseMove,ls),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_onMouseOut(e){const t=this._hoveredTarget,i={e,...oo(this,e)};this.fire("mouse:out",{...i,target:t}),this._hoveredTarget=void 0,t&&t.fire("mouseout",{...i}),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",{...i,target:s}),s&&s.fire("mouseout",{...i})}),this._hoveredTargets=[]}_onMouseEnter(e){const{target:t}=this.findTarget(e);this._currentTransform||t||(this.fire("mouse:over",{e,...oo(this,e)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const i={e,target:t};return this.fire("dragstart",i),t.fire("dragstart",i),void La(this.upperCanvasEl,"drag",this._onDragProgress)}$y(e)}_renderDragEffects(e,t,i){let s=!1;const a=this._dropTarget;a&&a!==t&&a!==i&&(a.clearContextTop(),s=!0),t?.clearContextTop(),i!==t&&i?.clearContextTop();const u=this.contextTop;u.save(),u.transform(...this.viewportTransform),t&&(u.save(),t.transform(u),t.renderDragSourceEffect(e),u.restore(),s=!0),i&&(u.save(),i.transform(u),i.renderDropTargetEffect(e),u.restore(),s=!0),u.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const{currentSubTargets:t}=this.findTarget(e),i=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Ln,s=i?this._activeObject:void 0,a={e,target:this._dragSource,subTargets:t,dragSource:this._dragSource,didDrop:i,dropTarget:s};Ts(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",a),this._dragSource&&this._dragSource.fire("dragend",a),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}_onDragOver(e){const t="dragover",{currentContainer:i,currentSubTargets:s}=this.findTarget(e),a=this._dragSource,u={e,target:i,subTargets:s,dragSource:a,canDrop:!1,dropTarget:void 0};let p;this.fire(t,u),this._fireEnterLeaveEvents(e,i,u),i&&(i.canDrop(e)&&(p=i),i.fire(t,u));for(let m=0;m<s.length;m++){const y=s[m];y.canDrop(e)&&(p=y),y.fire(t,u)}this._renderDragEffects(e,a,p),this._dropTarget=p}_onDragEnter(e){const{currentContainer:t,currentSubTargets:i}=this.findTarget(e),s={e,target:t,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(e,t,s)}_onDragLeave(e){const{currentSubTargets:t}=this.findTarget(e),i={e,target:this._draggedoverTarget,subTargets:t,dragSource:this._dragSource};this.fire("dragleave",i),this._fireEnterLeaveEvents(e,void 0,i),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this._hoveredTargets=[]}_onDrop(e){const{currentContainer:t,currentSubTargets:i}=this.findTarget(e),s=this._basicEventHandler("drop:before",{e,target:t,subTargets:i,dragSource:this._dragSource,...oo(this,e)});s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const{target:t,subTargets:i}=this.findTarget(e),s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:i});return this.stopContextMenu&&$y(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}fireEventFromPointerEvent(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._cacheTransformEventData(e);const{target:a,subTargets:u}=this.findTarget(e),p={e,target:a,subTargets:u,...oo(this,e),transform:this._currentTransform,...s};this.fire(t,p),a&&a.fire(i,p);for(let m=0;m<u.length;m++)u[m]!==a&&u[m].fire(i,p);this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){this._cacheTransformEventData(e);let t=!this.allowTouchScrolling;const i=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e);const{target:s}=this.findTarget(e);(this.isDrawingMode||i&&s===i)&&(t=!0),t&&e.preventDefault();const a=this.upperCanvasEl,u=this._getEventPrefix(),p=Vs(a);La(p,"touchend",this._onTouchEnd,ls),t&&La(p,"touchmove",this._onMouseMove,ls),Ts(a,`${u}down`,this._onMouseDown),this._resetTransformEventData()}_onMouseDown(e){this._cacheTransformEventData(e),this.__onMouseDown(e);const t=this.upperCanvasEl,i=this._getEventPrefix();Ts(t,`${i}move`,this._onMouseMove,ls);const s=Vs(t);La(s,`${i}up`,this._onMouseUp),La(s,`${i}move`,this._onMouseMove,ls),this._resetTransformEventData()}_onTouchEnd(e){if(e.touches.length>0)return;this._cacheTransformEventData(e),this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),i=Vs(this.upperCanvasEl);Ts(i,"touchend",this._onTouchEnd,ls),Ts(i,"touchmove",this._onMouseMove,ls),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{La(this.upperCanvasEl,`${t}down`,this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this._cacheTransformEventData(e),this.__onMouseUp(e);const t=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(e)){const s=Vs(this.upperCanvasEl);Ts(s,`${i}up`,this._onMouseUp),Ts(s,`${i}move`,this._onMouseMove,ls),La(t,`${i}move`,this._onMouseMove,ls)}this._resetTransformEventData()}_onMouseMove(e){this._cacheTransformEventData(e);const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e),this._resetTransformEventData()}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._handleEvent(e,"up:before");const i=this._currentTransform,s=this._isClick,{target:a}=this.findTarget(e),{button:u}=e;if(u)return void((this.fireMiddleClick&&u===1||this.fireRightClick&&u===2)&&this._handleEvent(e,"up"));if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let p,m,y=!1;if(i&&(this._finalizeCurrentTransform(e),y=i.actionPerformed),!s){const b=a===this._activeObject;this.handleSelection(e),y||(y=this._shouldRender(a)||!b&&a===this._activeObject)}if(a){const b=a.findControl(this.getViewportPoint(e),nf(e)),{key:C,control:N}=b||{};if(m=C,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),y=!0;else if(N){const E=N.getMouseUpHandler(e,a,N);E&&(p=this.getScenePoint(e),E.call(N,e,i,p.x,p.y))}a.isMoving=!1}if(i&&(i.target!==a||i.corner!==m)){const b=i.target&&i.target.controls[i.corner],C=b&&b.getMouseUpHandler(e,i.target,b);p=p||this.getScenePoint(e),C&&C.call(b,e,i,p.x,p.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),y?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:i,subTargets:s=[]}=t;this.fire(e,t),i&&i.fire(e,t);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire(e,t);return t}_handleEvent(e,t,i){const{target:s,subTargets:a}=this.findTarget(e),u={e,target:s,subTargets:a,...oo(this,e),transform:this._currentTransform,...t==="down:before"||t==="down"?i:{}};t!=="up:before"&&t!=="up"||(u.isClick=this._isClick),this.fire(`mouse:${t}`,u),s&&s.fire(`mouse${t}`,u);for(let p=0;p<a.length;p++)a[p]!==s&&a[p].fire(`mouse${t}`,u)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._handleEvent(e,"down:before");let{target:t}=this.findTarget(e),i=!!t&&t===this._activeObject;const{button:s}=e;if(s)return void((this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:i}));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let a=this._shouldRender(t),u=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,u=!0,a=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const p=this.getScenePoint(e);this._groupSelector={x:p.x,y:p.y,deltaY:0,deltaX:0}}if(i=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const p=t.findControl(this.getViewportPoint(e),nf(e));if(t===this._activeObject&&(p||!u)){this._setupCurrentTransform(e,t,i);const m=p?p.control:void 0,y=this.getScenePoint(e),b=m&&m.getMouseDownHandler(e,t,m);b&&b.call(m,e,this._currentTransform,y.x,y.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:i}),a&&this.requestRenderAll()}_resetTransformEventData(){this._targetInfo=this._viewportPoint=this._scenePoint=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._viewportPoint=this.getViewportPoint(e),this._scenePoint=Kr(this._viewportPoint,void 0,this.viewportTransform),this._targetInfo=this.findTarget(e),this._currentTransform&&(this._targetInfo.target=this._currentTransform.target)}__onMouseMove(e){if(this._isClick=!1,this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const i=this.getScenePoint(e);t.deltaX=i.x-t.x,t.deltaY=i.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const{target:i}=this.findTarget(e);this._setCursorFromEvent(e,i),this._fireOverOutEvents(e,i)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move")}_fireOverOutEvents(e,t){const{_hoveredTarget:i,_hoveredTargets:s}=this,{subTargets:a}=this.findTarget(e),u=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:i,fireCanvas:!0});for(let p=0;p<u;p++)a[p]===t||s[p]&&s[p]===i||this.fireSyntheticInOutEvents("mouse",{e,target:a[p],oldTarget:s[p]});this._hoveredTarget=t,this._hoveredTargets=a}_fireEnterLeaveEvents(e,t,i){const s=this._draggedoverTarget,a=this._hoveredTargets,{subTargets:u}=this.findTarget(e),p=Math.max(a.length,u.length);this.fireSyntheticInOutEvents("drag",{...i,target:t,oldTarget:s,fireCanvas:!0});for(let m=0;m<p;m++)this.fireSyntheticInOutEvents("drag",{...i,target:u[m],oldTarget:a[m]});this._draggedoverTarget=t}fireSyntheticInOutEvents(e,t){let{target:i,oldTarget:s,fireCanvas:a,e:u,...p}=t;const{targetIn:m,targetOut:y,canvasIn:b,canvasOut:C}=JC[e],N=s!==i;if(s&&N){const E={...p,e:u,target:s,nextTarget:i,...oo(this,u)};a&&this.fire(C,E),s.fire(y,E)}if(i&&N){const E={...p,e:u,target:i,previousTarget:s,...oo(this,u)};a&&this.fire(b,E),i.fire(m,E)}}_transformObject(e){const t=this.getScenePoint(e),i=this._currentTransform,s=i.target,a=s.group?Kr(t,void 0,s.group.calcTransformMatrix()):t;i.shiftKey=e.shiftKey,i.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,i,a),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,i){const{action:s,actionHandler:a,target:u}=t,p=!!a&&a(e,t,i.x,i.y);p&&u.setCoords(),s==="drag"&&p&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||p}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let i=t.hoverCursor||this.hoverCursor;const s=uo(this._activeObject)?this._activeObject:null,a=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(a){const{control:u,coord:p}=a;this.setCursor(u.cursorStyleHandler(e,u,t,p))}else{if(t.subTargetCheck){const{subTargets:u}=this.findTarget(e);u.concat().reverse().forEach(p=>{i=p.hoverCursor||i})}this.setCursor(i)}}handleMultiSelection(e,t){const i=this._activeObject,s=uo(i);if(i&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(i!==t||s)&&(s||!t.isDescendantOf(i)&&!i.isDescendantOf(t))&&!t.onSelect({e})&&!i.getActiveControl()){if(s){const a=i.getObjects();let u=[];if(t===i){const p=this.getScenePoint(e);let m=this.searchPossibleTargets(a,p);if(m.target?(t=m.target,u=m.subTargets):(m=this.searchPossibleTargets(this._objects,p),t=m.target,u=m.subTargets),!t||!t.selectable)return!1}t.group===i?(i.remove(t),this._hoveredTarget=t,this._hoveredTargets=u,i.size()===1&&this._setActiveObject(i.item(0),e)):(i.multiSelectAdd(t),this._hoveredTarget=i,this._hoveredTargets=u),this._fireSelectionEvents(a,e)}else{i.isEditing&&i.exitEditing();const a=new(ht.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(i,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([i],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:i,deltaX:s,deltaY:a}=this._groupSelector,u=new ke(t,i),p=u.add(new ke(s,a)),m=u.min(p),y=u.max(p).subtract(m),b=this.collectObjects({left:m.x,top:m.y,width:y.x,height:y.y},{includeIntersecting:!this.selectionFullyContained}),C=u.eq(p)?b[0]?[b[0]]:[]:b.length>1?b.filter(N=>!N.onSelect({e})).reverse():b;if(C.length===1)this.setActiveObject(C[0],e);else if(C.length>1){const N=ht.getClass("ActiveSelection");this.setActiveObject(new N(C,{canvas:this}),e)}return this._groupSelector=null,!0}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{upper:i}=this.elements;i.ctx=void 0;const s=super.toCanvasElement(e,t);return i.ctx=i.el.getContext("2d"),s}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const I_={x1:0,y1:0,x2:0,y2:0},eT={...I_,r1:0,r2:0},fl=(o,e)=>isNaN(o)&&typeof e=="number"?e:o;function F_(o){return o&&/%$/.test(o)&&Number.isFinite(parseFloat(o))}function V_(o,e){const t=typeof o=="number"?o:typeof o=="string"?parseFloat(o)/(F_(o)?100:1):NaN;return yo(0,fl(t,e),1)}const tT=/\s*;\s*/,iT=/\s*:\s*/;function nT(o,e){let t,i;const s=o.getAttribute("style");if(s){const u=s.split(tT);u[u.length-1]===""&&u.pop();for(let p=u.length;p--;){const[m,y]=u[p].split(iT).map(b=>b.trim());m==="stop-color"?t=y:m==="stop-opacity"&&(i=y)}}t=t||o.getAttribute("stop-color")||"rgb(0,0,0)",i=fl(parseFloat(i||o.getAttribute("stop-opacity")||""),1);const a=new ii(t);return a.setAlpha(a.getAlpha()*i*e),{offset:V_(o.getAttribute("offset"),0),color:a.toRgba()}}function sT(o,e){const t=[],i=o.getElementsByTagName("stop"),s=V_(e,1);for(let a=i.length;a--;)t.push(nT(i[a],s));return t}function U_(o){return o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?"linear":"radial"}function H_(o){return o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Is(o,e){return o.getAttribute(e)}function rT(o,e){return(function(t,i){let s,{width:a,height:u,gradientUnits:p}=i;return Object.entries(t).reduce((m,y)=>{let[b,C]=y;if(C==="Infinity")s=1;else if(C==="-Infinity")s=0;else{const N=typeof C=="string";s=N?parseFloat(C):C,N&&F_(C)&&(s*=.01,p==="pixels"&&(b!=="x1"&&b!=="x2"&&b!=="r2"||(s*=a),b!=="y1"&&b!=="y2"||(s*=u)))}return m[b]=s,m},{})})(U_(o)==="linear"?(function(t){return{x1:Is(t,"x1")||0,y1:Is(t,"y1")||0,x2:Is(t,"x2")||"100%",y2:Is(t,"y2")||0}})(o):(function(t){return{x1:Is(t,"fx")||Is(t,"cx")||"50%",y1:Is(t,"fy")||Is(t,"cy")||"50%",r1:0,x2:Is(t,"cx")||"50%",y2:Is(t,"cy")||"50%",r2:Is(t,"r")||"50%"}})(o),{...e,gradientUnits:H_(o)})}class Ys{constructor(e){const{type:t="linear",gradientUnits:i="pixels",coords:s={},colorStops:a=[],offsetX:u=0,offsetY:p=0,gradientTransform:m,id:y}=e||{};Object.assign(this,{type:t,gradientUnits:i,coords:{...t==="radial"?eT:I_,...s},colorStops:a,offsetX:u,offsetY:p,gradientTransform:m,id:y?`${y}_${Ia()}`:Ia()})}addColorStop(e){for(const t in e)this.colorStops.push({offset:parseFloat(t),color:e[t]});return this}toObject(e){return{...So(this,e),type:this.type,coords:{...this.coords},colorStops:this.colorStops.map(t=>({...t})),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0}}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],s=this.gradientTransform?this.gradientTransform.concat():Cn.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",u=this.colorStops.map(C=>({...C})).sort((C,N)=>C.offset-N.offset);let p=-this.offsetX,m=-this.offsetY;var y;a==="objectBoundingBox"?(p/=e.width,m/=e.height):(p+=e.width/2,m+=e.height/2),(y=e)&&typeof y._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(p-=e.pathOffset.x,m-=e.pathOffset.y),s[4]-=p,s[5]-=m;const b=[`id="SVGID_${this.id}"`,`gradientUnits="${a}"`,`gradientTransform="${t?t+" ":""}${bl(s)}"`,""].join(" ");if(this.type==="linear"){const{x1:C,y1:N,x2:E,y2:V}=this.coords;i.push("<linearGradient ",b,' x1="',C,'" y1="',N,'" x2="',E,'" y2="',V,`">
`)}else if(this.type==="radial"){const{x1:C,y1:N,x2:E,y2:V,r1:L,r2:ee}=this.coords,G=L>ee;i.push("<radialGradient ",b,' cx="',G?C:E,'" cy="',G?N:V,'" r="',G?L:ee,'" fx="',G?E:C,'" fy="',G?V:N,`">
`),G&&(u.reverse(),u.forEach(ne=>{ne.offset=1-ne.offset}));const te=Math.min(L,ee);if(te>0){const ne=te/Math.max(L,ee);u.forEach(de=>{de.offset+=ne*(1-de.offset)})}}return u.forEach(C=>{let{color:N,offset:E}=C;i.push(`<stop offset="${100*E}%" style="stop-color:${N};"/>
`)}),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(e){const{x1:t,y1:i,x2:s,y2:a,r1:u,r2:p}=this.coords,m=this.type==="linear"?e.createLinearGradient(t,i,s,a):e.createRadialGradient(t,i,u,s,a,p);return this.colorStops.forEach(y=>{let{color:b,offset:C}=y;m.addColorStop(C,b)}),m}static async fromObject(e){const{colorStops:t,gradientTransform:i}=e;return new this({...e,colorStops:t?t.map(s=>({...s})):void 0,gradientTransform:i?[...i]:void 0})}static fromElement(e,t,i){const s=H_(e),a=t._findCenterFromElement();return new this({id:e.getAttribute("id")||void 0,type:U_(e),coords:rT(e,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:sT(e,i.opacity),gradientUnits:s,gradientTransform:cf(e.getAttribute("gradientTransform")||""),...s==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}})}}ye(Ys,"type","Gradient"),ht.setClass(Ys,"gradient"),ht.setClass(Ys,"linear"),ht.setClass(Ys,"radial");class vl{get type(){return"pattern"}set type(e){Zr("warn","Setting type has no effect",e)}constructor(e){ye(this,"repeat","repeat"),ye(this,"offsetX",0),ye(this,"offsetY",0),ye(this,"crossOrigin",""),this.id=Ia(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:i}=this;return{...So(this,e),type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:i,offsetX:gi(this.offsetX,qt.NUM_FRACTION_DIGITS),offsetY:gi(this.offsetY,qt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null}}toSVG(e){let{width:t,height:i}=e;const{source:s,repeat:a,id:u}=this,p=fl(this.offsetX/t,0),m=fl(this.offsetY/i,0);return[`<pattern id="SVGID_${u}" x="${p}" y="${m}" width="${a==="repeat-y"||a==="no-repeat"?1+Math.abs(p||0):fl(s.width/t,0)}" height="${a==="repeat-x"||a==="no-repeat"?1+Math.abs(m||0):fl(s.height/i,0)}">`,`<image x="0" y="0" width="${s.width}" height="${s.height}" xlink:href="${this.sourceToString()}"></image>`,"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:i,source:s,patternTransform:a,...u}=e;const p=await qc(s,{...t,crossOrigin:u.crossOrigin});return new this({...u,patternTransform:a&&a.slice(0),source:p})}}ye(vl,"type","Pattern"),ht.setClass(vl),ht.setClass(vl,"pattern");class Mf{constructor(e){ye(this,"color","rgb(0, 0, 0)"),ye(this,"width",1),ye(this,"shadow",null),ye(this,"strokeLineCap","round"),ye(this,"strokeLineJoin","round"),ye(this,"strokeMiterLimit",10),ye(this,"strokeDashArray",null),ye(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new ii(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,i=e.contextTop,s=e.getZoom()*e.getRetinaScaling();i.shadowColor=t.color,i.shadowBlur=t.blur*s,i.shadowOffsetX=t.offsetX*s,i.shadowOffsetY=t.offsetY*s}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}class ji extends un{constructor(e){let{path:t,left:i,top:s,...a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ji.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),typeof i=="number"&&this.set(ni,i),typeof s=="number"&&this.set(Kn,s)}_setPath(e,t){this.path=T_(Array.isArray(e)?e:M_(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ke(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,i=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+i);break;case"M":e.moveTo(s[1]+t,s[2]+i);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+i,s[3]+t,s[4]+i,s[5]+t,s[6]+i);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+i,s[3]+t,s[4]+i);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return`#<Path (${this.complexity()}): { "top": ${this.top}, "left": ${this.left} }>`}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),path:this.path.map(t=>t.slice())}}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){return["<path ","COMMON_PARTS",`d="${d0(this.path,qt.NUM_FRACTION_DIGITS)}" stroke-linecap="round" />
`]}_getOffsetTransform(){const e=qt.NUM_FRACTION_DIGITS;return` translate(${gi(-this.pathOffset.x,e)}, ${gi(-this.pathOffset.y,e)})`}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:i,pathOffset:s}=this._calcDimensions();this.set({width:t,height:i,pathOffset:s}),e&&this.setPositionByOrigin(s,jt,jt)}_calcBoundsFromPath(){const e=[];let t=0,i=0,s=0,a=0;for(const u of this.path)switch(u[0]){case"L":s=u[1],a=u[2],e.push({x:t,y:i},{x:s,y:a});break;case"M":s=u[1],a=u[2],t=s,i=a;break;case"C":e.push(...Sp(s,a,u[1],u[2],u[3],u[4],u[5],u[6])),s=u[5],a=u[6];break;case"Q":e.push(...Sp(s,a,u[1],u[2],u[1],u[2],u[3],u[4])),s=u[3],a=u[4];break;case"Z":s=t,a=i}return pr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return{...e,pathOffset:new ke(e.left+e.width/2,e.top+e.height/2)}}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,i){const{d:s,...a}=ea(e,this.ATTRIBUTE_NAMES,i);return new this(s,{...a,...t,left:void 0,top:void 0})}}ye(ji,"type","Path"),ye(ji,"cacheProperties",[...Qr,"path","fillRule"]),ye(ji,"ATTRIBUTE_NAMES",[...Ha,"d"]),ht.setClass(ji),ht.setSVGClass(ji);class Cl extends Mf{constructor(e){super(e),ye(this,"decimate",.4),ye(this,"drawStraightLine",!1),ye(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,i){const s=t.midPointFrom(i);return e.quadraticCurveTo(t.x,t.y,s.x,s.y),s}onMouseDown(e,t){let{e:i}=t;this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:i}=t;if(this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const s=this._points,a=s.length,u=this.canvas.contextTop;this._saveAndTransform(u),this.oldEnd&&(u.beginPath(),u.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Cl.drawSegment(u,s[a-2],s[a-1]),u.stroke(),u.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],i=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===i.x&&t.y===i.y){const s=this.width/1e3;t.x-=s,i.x+=s}e.moveTo(t.x,t.y);for(let s=1;s<this._points.length;s++)Cl.drawSegment(e,t,i),t=this._points[s],i=this._points[s+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return D_(e,t)}createPath(e){const t=new ji(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Pn(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let i,s=e[0];const a=this.canvas.getZoom(),u=Math.pow(t/a,2),p=e.length-1,m=[s];for(let y=1;y<p-1;y++)i=Math.pow(s.x-e[y].x,2)+Math.pow(s.y-e[y].y,2),i>=u&&(s=e[y],m.push(s));return m.push(e[p]),m}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if((function(i){return d0(i)==="M 0 0 Q 0 0 0 0 L 0 0"})(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const Y_=["radius","startAngle","endAngle","counterClockwise"];class qi extends un{static getDefaults(){return{...super.getDefaults(),...qi.ownDefaults}}constructor(e){super(),Object.assign(this,qi.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Li(this.startAngle),Li(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Bn)}getRadiusY(){return this.get("radius")*this.get(hs)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Y_,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',`${this.radius}`,`" />
`];{const{radius:t}=this,i=Li(this.startAngle),s=Li(this.endAngle),a=Ws(i)*t,u=Zs(i)*t,p=Ws(s)*t,m=Zs(s)*t;return[`<path d="M ${a} ${u} A ${t} ${t} 0 ${e>180?1:0} ${this.counterClockwise?0:1} ${p} ${m}" `,"COMMON_PARTS",` />
`]}}static async fromElement(e,t,i){const{left:s=0,top:a=0,radius:u=0,...p}=ea(e,this.ATTRIBUTE_NAMES,i);return new this({...p,radius:u,left:s-u,top:a-u})}static fromObject(e){return super._fromObject(e)}}ye(qi,"type","Circle"),ye(qi,"cacheProperties",[...Qr,...Y_]),ye(qi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),ye(qi,"ATTRIBUTE_NAMES",["cx","cy","r",...Ha]),ht.setClass(qi),ht.setSVGClass(qi);class X_ extends Mf{constructor(e){super(e),ye(this,"width",10),this.points=[]}drawDot(e){const t=this.addPoint(e),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,t),i.restore()}dot(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()}onMouseDown(e){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)}_render(){const e=this.canvas.contextTop,t=this.points;this._saveAndTransform(e);for(let i=0;i<t.length;i++)this.dot(e,t[i]);e.restore()}onMouseMove(e){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))}onMouseUp(){const e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const t=[];for(let s=0;s<this.points.length;s++){const a=this.points[s],u=new qi({radius:a.radius,left:a.x,top:a.y,originX:jt,originY:jt,fill:a.fill});this.shadow&&(u.shadow=new Pn(this.shadow)),t.push(u)}const i=new Wi(t,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()}addPoint(e){let{x:t,y:i}=e;const s={x:t,y:i,radius:fo(Math.max(0,this.width-20),this.width+20)/2,fill:new ii(this.color).setAlpha(fo(0,100)/100).toRgba()};return this.points.push(s),s}}class G_ extends Mf{constructor(e){super(e),ye(this,"width",10),ye(this,"density",20),ye(this,"dotWidth",1),ye(this,"dotWidthVariance",1),ye(this,"randomOpacity",!1),ye(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(e){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.renderChunck(this.sprayChunk)}onMouseMove(e){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.renderChunck(this.sprayChunk))}onMouseUp(){const e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const t=[];for(let s=0;s<this.sprayChunks.length;s++){const a=this.sprayChunks[s];for(let u=0;u<a.length;u++){const p=a[u],m=new wn({width:p.width,height:p.width,left:p.x+1,top:p.y+1,originX:jt,originY:jt,fill:this.color});t.push(m)}}const i=new Wi(this.optimizeOverlapping?(function(s){const a={},u=[];for(let p,m=0;m<s.length;m++)p=`${s[m].left}${s[m].top}`,a[p]||(a[p]=!0,u.push(s[m]));return u})(t):t,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&i.set("shadow",new Pn(this.shadow)),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()}renderChunck(e){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let i=0;i<e.length;i++){const s=e[i];t.globalAlpha=s.opacity,t.fillRect(s.x,s.y,s.width,s.width)}t.restore()}_render(){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let t=0;t<this.sprayChunks.length;t++)this.renderChunck(this.sprayChunks[t]);e.restore()}addSprayChunk(e){this.sprayChunk=[];const t=this.width/2;for(let i=0;i<this.density;i++)this.sprayChunk.push({x:fo(e.x-t,e.x+t),y:fo(e.y-t,e.y+t),width:this.dotWidthVariance?fo(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?fo(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class q_ extends Cl{constructor(e){super(e)}getPatternSrc(){const e=Es(),t=e.getContext("2d");return e.width=e.height=25,t&&(t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill()),e}getPattern(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(e){super._setBrushStyles(e);const t=this.getPattern(e);t&&(e.strokeStyle=t)}createPath(e){const t=super.createPath(e),i=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new vl({source:this.source||this.getPatternSrc(),offsetX:-i.x,offsetY:-i.y}),t}}const Tp=["x1","x2","y1","y2"];class cs extends un{constructor(){let[e,t,i,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,cs.ownDefaults),this.setOptions(a),this.x1=e,this.x2=i,this.y1=t,this.y2=s,this._setWidthHeight();const{left:u,top:p}=a;typeof u=="number"&&this.set(ni,u),typeof p=="number"&&this.set(Kn,p)}_setWidthHeight(){const{x1:e,y1:t,x2:i,y2:s}=this;this.width=Math.abs(i-e),this.height=Math.abs(s-t);const{left:a,top:u,width:p,height:m}=pr([{x:e,y:t},{x:i,y:s}]),y=new ke(a+p/2,u+m/2);this.setPositionByOrigin(y,jt,jt)}_set(e,t){return super._set(e,t),Tp.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const i=e.strokeStyle;var s;As(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=i}_findCenterFromElement(){return new ke((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),...this.calcLinePoints()}}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:i,y2:s,width:a,height:u}=this,p=e<=t?-1:1,m=i<=s?-1:1;return{x1:p*a/2,x2:p*-a/2,y1:m*u/2,y2:m*-u/2}}_toSVG(){const{x1:e,x2:t,y1:i,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",`x1="${e}" y1="${i}" x2="${t}" y2="${s}" />
`]}static async fromElement(e,t,i){const{x1:s=0,y1:a=0,x2:u=0,y2:p=0,...m}=ea(e,this.ATTRIBUTE_NAMES,i);return new this([s,a,u,p],m)}static fromObject(e){let{x1:t,y1:i,x2:s,y2:a,...u}=e;return this._fromObject({...u,points:[t,i,s,a]},{extraParam:"points"})}}ye(cs,"type","Line"),ye(cs,"cacheProperties",[...Qr,...Tp]),ye(cs,"ATTRIBUTE_NAMES",Ha.concat(Tp)),ht.setClass(cs),ht.setSVGClass(cs);class fr extends un{static getDefaults(){return{...super.getDefaults(),...fr.ownDefaults}}constructor(e){super(),Object.assign(this,fr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,i),e.lineTo(0,-i),e.lineTo(t,i),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',`${-e} ${t},0 ${-t},${e} ${t}`,'" />']}}ye(fr,"type","Triangle"),ye(fr,"ownDefaults",{width:100,height:100}),ht.setClass(fr),ht.setSVGClass(fr);const W_=["rx","ry"];class Fs extends un{static getDefaults(){return{...super.getDefaults(),...Fs.ownDefaults}}constructor(e){super(),Object.assign(this,Fs.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Bn)}getRy(){return this.get("ry")*this.get(hs)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...W_,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",`cx="0" cy="0" rx="${this.rx}" ry="${this.ry}" />
`]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,qs,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,i){const s=ea(e,this.ATTRIBUTE_NAMES,i);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}ye(Fs,"type","Ellipse"),ye(Fs,"cacheProperties",[...Qr,...W_]),ye(Fs,"ownDefaults",{rx:0,ry:0}),ye(Fs,"ATTRIBUTE_NAMES",[...Ha,"cx","cy","rx","ry"]),ht.setClass(Fs),ht.setSVGClass(Fs);const Z_={exactBoundingBox:!1};class ks extends un{static getDefaults(){return{...super.getDefaults(),...ks.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ye(this,"strokeDiff",void 0),Object.assign(this,ks.ownDefaults),this.setOptions(t),this.points=e;const{left:i,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(ni,i),typeof s=="number"&&this.set(Kn,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return m_(this.points,e,this.isOpen())}_calcDimensions(e){e={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth,...e||{}};const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(y=>y.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ke,strokeOffset:new ke,strokeDiff:new ke};const i=pr(t),s=lu({...e,scaleX:1,scaleY:1}),a=pr(this.points.map(y=>Sn(y,s,!0))),u=new ke(this.scaleX,this.scaleY);let p=i.left+i.width/2,m=i.top+i.height/2;return this.exactBoundingBox&&(p-=m*Math.tan(Li(this.skewX)),m-=p*Math.tan(Li(this.skewY))),{...i,pathOffset:new ke(p,m),strokeOffset:new ke(a.left,a.top).subtract(new ke(i.left,i.top)).multiply(u),strokeDiff:new ke(i.width,i.height).subtract(new ke(a.width,a.height)).multiply(u)}}_findCenterFromElement(){const e=pr(this.points);return new ke(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:i,width:s,height:a,pathOffset:u,strokeOffset:p,strokeDiff:m}=this._calcDimensions();this.set({width:s,height:a,pathOffset:u,strokeOffset:p,strokeDiff:m}),e&&this.setPositionByOrigin(new ke(t+s/2,i+a/2),jt,jt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ke(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let u;if(Object.keys(e).some(p=>this.strokeUniform||this.constructor.layoutProperties.includes(p))){var t,i;const{width:p,height:m}=this._calcDimensions(e);u=new ke((t=e.width)!==null&&t!==void 0?t:p,(i=e.height)!==null&&i!==void 0?i:m)}else{var s,a;u=new ke((s=e.width)!==null&&s!==void 0?s:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return u.multiply(new ke(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const i=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&i&&((e===Bn||e===hs)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),points:this.points.map(t=>{let{x:i,y:s}=t;return{x:i,y:s}})}}_toSVG(){const e=[],t=this.pathOffset.x,i=this.pathOffset.y,s=qt.NUM_FRACTION_DIGITS;for(let a=0,u=this.points.length;a<u;a++)e.push(gi(this.points[a].x-t,s),",",gi(this.points[a].y-i,s)," ");return[`<${this.constructor.type.toLowerCase()} `,"COMMON_PARTS",`points="${e.join("")}" />
`]}_render(e){const t=this.points.length,i=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-i,this.points[0].y-s);for(let a=0;a<t;a++){const u=this.points[a];e.lineTo(u.x-i,u.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,i){const s=(function(m){if(!m)return[];const y=m.replace(/,/g," ").trim().split(/\s+/),b=[];for(let C=0;C<y.length;C+=2)b.push({x:parseFloat(y[C]),y:parseFloat(y[C+1])});return b})(e.getAttribute("points")),{left:a,top:u,...p}=ea(e,this.ATTRIBUTE_NAMES,i);return new this(s,{...p,...t})}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}ye(ks,"ownDefaults",Z_),ye(ks,"type","Polyline"),ye(ks,"layoutProperties",[Al,Ol,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),ye(ks,"cacheProperties",[...Qr,"points"]),ye(ks,"ATTRIBUTE_NAMES",[...Ha]),ht.setClass(ks),ht.setSVGClass(ks);class Gr extends ks{isOpen(){return!1}}ye(Gr,"ownDefaults",Z_),ye(Gr,"type","Polygon"),ht.setClass(Gr),ht.setSVGClass(Gr);class $_ extends un{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const i in t)for(const s in t[i])for(const a in t[i][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const i=t===void 0?this.styles:{0:this.styles[t]};for(const s in i)for(const a in i[s])if(i[s][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let i,s,a=0,u=!0,p=0;for(const m in t){i=0;for(const y in t[m]){const b=t[m][y]||{};a++,b[e]!==void 0?(s?b[e]!==s&&(u=!1):s=b[e],b[e]===this[e]&&delete b[e]):u=!1,Object.keys(b).length!==0?i++:delete t[m][y]}i===0&&delete t[m]}for(let m=0;m<this._textLines.length;m++)p+=this._textLines[m].length;u&&a===p&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let i,s,a;for(s in t){for(a in i=t[s],i)delete i[a][e],Object.keys(i[a]).length===0&&delete i[a];Object.keys(i).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(i)||this._setLineStyle(i);const a=$p({...this._getStyleDeclaration(i,s),...t},u=>u!==void 0);this._setStyleDeclaration(i,s,a)}getSelectionStyles(e,t,i){const s=[];for(let a=e;a<(t||e);a++)s.push(this.getStyleAtPosition(a,i));return s}getStyleAtPosition(e,t){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(i,s):this._getStyleDeclaration(i,s)}setSelectionStyles(e,t,i){for(let s=t;s<(i||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var i;const s=this.styles&&this.styles[e];return s&&(i=s[t])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(e,t){return{...So(this,this.constructor._styleProperties),...this._getStyleDeclaration(e,t)}}_setStyleDeclaration(e,t,i){this.styles[e][t]=i}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}ye($_,"_styleProperties",Kw);const aT=/  +/g,oT=/"/g;function Jg(o,e,t,i,s){return`		${(function(a,u){let{left:p,top:m,width:y,height:b}=u,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qt.NUM_FRACTION_DIGITS;const N=tu(sn,a,!1),[E,V,L,ee]=[p,m,y,b].map(G=>gi(G,C));return`<rect ${N} x="${E}" y="${V}" width="${L}" height="${ee}"></rect>`})(o,{left:e,top:t,width:i,height:s})}
`}let ep;class ln extends $_{static getDefaults(){return{...super.getDefaults(),...ln.ownDefaults}}constructor(e,t){super(),ye(this,"__charBounds",[]),Object.assign(this,ln.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=f0(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(hr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,i,s,a,u,p;for(let m=0,y=this._textLines.length;m<y;m++)if((this.textAlign===hr||m!==y-1&&!this.isEndOfWrapping(m))&&(s=0,a=this._textLines[m],t=this.getLineWidth(m),t<this.width&&(p=this.textLines[m].match(this._reSpacesAndTabs)))){i=p.length,e=(this.width-t)/i;for(let b=0;b<=a.length;b++)u=this.__charBounds[m][b],this._reSpaceAndTab.test(a[b])?(u.width+=e,u.kernedWidth+=e,u.left+=s,s+=e):u.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const i=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<i.length;s++){if(e<=i[s].length)return{lineIndex:s,charIndex:e};e-=i[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:i[s-1].length<e?i[s-1].length:e}}toString(){return`#<Text (${this.complexity()}): { "text": "${this.text}", "fontFamily": "${this.fontFamily}" }>`}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Qn?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,i){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case jt:e.textBaseline="middle";break;case"ascender":e.textBaseline=Kn;break;case"descender":e.textBaseline=up}e.font=this._getFontDeclaration(t,i)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,i=this._textLines.length;t<i;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,i,s,a,u){this._renderChars(e,t,i,s,a,u)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,i=this._getLeftOffset();let s=this._getTopOffset();for(let a=0,u=this._textLines.length;a<u;a++){const p=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){s+=p;continue}const m=this._textLines[a].length,y=this._getLineLeftOffset(a);let b,C,N=0,E=0,V=this.getValueOfPropertyAt(a,0,"textBackgroundColor");const L=this.getHeightOfLineImpl(a);for(let ee=0;ee<m;ee++){const G=this.__charBounds[a][ee];C=this.getValueOfPropertyAt(a,ee,"textBackgroundColor"),this.path?(e.save(),e.translate(G.renderLeft,G.renderTop),e.rotate(G.angle),e.fillStyle=C,C&&e.fillRect(-G.width/2,-L*(1-this._fontSizeFraction),G.width,L),e.restore()):C!==V?(b=i+y+E,this.direction===Hr&&(b=this.width-b-N),e.fillStyle=V,V&&e.fillRect(b,s,N,L),E=G.left,N=G.width,V=C):N+=G.kernedWidth}C&&!this.path&&(b=i+y+E,this.direction===Hr&&(b=this.width-b-N),e.fillStyle=C,e.fillRect(b,s,N,L)),s+=p}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,i,s){const a=gl.getFontCache(t),u=this._getFontDeclaration(t),p=i?i+e:e,m=i&&u===this._getFontDeclaration(s),y=t.fontSize/this.CACHE_FONT_SIZE;let b,C,N,E;if(i&&a.has(i)&&(N=a.get(i)),a.has(e)&&(E=b=a.get(e)),m&&a.has(p)&&(C=a.get(p),E=C-N),b===void 0||N===void 0||C===void 0){const V=(function(){return ep||(ep=Jn({width:0,height:0}).getContext("2d")),ep})();this._setTextStyles(V,t,!0),b===void 0&&(E=b=V.measureText(e).width,a.set(e,b)),N===void 0&&m&&i&&(N=V.measureText(i).width,a.set(i,N)),m&&C===void 0&&(C=V.measureText(p).width,a.set(p,C),E=C-N)}return{width:b*y,kernedWidth:E*y}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,i,s=0;const a=this.pathSide===Ii,u=this.path,p=this._textLines[e],m=p.length,y=new Array(m);this.__charBounds[e]=y;for(let b=0;b<m;b++){const C=p[b];i=this._getGraphemeBox(C,e,b,t),y[b]=i,s+=i.kernedWidth,t=C}if(y[m]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},u&&u.segmentsInfo){let b=0;const C=u.segmentsInfo[u.segmentsInfo.length-1].length;switch(this.textAlign){case ni:b=a?C-s:0;break;case jt:b=(C-s)/2;break;case Ii:b=a?0:C-s}b+=this.pathStartOffset*(a?-1:1);for(let N=a?m-1:0;a?N>=0:N<m;a?N--:N++)i=y[N],b>C?b%=C:b<0&&(b+=C),this._setGraphemeOnPath(b,i),b+=i.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const i=e+t.kernedWidth/2,s=this.path,a=j_(s.path,i,s.segmentsInfo);t.renderLeft=a.x-s.pathOffset.x,t.renderTop=a.y-s.pathOffset.y,t.angle=a.angle+(this.pathSide===Ii?Math.PI:0)}_getGraphemeBox(e,t,i,s,a){const u=this.getCompleteStyleDeclaration(t,i),p=s?this.getCompleteStyleDeclaration(t,i-1):{},m=this._measureChar(e,u,s,p);let y,b=m.kernedWidth,C=m.width;this.charSpacing!==0&&(y=this._getWidthOfCharSpacing(),C+=y,b+=y);const N={width:C,left:0,height:u.fontSize,kernedWidth:b,deltaY:u.deltaY};if(i>0&&!a){const E=this.__charBounds[t][i-1];N.left=E.left+E.width+m.kernedWidth-m.width}return N}getHeightOfLineImpl(e){const t=this.__lineHeights;if(t[e])return t[e];let i=this.getHeightOfChar(e,0);for(let s=1,a=this._textLines[e].length;s<a;s++)i=Math.max(this.getHeightOfChar(e,s),i);return t[e]=i*this._fontSizeMult}getHeightOfLine(e){return this.getHeightOfLineImpl(e)*this.lineHeight}calcTextHeight(){let e=0;for(let t=0,i=this._textLines.length;t<i;t++)e+=t===i-1?this.getHeightOfLineImpl(t):this.getHeightOfLine(t);return e}_getLeftOffset(){return this.direction===lo?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let i=0;const s=this._getLeftOffset(),a=this._getTopOffset();for(let u=0,p=this._textLines.length;u<p;u++)this._renderTextLine(t,e,this._textLines[u],s+this._getLineLeftOffset(u),a+i+this.getHeightOfLineImpl(u),u),i+=this.getHeightOfLine(u);e.restore()}_renderTextFill(e){(this.fill||this.styleHas(sn))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,i,s,a,u){const p=this.textAlign.includes(hr),m=this.path,y=!p&&this.charSpacing===0&&this.isEmptyStyles(u)&&!m,b=this.direction===lo,C=this.direction===lo?1:-1,N=t.direction;let E,V,L,ee,G,te="",ne=0;if(t.save(),N!==this.direction&&(t.canvas.setAttribute("dir",b?lo:Hr),t.direction=b?lo:Hr,t.textAlign=b?ni:Ii),a-=this.getHeightOfLineImpl(u)*this._fontSizeFraction,y)return this._renderChar(e,t,u,0,i.join(""),s,a),void t.restore();for(let de=0,be=i.length-1;de<=be;de++)ee=de===be||this.charSpacing||m,te+=i[de],L=this.__charBounds[u][de],ne===0?(s+=C*(L.kernedWidth-L.width),ne+=L.width):ne+=L.kernedWidth,p&&!ee&&this._reSpaceAndTab.test(i[de])&&(ee=!0),ee||(E=E||this.getCompleteStyleDeclaration(u,de),V=this.getCompleteStyleDeclaration(u,de+1),ee=Ef(E,V,!1)),ee&&(m?(t.save(),t.translate(L.renderLeft,L.renderTop),t.rotate(L.angle),this._renderChar(e,t,u,de,te,-ne/2,0),t.restore()):(G=s,this._renderChar(e,t,u,de,te,G,a)),te="",E=V,s+=C*ne,ne=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,i=this.height+this.strokeWidth,s=Jn({width:t,height:i}),a=s.getContext("2d");return s.width=t,s.height=i,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,i),a.lineTo(0,i),a.closePath(),a.translate(t/2,i/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(s,"no-repeat")}handleFiller(e,t,i){let s,a;return As(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(s=-this.width/2,a=-this.height/2,e.translate(s,a),e[t]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:a}):(e[t]=i.toLive(e),this._applyPatternGradientTransform(e,i)):(e[t]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:i,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",i)}_setFillStyles(e,t){let{fill:i}=t;return this.handleFiller(e,"fillStyle",i)}_renderChar(e,t,i,s,a,u,p){const m=this._getStyleDeclaration(i,s),y=this.getCompleteStyleDeclaration(i,s),b=e==="fillText"&&y.fill,C=e==="strokeText"&&y.stroke&&y.strokeWidth;if(C||b){if(t.save(),t.font=this._getFontDeclaration(y),m.textBackgroundColor&&this._removeShadow(t),m.deltaY&&(p+=m.deltaY),b){const N=this._setFillStyles(t,y);t.fillText(a,u-N.offsetX,p-N.offsetY)}if(C){const N=this._setStrokeStyles(t,y);t.strokeText(a,u-N.offsetX,p-N.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,i){const s=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),u=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),p={fontSize:a*i.size,deltaY:u+a*i.baseline};this.setSelectionStyles(p,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),i=this.width-t,s=this.textAlign,a=this.direction,u=this.isEndOfWrapping(e);let p=0;return s===hr||s===Zc&&!u||s===Wc&&!u||s===lf&&!u?0:(s===jt&&(p=i/2),s===Ii&&(p=i),s===Zc&&(p=i/2),s===Wc&&(p=i),a===Hr&&(s===Ii||s===Wc?p=0:s===ni||s===lf?p=-i:s!==jt&&s!==Zc||(p=-i/2)),p)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,i){var s;return(s=this._getStyleDeclaration(e,t)[i])!==null&&s!==void 0?s:this[i]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let i=this._getTopOffset();const s=this._getLeftOffset(),a=this.path,u=this._getWidthOfCharSpacing(),p=t==="linethrough"?.5:t==="overline"?1:0,m=this.offsets[t];for(let y=0,b=this._textLines.length;y<b;y++){const C=this.getHeightOfLine(y);if(!this[t]&&!this.styleHas(t,y)){i+=C;continue}const N=this._textLines[y],E=C/this.lineHeight,V=this._getLineLeftOffset(y);let L=0,ee=0,G=this.getValueOfPropertyAt(y,0,t),te=this.getValueOfPropertyAt(y,0,sn),ne=this.getValueOfPropertyAt(y,0,vo),de=G,be=te,I=ne;const Ee=i+E*(1-this._fontSizeFraction);let Ye=this.getHeightOfChar(y,0),Be=this.getValueOfPropertyAt(y,0,"deltaY");for(let et=0,ft=N.length;et<ft;et++){const Ge=this.__charBounds[y][et];de=this.getValueOfPropertyAt(y,et,t),be=this.getValueOfPropertyAt(y,et,sn),I=this.getValueOfPropertyAt(y,et,vo);const Mt=this.getHeightOfChar(y,et),he=this.getValueOfPropertyAt(y,et,"deltaY");if(a&&de&&be){const qe=this.fontSize*I/1e3;e.save(),e.fillStyle=te,e.translate(Ge.renderLeft,Ge.renderTop),e.rotate(Ge.angle),e.fillRect(-Ge.kernedWidth/2,m*Mt+he-p*qe,Ge.kernedWidth,qe),e.restore()}else if((de!==G||be!==te||Mt!==Ye||I!==ne||he!==Be)&&ee>0){const qe=this.fontSize*ne/1e3;let it=s+V+L;this.direction===Hr&&(it=this.width-it-ee),G&&te&&ne&&(e.fillStyle=te,e.fillRect(it,Ee+m*Ye+Be-p*qe,ee,qe)),L=Ge.left,ee=Ge.width,G=de,ne=I,te=be,Ye=Mt,Be=he}else ee+=Ge.kernedWidth}let ct=s+V+L;this.direction===Hr&&(ct=this.width-ct-ee),e.fillStyle=be;const nt=this.fontSize*I/1e3;de&&be&&I&&e.fillRect(ct,Ee+m*Ye+Be-p*nt,ee-u,nt),i+=C}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const u=e.includes("'")||e.includes('"')||e.includes(",")||ln.genericFonts.includes(e.toLowerCase())?e:`"${e}"`;return[t,i,`${a?this.CACHE_FONT_SIZE:s}px`,u].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Of(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),i=new Array(t.length),s=[`
`];let a=[];for(let u=0;u<t.length;u++)i[u]=this.graphemeSplit(t[u]),a=a.concat(i[u],s);return a.pop(),{_unwrappedLines:i,lines:t,graphemeText:a,graphemeLines:i}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject([...qb,...e]),styles:y_(this.styles,this.text),...this.path?{path:this.path.toObject()}:{}}}set(e,t){const{textLayoutProperties:i}=this.constructor;super.set(e,t);let s=!1,a=!1;if(typeof e=="object")for(const u in e)u==="path"&&this.setPathInfo(),s=s||i.includes(u),a=a||u==="path";else s=i.includes(e),a=e==="path";return a&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,i){const s=ea(e,ln.ATTRIBUTE_NAMES,i),{textAnchor:a=ni,textDecoration:u="",dx:p=0,dy:m=0,top:y=0,left:b=0,fontSize:C=Vp,strokeWidth:N=1,...E}={...t,...s},V=new this(of(e.textContent||"").trim(),{left:b+p,top:y+m,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:C,...E}),L=V.getScaledHeight()/V.height,ee=((V.height+V.strokeWidth)*V.lineHeight-V.height)*L,G=V.getScaledHeight()+ee;let te=0;return a===jt&&(te=V.getScaledWidth()/2),a===Ii&&(te=V.getScaledWidth()),V.set({left:V.left-te,top:V.top-(G-V.fontSize*(.07+V._fontSizeFraction))/V.lineHeight,strokeWidth:N}),V}static fromObject(e){return this._fromObject({...e,styles:x_(e.styles||{},e.text)},{extraParam:"text"})}}ye(ln,"textLayoutProperties",Gb),ye(ln,"cacheProperties",[...Qr,...qb]),ye(ln,"ownDefaults",Qw),ye(ln,"type","Text"),ye(ln,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),ye(ln,"ATTRIBUTE_NAMES",Ha.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),d_(ln,[class extends Hb{_toSVG(){const o=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(o){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:o,withShadow:!0,additionalTransform:bl(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(o){let{textBgRects:e,textSpans:t}=o;const i=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',`font-family="${this.fontFamily.replace(oT,"'")}" `,`font-size="${this.fontSize}" `,this.fontStyle?`font-style="${this.fontStyle}" `:"",this.fontWeight?`font-weight="${this.fontWeight}" `:"",i?`text-decoration="${i}" `:"",this.direction==="rtl"?`direction="${this.direction}" `:"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(o,e){const t=[],i=[];let s,a=o;this.backgroundColor&&i.push(...Jg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let u=0,p=this._textLines.length;u<p;u++)s=this._getLineLeftOffset(u),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",u))&&this._setSVGTextLineBg(i,u,e+s,a),this._setSVGTextLineText(t,u,e+s,a),a+=this.getHeightOfLine(u);return{textSpans:t,textBgRects:i}}_createTextCharSpan(o,e,t,i,s){const a=qt.NUM_FRACTION_DIGITS,u=this.getSvgSpanStyles(e,o!==o.trim()||!!o.match(aT)),p=u?`style="${u}"`:"",m=e.deltaY,y=m?` dy="${gi(m,a)}" `:"",{angle:b,renderLeft:C,renderTop:N,width:E}=s;let V="";if(C!==void 0){const L=E/2;b&&(V=` rotate="${gi($r(b),a)}"`);const ee=_o({angle:$r(b)});ee[4]=C,ee[5]=N;const G=new ke(-L,0).transform(ee);t=G.x,i=G.y}return`<tspan x="${gi(t,a)}" y="${gi(i,a)}" ${y}${V}${p}>${v_(o)}</tspan>`}_setSVGTextLineText(o,e,t,i){const s=this.getHeightOfLine(e),a=this.textAlign.includes(hr),u=this._textLines[e];let p,m,y,b,C,N="",E=0;i+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let V=0,L=u.length-1;V<=L;V++)C=V===L||this.charSpacing||this.path,N+=u[V],y=this.__charBounds[e][V],E===0?(t+=y.kernedWidth-y.width,E+=y.width):E+=y.kernedWidth,a&&!C&&this._reSpaceAndTab.test(u[V])&&(C=!0),C||(p=p||this.getCompleteStyleDeclaration(e,V),m=this.getCompleteStyleDeclaration(e,V+1),C=Ef(p,m,!0)),C&&(b=this._getStyleDeclaration(e,V),o.push(this._createTextCharSpan(N,b,t,i,y)),N="",p=m,this.direction==="rtl"?t-=E:t+=E,E=0)}_setSVGTextLineBg(o,e,t,i){const s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let u,p=0,m=0,y=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let b=0;b<s.length;b++){const{left:C,width:N,kernedWidth:E}=this.__charBounds[e][b];u=this.getValueOfPropertyAt(e,b,"textBackgroundColor"),u!==y?(y&&o.push(...Jg(y,t+m,i,p,a)),m=C,p=N,y=u):p+=E}u&&o.push(...Jg(y,t+m,i,p,a))}getSvgStyles(o){return`${super.getSvgStyles(o)} text-decoration-thickness: ${gi(this.textDecorationThickness*this.getObjectScaling().y/10,qt.NUM_FRACTION_DIGITS)}%; white-space: pre;`}getSvgSpanStyles(o,e){const{fontFamily:t,strokeWidth:i,stroke:s,fill:a,fontSize:u,fontStyle:p,fontWeight:m,textDecorationThickness:y,linethrough:b,overline:C,underline:N}=o,E=this.getSvgTextDecoration({underline:N??this.underline,overline:C??this.overline,linethrough:b??this.linethrough}),V=y||this.textDecorationThickness;return[s?tu(Qn,s):"",i?`stroke-width: ${i}; `:"",t?`font-family: ${t.includes("'")||t.includes('"')?t:`'${t}'`}; `:"",u?`font-size: ${u}px; `:"",p?`font-style: ${p}; `:"",m?`font-weight: ${m}; `:"",E?`text-decoration: ${E}; text-decoration-thickness: ${gi(V*this.getObjectScaling().y/10,qt.NUM_FRACTION_DIGITS)}%; `:"",a?tu(sn,a):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(o){return["overline","underline","line-through"].filter(e=>o[e.replace("-","")]).join(" ")}}]),ht.setClass(ln),ht.setSVGClass(ln);class lT{constructor(e){ye(this,"target",void 0),ye(this,"__mouseDownInPlace",!1),ye(this,"__dragStartFired",!1),ye(this,"__isDraggingOver",!1),ye(this,"__dragStartSelection",void 0),ye(this,"__dragImageDisposer",void 0),ye(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(i=>i()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,i=t.getSelectionStartFromPointer(e);return t.isEditing&&i>=t.selectionStart&&i<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var i;let{selectionStart:s,selectionEnd:a}=t;const u=this.target,p=u.canvas,m=new ke(u.flipX?-1:1,u.flipY?-1:1),y=u._getCursorBoundaries(s),b=new ke(y.left+y.leftOffset,y.top+y.topOffset).multiply(m).transform(u.calcTransformMatrix()),C=p.getScenePoint(e).subtract(b),N=u.getCanvasRetinaScaling(),E=u.getBoundingRect(),V=b.subtract(new ke(E.left,E.top)),L=p.viewportTransform,ee=V.add(C).transform(L,!0),G=u.backgroundColor,te=c0(u.styles);u.backgroundColor="";const ne={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};u.setSelectionStyles(ne,0,s),u.setSelectionStyles(ne,a,u.text.length),u.dirty=!0;const de=u.toCanvasElement({enableRetinaScaling:p.enableRetinaScaling,viewportTransform:!0});u.backgroundColor=G,u.styles=te,u.dirty=!0,wp(de,{position:"fixed",left:-de.width+"px",border:Ln,width:de.width/N+"px",height:de.height/N+"px"}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{de.remove()},Vs(e.target||this.target.hiddenTextarea).body.appendChild(de),(i=e.dataTransfer)===null||i===void 0||i.setDragImage(de,ee.x,ee.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,i=this.isActive();if(i&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(s.selectionStart,s.selectionEnd).join(""),u={text:t.text,value:a,...s};e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,u)}return t.abortCursorAnimation(),i}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),i=this.__dragStartSelection;return t<i.selectionStart||t>i.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const i=this.targetCanDrop(t);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,i=this.targetCanDrop(t);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:i}=e,s=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let a=(t=i.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!s){const u=this.target,p=u.canvas;let m=u.getSelectionStartFromPointer(i);const{styles:y}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},b=a[Math.max(0,a.length-1)],C=0;if(this.__dragStartSelection){const N=this.__dragStartSelection.selectionStart,E=this.__dragStartSelection.selectionEnd;m>N&&m<=E?m=N:m>E&&(m-=E-N),u.removeChars(N,E),delete this.__dragStartSelection}u._reNewline.test(b)&&(u._reNewline.test(u._text[m])||m===u._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=u,u.insertChars(a,y,m),p.setActiveObject(u),u.enterEditing(i),u.selectionStart=Math.min(m+C,u._text.length),u.selectionEnd=Math.min(u.selectionStart+a.length,u._text.length),u.hiddenTextarea.value=u.text,u._updateTextarea(),u.hiddenTextarea.focus(),u.fire(ef,{index:m+C,action:"drop"}),p.fire("text:changed",{target:u}),p.contextTopDirty=!0,p.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const s=this.target,a=this.target.canvas,{selectionStart:u,selectionEnd:p}=this.__dragStartSelection,m=((i=t.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||Ln;m===Ln?(s.selectionStart=u,s.selectionEnd=p,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),m==="move"&&(s.removeChars(u,p),s.selectionStart=s.selectionEnd=u,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(ef,{index:u,action:"dragend"}),a.fire("text:changed",{target:s}),a.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const px=/[ \n\.,;!\?\-]/;class cT extends ln{constructor(){super(...arguments),ye(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:i,delay:s,onComplete:a}=e;return r0({startValue:this._currentCursorOpacity,endValue:t,duration:i,delay:s,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:u=>{this._currentCursorOpacity=u,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,i=e-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i--;for(;/\S/.test(this._text[i])&&i>-1;)t++,i--;return e-t}findWordBoundaryRight(e){let t=0,i=e;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t}findLineBoundaryLeft(e){let t=0,i=e-1;for(;!/\n/.test(this._text[i])&&i>-1;)t++,i--;return e-t}findLineBoundaryRight(e){let t=0,i=e;for(;!/\n/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t}searchWordBoundary(e,t){const i=this._text;let s=e>0&&this._reSpace.test(i[e])&&(t===-1||!Up.test(i[e-1]))?e-1:e,a=i[s];for(;s>0&&s<i.length&&!px.test(a);)s+=t,a=i[s];return t===-1&&px.test(a)&&s++,s}selectWord(e){e=e??this.selectionStart;const t=this.searchWordBoundary(e,-1),i=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e??this.selectionStart;const t=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Vs(t).activeElement!==t&&t.focus();const i=this.getSelectionStartFromPointer(e),s=this.selectionStart,a=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&s!==a||s!==i&&a!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,i){const s=i.slice(0,e),a=this.graphemeSplit(s).length;if(e===t)return{selectionStart:a,selectionEnd:a};const u=i.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(u).length}}fromGraphemeToStringSelection(e,t,i){const s=i.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+i.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){const{hiddenTextarea:e,direction:t,textAlign:i,inCompositionMode:s}=this;if(!e)return;const a=i!==hr?i.replace("justify-",""):t===lo?ni:Ii,u=this.getPositionByOrigin(a,"top");this.cursorOffsetCache={},this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setPositionByOrigin(u,a,"top"),this.setCoords();const p=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=p.selectionEnd,s||(this.selectionStart=p.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),i=this.get2DCursorLocation(e),s=i.lineIndex,a=i.charIndex,u=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,p=t.leftOffset,m=this.getCanvasRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/m,C=y.height/m,N=b-u,E=C-u,V=new ke(t.left+p,t.top+t.topOffset+u).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ke(y.clientWidth/b,y.clientHeight/C));return V.x<0&&(V.x=0),V.x>N&&(V.x=N),V.y<0&&(V.y=0),V.y>E&&(V.y=E),V.x+=this.canvas._offset.left,V.y+=this.canvas._offset.top,{left:`${V.x}px`,top:`${V.y}px`,fontSize:`${u}px`,charHeight:u}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}exitEditingImpl(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(tf),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:u}=this.get2DCursorLocation(t,!0);if(i!==a){if(this.styles[i])for(let p=s;p<this._unwrappedTextLines[i].length;p++)delete this.styles[i][p];if(this.styles[a])for(let p=u;p<this._unwrappedTextLines[a].length;p++){const m=this.styles[a][p];m&&(this.styles[i]||(this.styles[i]={}),this.styles[i][s+p-u]=m)}for(let p=i+1;p<=a;p++)delete this.styles[p];this.shiftLineStyles(a,i-a)}else if(this.styles[i]){const p=this.styles[i],m=u-s;for(let y=s;y<u;y++)delete p[y];for(const y in this.styles[i]){const b=parseInt(y,10);b>=u&&(p[b-m]=p[y],delete p[y])}}}shiftLineStyles(e,t){const i=Object.assign({},this.styles);for(const s in this.styles){const a=parseInt(s,10);a>e&&(this.styles[a+t]=i[a],i[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,i,s){const a={},u=this._unwrappedTextLines[e].length,p=u===t;let m=!1;i||(i=1),this.shiftLineStyles(e,i);const y=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const C in this.styles[e]){const N=parseInt(C,10);N>=t&&(m=!0,a[N-t]=this.styles[e][C],p&&t===0||delete this.styles[e][C])}let b=!1;for(m&&!p&&(this.styles[e+i]=a,b=!0),(b||u>t)&&i--;i>0;)s&&s[i-1]?this.styles[e+i]={0:{...s[i-1]}}:y?this.styles[e+i]={0:{...y}}:delete this.styles[e+i],i--;this._forceClearCache=!0}insertCharStyleObject(e,t,i,s){this.styles||(this.styles={});const a=this.styles[e],u=a?{...a}:{};i||(i=1);for(const m in u){const y=parseInt(m,10);y>=t&&(a[y+i]=u[y],u[y-i]||delete a[y])}if(this._forceClearCache=!0,s){for(;i--;)Object.keys(s[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+i]={...s[i]});return}if(!a)return;const p=a[t?t-1:1];for(;p&&i--;)this.styles[e][t+i]={...p}}insertNewStyleBlock(e,t,i){const s=this.get2DCursorLocation(t,!0),a=[0];let u,p=0;for(let m=0;m<e.length;m++)e[m]===`
`?(p++,a[p]=0):a[p]++;for(a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],i),i=i&&i.slice(a[0]+1)),p&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],p),u=1;u<p;u++)a[u]>0?this.insertCharStyleObject(s.lineIndex+u,0,a[u],i):i&&this.styles[s.lineIndex+u]&&i[0]&&(this.styles[s.lineIndex+u][0]=i[0]),i=i&&i.slice(a[u]+1);a[u]>0&&this.insertCharStyleObject(s.lineIndex+u,0,a[u],i)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;s>i&&this.removeStyleFromTo(i,s);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,i,t),this._text=[...this._text.slice(0,i),...a,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,i){i<=e?(t===e?this._selectionDirection=ni:this._selectionDirection===Ii&&(this._selectionDirection=ni,this.selectionEnd=e),this.selectionStart=i):i>e&&i<t?this._selectionDirection===Ii?this.selectionEnd=i:this.selectionStart=i:(t===e?this._selectionDirection=Ii:this._selectionDirection===ni&&(this._selectionDirection=Ii,this.selectionStart=t),this.selectionEnd=i)}}class uT extends cT{initHiddenTextarea(){const e=this.canvas&&Vs(this.canvas.getElement())||bo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(u=>{let[p,m]=u;return t.setAttribute(p,m)});const{top:i,left:s,fontSize:a}=this._calcTextareaPosition();t.style.cssText=`position: absolute; top: ${i}; left: ${s}; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ${a};`,(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(u=>{let[p,m]=u;return t.addEventListener(p,this[m].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:i,selectionStart:s,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const u=()=>{this.updateFromTextArea(),this.fire(ef),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void u();const p=this._splitTextIntoLines(i).graphemeText,m=this._text.length,y=p.length,b=this.selectionStart,C=this.selectionEnd,N=b!==C;let E,V,L,ee,G=y-m;const te=this.fromStringToGraphemeSelection(s,a,i),ne=b>te.selectionStart;N?(V=this._text.slice(b,C),G+=C-b):y<m&&(V=ne?this._text.slice(C+G,C):this._text.slice(b,b-G));const de=p.slice(te.selectionEnd-G,te.selectionEnd);if(V&&V.length&&(de.length&&(E=this.getSelectionStyles(b,b+1,!1),E=de.map(()=>E[0])),N?(L=b,ee=C):ne?(L=C-V.length,ee=C):(L=C,ee=C+V.length),this.removeStyleFromTo(L,ee)),de.length){const{copyPasteData:be}=Gs();t&&de.join("")===be.copiedText&&!qt.disableStyleCopyPaste&&(E=be.copiedTextStyle),this.insertNewStyleBlock(de,b,E)}u()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:i,selectionEnd:s}=t;this.compositionStart=i,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Gs();e.copiedText=this.getSelectedText(),qt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let i,s=this._getLineLeftOffset(e);return t>0&&(i=this.__charBounds[e][t-1],s+=i.left+i.width),s}getDownCursorOffset(e,t){const i=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(i),a=s.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-i;const u=s.charIndex,p=this._getWidthBeforeCursor(a,u),m=this._getIndexOnLine(a+1,p);return this._textLines[a].slice(u).length+m+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const i=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(i),a=s.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-i;const u=s.charIndex,p=this._getWidthBeforeCursor(a,u),m=this._getIndexOnLine(a-1,p),y=this._textLines[a].slice(0,u),b=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+m-y.length+(1-b)}_getIndexOnLine(e,t){const i=this._textLines[e];let s,a,u=this._getLineLeftOffset(e),p=0;for(let m=0,y=i.length;m<y;m++)if(s=this.__charBounds[e][m].width,u+=s,u>t){a=!0;const b=u-s,C=u,N=Math.abs(b-t);p=Math.abs(C-t)<N?m:m-1;break}return a||(p=i.length-1),p}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const i=this[`get${e}CursorOffset`](t,this._selectionDirection===Ii);if(t.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const s=this.text.length;this.selectionStart=yo(0,this.selectionStart,s),this.selectionEnd=yo(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===ni?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,i){let s;if(e.altKey)s=this[`findWordBoundary${i}`](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=i==="Left"?-1:1,!0;s=this[`findLineBoundary${i}`](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=ni,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Ii&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ni,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const i=`moveCursor${e}${t.shiftKey?"WithShift":"WithoutShift"}`;this._currentCursorOpacity=1,this[i](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===ni&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ii,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Ii,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const mx=o=>!!o.button;class hT extends uT{constructor(){super(...arguments),ye(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new lT(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:i}=e;this.canvas&&this.editable&&!mx(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),i&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=i||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:i}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||mx(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(i,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform($n(this.calcTransformMatrix())).add(new ke(-this._getLeftOffset(),-this._getTopOffset()));let i=0,s=0,a=0;for(let y=0;y<this._textLines.length&&i<=t.y;y++)i+=this.getHeightOfLine(y),a=y,y>0&&(s+=this._textLines[y-1].length+this.missingNewlineOffset(y-1));let u=Math.abs(this._getLineLeftOffset(a));const p=this._textLines[a].length,m=this.__charBounds[a];for(let y=0;y<p;y++){const b=u+m[y].kernedWidth;if(t.x<=b){Math.abs(t.x-b)<=Math.abs(t.x-u)&&s++;break}u=b,s++}return Math.min(this.flipX?p-s:s,this._text.length)}}const jh="moveCursorUp",Mh="moveCursorDown",Dh="moveCursorLeft",Nh="moveCursorRight",Rh="exitEditing",vx=(o,e)=>{const t=e.getRetinaScaling();o.setTransform(t,0,0,t,0,0);const i=e.viewportTransform;o.transform(i[0],i[1],i[2],i[3],i[4],i[5])},fT={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Rh,27:Rh,33:jh,34:Mh,35:Nh,36:Dh,37:Dh,38:jh,39:Nh,40:Mh},keysMapRtl:{9:Rh,27:Rh,33:jh,34:Mh,35:Dh,36:Nh,37:Nh,38:jh,39:Dh,40:Mh},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"},_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1};class dr extends hT{static getDefaults(){return{...super.getDefaults(),...dr.ownDefaults}}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,{...dr.ownDefaults,...t}),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof iu&&this.canvas.textEditingManager.remove(this),t instanceof iu&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,i)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,i)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(e);return this.isEditing=t,i}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),i=this.findAncestorsWithClipPath(),s=i.length>0;let a,u=e;if(s){a=Jn(e.canvas),u=a.getContext("2d"),vx(u,this.canvas);const p=this.calcTransformMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(u,t):this.renderCursor(u,t),s)for(const p of i){const m=p.clipPath,y=Jn(e.canvas),b=y.getContext("2d");if(vx(b,this.canvas),!m.absolutePositioned){const C=p.calcTransformMatrix();b.transform(C[0],C[1],C[2],C[3],C[4],C[5])}m.transform(b),m.drawObject(b,!0,{}),this.drawClipPathOnCache(u,m,y)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),s=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:i,top:s,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,i=0;const{charIndex:s,lineIndex:a}=this.get2DCursorLocation(e),{textAlign:u,direction:p}=this;for(let C=0;C<a;C++)t+=this.getHeightOfLine(C);const m=this._getLineLeftOffset(a),y=this.__charBounds[a][s];y&&(i=y.left),this.charSpacing!==0&&s===this._textLines[a].length&&(i-=this._getWidthOfCharSpacing());let b=m+(i>0?i:0);return p===Hr&&(u===Ii||u===hr||u===Wc?b*=-1:u===ni||u===lf?b=m-(i>0?i:0):u!==jt&&u!==Zc||(b=m-(i>0?i:0))),{top:t,left:b}}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const i=this.get2DCursorLocation(e),s=i.lineIndex,a=i.charIndex>0?i.charIndex-1:0,u=this.getValueOfPropertyAt(s,a,"fontSize"),p=this.getObjectScaling().x*this.canvas.getZoom(),m=this.cursorWidth/p,y=this.getValueOfPropertyAt(s,a,"deltaY"),b=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-u*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-m/2,top:b+t.top+y,width:m,height:u}}_renderCursor(e,t,i){const{color:s,opacity:a,left:u,top:p,width:m,height:y}=this.getCursorRenderingData(i,t);e.fillStyle=s,e.globalAlpha=a,e.fillRect(u,p,m,y)}renderSelection(e,t){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,i,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,i){const{textAlign:s,direction:a}=this,u=t.selectionStart,p=t.selectionEnd,m=s.includes(hr),y=this.get2DCursorLocation(u),b=this.get2DCursorLocation(p),C=y.lineIndex,N=b.lineIndex,E=y.charIndex<0?0:y.charIndex,V=b.charIndex<0?0:b.charIndex;for(let L=C;L<=N;L++){const ee=this._getLineLeftOffset(L)||0;let G=this.getHeightOfLine(L),te=0,ne=0,de=0;if(L===C&&(ne=this.__charBounds[C][E].left),L>=C&&L<N)de=m&&!this.isEndOfWrapping(L)?this.width:this.getLineWidth(L)||5;else if(L===N)if(V===0)de=this.__charBounds[N][V].left;else{const Be=this._getWidthOfCharSpacing();de=this.__charBounds[N][V-1].left+this.__charBounds[N][V-1].width-Be}te=G,(this.lineHeight<1||L===N&&this.lineHeight>1)&&(G/=this.lineHeight);let be=i.left+ee+ne,I=G,Ee=0;const Ye=de-ne;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",I=1,Ee=G):e.fillStyle=this.selectionColor,a===Hr&&(s===Ii||s===hr||s===Wc?be=this.width-be-Ye:s===ni||s===lf?be=i.left+ee-de:s!==jt&&s!==Zc||(be=i.left+ee-de)),e.fillRect(be,i.top+i.topOffset+Ee,Ye,I),i.topOffset+=te}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,sn)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}ye(dr,"ownDefaults",fT),ye(dr,"type","IText"),ht.setClass(dr),ht.setClass(dr,"i-text");class gr extends dr{static getDefaults(){return{...super.getDefaults(),...gr.ownDefaults}}constructor(e,t){super(e,{...gr.ownDefaults,...t})}static createControls(){return{controls:f_()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(hr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,i=0,s=0;const a={};for(let u=0;u<e.graphemeLines.length;u++)e.graphemeText[s]===`
`&&u>0?(i=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&u>0&&(i++,s++),a[u]={line:t,offset:i},s+=e.graphemeLines[u].length,i+=e.graphemeLines[u].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];i&&(t=i.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,i=0,s=e+1,a=!1;const u=this._styleMap[e],p=this._styleMap[e+1];u&&(e=u.line,i=u.offset),p&&(s=p.line,a=s===e,t=p.offset);const m=e===void 0?this.styles:{line:this.styles[e]};for(const y in m)for(const b in m[y]){const C=parseInt(b,10);if(C>=i&&(!a||C<t))for(const N in m[y][b])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[e];if(!i)return{};e=i.line,t=i.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,i){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,i)}_deleteStyleDeclaration(e,t){const i=this._styleMap[e];super._deleteStyleDeclaration(i.line,i.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const i=this.getGraphemeDataForRender(e),s=[];for(let a=0;a<i.wordsData.length;a++)s.push(...this._wrapLine(a,t,i));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,i=t?"":" ";let s=0;return{wordsData:e.map((a,u)=>{let p=0;const m=t?this.graphemeSplit(a):this.wordSplit(a);return m.length===0?[{word:[],width:0}]:m.map(y=>{const b=t?[y]:this.graphemeSplit(y),C=this._measureWord(b,u,p);return s=Math.max(C,s),p+=b.length+i.length,{word:b,width:C}})}),largestWordWidth:s}}_measureWord(e,t){let i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let u=0,p=e.length;u<p;u++)a+=this._getGraphemeBox(e[u],t,u+s,i,!0).kernedWidth,i=e[u];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,i){let{largestWordWidth:s,wordsData:a}=i,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const p=this._getWidthOfCharSpacing(),m=this.splitByGrapheme,y=[],b=m?"":" ";let C=0,N=[],E=0,V=0,L=!0;t-=u;const ee=Math.max(t,s,this.dynamicMinWidth),G=a[e];let te;for(E=0,te=0;te<G.length;te++){const{word:ne,width:de}=G[te];E+=ne.length,C+=V+de-p,C>ee&&!L?(y.push(N),N=[],C=de,L=!0):C+=p,L||m||N.push(b),N=N.concat(ne),V=m?0:this._measureWord([b],e,E),E++,L=!1}return te&&y.push(N),s+u>this.dynamicMinWidth&&(this.dynamicMinWidth=s-p+u),y}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),i=this._wrapText(t.lines,this.width),s=new Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[a].join("");return t.lines=s,t.graphemeLines=i,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const i=parseInt(t,10);if(this._textLines[i]){const s=this._styleMap[t].line;e.set(`${s}`,!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}ye(gr,"type","Textbox"),ye(gr,"textLayoutProperties",[...dr.textLayoutProperties,"width"]),ye(gr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ht.setClass(gr);class kp extends hu{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:i}=e,{clipPath:s,group:a}=i;if(!s||!this.shouldPerformLayout(e))return;const{width:u,height:p}=pr(__(i,s)),m=new ke(u,p);if(s.absolutePositioned)return{center:Kr(s.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:m};{const y=s.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:b=new ke,correction:C=new ke}=this.calcBoundingBox(t,e)||{};return{center:b.add(y),correction:C.subtract(y),size:m}}return{center:i.getRelativeCenterPoint().add(y),size:m}}}}ye(kp,"type","clip-path"),ht.setClass(kp);class Ap extends hu{getInitialSize(e,t){let{target:i}=e,{size:s}=t;return new ke(i.width||s.x,i.height||s.y)}}ye(Ap,"type","fixed"),ht.setClass(Ap);class dT extends wl{subscribeTargets(e){const t=e.target;e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{i.layoutManager.subscribeTargets({target:i,targets:[t]})})}unsubscribeTargets(e){const t=e.target,i=t.getObjects();e.targets.reduce((s,a)=>(a.parent&&s.add(a.parent),s),new Set).forEach(s=>{!i.some(a=>a.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class us extends Wi{static getDefaults(){return{...super.getDefaults(),...us.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,us.ownDefaults),this.setOptions(t);const{left:i,top:s,layoutManager:a}=t;this.groupInit(e,{left:i,top:s,layoutManager:a??new dT})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const a=this._objects.findIndex(p=>p.isInFrontOf(s)),u=a===-1?this.size():a;this.insertAt(u,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Zr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const i=new Set;t.forEach(s=>{const{parent:a}=s;a&&i.add(a)}),e===h0?i.forEach(s=>{s._onAfterObjectsChange(uf,t)}):i.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return`#<ActiveSelection: (${this.complexity()})>`}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,i){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s={hasControls:!1,...i,forActiveSelection:!0};for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,s);super._renderControls(e,t),e.restore()}}ye(us,"type","ActiveSelection"),ye(us,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ht.setClass(us),ht.setClass(us,"activeSelection");class K_{constructor(){ye(this,"resources",{})}applyFilters(e,t,i,s,a){const u=a.getContext("2d",{willReadFrequently:!0,desynchronized:!0});if(!u)return;u.drawImage(t,0,0,i,s);const p={sourceWidth:i,sourceHeight:s,imageData:u.getImageData(0,0,i,s),originalEl:t,originalImageData:u.getImageData(0,0,i,s),canvasEl:a,ctx:u,filterBackend:this};e.forEach(y=>{y.applyTo(p)});const{imageData:m}=p;return m.width===i&&m.height===s||(a.width=m.width,a.height=m.height),u.putImageData(m,0,0),p}}class nu{constructor(){let{tileSize:e=qt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ye(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),ye(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const i=Jn({width:e,height:t}),s=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=i,this.gl=s)}applyFilters(e,t,i,s,a,u){const p=this.gl,m=a.getContext("2d");if(!p||!m)return;let y;u&&(y=this.getCachedTexture(u,t));const b={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:i,sourceHeight:s,destinationWidth:i,destinationHeight:s,context:p,sourceTexture:this.createTexture(p,i,s,y?void 0:t),targetTexture:this.createTexture(p,i,s),originalTexture:y||this.createTexture(p,i,s,y?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},C=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,C),e.forEach(N=>{N&&N.applyTo(b)}),(function(N){const E=N.targetCanvas,V=E.width,L=E.height,ee=N.destinationWidth,G=N.destinationHeight;V===ee&&L===G||(E.width=ee,E.height=G)})(b),this.copyGLTo2D(p,b),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(b.sourceTexture),p.deleteTexture(b.targetTexture),p.deleteFramebuffer(C),m.setTransform(1,0,0,1,0,0),b}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,i,s,a){const{NEAREST:u,TEXTURE_2D:p,RGBA:m,UNSIGNED_BYTE:y,CLAMP_TO_EDGE:b,TEXTURE_MAG_FILTER:C,TEXTURE_MIN_FILTER:N,TEXTURE_WRAP_S:E,TEXTURE_WRAP_T:V}=e,L=e.createTexture();return e.bindTexture(p,L),e.texParameteri(p,C,a||u),e.texParameteri(p,N,a||u),e.texParameteri(p,E,b),e.texParameteri(p,V,b),s?e.texImage2D(p,0,m,m,y,s):e.texImage2D(p,0,m,t,i,0,m,y,null),L}getCachedTexture(e,t,i){const{textureCache:s}=this;if(s[e])return s[e];{const a=this.createTexture(this.gl,t.width,t.height,t,i);return a&&(s[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const i=e.canvas,s=t.targetCanvas,a=s.getContext("2d");if(!a)return;a.translate(0,s.height),a.scale(1,-1);const u=i.height-s.height;a.drawImage(i,0,u,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const i=t.targetCanvas.getContext("2d"),s=t.destinationWidth,a=t.destinationHeight,u=s*a*4;if(!i)return;const p=new Uint8Array(this.imageBuffer,0,u),m=new Uint8ClampedArray(this.imageBuffer,0,u);e.readPixels(0,0,s,a,e.RGBA,e.UNSIGNED_BYTE,p);const y=new ImageData(m,s,a);i.putImageData(y,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const i=e.getExtension("WEBGL_debug_renderer_info");if(i){const s=e.getParameter(i.UNMASKED_RENDERER_WEBGL),a=e.getParameter(i.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Gh;function Q_(){const{WebGLProbe:o}=Gs();return o.queryWebGL(Es()),qt.enableGLFiltering&&o.isSupported(qt.textureSize)?new nu({tileSize:qt.textureSize}):new K_}function qh(){return!Gh&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Gh=Q_()),Gh}function gT(o){Gh=o}const J_=["cropX","cropY"];class cn extends un{static getDefaults(){return{...super.getDefaults(),...cn.ownDefaults}}constructor(e,t){super(),ye(this,"_lastScaleX",1),ye(this,"_lastScaleY",1),ye(this,"_filterScalingX",1),ye(this,"_filterScalingY",1),this.filters=[],Object.assign(this,cn.ownDefaults),this.setOptions(t),this.cacheKey=`texture${Ia()}`,this.setElement(typeof e=="string"?(this.canvas&&Vs(this.canvas.getElement())||bo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._element=e,this._originalElement=e,this._setWidthHeight(t),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=qh(!1);t instanceof nu&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Gs().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,-i),e.lineTo(t,-i),e.lineTo(t,i),e.lineTo(-t,i),e.lineTo(-t,-i),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(i=>{i&&t.push(i.toObject())}),{...super.toObject([...J_,...e]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,i=-this.width/2,s=-this.height/2;let a=[],u=[],p="",m="";if(!t)return[];if(this.hasCrop()){const y=Ia();a.push('<clipPath id="imageCrop_'+y+`">
`,'	<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(m=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",`xlink:href="${this.getSvgSrc(!0)}" x="${i-this.cropX}" y="${s-this.cropY}" width="${t.width||t.naturalWidth}" height="${t.height||t.naturalHeight}"${m}${p}></image>
`),this.stroke||this.strokeDashArray){const y=this.fill;this.fill=null,u=[`	<rect x="${i}" y="${s}" width="${this.width}" height="${this.height}" style="${this.getSvgStyles()}" />
`],this.fill=y}return a=this.paintFirst!==sn?a.concat(u,e):a.concat(e,u),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qc(e,{crossOrigin:t,signal:i}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return`#<Image: { src: "${this.getSrc()}" }>`}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),s=i.x,a=i.y,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&a>t)return this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=a);const p=Jn(u),{width:m,height:y}=u;this._element=p,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=a,qh().applyFilters([e],u,m,y,this._element),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture(`${this.cacheKey}_filtered`),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,i=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=Jn({width:i,height:s});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,s),this._lastScaleX=1,this._lastScaleY=1);qh().applyFilters(e,this._originalElement,i,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const i=this._filterScalingX,s=this._filterScalingY,a=this.width,u=this.height,p=Math.max(this.cropX,0),m=Math.max(this.cropY,0),y=t.naturalWidth||t.width,b=t.naturalHeight||t.height,C=p*i,N=m*s,E=Math.min(a*i,y-C),V=Math.min(u*s,b-N),L=-a/2,ee=-u/2,G=Math.min(a,y/i-p),te=Math.min(u,b/s-m);t&&e.drawImage(t,C,N,E,V,L,ee,G,te)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=e||i.width,this.height=t||i.height}parsePreserveAspectRatioAttribute(){const e=n0(this.preserveAspectRatio||""),t=this.width,i=this.height,s={width:t,height:i};let a,u=this._element.width,p=this._element.height,m=1,y=1,b=0,C=0,N=0,E=0;return!e||e.alignX===Ln&&e.alignY===Ln?(m=t/u,y=i/p):(e.meetOrSlice==="meet"&&(m=y=w_(this._element,s),a=(t-u*m)/2,e.alignX==="Min"&&(b=-a),e.alignX==="Max"&&(b=a),a=(i-p*y)/2,e.alignY==="Min"&&(C=-a),e.alignY==="Max"&&(C=a)),e.meetOrSlice==="slice"&&(m=y=C_(this._element,s),a=u-t/m,e.alignX==="Mid"&&(N=a/2),e.alignX==="Max"&&(N=a),a=p-i/y,e.alignY==="Mid"&&(E=a/2),e.alignY==="Max"&&(E=a),u=t/m,p=i/y)),{width:u,height:p,scaleX:m,scaleY:y,offsetLeft:b,offsetTop:C,cropX:N,cropY:E}}static fromObject(e,t){let{filters:i,resizeFilter:s,src:a,crossOrigin:u,type:p,...m}=e;return Promise.all([qc(a,{...t,crossOrigin:u}),i&&xl(i,t),s?xl([s],t):[],cu(m,t)]).then(y=>{let[b,C=[],[N],E={}]=y;return new this(b,{...m,src:a,filters:C,resizeFilter:N,...E})})}static fromURL(e){let{crossOrigin:t=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return qc(e,{crossOrigin:t,signal:i}).then(a=>new this(a,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const s=ea(e,this.ATTRIBUTE_NAMES,i);return this.fromURL(s["xlink:href"]||s.href,t,s).catch(a=>(Zr("log","Unable to parse Image",a),null))}}function tp(o){if(!iC.test(o.nodeName))return{};const e=o.getAttribute("viewBox");let t,i,s=1,a=1,u=0,p=0;const m=o.getAttribute("width"),y=o.getAttribute("height"),b=o.getAttribute("x")||0,C=o.getAttribute("y")||0,N=!(e&&nx.test(e)),E=!m||!y||m==="100%"||y==="100%";let V="",L=0,ee=0;if(N&&(b||C)&&o.parentNode&&o.parentNode.nodeName!=="#document"&&(V=" translate("+Dn(b||"0")+" "+Dn(C||"0")+") ",t=(o.getAttribute("transform")||"")+V,o.setAttribute("transform",t),o.removeAttribute("x"),o.removeAttribute("y")),N&&E)return{width:0,height:0};const G={width:0,height:0};if(N)return G.width=Dn(m),G.height=Dn(y),G;const te=e.match(nx);u=-parseFloat(te[1]),p=-parseFloat(te[2]);const ne=parseFloat(te[3]),de=parseFloat(te[4]);G.minX=u,G.minY=p,G.viewBoxWidth=ne,G.viewBoxHeight=de,E?(G.width=ne,G.height=de):(G.width=Dn(m),G.height=Dn(y),s=G.width/ne,a=G.height/de);const be=n0(o.getAttribute("preserveAspectRatio")||"");if(be.alignX!==Ln&&(be.meetOrSlice==="meet"&&(a=s=s>a?a:s),be.meetOrSlice==="slice"&&(a=s=s>a?s:a),L=G.width-ne*s,ee=G.height-de*s,be.alignX==="Mid"&&(L/=2),be.alignY==="Mid"&&(ee/=2),be.alignX==="Min"&&(L=0),be.alignY==="Min"&&(ee=0)),s===1&&a===1&&u===0&&p===0&&b===0&&C===0)return G;if((b||C)&&o.parentNode.nodeName!=="#document"&&(V=" translate("+Dn(b||"0")+" "+Dn(C||"0")+") "),t=V+" matrix("+s+" 0 0 "+a+" "+(u*s+L)+" "+(p*a+ee)+") ",o.nodeName==="svg"){for(i=o.ownerDocument.createElementNS(pp,"g");o.firstChild;)i.appendChild(o.firstChild);o.appendChild(i)}else i=o,i.removeAttribute("x"),i.removeAttribute("y"),t=i.getAttribute("transform")+t;return i.setAttribute("transform",t),G}ye(cn,"type","Image"),ye(cn,"cacheProperties",[...Qr,...J_]),ye(cn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),ye(cn,"ATTRIBUTE_NAMES",[...Ha,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ht.setClass(cn),ht.setSVGClass(cn);const gf=o=>o.tagName.replace("svg:",""),pT=kf(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function e1(o,e){let t,i,s,a,u=[];for(s=0,a=e.length;s<a;s++)t=e[s],i=o.getElementsByTagNameNS("http://www.w3.org/2000/svg",t),u=u.concat(Array.from(i));return u}const mT=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],ip="xlink:href";function t1(o,e){var t;const i=((t=e.getAttribute(ip))===null||t===void 0?void 0:t.slice(1))||"",s=o.getElementById(i);if(s&&s.getAttribute(ip)&&t1(o,s),s&&(mT.forEach(a=>{const u=s.getAttribute(a);!e.hasAttribute(a)&&u&&e.setAttribute(a,u)}),!e.children.length)){const a=s.cloneNode(!0);for(;a.firstChild;)e.appendChild(a.firstChild)}e.removeAttribute(ip)}const vT=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],yx=o=>ht.getSVGClass(gf(o).toLowerCase());class yT{constructor(e,t,i,s,a){this.elements=e,this.options=t,this.reviver=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s,this.clipPaths=a,this.gradientDefs=(function(u){const p=e1(u,vT),m={};let y=p.length;for(;y--;){const b=p[y];b.getAttribute("xlink:href")&&t1(u,b);const C=b.getAttribute("id");C&&(m[C]=b)}return m})(s),this.cssRules=(function(u){const p=u.getElementsByTagName("style"),m={};for(let y=0;y<p.length;y++){const b=(p[y].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");b.trim()!==""&&b.split("}").filter((C,N,E)=>E.length>1&&C.trim()).forEach(C=>{if((C.match(/{/g)||[]).length>1&&C.trim().startsWith("@"))return;const N=C.split("{"),E={},V=N[1].trim().split(";").filter(function(L){return L.trim()});for(let L=0;L<V.length;L++){const ee=V[L].split(":"),G=ee[0].trim(),te=ee[1].trim();E[G]=te}(C=N[0].trim()).split(",").forEach(L=>{(L=L.replace(/^svg/i,"").trim())!==""&&(m[L]={...m[L]||{},...E})})})}return m})(s)}parse(){return Promise.all(this.elements.map(e=>this.createObject(e)))}async createObject(e){const t=yx(e);if(t){const i=await t.fromElement(e,this.options,this.cssRules);return this.resolveGradient(i,e,sn),this.resolveGradient(i,e,Qn),i instanceof cn&&i._originalElement?Xh(i,i.parsePreserveAspectRatioAttribute()):Xh(i),await this.resolveClipPath(i,e),this.reviver&&this.reviver(e,i),i}return null}extractPropertyDefinition(e,t,i){const s=e[t],a=this.regexUrl;if(!a.test(s))return;a.lastIndex=0;const u=a.exec(s)[1];return a.lastIndex=0,i[u]}resolveGradient(e,t,i){const s=this.extractPropertyDefinition(e,i,this.gradientDefs);if(s){const a=t.getAttribute(i+"-opacity"),u=Ys.fromElement(s,e,{...this.options,opacity:a});e.set(i,u)}}async resolveClipPath(e,t,i){const s=this.extractPropertyDefinition(e,"clipPath",this.clipPaths);if(s){const a=$n(e.calcTransformMatrix()),u=s[0].parentElement;let p=t;for(;!i&&p.parentElement&&p.getAttribute("clip-path")!==e.clipPath;)p=p.parentElement;p.parentElement.appendChild(u);const m=cf(`${p.getAttribute("transform")||""} ${u.getAttribute("originalTransform")||""}`);u.setAttribute("transform",`matrix(${m.join(",")})`);const y=await Promise.all(s.map(te=>yx(te).fromElement(te,this.options,this.cssRules).then(ne=>(Xh(ne),ne.fillRule=ne.clipRule,delete ne.clipRule,ne)))),b=y.length===1?y[0]:new Wi(y),C=Mi(a,b.calcTransformMatrix());b.clipPath&&await this.resolveClipPath(b,p,u.getAttribute("clip-path")?p:void 0);const{scaleX:N,scaleY:E,angle:V,skewX:L,translateX:ee,translateY:G}=mo(C);b.set({flipX:!1,flipY:!1}),b.set({scaleX:N,scaleY:E,angle:V,skewX:L,skewY:0}),b.setPositionByOrigin(new ke(ee,G),jt,jt),e.clipPath=b}else delete e.clipPath}}const xx=o=>tC.test(gf(o));async function i1(o,e){let{crossOrigin:t,signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i&&i.aborted)return Zr("log",new yb("parseSVGDocument")),{objects:[],elements:[],options:{},allElements:[]};const s=o.documentElement;(function(b){const C=e1(b,["use","svg:use"]),N=["x","y","xlink:href","href","transform"];for(const E of C){const V=E.attributes,L={};for(const Be of V)Be.value&&(L[Be.name]=Be.value);const ee=(L["xlink:href"]||L.href||"").slice(1);if(ee==="")return;const G=b.getElementById(ee);if(G===null)return;let te=G.cloneNode(!0);const ne=te.attributes,de={};for(const Be of ne)Be.value&&(de[Be.name]=Be.value);const{x:be=0,y:I=0,transform:Ee=""}=L,Ye=`${Ee} ${de.transform||""} translate(${be}, ${I})`;if(tp(te),/^svg$/i.test(te.nodeName)){const Be=te.ownerDocument.createElementNS(pp,"g");Object.entries(de).forEach(ct=>{let[nt,et]=ct;return Be.setAttributeNS(pp,nt,et)}),Be.append(...te.childNodes),te=Be}for(const Be of V){if(!Be)continue;const{name:ct,value:nt}=Be;if(!N.includes(ct))if(ct==="style"){const et={};bp(nt,et),Object.entries(de).forEach(Ge=>{let[Mt,he]=Ge;et[Mt]=he}),bp(de.style||"",et);const ft=Object.entries(et).map(Ge=>Ge.join(":")).join(";");te.setAttribute(ct,ft)}else!de[ct]&&te.setAttribute(ct,nt)}te.setAttribute("transform",Ye),te.setAttribute("instantiated_by_use","1"),te.removeAttribute("id"),E.parentNode.replaceChild(te,E)}})(o);const a=Array.from(s.getElementsByTagName("*")),u={...tp(s),crossOrigin:t,signal:i},p=a.filter(b=>(tp(b),xx(b)&&!(function(C){let N=C;for(;N&&(N=N.parentElement);)if(N&&N.nodeName&&pT.test(gf(N))&&!N.getAttribute("instantiated_by_use"))return!0;return!1})(b)));if(!p||p&&!p.length)return{objects:[],elements:[],options:{},allElements:[],options:u,allElements:a};const m={};return a.filter(b=>gf(b)==="clipPath").forEach(b=>{b.setAttribute("originalTransform",b.getAttribute("transform")||"");const C=b.getAttribute("id");m[C]=Array.from(b.getElementsByTagName("*")).filter(N=>xx(N))}),{objects:await new yT(p,u,e,o,m).parse(),elements:p,options:u,allElements:a}}function go(o,e,t){return i1(new(ur()).DOMParser().parseFromString(o.trim(),"text/xml"),e,t)}function xT(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fetch(o.replace(/^\n\s*/,"").trim(),{signal:t.signal}).then(i=>{if(!i.ok)throw new Us(`HTTP error! status: ${i.status}`);return i.text()}).then(i=>go(i,e,t)).catch(()=>({objects:[],elements:[],options:{},allElements:[]}))}const fu=o=>o.webgl!==void 0,bT=(o,e)=>{const t=Jn({width:o,height:e}),i=Es().getContext("webgl"),s={imageBuffer:new ArrayBuffer(o*e*4)},a={destinationWidth:o,destinationHeight:e,targetCanvas:t};let u;u=ur().performance.now(),nu.prototype.copyGLTo2D.call(s,i,a);const p=ur().performance.now()-u;return u=ur().performance.now(),nu.prototype.copyGLTo2DPutImageData.call(s,i,a),p>ur().performance.now()-u},g0="precision highp float",_T=`
    ${g0};
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`,ST=new RegExp(g0,"g");class Zi{get type(){return this.constructor.type}constructor(){let{type:e,...t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return _T}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Gs();s!=="highp"&&(t=t.replace(ST,g0.replace("highp",s)));const a=e.createShader(e.VERTEX_SHADER),u=e.createShader(e.FRAGMENT_SHADER),p=e.createProgram();if(!a||!u||!p)throw new Us("Vertex, fragment shader or program creation error");if(e.shaderSource(a,i),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Us(`Vertex shader compile error for ${this.type}: ${e.getShaderInfoLog(a)}`);if(e.shaderSource(u,t),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS))throw new Us(`Fragment shader compile error for ${this.type}: ${e.getShaderInfoLog(u)}`);if(e.attachShader(p,a),e.attachShader(p,u),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS))throw new Us(`Shader link error for "${this.type}" ${e.getProgramInfoLog(p)}`);const m=this.getUniformLocations(e,p)||{};return m.uStepW=e.getUniformLocation(p,"uStepW"),m.uStepH=e.getUniformLocation(p,"uStepH"),{program:p,attributeLocations:this.getAttributeLocations(e,p),uniformLocations:m}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const i=this.constructor.uniformLocations,s={};for(let a=0;a<i.length;a++)s[i[a]]=e.getUniformLocation(t,i[a]);return s}sendAttributeData(e,t,i){const s=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const i=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===i&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,i,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){fu(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,i=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(i.program),this.sendAttributeData(t,i.attributeLocations,e.aPosition),t.uniform1f(i.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(i.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,i.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,i){e.activeTexture(i),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:i}=e,s=Jn({width:t,height:i});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return{type:this.type,...e.reduce((t,i)=>(t[i]=this[i],t),{})}}toJSON(){return this.toObject()}static async fromObject(e,t){let{type:i,...s}=e;return new this(s)}}ye(Zi,"type","BaseFilter"),ye(Zi,"uniformLocations",[]);const wT={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ec extends Zi{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          ${wT[this.mode]}
        }
      }
      `}applyTo2d(e){let{imageData:{data:t}}=e;const i=new ii(this.color).getSource(),s=this.alpha,a=i[0]*s,u=i[1]*s,p=i[2]*s,m=1-s;for(let y=0;y<t.length;y+=4){const b=t[y],C=t[y+1],N=t[y+2];let E,V,L;switch(this.mode){case"multiply":E=b*a/255,V=C*u/255,L=N*p/255;break;case"screen":E=255-(255-b)*(255-a)/255,V=255-(255-C)*(255-u)/255,L=255-(255-N)*(255-p)/255;break;case"add":E=b+a,V=C+u,L=N+p;break;case"difference":E=Math.abs(b-a),V=Math.abs(C-u),L=Math.abs(N-p);break;case"subtract":E=b-a,V=C-u,L=N-p;break;case"darken":E=Math.min(b,a),V=Math.min(C,u),L=Math.min(N,p);break;case"lighten":E=Math.max(b,a),V=Math.max(C,u),L=Math.max(N,p);break;case"overlay":E=a<128?2*b*a/255:255-2*(255-b)*(255-a)/255,V=u<128?2*C*u/255:255-2*(255-C)*(255-u)/255,L=p<128?2*N*p/255:255-2*(255-N)*(255-p)/255;break;case"exclusion":E=a+b-2*a*b/255,V=u+C-2*u*C/255,L=p+N-2*p*N/255;break;case"tint":E=a+b*m,V=u+C*m,L=p+N*m}t[y]=E,t[y+1]=V,t[y+2]=L}}sendUniformData(e,t){const i=new ii(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,e.uniform4fv(t.uColor,i)}}ye(Ec,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),ye(Ec,"type","BlendColor"),ye(Ec,"uniformLocations",["uColor"]),ht.setClass(Ec);const CT={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `};class jc extends Zi{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return CT[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,i=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,i,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:i}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/i,1]}applyTo2d(e){let{imageData:{data:t,width:i,height:s},filterBackend:{resources:a}}=e;const u=this.image;a.blendImage||(a.blendImage=Es());const p=a.blendImage,m=p.getContext("2d");p.width!==i||p.height!==s?(p.width=i,p.height=s):m.clearRect(0,0,i,s),m.setTransform(u.scaleX,0,0,u.scaleY,u.left,u.top),m.drawImage(u.getElement(),0,0,i,s);const y=m.getImageData(0,0,i,s).data;for(let b=0;b<t.length;b+=4){const C=t[b],N=t[b+1],E=t[b+2],V=t[b+3],L=y[b],ee=y[b+1],G=y[b+2],te=y[b+3];switch(this.mode){case"multiply":t[b]=C*L/255,t[b+1]=N*ee/255,t[b+2]=E*G/255,t[b+3]=V*te/255;break;case"mask":t[b+3]=te}}}sendUniformData(e,t){const i=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,i)}toObject(){return{...super.toObject(),image:this.image&&this.image.toObject()}}static async fromObject(e,t){let{type:i,image:s,...a}=e;return cn.fromObject(s,t).then(u=>new this({...a,image:u}))}}ye(jc,"type","BlendImage"),ye(jc,"defaults",{mode:"multiply",alpha:1}),ye(jc,"uniformLocations",["uTransformMatrix","uImage"]),ht.setClass(jc);class Mc extends Zi{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){fu(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:i,height:s}}=e;this.aspectRatio=i/s,this.horizontal=!0;let a=this.getBlurValue()*i;const u=new Uint8ClampedArray(t),p=15,m=4*i;for(let y=0;y<t.length;y+=4){let b=0,C=0,N=0,E=0,V=0;const L=y-y%m,ee=L+m;for(let G=-14;G<p;G++){const te=G/p,ne=4*Math.floor(a*te),de=1-Math.abs(te);let be=y+ne;be<L?be=L:be>ee&&(be=ee);const I=t[be+3]*de;b+=t[be]*I,C+=t[be+1]*I,N+=t[be+2]*I,E+=I,V+=de}u[y]=b/E,u[y+1]=C/E,u[y+2]=N/E,u[y+3]=E/V}this.horizontal=!1,a=this.getBlurValue()*s;for(let y=0;y<u.length;y+=4){let b=0,C=0,N=0,E=0,V=0;const L=y%m,ee=u.length-m+L;for(let G=-14;G<p;G++){const te=G/p,ne=Math.floor(a*te)*m,de=1-Math.abs(te);let be=y+ne;be<L?be=L:be>ee&&(be=ee);const I=u[be+3]*de;b+=u[be]*I,C+=u[be+1]*I,N+=u[be+2]*I,E+=I,V+=de}t[y]=b/E,t[y+1]=C/E,t[y+2]=N/E,t[y+3]=E/V}}sendUniformData(e,t){const i=this.chooseRightDelta();e.uniform2fv(t.uDelta,i)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:i}=this;return t?i>1&&(e=1/i):i<1&&(e=i),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}ye(Mc,"type","Blur"),ye(Mc,"defaults",{blur:0}),ye(Mc,"uniformLocations",["uDelta"]),ht.setClass(Mc);class Dc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const i=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=i,t[s+1]+=i,t[s+2]+=i}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}ye(Dc,"type","Brightness"),ye(Dc,"defaults",{brightness:0}),ye(Dc,"uniformLocations",["uBrightness"]),ht.setClass(Dc);const n1={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class po extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,i=this.matrix,s=this.colorsOnly;for(let a=0;a<t.length;a+=4){const u=t[a],p=t[a+1],m=t[a+2];if(t[a]=u*i[0]+p*i[1]+m*i[2]+255*i[4],t[a+1]=u*i[5]+p*i[6]+m*i[7]+255*i[9],t[a+2]=u*i[10]+p*i[11]+m*i[12]+255*i[14],!s){const y=t[a+3];t[a]+=y*i[3],t[a+1]+=y*i[8],t[a+2]+=y*i[13],t[a+3]=u*i[15]+p*i[16]+m*i[17]+y*i[18]+255*i[19]}}}sendUniformData(e,t){const i=this.matrix,s=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],a=[i[4],i[9],i[14],i[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,a)}toObject(){return{...super.toObject(),matrix:[...this.matrix]}}}function Co(o,e){var t;const i=(ye(t=class extends po{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",o),ye(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ht.setClass(i,o),i}ye(po,"type","ColorMatrix"),ye(po,"defaults",n1),ye(po,"uniformLocations",["uColorMatrix","uConstants"]),ht.setClass(po);const TT=Co("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),kT=Co("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),AT=Co("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),OT=Co("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),ET=Co("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),jT=Co("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),MT=Co("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Op extends Zi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){fu(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(i=>ht.getClass(i.type).fromObject(i,t))).then(i=>new this({subFilters:i}))}}ye(Op,"type","Composed"),ht.setClass(Op);class Nc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const i=Math.floor(255*this.contrast),s=259*(i+255)/(255*(259-i));for(let a=0;a<t.length;a+=4)t[a]=s*(t[a]-128)+128,t[a+1]=s*(t[a+1]-128)+128,t[a+2]=s*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}ye(Nc,"type","Contrast"),ye(Nc,"defaults",{contrast:0}),ye(Nc,"uniformLocations",["uContrast"]),ht.setClass(Nc);const DT={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Rc extends Zi{getCacheKey(){return`${this.type}_${Math.sqrt(this.matrix.length)}_${this.opaque?1:0}`}getFragmentSource(){return DT[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,i=t.data,s=this.matrix,a=Math.round(Math.sqrt(s.length)),u=Math.floor(a/2),p=t.width,m=t.height,y=e.ctx.createImageData(p,m),b=y.data,C=this.opaque?1:0;let N,E,V,L,ee,G,te,ne,de,be,I,Ee,Ye;for(I=0;I<m;I++)for(be=0;be<p;be++){for(ee=4*(I*p+be),N=0,E=0,V=0,L=0,Ye=0;Ye<a;Ye++)for(Ee=0;Ee<a;Ee++)te=I+Ye-u,G=be+Ee-u,te<0||te>=m||G<0||G>=p||(ne=4*(te*p+G),de=s[Ye*a+Ee],N+=i[ne]*de,E+=i[ne+1]*de,V+=i[ne+2]*de,C||(L+=i[ne+3]*de));b[ee]=N,b[ee+1]=E,b[ee+2]=V,b[ee+3]=C?i[ee+3]:L}e.imageData=y}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return{...super.toObject(),opaque:this.opaque,matrix:[...this.matrix]}}}ye(Rc,"type","Convolute"),ye(Rc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),ye(Rc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ht.setClass(Rc);const s1="Gamma";class Lc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const i=this.gamma,s=1/i[0],a=1/i[1],u=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const p=this.rgbValues;for(let m=0;m<256;m++)p.r[m]=255*Math.pow(m/255,s),p.g[m]=255*Math.pow(m/255,a),p.b[m]=255*Math.pow(m/255,u);for(let m=0;m<t.length;m+=4)t[m]=p.r[t[m]],t[m+1]=p.g[t[m+1]],t[m+2]=p.b[t[m+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:s1,gamma:this.gamma.concat()}}}ye(Lc,"type",s1),ye(Lc,"defaults",{gamma:[1,1,1]}),ye(Lc,"uniformLocations",["uGamma"]),ht.setClass(Lc);const NT={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Pc extends Zi{applyTo2d(e){let{imageData:{data:t}}=e;for(let i,s=0;s<t.length;s+=4){const a=t[s],u=t[s+1],p=t[s+2];switch(this.mode){case"average":i=(a+u+p)/3;break;case"lightness":i=(Math.min(a,u,p)+Math.max(a,u,p))/2;break;case"luminosity":i=.21*a+.72*u+.07*p}t[s+2]=t[s+1]=t[s]=i}}getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return NT[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}ye(Pc,"type","Grayscale"),ye(Pc,"defaults",{mode:"average"}),ye(Pc,"uniformLocations",["uMode"]),ht.setClass(Pc);const RT={...n1,rotation:0};class Wh extends po{calculateMatrix(){const e=this.rotation*Math.PI,t=Ws(e),i=Zs(e),s=1/3,a=Math.sqrt(s)*i,u=1-t;this.matrix=[t+u/3,s*u-a,s*u+a,0,0,s*u+a,t+s*u,s*u-a,0,0,s*u-a,s*u+a,t+s*u,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}ye(Wh,"type","HueRotation"),ye(Wh,"defaults",RT),ht.setClass(Wh);class Bc extends Zi{applyTo2d(e){let{imageData:{data:t}}=e;for(let i=0;i<t.length;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2],this.alpha&&(t[i+3]=255-t[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}ye(Bc,"type","Invert"),ye(Bc,"defaults",{alpha:!1,invert:!0}),ye(Bc,"uniformLocations",["uInvert","uAlpha"]),ht.setClass(Bc);class zc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const i=this.noise;for(let s=0;s<t.length;s+=4){const a=(.5-Math.random())*i;t[s]+=a,t[s+1]+=a,t[s+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}ye(zc,"type","Noise"),ye(zc,"defaults",{noise:0}),ye(zc,"uniformLocations",["uNoise","uSeed"]),ht.setClass(zc);class Ic extends Zi{applyTo2d(e){let{imageData:{data:t,width:i,height:s}}=e;for(let a=0;a<s;a+=this.blocksize)for(let u=0;u<i;u+=this.blocksize){const p=4*a*i+4*u,m=t[p],y=t[p+1],b=t[p+2],C=t[p+3];for(let N=a;N<Math.min(a+this.blocksize,s);N++)for(let E=u;E<Math.min(u+this.blocksize,i);E++){const V=4*N*i+4*E;t[V]=m,t[V+1]=y,t[V+2]=b,t[V+3]=C}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}ye(Ic,"type","Pixelate"),ye(Ic,"defaults",{blocksize:4}),ye(Ic,"uniformLocations",["uBlocksize"]),ht.setClass(Ic);class Fc extends Zi{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const i=255*this.distance,s=new ii(this.color).getSource(),a=[s[0]-i,s[1]-i,s[2]-i],u=[s[0]+i,s[1]+i,s[2]+i];for(let p=0;p<t.length;p+=4){const m=t[p],y=t[p+1],b=t[p+2];m>a[0]&&y>a[1]&&b>a[2]&&m<u[0]&&y<u[1]&&b<u[2]&&(t[p+3]=0)}}sendUniformData(e,t){const i=new ii(this.color).getSource(),s=this.distance,a=[0+i[0]/255-s,0+i[1]/255-s,0+i[2]/255-s,1],u=[i[0]/255+s,i[1]/255+s,i[2]/255+s,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,u)}}ye(Fc,"type","RemoveColor"),ye(Fc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),ye(Fc,"uniformLocations",["uLow","uHigh"]),ht.setClass(Fc);class Vc extends Zi{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return`${this.type}_${e}`}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,i=this.getFilterWindow(),s=new Array(i);for(let a=1;a<=i;a++)s[a-1]=e(a*t);return s}generateShader(e){const t=new Array(e);for(let i=1;i<=e;i++)t[i-1]=`${i}.0 * uDelta`;return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[${e}];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        ${t.map((i,s)=>`
              color += texture2D(uTexture, vTexCoord + ${i}) * uTaps[${s}] + texture2D(uTexture, vTexCoord - ${i}) * uTaps[${s}];
              sum += 2.0 * uTaps[${s}];
            `).join(`
`)}
        gl_FragColor = color / sum;
      }
    `}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){fu(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const i=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(i)/i}}applyTo2d(e){const t=e.imageData,i=this.scaleX,s=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/s;const a=t.width,u=t.height,p=Math.round(a*i),m=Math.round(u*s);let y;y=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,u,p,m):this.resizeType==="hermite"?this.hermiteFastResize(e,a,u,p,m):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,u,p,m):this.resizeType==="lanczos"?this.lanczosResize(e,a,u,p,m):new ImageData(p,m),e.imageData=y}sliceByTwo(e,t,i,s,a){const u=e.imageData,p=.5;let m=!1,y=!1,b=t*p,C=i*p;const N=e.filterBackend.resources;let E=0,V=0;const L=t;let ee=0;N.sliceByTwo||(N.sliceByTwo=Es());const G=N.sliceByTwo;(G.width<1.5*t||G.height<i)&&(G.width=1.5*t,G.height=i);const te=G.getContext("2d");for(te.clearRect(0,0,1.5*t,i),te.putImageData(u,0,0),s=Math.floor(s),a=Math.floor(a);!m||!y;)t=b,i=C,s<Math.floor(b*p)?b=Math.floor(b*p):(b=s,m=!0),a<Math.floor(C*p)?C=Math.floor(C*p):(C=a,y=!0),te.drawImage(G,E,V,t,i,L,ee,b,C),E=L,V=ee,ee+=C;return te.getImageData(E,V,s,a)}lanczosResize(e,t,i,s,a){const u=e.imageData.data,p=e.ctx.createImageData(s,a),m=p.data,y=this.lanczosCreate(this.lanczosLobes),b=this.rcpScaleX,C=this.rcpScaleY,N=2/this.rcpScaleX,E=2/this.rcpScaleY,V=Math.ceil(b*this.lanczosLobes/2),L=Math.ceil(C*this.lanczosLobes/2),ee={},G={x:0,y:0},te={x:0,y:0};return(function ne(de){let be,I,Ee,Ye,Be,ct,nt,et,ft,Ge,Mt;for(G.x=(de+.5)*b,te.x=Math.floor(G.x),be=0;be<a;be++){for(G.y=(be+.5)*C,te.y=Math.floor(G.y),Be=0,ct=0,nt=0,et=0,ft=0,I=te.x-V;I<=te.x+V;I++)if(!(I<0||I>=t)){Ge=Math.floor(1e3*Math.abs(I-G.x)),ee[Ge]||(ee[Ge]={});for(let he=te.y-L;he<=te.y+L;he++)he<0||he>=i||(Mt=Math.floor(1e3*Math.abs(he-G.y)),ee[Ge][Mt]||(ee[Ge][Mt]=y(Math.sqrt(Math.pow(Ge*N,2)+Math.pow(Mt*E,2))/1e3)),Ee=ee[Ge][Mt],Ee>0&&(Ye=4*(he*t+I),Be+=Ee,ct+=Ee*u[Ye],nt+=Ee*u[Ye+1],et+=Ee*u[Ye+2],ft+=Ee*u[Ye+3]))}Ye=4*(be*s+de),m[Ye]=ct/Be,m[Ye+1]=nt/Be,m[Ye+2]=et/Be,m[Ye+3]=ft/Be}return++de<s?ne(de):p})(0)}bilinearFiltering(e,t,i,s,a){let u,p,m,y,b,C,N,E,V,L,ee,G,te,ne=0;const de=this.rcpScaleX,be=this.rcpScaleY,I=4*(t-1),Ee=e.imageData.data,Ye=e.ctx.createImageData(s,a),Be=Ye.data;for(N=0;N<a;N++)for(E=0;E<s;E++)for(b=Math.floor(de*E),C=Math.floor(be*N),V=de*E-b,L=be*N-C,te=4*(C*t+b),ee=0;ee<4;ee++)u=Ee[te+ee],p=Ee[te+4+ee],m=Ee[te+I+ee],y=Ee[te+I+4+ee],G=u*(1-V)*(1-L)+p*V*(1-L)+m*L*(1-V)+y*V*L,Be[ne++]=G;return Ye}hermiteFastResize(e,t,i,s,a){const u=this.rcpScaleX,p=this.rcpScaleY,m=Math.ceil(u/2),y=Math.ceil(p/2),b=e.imageData.data,C=e.ctx.createImageData(s,a),N=C.data;for(let E=0;E<a;E++)for(let V=0;V<s;V++){const L=4*(V+E*s);let ee=0,G=0,te=0,ne=0,de=0,be=0,I=0;const Ee=(E+.5)*p;for(let Ye=Math.floor(E*p);Ye<(E+1)*p;Ye++){const Be=Math.abs(Ee-(Ye+.5))/y,ct=(V+.5)*u,nt=Be*Be;for(let et=Math.floor(V*u);et<(V+1)*u;et++){let ft=Math.abs(ct-(et+.5))/m;const Ge=Math.sqrt(nt+ft*ft);Ge>1&&Ge<-1||(ee=2*Ge*Ge*Ge-3*Ge*Ge+1,ee>0&&(ft=4*(et+Ye*t),I+=ee*b[ft+3],te+=ee,b[ft+3]<255&&(ee=ee*b[ft+3]/250),ne+=ee*b[ft],de+=ee*b[ft+1],be+=ee*b[ft+2],G+=ee))}}N[L]=ne/G,N[L+1]=de/G,N[L+2]=be/G,N[L+3]=I/te}return C}}ye(Vc,"type","Resize"),ye(Vc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),ye(Vc,"uniformLocations",["uDelta","uTaps"]),ht.setClass(Vc);class Uc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const i=-this.saturation;for(let s=0;s<t.length;s+=4){const a=t[s],u=t[s+1],p=t[s+2],m=Math.max(a,u,p);t[s]+=m!==a?(m-a)*i:0,t[s+1]+=m!==u?(m-u)*i:0,t[s+2]+=m!==p?(m-p)*i:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}ye(Uc,"type","Saturation"),ye(Uc,"defaults",{saturation:0}),ye(Uc,"uniformLocations",["uSaturation"]),ht.setClass(Uc);class Hc extends Zi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const i=-this.vibrance;for(let s=0;s<t.length;s+=4){const a=t[s],u=t[s+1],p=t[s+2],m=Math.max(a,u,p),y=(a+u+p)/3,b=2*Math.abs(m-y)/255*i;t[s]+=m!==a?(m-a)*b:0,t[s+1]+=m!==u?(m-u)*b:0,t[s+2]+=m!==p?(m-p)*b:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}ye(Hc,"type","Vibrance"),ye(Hc,"defaults",{vibrance:0}),ye(Hc,"uniformLocations",["uVibrance"]),ht.setClass(Hc);var Mn=Object.freeze({__proto__:null,BaseFilter:Zi,BlackWhite:MT,BlendColor:Ec,BlendImage:jc,Blur:Mc,Brightness:Dc,Brownie:TT,ColorMatrix:po,Composed:Op,Contrast:Nc,Convolute:Rc,Gamma:Lc,Grayscale:Pc,HueRotation:Wh,Invert:Bc,Kodachrome:AT,Noise:zc,Pixelate:Ic,Polaroid:ET,RemoveColor:Fc,Resize:Vc,Saturation:Uc,Sepia:jT,Technicolor:OT,Vibrance:Hc,Vintage:kT});const LT=Object.freeze(Object.defineProperty({__proto__:null,ActiveSelection:us,BaseBrush:Mf,BaseFabricObject:cr,Canvas:iu,Canvas2dFilterBackend:K_,CanvasDOMManager:N_,Circle:qi,CircleBrush:X_,ClipPathLayout:kp,Color:ii,Control:Wn,Ellipse:Fs,FabricImage:cn,FabricObject:un,FabricText:ln,FitContentLayout:ff,FixedLayout:Ap,Gradient:Ys,Group:Wi,IText:dr,Image:cn,InteractiveFabricObject:Sl,Intersection:ki,LayoutManager:wl,LayoutStrategy:hu,Line:cs,Object:un,Observable:Cb,Path:ji,Pattern:vl,PatternBrush:q_,PencilBrush:Cl,Point:ke,Polygon:Gr,Polyline:ks,Rect:wn,Shadow:Pn,SprayBrush:G_,StaticCanvas:wo,StaticCanvasDOMManager:Kp,Text:ln,Textbox:gr,Triangle:fr,WebGLFilterBackend:nu,cache:gl,classRegistry:ht,config:qt,controlsUtils:KC,createCollectionMixin:Xp,filters:Mn,getEnv:Gs,getFabricDocument:bo,getFabricWindow:ur,getFilterBackend:qh,iMatrix:Cn,initFilterBackend:Q_,isPutImageFaster:bT,isWebGLPipelineState:fu,loadSVGFromString:go,loadSVGFromURL:xT,parseSVGDocument:i1,runningAnimations:Jc,setEnv:Hw,setFilterBackend:gT,util:Ai,version:Jh},Symbol.toStringTag,{value:"Module"})),Fa={namespace:"app",separator:".",trimKeys:!0,expiry:!0};function PT(o){Fa.namespace=o}function r1(o){Fa.namespace=o}function BT(){return Fa.namespace}function zT(){return Fa}function IT(o){Fa.separator=o}function Df(){return Fa.separator}function FT(o){return`${Fa.namespace}${Fa.separator}${o}`}const VT="1.2.0";var p0={version:VT,createNamespace:PT,getCurrentNamespace:BT,switchNamespace:r1,get:zT,setSeparator:IT,getSeparator:Df,generateKey:FT};function UT(o){o&&r1(o)}function HT(o){try{return JSON.parse(o)}catch{return o}}function a1(o){return o===void 0}function o1(o){return o===null||o==="null"}function YT(o,e){if(o===0)return"0 B";const t=1024,i=["B","KB","MB"],s=Math.floor(Math.log(o)/Math.log(t));return(o/Math.pow(t,s)).toFixed(2)+" "+(e?i[s]:"")}function XT(o,e,t){e=e.toUpperCase();let i="";switch(e){case"B":i=o.toFixed(2);break;case"KB":i=(o/1024).toFixed(2);break;case"MB":i=(o/(1024*1024)).toFixed(2);break;default:return console.warn(`Unsupported format "${e}" provided. Falling back to auto-formatting.`),YT(o,t)}return t?`${i} ${e}`:i}var su={parse:HT,isUndefined:a1,isNull:o1,units:XT};function l1(o){return a1(o)||o1(o)}function GT(o,e=null){if(l1(o))return null;const t=p0.generateKey(o),i=this.storage.getItem(t);if(su.isNull(i))return e;try{let s=su.parse(i);return s.expire&&Date.now()>s.expire?(this.remove(o),e):s.value}catch{return e}}function qT(o,e,t={}){if(l1(o))return null;const i=p0.generateKey(o),{expire:s}=t;let a={value:e,...s?{expire:Date.now()+s}:{}};this.storage.setItem(i,JSON.stringify(a))}function WT(o){return!!this.get(o)}function ZT(o){const e=this.get(o),t=p0.generateKey(o);return this.storage.removeItem(t),e}function $T(){return this.storage.clear()}function KT(o){return this.storage.key(o)}function QT(){const o=[];for(let e=0;e<this.storage.length;e++)o.push(this.storage.key(e));return o}function JT(o){return this.storage.get(o).trim()}function e5(o,e={}){const t=this.get(o);if(t===null)return 0;const i=new Blob([JSON.stringify(t)]).size;if(e.format){let s="unit"in e?e.unit:!0;return su.units(i,e.format,s)}return i}function t5(o,e){const t=Df();for(let i in e)i in e&&this.set(`${o}${t}${i}`,e[i])}function i5(o){const e={},t=Df();for(let i=0,s=this.storage.length;i<s;i++){const a=this.key(i),[,u,p]=a.split(`${t}`,3);u===o&&p&&(e[p]=this.get(`${u}${t}${p}`))}return e}const n5=5*1024*1024;function s5(o={}){const e=o.capacity||n5,t=this.used(),i=e-t,s=i>0?i:0;if(o.format){let a="unit"in o?o.unit:!0;return su.units(s,o.format,a)}return s}function r5(){let o=0;const e=Df();for(let t=0;t<this.count;t++){const i=this.key(t),[,s]=i.split(`${e}`,2),a=this.get(s);o+=new Blob([JSON.stringify(i)]).size,o+=new Blob([JSON.stringify(a)]).size}return o}const a5=5*1024*1024;function o5(o={}){const e=o.capacity||a5;if(o.format){let t="unit"in o?o.unit:!0;return su.units(e,o.format,t)}return e}var l5={size:e5,free:s5,used:r5,capacity:o5,from:UT,get:GT,set:qT,has:WT,remove:ZT,clear:$T,key:KT,keys:QT,trim:JT,getFormattedData:i5,setFormattedData:t5};function bx(o){return{storage:o,get count(){return o.length},...l5}}function _x(o){if(!o)throw new Error("Storage is not supported in this environment.");return o}const Tl={local:bx(_x(window.localStorage)),session:bx(_x(window.sessionStorage))},Sx={bg:"#FFFFFF"};function wx(o,e){const t=Ai.invertTransform(o.calcTransformMatrix());return Ai.transformPoint(e,t)}function c5(o,e=0,t=1){return Math.max(e,Math.min(t,o))}function Cx(o,e,t){const i=t.x-e.x,s=t.y-e.y,a=o.x-e.x,u=o.y-e.y,p=i*i+s*s;return p===0?0:c5((a*i+u*s)/p)}class m0{canvas;activeObj=null;start;end;line;stops=[];activeStop=null;gradientType="linear";getColor;constructor(e,t){this.canvas=e,this.getColor=t}enable(){this.canvas.on("mouse:down",this.onMouseDown)}disable(){this.canvas.off("mouse:down",this.onMouseDown),this.cleanup()}onMouseDown=e=>{const t=this.canvas.findTarget(e.e,!1);if(t&&!(t===this.start||t===this.end)){if(this.stops.includes(t)){this.setActiveStop(t);return}if(t===this.line){this.addStopFromEvent(e);return}this.attach(t)}};attach(e){this.cleanup(),this.activeObj=e;const t=e.getBoundingRect(!0,!0),i=this.getColor();this.start=this.createHandle(t.left,t.top+t.height/2),this.end=this.createHandle(t.left+t.width,t.top+t.height/2),this.line=new cs([this.start.left,this.start.top,this.end.left,this.end.top],{stroke:"#6366f1",strokeWidth:1,selectable:!1,evented:!0,excludeFromExport:!0}),this.createStop(0,i),this.createStop(1,i),this.canvas.add(this.line,this.start,this.end,...this.stops),this.setActiveStop(this.stops[1]),this.update()}createHandle(e,t){const i=new qi({left:e,top:t,radius:7,fill:"#111",originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return i.on("moving",this.update),i}createStop(e,t){const i=this.pointAt(e),s=new qi({left:i.x,top:i.y,radius:6,fill:t,originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return s.offset=e,s.on("moving",()=>{const a=Cx(new ke(s.left,s.top),new ke(this.start.left,this.start.top),new ke(this.end.left,this.end.top));s.offset=a;const u=this.pointAt(a);s.set({left:u.x,top:u.y}),this.update()}),s.on("mousedown",a=>{a.e.stopPropagation(),this.setActiveStop(s)}),s.on("mousedblclick",a=>{a.e.preventDefault(),this.removeStop(s)}),this.stops.push(s),s}removeStop(e){this.stops.length<=2||(this.canvas.remove(e),this.stops=this.stops.filter(t=>t!==e),this.activeStop===e&&(this.activeStop=this.stops[0]||null),this.update())}addStopFromEvent(e){const t=this.canvas.getPointer(e.e),i=Cx(new ke(t.x,t.y),new ke(this.start.left,this.start.top),new ke(this.end.left,this.end.top)),s=this.createStop(i,this.getColor());this.canvas.add(s),this.setActiveStop(s),this.update()}setActiveStop(e){this.activeStop=e,this.stops.forEach(t=>t.set("stroke",t===e?"#000":void 0)),this.canvas.requestRenderAll()}updateActiveColor(e){this.activeStop&&(this.activeStop.set("fill",e),this.update())}toggleGradientType(){this.gradientType=this.gradientType==="linear"?"radial":"linear",this.update()}update=()=>{if(!this.activeObj)return;this.line.set({x1:this.start.left,y1:this.start.top,x2:this.end.left,y2:this.end.top}),this.stops.forEach(a=>{const u=this.pointAt(a.offset);a.set({left:u.x,top:u.y})});const e=wx(this.activeObj,new ke(this.start.left,this.start.top)),t=wx(this.activeObj,new ke(this.end.left,this.end.top)),i=this.stops.sort((a,u)=>a.offset-u.offset).map(a=>({offset:a.offset,color:a.fill})),s=this.gradientType==="linear"?new Ys({type:"linear",gradientUnits:"pixels",coords:{x1:e.x,y1:e.y,x2:t.x,y2:t.y},colorStops:i}):new Ys({type:"radial",gradientUnits:"pixels",coords:{x1:e.x,y1:e.y,r1:0,x2:t.x,y2:t.y,r2:Math.hypot(t.x-e.x,t.y-e.y)},colorStops:i});this.activeObj.set("fill",s),this.canvas.requestRenderAll()};pointAt(e){return{x:this.start.left+(this.end.left-this.start.left)*e,y:this.start.top+(this.end.top-this.start.top)*e}}cleanup(){this.canvas.remove(this.start,this.end,this.line,...this.stops),this.stops=[],this.activeStop=null,this.activeObj=null}syncFromObject(e){return!e.fill||!e.fill.type?(this.disable(),null):(this.gradientType=e.fill.type,this.gradientType)}}function u5(o,e){const t=o.canvas,i=o.getCenterPoint();e.scaleX*=o.scaleX,e.scaleY*=o.scaleY,o.scaleX=1,o.scaleY=1,o.remove(e),e.set({left:i.x,top:i.y,angle:o.angle,flipX:o.flipX,flipY:o.flipY,originX:"center",originY:"center"}),t.remove(o),t.add(e),t.setActiveObject(e),e.enterEditing(),e.selectAll(),e.setCoords(),t.requestRenderAll()}function h5(o){if(!o.__instances||o.__instances.length===0)return;const e={fill:o.fill,stroke:o.stroke,strokeWidth:o.strokeWidth,strokeDashArray:o.strokeDashArray,strokeLineCap:o.strokeLineCap,strokeLineJoin:o.strokeLineJoin,strokeMiterLimit:o.strokeMiterLimit,opacity:o.opacity,shadow:o.shadow,strokeUniform:o.strokeUniform,scaleX:o.scaleX,scaleY:o.scaleY,angle:o.angle,skewX:o.skewX,skewY:o.skewY,flipX:o.flipX,flipY:o.flipY,rx:o.rx,ry:o.ry,radius:o.radius,path:o.path};o.__instances.forEach(t=>{t.set(e),t.setCoords()}),o.canvas?.requestRenderAll()}function Tx(o,e,t){const i=xe.getState();e==="node"?(o.isDrawingMode=!1,o.selection=!1,o.skipTargetFind=!1,o.getObjects().forEach(s=>{s.type==="path"&&(s.selectable=!1,s.evented=!1,s.lockMovementX=!0,s.lockMovementY=!0)}),t&&(t.selectable=!1,t.evented=!1,t.lockMovementX=!0,t.lockMovementY=!0,i.enterNodeMode?.())):(o.isDrawingMode=!1,o.selection=!0,o.skipTargetFind=!1,o.defaultCursor="",o.getObjects().forEach(s=>{s.type==="path"&&(s.selectable=!0,s.evented=!0,s.lockMovementX=!1,s.lockMovementY=!1)}),o.getObjects().forEach(s=>{s.type==="circle"&&s.hoverCursor==="pointer"&&o.remove(s)})),o.requestRenderAll()}const f5=(o,e,t)=>({canvas:null,activeTool:"select",isPanning:!1,isDrawingMode:!1,freeDrawingBrush:null,activePanel:null,selectedObject:"textbox",showTextToolbar:!0,hasActiveShape:!1,geditor:null,cw:0,ch:0,hasMultipleSelection:()=>{const i=e().canvas;return i?i.getActiveObjects().length>1:!1},filterUnlockedSelection:i=>{const s=e().canvas;if(!s)return;const a=s.getActiveObject();if(!a||a.type!=="activeselection"||a._filtered)return;const u=a.getObjects(),p=u.filter(y=>!y._locked);if(p.length===u.length)return;if(p.length===0){s.discardActiveObject(),s.requestRenderAll();return}const m=new us(p,{canvas:s});m._filtered=!0,s.setActiveObject(m),s.requestRenderAll()},setSelectedObject:()=>{o({selectedObject:!1})},setActiveTool:i=>{const s=e().canvas;if(!s)return;o({activeTool:i});const a=s.getActiveObject();switch(i){case"pan":s.isDrawingMode=!1,s.defaultCursor="grab",s.selection=!1,s.skipTargetFind=!0,e().enablePan(),e().nodes.forEach(u=>{u.connectorLine&&s.remove(u.connectorLine),s.remove(u)}),o({nodes:[]});break;case"draw":s.isDrawingMode=!0,s.freeDrawingBrush.color="#000",s.selection=!1,s.skipTargetFind=!1,e().nodes.forEach(u=>{u.connectorLine&&s.remove(u.connectorLine),s.remove(u)}),o({nodes:[]});break;case"node":Tx(s,"node",a);break;default:Tx(s,"select");break}s.requestRenderAll()},enablePan:()=>{const i=e().canvas;i&&(console.log("Pan tool enabled"),i.on("mouse:wheel",s=>{const a=s.e;let u=i.getZoom();const p=Math.pow(.999,a.deltaY);u*=p,u=Math.min(Math.max(u,.1),5);const m=new ke(a.offsetX,a.offsetY);i.zoomToPoint(m,u),a.preventDefault(),a.stopPropagation()}),i.on("mouse:down",()=>{e().activeTool==="pan"&&(o({isPanning:!0}),i.setCursor("grabbing"),i.requestRenderAll())}),i.on("mouse:move",s=>{if(!e().isPanning)return;const a=s.e;i.relativePan(new ke(a.movementX,a.movementY)),i.requestRenderAll()}),i.on("mouse:up",()=>{e().isPanning&&(o({isPanning:!1}),i.setCursor("grab"),i.requestRenderAll())}))},syncFromObject:i=>{i&&o({fill:i.fill||"#ffffff",stroke:i.stroke||"#111827",strokeWidth:i.strokeWidth||2,strokeStyle:i.strokeDashArray?i.strokeDashArray[0]===10?"dashed":"dotted":"solid"})},clearBoard:()=>{const i=e().canvas;i&&(Tl.local.clear(),i.clear(),i.backgroundColor="#FFF",i.requestRenderAll())},saveBoard:()=>{const i=e().canvas;if(!i)return;const s=JSON.stringify(i.toJSON(["backgroundColor","customId"])),a=new Blob([s],{type:"application/json"}),u=document.createElement("a");u.href=URL.createObjectURL(a),u.download="drawing.fateboard",u.click(),URL.revokeObjectURL(u.href)},clearToolbar:()=>{o({selectedObject:null,showTextToolbar:!1,isEditingText:!1,hasActiveShape:!1},!1,"create/clear")},setToolbar:(i,s=!1)=>{const a=i.target;a?.type==="textbox"?(o({selectedObject:a,showTextToolbar:!0,isEditingText:s},!1,"create/select"),e().syncFromObject(a)):a?.customType==="shape"||i?.selected?.length>0||a?.type=="group"||a?.type=="activeselection"||a?.type=="image"?o({selectedObject:"shape"},!1,"create/select"):o({selectedObject:null},!1,"create/select")},loadLib:i=>{const s=new m0(i,()=>e().fill);o({geditor:s},!1,"create/gradient")},defaultSettings:()=>{const{format:i,orientation:s}=e().settings;e().setPageFormat(i,s),e().setBrush()},mount:i=>{o({canvas:i},!1,"create/mount")},create:(i,s)=>{const a=new iu(i,{backgroundColor:Sx.bg,preserveObjectStacking:!0});return e().settings.freehand&&o({cw:s.clientWidth,ch:s.clientHeight},!1,"create/clientHW"),a.backgroundColor=Sx.bg,a},init:async(i,s)=>{if(!i||e().canvas)return;const a=e().create(i,s);e().mount(a),e().defaultSettings(),e().loadLib(a),e().registerCanvasEvents(a)},handleSelectionChange:i=>{const{canvas:s}=e(),a=i.target,u=s.getActiveObjects().length,p=()=>Tl.local.set("drawJson",s.toJSON());o({hasActiveShape:u>0},!1,"create/isActive"),e().setToolbar(i),e().updateFromFabric(a),e().saveState(),p(),e().filterUnlockedSelection(i)},handleSelectionClear:i=>{e().clearToolbar()},handleObjectChange:i=>{const s=i.target;s&&s.__instances&&s.__instances.length>0&&h5(s)},handleDBLClick:i=>{const s=i.target;!s||s.type!=="group"||!s.__text||(console.log(s.__text),u5(s,s.__text),s.__text.on("changed",function(){const a=this.__group;if(!a)return;const u=a.__box;if(!u)return;const p=20;u.width=Math.max(this.width+p,u.width),u.height=Math.max(this.height+p,u.height),window.gradientEditor=editor,a.setCoords(),canvas.requestRenderAll()}),s.__text.on("editing:exited",function(){const a=this.canvas,u=this.__group;if(!u)return;const p=this.getCenterPoint();this.scaleX/=u.scaleX||1,this.scaleY/=u.scaleY||1,u.add(this),u.set({left:p.x,top:p.y,angle:this.angle,flipX:this.flipX,flipY:this.flipY,scaleX:1,scaleY:1}),a.remove(this),a.add(u),a.setActiveObject(u),u.setCoords(),a.requestRenderAll()}))},registerCanvasEvents:i=>{i.on("selection:created",e().handleSelectionChange),i.on("selection:updated",e().handleSelectionChange),i.on("selection:cleared",e().handleSelectionClear),i.on("mouse:down",e().handleSelectionChange),i.on("mouse:dblclick",e().handleDBLClick),i.on("object:modified",e().handleObjectChange)}}),d5=(o,e,t)=>({toolbarPosition:"left",isFullScreen:!1,setToolbarPosition:i=>o({toolbarPosition:i}),toggleFullscreen:()=>{const i=document.documentElement;document.fullscreenElement?(document.exitFullscreen?.(),o({isFullScreen:!1})):(i.requestFullscreen?.(),o({isFullScreen:!0}))},zoomIn:()=>{const i=e().canvas;if(!i)return;const s=new ke(i.width/2,i.height/2),a=Math.min(i.getZoom()*1.1,5);i.zoomToPoint(s,a),i.requestRenderAll()},zoomOut:()=>{const i=e().canvas;if(!i)return;const s=new ke(i.width/2,i.height/2),a=Math.max(i.getZoom()/1.1,.1);i.zoomToPoint(s,a),i.requestRenderAll()},zoomFit:()=>{const i=e().canvas;if(!i)return;const s=i.getObjects().filter(G=>G.visible);if(s.length===0){const G=i.viewportTransform,te=1;G[0]=te,G[3]=te,G[4]=0,G[5]=0,i.setViewportTransform(G),i.requestRenderAll();return}let a=1/0,u=1/0,p=-1/0,m=-1/0;s.forEach(G=>{const te=G.getBoundingRect(!0,!0);a=Math.min(a,te.left),u=Math.min(u,te.top),p=Math.max(p,te.left+te.width),m=Math.max(m,te.top+te.height)});const y={left:a,top:u,width:p-a,height:m-u},b=20,C=i.width-b*2,N=i.height-b*2;let E=Math.min(C/y.width,N/y.height);E=Math.min(Math.max(E,.1),5);const V=y.left+y.width/2,L=y.top+y.height/2,ee=i.viewportTransform;ee[0]=E,ee[3]=E,ee[4]=i.width/2-V*E,ee[5]=i.height/2-L*E,i.setViewportTransform(ee),i.requestRenderAll()},actualSize:()=>{const i=e().canvas;i&&(i.setZoom(1),i.viewportTransform=[1,0,0,1,0,0],i.requestRenderAll())}}),g5=(o,e,t)=>({layers:[],clipboard:null,setLayers:i=>o({layers:i}),addLayer:(i,s)=>{const a=e().layers||[],u=i.toObject().id||Date.now();o({layers:[...a,{id:u,type:s,object:i,name:s,visible:!0,locked:!1}]}),e().canvas?.requestRenderAll()},renameLayer:(i,s)=>{const a=e().layers.map(u=>(u.id===i&&(u.name=s),u));o({layers:a})},removeLayer:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObjects();if(!s||s.length===0)return;const a=e().layers.filter(u=>!s.includes(u.object));o({layers:a}),s.forEach(u=>i.remove(u)),i.discardActiveObject(),i.requestRenderAll()},toggleVisibility:i=>{const s=e().layers.map(a=>(a.id===i&&(a.visible=!a.visible,a.object&&(a.object.visible=a.visible)),a));o({layers:s}),e().canvas?.requestRenderAll()},duplicateLayer:i=>{const s=e().layers.find(a=>a.id===i);s?.object&&s.object.clone(a=>{a.set({left:s.object.left+10,top:s.object.top+10,id:Date.now()}),e().canvas.add(a),e().canvas.setActiveObject(a),e().canvas.requestRenderAll();const u=e().layers;o({layers:[...u,{id:a.id,type:s.type,name:s.name+"_copy",object:a}]})})},toggleLayerLock:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;const a=e().layers.map(u=>{if(u.object===s){const p=!u.locked;return s.selectable=!p,s.evented=!p,{...u,locked:p}}return u});console.log(e().layers),o({layers:a})},isActiveObjectLocked:()=>e().selectedObject?._locked===!0,toggleActiveObjectLock:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;!s._locked?(s.set({lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,hasControls:!1,_locked:!0}),kx(s),Ox(i,s)):(s.set({lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,lockRotation:!1,hasControls:!0,_locked:!1}),Ax(s),Ex(i,s)),i.requestRenderAll()},toggleActiveObjectLock1:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;!s._locked?(s.lockMovementX=!0,s.lockMovementY=!0,s.lockScalingX=!0,s.lockScalingY=!0,s.lockRotation=!0,s.hasControls=!1,s._locked=!0):(s.lockMovementX=!1,s.lockMovementY=!1,s.lockScalingX=!1,s.lockScalingY=!1,s.lockRotation=!1,s.hasControls=!0,s._locked=!1),i.renderAll()},lock:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;(s.type==="activeselection"?s.getObjects():[s]).forEach(u=>{u._locked||(u.set({selectable:!0,evented:!0,lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,hasControls:!1,_locked:!0}),kx(u),Ox(i,u))}),i.discardActiveObject(),i.requestRenderAll()},unlock:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;(s.type==="activeselection"?s.getObjects():[s]).forEach(u=>{u._locked&&(u.set({lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,lockRotation:!1,hasControls:!0,_locked:!1}),Ax(u),Ex(i,u))}),i.requestRenderAll()},bringForward:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObjects();s.length&&(s.forEach(a=>{if(a.type!=="activeselection"){const u=i.getObjects().indexOf(a);i.moveObjectTo(a,u+1)}}),i.requestRenderAll())},sendBackward:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObjects();s.length&&(s.forEach(a=>{if(a.type!=="activeselection"){const u=i.getObjects().indexOf(a);i.moveObjectTo(a,Math.max(0,u-1))}}),i.requestRenderAll())},bringToFront:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObjects();s.length&&(s.forEach(a=>{a.type!=="activeselection"&&i.moveObjectTo(a,i.getObjects().length-1)}),i.requestRenderAll())},sendToBack:()=>{const i=e().canvas;!i||![...i.getActiveObjects()].length||(i.getActiveObjects().forEach(a=>{a.type!=="activeselection"&&i.moveObjectTo(a,0)}),i.requestRenderAll())},deleteObject:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObjects();s&&(s.forEach(a=>i.remove(a)),i.discardActiveObject(),i.requestRenderAll())},groupLayers:i=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects();e().deleteObject();const u=new Wi(a);s.add(u),s.requestRenderAll()},ungroupSelected:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();s&&(i.remove(s),i.add(...s.removeAll()),i.requestRenderAll())},groupLayers1:i=>{const s=e(),a="group-"+Date.now(),u={id:a,name:"Group",visible:!0,locked:!1,parentId:null},p=s.layers.map(m=>i.includes(m.id)?{...m,parentId:a}:m);o({layers:[...p,u]})},ungroupLayers1:i=>{const a=e().layers.map(u=>i.includes(u.id)&&u.children?.length?null:i.includes(u.parentId)?{...u,parentId:null}:u).filter(Boolean);o({layers:a})},alignLayers:(i,s)=>{const a=e();if(!s.length)return;const u=a.layers.filter(y=>s.includes(y.id));let p;switch(i){case"left":p=Math.min(...u.map(y=>y.x||0));break;case"center":p=Math.round(u.reduce((y,b)=>y+(b.x||0),0)/u.length);break;case"right":p=Math.max(...u.map(y=>(y.x||0)+(y.width||0)));break;default:return}const m=a.layers.map(y=>s.includes(y.id)?{...y,x:i==="right"?p-(y.width||0):p}:y);o({layers:m})},distributeLayers:(i,s)=>{const a=e(),u=a.layers.filter(p=>s.includes(p.id));if(!(u.length<3)){if(i==="horizontal"){const p=u.sort((N,E)=>(N.x||0)-(E.x||0)),m=p[0].x||0,b=((p[p.length-1].x||0)-m)/(p.length-1),C=a.layers.map(N=>{const E=p.findIndex(V=>V.id===N.id);return E>=0?{...N,x:m+b*E}:N});o({layers:C})}if(i==="vertical"){const p=u.sort((N,E)=>(N.y||0)-(E.y||0)),m=p[0].y||0,b=((p[p.length-1].y||0)-m)/(p.length-1),C=a.layers.map(N=>{const E=p.findIndex(V=>V.id===N.id);return E>=0?{...N,y:m+b*E}:N});o({layers:C})}}},copy:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();s&&s.clone().then(a=>{o({clipboard:a})})},cut:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();s&&s.clone().then(a=>{o({clipboard:a}),i.remove(s),i.discardActiveObject(),i.requestRenderAll()})},paste:async()=>{const i=e().canvas,s=e().clipboard;if(!i||!s)return;const a=await s.clone();i.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0,customType:"shape"}),a.type==="activeselection"?(a.canvas=i,a.forEachObject(u=>i.add(u)),a.setCoords()):i.add(a),o({clipboard:a}),i.setActiveObject(a),i.requestRenderAll()},duplicate:async()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(!s)return;const a=await s.clone();i.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0}),console.log(a.type),a.type==="activeselection"?(a.canvas=i,a.forEachObject(u=>i.add(u)),a.setCoords()):i.add(a),o({clipboard:a}),i.setActiveObject(a),i.requestRenderAll()},cloneer:async(i=20)=>{const s=e().canvas;if(!s)return;const a=s.getActiveObject();if(!a)return;const u=await a.clone();u.left=(a.left??0)+i,u.top=(a.top??0)+i,u.__master=a,a.__instances?.push(u),s.add(u),s.setActiveObject(u),s.requestRenderAll()},clone:async(i=20)=>{const s=e().canvas;if(!s)return;const a=s.getActiveObject();if(!a)return;const u=await a.clone();u.set({left:(a.left??0)+i,top:(a.top??0)+i}),a.__instances??=[],u.__master=a,a.__instances.push(u),s.add(u),s.setActiveObject(u),s.requestRenderAll()},clone1:async(i=20)=>{const s=e().canvas;if(!s)return;let a=s.getActiveObject();if(a){a.type==="activeselection"&&(a=a.toGroup(),s.discardActiveObject(),s.add(a));try{let u=await a.clone();if(u._objects&&u.type!=="group"){console.log("her....");const p=u._objects;u=new Wi(p,{left:(a.left??0)+i,top:(a.top??0)+i,scale:a.scale})}else console.log("123her...."),u.set({left:(a.left??0)+i,top:(a.top??0)+i,scale:a.scale});s.add(u),s.setActiveObject(u),s.requestRenderAll()}catch(u){console.error("Clone failed:",u)}}},alignObjects:i=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects();if(!a||a.length<2)return;const u=a.map(L=>({o:L,box:L.getBoundingRect(!0,!0)})),p=Math.min(...u.map(L=>L.box.left)),m=Math.max(...u.map(L=>L.box.left+L.box.width)),y=Math.min(...u.map(L=>L.box.top)),b=Math.max(...u.map(L=>L.box.top+L.box.height)),C=m-p,N=b-y,E=(L,ee)=>{const G=L-ee.box.left;ee.o.set({left:ee.o.left+G})},V=(L,ee)=>{const G=L-ee.box.top;ee.o.set({top:ee.o.top+G})};switch(console.log("key..",i),i){case"align-left":u.forEach(L=>E(p,L));break;case"align-hcenter":{const L=p+C/2;u.forEach(ee=>{const G=L-ee.box.width/2;E(G,ee)});break}case"align-right":u.forEach(L=>{const ee=m-L.box.width;E(ee,L)});break;case"align-top":u.forEach(L=>V(y,L));break;case"align-vcenter":{const L=y+N/2;u.forEach(ee=>{const G=L-ee.box.height/2;V(G,ee)});break}case"align-bottom":u.forEach(L=>{const ee=b-L.box.height;V(ee,L)});break;case"distribute-h":{const L=[...u].sort((ne,de)=>ne.box.left-de.box.left);if(L.length<3)break;const ee=L[0].box.left+L[0].box.width/2,te=(L[L.length-1].box.left+L[L.length-1].box.width/2-ee)/(L.length-1);L.forEach((ne,de)=>{const I=ee+te*de-ne.box.width/2;E(I,ne)});break}case"distribute-v":{const L=[...u].sort((ne,de)=>ne.box.top-de.box.top);if(L.length<3)break;const ee=L[0].box.top+L[0].box.height/2,te=(L[L.length-1].box.top+L[L.length-1].box.height/2-ee)/(L.length-1);L.forEach((ne,de)=>{const I=ee+te*de-ne.box.height/2;V(I,ne)});break}}a.forEach(L=>L.setCoords()),s.requestRenderAll()},distributeObjects:i=>{const{canvas:s}=e();if(!s)return;const a=s.getActiveObjects();if(a.length<3)return;i==="horizontal"?a.sort((m,y)=>m.left-y.left):a.sort((m,y)=>m.top-y.top);const u=a[0],p=a[a.length-1];if(i==="horizontal"){const y=(p.left-u.left-(u.getScaledWidth()+p.getScaledWidth())/2)/(a.length-1);a.forEach((b,C)=>{C!==0&&C!==a.length-1&&(b.set({left:u.left+C*y}),b.setCoords())})}else{const y=(p.top-u.top-(u.getScaledHeight()+p.getScaledHeight())/2)/(a.length-1);a.forEach((b,C)=>{C!==0&&C!==a.length-1&&(b.set({top:u.top+C*y}),b.setCoords())})}s.requestRenderAll()},canPaste(){return!!this.clipboard},isGroupSelected(){const i=e().canvas?.getActiveObject();return i?i.type==="group"||Array.isArray(i._objects):!1}});function kx(o){o.set({opacity:.6,hoverCursor:"not-allowed"})}function Ax(o){o.set({opacity:1,hoverCursor:"move"})}function Ox(o,e){const t=new ln("",{fontFamily:"Font Awesome 5 Free",fontWeight:"900",fontSize:12,fill:"red",selectable:!1,evented:!1,originX:"center",originY:"center",padding:2,opacity:.6});e._lockIcon=t,o.add(t),Lh(e),e.on("moving",()=>Lh(e)),e.on("scaling",()=>Lh(e)),e.on("rotating",()=>Lh(e))}function Lh(o){if(!o._lockIcon)return;const e=o.getBoundingRect(!0,!0),t=4;o._lockIcon.set({left:e.left+e.width-o._lockIcon.width/2-t,top:e.top+o._lockIcon.height/2+t}),o._lockIcon.setCoords()}function Ex(o,e){e._lockIcon&&(o.remove(e._lockIcon),e._lockIcon=null)}const p5={DEFAULT:{w:1024,h:600},FREEHAND:{w:500,h:400},A3:{w:1123,h:1587},A4:{w:794,h:1123},A5:{w:559,h:794},LETTER:{w:816,h:1056},LEGAL:{w:816,h:1344},CUSTOM:{w:1600,h:2200}},jx=(o,e,t)=>({pageFormat:"Freehand",orientation:"landscape",zoom:1,scale:1,setPageFormat:(i,s="portrait")=>{o({pageFormat:i,orientation:s},!1,"page/orientation"),e().applyPageSize(i,s)},setOrientation:i=>{o({orientation:i},!1,"page/orientation"),e().applyPageSize(e().pageFormat,i)},setZoom:i=>{const s=e().canvas;s&&(s.setZoom(i),o({zoom:i}),e().drawBackground(),s.renderAll())},applyPageSize:(i=e().pageFormat,s=e().orientation)=>{const a=e().canvas;if(!a)return;if(String(i||"").toLowerCase()==="freehand"){a.setDimensions({width:e().cw,height:e().ch}),a.setZoom(1),a.calcOffset(),a.renderAll(),o({scale:1,pageWidth:a.getWidth(),pageHeight:a.getHeight()},!1,"page/applysize");return}const{w:p,h:m}=p5[i],y=s==="portrait"?p:m,b=s==="portrait"?m:p,N=800/y;a.setDimensions({width:y*N,height:b*N}),a.setZoom(N),a.calcOffset(),a.renderAll(),o({scale:N,pageWidth:y,pageHeight:b},!1,"page/applysize"),e().drawBackground()}}),Nf=()=>LT,m5=({get:o})=>{const e=Nf(),t=Math.max(2,o().gridSize),i=Math.max(1,o().gridMajorEvery),s=t*i,a=document.createElement("canvas");a.width=a.height=s;const u=a.getContext("2d");if(!u)return null;const p=(m,y,b,C,N,E)=>{u.beginPath(),u.moveTo(m+.5,y+.5),u.lineTo(b+.5,C+.5),u.lineWidth=N,u.strokeStyle=E,u.stroke()};for(let m=1;m<i;m++){const y=m*t;p(y,0,y,s,o().gridLineWidth,o().gridColor),p(0,y,s,y,o().gridLineWidth,o().gridColor)}return p(s-1,0,s-1,s,o().gridMajorLineWidth,o().gridMajorColor),p(0,s-1,s,s-1,o().gridMajorLineWidth,o().gridMajorColor),new e.Pattern({source:a,repeat:"repeat"})},v5=({get:o})=>{const e=Nf(),t=Math.max(2,o().ruledLineHeight),i=document.createElement("canvas");i.width=2,i.height=t;const s=i.getContext("2d");return s?(s.beginPath(),s.moveTo(0,t-1+.5),s.lineTo(i.width,t-1+.5),s.lineWidth=o().ruledLineWidth,s.strokeStyle=o().ruledColor,s.stroke(),new e.Pattern({source:i,repeat:"repeat"})):null},y5=({get:o})=>{const e=Nf(),t=Math.max(6,o().gridSize),i=document.createElement("canvas");i.width=i.height=t;const s=i.getContext("2d");return s?(s.beginPath(),s.arc(1,1,1,0,Math.PI*2),s.fillStyle=o().gridColor,s.fill(),new e.Pattern({source:i,repeat:"repeat"})):null},x5=({get:o})=>{const e=Nf(),t=Math.max(16,o().gridSize*2),i=document.createElement("canvas");i.width=i.height=t;const s=i.getContext("2d");return s?(s.strokeStyle=o().gridColor,s.lineWidth=1,s.beginPath(),s.moveTo(0,t),s.lineTo(t/2,0),s.lineTo(t,t),s.stroke(),new e.Pattern({source:i,repeat:"repeat"})):null},b5={none:null,grid:m5,ruled:v5,dots:y5,isometric:x5},_5=(o,e,t)=>({backgroundStyle:"none",gridSize:20,gridColor:"#e0e0e0",gridMajorEvery:5,gridMajorColor:"#bdbdbd",gridLineWidth:1,gridMajorLineWidth:1,ruledLineHeight:24,ruledColor:"#c0d6ff",ruledLineWidth:1,setBackgroundStyle:i=>{o({backgroundStyle:i}),e().drawBackground()},toggleGrid:()=>{const i=e().backgroundStyle==="grid"?"none":"grid";o({backgroundStyle:i}),e().drawBackground()},setGridOptions:i=>{o(i),e().drawBackground()},setRuledOptions:i=>{o(i),e().drawBackground()},drawBackground:()=>{const i=e().canvas;if(!i)return;const s=e().backgroundStyle,a=b5[s];if(!a){i.backgroundColor=null,i.requestRenderAll();return}const u=a({get:e});i.backgroundColor=u||null,i.requestRenderAll()}}),Ep=typeof navigator<"u"&&/Mac|iPhone|iPad/i.test(navigator.platform),Kt=(o,e)=>Ep?o:e,S5={Meta:"",Shift:"",Alt:"",Control:"",Enter:"",Backspace:"",Escape:"",Tab:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:""},w5={Meta:"Ctrl",Shift:"Shift",Alt:"Alt",Control:"Ctrl",Enter:"Enter",Backspace:"Backspace",Escape:"Esc",Tab:"Tab",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:""},Mx=o=>{const e=Ep?S5:w5;return o.split("+").map(t=>e[t]??t.toLowerCase()).join(Ep?"":"+")},c1=[{id:"newfile",label:"Create New Board",title:"Create New Board",description:"New File",shortcut:Kt("N","Ctrl+n"),icon:k.jsx("i",{className:"fa-solid fa-file"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().clearBoard(),handler:({get:o,set:e})=>{const{clearBoard:t}=o();t()}},{id:"open",label:"Open Board",title:"Open Board",description:"Open Board",shortcut:Kt("O","Ctrl+o"),icon:k.jsx("i",{className:"fa-regular fa-folder-open"}),when:()=>xe.getState().hasSelection,onClick:()=>{},handler:({get:o,set:e})=>{const{clearBoard:t}=o();t()}},{id:"save",label:"Save Board",title:"Save Board",description:"Save Board",shortcut:Kt("S","Ctrl+s"),icon:k.jsx("i",{className:"fa-regular fa-floppy-disk"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().saveBoard(),handler:({get:o,set:e})=>{const{clearBoard:t}=o();t()}}],v0=[{id:"copy",label:"Copy",title:"Copy selected object",description:"Copy selected object",shortcut:Kt("C","Ctrl+c"),icon:k.jsx("i",{className:"fa-regular fa-copy"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().copy(),handler:({get:o,set:e})=>{const{copy:t}=o();t()}},{id:"cut",label:"Cut",title:"Cut selected object",description:"Cut selected object",shortcut:Kt("X","Ctrl+x"),icon:k.jsx("i",{className:"fa-solid fa-scissors -rotate-90"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().cut(),handler:({get:o,set:e})=>{const{cut:t}=o();t()}},{id:"paste",label:"Paste",title:"Paste object",description:"Paste object",shortcut:Kt("V","Ctrl+v"),icon:k.jsx("i",{className:"fa-regular fa-paste"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().paste(),handler:({get:o,set:e})=>{const{paste:t}=o();t()}},{id:"duplicate",label:"Duplicate",title:"Duplicate object",description:"Duplicate object",shortcut:Kt("D","Ctrl+D"),icon:k.jsx("i",{className:"fa-regular fa-clone"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().duplicate(),handler:({get:o,set:e})=>{const{duplicate:t}=o();t()}},{id:"clone",label:"Clone",title:"Clone selected object",description:"Clone selected object",shortcut:Kt("D","Alt+D"),icon:k.jsx("i",{className:"fa-solid fa-layer-group"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().clone(),handler:({get:o,set:e})=>{const{clone:t}=o();t()}},{id:"delete",label:"Delete",title:"Delete selected object",description:"Delete selected object",shortcut:Kt("","Backspace"),icon:k.jsx("i",{className:"fa-solid fa-trash"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().removeLayer(),handler:({get:o,set:e})=>{const{removeLayer:t}=o();t()}}],C5=[{id:"align-left",label:"Align Left",name:"Align Left",description:"Align Left",shortcut:Kt("+c","Ctrl+c"),icon:k.jsx("i",{className:"fa-solid fa-align-left"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-left"),handler:({get:o,set:e})=>{const{copy:t}=o();t()}},{id:"align-center",label:"Align Center",name:"Align Center",description:"Align Center",shortcut:Kt("+x","Ctrl+x"),icon:k.jsx("i",{className:"fa-solid fa-align-center"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-hcenter"),handler:({get:o,set:e})=>{const{cut:t}=o();t()}},{id:"align-right",label:"Align Right",name:"Align Right",description:"Align Right",shortcut:Kt("+v","Ctrl+v"),icon:k.jsx("i",{className:"fa-solid fa-align-right"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-right"),handler:({get:o,set:e})=>{const{paste:t}=o();t()}},{id:"align-top",label:"Align Top",name:"Align Top",description:"Align Top",shortcut:Kt("+D","Ctrl+D"),icon:k.jsx("i",{className:"fa-solid fa-align-left rotate-90"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-top"),handler:({get:o,set:e})=>{const{duplicate:t}=o();t()}},{id:"align-middle",label:"Align Middle",name:"Align Middle",description:"Align Middle",shortcut:Kt("+D","Alt+D"),icon:k.jsx("i",{className:"fa-solid fa-align-center -rotate-90"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-vcenter"),handler:({get:o,set:e})=>{const{clone:t}=o();t()}},{id:"align-bottom",label:"Align Bottom",name:"Align Bottom",description:"Align Bottom",shortcut:Kt("","Backspace"),icon:k.jsx("i",{className:"fa-solid fa-align-right rotate-90"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("align-bottom"),handler:({get:o,set:e})=>{const{removeLayer:t}=o();t()}},{id:"distribute-horizontal",label:"Distribute Horizontally",name:"Distribute Horizontally",description:"Distribute Horizontally",shortcut:Kt("","Backspace"),icon:k.jsx("i",{className:"fa-solid fa-grip-lines-vertical"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("distribute-h"),handler:({get:o,set:e})=>{const{removeLayer:t}=o();t()}},{id:"distribute-vertical",label:"Distribute Vertically",name:"Distribute Vertically",description:"Distribute Vertically",shortcut:Kt("","Backspace"),icon:k.jsx("i",{className:"fa-solid fa-grip-lines"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().alignObjects("distribute-v"),handler:({get:o,set:e})=>{const{removeLayer:t}=o();t()}}],y0=[{id:"lock",label:"Lock",title:"Lock selected object",description:"Lock selected object",shortcut:Kt("L","Ctrl+L"),icon:k.jsx("i",{className:"fa-solid fa-lock"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().lock(),handler:({get:o,set:e})=>{const{lock:t}=o();t()}},{id:"unlock",label:"Unlock",title:"Unlock selected object",description:"Unlock selected object",shortcut:Kt("L","Ctrl+Shift+L"),icon:k.jsx("i",{className:"fa-solid fa-lock-open"}),when:()=>xe.getState().hasSelection,onClick:()=>xe.getState().unlock(),handler:({get:o,set:e})=>{const{unlock:t}=o();t()}}],x0=[{id:"group",label:"Group",title:"Group selected object",description:"Group selected object",shortcut:Kt("G","Ctrl+G"),icon:k.jsx("i",{className:"fa-solid fa-object-group"}),when:()=>xe.getState().hasMultipleSelection(),onClick:()=>xe.getState().groupLayers(),handler:({get:o,set:e})=>{const{groupLayers:t}=o();t()}},{id:"ungroup",label:"Ungroup",title:"Ungroup selected object",description:"Ungroup selected object",shortcut:Kt("U","Ctrl+Shift+U"),icon:k.jsx("i",{className:"fa-solid fa-object-ungroup"}),when:()=>xe.getState().isGroupSelected(),onClick:()=>xe.getState().ungroupSelected(),handler:({get:o,set:e})=>{const{ungroupSelected:t}=o();t()}}],u1=[{id:"zoom-in",label:"Zoom In",title:"Zoom In",description:"Zoom In",shortcut:Kt("+equal","Ctrl++"),icon:k.jsx("i",{className:"fa-solid fa-magnifying-glass-plus"}),onClick:()=>xe.getState().zoomIn(),handler:({get:o,set:e})=>{const{zoomIn:t}=o();t()}},{id:"zoom-out",label:"Zoom Out",title:"Zoom Out",description:"Zoom Out",shortcut:Kt("+minus","Ctrl+-"),icon:k.jsx("i",{className:"fa-solid fa-magnifying-glass-minus"}),onClick:()=>xe.getState().zoomOut(),handler:({get:o,set:e})=>{const{zoomOut:t}=o();t()}},{id:"fit-to-screen",label:"Fit to Screen",title:"Fit to Screen",description:"Fit to Screen",shortcut:Kt("+Digit0","Ctrl+0"),icon:k.jsx("i",{className:"fa-solid fa-expand"}),onClick:()=>xe.getState().zoomFit(),handler:({get:o,set:e})=>{const{zoomFit:t}=o();t()}},{id:"actual-size",label:"Actual Size",title:"Actual Size",description:"Actual Size",shortcut:Kt("+Digit1","Ctrl+1"),icon:k.jsx("i",{className:"fa-solid fa-arrows-left-right"}),onClick:()=>xe.getState().actualSize(),handler:({get:o,set:e})=>{const{actualSize:t}=o();t()}}],T5=()=>k.jsx(k.Fragment,{children:k.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 20 20",class:"",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"})})}),k5=()=>k.jsx(k.Fragment,{children:k.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 20 20",class:"",fill:"none",stroke:"currentColor",trokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"})})}),A5=[{id:"undo",label:"Undo",title:"Undo",description:"Undo",shortcut:Kt("z","Ctrl+z"),icon:k.jsx(k5,{}),onClick:()=>xe.getState().undo(),handler:({get:o,set:e})=>{const{undo:t}=o();t()}},{id:"redo",label:"Redo",title:"Redo",description:"Redo",shortcut:Kt("z","Ctrl+Shift+z"),icon:k.jsx(T5,{}),onClick:()=>xe.getState().redo(),handler:({get:o,set:e})=>{const{redo:t}=o();t()}}],b0=[...c1,...v0,...x0,...y0,...u1,...A5],O5=(o,e,t)=>({commands:b0.map(s=>({...s,handler:()=>s.handler({get:e,set:o})})),runCommand:s=>{const a=e().commands.find(u=>u.id===s);a&&a.handler()}});var h1={inherit:"inherit",current:"currentcolor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"oklch(98.4% 0.003 247.858)",100:"oklch(96.8% 0.007 247.896)",200:"oklch(92.9% 0.013 255.508)",300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)",700:"oklch(37.2% 0.044 257.287)",800:"oklch(27.9% 0.041 260.031)",900:"oklch(20.8% 0.042 265.755)",950:"oklch(12.9% 0.042 264.695)"},gray:{50:"oklch(98.5% 0.002 247.839)",100:"oklch(96.7% 0.003 264.542)",200:"oklch(92.8% 0.006 264.531)",300:"oklch(87.2% 0.01 258.338)",400:"oklch(70.7% 0.022 261.325)",500:"oklch(55.1% 0.027 264.364)",600:"oklch(44.6% 0.03 256.802)",700:"oklch(37.3% 0.034 259.733)",800:"oklch(27.8% 0.033 256.848)",900:"oklch(21% 0.034 264.665)",950:"oklch(13% 0.028 261.692)"},zinc:{50:"oklch(98.5% 0 0)",100:"oklch(96.7% 0.001 286.375)",200:"oklch(92% 0.004 286.32)",300:"oklch(87.1% 0.006 286.286)",400:"oklch(70.5% 0.015 286.067)",500:"oklch(55.2% 0.016 285.938)",600:"oklch(44.2% 0.017 285.786)",700:"oklch(37% 0.013 285.805)",800:"oklch(27.4% 0.006 286.033)",900:"oklch(21% 0.006 285.885)",950:"oklch(14.1% 0.005 285.823)"},neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},stone:{50:"oklch(98.5% 0.001 106.423)",100:"oklch(97% 0.001 106.424)",200:"oklch(92.3% 0.003 48.717)",300:"oklch(86.9% 0.005 56.366)",400:"oklch(70.9% 0.01 56.259)",500:"oklch(55.3% 0.013 58.071)",600:"oklch(44.4% 0.011 73.639)",700:"oklch(37.4% 0.01 67.558)",800:"oklch(26.8% 0.007 34.298)",900:"oklch(21.6% 0.006 56.043)",950:"oklch(14.7% 0.004 49.25)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},orange:{50:"oklch(98% 0.016 73.684)",100:"oklch(95.4% 0.038 75.164)",200:"oklch(90.1% 0.076 70.697)",300:"oklch(83.7% 0.128 66.29)",400:"oklch(75% 0.183 55.934)",500:"oklch(70.5% 0.213 47.604)",600:"oklch(64.6% 0.222 41.116)",700:"oklch(55.3% 0.195 38.402)",800:"oklch(47% 0.157 37.304)",900:"oklch(40.8% 0.123 38.172)",950:"oklch(26.6% 0.079 36.259)"},amber:{50:"oklch(98.7% 0.022 95.277)",100:"oklch(96.2% 0.059 95.617)",200:"oklch(92.4% 0.12 95.746)",300:"oklch(87.9% 0.169 91.605)",400:"oklch(82.8% 0.189 84.429)",500:"oklch(76.9% 0.188 70.08)",600:"oklch(66.6% 0.179 58.318)",700:"oklch(55.5% 0.163 48.998)",800:"oklch(47.3% 0.137 46.201)",900:"oklch(41.4% 0.112 45.904)",950:"oklch(27.9% 0.077 45.635)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},lime:{50:"oklch(98.6% 0.031 120.757)",100:"oklch(96.7% 0.067 122.328)",200:"oklch(93.8% 0.127 124.321)",300:"oklch(89.7% 0.196 126.665)",400:"oklch(84.1% 0.238 128.85)",500:"oklch(76.8% 0.233 130.85)",600:"oklch(64.8% 0.2 131.684)",700:"oklch(53.2% 0.157 131.589)",800:"oklch(45.3% 0.124 130.933)",900:"oklch(40.5% 0.101 131.063)",950:"oklch(27.4% 0.072 132.109)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},emerald:{50:"oklch(97.9% 0.021 166.113)",100:"oklch(95% 0.052 163.051)",200:"oklch(90.5% 0.093 164.15)",300:"oklch(84.5% 0.143 164.978)",400:"oklch(76.5% 0.177 163.223)",500:"oklch(69.6% 0.17 162.48)",600:"oklch(59.6% 0.145 163.225)",700:"oklch(50.8% 0.118 165.612)",800:"oklch(43.2% 0.095 166.913)",900:"oklch(37.8% 0.077 168.94)",950:"oklch(26.2% 0.051 172.552)"},teal:{50:"oklch(98.4% 0.014 180.72)",100:"oklch(95.3% 0.051 180.801)",200:"oklch(91% 0.096 180.426)",300:"oklch(85.5% 0.138 181.071)",400:"oklch(77.7% 0.152 181.912)",500:"oklch(70.4% 0.14 182.503)",600:"oklch(60% 0.118 184.704)",700:"oklch(51.1% 0.096 186.391)",800:"oklch(43.7% 0.078 188.216)",900:"oklch(38.6% 0.063 188.416)",950:"oklch(27.7% 0.046 192.524)"},cyan:{50:"oklch(98.4% 0.019 200.873)",100:"oklch(95.6% 0.045 203.388)",200:"oklch(91.7% 0.08 205.041)",300:"oklch(86.5% 0.127 207.078)",400:"oklch(78.9% 0.154 211.53)",500:"oklch(71.5% 0.143 215.221)",600:"oklch(60.9% 0.126 221.723)",700:"oklch(52% 0.105 223.128)",800:"oklch(45% 0.085 224.283)",900:"oklch(39.8% 0.07 227.392)",950:"oklch(30.2% 0.056 229.695)"},sky:{50:"oklch(97.7% 0.013 236.62)",100:"oklch(95.1% 0.026 236.824)",200:"oklch(90.1% 0.058 230.902)",300:"oklch(82.8% 0.111 230.318)",400:"oklch(74.6% 0.16 232.661)",500:"oklch(68.5% 0.169 237.323)",600:"oklch(58.8% 0.158 241.966)",700:"oklch(50% 0.134 242.749)",800:"oklch(44.3% 0.11 240.79)",900:"oklch(39.1% 0.09 240.876)",950:"oklch(29.3% 0.066 243.157)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"},indigo:{50:"oklch(96.2% 0.018 272.314)",100:"oklch(93% 0.034 272.788)",200:"oklch(87% 0.065 274.039)",300:"oklch(78.5% 0.115 274.713)",400:"oklch(67.3% 0.182 276.935)",500:"oklch(58.5% 0.233 277.117)",600:"oklch(51.1% 0.262 276.966)",700:"oklch(45.7% 0.24 277.023)",800:"oklch(39.8% 0.195 277.366)",900:"oklch(35.9% 0.144 278.697)",950:"oklch(25.7% 0.09 281.288)"},violet:{50:"oklch(96.9% 0.016 293.756)",100:"oklch(94.3% 0.029 294.588)",200:"oklch(89.4% 0.057 293.283)",300:"oklch(81.1% 0.111 293.571)",400:"oklch(70.2% 0.183 293.541)",500:"oklch(60.6% 0.25 292.717)",600:"oklch(54.1% 0.281 293.009)",700:"oklch(49.1% 0.27 292.581)",800:"oklch(43.2% 0.232 292.759)",900:"oklch(38% 0.189 293.745)",950:"oklch(28.3% 0.141 291.089)"},purple:{50:"oklch(97.7% 0.014 308.299)",100:"oklch(94.6% 0.033 307.174)",200:"oklch(90.2% 0.063 306.703)",300:"oklch(82.7% 0.119 306.383)",400:"oklch(71.4% 0.203 305.504)",500:"oklch(62.7% 0.265 303.9)",600:"oklch(55.8% 0.288 302.321)",700:"oklch(49.6% 0.265 301.924)",800:"oklch(43.8% 0.218 303.724)",900:"oklch(38.1% 0.176 304.987)",950:"oklch(29.1% 0.149 302.717)"},fuchsia:{50:"oklch(97.7% 0.017 320.058)",100:"oklch(95.2% 0.037 318.852)",200:"oklch(90.3% 0.076 319.62)",300:"oklch(83.3% 0.145 321.434)",400:"oklch(74% 0.238 322.16)",500:"oklch(66.7% 0.295 322.15)",600:"oklch(59.1% 0.293 322.896)",700:"oklch(51.8% 0.253 323.949)",800:"oklch(45.2% 0.211 324.591)",900:"oklch(40.1% 0.17 325.612)",950:"oklch(29.3% 0.136 325.661)"},pink:{50:"oklch(97.1% 0.014 343.198)",100:"oklch(94.8% 0.028 342.258)",200:"oklch(89.9% 0.061 343.231)",300:"oklch(82.3% 0.12 346.018)",400:"oklch(71.8% 0.202 349.761)",500:"oklch(65.6% 0.241 354.308)",600:"oklch(59.2% 0.249 0.584)",700:"oklch(52.5% 0.223 3.958)",800:"oklch(45.9% 0.187 3.815)",900:"oklch(40.8% 0.153 2.432)",950:"oklch(28.4% 0.109 3.907)"},rose:{50:"oklch(96.9% 0.015 12.422)",100:"oklch(94.1% 0.03 12.58)",200:"oklch(89.2% 0.058 10.001)",300:"oklch(81% 0.117 11.638)",400:"oklch(71.2% 0.194 13.428)",500:"oklch(64.5% 0.246 16.439)",600:"oklch(58.6% 0.253 17.585)",700:"oklch(51.4% 0.222 16.935)",800:"oklch(45.5% 0.188 13.697)",900:"oklch(41% 0.159 10.272)",950:"oklch(27.1% 0.105 12.094)"}};const E5=(o,e,t)=>({brush:"pencil",width:4,color:"#000",cursor:"crosshair",setBrush:(i={})=>{const s=e().canvas;if(!s)return;const a={pencil:()=>new Cl(s),circle:()=>new X_(s),spray:()=>new G_(s),pattern:()=>new q_(s),eraser:()=>new(void 0)(s)},u=i?.brush??e().brush,p=a[u]?a[u]():a.pencil(),m=i?.color??e().color,y=i?.width??e().width,b=i.cursor??"url('/pencil.svg') 0 32, crosshair";p.color=m,p.width=y,s.freeDrawingBrush=p,s.freeDrawingCursor=b,o({brush:u,color:m,width:y,cursor:b},!1,"canvas/brush"),s.requestRenderAll()},setBrushWidth:(i={})=>{const s=e().canvas;if(!s)return;console.log(i);const a=i?.width??e().width;s.freeDrawingBrush.width=a,o({width:a}),s.requestRenderAll()},setBrushColor:(i={})=>{const s=e().canvas;if(!s)return;const a=i?.color??e().color;s.freeDrawingBrush.color=a,o({color:a}),s.requestRenderAll()}});function j5(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zh={exports:{}};const M5={},D5=Object.freeze(Object.defineProperty({__proto__:null,default:M5},Symbol.toStringTag,{value:"Module"})),Dx=IS(D5);var Yc={exports:{}},N5=Yc.exports,Nx;function R5(){return Nx||(Nx=1,(function(o,e){(function(t,i){i(e)})(N5,(function(t){var i=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],a="-----------------------------------------------------------------------------------------------------------------------------------------------------",u="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",p={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},m="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",y={5:m,"5module":m+" export import",6:m+" const class extends export import super"},b=/^in(stanceof)?$/,C=new RegExp("["+u+"]"),N=new RegExp("["+u+a+"]");function E(f,S){for(var F=65536,$=0;$<S.length;$+=2){if(F+=S[$],F>f)return!1;if(F+=S[$+1],F>=f)return!0}return!1}function V(f,S){return f<65?f===36:f<91?!0:f<97?f===95:f<123?!0:f<=65535?f>=170&&C.test(String.fromCharCode(f)):S===!1?!1:E(f,s)}function L(f,S){return f<48?f===36:f<58?!0:f<65?!1:f<91?!0:f<97?f===95:f<123?!0:f<=65535?f>=170&&N.test(String.fromCharCode(f)):S===!1?!1:E(f,s)||E(f,i)}var ee=function(S,F){F===void 0&&(F={}),this.label=S,this.keyword=F.keyword,this.beforeExpr=!!F.beforeExpr,this.startsExpr=!!F.startsExpr,this.isLoop=!!F.isLoop,this.isAssign=!!F.isAssign,this.prefix=!!F.prefix,this.postfix=!!F.postfix,this.binop=F.binop||null,this.updateContext=null};function G(f,S){return new ee(f,{beforeExpr:!0,binop:S})}var te={beforeExpr:!0},ne={startsExpr:!0},de={};function be(f,S){return S===void 0&&(S={}),S.keyword=f,de[f]=new ee(f,S)}var I={num:new ee("num",ne),regexp:new ee("regexp",ne),string:new ee("string",ne),name:new ee("name",ne),privateId:new ee("privateId",ne),eof:new ee("eof"),bracketL:new ee("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ee("]"),braceL:new ee("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ee("}"),parenL:new ee("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ee(")"),comma:new ee(",",te),semi:new ee(";",te),colon:new ee(":",te),dot:new ee("."),question:new ee("?",te),questionDot:new ee("?."),arrow:new ee("=>",te),template:new ee("template"),invalidTemplate:new ee("invalidTemplate"),ellipsis:new ee("...",te),backQuote:new ee("`",ne),dollarBraceL:new ee("${",{beforeExpr:!0,startsExpr:!0}),eq:new ee("=",{beforeExpr:!0,isAssign:!0}),assign:new ee("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ee("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ee("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:G("||",1),logicalAND:G("&&",2),bitwiseOR:G("|",3),bitwiseXOR:G("^",4),bitwiseAND:G("&",5),equality:G("==/!=/===/!==",6),relational:G("</>/<=/>=",7),bitShift:G("<</>>/>>>",8),plusMin:new ee("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:G("%",10),star:G("*",10),slash:G("/",10),starstar:new ee("**",{beforeExpr:!0}),coalesce:G("??",1),_break:be("break"),_case:be("case",te),_catch:be("catch"),_continue:be("continue"),_debugger:be("debugger"),_default:be("default",te),_do:be("do",{isLoop:!0,beforeExpr:!0}),_else:be("else",te),_finally:be("finally"),_for:be("for",{isLoop:!0}),_function:be("function",ne),_if:be("if"),_return:be("return",te),_switch:be("switch"),_throw:be("throw",te),_try:be("try"),_var:be("var"),_const:be("const"),_while:be("while",{isLoop:!0}),_with:be("with"),_new:be("new",{beforeExpr:!0,startsExpr:!0}),_this:be("this",ne),_super:be("super",ne),_class:be("class",ne),_extends:be("extends",te),_export:be("export"),_import:be("import",ne),_null:be("null",ne),_true:be("true",ne),_false:be("false",ne),_in:be("in",{beforeExpr:!0,binop:7}),_instanceof:be("instanceof",{beforeExpr:!0,binop:7}),_typeof:be("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:be("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:be("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ee=/\r\n?|\n|\u2028|\u2029/,Ye=new RegExp(Ee.source,"g");function Be(f){return f===10||f===13||f===8232||f===8233}function ct(f,S,F){F===void 0&&(F=f.length);for(var $=S;$<F;$++){var ae=f.charCodeAt($);if(Be(ae))return $<F-1&&ae===13&&f.charCodeAt($+1)===10?$+2:$+1}return-1}var nt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,et=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ft=Object.prototype,Ge=ft.hasOwnProperty,Mt=ft.toString,he=Object.hasOwn||(function(f,S){return Ge.call(f,S)}),qe=Array.isArray||(function(f){return Mt.call(f)==="[object Array]"}),it=Object.create(null);function rt(f){return it[f]||(it[f]=new RegExp("^(?:"+f.replace(/ /g,"|")+")$"))}function yt(f){return f<=65535?String.fromCharCode(f):(f-=65536,String.fromCharCode((f>>10)+55296,(f&1023)+56320))}var _e=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ve=function(S,F){this.line=S,this.column=F};Ve.prototype.offset=function(S){return new Ve(this.line,this.column+S)};var tt=function(S,F,$){this.start=F,this.end=$,S.sourceFile!==null&&(this.source=S.sourceFile)};function ot(f,S){for(var F=1,$=0;;){var ae=ct(f,$,S);if(ae<0)return new Ve(F,S-$);++F,$=ae}}var ut={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},wt=!1;function Lt(f){var S={};for(var F in ut)S[F]=f&&he(f,F)?f[F]:ut[F];if(S.ecmaVersion==="latest"?S.ecmaVersion=1e8:S.ecmaVersion==null?(!wt&&typeof console=="object"&&console.warn&&(wt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),S.ecmaVersion=11):S.ecmaVersion>=2015&&(S.ecmaVersion-=2009),S.allowReserved==null&&(S.allowReserved=S.ecmaVersion<5),(!f||f.allowHashBang==null)&&(S.allowHashBang=S.ecmaVersion>=14),qe(S.onToken)){var $=S.onToken;S.onToken=function(ae){return $.push(ae)}}return qe(S.onComment)&&(S.onComment=Oi(S,S.onComment)),S}function Oi(f,S){return function(F,$,ae,Te,Me,Ze){var Ke={type:F?"Block":"Line",value:$,start:ae,end:Te};f.locations&&(Ke.loc=new tt(this,Me,Ze)),f.ranges&&(Ke.range=[ae,Te]),S.push(Ke)}}var Ct=1,zt=2,Qt=4,ta=8,Ms=16,fs=32,Ds=64,ia=128,Ns=256,Qs=512,Js=Ct|zt|Ns;function er(f,S){return zt|(f?Qt:0)|(S?ta:0)}var oi=0,mr=1,Wt=2,$i=3,Nt=4,l=5,h=function(S,F,$){this.options=S=Lt(S),this.sourceFile=S.sourceFile,this.keywords=rt(y[S.ecmaVersion>=6?6:S.sourceType==="module"?"5module":5]);var ae="";S.allowReserved!==!0&&(ae=p[S.ecmaVersion>=6?6:S.ecmaVersion===5?5:3],S.sourceType==="module"&&(ae+=" await")),this.reservedWords=rt(ae);var Te=(ae?ae+" ":"")+p.strict;this.reservedWordsStrict=rt(Te),this.reservedWordsStrictBind=rt(Te+" "+p.strictBind),this.input=String(F),this.containsEsc=!1,$?(this.pos=$,this.lineStart=this.input.lastIndexOf(`
`,$-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ee).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=I.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=S.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&S.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ct),this.regexpState=null,this.privateNameStack=[]},g={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};h.prototype.parse=function(){var S=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(S)},g.inFunction.get=function(){return(this.currentVarScope().flags&zt)>0},g.inGenerator.get=function(){return(this.currentVarScope().flags&ta)>0},g.inAsync.get=function(){return(this.currentVarScope().flags&Qt)>0},g.canAwait.get=function(){for(var f=this.scopeStack.length-1;f>=0;f--){var S=this.scopeStack[f],F=S.flags;if(F&(Ns|Qs))return!1;if(F&zt)return(F&Qt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},g.allowSuper.get=function(){var f=this.currentThisScope(),S=f.flags;return(S&Ds)>0||this.options.allowSuperOutsideMethod},g.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ia)>0},g.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},g.allowNewDotTarget.get=function(){for(var f=this.scopeStack.length-1;f>=0;f--){var S=this.scopeStack[f],F=S.flags;if(F&(Ns|Qs)||F&zt&&!(F&Ms))return!0}return!1},g.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ns)>0},h.extend=function(){for(var S=[],F=arguments.length;F--;)S[F]=arguments[F];for(var $=this,ae=0;ae<S.length;ae++)$=S[ae]($);return $},h.parse=function(S,F){return new this(F,S).parse()},h.parseExpressionAt=function(S,F,$){var ae=new this($,S,F);return ae.nextToken(),ae.parseExpression()},h.tokenizer=function(S,F){return new this(F,S)},Object.defineProperties(h.prototype,g);var v=h.prototype,x=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;v.strictDirective=function(f){if(this.options.ecmaVersion<5)return!1;for(;;){et.lastIndex=f,f+=et.exec(this.input)[0].length;var S=x.exec(this.input.slice(f));if(!S)return!1;if((S[1]||S[2])==="use strict"){et.lastIndex=f+S[0].length;var F=et.exec(this.input),$=F.index+F[0].length,ae=this.input.charAt($);return ae===";"||ae==="}"||Ee.test(F[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ae)||ae==="!"&&this.input.charAt($+1)==="=")}f+=S[0].length,et.lastIndex=f,f+=et.exec(this.input)[0].length,this.input[f]===";"&&f++}},v.eat=function(f){return this.type===f?(this.next(),!0):!1},v.isContextual=function(f){return this.type===I.name&&this.value===f&&!this.containsEsc},v.eatContextual=function(f){return this.isContextual(f)?(this.next(),!0):!1},v.expectContextual=function(f){this.eatContextual(f)||this.unexpected()},v.canInsertSemicolon=function(){return this.type===I.eof||this.type===I.braceR||Ee.test(this.input.slice(this.lastTokEnd,this.start))},v.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},v.semicolon=function(){!this.eat(I.semi)&&!this.insertSemicolon()&&this.unexpected()},v.afterTrailingComma=function(f,S){if(this.type===f)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),S||this.next(),!0},v.expect=function(f){this.eat(f)||this.unexpected()},v.unexpected=function(f){this.raise(f??this.start,"Unexpected token")};var T=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};v.checkPatternErrors=function(f,S){if(f){f.trailingComma>-1&&this.raiseRecoverable(f.trailingComma,"Comma is not permitted after the rest element");var F=S?f.parenthesizedAssign:f.parenthesizedBind;F>-1&&this.raiseRecoverable(F,S?"Assigning to rvalue":"Parenthesized pattern")}},v.checkExpressionErrors=function(f,S){if(!f)return!1;var F=f.shorthandAssign,$=f.doubleProto;if(!S)return F>=0||$>=0;F>=0&&this.raise(F,"Shorthand property assignments are valid only in destructuring patterns"),$>=0&&this.raiseRecoverable($,"Redefinition of __proto__ property")},v.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},v.isSimpleAssignTarget=function(f){return f.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(f.expression):f.type==="Identifier"||f.type==="MemberExpression"};var A=h.prototype;A.parseTopLevel=function(f){var S=Object.create(null);for(f.body||(f.body=[]);this.type!==I.eof;){var F=this.parseStatement(null,!0,S);f.body.push(F)}if(this.inModule)for(var $=0,ae=Object.keys(this.undefinedExports);$<ae.length;$+=1){var Te=ae[$];this.raiseRecoverable(this.undefinedExports[Te].start,"Export '"+Te+"' is not defined")}return this.adaptDirectivePrologue(f.body),this.next(),f.sourceType=this.options.sourceType,this.finishNode(f,"Program")};var O={kind:"loop"},j={kind:"switch"};A.isLet=function(f){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;et.lastIndex=this.pos;var S=et.exec(this.input),F=this.pos+S[0].length,$=this.input.charCodeAt(F);if($===91||$===92)return!0;if(f)return!1;if($===123||$>55295&&$<56320)return!0;if(V($,!0)){for(var ae=F+1;L($=this.input.charCodeAt(ae),!0);)++ae;if($===92||$>55295&&$<56320)return!0;var Te=this.input.slice(F,ae);if(!b.test(Te))return!0}return!1},A.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;et.lastIndex=this.pos;var f=et.exec(this.input),S=this.pos+f[0].length,F;return!Ee.test(this.input.slice(this.pos,S))&&this.input.slice(S,S+8)==="function"&&(S+8===this.input.length||!(L(F=this.input.charCodeAt(S+8))||F>55295&&F<56320))},A.isUsingKeyword=function(f,S){if(this.options.ecmaVersion<17||!this.isContextual(f?"await":"using"))return!1;et.lastIndex=this.pos;var F=et.exec(this.input),$=this.pos+F[0].length;if(Ee.test(this.input.slice(this.pos,$)))return!1;if(f){var ae=$+5,Te;if(this.input.slice($,ae)!=="using"||ae===this.input.length||L(Te=this.input.charCodeAt(ae))||Te>55295&&Te<56320)return!1;et.lastIndex=ae;var Me=et.exec(this.input);if(Me&&Ee.test(this.input.slice(ae,ae+Me[0].length)))return!1}if(S){var Ze=$+2,Ke;if(this.input.slice($,Ze)==="of"&&(Ze===this.input.length||!L(Ke=this.input.charCodeAt(Ze))&&!(Ke>55295&&Ke<56320)))return!1}var kt=this.input.charCodeAt($);return V(kt,!0)||kt===92},A.isAwaitUsing=function(f){return this.isUsingKeyword(!0,f)},A.isUsing=function(f){return this.isUsingKeyword(!1,f)},A.parseStatement=function(f,S,F){var $=this.type,ae=this.startNode(),Te;switch(this.isLet(f)&&($=I._var,Te="let"),$){case I._break:case I._continue:return this.parseBreakContinueStatement(ae,$.keyword);case I._debugger:return this.parseDebuggerStatement(ae);case I._do:return this.parseDoStatement(ae);case I._for:return this.parseForStatement(ae);case I._function:return f&&(this.strict||f!=="if"&&f!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ae,!1,!f);case I._class:return f&&this.unexpected(),this.parseClass(ae,!0);case I._if:return this.parseIfStatement(ae);case I._return:return this.parseReturnStatement(ae);case I._switch:return this.parseSwitchStatement(ae);case I._throw:return this.parseThrowStatement(ae);case I._try:return this.parseTryStatement(ae);case I._const:case I._var:return Te=Te||this.value,f&&Te!=="var"&&this.unexpected(),this.parseVarStatement(ae,Te);case I._while:return this.parseWhileStatement(ae);case I._with:return this.parseWithStatement(ae);case I.braceL:return this.parseBlock(!0,ae);case I.semi:return this.parseEmptyStatement(ae);case I._export:case I._import:if(this.options.ecmaVersion>10&&$===I._import){et.lastIndex=this.pos;var Me=et.exec(this.input),Ze=this.pos+Me[0].length,Ke=this.input.charCodeAt(Ze);if(Ke===40||Ke===46)return this.parseExpressionStatement(ae,this.parseExpression())}return this.options.allowImportExportEverywhere||(S||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),$===I._import?this.parseImport(ae):this.parseExport(ae,F);default:if(this.isAsyncFunction())return f&&this.unexpected(),this.next(),this.parseFunctionStatement(ae,!0,!f);var kt=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(kt)return S&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),kt==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(ae,!1,kt),this.semicolon(),this.finishNode(ae,"VariableDeclaration");var Dt=this.value,ti=this.parseExpression();return $===I.name&&ti.type==="Identifier"&&this.eat(I.colon)?this.parseLabeledStatement(ae,Dt,ti,f):this.parseExpressionStatement(ae,ti)}},A.parseBreakContinueStatement=function(f,S){var F=S==="break";this.next(),this.eat(I.semi)||this.insertSemicolon()?f.label=null:this.type!==I.name?this.unexpected():(f.label=this.parseIdent(),this.semicolon());for(var $=0;$<this.labels.length;++$){var ae=this.labels[$];if((f.label==null||ae.name===f.label.name)&&(ae.kind!=null&&(F||ae.kind==="loop")||f.label&&F))break}return $===this.labels.length&&this.raise(f.start,"Unsyntactic "+S),this.finishNode(f,F?"BreakStatement":"ContinueStatement")},A.parseDebuggerStatement=function(f){return this.next(),this.semicolon(),this.finishNode(f,"DebuggerStatement")},A.parseDoStatement=function(f){return this.next(),this.labels.push(O),f.body=this.parseStatement("do"),this.labels.pop(),this.expect(I._while),f.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(I.semi):this.semicolon(),this.finishNode(f,"DoWhileStatement")},A.parseForStatement=function(f){this.next();var S=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(O),this.enterScope(0),this.expect(I.parenL),this.type===I.semi)return S>-1&&this.unexpected(S),this.parseFor(f,null);var F=this.isLet();if(this.type===I._var||this.type===I._const||F){var $=this.startNode(),ae=F?"let":this.value;return this.next(),this.parseVar($,!0,ae),this.finishNode($,"VariableDeclaration"),this.parseForAfterInit(f,$,S)}var Te=this.isContextual("let"),Me=!1,Ze=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(Ze){var Ke=this.startNode();return this.next(),Ze==="await using"&&this.next(),this.parseVar(Ke,!0,Ze),this.finishNode(Ke,"VariableDeclaration"),this.parseForAfterInit(f,Ke,S)}var kt=this.containsEsc,Dt=new T,ti=this.start,Ei=S>-1?this.parseExprSubscripts(Dt,"await"):this.parseExpression(!0,Dt);return this.type===I._in||(Me=this.options.ecmaVersion>=6&&this.isContextual("of"))?(S>-1?(this.type===I._in&&this.unexpected(S),f.await=!0):Me&&this.options.ecmaVersion>=8&&(Ei.start===ti&&!kt&&Ei.type==="Identifier"&&Ei.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(f.await=!1)),Te&&Me&&this.raise(Ei.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Ei,!1,Dt),this.checkLValPattern(Ei),this.parseForIn(f,Ei)):(this.checkExpressionErrors(Dt,!0),S>-1&&this.unexpected(S),this.parseFor(f,Ei))},A.parseForAfterInit=function(f,S,F){return(this.type===I._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&S.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===I._in?F>-1&&this.unexpected(F):f.await=F>-1),this.parseForIn(f,S)):(F>-1&&this.unexpected(F),this.parseFor(f,S))},A.parseFunctionStatement=function(f,S,F){return this.next(),this.parseFunction(f,P|(F?0:H),!1,S)},A.parseIfStatement=function(f){return this.next(),f.test=this.parseParenExpression(),f.consequent=this.parseStatement("if"),f.alternate=this.eat(I._else)?this.parseStatement("if"):null,this.finishNode(f,"IfStatement")},A.parseReturnStatement=function(f){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(I.semi)||this.insertSemicolon()?f.argument=null:(f.argument=this.parseExpression(),this.semicolon()),this.finishNode(f,"ReturnStatement")},A.parseSwitchStatement=function(f){this.next(),f.discriminant=this.parseParenExpression(),f.cases=[],this.expect(I.braceL),this.labels.push(j),this.enterScope(0);for(var S,F=!1;this.type!==I.braceR;)if(this.type===I._case||this.type===I._default){var $=this.type===I._case;S&&this.finishNode(S,"SwitchCase"),f.cases.push(S=this.startNode()),S.consequent=[],this.next(),$?S.test=this.parseExpression():(F&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),F=!0,S.test=null),this.expect(I.colon)}else S||this.unexpected(),S.consequent.push(this.parseStatement(null));return this.exitScope(),S&&this.finishNode(S,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(f,"SwitchStatement")},A.parseThrowStatement=function(f){return this.next(),Ee.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),f.argument=this.parseExpression(),this.semicolon(),this.finishNode(f,"ThrowStatement")};var M=[];A.parseCatchClauseParam=function(){var f=this.parseBindingAtom(),S=f.type==="Identifier";return this.enterScope(S?fs:0),this.checkLValPattern(f,S?Nt:Wt),this.expect(I.parenR),f},A.parseTryStatement=function(f){if(this.next(),f.block=this.parseBlock(),f.handler=null,this.type===I._catch){var S=this.startNode();this.next(),this.eat(I.parenL)?S.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),S.param=null,this.enterScope(0)),S.body=this.parseBlock(!1),this.exitScope(),f.handler=this.finishNode(S,"CatchClause")}return f.finalizer=this.eat(I._finally)?this.parseBlock():null,!f.handler&&!f.finalizer&&this.raise(f.start,"Missing catch or finally clause"),this.finishNode(f,"TryStatement")},A.parseVarStatement=function(f,S,F){return this.next(),this.parseVar(f,!1,S,F),this.semicolon(),this.finishNode(f,"VariableDeclaration")},A.parseWhileStatement=function(f){return this.next(),f.test=this.parseParenExpression(),this.labels.push(O),f.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(f,"WhileStatement")},A.parseWithStatement=function(f){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),f.object=this.parseParenExpression(),f.body=this.parseStatement("with"),this.finishNode(f,"WithStatement")},A.parseEmptyStatement=function(f){return this.next(),this.finishNode(f,"EmptyStatement")},A.parseLabeledStatement=function(f,S,F,$){for(var ae=0,Te=this.labels;ae<Te.length;ae+=1){var Me=Te[ae];Me.name===S&&this.raise(F.start,"Label '"+S+"' is already declared")}for(var Ze=this.type.isLoop?"loop":this.type===I._switch?"switch":null,Ke=this.labels.length-1;Ke>=0;Ke--){var kt=this.labels[Ke];if(kt.statementStart===f.start)kt.statementStart=this.start,kt.kind=Ze;else break}return this.labels.push({name:S,kind:Ze,statementStart:this.start}),f.body=this.parseStatement($?$.indexOf("label")===-1?$+"label":$:"label"),this.labels.pop(),f.label=F,this.finishNode(f,"LabeledStatement")},A.parseExpressionStatement=function(f,S){return f.expression=S,this.semicolon(),this.finishNode(f,"ExpressionStatement")},A.parseBlock=function(f,S,F){for(f===void 0&&(f=!0),S===void 0&&(S=this.startNode()),S.body=[],this.expect(I.braceL),f&&this.enterScope(0);this.type!==I.braceR;){var $=this.parseStatement(null);S.body.push($)}return F&&(this.strict=!1),this.next(),f&&this.exitScope(),this.finishNode(S,"BlockStatement")},A.parseFor=function(f,S){return f.init=S,this.expect(I.semi),f.test=this.type===I.semi?null:this.parseExpression(),this.expect(I.semi),f.update=this.type===I.parenR?null:this.parseExpression(),this.expect(I.parenR),f.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(f,"ForStatement")},A.parseForIn=function(f,S){var F=this.type===I._in;return this.next(),S.type==="VariableDeclaration"&&S.declarations[0].init!=null&&(!F||this.options.ecmaVersion<8||this.strict||S.kind!=="var"||S.declarations[0].id.type!=="Identifier")&&this.raise(S.start,(F?"for-in":"for-of")+" loop variable declaration may not have an initializer"),f.left=S,f.right=F?this.parseExpression():this.parseMaybeAssign(),this.expect(I.parenR),f.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(f,F?"ForInStatement":"ForOfStatement")},A.parseVar=function(f,S,F,$){for(f.declarations=[],f.kind=F;;){var ae=this.startNode();if(this.parseVarId(ae,F),this.eat(I.eq)?ae.init=this.parseMaybeAssign(S):!$&&F==="const"&&!(this.type===I._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!$&&(F==="using"||F==="await using")&&this.options.ecmaVersion>=17&&this.type!==I._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+F+" declaration"):!$&&ae.id.type!=="Identifier"&&!(S&&(this.type===I._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):ae.init=null,f.declarations.push(this.finishNode(ae,"VariableDeclarator")),!this.eat(I.comma))break}return f},A.parseVarId=function(f,S){f.id=S==="using"||S==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(f.id,S==="var"?mr:Wt,!1)};var P=1,H=2,z=4;A.parseFunction=function(f,S,F,$,ae){this.initFunction(f),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!$)&&(this.type===I.star&&S&H&&this.unexpected(),f.generator=this.eat(I.star)),this.options.ecmaVersion>=8&&(f.async=!!$),S&P&&(f.id=S&z&&this.type!==I.name?null:this.parseIdent(),f.id&&!(S&H)&&this.checkLValSimple(f.id,this.strict||f.generator||f.async?this.treatFunctionsAsVar?mr:Wt:$i));var Te=this.yieldPos,Me=this.awaitPos,Ze=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(er(f.async,f.generator)),S&P||(f.id=this.type===I.name?this.parseIdent():null),this.parseFunctionParams(f),this.parseFunctionBody(f,F,!1,ae),this.yieldPos=Te,this.awaitPos=Me,this.awaitIdentPos=Ze,this.finishNode(f,S&P?"FunctionDeclaration":"FunctionExpression")},A.parseFunctionParams=function(f){this.expect(I.parenL),f.params=this.parseBindingList(I.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},A.parseClass=function(f,S){this.next();var F=this.strict;this.strict=!0,this.parseClassId(f,S),this.parseClassSuper(f);var $=this.enterClassBody(),ae=this.startNode(),Te=!1;for(ae.body=[],this.expect(I.braceL);this.type!==I.braceR;){var Me=this.parseClassElement(f.superClass!==null);Me&&(ae.body.push(Me),Me.type==="MethodDefinition"&&Me.kind==="constructor"?(Te&&this.raiseRecoverable(Me.start,"Duplicate constructor in the same class"),Te=!0):Me.key&&Me.key.type==="PrivateIdentifier"&&R($,Me)&&this.raiseRecoverable(Me.key.start,"Identifier '#"+Me.key.name+"' has already been declared"))}return this.strict=F,this.next(),f.body=this.finishNode(ae,"ClassBody"),this.exitClassBody(),this.finishNode(f,S?"ClassDeclaration":"ClassExpression")},A.parseClassElement=function(f){if(this.eat(I.semi))return null;var S=this.options.ecmaVersion,F=this.startNode(),$="",ae=!1,Te=!1,Me="method",Ze=!1;if(this.eatContextual("static")){if(S>=13&&this.eat(I.braceL))return this.parseClassStaticBlock(F),F;this.isClassElementNameStart()||this.type===I.star?Ze=!0:$="static"}if(F.static=Ze,!$&&S>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===I.star)&&!this.canInsertSemicolon()?Te=!0:$="async"),!$&&(S>=9||!Te)&&this.eat(I.star)&&(ae=!0),!$&&!Te&&!ae){var Ke=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Me=Ke:$=Ke)}if($?(F.computed=!1,F.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),F.key.name=$,this.finishNode(F.key,"Identifier")):this.parseClassElementName(F),S<13||this.type===I.parenL||Me!=="method"||ae||Te){var kt=!F.static&&K(F,"constructor"),Dt=kt&&f;kt&&Me!=="method"&&this.raise(F.key.start,"Constructor can't have get/set modifier"),F.kind=kt?"constructor":Me,this.parseClassMethod(F,ae,Te,Dt)}else this.parseClassField(F);return F},A.isClassElementNameStart=function(){return this.type===I.name||this.type===I.privateId||this.type===I.num||this.type===I.string||this.type===I.bracketL||this.type.keyword},A.parseClassElementName=function(f){this.type===I.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),f.computed=!1,f.key=this.parsePrivateIdent()):this.parsePropertyName(f)},A.parseClassMethod=function(f,S,F,$){var ae=f.key;f.kind==="constructor"?(S&&this.raise(ae.start,"Constructor can't be a generator"),F&&this.raise(ae.start,"Constructor can't be an async method")):f.static&&K(f,"prototype")&&this.raise(ae.start,"Classes may not have a static property named prototype");var Te=f.value=this.parseMethod(S,F,$);return f.kind==="get"&&Te.params.length!==0&&this.raiseRecoverable(Te.start,"getter should have no params"),f.kind==="set"&&Te.params.length!==1&&this.raiseRecoverable(Te.start,"setter should have exactly one param"),f.kind==="set"&&Te.params[0].type==="RestElement"&&this.raiseRecoverable(Te.params[0].start,"Setter cannot use rest params"),this.finishNode(f,"MethodDefinition")},A.parseClassField=function(f){return K(f,"constructor")?this.raise(f.key.start,"Classes can't have a field named 'constructor'"):f.static&&K(f,"prototype")&&this.raise(f.key.start,"Classes can't have a static field named 'prototype'"),this.eat(I.eq)?(this.enterScope(Qs|Ds),f.value=this.parseMaybeAssign(),this.exitScope()):f.value=null,this.semicolon(),this.finishNode(f,"PropertyDefinition")},A.parseClassStaticBlock=function(f){f.body=[];var S=this.labels;for(this.labels=[],this.enterScope(Ns|Ds);this.type!==I.braceR;){var F=this.parseStatement(null);f.body.push(F)}return this.next(),this.exitScope(),this.labels=S,this.finishNode(f,"StaticBlock")},A.parseClassId=function(f,S){this.type===I.name?(f.id=this.parseIdent(),S&&this.checkLValSimple(f.id,Wt,!1)):(S===!0&&this.unexpected(),f.id=null)},A.parseClassSuper=function(f){f.superClass=this.eat(I._extends)?this.parseExprSubscripts(null,!1):null},A.enterClassBody=function(){var f={declared:Object.create(null),used:[]};return this.privateNameStack.push(f),f.declared},A.exitClassBody=function(){var f=this.privateNameStack.pop(),S=f.declared,F=f.used;if(this.options.checkPrivateFields)for(var $=this.privateNameStack.length,ae=$===0?null:this.privateNameStack[$-1],Te=0;Te<F.length;++Te){var Me=F[Te];he(S,Me.name)||(ae?ae.used.push(Me):this.raiseRecoverable(Me.start,"Private field '#"+Me.name+"' must be declared in an enclosing class"))}};function R(f,S){var F=S.key.name,$=f[F],ae="true";return S.type==="MethodDefinition"&&(S.kind==="get"||S.kind==="set")&&(ae=(S.static?"s":"i")+S.kind),$==="iget"&&ae==="iset"||$==="iset"&&ae==="iget"||$==="sget"&&ae==="sset"||$==="sset"&&ae==="sget"?(f[F]="true",!1):$?!0:(f[F]=ae,!1)}function K(f,S){var F=f.computed,$=f.key;return!F&&($.type==="Identifier"&&$.name===S||$.type==="Literal"&&$.value===S)}A.parseExportAllDeclaration=function(f,S){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(f.exported=this.parseModuleExportName(),this.checkExport(S,f.exported,this.lastTokStart)):f.exported=null),this.expectContextual("from"),this.type!==I.string&&this.unexpected(),f.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(f.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(f,"ExportAllDeclaration")},A.parseExport=function(f,S){if(this.next(),this.eat(I.star))return this.parseExportAllDeclaration(f,S);if(this.eat(I._default))return this.checkExport(S,"default",this.lastTokStart),f.declaration=this.parseExportDefaultDeclaration(),this.finishNode(f,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())f.declaration=this.parseExportDeclaration(f),f.declaration.type==="VariableDeclaration"?this.checkVariableExport(S,f.declaration.declarations):this.checkExport(S,f.declaration.id,f.declaration.id.start),f.specifiers=[],f.source=null,this.options.ecmaVersion>=16&&(f.attributes=[]);else{if(f.declaration=null,f.specifiers=this.parseExportSpecifiers(S),this.eatContextual("from"))this.type!==I.string&&this.unexpected(),f.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(f.attributes=this.parseWithClause());else{for(var F=0,$=f.specifiers;F<$.length;F+=1){var ae=$[F];this.checkUnreserved(ae.local),this.checkLocalExport(ae.local),ae.local.type==="Literal"&&this.raise(ae.local.start,"A string literal cannot be used as an exported binding without `from`.")}f.source=null,this.options.ecmaVersion>=16&&(f.attributes=[])}this.semicolon()}return this.finishNode(f,"ExportNamedDeclaration")},A.parseExportDeclaration=function(f){return this.parseStatement(null)},A.parseExportDefaultDeclaration=function(){var f;if(this.type===I._function||(f=this.isAsyncFunction())){var S=this.startNode();return this.next(),f&&this.next(),this.parseFunction(S,P|z,!1,f)}else if(this.type===I._class){var F=this.startNode();return this.parseClass(F,"nullableID")}else{var $=this.parseMaybeAssign();return this.semicolon(),$}},A.checkExport=function(f,S,F){f&&(typeof S!="string"&&(S=S.type==="Identifier"?S.name:S.value),he(f,S)&&this.raiseRecoverable(F,"Duplicate export '"+S+"'"),f[S]=!0)},A.checkPatternExport=function(f,S){var F=S.type;if(F==="Identifier")this.checkExport(f,S,S.start);else if(F==="ObjectPattern")for(var $=0,ae=S.properties;$<ae.length;$+=1){var Te=ae[$];this.checkPatternExport(f,Te)}else if(F==="ArrayPattern")for(var Me=0,Ze=S.elements;Me<Ze.length;Me+=1){var Ke=Ze[Me];Ke&&this.checkPatternExport(f,Ke)}else F==="Property"?this.checkPatternExport(f,S.value):F==="AssignmentPattern"?this.checkPatternExport(f,S.left):F==="RestElement"&&this.checkPatternExport(f,S.argument)},A.checkVariableExport=function(f,S){if(f)for(var F=0,$=S;F<$.length;F+=1){var ae=$[F];this.checkPatternExport(f,ae.id)}},A.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},A.parseExportSpecifier=function(f){var S=this.startNode();return S.local=this.parseModuleExportName(),S.exported=this.eatContextual("as")?this.parseModuleExportName():S.local,this.checkExport(f,S.exported,S.exported.start),this.finishNode(S,"ExportSpecifier")},A.parseExportSpecifiers=function(f){var S=[],F=!0;for(this.expect(I.braceL);!this.eat(I.braceR);){if(F)F=!1;else if(this.expect(I.comma),this.afterTrailingComma(I.braceR))break;S.push(this.parseExportSpecifier(f))}return S},A.parseImport=function(f){return this.next(),this.type===I.string?(f.specifiers=M,f.source=this.parseExprAtom()):(f.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),f.source=this.type===I.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(f.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(f,"ImportDeclaration")},A.parseImportSpecifier=function(){var f=this.startNode();return f.imported=this.parseModuleExportName(),this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported),this.checkLValSimple(f.local,Wt),this.finishNode(f,"ImportSpecifier")},A.parseImportDefaultSpecifier=function(){var f=this.startNode();return f.local=this.parseIdent(),this.checkLValSimple(f.local,Wt),this.finishNode(f,"ImportDefaultSpecifier")},A.parseImportNamespaceSpecifier=function(){var f=this.startNode();return this.next(),this.expectContextual("as"),f.local=this.parseIdent(),this.checkLValSimple(f.local,Wt),this.finishNode(f,"ImportNamespaceSpecifier")},A.parseImportSpecifiers=function(){var f=[],S=!0;if(this.type===I.name&&(f.push(this.parseImportDefaultSpecifier()),!this.eat(I.comma)))return f;if(this.type===I.star)return f.push(this.parseImportNamespaceSpecifier()),f;for(this.expect(I.braceL);!this.eat(I.braceR);){if(S)S=!1;else if(this.expect(I.comma),this.afterTrailingComma(I.braceR))break;f.push(this.parseImportSpecifier())}return f},A.parseWithClause=function(){var f=[];if(!this.eat(I._with))return f;this.expect(I.braceL);for(var S={},F=!0;!this.eat(I.braceR);){if(F)F=!1;else if(this.expect(I.comma),this.afterTrailingComma(I.braceR))break;var $=this.parseImportAttribute(),ae=$.key.type==="Identifier"?$.key.name:$.key.value;he(S,ae)&&this.raiseRecoverable($.key.start,"Duplicate attribute key '"+ae+"'"),S[ae]=!0,f.push($)}return f},A.parseImportAttribute=function(){var f=this.startNode();return f.key=this.type===I.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(I.colon),this.type!==I.string&&this.unexpected(),f.value=this.parseExprAtom(),this.finishNode(f,"ImportAttribute")},A.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===I.string){var f=this.parseLiteral(this.value);return _e.test(f.value)&&this.raise(f.start,"An export name cannot include a lone surrogate."),f}return this.parseIdent(!0)},A.adaptDirectivePrologue=function(f){for(var S=0;S<f.length&&this.isDirectiveCandidate(f[S]);++S)f[S].directive=f[S].expression.raw.slice(1,-1)},A.isDirectiveCandidate=function(f){return this.options.ecmaVersion>=5&&f.type==="ExpressionStatement"&&f.expression.type==="Literal"&&typeof f.expression.value=="string"&&(this.input[f.start]==='"'||this.input[f.start]==="'")};var Y=h.prototype;Y.toAssignable=function(f,S,F){if(this.options.ecmaVersion>=6&&f)switch(f.type){case"Identifier":this.inAsync&&f.name==="await"&&this.raise(f.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":f.type="ObjectPattern",F&&this.checkPatternErrors(F,!0);for(var $=0,ae=f.properties;$<ae.length;$+=1){var Te=ae[$];this.toAssignable(Te,S),Te.type==="RestElement"&&(Te.argument.type==="ArrayPattern"||Te.argument.type==="ObjectPattern")&&this.raise(Te.argument.start,"Unexpected token")}break;case"Property":f.kind!=="init"&&this.raise(f.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(f.value,S);break;case"ArrayExpression":f.type="ArrayPattern",F&&this.checkPatternErrors(F,!0),this.toAssignableList(f.elements,S);break;case"SpreadElement":f.type="RestElement",this.toAssignable(f.argument,S),f.argument.type==="AssignmentPattern"&&this.raise(f.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":f.operator!=="="&&this.raise(f.left.end,"Only '=' operator can be used for specifying default value."),f.type="AssignmentPattern",delete f.operator,this.toAssignable(f.left,S);break;case"ParenthesizedExpression":this.toAssignable(f.expression,S,F);break;case"ChainExpression":this.raiseRecoverable(f.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!S)break;default:this.raise(f.start,"Assigning to rvalue")}else F&&this.checkPatternErrors(F,!0);return f},Y.toAssignableList=function(f,S){for(var F=f.length,$=0;$<F;$++){var ae=f[$];ae&&this.toAssignable(ae,S)}if(F){var Te=f[F-1];this.options.ecmaVersion===6&&S&&Te&&Te.type==="RestElement"&&Te.argument.type!=="Identifier"&&this.unexpected(Te.argument.start)}return f},Y.parseSpread=function(f){var S=this.startNode();return this.next(),S.argument=this.parseMaybeAssign(!1,f),this.finishNode(S,"SpreadElement")},Y.parseRestBinding=function(){var f=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==I.name&&this.unexpected(),f.argument=this.parseBindingAtom(),this.finishNode(f,"RestElement")},Y.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case I.bracketL:var f=this.startNode();return this.next(),f.elements=this.parseBindingList(I.bracketR,!0,!0),this.finishNode(f,"ArrayPattern");case I.braceL:return this.parseObj(!0)}return this.parseIdent()},Y.parseBindingList=function(f,S,F,$){for(var ae=[],Te=!0;!this.eat(f);)if(Te?Te=!1:this.expect(I.comma),S&&this.type===I.comma)ae.push(null);else{if(F&&this.afterTrailingComma(f))break;if(this.type===I.ellipsis){var Me=this.parseRestBinding();this.parseBindingListItem(Me),ae.push(Me),this.type===I.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(f);break}else ae.push(this.parseAssignableListItem($))}return ae},Y.parseAssignableListItem=function(f){var S=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(S),S},Y.parseBindingListItem=function(f){return f},Y.parseMaybeDefault=function(f,S,F){if(F=F||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(I.eq))return F;var $=this.startNodeAt(f,S);return $.left=F,$.right=this.parseMaybeAssign(),this.finishNode($,"AssignmentPattern")},Y.checkLValSimple=function(f,S,F){S===void 0&&(S=oi);var $=S!==oi;switch(f.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(f.name)&&this.raiseRecoverable(f.start,($?"Binding ":"Assigning to ")+f.name+" in strict mode"),$&&(S===Wt&&f.name==="let"&&this.raiseRecoverable(f.start,"let is disallowed as a lexically bound name"),F&&(he(F,f.name)&&this.raiseRecoverable(f.start,"Argument name clash"),F[f.name]=!0),S!==l&&this.declareName(f.name,S,f.start));break;case"ChainExpression":this.raiseRecoverable(f.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":$&&this.raiseRecoverable(f.start,"Binding member expression");break;case"ParenthesizedExpression":return $&&this.raiseRecoverable(f.start,"Binding parenthesized expression"),this.checkLValSimple(f.expression,S,F);default:this.raise(f.start,($?"Binding":"Assigning to")+" rvalue")}},Y.checkLValPattern=function(f,S,F){switch(S===void 0&&(S=oi),f.type){case"ObjectPattern":for(var $=0,ae=f.properties;$<ae.length;$+=1){var Te=ae[$];this.checkLValInnerPattern(Te,S,F)}break;case"ArrayPattern":for(var Me=0,Ze=f.elements;Me<Ze.length;Me+=1){var Ke=Ze[Me];Ke&&this.checkLValInnerPattern(Ke,S,F)}break;default:this.checkLValSimple(f,S,F)}},Y.checkLValInnerPattern=function(f,S,F){switch(S===void 0&&(S=oi),f.type){case"Property":this.checkLValInnerPattern(f.value,S,F);break;case"AssignmentPattern":this.checkLValPattern(f.left,S,F);break;case"RestElement":this.checkLValPattern(f.argument,S,F);break;default:this.checkLValPattern(f,S,F)}};var Z=function(S,F,$,ae,Te){this.token=S,this.isExpr=!!F,this.preserveSpace=!!$,this.override=ae,this.generator=!!Te},B={b_stat:new Z("{",!1),b_expr:new Z("{",!0),b_tmpl:new Z("${",!1),p_stat:new Z("(",!1),p_expr:new Z("(",!0),q_tmpl:new Z("`",!0,!0,function(f){return f.tryReadTemplateToken()}),f_stat:new Z("function",!1),f_expr:new Z("function",!0),f_expr_gen:new Z("function",!0,!1,null,!0),f_gen:new Z("function",!1,!1,null,!0)},q=h.prototype;q.initialContext=function(){return[B.b_stat]},q.curContext=function(){return this.context[this.context.length-1]},q.braceIsBlock=function(f){var S=this.curContext();return S===B.f_expr||S===B.f_stat?!0:f===I.colon&&(S===B.b_stat||S===B.b_expr)?!S.isExpr:f===I._return||f===I.name&&this.exprAllowed?Ee.test(this.input.slice(this.lastTokEnd,this.start)):f===I._else||f===I.semi||f===I.eof||f===I.parenR||f===I.arrow?!0:f===I.braceL?S===B.b_stat:f===I._var||f===I._const||f===I.name?!1:!this.exprAllowed},q.inGeneratorContext=function(){for(var f=this.context.length-1;f>=1;f--){var S=this.context[f];if(S.token==="function")return S.generator}return!1},q.updateContext=function(f){var S,F=this.type;F.keyword&&f===I.dot?this.exprAllowed=!1:(S=F.updateContext)?S.call(this,f):this.exprAllowed=F.beforeExpr},q.overrideContext=function(f){this.curContext()!==f&&(this.context[this.context.length-1]=f)},I.parenR.updateContext=I.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var f=this.context.pop();f===B.b_stat&&this.curContext().token==="function"&&(f=this.context.pop()),this.exprAllowed=!f.isExpr},I.braceL.updateContext=function(f){this.context.push(this.braceIsBlock(f)?B.b_stat:B.b_expr),this.exprAllowed=!0},I.dollarBraceL.updateContext=function(){this.context.push(B.b_tmpl),this.exprAllowed=!0},I.parenL.updateContext=function(f){var S=f===I._if||f===I._for||f===I._with||f===I._while;this.context.push(S?B.p_stat:B.p_expr),this.exprAllowed=!0},I.incDec.updateContext=function(){},I._function.updateContext=I._class.updateContext=function(f){f.beforeExpr&&f!==I._else&&!(f===I.semi&&this.curContext()!==B.p_stat)&&!(f===I._return&&Ee.test(this.input.slice(this.lastTokEnd,this.start)))&&!((f===I.colon||f===I.braceL)&&this.curContext()===B.b_stat)?this.context.push(B.f_expr):this.context.push(B.f_stat),this.exprAllowed=!1},I.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},I.backQuote.updateContext=function(){this.curContext()===B.q_tmpl?this.context.pop():this.context.push(B.q_tmpl),this.exprAllowed=!1},I.star.updateContext=function(f){if(f===I._function){var S=this.context.length-1;this.context[S]===B.f_expr?this.context[S]=B.f_expr_gen:this.context[S]=B.f_gen}this.exprAllowed=!0},I.name.updateContext=function(f){var S=!1;this.options.ecmaVersion>=6&&f!==I.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(S=!0),this.exprAllowed=S};var D=h.prototype;D.checkPropClash=function(f,S,F){if(!(this.options.ecmaVersion>=9&&f.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(f.computed||f.method||f.shorthand))){var $=f.key,ae;switch($.type){case"Identifier":ae=$.name;break;case"Literal":ae=String($.value);break;default:return}var Te=f.kind;if(this.options.ecmaVersion>=6){ae==="__proto__"&&Te==="init"&&(S.proto&&(F?F.doubleProto<0&&(F.doubleProto=$.start):this.raiseRecoverable($.start,"Redefinition of __proto__ property")),S.proto=!0);return}ae="$"+ae;var Me=S[ae];if(Me){var Ze;Te==="init"?Ze=this.strict&&Me.init||Me.get||Me.set:Ze=Me.init||Me[Te],Ze&&this.raiseRecoverable($.start,"Redefinition of property")}else Me=S[ae]={init:!1,get:!1,set:!1};Me[Te]=!0}},D.parseExpression=function(f,S){var F=this.start,$=this.startLoc,ae=this.parseMaybeAssign(f,S);if(this.type===I.comma){var Te=this.startNodeAt(F,$);for(Te.expressions=[ae];this.eat(I.comma);)Te.expressions.push(this.parseMaybeAssign(f,S));return this.finishNode(Te,"SequenceExpression")}return ae},D.parseMaybeAssign=function(f,S,F){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(f);this.exprAllowed=!1}var $=!1,ae=-1,Te=-1,Me=-1;S?(ae=S.parenthesizedAssign,Te=S.trailingComma,Me=S.doubleProto,S.parenthesizedAssign=S.trailingComma=-1):(S=new T,$=!0);var Ze=this.start,Ke=this.startLoc;(this.type===I.parenL||this.type===I.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=f==="await");var kt=this.parseMaybeConditional(f,S);if(F&&(kt=F.call(this,kt,Ze,Ke)),this.type.isAssign){var Dt=this.startNodeAt(Ze,Ke);return Dt.operator=this.value,this.type===I.eq&&(kt=this.toAssignable(kt,!1,S)),$||(S.parenthesizedAssign=S.trailingComma=S.doubleProto=-1),S.shorthandAssign>=kt.start&&(S.shorthandAssign=-1),this.type===I.eq?this.checkLValPattern(kt):this.checkLValSimple(kt),Dt.left=kt,this.next(),Dt.right=this.parseMaybeAssign(f),Me>-1&&(S.doubleProto=Me),this.finishNode(Dt,"AssignmentExpression")}else $&&this.checkExpressionErrors(S,!0);return ae>-1&&(S.parenthesizedAssign=ae),Te>-1&&(S.trailingComma=Te),kt},D.parseMaybeConditional=function(f,S){var F=this.start,$=this.startLoc,ae=this.parseExprOps(f,S);if(this.checkExpressionErrors(S))return ae;if(this.eat(I.question)){var Te=this.startNodeAt(F,$);return Te.test=ae,Te.consequent=this.parseMaybeAssign(),this.expect(I.colon),Te.alternate=this.parseMaybeAssign(f),this.finishNode(Te,"ConditionalExpression")}return ae},D.parseExprOps=function(f,S){var F=this.start,$=this.startLoc,ae=this.parseMaybeUnary(S,!1,!1,f);return this.checkExpressionErrors(S)||ae.start===F&&ae.type==="ArrowFunctionExpression"?ae:this.parseExprOp(ae,F,$,-1,f)},D.parseExprOp=function(f,S,F,$,ae){var Te=this.type.binop;if(Te!=null&&(!ae||this.type!==I._in)&&Te>$){var Me=this.type===I.logicalOR||this.type===I.logicalAND,Ze=this.type===I.coalesce;Ze&&(Te=I.logicalAND.binop);var Ke=this.value;this.next();var kt=this.start,Dt=this.startLoc,ti=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,ae),kt,Dt,Te,ae),Ei=this.buildBinary(S,F,f,ti,Ke,Me||Ze);return(Me&&this.type===I.coalesce||Ze&&(this.type===I.logicalOR||this.type===I.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ei,S,F,$,ae)}return f},D.buildBinary=function(f,S,F,$,ae,Te){$.type==="PrivateIdentifier"&&this.raise($.start,"Private identifier can only be left side of binary expression");var Me=this.startNodeAt(f,S);return Me.left=F,Me.operator=ae,Me.right=$,this.finishNode(Me,Te?"LogicalExpression":"BinaryExpression")},D.parseMaybeUnary=function(f,S,F,$){var ae=this.start,Te=this.startLoc,Me;if(this.isContextual("await")&&this.canAwait)Me=this.parseAwait($),S=!0;else if(this.type.prefix){var Ze=this.startNode(),Ke=this.type===I.incDec;Ze.operator=this.value,Ze.prefix=!0,this.next(),Ze.argument=this.parseMaybeUnary(null,!0,Ke,$),this.checkExpressionErrors(f,!0),Ke?this.checkLValSimple(Ze.argument):this.strict&&Ze.operator==="delete"&&X(Ze.argument)?this.raiseRecoverable(Ze.start,"Deleting local variable in strict mode"):Ze.operator==="delete"&&Q(Ze.argument)?this.raiseRecoverable(Ze.start,"Private fields can not be deleted"):S=!0,Me=this.finishNode(Ze,Ke?"UpdateExpression":"UnaryExpression")}else if(!S&&this.type===I.privateId)($||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Me=this.parsePrivateIdent(),this.type!==I._in&&this.unexpected();else{if(Me=this.parseExprSubscripts(f,$),this.checkExpressionErrors(f))return Me;for(;this.type.postfix&&!this.canInsertSemicolon();){var kt=this.startNodeAt(ae,Te);kt.operator=this.value,kt.prefix=!1,kt.argument=Me,this.checkLValSimple(Me),this.next(),Me=this.finishNode(kt,"UpdateExpression")}}if(!F&&this.eat(I.starstar))if(S)this.unexpected(this.lastTokStart);else return this.buildBinary(ae,Te,Me,this.parseMaybeUnary(null,!1,!1,$),"**",!1);else return Me};function X(f){return f.type==="Identifier"||f.type==="ParenthesizedExpression"&&X(f.expression)}function Q(f){return f.type==="MemberExpression"&&f.property.type==="PrivateIdentifier"||f.type==="ChainExpression"&&Q(f.expression)||f.type==="ParenthesizedExpression"&&Q(f.expression)}D.parseExprSubscripts=function(f,S){var F=this.start,$=this.startLoc,ae=this.parseExprAtom(f,S);if(ae.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return ae;var Te=this.parseSubscripts(ae,F,$,!1,S);return f&&Te.type==="MemberExpression"&&(f.parenthesizedAssign>=Te.start&&(f.parenthesizedAssign=-1),f.parenthesizedBind>=Te.start&&(f.parenthesizedBind=-1),f.trailingComma>=Te.start&&(f.trailingComma=-1)),Te},D.parseSubscripts=function(f,S,F,$,ae){for(var Te=this.options.ecmaVersion>=8&&f.type==="Identifier"&&f.name==="async"&&this.lastTokEnd===f.end&&!this.canInsertSemicolon()&&f.end-f.start===5&&this.potentialArrowAt===f.start,Me=!1;;){var Ze=this.parseSubscript(f,S,F,$,Te,Me,ae);if(Ze.optional&&(Me=!0),Ze===f||Ze.type==="ArrowFunctionExpression"){if(Me){var Ke=this.startNodeAt(S,F);Ke.expression=Ze,Ze=this.finishNode(Ke,"ChainExpression")}return Ze}f=Ze}},D.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(I.arrow)},D.parseSubscriptAsyncArrow=function(f,S,F,$){return this.parseArrowExpression(this.startNodeAt(f,S),F,!0,$)},D.parseSubscript=function(f,S,F,$,ae,Te,Me){var Ze=this.options.ecmaVersion>=11,Ke=Ze&&this.eat(I.questionDot);$&&Ke&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var kt=this.eat(I.bracketL);if(kt||Ke&&this.type!==I.parenL&&this.type!==I.backQuote||this.eat(I.dot)){var Dt=this.startNodeAt(S,F);Dt.object=f,kt?(Dt.property=this.parseExpression(),this.expect(I.bracketR)):this.type===I.privateId&&f.type!=="Super"?Dt.property=this.parsePrivateIdent():Dt.property=this.parseIdent(this.options.allowReserved!=="never"),Dt.computed=!!kt,Ze&&(Dt.optional=Ke),f=this.finishNode(Dt,"MemberExpression")}else if(!$&&this.eat(I.parenL)){var ti=new T,Ei=this.yieldPos,ps=this.awaitPos,ms=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var bi=this.parseExprList(I.parenR,this.options.ecmaVersion>=8,!1,ti);if(ae&&!Ke&&this.shouldParseAsyncArrow())return this.checkPatternErrors(ti,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ei,this.awaitPos=ps,this.awaitIdentPos=ms,this.parseSubscriptAsyncArrow(S,F,bi,Me);this.checkExpressionErrors(ti,!0),this.yieldPos=Ei||this.yieldPos,this.awaitPos=ps||this.awaitPos,this.awaitIdentPos=ms||this.awaitIdentPos;var bn=this.startNodeAt(S,F);bn.callee=f,bn.arguments=bi,Ze&&(bn.optional=Ke),f=this.finishNode(bn,"CallExpression")}else if(this.type===I.backQuote){(Ke||Te)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var ts=this.startNodeAt(S,F);ts.tag=f,ts.quasi=this.parseTemplate({isTagged:!0}),f=this.finishNode(ts,"TaggedTemplateExpression")}return f},D.parseExprAtom=function(f,S,F){this.type===I.slash&&this.readRegexp();var $,ae=this.potentialArrowAt===this.start;switch(this.type){case I._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),$=this.startNode(),this.next(),this.type===I.parenL&&!this.allowDirectSuper&&this.raise($.start,"super() call outside constructor of a subclass"),this.type!==I.dot&&this.type!==I.bracketL&&this.type!==I.parenL&&this.unexpected(),this.finishNode($,"Super");case I._this:return $=this.startNode(),this.next(),this.finishNode($,"ThisExpression");case I.name:var Te=this.start,Me=this.startLoc,Ze=this.containsEsc,Ke=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ze&&Ke.name==="async"&&!this.canInsertSemicolon()&&this.eat(I._function))return this.overrideContext(B.f_expr),this.parseFunction(this.startNodeAt(Te,Me),0,!1,!0,S);if(ae&&!this.canInsertSemicolon()){if(this.eat(I.arrow))return this.parseArrowExpression(this.startNodeAt(Te,Me),[Ke],!1,S);if(this.options.ecmaVersion>=8&&Ke.name==="async"&&this.type===I.name&&!Ze&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Ke=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(I.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Te,Me),[Ke],!0,S)}return Ke;case I.regexp:var kt=this.value;return $=this.parseLiteral(kt.value),$.regex={pattern:kt.pattern,flags:kt.flags},$;case I.num:case I.string:return this.parseLiteral(this.value);case I._null:case I._true:case I._false:return $=this.startNode(),$.value=this.type===I._null?null:this.type===I._true,$.raw=this.type.keyword,this.next(),this.finishNode($,"Literal");case I.parenL:var Dt=this.start,ti=this.parseParenAndDistinguishExpression(ae,S);return f&&(f.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ti)&&(f.parenthesizedAssign=Dt),f.parenthesizedBind<0&&(f.parenthesizedBind=Dt)),ti;case I.bracketL:return $=this.startNode(),this.next(),$.elements=this.parseExprList(I.bracketR,!0,!0,f),this.finishNode($,"ArrayExpression");case I.braceL:return this.overrideContext(B.b_expr),this.parseObj(!1,f);case I._function:return $=this.startNode(),this.next(),this.parseFunction($,0);case I._class:return this.parseClass(this.startNode(),!1);case I._new:return this.parseNew();case I.backQuote:return this.parseTemplate();case I._import:return this.options.ecmaVersion>=11?this.parseExprImport(F):this.unexpected();default:return this.parseExprAtomDefault()}},D.parseExprAtomDefault=function(){this.unexpected()},D.parseExprImport=function(f){var S=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===I.parenL&&!f)return this.parseDynamicImport(S);if(this.type===I.dot){var F=this.startNodeAt(S.start,S.loc&&S.loc.start);return F.name="import",S.meta=this.finishNode(F,"Identifier"),this.parseImportMeta(S)}else this.unexpected()},D.parseDynamicImport=function(f){if(this.next(),f.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(I.parenR)?f.options=null:(this.expect(I.comma),this.afterTrailingComma(I.parenR)?f.options=null:(f.options=this.parseMaybeAssign(),this.eat(I.parenR)||(this.expect(I.comma),this.afterTrailingComma(I.parenR)||this.unexpected())));else if(!this.eat(I.parenR)){var S=this.start;this.eat(I.comma)&&this.eat(I.parenR)?this.raiseRecoverable(S,"Trailing comma is not allowed in import()"):this.unexpected(S)}return this.finishNode(f,"ImportExpression")},D.parseImportMeta=function(f){this.next();var S=this.containsEsc;return f.property=this.parseIdent(!0),f.property.name!=="meta"&&this.raiseRecoverable(f.property.start,"The only valid meta property for import is 'import.meta'"),S&&this.raiseRecoverable(f.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(f.start,"Cannot use 'import.meta' outside a module"),this.finishNode(f,"MetaProperty")},D.parseLiteral=function(f){var S=this.startNode();return S.value=f,S.raw=this.input.slice(this.start,this.end),S.raw.charCodeAt(S.raw.length-1)===110&&(S.bigint=S.value!=null?S.value.toString():S.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(S,"Literal")},D.parseParenExpression=function(){this.expect(I.parenL);var f=this.parseExpression();return this.expect(I.parenR),f},D.shouldParseArrow=function(f){return!this.canInsertSemicolon()},D.parseParenAndDistinguishExpression=function(f,S){var F=this.start,$=this.startLoc,ae,Te=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Me=this.start,Ze=this.startLoc,Ke=[],kt=!0,Dt=!1,ti=new T,Ei=this.yieldPos,ps=this.awaitPos,ms;for(this.yieldPos=0,this.awaitPos=0;this.type!==I.parenR;)if(kt?kt=!1:this.expect(I.comma),Te&&this.afterTrailingComma(I.parenR,!0)){Dt=!0;break}else if(this.type===I.ellipsis){ms=this.start,Ke.push(this.parseParenItem(this.parseRestBinding())),this.type===I.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Ke.push(this.parseMaybeAssign(!1,ti,this.parseParenItem));var bi=this.lastTokEnd,bn=this.lastTokEndLoc;if(this.expect(I.parenR),f&&this.shouldParseArrow(Ke)&&this.eat(I.arrow))return this.checkPatternErrors(ti,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ei,this.awaitPos=ps,this.parseParenArrowList(F,$,Ke,S);(!Ke.length||Dt)&&this.unexpected(this.lastTokStart),ms&&this.unexpected(ms),this.checkExpressionErrors(ti,!0),this.yieldPos=Ei||this.yieldPos,this.awaitPos=ps||this.awaitPos,Ke.length>1?(ae=this.startNodeAt(Me,Ze),ae.expressions=Ke,this.finishNodeAt(ae,"SequenceExpression",bi,bn)):ae=Ke[0]}else ae=this.parseParenExpression();if(this.options.preserveParens){var ts=this.startNodeAt(F,$);return ts.expression=ae,this.finishNode(ts,"ParenthesizedExpression")}else return ae},D.parseParenItem=function(f){return f},D.parseParenArrowList=function(f,S,F,$){return this.parseArrowExpression(this.startNodeAt(f,S),F,!1,$)};var J=[];D.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var f=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===I.dot){var S=this.startNodeAt(f.start,f.loc&&f.loc.start);S.name="new",f.meta=this.finishNode(S,"Identifier"),this.next();var F=this.containsEsc;return f.property=this.parseIdent(!0),f.property.name!=="target"&&this.raiseRecoverable(f.property.start,"The only valid meta property for new is 'new.target'"),F&&this.raiseRecoverable(f.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(f.start,"'new.target' can only be used in functions and class static block"),this.finishNode(f,"MetaProperty")}var $=this.start,ae=this.startLoc;return f.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),$,ae,!0,!1),this.eat(I.parenL)?f.arguments=this.parseExprList(I.parenR,this.options.ecmaVersion>=8,!1):f.arguments=J,this.finishNode(f,"NewExpression")},D.parseTemplateElement=function(f){var S=f.isTagged,F=this.startNode();return this.type===I.invalidTemplate?(S||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),F.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):F.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),F.tail=this.type===I.backQuote,this.finishNode(F,"TemplateElement")},D.parseTemplate=function(f){f===void 0&&(f={});var S=f.isTagged;S===void 0&&(S=!1);var F=this.startNode();this.next(),F.expressions=[];var $=this.parseTemplateElement({isTagged:S});for(F.quasis=[$];!$.tail;)this.type===I.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(I.dollarBraceL),F.expressions.push(this.parseExpression()),this.expect(I.braceR),F.quasis.push($=this.parseTemplateElement({isTagged:S}));return this.next(),this.finishNode(F,"TemplateLiteral")},D.isAsyncProp=function(f){return!f.computed&&f.key.type==="Identifier"&&f.key.name==="async"&&(this.type===I.name||this.type===I.num||this.type===I.string||this.type===I.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===I.star)&&!Ee.test(this.input.slice(this.lastTokEnd,this.start))},D.parseObj=function(f,S){var F=this.startNode(),$=!0,ae={};for(F.properties=[],this.next();!this.eat(I.braceR);){if($)$=!1;else if(this.expect(I.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(I.braceR))break;var Te=this.parseProperty(f,S);f||this.checkPropClash(Te,ae,S),F.properties.push(Te)}return this.finishNode(F,f?"ObjectPattern":"ObjectExpression")},D.parseProperty=function(f,S){var F=this.startNode(),$,ae,Te,Me;if(this.options.ecmaVersion>=9&&this.eat(I.ellipsis))return f?(F.argument=this.parseIdent(!1),this.type===I.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(F,"RestElement")):(F.argument=this.parseMaybeAssign(!1,S),this.type===I.comma&&S&&S.trailingComma<0&&(S.trailingComma=this.start),this.finishNode(F,"SpreadElement"));this.options.ecmaVersion>=6&&(F.method=!1,F.shorthand=!1,(f||S)&&(Te=this.start,Me=this.startLoc),f||($=this.eat(I.star)));var Ze=this.containsEsc;return this.parsePropertyName(F),!f&&!Ze&&this.options.ecmaVersion>=8&&!$&&this.isAsyncProp(F)?(ae=!0,$=this.options.ecmaVersion>=9&&this.eat(I.star),this.parsePropertyName(F)):ae=!1,this.parsePropertyValue(F,f,$,ae,Te,Me,S,Ze),this.finishNode(F,"Property")},D.parseGetterSetter=function(f){var S=f.key.name;this.parsePropertyName(f),f.value=this.parseMethod(!1),f.kind=S;var F=f.kind==="get"?0:1;if(f.value.params.length!==F){var $=f.value.start;f.kind==="get"?this.raiseRecoverable($,"getter should have no params"):this.raiseRecoverable($,"setter should have exactly one param")}else f.kind==="set"&&f.value.params[0].type==="RestElement"&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params")},D.parsePropertyValue=function(f,S,F,$,ae,Te,Me,Ze){(F||$)&&this.type===I.colon&&this.unexpected(),this.eat(I.colon)?(f.value=S?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Me),f.kind="init"):this.options.ecmaVersion>=6&&this.type===I.parenL?(S&&this.unexpected(),f.method=!0,f.value=this.parseMethod(F,$),f.kind="init"):!S&&!Ze&&this.options.ecmaVersion>=5&&!f.computed&&f.key.type==="Identifier"&&(f.key.name==="get"||f.key.name==="set")&&this.type!==I.comma&&this.type!==I.braceR&&this.type!==I.eq?((F||$)&&this.unexpected(),this.parseGetterSetter(f)):this.options.ecmaVersion>=6&&!f.computed&&f.key.type==="Identifier"?((F||$)&&this.unexpected(),this.checkUnreserved(f.key),f.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ae),S?f.value=this.parseMaybeDefault(ae,Te,this.copyNode(f.key)):this.type===I.eq&&Me?(Me.shorthandAssign<0&&(Me.shorthandAssign=this.start),f.value=this.parseMaybeDefault(ae,Te,this.copyNode(f.key))):f.value=this.copyNode(f.key),f.kind="init",f.shorthand=!0):this.unexpected()},D.parsePropertyName=function(f){if(this.options.ecmaVersion>=6){if(this.eat(I.bracketL))return f.computed=!0,f.key=this.parseMaybeAssign(),this.expect(I.bracketR),f.key;f.computed=!1}return f.key=this.type===I.num||this.type===I.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},D.initFunction=function(f){f.id=null,this.options.ecmaVersion>=6&&(f.generator=f.expression=!1),this.options.ecmaVersion>=8&&(f.async=!1)},D.parseMethod=function(f,S,F){var $=this.startNode(),ae=this.yieldPos,Te=this.awaitPos,Me=this.awaitIdentPos;return this.initFunction($),this.options.ecmaVersion>=6&&($.generator=f),this.options.ecmaVersion>=8&&($.async=!!S),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(er(S,$.generator)|Ds|(F?ia:0)),this.expect(I.parenL),$.params=this.parseBindingList(I.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody($,!1,!0,!1),this.yieldPos=ae,this.awaitPos=Te,this.awaitIdentPos=Me,this.finishNode($,"FunctionExpression")},D.parseArrowExpression=function(f,S,F,$){var ae=this.yieldPos,Te=this.awaitPos,Me=this.awaitIdentPos;return this.enterScope(er(F,!1)|Ms),this.initFunction(f),this.options.ecmaVersion>=8&&(f.async=!!F),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,f.params=this.toAssignableList(S,!0),this.parseFunctionBody(f,!0,!1,$),this.yieldPos=ae,this.awaitPos=Te,this.awaitIdentPos=Me,this.finishNode(f,"ArrowFunctionExpression")},D.parseFunctionBody=function(f,S,F,$){var ae=S&&this.type!==I.braceL,Te=this.strict,Me=!1;if(ae)f.body=this.parseMaybeAssign($),f.expression=!0,this.checkParams(f,!1);else{var Ze=this.options.ecmaVersion>=7&&!this.isSimpleParamList(f.params);(!Te||Ze)&&(Me=this.strictDirective(this.end),Me&&Ze&&this.raiseRecoverable(f.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Ke=this.labels;this.labels=[],Me&&(this.strict=!0),this.checkParams(f,!Te&&!Me&&!S&&!F&&this.isSimpleParamList(f.params)),this.strict&&f.id&&this.checkLValSimple(f.id,l),f.body=this.parseBlock(!1,void 0,Me&&!Te),f.expression=!1,this.adaptDirectivePrologue(f.body.body),this.labels=Ke}this.exitScope()},D.isSimpleParamList=function(f){for(var S=0,F=f;S<F.length;S+=1){var $=F[S];if($.type!=="Identifier")return!1}return!0},D.checkParams=function(f,S){for(var F=Object.create(null),$=0,ae=f.params;$<ae.length;$+=1){var Te=ae[$];this.checkLValInnerPattern(Te,mr,S?null:F)}},D.parseExprList=function(f,S,F,$){for(var ae=[],Te=!0;!this.eat(f);){if(Te)Te=!1;else if(this.expect(I.comma),S&&this.afterTrailingComma(f))break;var Me=void 0;F&&this.type===I.comma?Me=null:this.type===I.ellipsis?(Me=this.parseSpread($),$&&this.type===I.comma&&$.trailingComma<0&&($.trailingComma=this.start)):Me=this.parseMaybeAssign(!1,$),ae.push(Me)}return ae},D.checkUnreserved=function(f){var S=f.start,F=f.end,$=f.name;if(this.inGenerator&&$==="yield"&&this.raiseRecoverable(S,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&$==="await"&&this.raiseRecoverable(S,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Js)&&$==="arguments"&&this.raiseRecoverable(S,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&($==="arguments"||$==="await")&&this.raise(S,"Cannot use "+$+" in class static initialization block"),this.keywords.test($)&&this.raise(S,"Unexpected keyword '"+$+"'"),!(this.options.ecmaVersion<6&&this.input.slice(S,F).indexOf("\\")!==-1)){var ae=this.strict?this.reservedWordsStrict:this.reservedWords;ae.test($)&&(!this.inAsync&&$==="await"&&this.raiseRecoverable(S,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(S,"The keyword '"+$+"' is reserved"))}},D.parseIdent=function(f){var S=this.parseIdentNode();return this.next(!!f),this.finishNode(S,"Identifier"),f||(this.checkUnreserved(S),S.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=S.start)),S},D.parseIdentNode=function(){var f=this.startNode();return this.type===I.name?f.name=this.value:this.type.keyword?(f.name=this.type.keyword,(f.name==="class"||f.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=I.name):this.unexpected(),f},D.parsePrivateIdent=function(){var f=this.startNode();return this.type===I.privateId?f.name=this.value:this.unexpected(),this.next(),this.finishNode(f,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(f.start,"Private field '#"+f.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(f)),f},D.parseYield=function(f){this.yieldPos||(this.yieldPos=this.start);var S=this.startNode();return this.next(),this.type===I.semi||this.canInsertSemicolon()||this.type!==I.star&&!this.type.startsExpr?(S.delegate=!1,S.argument=null):(S.delegate=this.eat(I.star),S.argument=this.parseMaybeAssign(f)),this.finishNode(S,"YieldExpression")},D.parseAwait=function(f){this.awaitPos||(this.awaitPos=this.start);var S=this.startNode();return this.next(),S.argument=this.parseMaybeUnary(null,!0,!1,f),this.finishNode(S,"AwaitExpression")};var W=h.prototype;W.raise=function(f,S){var F=ot(this.input,f);S+=" ("+F.line+":"+F.column+")",this.sourceFile&&(S+=" in "+this.sourceFile);var $=new SyntaxError(S);throw $.pos=f,$.loc=F,$.raisedAt=this.pos,$},W.raiseRecoverable=W.raise,W.curPosition=function(){if(this.options.locations)return new Ve(this.curLine,this.pos-this.lineStart)};var se=h.prototype,oe=function(S){this.flags=S,this.var=[],this.lexical=[],this.functions=[]};se.enterScope=function(f){this.scopeStack.push(new oe(f))},se.exitScope=function(){this.scopeStack.pop()},se.treatFunctionsAsVarInScope=function(f){return f.flags&zt||!this.inModule&&f.flags&Ct},se.declareName=function(f,S,F){var $=!1;if(S===Wt){var ae=this.currentScope();$=ae.lexical.indexOf(f)>-1||ae.functions.indexOf(f)>-1||ae.var.indexOf(f)>-1,ae.lexical.push(f),this.inModule&&ae.flags&Ct&&delete this.undefinedExports[f]}else if(S===Nt){var Te=this.currentScope();Te.lexical.push(f)}else if(S===$i){var Me=this.currentScope();this.treatFunctionsAsVar?$=Me.lexical.indexOf(f)>-1:$=Me.lexical.indexOf(f)>-1||Me.var.indexOf(f)>-1,Me.functions.push(f)}else for(var Ze=this.scopeStack.length-1;Ze>=0;--Ze){var Ke=this.scopeStack[Ze];if(Ke.lexical.indexOf(f)>-1&&!(Ke.flags&fs&&Ke.lexical[0]===f)||!this.treatFunctionsAsVarInScope(Ke)&&Ke.functions.indexOf(f)>-1){$=!0;break}if(Ke.var.push(f),this.inModule&&Ke.flags&Ct&&delete this.undefinedExports[f],Ke.flags&Js)break}$&&this.raiseRecoverable(F,"Identifier '"+f+"' has already been declared")},se.checkLocalExport=function(f){this.scopeStack[0].lexical.indexOf(f.name)===-1&&this.scopeStack[0].var.indexOf(f.name)===-1&&(this.undefinedExports[f.name]=f)},se.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},se.currentVarScope=function(){for(var f=this.scopeStack.length-1;;f--){var S=this.scopeStack[f];if(S.flags&(Js|Qs|Ns))return S}},se.currentThisScope=function(){for(var f=this.scopeStack.length-1;;f--){var S=this.scopeStack[f];if(S.flags&(Js|Qs|Ns)&&!(S.flags&Ms))return S}};var le=function(S,F,$){this.type="",this.start=F,this.end=0,S.options.locations&&(this.loc=new tt(S,$)),S.options.directSourceFile&&(this.sourceFile=S.options.directSourceFile),S.options.ranges&&(this.range=[F,0])},ge=h.prototype;ge.startNode=function(){return new le(this,this.start,this.startLoc)},ge.startNodeAt=function(f,S){return new le(this,f,S)};function re(f,S,F,$){return f.type=S,f.end=F,this.options.locations&&(f.loc.end=$),this.options.ranges&&(f.range[1]=F),f}ge.finishNode=function(f,S){return re.call(this,f,S,this.lastTokEnd,this.lastTokEndLoc)},ge.finishNodeAt=function(f,S,F,$){return re.call(this,f,S,F,$)},ge.copyNode=function(f){var S=new le(this,f.start,this.startLoc);for(var F in f)S[F]=f[F];return S};var ue="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",me="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ce=me+" Extended_Pictographic",we=Ce,Ae=we+" EBase EComp EMod EPres ExtPict",ze=Ae,We=ze,Je={9:me,10:Ce,11:we,12:Ae,13:ze,14:We},lt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Pe={9:"",10:"",11:"",12:"",13:"",14:lt},Ie="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Qe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",at=Qe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",st=at+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",mt=st+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",pt=mt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",xt=pt+" "+ue,gt={9:Qe,10:at,11:st,12:mt,13:pt,14:xt},Tt={};function Ci(f){var S=Tt[f]={binary:rt(Je[f]+" "+Ie),binaryOfStrings:rt(Pe[f]),nonBinary:{General_Category:rt(Ie),Script:rt(gt[f])}};S.nonBinary.Script_Extensions=S.nonBinary.Script,S.nonBinary.gc=S.nonBinary.General_Category,S.nonBinary.sc=S.nonBinary.Script,S.nonBinary.scx=S.nonBinary.Script_Extensions}for(var Jt=0,hi=[9,10,11,12,13,14];Jt<hi.length;Jt+=1){var xi=hi[Jt];Ci(xi)}var $e=h.prototype,si=function(S,F){this.parent=S,this.base=F||this};si.prototype.separatedFrom=function(S){for(var F=this;F;F=F.parent)for(var $=S;$;$=$.parent)if(F.base===$.base&&F!==$)return!0;return!1},si.prototype.sibling=function(){return new si(this.parent,this.base)};var fi=function(S){this.parser=S,this.validFlags="gim"+(S.options.ecmaVersion>=6?"uy":"")+(S.options.ecmaVersion>=9?"s":"")+(S.options.ecmaVersion>=13?"d":"")+(S.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Tt[S.options.ecmaVersion>=14?14:S.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};fi.prototype.reset=function(S,F,$){var ae=$.indexOf("v")!==-1,Te=$.indexOf("u")!==-1;this.start=S|0,this.source=F+"",this.flags=$,ae&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Te&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Te&&this.parser.options.ecmaVersion>=9)},fi.prototype.raise=function(S){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+S)},fi.prototype.at=function(S,F){F===void 0&&(F=!1);var $=this.source,ae=$.length;if(S>=ae)return-1;var Te=$.charCodeAt(S);if(!(F||this.switchU)||Te<=55295||Te>=57344||S+1>=ae)return Te;var Me=$.charCodeAt(S+1);return Me>=56320&&Me<=57343?(Te<<10)+Me-56613888:Te},fi.prototype.nextIndex=function(S,F){F===void 0&&(F=!1);var $=this.source,ae=$.length;if(S>=ae)return ae;var Te=$.charCodeAt(S),Me;return!(F||this.switchU)||Te<=55295||Te>=57344||S+1>=ae||(Me=$.charCodeAt(S+1))<56320||Me>57343?S+1:S+2},fi.prototype.current=function(S){return S===void 0&&(S=!1),this.at(this.pos,S)},fi.prototype.lookahead=function(S){return S===void 0&&(S=!1),this.at(this.nextIndex(this.pos,S),S)},fi.prototype.advance=function(S){S===void 0&&(S=!1),this.pos=this.nextIndex(this.pos,S)},fi.prototype.eat=function(S,F){return F===void 0&&(F=!1),this.current(F)===S?(this.advance(F),!0):!1},fi.prototype.eatChars=function(S,F){F===void 0&&(F=!1);for(var $=this.pos,ae=0,Te=S;ae<Te.length;ae+=1){var Me=Te[ae],Ze=this.at($,F);if(Ze===-1||Ze!==Me)return!1;$=this.nextIndex($,F)}return this.pos=$,!0},$e.validateRegExpFlags=function(f){for(var S=f.validFlags,F=f.flags,$=!1,ae=!1,Te=0;Te<F.length;Te++){var Me=F.charAt(Te);S.indexOf(Me)===-1&&this.raise(f.start,"Invalid regular expression flag"),F.indexOf(Me,Te+1)>-1&&this.raise(f.start,"Duplicate regular expression flag"),Me==="u"&&($=!0),Me==="v"&&(ae=!0)}this.options.ecmaVersion>=15&&$&&ae&&this.raise(f.start,"Invalid regular expression flag")};function pi(f){for(var S in f)return!0;return!1}$e.validateRegExpPattern=function(f){this.regexp_pattern(f),!f.switchN&&this.options.ecmaVersion>=9&&pi(f.groupNames)&&(f.switchN=!0,this.regexp_pattern(f))},$e.regexp_pattern=function(f){f.pos=0,f.lastIntValue=0,f.lastStringValue="",f.lastAssertionIsQuantifiable=!1,f.numCapturingParens=0,f.maxBackReference=0,f.groupNames=Object.create(null),f.backReferenceNames.length=0,f.branchID=null,this.regexp_disjunction(f),f.pos!==f.source.length&&(f.eat(41)&&f.raise("Unmatched ')'"),(f.eat(93)||f.eat(125))&&f.raise("Lone quantifier brackets")),f.maxBackReference>f.numCapturingParens&&f.raise("Invalid escape");for(var S=0,F=f.backReferenceNames;S<F.length;S+=1){var $=F[S];f.groupNames[$]||f.raise("Invalid named capture referenced")}},$e.regexp_disjunction=function(f){var S=this.options.ecmaVersion>=16;for(S&&(f.branchID=new si(f.branchID,null)),this.regexp_alternative(f);f.eat(124);)S&&(f.branchID=f.branchID.sibling()),this.regexp_alternative(f);S&&(f.branchID=f.branchID.parent),this.regexp_eatQuantifier(f,!0)&&f.raise("Nothing to repeat"),f.eat(123)&&f.raise("Lone quantifier brackets")},$e.regexp_alternative=function(f){for(;f.pos<f.source.length&&this.regexp_eatTerm(f););},$e.regexp_eatTerm=function(f){return this.regexp_eatAssertion(f)?(f.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(f)&&f.switchU&&f.raise("Invalid quantifier"),!0):(f.switchU?this.regexp_eatAtom(f):this.regexp_eatExtendedAtom(f))?(this.regexp_eatQuantifier(f),!0):!1},$e.regexp_eatAssertion=function(f){var S=f.pos;if(f.lastAssertionIsQuantifiable=!1,f.eat(94)||f.eat(36))return!0;if(f.eat(92)){if(f.eat(66)||f.eat(98))return!0;f.pos=S}if(f.eat(40)&&f.eat(63)){var F=!1;if(this.options.ecmaVersion>=9&&(F=f.eat(60)),f.eat(61)||f.eat(33))return this.regexp_disjunction(f),f.eat(41)||f.raise("Unterminated group"),f.lastAssertionIsQuantifiable=!F,!0}return f.pos=S,!1},$e.regexp_eatQuantifier=function(f,S){return S===void 0&&(S=!1),this.regexp_eatQuantifierPrefix(f,S)?(f.eat(63),!0):!1},$e.regexp_eatQuantifierPrefix=function(f,S){return f.eat(42)||f.eat(43)||f.eat(63)||this.regexp_eatBracedQuantifier(f,S)},$e.regexp_eatBracedQuantifier=function(f,S){var F=f.pos;if(f.eat(123)){var $=0,ae=-1;if(this.regexp_eatDecimalDigits(f)&&($=f.lastIntValue,f.eat(44)&&this.regexp_eatDecimalDigits(f)&&(ae=f.lastIntValue),f.eat(125)))return ae!==-1&&ae<$&&!S&&f.raise("numbers out of order in {} quantifier"),!0;f.switchU&&!S&&f.raise("Incomplete quantifier"),f.pos=F}return!1},$e.regexp_eatAtom=function(f){return this.regexp_eatPatternCharacters(f)||f.eat(46)||this.regexp_eatReverseSolidusAtomEscape(f)||this.regexp_eatCharacterClass(f)||this.regexp_eatUncapturingGroup(f)||this.regexp_eatCapturingGroup(f)},$e.regexp_eatReverseSolidusAtomEscape=function(f){var S=f.pos;if(f.eat(92)){if(this.regexp_eatAtomEscape(f))return!0;f.pos=S}return!1},$e.regexp_eatUncapturingGroup=function(f){var S=f.pos;if(f.eat(40)){if(f.eat(63)){if(this.options.ecmaVersion>=16){var F=this.regexp_eatModifiers(f),$=f.eat(45);if(F||$){for(var ae=0;ae<F.length;ae++){var Te=F.charAt(ae);F.indexOf(Te,ae+1)>-1&&f.raise("Duplicate regular expression modifiers")}if($){var Me=this.regexp_eatModifiers(f);!F&&!Me&&f.current()===58&&f.raise("Invalid regular expression modifiers");for(var Ze=0;Ze<Me.length;Ze++){var Ke=Me.charAt(Ze);(Me.indexOf(Ke,Ze+1)>-1||F.indexOf(Ke)>-1)&&f.raise("Duplicate regular expression modifiers")}}}}if(f.eat(58)){if(this.regexp_disjunction(f),f.eat(41))return!0;f.raise("Unterminated group")}}f.pos=S}return!1},$e.regexp_eatCapturingGroup=function(f){if(f.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(f):f.current()===63&&f.raise("Invalid group"),this.regexp_disjunction(f),f.eat(41))return f.numCapturingParens+=1,!0;f.raise("Unterminated group")}return!1},$e.regexp_eatModifiers=function(f){for(var S="",F=0;(F=f.current())!==-1&&Ki(F);)S+=yt(F),f.advance();return S};function Ki(f){return f===105||f===109||f===115}$e.regexp_eatExtendedAtom=function(f){return f.eat(46)||this.regexp_eatReverseSolidusAtomEscape(f)||this.regexp_eatCharacterClass(f)||this.regexp_eatUncapturingGroup(f)||this.regexp_eatCapturingGroup(f)||this.regexp_eatInvalidBracedQuantifier(f)||this.regexp_eatExtendedPatternCharacter(f)},$e.regexp_eatInvalidBracedQuantifier=function(f){return this.regexp_eatBracedQuantifier(f,!0)&&f.raise("Nothing to repeat"),!1},$e.regexp_eatSyntaxCharacter=function(f){var S=f.current();return Pi(S)?(f.lastIntValue=S,f.advance(),!0):!1};function Pi(f){return f===36||f>=40&&f<=43||f===46||f===63||f>=91&&f<=94||f>=123&&f<=125}$e.regexp_eatPatternCharacters=function(f){for(var S=f.pos,F=0;(F=f.current())!==-1&&!Pi(F);)f.advance();return f.pos!==S},$e.regexp_eatExtendedPatternCharacter=function(f){var S=f.current();return S!==-1&&S!==36&&!(S>=40&&S<=43)&&S!==46&&S!==63&&S!==91&&S!==94&&S!==124?(f.advance(),!0):!1},$e.regexp_groupSpecifier=function(f){if(f.eat(63)){this.regexp_eatGroupName(f)||f.raise("Invalid group");var S=this.options.ecmaVersion>=16,F=f.groupNames[f.lastStringValue];if(F)if(S)for(var $=0,ae=F;$<ae.length;$+=1){var Te=ae[$];Te.separatedFrom(f.branchID)||f.raise("Duplicate capture group name")}else f.raise("Duplicate capture group name");S?(F||(f.groupNames[f.lastStringValue]=[])).push(f.branchID):f.groupNames[f.lastStringValue]=!0}},$e.regexp_eatGroupName=function(f){if(f.lastStringValue="",f.eat(60)){if(this.regexp_eatRegExpIdentifierName(f)&&f.eat(62))return!0;f.raise("Invalid capture group name")}return!1},$e.regexp_eatRegExpIdentifierName=function(f){if(f.lastStringValue="",this.regexp_eatRegExpIdentifierStart(f)){for(f.lastStringValue+=yt(f.lastIntValue);this.regexp_eatRegExpIdentifierPart(f);)f.lastStringValue+=yt(f.lastIntValue);return!0}return!1},$e.regexp_eatRegExpIdentifierStart=function(f){var S=f.pos,F=this.options.ecmaVersion>=11,$=f.current(F);return f.advance(F),$===92&&this.regexp_eatRegExpUnicodeEscapeSequence(f,F)&&($=f.lastIntValue),mi($)?(f.lastIntValue=$,!0):(f.pos=S,!1)};function mi(f){return V(f,!0)||f===36||f===95}$e.regexp_eatRegExpIdentifierPart=function(f){var S=f.pos,F=this.options.ecmaVersion>=11,$=f.current(F);return f.advance(F),$===92&&this.regexp_eatRegExpUnicodeEscapeSequence(f,F)&&($=f.lastIntValue),xn($)?(f.lastIntValue=$,!0):(f.pos=S,!1)};function xn(f){return L(f,!0)||f===36||f===95||f===8204||f===8205}$e.regexp_eatAtomEscape=function(f){return this.regexp_eatBackReference(f)||this.regexp_eatCharacterClassEscape(f)||this.regexp_eatCharacterEscape(f)||f.switchN&&this.regexp_eatKGroupName(f)?!0:(f.switchU&&(f.current()===99&&f.raise("Invalid unicode escape"),f.raise("Invalid escape")),!1)},$e.regexp_eatBackReference=function(f){var S=f.pos;if(this.regexp_eatDecimalEscape(f)){var F=f.lastIntValue;if(f.switchU)return F>f.maxBackReference&&(f.maxBackReference=F),!0;if(F<=f.numCapturingParens)return!0;f.pos=S}return!1},$e.regexp_eatKGroupName=function(f){if(f.eat(107)){if(this.regexp_eatGroupName(f))return f.backReferenceNames.push(f.lastStringValue),!0;f.raise("Invalid named reference")}return!1},$e.regexp_eatCharacterEscape=function(f){return this.regexp_eatControlEscape(f)||this.regexp_eatCControlLetter(f)||this.regexp_eatZero(f)||this.regexp_eatHexEscapeSequence(f)||this.regexp_eatRegExpUnicodeEscapeSequence(f,!1)||!f.switchU&&this.regexp_eatLegacyOctalEscapeSequence(f)||this.regexp_eatIdentityEscape(f)},$e.regexp_eatCControlLetter=function(f){var S=f.pos;if(f.eat(99)){if(this.regexp_eatControlLetter(f))return!0;f.pos=S}return!1},$e.regexp_eatZero=function(f){return f.current()===48&&!Ls(f.lookahead())?(f.lastIntValue=0,f.advance(),!0):!1},$e.regexp_eatControlEscape=function(f){var S=f.current();return S===116?(f.lastIntValue=9,f.advance(),!0):S===110?(f.lastIntValue=10,f.advance(),!0):S===118?(f.lastIntValue=11,f.advance(),!0):S===102?(f.lastIntValue=12,f.advance(),!0):S===114?(f.lastIntValue=13,f.advance(),!0):!1},$e.regexp_eatControlLetter=function(f){var S=f.current();return Qi(S)?(f.lastIntValue=S%32,f.advance(),!0):!1};function Qi(f){return f>=65&&f<=90||f>=97&&f<=122}$e.regexp_eatRegExpUnicodeEscapeSequence=function(f,S){S===void 0&&(S=!1);var F=f.pos,$=S||f.switchU;if(f.eat(117)){if(this.regexp_eatFixedHexDigits(f,4)){var ae=f.lastIntValue;if($&&ae>=55296&&ae<=56319){var Te=f.pos;if(f.eat(92)&&f.eat(117)&&this.regexp_eatFixedHexDigits(f,4)){var Me=f.lastIntValue;if(Me>=56320&&Me<=57343)return f.lastIntValue=(ae-55296)*1024+(Me-56320)+65536,!0}f.pos=Te,f.lastIntValue=ae}return!0}if($&&f.eat(123)&&this.regexp_eatHexDigits(f)&&f.eat(125)&&Ji(f.lastIntValue))return!0;$&&f.raise("Invalid unicode escape"),f.pos=F}return!1};function Ji(f){return f>=0&&f<=1114111}$e.regexp_eatIdentityEscape=function(f){if(f.switchU)return this.regexp_eatSyntaxCharacter(f)?!0:f.eat(47)?(f.lastIntValue=47,!0):!1;var S=f.current();return S!==99&&(!f.switchN||S!==107)?(f.lastIntValue=S,f.advance(),!0):!1},$e.regexp_eatDecimalEscape=function(f){f.lastIntValue=0;var S=f.current();if(S>=49&&S<=57){do f.lastIntValue=10*f.lastIntValue+(S-48),f.advance();while((S=f.current())>=48&&S<=57);return!0}return!1};var zn=0,vi=1,en=2;$e.regexp_eatCharacterClassEscape=function(f){var S=f.current();if(fn(S))return f.lastIntValue=-1,f.advance(),vi;var F=!1;if(f.switchU&&this.options.ecmaVersion>=9&&((F=S===80)||S===112)){f.lastIntValue=-1,f.advance();var $;if(f.eat(123)&&($=this.regexp_eatUnicodePropertyValueExpression(f))&&f.eat(125))return F&&$===en&&f.raise("Invalid property name"),$;f.raise("Invalid property name")}return zn};function fn(f){return f===100||f===68||f===115||f===83||f===119||f===87}$e.regexp_eatUnicodePropertyValueExpression=function(f){var S=f.pos;if(this.regexp_eatUnicodePropertyName(f)&&f.eat(61)){var F=f.lastStringValue;if(this.regexp_eatUnicodePropertyValue(f)){var $=f.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(f,F,$),vi}}if(f.pos=S,this.regexp_eatLoneUnicodePropertyNameOrValue(f)){var ae=f.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(f,ae)}return zn},$e.regexp_validateUnicodePropertyNameAndValue=function(f,S,F){he(f.unicodeProperties.nonBinary,S)||f.raise("Invalid property name"),f.unicodeProperties.nonBinary[S].test(F)||f.raise("Invalid property value")},$e.regexp_validateUnicodePropertyNameOrValue=function(f,S){if(f.unicodeProperties.binary.test(S))return vi;if(f.switchV&&f.unicodeProperties.binaryOfStrings.test(S))return en;f.raise("Invalid property name")},$e.regexp_eatUnicodePropertyName=function(f){var S=0;for(f.lastStringValue="";vr(S=f.current());)f.lastStringValue+=yt(S),f.advance();return f.lastStringValue!==""};function vr(f){return Qi(f)||f===95}$e.regexp_eatUnicodePropertyValue=function(f){var S=0;for(f.lastStringValue="";Ya(S=f.current());)f.lastStringValue+=yt(S),f.advance();return f.lastStringValue!==""};function Ya(f){return vr(f)||Ls(f)}$e.regexp_eatLoneUnicodePropertyNameOrValue=function(f){return this.regexp_eatUnicodePropertyValue(f)},$e.regexp_eatCharacterClass=function(f){if(f.eat(91)){var S=f.eat(94),F=this.regexp_classContents(f);return f.eat(93)||f.raise("Unterminated character class"),S&&F===en&&f.raise("Negated character class may contain strings"),!0}return!1},$e.regexp_classContents=function(f){return f.current()===93?vi:f.switchV?this.regexp_classSetExpression(f):(this.regexp_nonEmptyClassRanges(f),vi)},$e.regexp_nonEmptyClassRanges=function(f){for(;this.regexp_eatClassAtom(f);){var S=f.lastIntValue;if(f.eat(45)&&this.regexp_eatClassAtom(f)){var F=f.lastIntValue;f.switchU&&(S===-1||F===-1)&&f.raise("Invalid character class"),S!==-1&&F!==-1&&S>F&&f.raise("Range out of order in character class")}}},$e.regexp_eatClassAtom=function(f){var S=f.pos;if(f.eat(92)){if(this.regexp_eatClassEscape(f))return!0;if(f.switchU){var F=f.current();(F===99||ds(F))&&f.raise("Invalid class escape"),f.raise("Invalid escape")}f.pos=S}var $=f.current();return $!==93?(f.lastIntValue=$,f.advance(),!0):!1},$e.regexp_eatClassEscape=function(f){var S=f.pos;if(f.eat(98))return f.lastIntValue=8,!0;if(f.switchU&&f.eat(45))return f.lastIntValue=45,!0;if(!f.switchU&&f.eat(99)){if(this.regexp_eatClassControlLetter(f))return!0;f.pos=S}return this.regexp_eatCharacterClassEscape(f)||this.regexp_eatCharacterEscape(f)},$e.regexp_classSetExpression=function(f){var S=vi,F;if(!this.regexp_eatClassSetRange(f))if(F=this.regexp_eatClassSetOperand(f)){F===en&&(S=en);for(var $=f.pos;f.eatChars([38,38]);){if(f.current()!==38&&(F=this.regexp_eatClassSetOperand(f))){F!==en&&(S=vi);continue}f.raise("Invalid character in character class")}if($!==f.pos)return S;for(;f.eatChars([45,45]);)this.regexp_eatClassSetOperand(f)||f.raise("Invalid character in character class");if($!==f.pos)return S}else f.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(f)){if(F=this.regexp_eatClassSetOperand(f),!F)return S;F===en&&(S=en)}},$e.regexp_eatClassSetRange=function(f){var S=f.pos;if(this.regexp_eatClassSetCharacter(f)){var F=f.lastIntValue;if(f.eat(45)&&this.regexp_eatClassSetCharacter(f)){var $=f.lastIntValue;return F!==-1&&$!==-1&&F>$&&f.raise("Range out of order in character class"),!0}f.pos=S}return!1},$e.regexp_eatClassSetOperand=function(f){return this.regexp_eatClassSetCharacter(f)?vi:this.regexp_eatClassStringDisjunction(f)||this.regexp_eatNestedClass(f)},$e.regexp_eatNestedClass=function(f){var S=f.pos;if(f.eat(91)){var F=f.eat(94),$=this.regexp_classContents(f);if(f.eat(93))return F&&$===en&&f.raise("Negated character class may contain strings"),$;f.pos=S}if(f.eat(92)){var ae=this.regexp_eatCharacterClassEscape(f);if(ae)return ae;f.pos=S}return null},$e.regexp_eatClassStringDisjunction=function(f){var S=f.pos;if(f.eatChars([92,113])){if(f.eat(123)){var F=this.regexp_classStringDisjunctionContents(f);if(f.eat(125))return F}else f.raise("Invalid escape");f.pos=S}return null},$e.regexp_classStringDisjunctionContents=function(f){for(var S=this.regexp_classString(f);f.eat(124);)this.regexp_classString(f)===en&&(S=en);return S},$e.regexp_classString=function(f){for(var S=0;this.regexp_eatClassSetCharacter(f);)S++;return S===1?vi:en},$e.regexp_eatClassSetCharacter=function(f){var S=f.pos;if(f.eat(92))return this.regexp_eatCharacterEscape(f)||this.regexp_eatClassSetReservedPunctuator(f)?!0:f.eat(98)?(f.lastIntValue=8,!0):(f.pos=S,!1);var F=f.current();return F<0||F===f.lookahead()&&na(F)||Rs(F)?!1:(f.advance(),f.lastIntValue=F,!0)};function na(f){return f===33||f>=35&&f<=38||f>=42&&f<=44||f===46||f>=58&&f<=64||f===94||f===96||f===126}function Rs(f){return f===40||f===41||f===45||f===47||f>=91&&f<=93||f>=123&&f<=125}$e.regexp_eatClassSetReservedPunctuator=function(f){var S=f.current();return yr(S)?(f.lastIntValue=S,f.advance(),!0):!1};function yr(f){return f===33||f===35||f===37||f===38||f===44||f===45||f>=58&&f<=62||f===64||f===96||f===126}$e.regexp_eatClassControlLetter=function(f){var S=f.current();return Ls(S)||S===95?(f.lastIntValue=S%32,f.advance(),!0):!1},$e.regexp_eatHexEscapeSequence=function(f){var S=f.pos;if(f.eat(120)){if(this.regexp_eatFixedHexDigits(f,2))return!0;f.switchU&&f.raise("Invalid escape"),f.pos=S}return!1},$e.regexp_eatDecimalDigits=function(f){var S=f.pos,F=0;for(f.lastIntValue=0;Ls(F=f.current());)f.lastIntValue=10*f.lastIntValue+(F-48),f.advance();return f.pos!==S};function Ls(f){return f>=48&&f<=57}$e.regexp_eatHexDigits=function(f){var S=f.pos,F=0;for(f.lastIntValue=0;In(F=f.current());)f.lastIntValue=16*f.lastIntValue+xr(F),f.advance();return f.pos!==S};function In(f){return f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102}function xr(f){return f>=65&&f<=70?10+(f-65):f>=97&&f<=102?10+(f-97):f-48}$e.regexp_eatLegacyOctalEscapeSequence=function(f){if(this.regexp_eatOctalDigit(f)){var S=f.lastIntValue;if(this.regexp_eatOctalDigit(f)){var F=f.lastIntValue;S<=3&&this.regexp_eatOctalDigit(f)?f.lastIntValue=S*64+F*8+f.lastIntValue:f.lastIntValue=S*8+F}else f.lastIntValue=S;return!0}return!1},$e.regexp_eatOctalDigit=function(f){var S=f.current();return ds(S)?(f.lastIntValue=S-48,f.advance(),!0):(f.lastIntValue=0,!1)};function ds(f){return f>=48&&f<=55}$e.regexp_eatFixedHexDigits=function(f,S){var F=f.pos;f.lastIntValue=0;for(var $=0;$<S;++$){var ae=f.current();if(!In(ae))return f.pos=F,!1;f.lastIntValue=16*f.lastIntValue+xr(ae),f.advance()}return!0};var Tn=function(S){this.type=S.type,this.value=S.value,this.start=S.start,this.end=S.end,S.options.locations&&(this.loc=new tt(S,S.startLoc,S.endLoc)),S.options.ranges&&(this.range=[S.start,S.end])},At=h.prototype;At.next=function(f){!f&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Tn(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},At.getToken=function(){return this.next(),new Tn(this)},typeof Symbol<"u"&&(At[Symbol.iterator]=function(){var f=this;return{next:function(){var S=f.getToken();return{done:S.type===I.eof,value:S}}}}),At.nextToken=function(){var f=this.curContext();if((!f||!f.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(I.eof);if(f.override)return f.override(this);this.readToken(this.fullCharCodeAtPos())},At.readToken=function(f){return V(f,this.options.ecmaVersion>=6)||f===92?this.readWord():this.getTokenFromCode(f)},At.fullCharCodeAtPos=function(){var f=this.input.charCodeAt(this.pos);if(f<=55295||f>=56320)return f;var S=this.input.charCodeAt(this.pos+1);return S<=56319||S>=57344?f:(f<<10)+S-56613888},At.skipBlockComment=function(){var f=this.options.onComment&&this.curPosition(),S=this.pos,F=this.input.indexOf("*/",this.pos+=2);if(F===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=F+2,this.options.locations)for(var $=void 0,ae=S;($=ct(this.input,ae,this.pos))>-1;)++this.curLine,ae=this.lineStart=$;this.options.onComment&&this.options.onComment(!0,this.input.slice(S+2,F),S,this.pos,f,this.curPosition())},At.skipLineComment=function(f){for(var S=this.pos,F=this.options.onComment&&this.curPosition(),$=this.input.charCodeAt(this.pos+=f);this.pos<this.input.length&&!Be($);)$=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(S+f,this.pos),S,this.pos,F,this.curPosition())},At.skipSpace=function(){e:for(;this.pos<this.input.length;){var f=this.input.charCodeAt(this.pos);switch(f){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(f>8&&f<14||f>=5760&&nt.test(String.fromCharCode(f)))++this.pos;else break e}}},At.finishToken=function(f,S){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var F=this.type;this.type=f,this.value=S,this.updateContext(F)},At.readToken_dot=function(){var f=this.input.charCodeAt(this.pos+1);if(f>=48&&f<=57)return this.readNumber(!0);var S=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&f===46&&S===46?(this.pos+=3,this.finishToken(I.ellipsis)):(++this.pos,this.finishToken(I.dot))},At.readToken_slash=function(){var f=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):f===61?this.finishOp(I.assign,2):this.finishOp(I.slash,1)},At.readToken_mult_modulo_exp=function(f){var S=this.input.charCodeAt(this.pos+1),F=1,$=f===42?I.star:I.modulo;return this.options.ecmaVersion>=7&&f===42&&S===42&&(++F,$=I.starstar,S=this.input.charCodeAt(this.pos+2)),S===61?this.finishOp(I.assign,F+1):this.finishOp($,F)},At.readToken_pipe_amp=function(f){var S=this.input.charCodeAt(this.pos+1);if(S===f){if(this.options.ecmaVersion>=12){var F=this.input.charCodeAt(this.pos+2);if(F===61)return this.finishOp(I.assign,3)}return this.finishOp(f===124?I.logicalOR:I.logicalAND,2)}return S===61?this.finishOp(I.assign,2):this.finishOp(f===124?I.bitwiseOR:I.bitwiseAND,1)},At.readToken_caret=function(){var f=this.input.charCodeAt(this.pos+1);return f===61?this.finishOp(I.assign,2):this.finishOp(I.bitwiseXOR,1)},At.readToken_plus_min=function(f){var S=this.input.charCodeAt(this.pos+1);return S===f?S===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ee.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(I.incDec,2):S===61?this.finishOp(I.assign,2):this.finishOp(I.plusMin,1)},At.readToken_lt_gt=function(f){var S=this.input.charCodeAt(this.pos+1),F=1;return S===f?(F=f===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+F)===61?this.finishOp(I.assign,F+1):this.finishOp(I.bitShift,F)):S===33&&f===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(S===61&&(F=2),this.finishOp(I.relational,F))},At.readToken_eq_excl=function(f){var S=this.input.charCodeAt(this.pos+1);return S===61?this.finishOp(I.equality,this.input.charCodeAt(this.pos+2)===61?3:2):f===61&&S===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(I.arrow)):this.finishOp(f===61?I.eq:I.prefix,1)},At.readToken_question=function(){var f=this.options.ecmaVersion;if(f>=11){var S=this.input.charCodeAt(this.pos+1);if(S===46){var F=this.input.charCodeAt(this.pos+2);if(F<48||F>57)return this.finishOp(I.questionDot,2)}if(S===63){if(f>=12){var $=this.input.charCodeAt(this.pos+2);if($===61)return this.finishOp(I.assign,3)}return this.finishOp(I.coalesce,2)}}return this.finishOp(I.question,1)},At.readToken_numberSign=function(){var f=this.options.ecmaVersion,S=35;if(f>=13&&(++this.pos,S=this.fullCharCodeAtPos(),V(S,!0)||S===92))return this.finishToken(I.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+yt(S)+"'")},At.getTokenFromCode=function(f){switch(f){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(I.parenL);case 41:return++this.pos,this.finishToken(I.parenR);case 59:return++this.pos,this.finishToken(I.semi);case 44:return++this.pos,this.finishToken(I.comma);case 91:return++this.pos,this.finishToken(I.bracketL);case 93:return++this.pos,this.finishToken(I.bracketR);case 123:return++this.pos,this.finishToken(I.braceL);case 125:return++this.pos,this.finishToken(I.braceR);case 58:return++this.pos,this.finishToken(I.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(I.backQuote);case 48:var S=this.input.charCodeAt(this.pos+1);if(S===120||S===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(S===111||S===79)return this.readRadixNumber(8);if(S===98||S===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(f);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(f);case 124:case 38:return this.readToken_pipe_amp(f);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(f);case 60:case 62:return this.readToken_lt_gt(f);case 61:case 33:return this.readToken_eq_excl(f);case 63:return this.readToken_question();case 126:return this.finishOp(I.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+yt(f)+"'")},At.finishOp=function(f,S){var F=this.input.slice(this.pos,this.pos+S);return this.pos+=S,this.finishToken(f,F)},At.readRegexp=function(){for(var f,S,F=this.pos;;){this.pos>=this.input.length&&this.raise(F,"Unterminated regular expression");var $=this.input.charAt(this.pos);if(Ee.test($)&&this.raise(F,"Unterminated regular expression"),f)f=!1;else{if($==="[")S=!0;else if($==="]"&&S)S=!1;else if($==="/"&&!S)break;f=$==="\\"}++this.pos}var ae=this.input.slice(F,this.pos);++this.pos;var Te=this.pos,Me=this.readWord1();this.containsEsc&&this.unexpected(Te);var Ze=this.regexpState||(this.regexpState=new fi(this));Ze.reset(F,ae,Me),this.validateRegExpFlags(Ze),this.validateRegExpPattern(Ze);var Ke=null;try{Ke=new RegExp(ae,Me)}catch{}return this.finishToken(I.regexp,{pattern:ae,flags:Me,value:Ke})},At.readInt=function(f,S,F){for(var $=this.options.ecmaVersion>=12&&S===void 0,ae=F&&this.input.charCodeAt(this.pos)===48,Te=this.pos,Me=0,Ze=0,Ke=0,kt=S??1/0;Ke<kt;++Ke,++this.pos){var Dt=this.input.charCodeAt(this.pos),ti=void 0;if($&&Dt===95){ae&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ze===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Ke===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ze=Dt;continue}if(Dt>=97?ti=Dt-97+10:Dt>=65?ti=Dt-65+10:Dt>=48&&Dt<=57?ti=Dt-48:ti=1/0,ti>=f)break;Ze=Dt,Me=Me*f+ti}return $&&Ze===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Te||S!=null&&this.pos-Te!==S?null:Me};function kn(f,S){return S?parseInt(f,8):parseFloat(f.replace(/_/g,""))}function Fn(f){return typeof BigInt!="function"?null:BigInt(f.replace(/_/g,""))}At.readRadixNumber=function(f){var S=this.pos;this.pos+=2;var F=this.readInt(f);return F==null&&this.raise(this.start+2,"Expected number in radix "+f),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(F=Fn(this.input.slice(S,this.pos)),++this.pos):V(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(I.num,F)},At.readNumber=function(f){var S=this.pos;!f&&this.readInt(10,void 0,!0)===null&&this.raise(S,"Invalid number");var F=this.pos-S>=2&&this.input.charCodeAt(S)===48;F&&this.strict&&this.raise(S,"Invalid number");var $=this.input.charCodeAt(this.pos);if(!F&&!f&&this.options.ecmaVersion>=11&&$===110){var ae=Fn(this.input.slice(S,this.pos));return++this.pos,V(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(I.num,ae)}F&&/[89]/.test(this.input.slice(S,this.pos))&&(F=!1),$===46&&!F&&(++this.pos,this.readInt(10),$=this.input.charCodeAt(this.pos)),($===69||$===101)&&!F&&($=this.input.charCodeAt(++this.pos),($===43||$===45)&&++this.pos,this.readInt(10)===null&&this.raise(S,"Invalid number")),V(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Te=kn(this.input.slice(S,this.pos),F);return this.finishToken(I.num,Te)},At.readCodePoint=function(){var f=this.input.charCodeAt(this.pos),S;if(f===123){this.options.ecmaVersion<6&&this.unexpected();var F=++this.pos;S=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,S>1114111&&this.invalidStringToken(F,"Code point out of bounds")}else S=this.readHexChar(4);return S},At.readString=function(f){for(var S="",F=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var $=this.input.charCodeAt(this.pos);if($===f)break;$===92?(S+=this.input.slice(F,this.pos),S+=this.readEscapedChar(!1),F=this.pos):$===8232||$===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Be($)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return S+=this.input.slice(F,this.pos++),this.finishToken(I.string,S)};var rn={};At.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(f){if(f===rn)this.readInvalidTemplateToken();else throw f}this.inTemplateElement=!1},At.invalidStringToken=function(f,S){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw rn;this.raise(f,S)},At.readTmplToken=function(){for(var f="",S=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var F=this.input.charCodeAt(this.pos);if(F===96||F===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===I.template||this.type===I.invalidTemplate)?F===36?(this.pos+=2,this.finishToken(I.dollarBraceL)):(++this.pos,this.finishToken(I.backQuote)):(f+=this.input.slice(S,this.pos),this.finishToken(I.template,f));if(F===92)f+=this.input.slice(S,this.pos),f+=this.readEscapedChar(!0),S=this.pos;else if(Be(F)){switch(f+=this.input.slice(S,this.pos),++this.pos,F){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:f+=`
`;break;default:f+=String.fromCharCode(F);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),S=this.pos}else++this.pos}},At.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(I.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},At.readEscapedChar=function(f){var S=this.input.charCodeAt(++this.pos);switch(++this.pos,S){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return yt(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),f){var F=this.pos-1;this.invalidStringToken(F,"Invalid escape sequence in template string")}default:if(S>=48&&S<=55){var $=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ae=parseInt($,8);return ae>255&&($=$.slice(0,-1),ae=parseInt($,8)),this.pos+=$.length-1,S=this.input.charCodeAt(this.pos),($!=="0"||S===56||S===57)&&(this.strict||f)&&this.invalidStringToken(this.pos-1-$.length,f?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ae)}return Be(S)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(S)}},At.readHexChar=function(f){var S=this.pos,F=this.readInt(16,f);return F===null&&this.invalidStringToken(S,"Bad character escape sequence"),F},At.readWord1=function(){this.containsEsc=!1;for(var f="",S=!0,F=this.pos,$=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ae=this.fullCharCodeAtPos();if(L(ae,$))this.pos+=ae<=65535?1:2;else if(ae===92){this.containsEsc=!0,f+=this.input.slice(F,this.pos);var Te=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Me=this.readCodePoint();(S?V:L)(Me,$)||this.invalidStringToken(Te,"Invalid Unicode escape"),f+=yt(Me),F=this.pos}else break;S=!1}return f+this.input.slice(F,this.pos)},At.readWord=function(){var f=this.readWord1(),S=I.name;return this.keywords.test(f)&&(S=de[f]),this.finishToken(S,f)};var tn="8.15.0";h.acorn={Parser:h,version:tn,defaultOptions:ut,Position:Ve,SourceLocation:tt,getLineInfo:ot,Node:le,TokenType:ee,tokTypes:I,keywordTypes:de,TokContext:Z,tokContexts:B,isIdentifierChar:L,isIdentifierStart:V,Token:Tn,isNewLine:Be,lineBreak:Ee,lineBreakG:Ye,nonASCIIwhitespace:nt};function br(f,S){return h.parse(f,S)}function _r(f,S,F){return h.parseExpressionAt(f,S,F)}function gs(f,S){return h.tokenizer(f,S)}t.Node=le,t.Parser=h,t.Position=Ve,t.SourceLocation=tt,t.TokContext=Z,t.Token=Tn,t.TokenType=ee,t.defaultOptions=ut,t.getLineInfo=ot,t.isIdentifierChar=L,t.isIdentifierStart=V,t.isNewLine=Be,t.keywordTypes=de,t.lineBreak=Ee,t.lineBreakG=Ye,t.nonASCIIwhitespace=nt,t.parse=br,t.parseExpressionAt=_r,t.tokContexts=B,t.tokTypes=I,t.tokenizer=gs,t.version=tn}))})(Yc,Yc.exports)),Yc.exports}var L5=Zh.exports,Rx;function P5(){return Rx||(Rx=1,(function(o){(function(e,t){e=e||Dx;var i=e.window,s=e.document,a=new function(){var l=/^(statics|enumerable|beans|preserve)$/,h=[],g=h.slice,v=Object.create,x=Object.getOwnPropertyDescriptor,T=Object.defineProperty,A=h.forEach||function(z,R){for(var K=0,Y=this.length;K<Y;K++)z.call(R,this[K],K,this)},O=function(z,R){for(var K in this)this.hasOwnProperty(K)&&z.call(R,this[K],K,this)},j=Object.assign||function(z){for(var R=1,K=arguments.length;R<K;R++){var Y=arguments[R];for(var Z in Y)Y.hasOwnProperty(Z)&&(z[Z]=Y[Z])}return z},M=function(z,R,K){if(z){var Y=x(z,"length");(Y&&typeof Y.value=="number"?A:O).call(z,R,K=K||z)}return K};function P(z,R,K,Y,Z){var B={};function q(W,se){se=se||(se=x(R,W))&&(se.get?se:se.value),typeof se=="string"&&se[0]==="#"&&(se=z[se.substring(1)]||se);var oe=typeof se=="function",le=se,ge=Z||oe&&!se.base?se&&se.get?W in z:z[W]:null,re;(!Z||!ge)&&(oe&&ge&&(se.base=ge),oe&&Y!==!1&&(re=W.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(B[re[3].toLowerCase()+re[4]]=re[2]),(!le||oe||!le.get||typeof le.get!="function"||!H.isPlainObject(le))&&(le={value:le,writable:!0}),(x(z,W)||{configurable:!0}).configurable&&(le.configurable=!0,le.enumerable=K??!re),T(z,W,le))}if(R){for(var D in R)R.hasOwnProperty(D)&&!l.test(D)&&q(D);for(var D in B){var X=B[D],Q=z["set"+X],J=z["get"+X]||Q&&z["is"+X];J&&(Y===!0||J.length===0)&&q(D,{get:J,set:Q})}}return z}function H(){for(var z=0,R=arguments.length;z<R;z++){var K=arguments[z];K&&j(this,K)}return this}return P(H,{inject:function(z){if(z){var R=z.statics===!0?z:z.statics,K=z.beans,Y=z.preserve;R!==z&&P(this.prototype,z,z.enumerable,K,Y),P(this,R,null,K,Y)}for(var Z=1,B=arguments.length;Z<B;Z++)this.inject(arguments[Z]);return this},extend:function(){for(var z=this,R,K,Y=0,Z,B=arguments.length;Y<B&&!(R&&K);Y++)Z=arguments[Y],R=R||Z.initialize,K=K||Z.prototype;return R=R||function(){z.apply(this,arguments)},K=R.prototype=K||v(this.prototype),T(K,"constructor",{value:R,writable:!0,configurable:!0}),P(R,this),arguments.length&&this.inject.apply(R,arguments),R.base=z,R}}).inject({enumerable:!1,initialize:H,set:H,inject:function(){for(var z=0,R=arguments.length;z<R;z++){var K=arguments[z];K&&P(this,K,K.enumerable,K.beans,K.preserve)}return this},extend:function(){var z=v(this);return z.inject.apply(z,arguments)},each:function(z,R){return M(this,z,R)},clone:function(){return new this.constructor(this)},statics:{set:j,each:M,create:v,define:T,describe:x,clone:function(z){return j(new z.constructor,z)},isPlainObject:function(z){var R=z!=null&&z.constructor;return R&&(R===Object||R===H||R.name==="Object")},pick:function(z,R){return z!==t?z:R},slice:function(z,R,K){return g.call(z,R,K)}}})};o.exports=a,a.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,function(l,h){if(!/^_/.test(h)){var g=typeof l;this.push(h+": "+(g==="number"?b.instance.number(l):g==="string"?"'"+l+"'":l))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(l){return a.importJSON(l,this)},exportJSON:function(l){return a.exportJSON(this,l)},toJSON:function(){return a.serialize(this)},set:function(l,h){return l&&a.filter(this,l,h,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function l(){var h=l.base.apply(this,arguments),g=h.prototype._class;return g&&!a.exports[g]&&(a.exports[g]=h),h},equals:function(l,h){if(l===h)return!0;if(l&&l.equals)return l.equals(h);if(h&&h.equals)return h.equals(l);if(l&&h&&typeof l=="object"&&typeof h=="object"){if(Array.isArray(l)&&Array.isArray(h)){var g=l.length;if(g!==h.length)return!1;for(;g--;)if(!a.equals(l[g],h[g]))return!1}else{var v=Object.keys(l),g=v.length;if(g!==Object.keys(h).length)return!1;for(;g--;){var x=v[g];if(!(h.hasOwnProperty(x)&&a.equals(l[x],h[x])))return!1}}return!0}return!1},read:function(l,h,g,v){if(this===a){var x=this.peek(l,h);return l.__index++,x}var T=this.prototype,A=T._readIndex,O=h||A&&l.__index||0,j=l.length,M=l[O];if(v=v||j-O,M instanceof this||g&&g.readNull&&M==null&&v<=1)return A&&(l.__index=O+1),M&&g&&g.clone?M.clone():M;if(M=a.create(T),A&&(M.__read=!0),M=M.initialize.apply(M,O>0||O+v<j?a.slice(l,O,O+v):l)||M,A){l.__index=O+M.__read;var P=M.__filtered;P&&(l.__filtered=P,M.__filtered=t),M.__read=t}return M},peek:function(l,h){return l[l.__index=h||l.__index||0]},remain:function(l){return l.length-(l.__index||0)},readList:function(l,h,g,v){for(var x=[],T,A=h||0,O=v?A+v:l.length,j=A;j<O;j++)x.push(Array.isArray(T=l[j])?this.read(T,0,g):this.read(l,j,g,1));return x},readNamed:function(l,h,g,v,x){var T=this.getNamed(l,h),A=T!==t;if(A){var O=l.__filtered;if(!O){var j=this.getSource(l);O=l.__filtered=a.create(j),O.__unfiltered=j}O[h]=t}return this.read(A?[T]:l,g,v,x)},readSupported:function(l,h){var g=this.getSource(l),v=this,x=!1;return g&&Object.keys(g).forEach(function(T){if(T in h){var A=v.readNamed(l,T);A!==t&&(h[T]=A),x=!0}}),x},getSource:function(l){var h=l.__source;if(h===t){var g=l.length===1&&l[0];h=l.__source=g&&a.isPlainObject(g)?g:null}return h},getNamed:function(l,h){var g=this.getSource(l);if(g)return h?g[h]:l.__filtered||g},hasNamed:function(l,h){return!!this.getNamed(l,h)},filter:function(l,h,g,v){var x;function T(P){if(!(g&&P in g)&&!(x&&P in x)){var H=h[P];H!==t&&(l[P]=H)}}if(v){for(var A={},O=0,j,M=v.length;O<M;O++)(j=v[O])in h&&(T(j),A[j]=!0);x=A}return Object.keys(h.__unfiltered||h).forEach(T),l},isPlainValue:function(l,h){return a.isPlainObject(l)||Array.isArray(l)||h&&typeof l=="string"},serialize:function(l,h,g,v){h=h||{};var x=!v,T;if(x&&(h.formatter=new b(h.precision),v={length:0,definitions:{},references:{},add:function(H,z){var R="#"+H._id,K=this.references[R];if(!K){this.length++;var Y=z.call(H),Z=H._class;Z&&Y[0]!==Z&&Y.unshift(Z),this.definitions[R]=Y,K=this.references[R]=[R]}return K}}),l&&l._serialize){T=l._serialize(h,v);var A=l._class;A&&!l._compactSerialize&&(x||!g)&&T[0]!==A&&T.unshift(A)}else if(Array.isArray(l)){T=[];for(var O=0,j=l.length;O<j;O++)T[O]=a.serialize(l[O],h,g,v)}else if(a.isPlainObject(l)){T={};for(var M=Object.keys(l),O=0,j=M.length;O<j;O++){var P=M[O];T[P]=a.serialize(l[P],h,g,v)}}else typeof l=="number"?T=h.formatter.number(l,h.precision):T=l;return x&&v.length>0?[["dictionary",v.definitions],T]:T},deserialize:function(l,h,g,v,x){var T=l,A=!g,O=A&&l&&l.length&&l[0][0]==="dictionary";if(g=g||{},Array.isArray(l)){var j=l[0],M=j==="dictionary";if(l.length==1&&/^#/.test(j))return g.dictionary[j];j=a.exports[j],T=[];for(var P=j?1:0,H=l.length;P<H;P++)T.push(a.deserialize(l[P],h,g,M,O));if(j){var z=T;h?T=h(j,z,A||x):T=new j(z)}}else if(a.isPlainObject(l)){T={},v&&(g.dictionary=T);for(var R in l)T[R]=a.deserialize(l[R],h,g)}return O?T[1]:T},exportJSON:function(l,h){var g=a.serialize(l,h);return h&&h.asString==!1?g:JSON.stringify(g)},importJSON:function(l,h){return a.deserialize(typeof l=="string"?JSON.parse(l):l,function(g,v,x){var T=x&&h&&h.constructor===g,A=T?h:a.create(g.prototype);if(v.length===1&&A instanceof I&&(T||!(A instanceof Ye))){var O=v[0];a.isPlainObject(O)&&(O.insert=!1,T&&(v=v.concat([I.INSERT])))}return(T?A.set:g).apply(A,v),T&&(h=null),A})},push:function(l,h){var g=h.length;if(g<4096)l.push.apply(l,h);else{var v=l.length;l.length+=g;for(var x=0;x<g;x++)l[v+x]=h[x]}return l},splice:function(l,h,g,v){var x=h&&h.length,T=g===t;g=T?l.length:g,g>l.length&&(g=l.length);for(var A=0;A<x;A++)h[A]._index=g+A;if(T)return a.push(l,h),[];var O=[g,v];h&&a.push(O,h);for(var j=l.splice.apply(l,O),A=0,M=j.length;A<M;A++)j[A]._index=t;for(var A=g+x,M=l.length;A<M;A++)l[A]._index=A;return j},capitalize:function(l){return l.replace(/\b[a-z]/g,function(h){return h.toUpperCase()})},camelize:function(l){return l.replace(/-(.)/g,function(h,g){return g.toUpperCase()})},hyphenate:function(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var u={on:function(l,h){if(typeof l!="string")a.each(l,function(T,A){this.on(A,T)},this);else{var g=this._eventTypes,v=g&&g[l],x=this._callbacks=this._callbacks||{};x=x[l]=x[l]||[],x.indexOf(h)===-1&&(x.push(h),v&&v.install&&x.length===1&&v.install.call(this,l))}return this},off:function(l,h){if(typeof l!="string"){a.each(l,function(A,O){this.off(O,A)},this);return}var g=this._eventTypes,v=g&&g[l],x=this._callbacks&&this._callbacks[l],T;return x&&(!h||(T=x.indexOf(h))!==-1&&x.length===1?(v&&v.uninstall&&v.uninstall.call(this,l),delete this._callbacks[l]):T!==-1&&x.splice(T,1)),this},once:function(l,h){return this.on(l,function g(){h.apply(this,arguments),this.off(l,g)})},emit:function(l,h){var g=this._callbacks&&this._callbacks[l];if(!g)return!1;var v=a.slice(arguments,1),x=h&&h.target&&!h.currentTarget;g=g.slice(),x&&(h.currentTarget=this);for(var T=0,A=g.length;T<A;T++)if(g[T].apply(this,v)==!1){h&&h.stop&&h.stop();break}return x&&delete h.currentTarget,!0},responds:function(l){return!!(this._callbacks&&this._callbacks[l])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(l){var h=this._eventTypes,g=this._callbacks,v=l?"install":"uninstall";if(h){for(var x in g)if(g[x].length>0){var T=h[x],A=T&&T[v];A&&A.call(this,x)}}},statics:{inject:function l(h){var g=h._events;if(g){var v={};a.each(g,function(x,T){var A=typeof x=="string",O=A?x:T,j=a.capitalize(O),M=O.substring(2).toLowerCase();v[M]=A?{}:x,O="_"+O,h["get"+j]=function(){return this[O]},h["set"+j]=function(P){var H=this[O];H&&this.off(M,H),P&&this.on(M,P),this[O]=P}}),h._eventTypes=v}return l.base.apply(this,arguments)}}},p=a.extend({_class:"PaperScope",initialize:function l(){Nt=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=l._id++,l._scopes[this._id]=this;var h=l.prototype;if(!this.support){var g=oi.getContext(1,1)||{};h.support={nativeDash:"setLineDash"in g||"mozDash"in g,nativeBlendModes:mr.nativeModes},oi.release(g)}if(!this.agent){var v=e.navigator.userAgent.toLowerCase(),x=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(v)||[])[0],T=x==="darwin"?"mac":x,A=h.agent=h.browser={platform:T};T&&(A[T]=!0),v.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(O,j,M,P,H){if(!A.chrome){var z=j==="opera"?P:/^(node|trident)$/.test(j)?H:M;A.version=z,A.versionNumber=parseFloat(z),j={trident:"msie",jsdom:"node"}[j]||j,A.name=j,A[j]=!0}}),A.chrome&&delete A.webkit,A.atom&&delete A.chrome}},version:"0.12.18",getView:function(){var l=this.project;return l&&l._view},getPaper:function(){return this},execute:function(l,h){var g=Nt.PaperScript.execute(l,this,h);return Qt.updateFocus(),g},install:function(l){var h=this;a.each(["project","view","tool"],function(v){a.define(l,v,{configurable:!0,get:function(){return h[v]}})});for(var g in this)!/^_/.test(g)&&this[g]&&(l[g]=this[g])},setup:function(l){return Nt=this,this.project=new be(l),this},createCanvas:function(l,h){return oi.getCanvas(l,h)},activate:function(){Nt=this},clear:function(){for(var l=this.projects,h=this.tools,g=l.length-1;g>=0;g--)l[g].remove();for(var g=h.length-1;g>=0;g--)h[g].remove()},remove:function(){this.clear(),delete p._scopes[this._id]},statics:new function(){function l(h){return h+="Attribute",function(g,v){return g[h](v)||g[h]("data-paper-"+v)}}return{_scopes:{},_id:0,get:function(h){return this._scopes[h]||null},getAttribute:l("get"),hasAttribute:l("has")}}}),m=a.extend(u,{initialize:function(l){this._scope=Nt,this._index=this._scope[this._list].push(this)-1,(l||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var l=this._scope[this._reference];return l&&l!==this&&l.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",l),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),y={findItemBoundsCollisions:function(l,h,g){function v(A){for(var O=new Array(A.length),j=0;j<A.length;j++){var M=A[j].getBounds();O[j]=[M.left,M.top,M.right,M.bottom]}return O}var x=v(l),T=!h||h===l?x:v(h);return this.findBoundsCollisions(x,T,g||0)},findCurveBoundsCollisions:function(l,h,g,v){function x(z){for(var R=Math.min,K=Math.max,Y=new Array(z.length),Z=0;Z<z.length;Z++){var B=z[Z];Y[Z]=[R(B[0],B[2],B[4],B[6]),R(B[1],B[3],B[5],B[7]),K(B[0],B[2],B[4],B[6]),K(B[1],B[3],B[5],B[7])]}return Y}var T=x(l),A=!h||h===l?T:x(h);if(v){for(var O=this.findBoundsCollisions(T,A,g||0,!1,!0),j=this.findBoundsCollisions(T,A,g||0,!0,!0),M=[],P=0,H=O.length;P<H;P++)M[P]={hor:O[P],ver:j[P]};return M}return this.findBoundsCollisions(T,A,g||0)},findBoundsCollisions:function(l,h,g,v,x){var T=!h||l===h,A=T?l:l.concat(h),O=l.length,j=A.length;function M(We,Je,lt){for(var Pe=0,Ie=We.length;Pe<Ie;){var Qe=Ie+Pe>>>1;A[We[Qe]][Je]<lt?Pe=Qe+1:Ie=Qe}return Pe-1}for(var P=v?1:0,H=P+2,z=v?0:1,R=z+2,K=new Array(j),Y=0;Y<j;Y++)K[Y]=Y;K.sort(function(We,Je){return A[We][P]-A[Je][P]});for(var Z=[],B=new Array(O),Y=0;Y<j;Y++){var q=K[Y],D=A[q],X=T?q:q-O,Q=q<O,J=T||!Q,W=Q?[]:null;if(Z.length){var se=M(Z,H,D[P]-g)+1;if(Z.splice(0,se),T&&x){W=W.concat(Z);for(var oe=0;oe<Z.length;oe++){var le=Z[oe];B[le].push(X)}}else for(var ge=D[R],re=D[z],oe=0;oe<Z.length;oe++){var le=Z[oe],ue=A[le],me=le<O,Ce=T||le>=O;(x||(Q&&Ce||J&&me)&&ge>=ue[z]-g&&re<=ue[R]+g)&&(Q&&Ce&&W.push(T?le:le-O),J&&me&&B[le].push(X))}}if(Q&&(l===h&&W.push(q),B[q]=W),Z.length){var we=D[H],Ae=M(Z,H,we);Z.splice(Ae+1,0,q)}else Z.push(q)}for(var Y=0;Y<B.length;Y++){var ze=B[Y];ze&&ze.sort(function(Je,lt){return Je-lt})}return B}},b=a.extend({initialize:function(l){this.precision=a.pick(l,5),this.multiplier=Math.pow(10,this.precision)},number:function(l){return this.precision<16?Math.round(l*this.multiplier)/this.multiplier:l},pair:function(l,h,g){return this.number(l)+(g||",")+this.number(h)},point:function(l,h){return this.number(l.x)+(h||",")+this.number(l.y)},size:function(l,h){return this.number(l.width)+(h||",")+this.number(l.height)},rectangle:function(l,h){return this.point(l,h)+(h||",")+this.size(l,h)}});b.instance=new b;var C=new function(){var l=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],h=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],g=Math.abs,v=Math.sqrt,x=Math.pow,T=Math.log2||function(H){return Math.log(H)*Math.LOG2E},A=1e-12,O=112e-18;function j(H,z,R){return H<z?z:H>R?R:H}function M(H,z,R){function K(se){var oe=se*134217729,le=se-oe,ge=le+oe,re=se-ge;return[ge,re]}var Y=z*z-H*R,Z=z*z+H*R;if(g(Y)*3<Z){var B=K(H),q=K(z),D=K(R),X=z*z,Q=q[0]*q[0]-X+2*q[0]*q[1]+q[1]*q[1],J=H*R,W=B[0]*D[0]-J+B[0]*D[1]+B[1]*D[0]+B[1]*D[1];Y=X-J+(Q-W)}return Y}function P(){var H=Math.max.apply(Math,arguments);return H&&(H<1e-8||H>1e8)?x(2,-Math.round(T(H))):0}return{EPSILON:A,MACHINE_EPSILON:O,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(v(2)-1)/3,isZero:function(H){return H>=-A&&H<=A},isMachineZero:function(H){return H>=-O&&H<=O},clamp:j,integrate:function(H,z,R,K){for(var Y=l[K-2],Z=h[K-2],B=(R-z)*.5,q=B+z,D=0,X=K+1>>1,Q=K&1?Z[D++]*H(q):0;D<X;){var J=B*Y[D];Q+=Z[D++]*(H(q+J)+H(q-J))}return B*Q},findRoot:function(H,z,R,K,Y,Z,B){for(var q=0;q<Z;q++){var D=H(R),X=D/z(R),Q=R-X;if(g(X)<B){R=Q;break}D>0?(Y=R,R=Q<=K?(K+Y)*.5:Q):(K=R,R=Q>=Y?(K+Y)*.5:Q)}return j(R,K,Y)},solveQuadratic:function(H,z,R,K,Y,Z){var B,q=1/0;if(g(H)<A){if(g(z)<A)return g(R)<A?-1:0;B=-R/z}else{z*=-.5;var D=M(H,z,R);if(D&&g(D)<O){var X=P(g(H),g(z),g(R));X&&(H*=X,z*=X,R*=X,D=M(H,z,R))}if(D>=-O){var Q=D<0?0:v(D),J=z+(z<0?-Q:Q);J===0?(B=R/H,q=-B):(B=J/H,q=R/J)}}var W=0,se=Y==null,oe=Y-A,le=Z+A;return isFinite(B)&&(se||B>oe&&B<le)&&(K[W++]=se?B:j(B,Y,Z)),q!==B&&isFinite(q)&&(se||q>oe&&q<le)&&(K[W++]=se?q:j(q,Y,Z)),W},solveCubic:function(H,z,R,K,Y,Z,B){var q=P(g(H),g(z),g(R),g(K)),D,X,Q,J,W;q&&(H*=q,z*=q,R*=q,K*=q);function se(Ae){D=Ae;var ze=H*D;X=ze+z,Q=X*D+R,J=(ze+X)*D+Q,W=Q*D+K}if(g(H)<A)H=z,X=R,Q=K,D=1/0;else if(g(K)<A)X=z,Q=R,D=0;else{se(-(z/H)/3);var oe=W/H,le=x(g(oe),1/3),ge=oe<0?-1:1,re=-J/H,ue=re>0?1.324717957244746*Math.max(le,v(re)):le,me=D-ge*ue;if(me!==D){do se(me),me=J===0?D:D-W/J/(1+O);while(ge*me>ge*D);g(H)*D*D>g(K/D)&&(Q=-K/D,X=(Q-R)/D)}}var Ce=C.solveQuadratic(H,X,Q,Y,Z,B),we=Z==null;return isFinite(D)&&(Ce===0||Ce>0&&D!==Y[0]&&D!==Y[1])&&(we||D>Z-A&&D<B+A)&&(Y[Ce++]=we?D:j(D,Z,B)),Ce}}},N={_id:1,_pools:{},get:function(l){if(l){var h=this._pools[l];return h||(h=this._pools[l]={_id:1}),h._id++}else return this._id++}},E=a.extend({_class:"Point",_readIndex:!0,initialize:function(h,g){var v=typeof h,x=this.__read,T=0;if(v==="number"){var A=typeof g=="number";this._set(h,A?g:h),x&&(T=A?2:1)}else if(v==="undefined"||h===null)this._set(0,0),x&&(T=h===null?1:0);else{var O=v==="string"?h.split(/[\s,]+/)||[]:h;T=1,Array.isArray(O)?this._set(+O[0],+(O.length>1?O[1]:O[0])):"x"in O?this._set(O.x||0,O.y||0):"width"in O?this._set(O.width||0,O.height||0):"angle"in O?(this._set(O.length||0,0),this.setAngle(O.angle||0)):(this._set(0,0),T=0)}return x&&(this.__read=T),this},set:"#initialize",_set:function(l,h){return this.x=l,this.y=h,this},equals:function(l){return this===l||l&&(this.x===l.x&&this.y===l.y||Array.isArray(l)&&this.x===l[0]&&this.y===l[1])||!1},clone:function(){return new E(this.x,this.y)},toString:function(){var l=b.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+" }"},_serialize:function(l){var h=l.formatter;return[h.number(this.x),h.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(l){if(this.isZero()){var h=this._angle||0;this._set(Math.cos(h)*l,Math.sin(h)*l)}else{var g=l/this.getLength();C.isZero(g)&&this.getAngle(),this._set(this.x*g,this.y*g)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(l){this.setAngleInRadians.call(this,l*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var l=E.read(arguments),h=this.getLength()*l.getLength();if(C.isZero(h))return NaN;var g=this.dot(l)/h;return Math.acos(g<-1?-1:g>1?1:g)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(l){if(this._angle=l,!this.isZero()){var h=this.getLength();this._set(Math.cos(l)*h,Math.sin(l)*h)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var l=E.read(arguments);return Math.atan2(this.cross(l),this.dot(l))*180/Math.PI},getDistance:function(){var l=arguments,h=E.read(l),g=h.x-this.x,v=h.y-this.y,x=g*g+v*v,T=a.read(l);return T?x:Math.sqrt(x)},normalize:function(l){l===t&&(l=1);var h=this.getLength(),g=h!==0?l/h:0,v=new E(this.x*g,this.y*g);return g>=0&&(v._angle=this._angle),v},rotate:function(l,h){if(l===0)return this.clone();l=l*Math.PI/180;var g=h?this.subtract(h):this,v=Math.sin(l),x=Math.cos(l);return g=new E(g.x*x-g.y*v,g.x*v+g.y*x),h?g.add(h):g},transform:function(l){return l?l._transformPoint(this):this},add:function(){var l=E.read(arguments);return new E(this.x+l.x,this.y+l.y)},subtract:function(){var l=E.read(arguments);return new E(this.x-l.x,this.y-l.y)},multiply:function(){var l=E.read(arguments);return new E(this.x*l.x,this.y*l.y)},divide:function(){var l=E.read(arguments);return new E(this.x/l.x,this.y/l.y)},modulo:function(){var l=E.read(arguments);return new E(this.x%l.x,this.y%l.y)},negate:function(){return new E(-this.x,-this.y)},isInside:function(){return G.read(arguments).contains(this)},isClose:function(){var l=arguments,h=E.read(l),g=a.read(l);return this.getDistance(h)<=g},isCollinear:function(){var l=E.read(arguments);return E.isCollinear(this.x,this.y,l.x,l.y)},isColinear:"#isCollinear",isOrthogonal:function(){var l=E.read(arguments);return E.isOrthogonal(this.x,this.y,l.x,l.y)},isZero:function(){var l=C.isZero;return l(this.x)&&l(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(l){return this.x*(l>1&&l<4?-1:1)>=0&&this.y*(l>2?-1:1)>=0},dot:function(){var l=E.read(arguments);return this.x*l.x+this.y*l.y},cross:function(){var l=E.read(arguments);return this.x*l.y-this.y*l.x},project:function(){var l=E.read(arguments),h=l.isZero()?0:this.dot(l)/l.dot(l);return new E(l.x*h,l.y*h)},statics:{min:function(){var l=arguments,h=E.read(l),g=E.read(l);return new E(Math.min(h.x,g.x),Math.min(h.y,g.y))},max:function(){var l=arguments,h=E.read(l),g=E.read(l);return new E(Math.max(h.x,g.x),Math.max(h.y,g.y))},random:function(){return new E(Math.random(),Math.random())},isCollinear:function(l,h,g,v){return Math.abs(l*v-h*g)<=Math.sqrt((l*l+h*h)*(g*g+v*v))*1e-8},isOrthogonal:function(l,h,g,v){return Math.abs(l*g+h*v)<=Math.sqrt((l*l+h*h)*(g*g+v*v))*1e-8}}},a.each(["round","ceil","floor","abs"],function(l){var h=Math[l];this[l]=function(){return new E(h(this.x),h(this.y))}},{})),V=E.extend({initialize:function(h,g,v,x){this._x=h,this._y=g,this._owner=v,this._setter=x},_set:function(l,h,g){return this._x=l,this._y=h,g||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),L=a.extend({_class:"Size",_readIndex:!0,initialize:function(h,g){var v=typeof h,x=this.__read,T=0;if(v==="number"){var A=typeof g=="number";this._set(h,A?g:h),x&&(T=A?2:1)}else if(v==="undefined"||h===null)this._set(0,0),x&&(T=h===null?1:0);else{var O=v==="string"?h.split(/[\s,]+/)||[]:h;T=1,Array.isArray(O)?this._set(+O[0],+(O.length>1?O[1]:O[0])):"width"in O?this._set(O.width||0,O.height||0):"x"in O?this._set(O.x||0,O.y||0):(this._set(0,0),T=0)}return x&&(this.__read=T),this},set:"#initialize",_set:function(l,h){return this.width=l,this.height=h,this},equals:function(l){return l===this||l&&(this.width===l.width&&this.height===l.height||Array.isArray(l)&&this.width===l[0]&&this.height===l[1])||!1},clone:function(){return new L(this.width,this.height)},toString:function(){var l=b.instance;return"{ width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var h=l.formatter;return[h.number(this.width),h.number(this.height)]},add:function(){var l=L.read(arguments);return new L(this.width+l.width,this.height+l.height)},subtract:function(){var l=L.read(arguments);return new L(this.width-l.width,this.height-l.height)},multiply:function(){var l=L.read(arguments);return new L(this.width*l.width,this.height*l.height)},divide:function(){var l=L.read(arguments);return new L(this.width/l.width,this.height/l.height)},modulo:function(){var l=L.read(arguments);return new L(this.width%l.width,this.height%l.height)},negate:function(){return new L(-this.width,-this.height)},isZero:function(){var l=C.isZero;return l(this.width)&&l(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(l,h){return new L(Math.min(l.width,h.width),Math.min(l.height,h.height))},max:function(l,h){return new L(Math.max(l.width,h.width),Math.max(l.height,h.height))},random:function(){return new L(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],function(l){var h=Math[l];this[l]=function(){return new L(h(this.width),h(this.height))}},{})),ee=L.extend({initialize:function(h,g,v,x){this._width=h,this._height=g,this._owner=v,this._setter=x},_set:function(l,h,g){return this._width=l,this._height=h,g||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(l){this._width=l,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(l){this._height=l,this._owner[this._setter](this)}}),G=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(h,g,v,x){var T=arguments,A=typeof h,O;if(A==="number"?(this._set(h,g,v,x),O=4):A==="undefined"||h===null?(this._set(0,0,0,0),O=h===null?1:0):T.length===1&&(Array.isArray(h)?(this._set.apply(this,h),O=1):h.x!==t||h.width!==t?(this._set(h.x||0,h.y||0,h.width||0,h.height||0),O=1):h.from===t&&h.to===t&&(this._set(0,0,0,0),a.readSupported(T,this)&&(O=1))),O===t){var j=E.readNamed(T,"from"),M=a.peek(T),P=j.x,H=j.y,z,R;if(M&&M.x!==t||a.hasNamed(T,"to")){var K=E.readNamed(T,"to");z=K.x-P,R=K.y-H,z<0&&(P=K.x,z=-z),R<0&&(H=K.y,R=-R)}else{var Y=L.read(T);z=Y.width,R=Y.height}this._set(P,H,z,R),O=T.__index}var Z=T.__filtered;return Z&&(this.__filtered=Z),this.__read&&(this.__read=O),this},set:"#initialize",_set:function(l,h,g,v){return this.x=l,this.y=h,this.width=g,this.height=v,this},clone:function(){return new G(this.x,this.y,this.width,this.height)},equals:function(l){var h=a.isPlainValue(l)?G.read(arguments):l;return h===this||h&&this.x===h.x&&this.y===h.y&&this.width===h.width&&this.height===h.height||!1},toString:function(){var l=b.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+", width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var h=l.formatter;return[h.number(this.x),h.number(this.y),h.number(this.width),h.number(this.height)]},getPoint:function(l){var h=l?E:V;return new h(this.x,this.y,this,"setPoint")},setPoint:function(){var l=E.read(arguments);this.x=l.x,this.y=l.y},getSize:function(l){var h=l?L:ee;return new h(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var l=L.read(arguments),h=this._sx,g=this._sy,v=l.width,x=l.height;h&&(this.x+=(this.width-v)*h),g&&(this.y+=(this.height-x)*g),this.width=v,this.height=x,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(l){if(!this._fw){var h=l-this.x;this.width-=this._sx===.5?h*2:h}this.x=l,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(l){if(!this._fh){var h=l-this.y;this.height-=this._sy===.5?h*2:h}this.y=l,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(l){if(!this._fw){var h=l-this.x;this.width=this._sx===.5?h*2:h}this.x=l-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(l){if(!this._fh){var h=l-this.y;this.height=this._sy===.5?h*2:h}this.y=l-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(l){this._fw||this._sx===.5?this.x=l-this.width/2:(this._sx&&(this.x+=(l-this.x)*2*this._sx),this.width=(l-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(l){this._fh||this._sy===.5?this.y=l-this.height/2:(this._sy&&(this.y+=(l-this.y)*2*this._sy),this.height=(l-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(l){var h=l?E:V;return new h(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var l=E.read(arguments);return this.setCenterX(l.x),this.setCenterY(l.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(l){return l&&l.width!==t||(Array.isArray(l)?l:arguments).length===4?this._containsRectangle(G.read(arguments)):this._containsPoint(E.read(arguments))},_containsPoint:function(l){var h=l.x,g=l.y;return h>=this.x&&g>=this.y&&h<=this.x+this.width&&g<=this.y+this.height},_containsRectangle:function(l){var h=l.x,g=l.y;return h>=this.x&&g>=this.y&&h+l.width<=this.x+this.width&&g+l.height<=this.y+this.height},intersects:function(){var l=G.read(arguments),h=a.read(arguments)||0;return l.x+l.width>this.x-h&&l.y+l.height>this.y-h&&l.x<this.x+this.width+h&&l.y<this.y+this.height+h},intersect:function(){var l=G.read(arguments),h=Math.max(this.x,l.x),g=Math.max(this.y,l.y),v=Math.min(this.x+this.width,l.x+l.width),x=Math.min(this.y+this.height,l.y+l.height);return new G(h,g,v-h,x-g)},unite:function(){var l=G.read(arguments),h=Math.min(this.x,l.x),g=Math.min(this.y,l.y),v=Math.max(this.x+this.width,l.x+l.width),x=Math.max(this.y+this.height,l.y+l.height);return new G(h,g,v-h,x-g)},include:function(){var l=E.read(arguments),h=Math.min(this.x,l.x),g=Math.min(this.y,l.y),v=Math.max(this.x+this.width,l.x),x=Math.max(this.y+this.height,l.y);return new G(h,g,v-h,x-g)},expand:function(){var l=L.read(arguments),h=l.width,g=l.height;return new G(this.x-h/2,this.y-g/2,this.width+h,this.height+g)},scale:function(l,h){return this.expand(this.width*l-this.width,this.height*(h===t?l:h)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(l,h){var g=l.join(""),v=/^[RL]/.test(g);h>=4&&(l[1]+=v?"Y":"X");var x=l[v?0:1],T=l[v?1:0],A="get"+x,O="get"+T,j="set"+x,M="set"+T,P="get"+g,H="set"+g;this[P]=function(z){var R=z?E:V;return new R(this[A](),this[O](),this,H)},this[H]=function(){var z=E.read(arguments);this[j](z.x),this[M](z.y)}},{beans:!0})),te=G.extend({initialize:function(h,g,v,x,T,A){this._set(h,g,v,x,!0),this._owner=T,this._setter=A},_set:function(l,h,g,v,x){return this._x=l,this._y=h,this._width=g,this._height=v,x||this._owner[this._setter](this),this}},new function(){var l=G.prototype;return a.each(["x","y","width","height"],function(h){var g=a.capitalize(h),v="_"+h;this["get"+g]=function(){return this[v]},this["set"+g]=function(x){this[v]=x,this._dontNotify||this._owner[this._setter](this)}},a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(h){var g="set"+h;this[g]=function(){this._dontNotify=!0,l[g].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(h){var g=this._owner;g._changeSelection&&g._changeSelection(2,h)}}))}),ne=a.extend({_class:"Matrix",initialize:function l(h,g){var v=arguments,x=v.length,T=!0;if(x>=6?this._set.apply(this,v):x===1||x===2?h instanceof l?this._set(h._a,h._b,h._c,h._d,h._tx,h._ty,g):Array.isArray(h)?this._set.apply(this,g?h.concat([g]):h):T=!1:x?T=!1:this.reset(),!T)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(l,h,g,v,x,T,A){return this._a=l,this._b=h,this._c=g,this._d=v,this._tx=x,this._ty=T,A||this._changed(),this},_serialize:function(l,h){return a.serialize(this.getValues(),l,!0,h)},_changed:function(){var l=this._owner;l&&(l._applyMatrix?l.transform(null,!0):l._changed(25))},clone:function(){return new ne(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(l){return l===this||l&&this._a===l._a&&this._b===l._b&&this._c===l._c&&this._d===l._d&&this._tx===l._tx&&this._ty===l._ty},toString:function(){var l=b.instance;return"[["+[l.number(this._a),l.number(this._c),l.number(this._tx)].join(", ")+"], ["+[l.number(this._b),l.number(this._d),l.number(this._ty)].join(", ")+"]]"},reset:function(l){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,l||this._changed(),this},apply:function(l,h){var g=this._owner;return g?(g.transform(null,a.pick(l,!0),h),this.isIdentity()):!1},translate:function(){var l=E.read(arguments),h=l.x,g=l.y;return this._tx+=h*this._a+g*this._c,this._ty+=h*this._b+g*this._d,this._changed(),this},scale:function(){var l=arguments,h=E.read(l),g=E.read(l,0,{readNull:!0});return g&&this.translate(g),this._a*=h.x,this._b*=h.x,this._c*=h.y,this._d*=h.y,g&&this.translate(g.negate()),this._changed(),this},rotate:function(l){l*=Math.PI/180;var h=E.read(arguments,1),g=h.x,v=h.y,x=Math.cos(l),T=Math.sin(l),A=g-g*x+v*T,O=v-g*T-v*x,j=this._a,M=this._b,P=this._c,H=this._d;return this._a=x*j+T*P,this._b=x*M+T*H,this._c=-T*j+x*P,this._d=-T*M+x*H,this._tx+=A*j+O*P,this._ty+=A*M+O*H,this._changed(),this},shear:function(){var l=arguments,h=E.read(l),g=E.read(l,0,{readNull:!0});g&&this.translate(g);var v=this._a,x=this._b;return this._a+=h.y*this._c,this._b+=h.y*this._d,this._c+=h.x*v,this._d+=h.x*x,g&&this.translate(g.negate()),this._changed(),this},skew:function(){var l=arguments,h=E.read(l),g=E.read(l,0,{readNull:!0}),v=Math.PI/180,x=new E(Math.tan(h.x*v),Math.tan(h.y*v));return this.shear(x,g)},append:function(l,h){if(l){var g=this._a,v=this._b,x=this._c,T=this._d,A=l._a,O=l._c,j=l._b,M=l._d,P=l._tx,H=l._ty;this._a=A*g+j*x,this._c=O*g+M*x,this._b=A*v+j*T,this._d=O*v+M*T,this._tx+=P*g+H*x,this._ty+=P*v+H*T,h||this._changed()}return this},prepend:function(l,h){if(l){var g=this._a,v=this._b,x=this._c,T=this._d,A=this._tx,O=this._ty,j=l._a,M=l._c,P=l._b,H=l._d,z=l._tx,R=l._ty;this._a=j*g+M*v,this._c=j*x+M*T,this._b=P*g+H*v,this._d=P*x+H*T,this._tx=j*A+M*O+z,this._ty=P*A+H*O+R,h||this._changed()}return this},appended:function(l){return this.clone().append(l)},prepended:function(l){return this.clone().prepend(l)},invert:function(){var l=this._a,h=this._b,g=this._c,v=this._d,x=this._tx,T=this._ty,A=l*v-h*g,O=null;return A&&!isNaN(A)&&isFinite(x)&&isFinite(T)&&(this._a=v/A,this._b=-h/A,this._c=-g/A,this._d=l/A,this._tx=(g*T-v*x)/A,this._ty=(h*x-l*T)/A,O=this),O},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new ne(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var l=this._a*this._d-this._c*this._b;return l&&!isNaN(l)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(l,h,g){return arguments.length<3?this._transformPoint(E.read(arguments)):this._transformCoordinates(l,h,g)},_transformPoint:function(l,h,g){var v=l.x,x=l.y;return h||(h=new E),h._set(v*this._a+x*this._c+this._tx,v*this._b+x*this._d+this._ty,g)},_transformCoordinates:function(l,h,g){for(var v=0,x=2*g;v<x;v+=2){var T=l[v],A=l[v+1];h[v]=T*this._a+A*this._c+this._tx,h[v+1]=T*this._b+A*this._d+this._ty}return h},_transformCorners:function(l){var h=l.x,g=l.y,v=h+l.width,x=g+l.height,T=[h,g,v,g,v,x,h,x];return this._transformCoordinates(T,T,4)},_transformBounds:function(l,h,g){for(var v=this._transformCorners(l),x=v.slice(0,2),T=x.slice(),A=2;A<8;A++){var O=v[A],j=A&1;O<x[j]?x[j]=O:O>T[j]&&(T[j]=O)}return h||(h=new G),h._set(x[0],x[1],T[0]-x[0],T[1]-x[1],g)},inverseTransform:function(){return this._inverseTransform(E.read(arguments))},_inverseTransform:function(l,h,g){var v=this._a,x=this._b,T=this._c,A=this._d,O=this._tx,j=this._ty,M=v*A-x*T,P=null;if(M&&!isNaN(M)&&isFinite(O)&&isFinite(j)){var H=l.x-this._tx,z=l.y-this._ty;h||(h=new E),P=h._set((H*A-z*T)/M,(z*v-H*x)/M,g)}return P},decompose:function(){var l=this._a,h=this._b,g=this._c,v=this._d,x=l*v-h*g,T=Math.sqrt,A=Math.atan2,O=180/Math.PI,j,M,P;if(l!==0||h!==0){var H=T(l*l+h*h);j=Math.acos(l/H)*(h>0?1:-1),M=[H,x/H],P=[A(l*g+h*v,H*H),0]}else if(g!==0||v!==0){var z=T(g*g+v*v);j=Math.asin(g/z)*(v>0?1:-1),M=[x/z,z],P=[0,A(l*g+h*v,z*z)]}else j=0,P=M=[0,0];return{translation:this.getTranslation(),rotation:j*O,scaling:new E(M),skewing:new E(P[0]*O,P[1]*O)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new E(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(l){this.isIdentity()||l.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],function(l){var h=a.capitalize(l),g="_"+l;this["get"+h]=function(){return this[g]},this["set"+h]=function(v){this[g]=v,this._changed()}},{})),de=a.extend({_class:"Line",initialize:function(h,g,v,x,T){var A=!1;arguments.length>=4?(this._px=h,this._py=g,this._vx=v,this._vy=x,A=T):(this._px=h.x,this._py=h.y,this._vx=g.x,this._vy=g.y,A=v),A||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new E(this._px,this._py)},getVector:function(){return new E(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(l,h){return de.intersect(this._px,this._py,this._vx,this._vy,l._px,l._py,l._vx,l._vy,!0,h)},getSide:function(l,h){return de.getSide(this._px,this._py,this._vx,this._vy,l.x,l.y,!0,h)},getDistance:function(l){return Math.abs(this.getSignedDistance(l))},getSignedDistance:function(l){return de.getSignedDistance(this._px,this._py,this._vx,this._vy,l.x,l.y,!0)},isCollinear:function(l){return E.isCollinear(this._vx,this._vy,l._vx,l._vy)},isOrthogonal:function(l){return E.isOrthogonal(this._vx,this._vy,l._vx,l._vy)},statics:{intersect:function(l,h,g,v,x,T,A,O,j,M){j||(g-=l,v-=h,A-=x,O-=T);var P=g*O-v*A;if(!C.isMachineZero(P)){var H=l-x,z=h-T,R=(A*z-O*H)/P,K=(g*z-v*H)/P,Y=1e-12,Z=-Y,B=1+Y;if(M||Z<R&&R<B&&Z<K&&K<B)return M||(R=R<=0?0:R>=1?1:R),new E(l+R*g,h+R*v)}},getSide:function(l,h,g,v,x,T,A,O){A||(g-=l,v-=h);var j=x-l,M=T-h,P=j*v-M*g;return!O&&C.isMachineZero(P)&&(P=(j*g+j*g)/(g*g+v*v),P>=0&&P<=1&&(P=0)),P<0?-1:P>0?1:0},getSignedDistance:function(l,h,g,v,x,T,A){return A||(g-=l,v-=h),g===0?v>0?x-l:l-x:v===0?g<0?T-h:h-T:((x-l)*v-(T-h)*g)/(v>g?v*Math.sqrt(1+g*g/(v*v)):g*Math.sqrt(1+v*v/(g*g)))},getDistance:function(l,h,g,v,x,T,A){return Math.abs(de.getSignedDistance(l,h,g,v,x,T,A))}}}),be=m.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(h){m.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Oi(null,null,this),this._view=Qt.create(this,h||oi.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(l,h){return a.serialize(this._children,l,!0,h)},_changed:function(l,h){if(l&1){var g=this._view;g&&(g._needsUpdate=!0,!g._requested&&g._autoUpdate&&g.requestUpdate())}var v=this._changes;if(v&&h){var x=this._changesById,T=h._id,A=x[T];A?A.flags|=l:v.push(x[T]={item:h,flags:l})}},clear:function(){for(var l=this._children,h=l.length-1;h>=0;h--)l[h].remove()},isEmpty:function(){return!this._children.length},remove:function l(){return l.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(l){this._currentStyle.set(l)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ye({project:this,insert:!0})},getSymbolDefinitions:function(){var l=[],h={};return this.getItems({class:nt,match:function(g){var v=g._definition,x=v._id;return h[x]||(h[x]=!0,l.push(v)),!1}}),l},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var l=this._selectionItems,h=[];for(var g in l){var v=l[g],x=v._selection;x&1&&v.isInserted()?h.push(v):x||this._updateSelection(v)}return h},_updateSelection:function(l){var h=l._id,g=this._selectionItems;l._selection?g[h]!==l&&(this._selectionCount++,g[h]=l):g[h]===l&&(this._selectionCount--,delete g[h])},selectAll:function(){for(var l=this._children,h=0,g=l.length;h<g;h++)l[h].setFullySelected(!0)},deselectAll:function(){var l=this._selectionItems;for(var h in l)l[h].setFullySelected(!1)},addLayer:function(l){return this.insertLayer(t,l)},insertLayer:function(l,h){if(h instanceof Ye){h._remove(!1,!0),a.splice(this._children,[h],l,0),h._setProject(this,!0);var g=h._name;g&&h.setName(g),this._changes&&h._changed(5),this._activeLayer||(this._activeLayer=h)}else h=null;return h},_insertItem:function(l,h,g){return h=this.insertLayer(l,h)||(this._activeLayer||this._insertItem(t,new Ye(I.NO_INSERT),!0)).insertChild(l,h),g&&h.activate&&h.activate(),h},getItems:function(l){return I._getItems(this,l)},getItem:function(l){return I._getItems(this,l,null,null,!0)[0]||null},importJSON:function(l){this.activate();var h=this._activeLayer;return a.importJSON(l,h&&h.isEmpty()&&h)},removeOn:function(l){var h=this._removeSets;if(h){l==="mouseup"&&(h.mousedrag=null);var g=h[l];if(g){for(var v in g){var x=g[v];for(var T in h){var A=h[T];A&&A!=g&&delete A[x._id]}x.remove()}h[l]=null}}},draw:function(l,h,g){this._updateVersion++,l.save(),h.applyToContext(l);for(var v=this._children,x=new a({offset:new E(0,0),pixelRatio:g,viewMatrix:h.isIdentity()?null:h,matrices:[new ne],updateMatrix:!0}),T=0,A=v.length;T<A;T++)v[T].draw(l,x);if(l.restore(),this._selectionCount>0){l.save(),l.strokeWidth=1;var O=this._selectionItems,j=this._scope.settings.handleSize,M=this._updateVersion;for(var P in O)O[P]._drawSelection(l,h,j,O,M);l.restore()}}}),I=a.extend(u,{statics:{extend:function l(h){return h._serializeFields&&(h._serializeFields=a.set({},this.prototype._serializeFields,h._serializeFields)),l.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new ne,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var l=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(l,function(h){this._events[h]={install:function(g){this.getView()._countItemEvent(g,1)},uninstall:function(g){this.getView()._countItemEvent(g,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:l}})},{initialize:function(){},_initialize:function(l,h){var g=l&&a.isPlainObject(l),v=g&&l.internal===!0,x=this._matrix=new ne,T=g&&l.project||Nt.project,A=Nt.settings;return this._id=v?null:N.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&A.applyMatrix,h&&x.translate(h),x._owner=this,this._style=new Oi(T._currentStyle,this,T),v||g&&l.insert==!1||!A.insertItems&&!(g&&l.insert==!0)?this._setProject(T):(g&&l.parent||T)._insertItem(t,this,!0),g&&l!==I.NO_INSERT&&l!==I.INSERT&&this.set(l,{internal:!0,insert:!0,project:!0,parent:!0}),g},_serialize:function(l,h){var g={},v=this;function x(T){for(var A in T){var O=v[A];a.equals(O,A==="leading"?T.fontSize*1.2:T[A])||(g[A]=a.serialize(O,l,A!=="data",h))}}return x(this._serializeFields),this instanceof Ee||x(this._style._defaults),[this._class,g]},_changed:function(l){var h=this._symbol,g=this._parent||h,v=this._project;l&8&&(this._bounds=this._position=this._decomposed=t),l&16&&(this._globalMatrix=t),g&&l&72&&I._clearBoundsCache(g),l&2&&I._clearBoundsCache(this),v&&v._changed(l,this),h&&h._changed(l)},getId:function(){return this._id},getName:function(){return this._name},setName:function(l){if(this._name&&this._removeNamed(),l===+l+"")throw new Error("Names consisting only of numbers are not supported.");var h=this._getOwner();if(l&&h){var g=h._children,v=h._namedChildren;(v[l]=v[l]||[]).push(this),l in g||(g[l]=this)}this._name=l||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(l){this.getStyle().set(l)}},a.each(["locked","visible","blendMode","opacity","guide"],function(l){var h=a.capitalize(l),g="_"+l,v={locked:256,visible:265};this["get"+h]=function(){return this[g]},this["set"+h]=function(x){x!=this[g]&&(this[g]=x,this._changed(v[l]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(l){if(l!==this._selection){this._selection=l;var h=this._project;h&&(h._updateSelection(this),this._changed(257))}},_changeSelection:function(l,h){var g=this._selection;this.setSelection(h?g|l:g&~l)},isSelected:function(){if(this._selectChildren){for(var l=this._children,h=0,g=l.length;h<g;h++)if(l[h].isSelected())return!0}return!!(this._selection&1)},setSelected:function(l){if(this._selectChildren)for(var h=this._children,g=0,v=h.length;g<v;g++)h[g].setSelected(l);this._changeSelection(1,l)},isFullySelected:function(){var l=this._children,h=!!(this._selection&1);if(l&&h){for(var g=0,v=l.length;g<v;g++)if(!l[g].isFullySelected())return!1;return!0}return h},setFullySelected:function(l){var h=this._children;if(h)for(var g=0,v=h.length;g<v;g++)h[g].setFullySelected(l);this._changeSelection(1,l)},isClipMask:function(){return this._clipMask},setClipMask:function(l){this._clipMask!=(l=!!l)&&(this._clipMask=l,l&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(l){this._data=l},getPosition:function(l){var h=l?E:V,g=this._position||(this._position=this._getPositionFromBounds());return new h(g.x,g.y,this,"setPosition")},setPosition:function(){this.translate(E.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(l){return this._pivot?this._matrix._transformPoint(this._pivot):(l||this.getBounds()).getCenter(!0)},getPivot:function(){var l=this._pivot;return l?new V(l.x,l.y,this,"setPivot"):null},setPivot:function(){this._pivot=E.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(l,h){this[h]=function(g){return this.getBounds(g,l)}},{beans:!0,getBounds:function(l,h){var g=h||l instanceof ne,v=a.set({},g?h:l,this._boundsOptions);(!v.stroke||this.getStrokeScaling())&&(v.cacheItem=this);var x=this._getCachedBounds(g&&l,v).rect;return arguments.length?x:new te(x.x,x.y,x.width,x.height,this,"setBounds")},setBounds:function(){var l=G.read(arguments),h=this.getBounds(),g=this._matrix,v=new ne,x=l.getCenter();v.translate(x),(l.width!=h.width||l.height!=h.height)&&(g.isInvertible()||(g.set(g._backup||new ne().translate(g.getTranslation())),h=this.getBounds()),v.scale(h.width!==0?l.width/h.width:0,h.height!==0?l.height/h.height:0)),x=h.getCenter(),v.translate(-x.x,-x.y),this.transform(v)},_getBounds:function(l,h){var g=this._children;return!g||!g.length?new G:(I._updateBoundsCache(this,h.cacheItem),I._getBounds(g,l,h))},_getBoundsCacheKey:function(l,h){return[l.stroke?1:0,l.handle?1:0,h?1:0].join("")},_getCachedBounds:function(l,h,g){l=l&&l._orNullIfIdentity();var v=h.internal&&!g,x=h.cacheItem,T=v?null:this._matrix._orNullIfIdentity(),A=x&&(!l||l.equals(T))&&this._getBoundsCacheKey(h,v),O=this._bounds;if(I._updateBoundsCache(this._parent||this._symbol,x),A&&O&&A in O){var j=O[A];return{rect:j.rect.clone(),nonscaling:j.nonscaling}}var M=this._getBounds(l||T,h),P=M.rect||M,H=this._style,z=M.nonscaling||H.hasStroke()&&!H.getStrokeScaling();if(A){O||(this._bounds=O={});var j=O[A]={rect:P.clone(),nonscaling:z,internal:v}}return{rect:P,nonscaling:z}},_getStrokeMatrix:function(l,h){var g=this.getStrokeScaling()?null:h&&h.internal?this:this._parent||this._symbol&&this._symbol._item,v=g?g.getViewMatrix().invert():l;return v&&v._shiftless()},statics:{_updateBoundsCache:function(l,h){if(l&&h){var g=h._id,v=l._boundsCache=l._boundsCache||{ids:{},list:[]};v.ids[g]||(v.list.push(h),v.ids[g]=h)}},_clearBoundsCache:function(l){var h=l._boundsCache;if(h){l._bounds=l._position=l._boundsCache=t;for(var g=0,v=h.list,x=v.length;g<x;g++){var T=v[g];T!==l&&(T._bounds=T._position=t,T._boundsCache&&I._clearBoundsCache(T))}}},_getBounds:function(l,h,g){var v=1/0,x=-v,T=v,A=x,O=!1;g=g||{};for(var j=0,M=l.length;j<M;j++){var P=l[j];if(P._visible&&!P.isEmpty(!0)){var H=P._getCachedBounds(h&&h.appended(P._matrix),g,!0),z=H.rect;v=Math.min(z.x,v),T=Math.min(z.y,T),x=Math.max(z.x+z.width,x),A=Math.max(z.y+z.height,A),H.nonscaling&&(O=!0)}}return{rect:isFinite(v)?new G(v,T,x-v,A-T):new G,nonscaling:O}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var l=this._decompose();return l?l.rotation:0},setRotation:function(l){var h=this.getRotation();if(h!=null&&l!=null){var g=this._decomposed;this.rotate(l-h),g&&(g.rotation=l,this._decomposed=g)}},getScaling:function(){var l=this._decompose(),h=l&&l.scaling;return new V(h?h.x:1,h?h.y:1,this,"setScaling")},setScaling:function(){var l=this.getScaling(),h=E.read(arguments,0,{clone:!0,readNull:!0});if(l&&h&&!l.equals(h)){var g=this.getRotation(),v=this._decomposed,x=new ne,T=C.isZero;if(T(l.x)||T(l.y))x.translate(v.translation),g&&x.rotate(g),x.scale(h.x,h.y),this._matrix.set(x);else{var A=this.getPosition(!0);x.translate(A),g&&x.rotate(g),x.scale(h.x/l.x,h.y/l.y),g&&x.rotate(-g),x.translate(A.negate()),this.transform(x)}v&&(v.scaling=h,this._decomposed=v)}},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},getGlobalMatrix:function(l){var h=this._globalMatrix;if(h)for(var g=this._parent,v=[];g;){if(!g._globalMatrix){h=null;for(var x=0,T=v.length;x<T;x++)v[x]._globalMatrix=null;break}v.push(g),g=g._parent}if(!h){h=this._globalMatrix=this._matrix.clone();var g=this._parent;g&&h.prepend(g.getGlobalMatrix(!0))}return l?h:h.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(l){(this._applyMatrix=this._canApplyMatrix&&!!l)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(l,h){if(this._project!==l){this._project&&this._installEvents(!1),this._project=l;for(var g=this._children,v=0,x=g&&g.length;v<x;v++)g[v]._setProject(l);h=!0}h&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function l(h){l.base.call(this,h);for(var g=this._children,v=0,x=g&&g.length;v<x;v++)g[v]._installEvents(h)},getLayer:function(){for(var l=this;l=l._parent;)if(l instanceof Ye)return l;return null},getParent:function(){return this._parent},setParent:function(l){return l.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(l){this.removeChildren(),this.addChildren(l)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var l=this._getOwner();return l&&l._children[this._index+1]||null},getPreviousSibling:function(){var l=this._getOwner();return l&&l._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(l){var h=this._parent,g=h&&h._children;g&&h.insertChildren(l in g?l:t,[this])},equals:function(l){return l===this||l&&this._class===l._class&&this._style.equals(l._style)&&this._matrix.equals(l._matrix)&&this._locked===l._locked&&this._visible===l._visible&&this._blendMode===l._blendMode&&this._opacity===l._opacity&&this._clipMask===l._clipMask&&this._guide===l._guide&&this._equals(l)||!1},_equals:function(l){return a.equals(this._children,l._children)},clone:function(l){var h=new this.constructor(I.NO_INSERT),g=this._children,v=a.pick(l?l.insert:t,l===t||l===!0),x=a.pick(l?l.deep:t,!0);g&&h.copyAttributes(this),(!g||x)&&h.copyContent(this),g||h.copyAttributes(this),v&&h.insertAbove(this);var T=this._name,A=this._parent;if(T&&A){for(var g=A._children,O=T,j=1;g[T];)T=O+" "+j++;T!==O&&h.setName(T)}return h},copyContent:function(l){for(var h=l._children,g=0,v=h&&h.length;g<v;g++)this.addChild(h[g].clone(!1),!0)},copyAttributes:function(l,h){this.setStyle(l._style);for(var g=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],v=0,x=g.length;v<x;v++){var T=g[v];l.hasOwnProperty(T)&&(this[T]=l[T])}h||this._matrix.set(l._matrix,!0),this.setApplyMatrix(l._applyMatrix),this.setPivot(l._pivot),this.setSelection(l._selection);var A=l._data,O=l._name;this._data=A?a.clone(A):null,O&&this.setName(O)},rasterize:function(l,h){var g,v,x;a.isPlainObject(l)?(g=l.resolution,v=l.insert,x=l.raster):(g=l,v=h),x||(x=new ct(I.NO_INSERT));var T=this.getStrokeBounds(),A=(g||this.getView().getResolution())/72,O=T.getTopLeft().floor(),j=T.getBottomRight().ceil(),M=new L(j.subtract(O)),P=M.multiply(A);if(x.setSize(P,!0),!P.isZero()){var H=x.getContext(!0),z=new ne().scale(A).translate(O.negate());H.save(),z.applyToContext(H),this.draw(H,new a({matrices:[z]})),H.restore()}return x._matrix.set(new ne().translate(O.add(M.divide(2))).scale(1/A)),(v===t||v)&&x.insertAbove(this),x},contains:function(){var l=this._matrix;return l.isInvertible()&&!!this._contains(l._inverseTransform(E.read(arguments)))},_contains:function(l){var h=this._children;if(h){for(var g=h.length-1;g>=0;g--)if(h[g].contains(l))return!0;return!1}return l.isInside(this.getInternalBounds())},isInside:function(){return G.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new rt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(l,h){return l instanceof I?this._asPathItem().getIntersections(l._asPathItem(),null,h,!0).length>0:!1}},new function(){function l(){var v=arguments;return this._hitTest(E.read(v),ft.getOptions(v))}function h(){var v=arguments,x=E.read(v),T=ft.getOptions(v),A=[];return this._hitTest(x,new a({all:A},T)),A}function g(v,x,T,A){var O=this._children;if(O)for(var j=O.length-1;j>=0;j--){var M=O[j],P=M!==A&&M._hitTest(v,x,T);if(P&&!x.all)return P}return null}return be.inject({hitTest:l,hitTestAll:h,_hitTest:g}),{hitTest:l,hitTestAll:h,_hitTestChildren:g}},{_hitTest:function(l,h,g){if(this._locked||!this._visible||this._guide&&!h.guides||this.isEmpty())return null;var v=this._matrix,x=g?g.appended(v):this.getGlobalMatrix().prepend(this.getView()._matrix),T=Math.max(h.tolerance,1e-12),A=h._tolerancePadding=new L(rt._getStrokePadding(T,v._shiftless().invert()));if(l=v._inverseTransform(l),!l||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(A.multiply(2))._containsPoint(l))return null;var O=!(h.guides&&!this._guide||h.selected&&!this.isSelected()||h.type&&h.type!==a.hyphenate(this._class)||h.class&&!(this instanceof h.class)),j=h.match,M=this,P,H;function z(D){return D&&j&&!j(D)&&(D=null),D&&h.all&&h.all.push(D),D}function R(D,X){var Q=X?P["get"+X]():M.getPosition();if(l.subtract(Q).divide(A).length<=1)return new ft(D,M,{name:X?a.hyphenate(X):D,point:Q})}var K=h.position,Y=h.center,Z=h.bounds;if(O&&this._parent&&(K||Y||Z)){if((Y||Z)&&(P=this.getInternalBounds()),H=K&&R("position")||Y&&R("center","Center"),!H&&Z)for(var B=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],q=0;q<8&&!H;q++)H=R("bounds",B[q]);H=z(H)}return H||(H=this._hitTestChildren(l,h,x)||O&&z(this._hitTestSelf(l,h,x,this.getStrokeScaling()?null:x._shiftless().invert()))||null),H&&H.point&&(H.point=v.transform(H.point)),H},_hitTestSelf:function(l,h){if(h.fill&&this.hasFill()&&this._contains(l))return new ft("fill",this)},matches:function(l,h){function g(A,O){for(var j in A)if(A.hasOwnProperty(j)){var M=A[j],P=O[j];if(a.isPlainObject(M)&&a.isPlainObject(P)){if(!g(M,P))return!1}else if(!a.equals(M,P))return!1}return!0}var v=typeof l;if(v==="object"){for(var x in l)if(l.hasOwnProperty(x)&&!this.matches(x,l[x]))return!1;return!0}else{if(v==="function")return l(this);if(l==="match")return h(this);var T=/^(empty|editable)$/.test(l)?this["is"+a.capitalize(l)]():l==="type"?a.hyphenate(this._class):this[l];if(l==="class"){if(typeof h=="function")return this instanceof h;T=this._class}if(typeof h=="function")return!!h(T);if(h){if(h.test)return h.test(T);if(a.isPlainObject(h))return g(h,T)}return a.equals(T,h)}},getItems:function(l){return I._getItems(this,l,this._matrix)},getItem:function(l){return I._getItems(this,l,this._matrix,null,!0)[0]||null},statics:{_getItems:function l(h,g,v,x,T){if(!x){var A=typeof g=="object"&&g,O=A&&A.overlapping,j=A&&A.inside,M=O||j,z=M&&G.read([M]);x={items:[],recursive:A&&A.recursive!==!1,inside:!!j,overlapping:!!O,rect:z,path:O&&new rt.Rectangle({rectangle:z,insert:!1})},A&&(g=a.filter({},g,{recursive:!0,inside:!0,overlapping:!0}))}var P=h._children,H=x.items,z=x.rect;v=z&&(v||new ne);for(var R=0,K=P&&P.length;R<K;R++){var Y=P[R],Z=v&&v.appended(Y._matrix),B=!0;if(z){var M=Y.getBounds(Z);if(!z.intersects(M))continue;z.contains(M)||x.overlapping&&(M.contains(z)||x.path.intersects(Y,Z))||(B=!1)}if(B&&Y.matches(g)&&(H.push(Y),T)||(x.recursive!==!1&&l(Y,g,Z,x,T),T&&H.length>0))break}return H}}},{importJSON:function(l){var h=a.importJSON(l,this);return h!==this?this.addChild(h):h},addChild:function(l){return this.insertChild(t,l)},insertChild:function(l,h){var g=h?this.insertChildren(l,[h]):null;return g&&g[0]},addChildren:function(l){return this.insertChildren(this._children.length,l)},insertChildren:function(l,h){var g=this._children;if(g&&h&&h.length>0){h=a.slice(h);for(var v={},x=h.length-1;x>=0;x--){var T=h[x],A=T&&T._id;!T||v[A]?h.splice(x,1):(T._remove(!1,!0),v[A]=!0)}a.splice(g,h,l,0);for(var O=this._project,j=O._changes,x=0,M=h.length;x<M;x++){var T=h[x],P=T._name;T._parent=this,T._setProject(O,!0),P&&T.setName(P),j&&T._changed(5)}this._changed(11)}else h=null;return h},_insertItem:"#insertChild",_insertAt:function(l,h){var g=l&&l._getOwner(),v=l!==this&&g?this:null;return v&&(v._remove(!1,!0),g._insertItem(l._index+h,v)),v},insertAbove:function(l){return this._insertAt(l,1)},insertBelow:function(l){return this._insertAt(l,0)},sendToBack:function(){var l=this._getOwner();return l?l._insertItem(0,this):null},bringToFront:function(){var l=this._getOwner();return l?l._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(l){return this.insertChild(0,l)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(l){return l._insertItem(t,this)},copyTo:function(l){return this.clone(!1).addTo(l)},reduce:function(l){var h=this._children;if(h&&h.length===1){var g=h[0].reduce(l);return this._parent?(g.insertAbove(this),this.remove()):g.remove(),g}return this},_removeNamed:function(){var l=this._getOwner();if(l){var h=l._children,g=l._namedChildren,v=this._name,x=g[v],T=x?x.indexOf(this):-1;T!==-1&&(h[v]==this&&delete h[v],x.splice(T,1),x.length?h[v]=x[0]:delete g[v])}},_remove:function(l,h){var g=this._getOwner(),v=this._project,x=this._index;return this._style&&this._style._dispose(),g?(this._name&&this._removeNamed(),x!=null&&(v._activeLayer===this&&(v._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(g._children,null,x,1)),this._installEvents(!1),l&&v._changes&&this._changed(5),h&&g._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(l){var h=l&&l.insertBelow(this);return h&&this.remove(),h},removeChildren:function(l,h){if(!this._children)return null;l=l||0,h=a.pick(h,this._children.length);for(var g=a.splice(this._children,null,l,h-l),v=g.length-1;v>=0;v--)g[v]._remove(!0,!1);return g.length>0&&this._changed(11),g},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var l=0,h=this._children.length;l<h;l++)this._children[l]._index=l;this._changed(11)}},isEmpty:function(l){var h=this._children,g=h?h.length:0;if(l){for(var v=0;v<g;v++)if(!h[v].isEmpty(l))return!1;return!0}return!g},isEditable:function(){for(var l=this;l;){if(!l._visible||l._locked)return!1;l=l._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(l){function h(A){var O=[];do O.unshift(A);while(A=A._parent);return O}for(var g=h(this),v=h(l),x=0,T=Math.min(g.length,v.length);x<T;x++)if(g[x]!=v[x])return g[x]._index<v[x]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(l){return this._getOrder(l)===-1},isBelow:function(l){return this._getOrder(l)===1},isParent:function(l){return this._parent===l},isChild:function(l){return l&&l._parent===this},isDescendant:function(l){for(var h=this;h=h._parent;)if(h===l)return!0;return!1},isAncestor:function(l){return l?l.isDescendant(this):!1},isSibling:function(l){return this._parent===l._parent},isGroupedWith:function(l){for(var h=this._parent;h;){if(h._parent&&/^(Group|Layer|CompoundPath)$/.test(h._class)&&l.isDescendant(h))return!0;h=h._parent}return!1}},a.each(["rotate","scale","shear","skew"],function(l){var h=l==="rotate";this[l]=function(){var g=arguments,v=(h?a:E).read(g),x=E.read(g,0,{readNull:!0});return this.transform(new ne()[l](v,x||this.getPosition(!0)))}},{translate:function(){var l=new ne;return this.transform(l.translate.apply(l,arguments))},transform:function(l,h,g){var v=this._matrix,x=l&&!l.isIdentity(),T=g&&this._canApplyMatrix||this._applyMatrix&&(x||!v.isIdentity()||h&&this._children);if(!x&&!T)return this;if(x){!l.isInvertible()&&v.isInvertible()&&(v._backup=v.getValues()),v.prepend(l,!0);var A=this._style,O=A.getFillColor(!0),j=A.getStrokeColor(!0);O&&O.transform(l),j&&j.transform(l)}if(T&&(T=this._transformContent(v,h,g))){var M=this._pivot;M&&v._transformPoint(M,M,!0),v.reset(!0),g&&this._canApplyMatrix&&(this._applyMatrix=!0)}var P=this._bounds,H=this._position;(x||T)&&this._changed(25);var z=x&&P&&l.decompose();if(z&&z.skewing.isZero()&&z.rotation%90===0){for(var R in P){var K=P[R];if(K.nonscaling)delete P[R];else if(T||!K.internal){var Y=K.rect;l._transformBounds(Y,Y)}}this._bounds=P;var Z=P[this._getBoundsCacheKey(this._boundsOptions||{})];Z&&(this._position=this._getPositionFromBounds(Z.rect))}else x&&H&&this._pivot&&(this._position=l._transformPoint(H,H));return this},_transformContent:function(l,h,g){var v=this._children;if(v){for(var x=0,T=v.length;x<T;x++)v[x].transform(l,h,g);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(E.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(E.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(E.read(arguments))},localToParent:function(){return this._matrix._transformPoint(E.read(arguments))},fitBounds:function(l,h){l=G.read(arguments);var g=this.getBounds(),v=g.height/g.width,x=l.height/l.width,T=(h?v>x:v<x)?l.width/g.width:l.height/g.height,A=new G(new E,new L(g.width*T,g.height*T));A.setCenter(l.getCenter()),this.setBounds(A)}}),{_setStyles:function(l,h,g){var v=this._style,x=this._matrix;if(v.hasFill()&&(l.fillStyle=v.getFillColor().toCanvasStyle(l,x)),v.hasStroke()){l.strokeStyle=v.getStrokeColor().toCanvasStyle(l,x),l.lineWidth=v.getStrokeWidth();var T=v.getStrokeJoin(),A=v.getStrokeCap(),O=v.getMiterLimit();if(T&&(l.lineJoin=T),A&&(l.lineCap=A),O&&(l.miterLimit=O),Nt.support.nativeDash){var j=v.getDashArray(),M=v.getDashOffset();j&&j.length&&("setLineDash"in l?(l.setLineDash(j),l.lineDashOffset=M):(l.mozDash=j,l.mozDashOffset=M))}}if(v.hasShadow()){var P=h.pixelRatio||1,H=g._shiftless().prepend(new ne().scale(P,P)),z=H.transform(new E(v.getShadowBlur(),0)),R=H.transform(this.getShadowOffset());l.shadowColor=v.getShadowColor().toCanvasStyle(l),l.shadowBlur=z.getLength(),l.shadowOffsetX=R.x,l.shadowOffsetY=R.y}},draw:function(l,h,g){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var v=h.matrices,x=h.viewMatrix,T=this._matrix,A=v[v.length-1].appended(T);if(A.isInvertible()){x=x?x.appended(A):A,v.push(A),h.updateMatrix&&(this._globalMatrix=A);var O=this._blendMode,j=C.clamp(this._opacity,0,1),M=O==="normal",P=mr.nativeModes[O],H=M&&j===1||h.dontStart||h.clip||(P||M&&j<1)&&this._canComposite(),z=h.pixelRatio||1,R,K,Y;if(!H){var Z=this.getStrokeBounds(x);if(!Z.width||!Z.height){v.pop();return}Y=h.offset,K=h.offset=Z.getTopLeft().floor(),R=l,l=oi.getContext(Z.getSize().ceil().add(1).multiply(z)),z!==1&&l.scale(z,z)}l.save();var B=g?g.appended(T):this._canScaleStroke&&!this.getStrokeScaling(!0)&&x,q=!H&&h.clipItem,D=!B||q;if(H?(l.globalAlpha=j,P&&(l.globalCompositeOperation=O)):D&&l.translate(-K.x,-K.y),D&&(H?T:x).applyToContext(l),q&&h.clipItem.draw(l,h.extend({clip:!0})),B){l.setTransform(z,0,0,z,0,0);var X=h.offset;X&&l.translate(-X.x,-X.y)}this._draw(l,h,x,B),l.restore(),v.pop(),h.clip&&!h.dontFinish&&l.clip(this.getFillRule()),H||(mr.process(O,l,R,j,K.subtract(Y).multiply(z)),oi.release(l),h.offset=Y)}}},_isUpdated:function(l){var h=this._parent;if(h instanceof yt)return h._isUpdated(l);var g=this._updateVersion===l;return!g&&h&&h._visible&&h._isUpdated(l)&&(this._updateVersion=l,g=!0),g},_drawSelection:function(l,h,g,v,x){var T=this._selection,A=T&1,O=T&2||A&&this._selectBounds,j=T&4;if(this._drawSelected||(A=!1),(A||O||j)&&this._isUpdated(x)){var M,P=this.getSelectedColor(!0)||(M=this.getLayer())&&M.getSelectedColor(!0),H=h.appended(this.getGlobalMatrix(!0)),z=g/2;if(l.strokeStyle=l.fillStyle=P?P.toCanvasStyle(l):"#009dec",A&&this._drawSelected(l,H,v),j){var R=this.getPosition(!0),K=this._parent,Y=K?K.localToGlobal(R):R,Z=Y.x,B=Y.y;l.beginPath(),l.arc(Z,B,z,0,Math.PI*2,!0),l.stroke();for(var q=[[0,-1],[1,0],[0,1],[-1,0]],D=z,X=g+1,Q=0;Q<4;Q++){var J=q[Q],W=J[0],se=J[1];l.moveTo(Z+W*D,B+se*D),l.lineTo(Z+W*X,B+se*X),l.stroke()}}if(O){var oe=H._transformCorners(this.getInternalBounds());l.beginPath();for(var Q=0;Q<8;Q++)l[Q?"lineTo":"moveTo"](oe[Q],oe[++Q]);l.closePath(),l.stroke();for(var Q=0;Q<8;Q++)l.fillRect(oe[Q]-z,oe[++Q]-z,g,g)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],function(l){this["removeOn"+a.capitalize(l)]=function(){var h={};return h[l]=!0,this.removeOn(h)}},{removeOn:function(l){for(var h in l)if(l[h]){var g="mouse"+h,v=this._project,x=v._removeSets=v._removeSets||{};x[g]=x[g]||{},x[g][this._id]=this}return this}}),{tween:function(l,h,g){g||(g=h,h=l,l=null,g||(g=h,h=null));var v=g&&g.easing,x=g&&g.start,T=g!=null&&(typeof g=="number"?g:g.duration),A=new Js(this,l,h,T,v,x);function O(j){A._handleFrame(j.time*1e3),A.running||this.off("frame",O)}return T&&this.on("frame",O),A},tweenTo:function(l,h){return this.tween(null,l,h)},tweenFrom:function(l,h){return this.tween(l,null,h)}}),Ee=I.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||this.addChildren(Array.isArray(h)?h:arguments)},_changed:function l(h){l.base.call(this,h),h&2050&&(this._clipItem=t)},_getClipItem:function(){var l=this._clipItem;if(l===t){l=null;for(var h=this._children,g=0,v=h.length;g<v;g++)if(h[g]._clipMask){l=h[g];break}this._clipItem=l}return l},isClipped:function(){return!!this._getClipItem()},setClipped:function(l){var h=this.getFirstChild();h&&h.setClipMask(l)},_getBounds:function l(h,g){var v=this._getClipItem();return v?v._getCachedBounds(v._matrix.prepended(h),a.set({},g,{stroke:!1})):l.base.call(this,h,g)},_hitTestChildren:function l(h,g,v){var x=this._getClipItem();return(!x||x.contains(h))&&l.base.call(this,h,g,v,x)},_draw:function(l,h){var g=h.clip,v=!g&&this._getClipItem();h=h.extend({clipItem:v,clip:!1}),g?(l.beginPath(),h.dontStart=h.dontFinish=!0):v&&v.draw(l,h.extend({clip:!0}));for(var x=this._children,T=0,A=x.length;T<A;T++){var O=x[T];O!==v&&O.draw(l,h)}}}),Ye=Ee.extend({_class:"Layer",initialize:function(){Ee.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function l(){return this._parent?l.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Be=I.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(h,g){this._initialize(h,g)},_equals:function(l){return this._type===l._type&&this._size.equals(l._size)&&a.equals(this._radius,l._radius)},copyContent:function(l){this.setType(l._type),this.setSize(l._size),this.setRadius(l._radius)},getType:function(){return this._type},setType:function(l){this._type=l},getShape:"#getType",setShape:"#setType",getSize:function(){var l=this._size;return new ee(l.width,l.height,this,"setSize")},setSize:function(){var l=L.read(arguments);if(!this._size)this._size=l.clone();else if(!this._size.equals(l)){var h=this._type,g=l.width,v=l.height;h==="rectangle"?this._radius.set(L.min(this._radius,l.divide(2).abs())):h==="circle"?(g=v=(g+v)/2,this._radius=g/2):h==="ellipse"&&this._radius._set(g/2,v/2),this._size._set(g,v),this._changed(9)}},getRadius:function(){var l=this._radius;return this._type==="circle"?l:new ee(l.width,l.height,this,"setRadius")},setRadius:function(l){var h=this._type;if(h==="circle"){if(l===this._radius)return;var g=l*2;this._radius=l,this._size._set(g,g)}else if(l=L.read(arguments),!this._radius)this._radius=l.clone();else{if(this._radius.equals(l))return;if(this._radius.set(l),h==="rectangle"){var g=L.max(this._size,l.multiply(2));this._size.set(g)}else h==="ellipse"&&this._size._set(l.width*2,l.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(l){var h=new rt[a.capitalize(this._type)]({center:new E,size:this._size,radius:this._radius,insert:!1});return h.copyAttributes(this),Nt.settings.applyMatrix&&h.setApplyMatrix(!0),(l===t||l)&&h.insertAbove(this),h},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(l,h,g,v){var x=this._style,T=x.hasFill(),A=x.hasStroke(),O=h.dontFinish||h.clip,j=!v;if(T||A||O){var M=this._type,P=this._radius,H=M==="circle";if(h.dontStart||l.beginPath(),j&&H)l.arc(0,0,P,0,Math.PI*2,!0);else{var z=H?P:P.width,R=H?P:P.height,K=this._size,Y=K.width,Z=K.height;if(j&&M==="rectangle"&&z===0&&R===0)l.rect(-Y/2,-Z/2,Y,Z);else{var B=Y/2,q=Z/2,D=1-.5522847498307936,X=z*D,Q=R*D,J=[-B,-q+R,-B,-q+Q,-B+X,-q,-B+z,-q,B-z,-q,B-X,-q,B,-q+Q,B,-q+R,B,q-R,B,q-Q,B-X,q,B-z,q,-B+z,q,-B+X,q,-B,q-Q,-B,q-R];v&&v.transform(J,J,32),l.moveTo(J[0],J[1]),l.bezierCurveTo(J[2],J[3],J[4],J[5],J[6],J[7]),B!==z&&l.lineTo(J[8],J[9]),l.bezierCurveTo(J[10],J[11],J[12],J[13],J[14],J[15]),q!==R&&l.lineTo(J[16],J[17]),l.bezierCurveTo(J[18],J[19],J[20],J[21],J[22],J[23]),B!==z&&l.lineTo(J[24],J[25]),l.bezierCurveTo(J[26],J[27],J[28],J[29],J[30],J[31])}}l.closePath()}!O&&(T||A)&&(this._setStyles(l,h,g),T&&(l.fill(x.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),A&&l.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(l,h){var g=new G(this._size).setCenter(0,0),v=this._style,x=h.stroke&&v.hasStroke()&&v.getStrokeWidth();return l&&(g=l._transformBounds(g)),x?g.expand(rt._getStrokePadding(x,this._getStrokeMatrix(l,h))):g}},new function(){function l(g,v,x){var T=g._radius;if(!T.isZero())for(var A=g._size.divide(2),O=1;O<=4;O++){var j=new E(O>1&&O<4?-1:1,O>2?-1:1),M=j.multiply(A),P=M.subtract(j.multiply(T)),H=new G(x?M.add(j.multiply(x)):M,P);if(H.contains(v))return{point:P,quadrant:O}}}function h(g,v,x,T){var A=g.divide(v);return(!T||A.isInQuadrant(T))&&A.subtract(A.normalize()).multiply(v).divide(x).length<=1}return{_contains:function g(v){if(this._type==="rectangle"){var x=l(this,v);return x?v.subtract(x.point).divide(this._radius).getLength()<=1:g.base.call(this,v)}else return v.divide(this.size).getLength()<=.5},_hitTestSelf:function g(v,x,T,A){var O=!1,j=this._style,M=x.stroke&&j.hasStroke(),P=x.fill&&j.hasFill();if(M||P){var H=this._type,z=this._radius,R=M?j.getStrokeWidth()/2:0,K=x._tolerancePadding.add(rt._getStrokePadding(R,!j.getStrokeScaling()&&A));if(H==="rectangle"){var Y=K.multiply(2),Z=l(this,v,Y);if(Z)O=h(v.subtract(Z.point),z,K,Z.quadrant);else{var B=new G(this._size).setCenter(0,0),q=B.expand(Y),D=B.expand(Y.negate());O=q._containsPoint(v)&&!D._containsPoint(v)}}else O=h(v,z,K)}return O?new ft(M?"stroke":"fill",this):g.base.apply(this,arguments)}}},{statics:new function(){function l(h,g,v,x,T){var A=a.create(Be.prototype);return A._type=h,A._size=v,A._radius=x,A._initialize(a.getNamed(T),g),A}return{Circle:function(){var h=arguments,g=E.readNamed(h,"center"),v=a.readNamed(h,"radius");return l("circle",g,new L(v*2),v,h)},Rectangle:function(){var h=arguments,g=G.readNamed(h,"rectangle"),v=L.min(L.readNamed(h,"radius"),g.getSize(!0).divide(2));return l("rectangle",g.getCenter(!0),g.getSize(!0),v,h)},Ellipse:function(){var h=arguments,g=Be._readEllipse(h),v=g.radius;return l("ellipse",g.center,v.multiply(2),v,h)},_readEllipse:function(h){var g,v;if(a.hasNamed(h,"radius"))g=E.readNamed(h,"center"),v=L.readNamed(h,"radius");else{var x=G.readNamed(h,"rectangle");g=x.getCenter(!0),v=x.getSize(!0).divide(2)}return{center:g,radius:v}}}}}),ct=I.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(h,g){if(!this._initialize(h,g!==t&&E.read(arguments))){var v,x=typeof h,T=x==="string"?s.getElementById(h):x==="object"?h:null;if(T&&T!==I.NO_INSERT){if(T.getContext||T.naturalHeight!=null)v=T;else if(T){var A=L.read(arguments);A.isZero()||(v=oi.getCanvas(A))}}v?this.setImage(v):this.setSource(h)}this._size||(this._size=new L,this._loaded=!1)},_equals:function(l){return this.getSource()===l.getSource()},copyContent:function(l){var h=l._image,g=l._canvas;if(h)this._setImage(h);else if(g){var v=oi.getCanvas(l._size);v.getContext("2d").drawImage(g,0,0),this._setImage(v)}this._crossOrigin=l._crossOrigin},getSize:function(){var l=this._size;return new ee(l?l.width:0,l?l.height:0,this,"setSize")},setSize:function(l,h){var g=L.read(arguments);if(g.equals(this._size))h&&this.clear();else if(g.width>0&&g.height>0){var v=!h&&this.getElement();this._setImage(oi.getCanvas(g)),v&&this.getContext(!0).drawImage(v,0,0,g.width,g.height)}else this._canvas&&oi.release(this._canvas),this._size=g.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(l){this.setSize(l,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(l){this.setSize(this.getWidth(),l)},getLoaded:function(){return this._loaded},isEmpty:function(){var l=this._size;return!l||l.width===0&&l.height===0},getResolution:function(){var l=this._matrix,h=new E(0,0).transform(l),g=new E(1,0).transform(l).subtract(h),v=new E(0,1).transform(l).subtract(h);return new L(72/g.getLength(),72/v.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(l){var h=this;function g(v){var x=h.getView(),T=v&&v.type||"load";x&&h.responds(T)&&(Nt=x._scope,h.emit(T,new Ms(v)))}this._setImage(l),this._loaded?setTimeout(g,0):l&&zt.add(l,{load:function(v){h._setImage(l),g(v)},error:g})},_setImage:function(l){this._canvas&&oi.release(this._canvas),l&&l.getContext?(this._image=null,this._canvas=l,this._loaded=!0):(this._image=l,this._canvas=null,this._loaded=!!(l&&l.src&&l.complete)),this._size=new L(l?l.naturalWidth||l.width:0,l?l.naturalHeight||l.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var l=oi.getContext(this._size);try{this._image&&l.drawImage(this._image,0,0),this._canvas=l.canvas}catch{oi.release(l)}}return this._canvas},setCanvas:"#setImage",getContext:function(l){return this._context||(this._context=this.getCanvas().getContext("2d")),l&&(this._image=null,this._changed(1025)),this._context},setContext:function(l){this._context=l},getSource:function(){var l=this._image;return l&&l.src||this.toDataURL()},setSource:function(l){var h=new e.Image,g=this._crossOrigin;g&&(h.crossOrigin=g),l&&(h.src=l),this.setImage(h)},getCrossOrigin:function(){var l=this._image;return l&&l.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(l){this._crossOrigin=l;var h=this._image;h&&(h.crossOrigin=l)},getSmoothing:function(){return this._smoothing},setSmoothing:function(l){this._smoothing=typeof l=="string"?l:l?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var l=G.read(arguments),h=oi.getContext(l.getSize());return h.drawImage(this.getCanvas(),l.x,l.y,l.width,l.height,0,0,l.width,l.height),h.canvas},getSubRaster:function(){var l=G.read(arguments),h=new ct(I.NO_INSERT);return h._setImage(this.getSubCanvas(l)),h.translate(l.getCenter().subtract(this.getSize().divide(2))),h._matrix.prepend(this._matrix),h.insertAbove(this),h},toDataURL:function(){var l=this._image,h=l&&l.src;if(/^data:/.test(h))return h;var g=this.getCanvas();return g?g.toDataURL.apply(g,arguments):null},drawImage:function(l){var h=E.read(arguments,1);this.getContext(!0).drawImage(l,h.x,h.y)},getAverageColor:function(l){var h,g;if(l?l instanceof it?(g=l,h=l.getBounds()):typeof l=="object"&&("width"in l?h=new G(l):"x"in l&&(h=new G(l.x-.5,l.y-.5,1,1))):h=this.getBounds(),!h)return null;var v=32,x=Math.min(h.width,v),T=Math.min(h.height,v),A=ct._sampleContext;A?A.clearRect(0,0,v+1,v+1):A=ct._sampleContext=oi.getContext(new L(v)),A.save();var O=new ne().scale(x/h.width,T/h.height).translate(-h.x,-h.y);O.applyToContext(A),g&&g.draw(A,new a({clip:!0,matrices:[O]})),this._matrix.applyToContext(A);var j=this.getElement(),M=this._size;j&&A.drawImage(j,-M.width/2,-M.height/2),A.restore();for(var P=A.getImageData(.5,.5,Math.ceil(x),Math.ceil(T)).data,H=[0,0,0],z=0,R=0,K=P.length;R<K;R+=4){var Y=P[R+3];z+=Y,Y/=255,H[0]+=P[R]*Y,H[1]+=P[R+1]*Y,H[2]+=P[R+2]*Y}for(var R=0;R<3;R++)H[R]/=z;return z?ut.read(H):null},getPixel:function(){var l=E.read(arguments),h=this.getContext().getImageData(l.x,l.y,1,1).data;return new ut("rgb",[h[0]/255,h[1]/255,h[2]/255],h[3]/255)},setPixel:function(){var l=arguments,h=E.read(l),g=ut.read(l),v=g._convert("rgb"),x=g._alpha,T=this.getContext(!0),A=T.createImageData(1,1),O=A.data;O[0]=v[0]*255,O[1]=v[1]*255,O[2]=v[2]*255,O[3]=x!=null?x*255:255,T.putImageData(A,h.x,h.y)},clear:function(){var l=this._size;this.getContext(!0).clearRect(0,0,l.width+1,l.height+1)},createImageData:function(){var l=L.read(arguments);return this.getContext().createImageData(l.width,l.height)},getImageData:function(){var l=G.read(arguments);return l.isEmpty()&&(l=new G(this._size)),this.getContext().getImageData(l.x,l.y,l.width,l.height)},putImageData:function(l){var h=E.read(arguments,1);this.getContext(!0).putImageData(l,h.x,h.y)},setImageData:function(l){this.setSize(l),this.getContext(!0).putImageData(l,0,0)},_getBounds:function(l,h){var g=new G(this._size).setCenter(0,0);return l?l._transformBounds(g):g},_hitTestSelf:function(l){if(this._contains(l)){var h=this;return new ft("pixel",h,{offset:l.add(h._size.divide(2)).round(),color:{get:function(){return h.getPixel(this.offset)}}})}},_draw:function(l,h,g){var v=this.getElement();if(v&&v.width>0&&v.height>0){l.globalAlpha=C.clamp(this._opacity,0,1),this._setStyles(l,h,g);var x=this._smoothing,T=x==="off";Ct.setPrefixed(l,T?"imageSmoothingEnabled":"imageSmoothingQuality",T?!1:x),l.drawImage(v,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),nt=I.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(h,g){this._initialize(h,g!==t&&E.read(arguments,1))||this.setDefinition(h instanceof et?h:new et(h))},_equals:function(l){return this._definition===l._definition},copyContent:function(l){this.setDefinition(l._definition)},getDefinition:function(){return this._definition},setDefinition:function(l){this._definition=l,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(l,h){var g=this._definition._item;return g._getCachedBounds(g._matrix.prepended(l),h)},_hitTestSelf:function(l,h,g){var v=h.extend({all:!1}),x=this._definition._item._hitTest(l,v,g);return x&&(x.item=this),x},_draw:function(l,h){this._definition._item.draw(l,h)}}),et=a.extend({_class:"SymbolDefinition",initialize:function(h,g){this._id=N.get(),this.project=Nt.project,h&&this.setItem(h,g)},_serialize:function(l,h){return h.add(this,function(){return a.serialize([this._class,this._item],l,!1,h)})},_changed:function(l){l&8&&I._clearBoundsCache(this),l&1&&this.project._changed(l)},getItem:function(){return this._item},setItem:function(l,h){l._symbol&&(l=l.clone()),this._item&&(this._item._symbol=null),this._item=l,l.remove(),l.setSelected(!1),h||l.setPosition(new E),l._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(l){return new nt(this,l)},clone:function(){return new et(this._item.clone(!1))},equals:function(l){return l===this||l&&this._item.equals(l._item)||!1}}),ft=a.extend({_class:"HitResult",initialize:function(h,g,v){this.type=h,this.item=g,v&&this.inject(v)},statics:{getOptions:function(l){var h=l&&a.read(l);return new a({type:null,tolerance:Nt.settings.hitTolerance,fill:!h,stroke:!h,segments:!h,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},h)}}}),Ge=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(h,g,v,x,T,A){var O=arguments.length,j,M,P,H;O>0&&(h==null||typeof h=="object"?O===1&&h&&"point"in h?(j=h.point,M=h.handleIn,P=h.handleOut,H=h.selection):(j=h,M=g,P=v,H=x):(j=[h,g],M=v!==t?[v,x]:null,P=T!==t?[T,A]:null)),new Mt(j,this,"_point"),new Mt(M,this,"_handleIn"),new Mt(P,this,"_handleOut"),H&&this.setSelection(H)},_serialize:function(l,h){var g=this._point,v=this._selection,x=v||this.hasHandles()?[g,this._handleIn,this._handleOut]:g;return v&&x.push(v),a.serialize(x,l,!0,h)},_changed:function(l){var h=this._path;if(h){var g=h._curves,v=this._index,x;g&&((!l||l===this._point||l===this._handleIn)&&(x=v>0?g[v-1]:h._closed?g[g.length-1]:null)&&x._changed(),(!l||l===this._point||l===this._handleOut)&&(x=g[v])&&x._changed()),h._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(E.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(E.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(E.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var l=this._handleIn,h=this._handleOut;return!l.isZero()&&!h.isZero()&&l.isCollinear(h)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(l){var h=this._selection,g=this._path;this._selection=l=l||0,g&&l!==h&&(g._updateSelection(this,h,l),g._changed(257))},_changeSelection:function(l,h){var g=this._selection;this.setSelection(h?g|l:g&~l)},isSelected:function(){return!!(this._selection&7)},setSelected:function(l){this._changeSelection(7,l)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var l=this._path,h=this._index;return l?(h>0&&!l._closed&&h===l._segments.length-1&&h--,l.getCurves()[h]||null):null},getLocation:function(){var l=this.getCurve();return l?new qe(l,this===l._segment1?0:1):null},getNext:function(){var l=this._path&&this._path._segments;return l&&(l[this._index+1]||this._path._closed&&l[0])||null},smooth:function(l,h,g){var v=l||{},x=v.type,T=v.factor,A=this.getPrevious(),O=this.getNext(),j=(A||this)._point,M=this._point,P=(O||this)._point,H=j.getDistance(M),z=M.getDistance(P);if(!x||x==="catmull-rom"){var R=T===t?.5:T,K=Math.pow(H,R),Y=K*K,Z=Math.pow(z,R),B=Z*Z;if(!h&&A){var q=2*B+3*Z*K+Y,D=3*Z*(Z+K);this.setHandleIn(D!==0?new E((B*j._x+q*M._x-Y*P._x)/D-M._x,(B*j._y+q*M._y-Y*P._y)/D-M._y):new E)}if(!g&&O){var q=2*Y+3*K*Z+B,D=3*K*(K+Z);this.setHandleOut(D!==0?new E((Y*P._x+q*M._x-B*j._x)/D-M._x,(Y*P._y+q*M._y-B*j._y)/D-M._y):new E)}}else if(x==="geometric"){if(A&&O){var X=j.subtract(P),Q=T===t?.4:T,J=Q*H/(H+z);h||this.setHandleIn(X.multiply(J)),g||this.setHandleOut(X.multiply(J-Q))}}else throw new Error("Smoothing method '"+x+"' not supported.")},getPrevious:function(){var l=this._path&&this._path._segments;return l&&(l[this._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var l=this._path;return l&&this._index===l._segments.length-1||!1},reverse:function(){var l=this._handleIn,h=this._handleOut,g=l.clone();l.set(h),h.set(g)},reversed:function(){return new Ge(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ge(this._point,this._handleIn,this._handleOut)},equals:function(l){return l===this||l&&this._class===l._class&&this._point.equals(l._point)&&this._handleIn.equals(l._handleIn)&&this._handleOut.equals(l._handleOut)||!1},toString:function(){var l=["point: "+this._point];return this._handleIn.isZero()||l.push("handleIn: "+this._handleIn),this._handleOut.isZero()||l.push("handleOut: "+this._handleOut),"{ "+l.join(", ")+" }"},transform:function(l){this._transformCoordinates(l,new Array(6),!0),this._changed()},interpolate:function(l,h,g){var v=1-g,x=g,T=l._point,A=h._point,O=l._handleIn,j=h._handleIn,M=h._handleOut,P=l._handleOut;this._point._set(v*T._x+x*A._x,v*T._y+x*A._y,!0),this._handleIn._set(v*O._x+x*j._x,v*O._y+x*j._y,!0),this._handleOut._set(v*P._x+x*M._x,v*P._y+x*M._y,!0),this._changed()},_transformCoordinates:function(l,h,g){var v=this._point,x=!g||!this._handleIn.isZero()?this._handleIn:null,T=!g||!this._handleOut.isZero()?this._handleOut:null,A=v._x,O=v._y,j=2;return h[0]=A,h[1]=O,x&&(h[j++]=x._x+A,h[j++]=x._y+O),T&&(h[j++]=T._x+A,h[j++]=T._y+O),l&&(l._transformCoordinates(h,h,j/2),A=h[0],O=h[1],g?(v._x=A,v._y=O,j=2,x&&(x._x=h[j++]-A,x._y=h[j++]-O),T&&(T._x=h[j++]-A,T._y=h[j++]-O)):(x||(h[j++]=A,h[j++]=O),T||(h[j++]=A,h[j++]=O))),h}}),Mt=E.extend({initialize:function(h,g,v){var x,T,A;if(!h)x=T=0;else if((x=h[0])!==t)T=h[1];else{var O=h;(x=O.x)===t&&(O=E.read(arguments),x=O.x),T=O.y,A=O.selected}this._x=x,this._y=T,this._owner=g,g[v]=this,A&&this.setSelected(!0)},_set:function(l,h){return this._x=l,this._y=h,this._owner._changed(this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner._changed(this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner._changed(this)},isZero:function(){var l=C.isZero;return l(this._x)&&l(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){var l=this._owner;return this===l._point?1:this===l._handleIn?2:this===l._handleOut?4:0}}),he=a.extend({_class:"Curve",beans:!0,initialize:function(h,g,v,x,T,A,O,j){var M=arguments.length,P,H,z,R,K,Y;M===3?(this._path=h,P=g,H=v):M?M===1?"segment1"in h?(P=new Ge(h.segment1),H=new Ge(h.segment2)):"point1"in h?(z=h.point1,K=h.handle1,Y=h.handle2,R=h.point2):Array.isArray(h)&&(z=[h[0],h[1]],R=[h[6],h[7]],K=[h[2]-h[0],h[3]-h[1]],Y=[h[4]-h[6],h[5]-h[7]]):M===2?(P=new Ge(h),H=new Ge(g)):M===4?(z=h,K=g,Y=v,R=x):M===8&&(z=[h,g],R=[O,j],K=[v-h,x-g],Y=[T-O,A-j]):(P=new Ge,H=new Ge),this._segment1=P||new Ge(z,null,K),this._segment2=H||new Ge(R,Y,null)},_serialize:function(l,h){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],l,!0,h)},_changed:function(){this._length=this._bounds=t},clone:function(){return new he(this._segment1,this._segment2)},toString:function(){var l=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||l.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||l.push("handle2: "+this._segment2._handleIn),l.push("point2: "+this._segment2._point),"{ "+l.join(", ")+" }"},classify:function(){return he.classify(this.getValues())},remove:function(){var l=!1;if(this._path){var h=this._segment2,g=h._handleOut;l=h.remove(),l&&this._segment1._handleOut.set(g)}return l},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(E.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(E.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(E.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(E.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index+1]||this._path._closed&&l[0])||null},getPrevious:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var l=this._path;return l&&this._segment1._index===l._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(l){this.getPoint1().setSelected(l),this.getHandle1().setSelected(l),this.getHandle2().setSelected(l),this.getPoint2().setSelected(l)},getValues:function(l){return he.getValues(this._segment1,this._segment2,l)},getPoints:function(){for(var l=this.getValues(),h=[],g=0;g<8;g+=2)h.push(new E(l[g],l[g+1]));return h}},{getLength:function(){return this._length==null&&(this._length=he.getLength(this.getValues(),0,1)),this._length},getArea:function(){return he.getArea(this.getValues())},getLine:function(){return new de(this._segment1._point,this._segment2._point)},getPart:function(l,h){return new he(he.getPart(this.getValues(),l,h))},getPartLength:function(l,h){return he.getLength(this.getValues(),l,h)},divideAt:function(l){return this.divideAtTime(l&&l.curve===this?l.time:this.getTimeAt(l))},divideAtTime:function(l,h){var g=1e-8,v=1-g,x=null;if(l>=g&&l<=v){var T=he.subdivide(this.getValues(),l),A=T[0],O=T[1],j=h||this.hasHandles(),M=this._segment1,P=this._segment2,H=this._path;j&&(M._handleOut._set(A[2]-A[0],A[3]-A[1]),P._handleIn._set(O[4]-O[6],O[5]-O[7]));var z=A[6],R=A[7],K=new Ge(new E(z,R),j&&new E(A[4]-z,A[5]-R),j&&new E(O[2]-z,O[3]-R));H?(H.insert(M._index+1,K),x=this.getNext()):(this._segment2=K,this._changed(),x=new he(K,P))}return x},splitAt:function(l){var h=this._path;return h?h.splitAt(l):null},splitAtTime:function(l){return this.splitAt(this.getLocationAtTime(l))},divide:function(l,h){return this.divideAtTime(l===t?.5:h?l:this.getTimeAt(l))},split:function(l,h){return this.splitAtTime(l===t?.5:h?l:this.getTimeAt(l))},reversed:function(){return new he(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(l,h,g,v){var x=l._point,T=l._handleOut,A=h._handleIn,O=h._point,j=x.x,M=x.y,P=O.x,H=O.y,z=v?[j,M,j,M,P,H,P,H]:[j,M,j+T._x,M+T._y,P+A._x,H+A._y,P,H];return g&&g._transformCoordinates(z,z,4),z},subdivide:function(l,h){var g=l[0],v=l[1],x=l[2],T=l[3],A=l[4],O=l[5],j=l[6],M=l[7];h===t&&(h=.5);var P=1-h,H=P*g+h*x,z=P*v+h*T,R=P*x+h*A,K=P*T+h*O,Y=P*A+h*j,Z=P*O+h*M,B=P*H+h*R,q=P*z+h*K,D=P*R+h*Y,X=P*K+h*Z,Q=P*B+h*D,J=P*q+h*X;return[[g,v,H,z,B,q,Q,J],[Q,J,D,X,Y,Z,j,M]]},getMonoCurves:function(l,h){var g=[],v=h?0:1,x=l[v+0],T=l[v+2],A=l[v+4],O=l[v+6];if(x>=T==T>=A&&T>=A==A>=O||he.isStraight(l))g.push(l);else{var j=3*(T-A)-x+O,M=2*(x+A)-4*T,P=T-x,H=1e-8,z=1-H,R=[],K=C.solveQuadratic(j,M,P,R,H,z);if(!K)g.push(l);else{R.sort();var Y=R[0],Z=he.subdivide(l,Y);g.push(Z[0]),K>1&&(Y=(R[1]-Y)/(1-Y),Z=he.subdivide(Z[1],Y),g.push(Z[0])),g.push(Z[1])}}return g},solveCubic:function(l,h,g,v,x,T){var A=l[h],O=l[h+2],j=l[h+4],M=l[h+6],P=0;if(!(A<g&&M<g&&O<g&&j<g||A>g&&M>g&&O>g&&j>g)){var H=3*(O-A),z=3*(j-O)-H,R=M-A-H-z;P=C.solveCubic(R,z,H,A-g,v,x,T)}return P},getTimeOf:function(l,h){var g=new E(l[0],l[1]),v=new E(l[6],l[7]),x=1e-12,T=1e-7,A=h.isClose(g,x)?0:h.isClose(v,x)?1:null;if(A===null)for(var O=[h.x,h.y],j=[],M=0;M<2;M++)for(var P=he.solveCubic(l,M,O[M],j,0,1),H=0;H<P;H++){var z=j[H];if(h.isClose(he.getPoint(l,z),T))return z}return h.isClose(g,T)?0:h.isClose(v,T)?1:null},getNearestTime:function(l,h){if(he.isStraight(l)){var g=l[0],v=l[1],x=l[6],T=l[7],A=x-g,O=T-v,j=A*A+O*O;if(j===0)return 0;var M=((h.x-g)*A+(h.y-v)*O)/j;return M<1e-12?0:M>.999999999999?1:he.getTimeOf(l,new E(g+M*A,v+M*O))}var P=100,H=1/0,z=0;function R(Z){if(Z>=0&&Z<=1){var B=h.getDistance(he.getPoint(l,Z),!0);if(B<H)return H=B,z=Z,!0}}for(var K=0;K<=P;K++)R(K/P);for(var Y=1/(P*2);Y>1e-8;)!R(z-Y)&&!R(z+Y)&&(Y/=2);return z},getPart:function(l,h,g){var v=h>g;if(v){var x=h;h=g,g=x}return h>0&&(l=he.subdivide(l,h)[1]),g<1&&(l=he.subdivide(l,(g-h)/(1-h))[0]),v?[l[6],l[7],l[4],l[5],l[2],l[3],l[0],l[1]]:l},isFlatEnough:function(l,h){var g=l[0],v=l[1],x=l[2],T=l[3],A=l[4],O=l[5],j=l[6],M=l[7],P=3*x-2*g-j,H=3*T-2*v-M,z=3*A-2*j-g,R=3*O-2*M-v;return Math.max(P*P,z*z)+Math.max(H*H,R*R)<=16*h*h},getArea:function(l){var h=l[0],g=l[1],v=l[2],x=l[3],T=l[4],A=l[5],O=l[6],j=l[7];return 3*((j-g)*(v+T)-(O-h)*(x+A)+x*(h-T)-v*(g-A)+j*(T+h/3)-O*(A+g/3))/20},getBounds:function(l){for(var h=l.slice(0,2),g=h.slice(),v=[0,0],x=0;x<2;x++)he._addBounds(l[x],l[x+2],l[x+4],l[x+6],x,0,h,g,v);return new G(h[0],h[1],g[0]-h[0],g[1]-h[1])},_addBounds:function(l,h,g,v,x,T,A,O,j){function M(Q,J){var W=Q-J,se=Q+J;W<A[x]&&(A[x]=W),se>O[x]&&(O[x]=se)}T/=2;var P=A[x]+T,H=O[x]-T;if(l<P||h<P||g<P||v<P||l>H||h>H||g>H||v>H)if(h<l!=h<v&&g<l!=g<v)M(l,0),M(v,0);else{var z=3*(h-g)-l+v,R=2*(l+g)-4*h,K=h-l,Y=C.solveQuadratic(z,R,K,j),Z=1e-8,B=1-Z;M(v,0);for(var q=0;q<Y;q++){var D=j[q],X=1-D;Z<=D&&D<=B&&M(X*X*X*l+3*X*X*D*h+3*X*D*D*g+D*D*D*v,T)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],function(l){this[l]=function(){this._bounds||(this._bounds={});var h=this._bounds[l];return h||(h=this._bounds[l]=rt[l]([this._segment1,this._segment2],!1,this._path)),h.clone()}},{}),a.each({isStraight:function(l,h,g,v){if(h.isZero()&&g.isZero())return!0;var x=v.subtract(l);if(x.isZero())return!1;if(x.isCollinear(h)&&x.isCollinear(g)){var T=new de(l,v),A=1e-7;if(T.getDistance(l.add(h))<A&&T.getDistance(v.add(g))<A){var O=x.dot(x),j=x.dot(h)/O,M=x.dot(g)/O;return j>=0&&j<=1&&M<=0&&M>=-1}}return!1},isLinear:function(l,h,g,v){var x=v.subtract(l).divide(3);return h.equals(x)&&g.negate().equals(x)}},function(l,h){this[h]=function(g){var v=this._segment1,x=this._segment2;return l(v._point,v._handleOut,x._handleIn,x._point,g)},this.statics[h]=function(g,v){var x=g[0],T=g[1],A=g[6],O=g[7];return l(new E(x,T),new E(g[2]-x,g[3]-T),new E(g[4]-A,g[5]-O),new E(A,O),v)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(l){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(l||0)},isCollinear:function(l){return l&&this.isStraight()&&l.isStraight()&&this.getLine().isCollinear(l.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(l,h){return this.getLocationAtTime(h?l:this.getTimeAt(l))},getLocationAtTime:function(l){return l!=null&&l>=0&&l<=1?new qe(this,l):null},getTimeAt:function(l,h){return he.getTimeAt(this.getValues(),l,h)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var l=E.read(arguments);return l.isZero()?[]:he.getTimesWithTangent(this.getValues(),l)},getOffsetAtTime:function(l){return this.getPartLength(0,l)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(E.read(arguments)))},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getTimeOf:function(){return he.getTimeOf(this.getValues(),E.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var l=E.read(arguments),h=this.getValues(),g=he.getNearestTime(h,l),v=he.getPoint(h,g);return new qe(this,g,v,null,l.getDistance(v))},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()}},new function(){var l=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(l,function(h){this[h+"At"]=function(g,v){var x=this.getValues();return he[h](x,v?g:he.getTimeAt(x,g))},this[h+"AtTime"]=function(g){return he[h](this.getValues(),g)}},{statics:{_evaluateMethods:l}})},new function(){function l(v){var x=v[0],T=v[1],A=v[2],O=v[3],j=v[4],M=v[5],P=v[6],H=v[7],z=9*(A-j)+3*(P-x),R=6*(x+j)-12*A,K=3*(A-x),Y=9*(O-M)+3*(H-T),Z=6*(T+M)-12*O,B=3*(O-T);return function(q){var D=(z*q+R)*q+K,X=(Y*q+Z)*q+B;return Math.sqrt(D*D+X*X)}}function h(v,x){return Math.max(2,Math.min(16,Math.ceil(Math.abs(x-v)*32)))}function g(v,x,T,A){if(x==null||x<0||x>1)return null;var O=v[0],j=v[1],M=v[2],P=v[3],H=v[4],z=v[5],R=v[6],K=v[7],Y=C.isZero;Y(M-O)&&Y(P-j)&&(M=O,P=j),Y(H-R)&&Y(z-K)&&(H=R,z=K);var Z=3*(M-O),B=3*(H-M)-Z,q=R-O-Z-B,D=3*(P-j),X=3*(z-P)-D,Q=K-j-D-X,J,W;if(T===0)J=x===0?O:x===1?R:((q*x+B)*x+Z)*x+O,W=x===0?j:x===1?K:((Q*x+X)*x+D)*x+j;else{var se=1e-8,oe=1-se;if(x<se?(J=Z,W=D):x>oe?(J=3*(R-H),W=3*(K-z)):(J=(3*q*x+2*B)*x+Z,W=(3*Q*x+2*X)*x+D),A){J===0&&W===0&&(x<se||x>oe)&&(J=H-M,W=z-P);var le=Math.sqrt(J*J+W*W);le&&(J/=le,W/=le)}if(T===3){var H=6*q*x+2*B,z=6*Q*x+2*X,ge=Math.pow(J*J+W*W,3/2);J=ge!==0?(J*z-W*H)/ge:0,W=0}}return T===2?new E(W,-J):new E(J,W)}return{statics:{classify:function(v){var x=v[0],T=v[1],A=v[2],O=v[3],j=v[4],M=v[5],P=v[6],H=v[7],z=x*(H-M)+T*(j-P)+P*M-H*j,R=A*(T-H)+O*(P-x)+x*H-T*P,K=j*(O-T)+M*(x-A)+A*T-O*x,Y=3*K,Z=Y-R,B=Z-R+z,q=Math.sqrt(B*B+Z*Z+Y*Y),D=q!==0?1/q:0,X=C.isZero,Q="serpentine";B*=D,Z*=D,Y*=D;function J(le,ge,re){var ue=ge!==t,me=ue&&ge>0&&ge<1,Ce=ue&&re>0&&re<1;return ue&&(!(me||Ce)||le==="loop"&&!(me&&Ce))&&(le="arch",me=Ce=!1),{type:le,roots:me||Ce?me&&Ce?ge<re?[ge,re]:[re,ge]:[me?ge:re]:null}}if(X(B))return X(Z)?J(X(Y)?"line":"quadratic"):J(Q,Y/(3*Z));var W=3*Z*Z-4*B*Y;if(X(W))return J("cusp",Z/(2*B));var se=W>0?Math.sqrt(W/3):Math.sqrt(-W),oe=2*B;return J(W>0?Q:"loop",(Z+se)/oe,(Z-se)/oe)},getLength:function(v,x,T,A){if(x===t&&(x=0),T===t&&(T=1),he.isStraight(v)){var O=v;T<1&&(O=he.subdivide(O,T)[0],x/=T),x>0&&(O=he.subdivide(O,x)[1]);var j=O[6]-O[0],M=O[7]-O[1];return Math.sqrt(j*j+M*M)}return C.integrate(A||l(v),x,T,h(x,T))},getTimeAt:function(v,x,T){if(T===t&&(T=x<0?1:0),x===0)return T;var A=Math.abs,O=1e-12,j=x>0,M=j?T:0,P=j?1:T,H=l(v),z=he.getLength(v,M,P,H),R=A(x)-z;if(A(R)<O)return j?P:M;if(R>O)return null;var K=x/z,Y=0;function Z(B){return Y+=C.integrate(H,T,B,h(T,B)),T=B,Y-x}return C.findRoot(Z,H,T+K,M,P,32,1e-12)},getPoint:function(v,x){return g(v,x,0,!1)},getTangent:function(v,x){return g(v,x,1,!0)},getWeightedTangent:function(v,x){return g(v,x,1,!1)},getNormal:function(v,x){return g(v,x,2,!0)},getWeightedNormal:function(v,x){return g(v,x,2,!1)},getCurvature:function(v,x){return g(v,x,3,!1).x},getPeaks:function(v){var x=v[0],T=v[1],A=v[2],O=v[3],j=v[4],M=v[5],P=v[6],H=v[7],z=-x+3*A-3*j+P,R=3*x-6*A+3*j,K=-3*x+3*A,Y=-T+3*O-3*M+H,Z=3*T-6*O+3*M,B=-3*T+3*O,q=1e-8,D=1-q,X=[];return C.solveCubic(9*(z*z+Y*Y),9*(z*R+Z*Y),2*(R*R+Z*Z)+3*(K*z+B*Y),K*R+Z*B,X,q,D),X.sort()}}}},new function(){function l(R,K,Y,Z,B,q,D){var X=!D&&Y.getPrevious()===B,Q=!D&&Y!==B&&Y.getNext()===B,J=1e-8,W=1-J;if(Z!==null&&Z>=(X?J:0)&&Z<=(Q?W:1)&&q!==null&&q>=(Q?J:0)&&q<=(X?W:1)){var se=new qe(Y,Z,null,D),oe=new qe(B,q,null,D);se._intersection=oe,oe._intersection=se,(!K||K(se))&&qe.insert(R,se,!0)}}function h(R,K,Y,Z,B,q,D,X,Q,J,W,se,oe){if(++Q>=4096||++X>=40)return Q;var le=1e-9,ge=K[0],re=K[1],ue=K[6],me=K[7],Ce=de.getSignedDistance,we=Ce(ge,re,ue,me,K[2],K[3]),Ae=Ce(ge,re,ue,me,K[4],K[5]),ze=we*Ae>0?3/4:4/9,We=ze*Math.min(0,we,Ae),Je=ze*Math.max(0,we,Ae),lt=Ce(ge,re,ue,me,R[0],R[1]),Pe=Ce(ge,re,ue,me,R[2],R[3]),Ie=Ce(ge,re,ue,me,R[4],R[5]),Qe=Ce(ge,re,ue,me,R[6],R[7]),at=g(lt,Pe,Ie,Qe),st=at[0],mt=at[1],pt,xt;if(we===0&&Ae===0&&lt===0&&Pe===0&&Ie===0&&Qe===0||(pt=v(st,mt,We,Je))==null||(xt=v(st.reverse(),mt.reverse(),We,Je))==null)return Q;var gt=J+(W-J)*pt,Tt=J+(W-J)*xt;if(Math.max(oe-se,Tt-gt)<le){var Ci=(gt+Tt)/2,Jt=(se+oe)/2;l(B,q,D?Z:Y,D?Jt:Ci,D?Y:Z,D?Ci:Jt)}else{R=he.getPart(R,pt,xt);var hi=oe-se;if(xt-pt>.8)if(Tt-gt>hi){var xi=he.subdivide(R,.5),Ci=(gt+Tt)/2;Q=h(K,xi[0],Z,Y,B,q,!D,X,Q,se,oe,gt,Ci),Q=h(K,xi[1],Z,Y,B,q,!D,X,Q,se,oe,Ci,Tt)}else{var xi=he.subdivide(K,.5),Jt=(se+oe)/2;Q=h(xi[0],R,Z,Y,B,q,!D,X,Q,se,Jt,gt,Tt),Q=h(xi[1],R,Z,Y,B,q,!D,X,Q,Jt,oe,gt,Tt)}else hi===0||hi>=le?Q=h(K,R,Z,Y,B,q,!D,X,Q,se,oe,gt,Tt):Q=h(R,K,Y,Z,B,q,D,X,Q,gt,Tt,se,oe)}return Q}function g(R,K,Y,Z){var B=[0,R],q=[1/3,K],D=[2/3,Y],X=[1,Z],Q=K-(2*R+Z)/3,J=Y-(R+2*Z)/3,W;if(Q*J<0)W=[[B,q,X],[B,D,X]];else{var se=Q/J;W=[se>=2?[B,q,X]:se<=.5?[B,D,X]:[B,q,D,X],[B,X]]}return(Q||J)<0?W.reverse():W}function v(R,K,Y,Z){return R[0][1]<Y?x(R,!0,Y):K[0][1]>Z?x(K,!1,Z):R[0][0]}function x(R,K,Y){for(var Z=R[0][0],B=R[0][1],q=1,D=R.length;q<D;q++){var X=R[q][0],Q=R[q][1];if(K?Q>=Y:Q<=Y)return Q===Y?X:Z+(Y-B)*(X-Z)/(Q-B);Z=X,B=Q}return null}function T(R,K,Y,Z,B){var q=C.isZero;if(q(Z)&&q(B)){var D=he.getTimeOf(R,new E(K,Y));return D===null?[]:[D]}for(var X=Math.atan2(-B,Z),Q=Math.sin(X),J=Math.cos(X),W=[],se=[],oe=0;oe<8;oe+=2){var le=R[oe]-K,ge=R[oe+1]-Y;W.push(le*J-ge*Q,le*Q+ge*J)}return he.solveCubic(W,1,0,se,0,1),se}function A(R,K,Y,Z,B,q,D){for(var X=K[0],Q=K[1],J=K[6],W=K[7],se=T(R,X,Q,J-X,W-Q),oe=0,le=se.length;oe<le;oe++){var ge=se[oe],re=he.getPoint(R,ge),ue=he.getTimeOf(K,re);ue!==null&&l(B,q,D?Z:Y,D?ue:ge,D?Y:Z,D?ge:ue)}}function O(R,K,Y,Z,B,q){var D=de.intersect(R[0],R[1],R[6],R[7],K[0],K[1],K[6],K[7]);D&&l(B,q,Y,he.getTimeOf(R,D),Z,he.getTimeOf(K,D))}function j(R,K,Y,Z,B,q){var D=1e-12,X=Math.min,Q=Math.max;if(Q(R[0],R[2],R[4],R[6])+D>X(K[0],K[2],K[4],K[6])&&X(R[0],R[2],R[4],R[6])-D<Q(K[0],K[2],K[4],K[6])&&Q(R[1],R[3],R[5],R[7])+D>X(K[1],K[3],K[5],K[7])&&X(R[1],R[3],R[5],R[7])-D<Q(K[1],K[3],K[5],K[7])){var J=H(R,K);if(J)for(var W=0;W<2;W++){var se=J[W];l(B,q,Y,se[0],Z,se[1],!0)}else{var oe=he.isStraight(R),le=he.isStraight(K),ge=oe&&le,re=oe&&!le,ue=B.length;if((ge?O:oe||le?A:h)(re?K:R,re?R:K,re?Z:Y,re?Y:Z,B,q,re,0,0,0,1,0,1),!ge||B.length===ue)for(var W=0;W<4;W++){var me=W>>1,Ce=W&1,we=me*6,Ae=Ce*6,ze=new E(R[we],R[we+1]),We=new E(K[Ae],K[Ae+1]);ze.isClose(We,D)&&l(B,q,Y,me,Z,Ce)}}}return B}function M(R,K,Y,Z){var B=he.classify(R);if(B.type==="loop"){var q=B.roots;l(Y,Z,K,q[0],K,q[1])}return Y}function P(R,K,Y,Z,B,q){var D=1e-7,X=!K;X&&(K=R);for(var Q=R.length,J=K.length,W=new Array(Q),se=X?W:new Array(J),oe=[],le=0;le<Q;le++)W[le]=R[le].getValues(Z);if(!X)for(var le=0;le<J;le++)se[le]=K[le].getValues(B);for(var ge=y.findCurveBoundsCollisions(W,se,D),re=0;re<Q;re++){var ue=R[re],me=W[re];X&&M(me,ue,oe,Y);var Ce=ge[re];if(Ce)for(var we=0;we<Ce.length;we++){if(q&&oe.length)return oe;var Ae=Ce[we];if(!X||Ae>re){var ze=K[Ae],We=se[Ae];j(me,We,ue,ze,oe,Y)}}}return oe}function H(R,K){function Y(Qe){var at=Qe[6]-Qe[0],st=Qe[7]-Qe[1];return at*at+st*st}var Z=Math.abs,B=de.getDistance,q=1e-8,D=1e-7,X=he.isStraight(R),Q=he.isStraight(K),J=X&&Q,W=Y(R)<Y(K),se=W?K:R,oe=W?R:K,le=se[0],ge=se[1],re=se[6]-le,ue=se[7]-ge;if(B(le,ge,re,ue,oe[0],oe[1],!0)<D&&B(le,ge,re,ue,oe[6],oe[7],!0)<D)!J&&B(le,ge,re,ue,se[2],se[3],!0)<D&&B(le,ge,re,ue,se[4],se[5],!0)<D&&B(le,ge,re,ue,oe[2],oe[3],!0)<D&&B(le,ge,re,ue,oe[4],oe[5],!0)<D&&(X=Q=J=!0);else if(J)return null;if(X^Q)return null;for(var me=[R,K],Ce=[],we=0;we<4&&Ce.length<2;we++){var Ae=we&1,ze=Ae^1,We=we>>1,Je=he.getTimeOf(me[Ae],new E(me[ze][We?6:0],me[ze][We?7:1]));if(Je!=null){var lt=Ae?[We,Je]:[Je,We];(!Ce.length||Z(lt[0]-Ce[0][0])>q&&Z(lt[1]-Ce[0][1])>q)&&Ce.push(lt)}if(we>2&&!Ce.length)break}if(Ce.length!==2)Ce=null;else if(!J){var Pe=he.getPart(R,Ce[0][0],Ce[1][0]),Ie=he.getPart(K,Ce[0][1],Ce[1][1]);(Z(Ie[2]-Pe[2])>D||Z(Ie[3]-Pe[3])>D||Z(Ie[4]-Pe[4])>D||Z(Ie[5]-Pe[5])>D)&&(Ce=null)}return Ce}function z(R,K){var Y=R[0],Z=R[1],B=R[2],q=R[3],D=R[4],X=R[5],Q=R[6],J=R[7],W=K.normalize(),se=W.x,oe=W.y,le=3*Q-9*D+9*B-3*Y,ge=3*J-9*X+9*q-3*Z,re=6*D-12*B+6*Y,ue=6*X-12*q+6*Z,me=3*B-3*Y,Ce=3*q-3*Z,we=2*le*oe-2*ge*se,Ae=[];if(Math.abs(we)<C.CURVETIME_EPSILON){var ze=le*Ce-ge*me,we=le*ue-ge*re;if(we!=0){var We=-ze/we;We>=0&&We<=1&&Ae.push(We)}}else{var Je=(re*re-4*le*me)*oe*oe+(-2*re*ue+4*ge*me+4*le*Ce)*se*oe+(ue*ue-4*ge*Ce)*se*se,lt=re*oe-ue*se;if(Je>=0&&we!=0){var Pe=Math.sqrt(Je),Ie=-(lt+Pe)/we,Qe=(-lt+Pe)/we;Ie>=0&&Ie<=1&&Ae.push(Ie),Qe>=0&&Qe<=1&&Ae.push(Qe)}}return Ae}return{getIntersections:function(R){var K=this.getValues(),Y=R&&R!==this&&R.getValues();return Y?j(K,Y,this,R,[]):M(K,this,[])},statics:{getOverlaps:H,getIntersections:P,getCurveLineIntersections:T,getTimesWithTangent:z}}}),qe=a.extend({_class:"CurveLocation",initialize:function(h,g,v,x,T){if(g>=.99999999){var A=h.getNext();A&&(g=0,h=A)}this._setCurve(h),this._time=g,this._point=v||h.getPointAtTime(g),this._overlap=x,this._distance=T,this._intersection=this._next=this._previous=null},_setPath:function(l){this._path=l,this._version=l?l._version:0},_setCurve:function(l){this._setPath(l._path),this._curve=l,this._segment=null,this._segment1=l._segment1,this._segment2=l._segment2},_setSegment:function(l){var h=l.getCurve();h?this._setCurve(h):(this._setPath(l._path),this._segment1=l,this._segment2=null),this._segment=l,this._time=l===this._segment1?0:1,this._point=l._point.clone()},getSegment:function(){var l=this._segment;if(!l){var h=this.getCurve(),g=this.getTime();g===0?l=h._segment1:g===1?l=h._segment2:g!=null&&(l=h.getPartLength(0,g)<h.getPartLength(g,1)?h._segment1:h._segment2),this._segment=l}return l},getCurve:function(){var l=this._path,h=this;l&&l._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function g(v){var x=v&&v.getCurve();if(x&&(h._time=x.getTimeOf(h._point))!=null)return h._setCurve(x),x}return this._curve||g(this._segment)||g(this._segment1)||g(this._segment2.getPrevious())},getPath:function(){var l=this.getCurve();return l&&l._path},getIndex:function(){var l=this.getCurve();return l&&l.getIndex()},getTime:function(){var l=this.getCurve(),h=this._time;return l&&h==null?this._time=l.getTimeOf(this._point):h},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var l=this._offset;if(l==null){l=0;var h=this.getPath(),g=this.getIndex();if(h&&g!=null)for(var v=h.getCurves(),x=0;x<g;x++)l+=v[x].getLength();this._offset=l+=this.getCurveOffset()}return l},getCurveOffset:function(){var l=this._curveOffset;if(l==null){var h=this.getCurve(),g=this.getTime();this._curveOffset=l=g!=null&&h&&h.getPartLength(0,g)}return l},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var l=this.getCurve(),h=l&&l.divideAtTime(this.getTime());return h&&this._setSegment(h._segment1),h},split:function(){var l=this.getCurve(),h=l._path,g=l&&l.splitAtTime(this.getTime());return g&&this._setSegment(h.getLastSegment()),g},equals:function(l,h){var g=this===l;if(!g&&l instanceof qe){var v=this.getCurve(),x=l.getCurve(),T=v._path,A=x._path;if(T===A){var O=Math.abs,j=1e-7,M=O(this.getOffset()-l.getOffset()),P=!h&&this._intersection,H=!h&&l._intersection;g=(M<j||T&&O(T.getLength()-M)<j)&&(!P&&!H||P&&H&&P.equals(H,!0))}}return g},toString:function(){var l=[],h=this.getPoint(),g=b.instance;h&&l.push("point: "+h);var v=this.getIndex();v!=null&&l.push("index: "+v);var x=this.getTime();return x!=null&&l.push("time: "+g.number(x)),this._distance!=null&&l.push("distance: "+g.number(this._distance)),"{ "+l.join(", ")+" }"},isTouching:function(){var l=this._intersection;if(l&&this.getTangent().isCollinear(l.getTangent())){var h=this.getCurve(),g=l.getCurve();return!(h.isStraight()&&g.isStraight()&&h.getLine().intersect(g.getLine()))}return!1},isCrossing:function(){var l=this._intersection;if(!l)return!1;var h=this.getTime(),g=l.getTime(),v=1e-8,x=1-v,T=h>=v&&h<=x,A=g>=v&&g<=x;if(T&&A)return!this.isTouching();var O=this.getCurve(),j=O&&h<v?O.getPrevious():O,M=l.getCurve(),P=M&&g<v?M.getPrevious():M;if(h>x&&(O=O.getNext()),g>x&&(M=M.getNext()),!j||!O||!P||!M)return!1;var H=[];function z(se,oe){var le=se.getValues(),ge=he.classify(le).roots||he.getPeaks(le),re=ge.length,ue=he.getLength(le,oe&&re?ge[re-1]:0,!oe&&re?ge[0]:1);H.push(re?ue:ue/32)}function R(se,oe,le){return oe<le?se>oe&&se<le:se>oe||se<le}T||(z(j,!0),z(O,!1)),A||(z(P,!0),z(M,!1));var K=this.getPoint(),Y=Math.min.apply(Math,H),Z=T?O.getTangentAtTime(h):O.getPointAt(Y).subtract(K),B=T?Z.negate():j.getPointAt(-Y).subtract(K),q=A?M.getTangentAtTime(g):M.getPointAt(Y).subtract(K),D=A?q.negate():P.getPointAt(-Y).subtract(K),X=B.getAngle(),Q=Z.getAngle(),J=D.getAngle(),W=q.getAngle();return!!(T?R(X,J,W)^R(Q,J,W)&&R(X,W,J)^R(Q,W,J):R(J,X,Q)^R(W,X,Q)&&R(J,Q,X)^R(W,Q,X))},hasOverlap:function(){return!!this._overlap}},a.each(he._evaluateMethods,function(l){var h=l+"At";this[l]=function(){var g=this.getCurve(),v=this.getTime();return v!=null&&g&&g[h](v,!0)}},{preserve:!0}),new function(){function l(h,g,v){var x=h.length,T=0,A=x-1;function O(K,Y){for(var Z=K+Y;Z>=-1&&Z<=x;Z+=Y){var B=h[(Z%x+x)%x];if(!g.getPoint().isClose(B.getPoint(),1e-7))break;if(g.equals(B))return B}return null}for(;T<=A;){var j=T+A>>>1,M=h[j],P;if(v&&(P=g.equals(M)?M:O(j,-1)||O(j,1)))return g._overlap&&(P._overlap=P._intersection._overlap=!0),P;var H=g.getPath(),z=M.getPath(),R=H!==z?H._id-z._id:g.getIndex()+g.getTime()-(M.getIndex()+M.getTime());R<0?A=j-1:T=j+1}return h.splice(T,0,g),g}return{statics:{insert:l,expand:function(h){for(var g=h.slice(),v=h.length-1;v>=0;v--)l(g,h[v]._intersection,!1);return g}}}}),it=I.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(l){var h,g,v;if(a.isPlainObject(l)?(g=l.segments,h=l.pathData):Array.isArray(l)?g=l:typeof l=="string"&&(h=l),g){var x=g[0];v=x&&Array.isArray(x[0])}else h&&(v=(h.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(h));var T=v?yt:rt;return new T(l)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(l){this.isClockwise()!=(l=!!l)&&this.reverse()},setPathData:function(l){var h=l&&l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),g,v=!1,x,T,A=new E,O=new E;function j(D,X){var Q=+g[D];return v&&(Q+=A[X]),Q}function M(D){return new E(j(D,"x"),j(D+1,"y"))}this.clear();for(var P=0,H=h&&h.length;P<H;P++){var z=h[P],R=z[0],K=R.toLowerCase();g=z.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Y=g&&g.length;switch(v=R===K,x==="z"&&!/[mz]/.test(K)&&this.moveTo(A),K){case"m":case"l":for(var Z=K==="m",B=0;B<Y;B+=2)this[Z?"moveTo":"lineTo"](A=M(B)),Z&&(O=A,Z=!1);T=A;break;case"h":case"v":var q=K==="h"?"x":"y";A=A.clone();for(var B=0;B<Y;B++)A[q]=j(B,q),this.lineTo(A);T=A;break;case"c":for(var B=0;B<Y;B+=6)this.cubicCurveTo(M(B),T=M(B+2),A=M(B+4));break;case"s":for(var B=0;B<Y;B+=4)this.cubicCurveTo(/[cs]/.test(x)?A.multiply(2).subtract(T):A,T=M(B),A=M(B+2)),x=K;break;case"q":for(var B=0;B<Y;B+=4)this.quadraticCurveTo(T=M(B),A=M(B+2));break;case"t":for(var B=0;B<Y;B+=2)this.quadraticCurveTo(T=/[qt]/.test(x)?A.multiply(2).subtract(T):A,A=M(B)),x=K;break;case"a":for(var B=0;B<Y;B+=7)this.arcTo(A=M(B+5),new L(+g[B],+g[B+1]),+g[B+2],+g[B+4],+g[B+3]);break;case"z":this.closePath(1e-12),A=O;break}x=K}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(l){var h=l.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(l):{};return h.onPath||!!(this.getFillRule()==="evenodd"?h.windingL&1||h.windingR&1:h.winding)},getIntersections:function(l,h,g,v){var x=this===l||!l,T=this._matrix._orNullIfIdentity(),A=x?T:(g||l._matrix)._orNullIfIdentity();return x||this.getBounds(T).intersects(l.getBounds(A),1e-12)?he.getIntersections(this.getCurves(),!x&&l.getCurves(),h,T,A,v):[]},getCrossings:function(l){return this.getIntersections(l,function(h){return h.isCrossing()})},getNearestLocation:function(){for(var l=E.read(arguments),h=this.getCurves(),g=1/0,v=null,x=0,T=h.length;x<T;x++){var A=h[x].getNearestLocation(l);A._distance<g&&(g=A._distance,v=A)}return v},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()},interpolate:function(l,h,g){var v=!this._children,x=v?"_segments":"_children",T=l[x],A=h[x],O=this[x];if(!T||!A||T.length!==A.length)throw new Error("Invalid operands in interpolate() call: "+l+", "+h);var j=O.length,M=A.length;if(j<M)for(var P=v?Ge:rt,H=j;H<M;H++)this.add(new P);else j>M&&this[v?"removeSegments":"removeChildren"](M,j);for(var H=0;H<M;H++)O[H].interpolate(T[H],A[H],g);v&&(this.setClosed(l._closed),this._changed(9))},compare:function(l){var h=!1;if(l){var g=this._children||[this],v=l._children?l._children.slice():[l],x=g.length,T=v.length,A=[],O=0;h=!0;for(var j=y.findItemBoundsCollisions(g,v,C.GEOMETRIC_EPSILON),M=x-1;M>=0&&h;M--){var P=g[M];h=!1;var H=j[M];if(H)for(var z=H.length-1;z>=0&&!h;z--)P.compare(v[H[z]])&&(A[H[z]]||(A[H[z]]=!0,O++),h=!0)}h=h&&O===T}return h}}),rt=it.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(h){this._closed=!1,this._segments=[],this._version=0;var g=arguments,v=Array.isArray(h)?typeof h[0]=="object"?h:g:h&&h.size===t&&(h.x!==t||h.point!==t)?g:null;v&&v.length>0?this.setSegments(v):(this._curves=t,this._segmentSelection=0,!v&&typeof h=="string"&&(this.setPathData(h),h=null)),this._initialize(!v&&h)},_equals:function(l){return this._closed===l._closed&&a.equals(this._segments,l._segments)},copyContent:function(l){this.setSegments(l._segments),this._closed=l._closed},_changed:function l(h){if(l.base.call(this,h),h&8){if(this._length=this._area=t,h&32)this._version++;else if(this._curves)for(var g=0,v=this._curves.length;g<v;g++)this._curves[g]._changed()}else h&64&&(this._bounds=t)},getStyle:function(){var l=this._parent;return(l instanceof yt?l:this)._style},getSegments:function(){return this._segments},setSegments:function(l){var h=this.isFullySelected(),g=l&&l.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,g){var v=l[g-1];typeof v=="boolean"&&(this.setClosed(v),g--),this._add(Ge.readList(l,0,{},g))}h&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var l=this._curves,h=this._segments;if(!l){var g=this._countCurves();l=this._curves=new Array(g);for(var v=0;v<g;v++)l[v]=new he(this,h[v],h[v+1]||h[0])}return l},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var l=this.getCurves();return l[l.length-1]},isClosed:function(){return this._closed},setClosed:function(l){if(this._closed!=(l=!!l)){if(this._closed=l,this._curves){var h=this._curves.length=this._countCurves();l&&(this._curves[h-1]=new he(this,this._segments[h-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(l,h){var g=this._segments,v=g.length,x=new b(h),T=new Array(6),A=!0,O,j,M,P,H,z,R,K,Y=[];function Z(q,D){if(q._transformCoordinates(l,T),O=T[0],j=T[1],A)Y.push("M"+x.pair(O,j)),A=!1;else if(H=T[2],z=T[3],H===O&&z===j&&R===M&&K===P){if(!D){var X=O-M,Q=j-P;Y.push(X===0?"v"+x.number(Q):Q===0?"h"+x.number(X):"l"+x.pair(X,Q))}}else Y.push("c"+x.pair(R-M,K-P)+" "+x.pair(H-M,z-P)+" "+x.pair(O-M,j-P));M=O,P=j,R=T[4],K=T[5]}if(!v)return"";for(var B=0;B<v;B++)Z(g[B]);return this._closed&&v>0&&(Z(g[0],!0),Y.push("z")),Y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(l){for(var h=this._segments,g=new Array(6),v=0,x=h.length;v<x;v++)h[v]._transformCoordinates(l,g,!0);return!0},_add:function(l,A){for(var g=this._segments,v=this._curves,x=l.length,T=A==null,A=T?g.length:A,O=0;O<x;O++){var j=l[O];j._path&&(j=l[O]=j.clone()),j._path=this,j._index=A+O,j._selection&&this._updateSelection(j,0,j._selection)}if(T)a.push(g,l);else{g.splice.apply(g,[A,0].concat(l));for(var O=A+x,M=g.length;O<M;O++)g[O]._index=O}if(v){var P=this._countCurves(),H=A>0&&A+x-1===P?A-1:A,z=H,R=Math.min(H+x,P);l._curves&&(v.splice.apply(v,[H,0].concat(l._curves)),z+=l._curves.length);for(var O=z;O<R;O++)v.splice(O,0,new he(this,null,null));this._adjustCurves(H,R)}return this._changed(41),l},_adjustCurves:function(l,h){for(var g=this._segments,v=this._curves,x,T=l;T<h;T++)x=v[T],x._path=this,x._segment1=g[T],x._segment2=g[T+1]||g[0],x._changed();(x=v[this._closed&&!l?g.length-1:l-1])&&(x._segment2=g[l]||g[0],x._changed()),(x=v[h])&&(x._segment1=g[h],x._changed())},_countCurves:function(){var l=this._segments.length;return!this._closed&&l>0?l-1:l},add:function(l){var h=arguments;return h.length>1&&typeof l!="number"?this._add(Ge.readList(h)):this._add([Ge.read(h)])[0]},insert:function(l,h){var g=arguments;return g.length>2&&typeof h!="number"?this._add(Ge.readList(g,1),l):this._add([Ge.read(g,1)],l)[0]},addSegment:function(){return this._add([Ge.read(arguments)])[0]},insertSegment:function(l){return this._add([Ge.read(arguments,1)],l)[0]},addSegments:function(l){return this._add(Ge.readList(l))},insertSegments:function(l,h){return this._add(Ge.readList(h),l)},removeSegment:function(l){return this.removeSegments(l,l+1)[0]||null},removeSegments:function(l,h,g){l=l||0,h=a.pick(h,this._segments.length);var v=this._segments,x=this._curves,T=v.length,A=v.splice(l,h-l),O=A.length;if(!O)return A;for(var j=0;j<O;j++){var M=A[j];M._selection&&this._updateSelection(M,M._selection,0),M._index=M._path=null}for(var j=l,P=v.length;j<P;j++)v[j]._index=j;if(x){for(var H=l>0&&h===T+(this._closed?1:0)?l-1:l,x=x.splice(H,O),j=x.length-1;j>=0;j--)x[j]._path=null;g&&(A._curves=x.slice(1)),this._adjustCurves(H,H)}return this._changed(41),A},clear:"#removeSegments",hasHandles:function(){for(var l=this._segments,h=0,g=l.length;h<g;h++)if(l[h].hasHandles())return!0;return!1},clearHandles:function(){for(var l=this._segments,h=0,g=l.length;h<g;h++)l[h].clearHandles()},getLength:function(){if(this._length==null){for(var l=this.getCurves(),h=0,g=0,v=l.length;g<v;g++)h+=l[g].getLength();this._length=h}return this._length},getArea:function(){var l=this._area;if(l==null){var h=this._segments,g=this._closed;l=0;for(var v=0,x=h.length;v<x;v++){var T=v+1===x;l+=he.getArea(he.getValues(h[v],h[T?0:v+1],null,T&&!g))}this._area=l}return l},isFullySelected:function(){var l=this._segments.length;return this.isSelected()&&l>0&&this._segmentSelection===l*7},setFullySelected:function(l){l&&this._selectSegments(!0),this.setSelected(l)},setSelection:function l(h){h&1||this._selectSegments(!1),l.base.call(this,h)},_selectSegments:function(l){var h=this._segments,g=h.length,v=l?7:0;this._segmentSelection=v*g;for(var x=0;x<g;x++)h[x]._selection=v},_updateSelection:function(l,h,g){l._selection=g;var v=this._segmentSelection+=g-h;v>0&&this.setSelected(!0)},divideAt:function(l){var h=this.getLocationAt(l),g;return h&&(g=h.getCurve().divideAt(h.getCurveOffset()))?g._segment1:null},splitAt:function(l){var h=this.getLocationAt(l),g=h&&h.index,v=h&&h.time,x=1e-8,T=1-x;v>T&&(g++,v=0);var A=this.getCurves();if(g>=0&&g<A.length){v>=x&&A[g++].divideAtTime(v);var O=this.removeSegments(g,this._segments.length,!0),j;return this._closed?(this.setClosed(!1),j=this):(j=new rt(I.NO_INSERT),j.insertAbove(this),j.copyAttributes(this)),j._add(O,0),this.addSegment(O[0]),j}return null},split:function(l,h){var g,v=h===t?l:(g=this.getCurves()[l])&&g.getLocationAtTime(h);return v!=null?this.splitAt(v):null},join:function(l,h){var g=h||0;if(l&&l!==this){var v=l._segments,x=this.getLastSegment(),T=l.getLastSegment();if(!T)return this;x&&x._point.isClose(T._point,g)&&l.reverse();var A=l.getFirstSegment();if(x&&x._point.isClose(A._point,g))x.setHandleOut(A._handleOut),this._add(v.slice(1));else{var O=this.getFirstSegment();O&&O._point.isClose(A._point,g)&&l.reverse(),T=l.getLastSegment(),O&&O._point.isClose(T._point,g)?(O.setHandleIn(T._handleIn),this._add(v.slice(0,v.length-1),0)):this._add(v.slice())}l._closed&&this._add([v[0]]),l.remove()}var j=this.getFirstSegment(),M=this.getLastSegment();return j!==M&&j._point.isClose(M._point,g)&&(j.setHandleIn(M._handleIn),M.remove(),this.setClosed(!0)),this},reduce:function(l){for(var h=this.getCurves(),g=l&&l.simplify,v=g?1e-7:0,x=h.length-1;x>=0;x--){var T=h[x];!T.hasHandles()&&(!T.hasLength(v)||g&&T.isCollinear(T.getNext()))&&T.remove()}return this},reverse:function(){this._segments.reverse();for(var l=0,h=this._segments.length;l<h;l++){var g=this._segments[l],v=g._handleIn;g._handleIn=g._handleOut,g._handleOut=v,g._index=l}this._curves=null,this._changed(9)},flatten:function(l){for(var h=new _e(this,l||.25,256,!0),g=h.parts,v=g.length,x=[],T=0;T<v;T++)x.push(new Ge(g[T].curve.slice(0,2)));!this._closed&&v>0&&x.push(new Ge(g[v-1].curve.slice(6))),this.setSegments(x)},simplify:function(l){var h=new Ve(this).fit(l||2.5);return h&&this.setSegments(h),!!h},smooth:function(l){var h=this,g=l||{},v=g.type||"asymmetric",x=this._segments,T=x.length,A=this._closed;function O(st,mt){var pt=st&&st.index;if(pt!=null){var xt=st.path;if(xt&&xt!==h)throw new Error(st._class+" "+pt+" of "+xt+" is not part of "+h);mt&&st instanceof he&&pt++}else pt=typeof st=="number"?st:mt;return Math.min(pt<0&&A?pt%T:pt<0?pt+T:pt,T-1)}var j=A&&g.from===t&&g.to===t,M=O(g.from,0),P=O(g.to,T-1);if(M>P)if(A)M-=T;else{var H=M;M=P,P=H}if(/^(?:asymmetric|continuous)$/.test(v)){var z=v==="asymmetric",R=Math.min,K=P-M+1,Y=K-1,Z=j?R(K,4):1,B=Z,q=Z,D=[];if(A||(B=R(1,M),q=R(1,T-P-1)),Y+=B+q,Y<=1)return;for(var X=0,Q=M-B;X<=Y;X++,Q++)D[X]=x[(Q<0?Q+T:Q)%T]._point;for(var J=D[0]._x+2*D[1]._x,W=D[0]._y+2*D[1]._y,se=2,oe=Y-1,le=[J],ge=[W],re=[se],ue=[],me=[],X=1;X<Y;X++){var Ce=X<oe,we=Ce||z?1:2,Ae=Ce?4:z?2:7,ze=Ce?4:z?3:8,We=Ce?2:z?0:1,Je=we/se;se=re[X]=Ae-Je,J=le[X]=ze*D[X]._x+We*D[X+1]._x-Je*J,W=ge[X]=ze*D[X]._y+We*D[X+1]._y-Je*W}ue[oe]=le[oe]/re[oe],me[oe]=ge[oe]/re[oe];for(var X=Y-2;X>=0;X--)ue[X]=(le[X]-ue[X+1])/re[X],me[X]=(ge[X]-me[X+1])/re[X];ue[Y]=(3*D[Y]._x-ue[oe])/2,me[Y]=(3*D[Y]._y-me[oe])/2;for(var X=B,lt=Y-q,Q=M;X<=lt;X++,Q++){var Pe=x[Q<0?Q+T:Q],Ie=Pe._point,Qe=ue[X]-Ie._x,at=me[X]-Ie._y;(j||X<lt)&&Pe.setHandleOut(Qe,at),(j||X>B)&&Pe.setHandleIn(-Qe,-at)}}else for(var X=M;X<=P;X++)x[X<0?X+T:X].smooth(g,!j&&X===M,!j&&X===P)},toShape:function(l){if(!this._closed)return null;var h=this._segments,g,v,x,T;function A(z,R){var K=h[z],Y=K.getNext(),Z=h[R],B=Z.getNext();return K._handleOut.isZero()&&Y._handleIn.isZero()&&Z._handleOut.isZero()&&B._handleIn.isZero()&&Y._point.subtract(K._point).isCollinear(B._point.subtract(Z._point))}function O(z){var R=h[z],K=R.getPrevious(),Y=R.getNext();return K._handleOut.isZero()&&R._handleIn.isZero()&&R._handleOut.isZero()&&Y._handleIn.isZero()&&R._point.subtract(K._point).isOrthogonal(Y._point.subtract(R._point))}function j(z){var R=h[z],K=R.getNext(),Y=R._handleOut,Z=K._handleIn,B=.5522847498307936;if(Y.isOrthogonal(Z)){var q=R._point,D=K._point,X=new de(q,Y,!0).intersect(new de(D,Z,!0),!0);return X&&C.isZero(Y.getLength()/X.subtract(q).getLength()-B)&&C.isZero(Z.getLength()/X.subtract(D).getLength()-B)}return!1}function M(z,R){return h[z]._point.getDistance(h[R]._point)}if(!this.hasHandles()&&h.length===4&&A(0,2)&&A(1,3)&&O(1)?(g=Be.Rectangle,v=new L(M(0,3),M(0,1)),T=h[1]._point.add(h[2]._point).divide(2)):h.length===8&&j(0)&&j(2)&&j(4)&&j(6)&&A(1,5)&&A(3,7)?(g=Be.Rectangle,v=new L(M(1,6),M(0,3)),x=v.subtract(new L(M(0,7),M(1,2))).divide(2),T=h[3]._point.add(h[4]._point).divide(2)):h.length===4&&j(0)&&j(1)&&j(2)&&j(3)&&(C.isZero(M(0,2)-M(1,3))?(g=Be.Circle,x=M(0,2)/2):(g=Be.Ellipse,x=new L(M(2,0)/2,M(3,1)/2)),T=h[1]._point),g){var P=this.getPosition(!0),H=new g({center:P,size:v,radius:x,insert:!1});return H.copyAttributes(this,!0),H._matrix.prepend(this._matrix),H.rotate(T.subtract(P).getAngle()+90),(l===t||l)&&H.insertAbove(this),H}return null},toPath:"#clone",compare:function l(h){if(!h||h instanceof yt)return l.base.call(this,h);var g=this.getCurves(),v=h.getCurves(),x=g.length,T=v.length;if(!x||!T)return x==T;for(var A=g[0].getValues(),O=[],j=0,M,P=0,H,z=0;z<T;z++){var Z=v[z].getValues();O.push(Z);var R=he.getOverlaps(A,Z);if(R){M=!z&&R[0][0]>0?T-1:z,H=R[0][1];break}}for(var K=Math.abs,Y=1e-8,Z=O[M],B;A&&Z;){var R=he.getOverlaps(A,Z);if(R){var q=R[0][0];if(K(q-P)<Y){P=R[1][0],P===1&&(A=++j<x?g[j].getValues():null,P=0);var D=R[0][1];if(K(D-H)<Y){if(B||(B=[M,D]),H=R[1][1],H===1&&(++M>=T&&(M=0),Z=O[M]||v[M].getValues(),H=0),!A)return B[0]===M&&B[1]===H;continue}}}break}return!1},_hitTestSelf:function(l,h,g,v){var x=this,T=this.getStyle(),A=this._segments,O=A.length,j=this._closed,M=h._tolerancePadding,P=M,H,z,R,K,Y,Z,B=h.stroke&&T.hasStroke(),q=h.fill&&T.hasFill(),D=h.curves,X=B?T.getStrokeWidth()/2:q&&h.tolerance>0||D?0:null;X!==null&&(X>0?(H=T.getStrokeJoin(),z=T.getStrokeCap(),R=T.getMiterLimit(),P=P.add(rt._getStrokePadding(X,v))):H=z="round");function Q(ue,me){return l.subtract(ue).divide(me).length<=1}function J(ue,me,Ce){if(!h.selected||me.isSelected()){var we=ue._point;if(me!==we&&(me=me.add(we)),Q(me,P))return new ft(Ce,x,{segment:ue,point:me})}}function W(ue,me){return(me||h.segments)&&J(ue,ue._point,"segment")||!me&&h.handles&&(J(ue,ue._handleIn,"handle-in")||J(ue,ue._handleOut,"handle-out"))}function se(ue){K.add(ue)}function oe(ue){var me=j||ue._index>0&&ue._index<O-1;if((me?H:z)==="round")return Q(ue._point,P);if(K=new rt({internal:!0,closed:!0}),me?ue.isSmooth()||rt._addBevelJoin(ue,H,X,R,null,v,se,!0):z==="square"&&rt._addSquareCap(ue,z,X,null,v,se,!0),!K.isEmpty()){var Ce;return K.contains(l)||(Ce=K.getNearestLocation(l))&&Q(Ce.getPoint(),M)}}if(h.ends&&!h.segments&&!j){if(Z=W(A[0],!0)||W(A[O-1],!0))return Z}else if(h.segments||h.handles){for(var le=0;le<O;le++)if(Z=W(A[le]))return Z}if(X!==null){if(Y=this.getNearestLocation(l),Y){var ge=Y.getTime();ge===0||ge===1&&O>1?oe(Y.getSegment())||(Y=null):Q(Y.getPoint(),P)||(Y=null)}if(!Y&&H==="miter"&&O>1)for(var le=0;le<O;le++){var re=A[le];if(l.getDistance(re._point)<=R*X&&oe(re)){Y=re.getLocation();break}}}return!Y&&q&&this._contains(l)||Y&&!B&&!D?new ft("fill",this):Y?new ft(B?"stroke":"curve",this,{location:Y,point:Y.getPoint()}):null}},a.each(he._evaluateMethods,function(l){this[l+"At"]=function(h){var g=this.getLocationAt(h);return g&&g[l]()}},{beans:!1,getLocationOf:function(){for(var l=E.read(arguments),h=this.getCurves(),g=0,v=h.length;g<v;g++){var x=h[g].getLocationOf(l);if(x)return x}return null},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getLocationAt:function(l){if(typeof l=="number"){for(var h=this.getCurves(),g=0,v=0,x=h.length;v<x;v++){var T=g,A=h[v];if(g+=A.getLength(),g>l)return A.getLocationAt(l-T)}if(h.length>0&&l<=this.getLength())return new qe(h[h.length-1],1)}else if(l&&l.getPath&&l.getPath()===this)return l;return null},getOffsetsWithTangent:function(){var l=E.read(arguments);if(l.isZero())return[];for(var h=[],g=0,v=this.getCurves(),x=0,T=v.length;x<T;x++){for(var A=v[x],O=A.getTimesWithTangent(l),j=0,M=O.length;j<M;j++){var P=g+A.getOffsetAtTime(O[j]);h.indexOf(P)<0&&h.push(P)}g+=A.length}return h}}),new function(){function l(g,v,x,T){if(T<=0)return;var A=T/2,O=T-2,j=A-1,M=new Array(6),P,H;function z(q){var D=M[q],X=M[q+1];(P!=D||H!=X)&&(g.beginPath(),g.moveTo(P,H),g.lineTo(D,X),g.stroke(),g.beginPath(),g.arc(D,X,A,0,Math.PI*2,!0),g.fill())}for(var R=0,K=v.length;R<K;R++){var Y=v[R],Z=Y._selection;if(Y._transformCoordinates(x,M),P=M[0],H=M[1],Z&2&&z(2),Z&4&&z(4),g.fillRect(P-A,H-A,T,T),O>0&&!(Z&1)){var B=g.fillStyle;g.fillStyle="#ffffff",g.fillRect(P-j,H-j,O,O),g.fillStyle=B}}}function h(g,v,x){var T=v._segments,A=T.length,O=new Array(6),j=!0,M,P,H,z,R,K,Y,Z;function B(D){if(x)D._transformCoordinates(x,O),M=O[0],P=O[1];else{var X=D._point;M=X._x,P=X._y}if(j)g.moveTo(M,P),j=!1;else{if(x)R=O[2],K=O[3];else{var Q=D._handleIn;R=M+Q._x,K=P+Q._y}R===M&&K===P&&Y===H&&Z===z?g.lineTo(M,P):g.bezierCurveTo(Y,Z,R,K,M,P)}if(H=M,z=P,x)Y=O[4],Z=O[5];else{var Q=D._handleOut;Y=H+Q._x,Z=z+Q._y}}for(var q=0;q<A;q++)B(T[q]);v._closed&&A>0&&B(T[0])}return{_draw:function(g,v,x,T){var A=v.dontStart,O=v.dontFinish||v.clip,j=this.getStyle(),M=j.hasFill(),P=j.hasStroke(),H=j.getDashArray(),z=!Nt.support.nativeDash&&P&&H&&H.length;A||g.beginPath(),(M||P&&!z||O)&&(h(g,this,T),this._closed&&g.closePath());function R(D){return H[(D%z+z)%z]}if(!O&&(M||P)&&(this._setStyles(g,v,x),M&&(g.fill(j.getFillRule()),g.shadowColor="rgba(0,0,0,0)"),P)){if(z){A||g.beginPath();for(var K=new _e(this,.25,32,!1,T),Y=K.length,Z=-j.getDashOffset(),B,q=0;Z>0;)Z-=R(q--)+R(q--);for(;Z<Y;)B=Z+R(q++),(Z>0||B>0)&&K.drawPart(g,Math.max(Z,0),Math.max(B,0)),Z=B+R(q++)}g.stroke()}},_drawSelected:function(g,v){g.beginPath(),h(g,this,v),g.stroke(),l(g,this._segments,v,Nt.settings.handleSize)}}},new function(){function l(h){var g=h._segments;if(!g.length)throw new Error("Use a moveTo() command first");return g[g.length-1]}return{moveTo:function(){var h=this._segments;h.length===1&&this.removeSegment(0),h.length||this._add([new Ge(E.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ge(E.read(arguments))])},cubicCurveTo:function(){var h=arguments,g=E.read(h),v=E.read(h),x=E.read(h),T=l(this);T.setHandleOut(g.subtract(T._point)),this._add([new Ge(x,v.subtract(x))])},quadraticCurveTo:function(){var h=arguments,g=E.read(h),v=E.read(h),x=l(this)._point;this.cubicCurveTo(g.add(x.subtract(g).multiply(1/3)),g.add(v.subtract(g).multiply(1/3)),v)},curveTo:function(){var h=arguments,g=E.read(h),v=E.read(h),x=a.pick(a.read(h),.5),T=1-x,A=l(this)._point,O=g.subtract(A.multiply(T*T)).subtract(v.multiply(x*x)).divide(2*x*T);if(O.isNaN())throw new Error("Cannot put a curve through points with parameter = "+x);this.quadraticCurveTo(O,v)},arcTo:function(){var h=arguments,g=Math.abs,v=Math.sqrt,x=l(this),T=x._point,A=E.read(h),O,j=a.peek(h),M=a.pick(j,!0),P,H,z,R;if(typeof M=="boolean")var K=T.add(A).divide(2),O=K.add(K.subtract(T).rotate(M?-90:90));else if(a.remain(h)<=2)O=A,A=E.read(h);else if(!T.equals(A)){var Y=L.read(h),Z=C.isZero;if(Z(Y.width)||Z(Y.height))return this.lineTo(A);var B=a.read(h),M=!!a.read(h),q=!!a.read(h),K=T.add(A).divide(2),D=T.subtract(K).rotate(-B),X=D.x,Q=D.y,J=g(Y.width),W=g(Y.height),se=J*J,oe=W*W,le=X*X,ge=Q*Q,re=v(le/se+ge/oe);if(re>1&&(J*=re,W*=re,se=J*J,oe=W*W),re=(se*oe-se*ge-oe*le)/(se*ge+oe*le),g(re)<1e-12&&(re=0),re<0)throw new Error("Cannot create an arc with the given arguments");P=new E(J*Q/W,-W*X/J).multiply((q===M?-1:1)*v(re)).rotate(B).add(K),R=new ne().translate(P).rotate(B).scale(J,W),z=R._inverseTransform(T),H=z.getDirectedAngle(R._inverseTransform(A)),!M&&H>0?H-=360:M&&H<0&&(H+=360)}if(O){var ue=new de(T.add(O).divide(2),O.subtract(T).rotate(90),!0),me=new de(O.add(A).divide(2),A.subtract(O).rotate(90),!0),Ce=new de(T,A),we=Ce.getSide(O);if(P=ue.intersect(me,!0),!P){if(!we)return this.lineTo(A);throw new Error("Cannot create an arc with the given arguments")}z=T.subtract(P),H=z.getDirectedAngle(A.subtract(P));var Ae=Ce.getSide(P,!0);Ae===0?H=we*g(H):we===Ae&&(H+=H<0?360:-360)}if(H){for(var ze=1e-5,We=g(H),Je=We>=360?4:Math.ceil((We-ze)/90),lt=H/Je,Pe=lt*Math.PI/360,Ie=4/3*Math.sin(Pe)/(1+Math.cos(Pe)),Qe=[],at=0;at<=Je;at++){var D=A,st=null;if(at<Je&&(st=z.rotate(90).multiply(Ie),R?(D=R._transformPoint(z),st=R._transformPoint(z.add(st)).subtract(D)):D=P.add(z)),!at)x.setHandleOut(st);else{var mt=z.rotate(-90).multiply(Ie);R&&(mt=R._transformPoint(z.add(mt)).subtract(D)),Qe.push(new Ge(D,mt,st))}z=z.rotate(lt)}this._add(Qe)}},lineBy:function(){var h=E.read(arguments),g=l(this)._point;this.lineTo(g.add(h))},curveBy:function(){var h=arguments,g=E.read(h),v=E.read(h),x=a.read(h),T=l(this)._point;this.curveTo(T.add(g),T.add(v),x)},cubicCurveBy:function(){var h=arguments,g=E.read(h),v=E.read(h),x=E.read(h),T=l(this)._point;this.cubicCurveTo(T.add(g),T.add(v),T.add(x))},quadraticCurveBy:function(){var h=arguments,g=E.read(h),v=E.read(h),x=l(this)._point;this.quadraticCurveTo(x.add(g),x.add(v))},arcBy:function(){var h=arguments,g=l(this)._point,v=g.add(E.read(h)),x=a.pick(a.peek(h),!0);typeof x=="boolean"?this.arcTo(v,x):this.arcTo(v,g.add(E.read(h)))},closePath:function(h){this.setClosed(!0),this.join(this,h)}}},{_getBounds:function(l,h){var g=h.handle?"getHandleBounds":h.stroke?"getStrokeBounds":"getBounds";return rt[g](this._segments,this._closed,this,l,h)},statics:{getBounds:function(l,h,g,v,x,T){var A=l[0];if(!A)return new G;var O=new Array(6),j=A._transformCoordinates(v,new Array(6)),M=j.slice(0,2),P=M.slice(),H=new Array(2);function z(Y){Y._transformCoordinates(v,O);for(var Z=0;Z<2;Z++)he._addBounds(j[Z],j[Z+4],O[Z+2],O[Z],Z,T?T[Z]:0,M,P,H);var B=j;j=O,O=B}for(var R=1,K=l.length;R<K;R++)z(l[R]);return h&&z(A),new G(M[0],M[1],P[0]-M[0],P[1]-M[1])},getStrokeBounds:function(l,h,g,v,x){var T=g.getStyle(),A=T.hasStroke(),O=T.getStrokeWidth(),j=A&&g._getStrokeMatrix(v,x),M=A&&rt._getStrokePadding(O,j),P=rt.getBounds(l,h,g,v,x,M);if(!A)return P;var H=O/2,z=T.getStrokeJoin(),R=T.getStrokeCap(),K=T.getMiterLimit(),Y=new G(new L(M));function Z(J){P=P.include(J)}function B(J){P=P.unite(Y.setCenter(J._point.transform(v)))}function q(J,W){W==="round"||J.isSmooth()?B(J):rt._addBevelJoin(J,W,H,K,v,j,Z)}function D(J,W){W==="round"?B(J):rt._addSquareCap(J,W,H,v,j,Z)}var X=l.length-(h?0:1);if(X>0){for(var Q=1;Q<X;Q++)q(l[Q],z);h?q(l[0],z):(D(l[0],R),D(l[l.length-1],R))}return P},_getStrokePadding:function(l,h){if(!h)return[l,l];var g=new E(l,0).transform(h),v=new E(0,l).transform(h),x=g.getAngleInRadians(),T=g.getLength(),A=v.getLength(),O=Math.sin(x),j=Math.cos(x),M=Math.tan(x),P=Math.atan2(A*M,T),H=Math.atan2(A,M*T);return[Math.abs(T*Math.cos(P)*j+A*Math.sin(P)*O),Math.abs(A*Math.sin(H)*j+T*Math.cos(H)*O)]},_addBevelJoin:function(l,h,g,v,x,T,A,O){var j=l.getCurve(),M=j.getPrevious(),P=j.getPoint1().transform(x),H=M.getNormalAtTime(1).multiply(g).transform(T),z=j.getNormalAtTime(0).multiply(g).transform(T),R=H.getDirectedAngle(z);if((R<0||R>=180)&&(H=H.negate(),z=z.negate()),O&&A(P),A(P.add(H)),h==="miter"){var K=new de(P.add(H),new E(-H.y,H.x),!0).intersect(new de(P.add(z),new E(-z.y,z.x),!0),!0);K&&P.getDistance(K)<=v*g&&A(K)}A(P.add(z))},_addSquareCap:function(l,h,g,v,x,T,A){var O=l._point.transform(v),j=l.getLocation(),M=j.getNormal().multiply(j.getTime()===0?g:-g).transform(x);h==="square"&&(A&&(T(O.subtract(M)),T(O.add(M))),O=O.add(M.rotate(-90))),T(O.add(M)),T(O.subtract(M))},getHandleBounds:function(l,h,g,v,x){var T=g.getStyle(),A=x.stroke&&T.hasStroke(),O,j;if(A){var M=g._getStrokeMatrix(v,x),P=T.getStrokeWidth()/2,H=P;T.getStrokeJoin()==="miter"&&(H=P*T.getMiterLimit()),T.getStrokeCap()==="square"&&(H=Math.max(H,P*Math.SQRT2)),O=rt._getStrokePadding(P,M),j=rt._getStrokePadding(H,M)}for(var z=new Array(6),R=1/0,K=-R,Y=R,Z=K,B=0,q=l.length;B<q;B++){var D=l[B];D._transformCoordinates(v,z);for(var X=0;X<6;X+=2){var Q=X?O:j,J=Q?Q[0]:0,W=Q?Q[1]:0,se=z[X],oe=z[X+1],le=se-J,ge=se+J,re=oe-W,ue=oe+W;le<R&&(R=le),ge>K&&(K=ge),re<Y&&(Y=re),ue>Z&&(Z=ue)}}return new G(R,Y,K-R,Z-Y)}}});rt.inject({statics:new function(){var l=.5522847498307936,h=[new Ge([-1,0],[0,l],[0,-l]),new Ge([0,-1],[-l,0],[l,0]),new Ge([1,0],[0,-l],[0,l]),new Ge([0,1],[l,0],[-l,0])];function g(x,T,A){var O=a.getNamed(A),j=new rt(O&&(O.insert==!0?I.INSERT:O.insert==!1?I.NO_INSERT:null));return j._add(x),j._closed=T,j.set(O,I.INSERT)}function v(x,T,A){for(var O=new Array(4),j=0;j<4;j++){var M=h[j];O[j]=new Ge(M._point.multiply(T).add(x),M._handleIn.multiply(T),M._handleOut.multiply(T))}return g(O,!0,A)}return{Line:function(){var x=arguments;return g([new Ge(E.readNamed(x,"from")),new Ge(E.readNamed(x,"to"))],!1,x)},Circle:function(){var x=arguments,T=E.readNamed(x,"center"),A=a.readNamed(x,"radius");return v(T,new L(A),x)},Rectangle:function(){var x=arguments,T=G.readNamed(x,"rectangle"),A=L.readNamed(x,"radius",0,{readNull:!0}),O=T.getBottomLeft(!0),j=T.getTopLeft(!0),M=T.getTopRight(!0),P=T.getBottomRight(!0),H;if(!A||A.isZero())H=[new Ge(O),new Ge(j),new Ge(M),new Ge(P)];else{A=L.min(A,T.getSize(!0).divide(2));var z=A.width,R=A.height,K=z*l,Y=R*l;H=[new Ge(O.add(z,0),null,[-K,0]),new Ge(O.subtract(0,R),[0,Y]),new Ge(j.add(0,R),null,[0,-Y]),new Ge(j.add(z,0),[-K,0],null),new Ge(M.subtract(z,0),null,[K,0]),new Ge(M.add(0,R),[0,-Y],null),new Ge(P.subtract(0,R),null,[0,Y]),new Ge(P.subtract(z,0),[K,0])]}return g(H,!0,x)},RoundRectangle:"#Rectangle",Ellipse:function(){var x=arguments,T=Be._readEllipse(x);return v(T.center,T.radius,x)},Oval:"#Ellipse",Arc:function(){var x=arguments,T=E.readNamed(x,"from"),A=E.readNamed(x,"through"),O=E.readNamed(x,"to"),j=a.getNamed(x),M=new rt(j&&j.insert==!1&&I.NO_INSERT);return M.moveTo(T),M.arcTo(A,O),M.set(j)},RegularPolygon:function(){for(var x=arguments,T=E.readNamed(x,"center"),A=a.readNamed(x,"sides"),O=a.readNamed(x,"radius"),j=360/A,M=A%3===0,P=new E(0,M?-O:O),H=M?-1:.5,z=new Array(A),R=0;R<A;R++)z[R]=new Ge(T.add(P.rotate((R+H)*j)));return g(z,!0,x)},Star:function(){for(var x=arguments,T=E.readNamed(x,"center"),A=a.readNamed(x,"points")*2,O=a.readNamed(x,"radius1"),j=a.readNamed(x,"radius2"),M=360/A,P=new E(0,-1),H=new Array(A),z=0;z<A;z++)H[z]=new Ge(T.add(P.rotate(M*z).multiply(z%2?j:O)));return g(H,!0,x)}}}});var yt=it.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||(typeof h=="string"?this.setPathData(h):this.addChildren(Array.isArray(h)?h:arguments))},insertChildren:function l(h,g){var v=g,x=v[0];x&&typeof x[0]=="number"&&(v=[v]);for(var T=g.length-1;T>=0;T--){var A=v[T];v===g&&!(A instanceof rt)&&(v=a.slice(v)),Array.isArray(A)?v[T]=new rt({segments:A,insert:!1}):A instanceof yt&&(v.splice.apply(v,[T,1].concat(A.removeChildren())),A.remove())}return l.base.call(this,h,v)},reduce:function l(h){for(var g=this._children,v=g.length-1;v>=0;v--){var x=g[v].reduce(h);x.isEmpty()&&x.remove()}if(!g.length){var x=new rt(I.NO_INSERT);return x.copyAttributes(this),x.insertAbove(this),this.remove(),x}return l.base.call(this)},isClosed:function(){for(var l=this._children,h=0,g=l.length;h<g;h++)if(!l[h]._closed)return!1;return!0},setClosed:function(l){for(var h=this._children,g=0,v=h.length;g<v;g++)h[g].setClosed(l)},getFirstSegment:function(){var l=this.getFirstChild();return l&&l.getFirstSegment()},getLastSegment:function(){var l=this.getLastChild();return l&&l.getLastSegment()},getCurves:function(){for(var l=this._children,h=[],g=0,v=l.length;g<v;g++)a.push(h,l[g].getCurves());return h},getFirstCurve:function(){var l=this.getFirstChild();return l&&l.getFirstCurve()},getLastCurve:function(){var l=this.getLastChild();return l&&l.getLastCurve()},getArea:function(){for(var l=this._children,h=0,g=0,v=l.length;g<v;g++)h+=l[g].getArea();return h},getLength:function(){for(var l=this._children,h=0,g=0,v=l.length;g<v;g++)h+=l[g].getLength();return h},getPathData:function(l,h){for(var g=this._children,v=[],x=0,T=g.length;x<T;x++){var A=g[x],O=A._matrix;v.push(A.getPathData(l&&!O.isIdentity()?l.appended(O):l,h))}return v.join("")},_hitTestChildren:function l(h,g,v){return l.base.call(this,h,g.class===rt||g.type==="path"?g:a.set({},g,{fill:!1}),v)},_draw:function(l,h,g,v){var x=this._children;if(x.length){h=h.extend({dontStart:!0,dontFinish:!0}),l.beginPath();for(var T=0,A=x.length;T<A;T++)x[T].draw(l,h,v);if(!h.clip){this._setStyles(l,h,g);var O=this._style;O.hasFill()&&(l.fill(O.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),O.hasStroke()&&l.stroke()}}},_drawSelected:function(l,h,g){for(var v=this._children,x=0,T=v.length;x<T;x++){var A=v[x],O=A._matrix;g[A._id]||A._drawSelected(l,O.isIdentity()?h:h.appended(O))}}},new function(){function l(h,g){var v=h._children;if(g&&!v.length)throw new Error("Use a moveTo() command first");return v[v.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(h){this[h]=function(){var g=l(this,!0);g[h].apply(g,arguments)}},{moveTo:function(){var h=l(this),g=h&&h.isEmpty()?h:new rt(I.NO_INSERT);g!==h&&this.addChild(g),g.moveTo.apply(g,arguments)},moveBy:function(){var h=l(this,!0),g=h&&h.getLastSegment(),v=E.read(arguments);this.moveTo(g?v.add(g._point):v)},closePath:function(h){l(this,!0).closePath(h)}})},a.each(["reverse","flatten","simplify","smooth"],function(l){this[l]=function(h){for(var g=this._children,v,x=0,T=g.length;x<T;x++)v=g[x][l](h)||v;return v}},{}));it.inject(new function(){var l=Math.min,h=Math.max,g=Math.abs,v={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function x(B){return B._children||[B]}function T(B,q){var D=B.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(q){for(var X=x(D),Q=0,J=X.length;Q<J;Q++){var B=X[Q];!B._closed&&!B.isEmpty()&&(B.closePath(1e-12),B.getFirstSegment().setHandleIn(0,0),B.getLastSegment().setHandleOut(0,0))}D=D.resolveCrossings().reorient(D.getFillRule()==="nonzero",!0)}return D}function A(B,q,D,X,Q){var J=new yt(I.NO_INSERT);return J.addChildren(B,!0),J=J.reduce({simplify:q}),Q&&Q.insert==!1||J.insertAbove(X&&D.isSibling(X)&&D.getIndex()<X.getIndex()?X:D),J.copyAttributes(D,!0),J}function O(B){return B.hasOverlap()||B.isCrossing()}function j(B,q,D,X){if(X&&(X.trace==!1||X.stroke)&&/^(subtract|intersect)$/.test(D))return M(B,q,D);var Q=T(B,!0),J=q&&B!==q&&T(q,!0),W=v[D];W[D]=!0,J&&(W.subtract||W.exclude)^(J.isClockwise()^Q.isClockwise())&&J.reverse();var se=R(qe.expand(Q.getIntersections(J,O))),oe=x(Q),le=J&&x(J),ge=[],re=[],ue;function me(st){for(var mt=0,pt=st.length;mt<pt;mt++){var xt=st[mt];a.push(ge,xt._segments),a.push(re,xt.getCurves()),xt._overlapsOnly=!0}}function Ce(st){for(var mt=[],pt=0,xt=st&&st.length;pt<xt;pt++)mt.push(re[st[pt]]);return mt}if(se.length){me(oe),le&&me(le);for(var we=new Array(re.length),Ae=0,ze=re.length;Ae<ze;Ae++)we[Ae]=re[Ae].getValues();for(var We=y.findCurveBoundsCollisions(we,we,0,!0),Je={},Ae=0;Ae<re.length;Ae++){var lt=re[Ae],Pe=lt._path._id,Ie=Je[Pe]=Je[Pe]||{};Ie[lt.getIndex()]={hor:Ce(We[Ae].hor),ver:Ce(We[Ae].ver)}}for(var Ae=0,ze=se.length;Ae<ze;Ae++)Y(se[Ae]._segment,Q,J,Je,W);for(var Ae=0,ze=ge.length;Ae<ze;Ae++){var Qe=ge[Ae],at=Qe._intersection;Qe._winding||Y(Qe,Q,J,Je,W),at&&at._overlap||(Qe._path._overlapsOnly=!1)}ue=Z(ge,W)}else ue=z(le?oe.concat(le):oe.slice(),function(st){return!!W[st]});return A(ue,!0,B,q,X)}function M(B,q,D){var X=T(B),Q=T(q),J=X.getIntersections(Q,O),W=D==="subtract",se=D==="divide",oe={},le=[];function ge(me){if(!oe[me._id]&&(se||Q.contains(me.getPointAt(me.getLength()/2))^W))return le.unshift(me),oe[me._id]=!0}for(var re=J.length-1;re>=0;re--){var ue=J[re].split();ue&&(ge(ue)&&ue.getFirstSegment().setHandleIn(0,0),X.getLastSegment().setHandleOut(0,0))}return ge(X),A(le,!1,B,q)}function P(B,q){for(var D=B;D;){if(D===q)return;D=D._previous}for(;B._next&&B._next!==q;)B=B._next;if(!B._next){for(;q._previous;)q=q._previous;B._next=q,q._previous=B}}function H(B){for(var q=B.length-1;q>=0;q--)B[q].clearHandles()}function z(B,q,D){var X=B&&B.length;if(X){var Q=a.each(B,function(We,Je){this[We._id]={container:null,winding:We.isClockwise()?1:-1,index:Je}},{}),J=B.slice().sort(function(We,Je){return g(Je.getArea())-g(We.getArea())}),W=J[0],se=y.findItemBoundsCollisions(J,null,C.GEOMETRIC_EPSILON);D==null&&(D=W.isClockwise());for(var oe=0;oe<X;oe++){var le=J[oe],ge=Q[le._id],re=0,ue=se[oe];if(ue){for(var me=null,Ce=ue.length-1;Ce>=0;Ce--)if(ue[Ce]<oe){me=me||le.getInteriorPoint();var we=J[ue[Ce]];if(we.contains(me)){var Ae=Q[we._id];re=Ae.winding,ge.winding+=re,ge.container=Ae.exclude?Ae.container:we;break}}}if(q(ge.winding)===q(re))ge.exclude=!0,B[ge.index]=null;else{var ze=ge.container;le.setClockwise(ze?!ze.isClockwise():D)}}}return B}function R(B,q,D){var X=q&&[],Q=1e-8,J=1-Q,W=!1,se=D||[],oe=D&&{},le,ge,re;function ue(mt){return mt._path._id+"."+mt._segment1._index}for(var me=(D&&D.length)-1;me>=0;me--){var Ce=D[me];Ce._path&&(oe[ue(Ce)]=!0)}for(var me=B.length-1;me>=0;me--){var we=B[me],Ae=we._time,ze=Ae,We=q&&!q(we),Ce=we._curve,Je;if(Ce&&(Ce!==ge?(W=!Ce.hasHandles()||oe&&oe[ue(Ce)],le=[],re=null,ge=Ce):re>=Q&&(Ae/=re)),We){le&&le.push(we);continue}else q&&X.unshift(we);if(re=ze,Ae<Q)Je=Ce._segment1;else if(Ae>J)Je=Ce._segment2;else{var lt=Ce.divideAtTime(Ae,!0);W&&se.push(Ce,lt),Je=lt._segment1;for(var Pe=le.length-1;Pe>=0;Pe--){var Ie=le[Pe];Ie._time=(Ie._time-Ae)/(1-Ae)}}we._setSegment(Je);var Qe=Je._intersection,at=we._intersection;if(Qe){P(Qe,at);for(var st=Qe;st;)P(st._intersection,Qe),st=st._next}else Je._intersection=at}return D||H(se),X||B}function K(B,q,D,X,Q){var J=Array.isArray(q)?q:q[D?"hor":"ver"],W=D?1:0,se=W^1,oe=[B.x,B.y],le=oe[W],ge=oe[se],re=1e-9,ue=1e-6,me=le-re,Ce=le+re,we=0,Ae=0,ze=0,We=0,Je=!1,lt=!1,Pe=1,Ie=[],Qe,at;function st($e){var si=$e[se+0],fi=$e[se+6];if(!(ge<l(si,fi)||ge>h(si,fi))){var pi=$e[W+0],Ki=$e[W+2],Pi=$e[W+4],mi=$e[W+6];if(si===fi){(pi<Ce&&mi>me||mi<Ce&&pi>me)&&(Je=!0);return}var xn=ge===si?0:ge===fi||me>h(pi,Ki,Pi,mi)||Ce<l(pi,Ki,Pi,mi)?1:he.solveCubic($e,se,ge,Ie,0,1)>0?Ie[0]:1,Qi=xn===0?pi:xn===1?mi:he.getPoint($e,xn)[D?"y":"x"],Ji=si>fi?1:-1,zn=Qe[se]>Qe[se+6]?1:-1,vi=Qe[W+6];return ge!==si?(Qi<me?ze+=Ji:Qi>Ce?We+=Ji:Je=!0,Qi>le-ue&&Qi<le+ue&&(Pe/=2)):(Ji!==zn?pi<me?ze+=Ji:pi>Ce&&(We+=Ji):pi!=vi&&(vi<Ce&&Qi>Ce?(We+=Ji,Je=!0):vi>me&&Qi<me&&(ze+=Ji,Je=!0)),Pe/=4),Qe=$e,!Q&&Qi>me&&Qi<Ce&&he.getTangent($e,xn)[D?"x":"y"]===0&&K(B,q,!D,X,!0)}}function mt($e){var si=$e[se+0],fi=$e[se+2],pi=$e[se+4],Ki=$e[se+6];if(ge<=h(si,fi,pi,Ki)&&ge>=l(si,fi,pi,Ki)){for(var Pi=$e[W+0],mi=$e[W+2],xn=$e[W+4],Qi=$e[W+6],Ji=me>h(Pi,mi,xn,Qi)||Ce<l(Pi,mi,xn,Qi)?[$e]:he.getMonoCurves($e,D),zn,vi=0,en=Ji.length;vi<en;vi++)if(zn=st(Ji[vi]))return zn}}for(var pt=0,xt=J.length;pt<xt;pt++){var gt=J[pt],Tt=gt._path,Ci=gt.getValues(),Jt;if((!pt||J[pt-1]._path!==Tt)&&(Qe=null,Tt._closed||(at=he.getValues(Tt.getLastCurve().getSegment2(),gt.getSegment1(),null,!X),at[se]!==at[se+6]&&(Qe=at)),!Qe)){Qe=Ci;for(var hi=Tt.getLastCurve();hi&&hi!==gt;){var xi=hi.getValues();if(xi[se]!==xi[se+6]){Qe=xi;break}hi=hi.getPrevious()}}if(Jt=mt(Ci))return Jt;if(pt+1===xt||J[pt+1]._path!==Tt){if(at&&(Jt=mt(at)))return Jt;Je&&!ze&&!We&&(ze=We=Tt.isClockwise(X)^D?1:-1),we+=ze,Ae+=We,ze=We=0,Je&&(lt=!0,Je=!1),at=null}}return we=g(we),Ae=g(Ae),{winding:h(we,Ae),windingL:we,windingR:Ae,quality:Pe,onPath:lt}}function Y(B,q,D,X,Q){var J=[],W=B,se=0,re;do{var oe=B.getCurve();if(oe){var le=oe.getLength();J.push({segment:B,curve:oe,length:le}),se+=le}B=B.getNext()}while(B&&!B._intersection&&B!==W);for(var ge=[.5,.25,.75],re={winding:0,quality:-1},ue=.001,me=1-ue,Ce=0;Ce<ge.length&&re.quality<.5;Ce++)for(var le=se*ge[Ce],we=0,Ae=J.length;we<Ae;we++){var ze=J[we],We=ze.length;if(le<=We){var oe=ze.curve,Je=oe._path,lt=Je._parent,Pe=lt instanceof yt?lt:Je,Ie=C.clamp(oe.getTimeAt(le),ue,me),Qe=oe.getPointAtTime(Ie),at=g(oe.getTangentAtTime(Ie).y)<Math.SQRT1_2,st=null;if(Q.subtract&&D){var mt=Pe===q?D:q,pt=mt._getWinding(Qe,at,!0);if(Pe===q&&pt.winding||Pe===D&&!pt.winding){if(pt.quality<1)continue;st={winding:0,quality:1}}}st=st||K(Qe,X[Je._id][oe.getIndex()],at,!0),st.quality>re.quality&&(re=st);break}le-=We}for(var we=J.length-1;we>=0;we--)J[we].segment._winding=re}function Z(B,q){var D=[],X;function Q(xt){var gt;return!!(xt&&!xt._visited&&(!q||q[(gt=xt._winding||{}).winding]&&!(q.unite&&gt.winding===2&&gt.windingL&&gt.windingR)))}function J(xt){if(xt){for(var gt=0,Tt=X.length;gt<Tt;gt++)if(xt===X[gt])return!0}return!1}function W(xt){for(var gt=xt._segments,Tt=0,Ci=gt.length;Tt<Ci;Tt++)gt[Tt]._visited=!0}function se(xt,gt){var Tt=xt._intersection,Ci=Tt,Jt=[];gt&&(X=[xt]);function hi(xi,$e){for(;xi&&xi!==$e;){var si=xi._segment,fi=si&&si._path;if(fi){var pi=si.getNext()||fi.getFirstSegment(),Ki=pi._intersection;si!==xt&&(J(si)||J(pi)||pi&&Q(si)&&(Q(pi)||Ki&&Q(Ki._segment)))&&Jt.push(si),gt&&X.push(si)}xi=xi._next}}if(Tt){for(hi(Tt);Tt&&Tt._previous;)Tt=Tt._previous;hi(Tt,Ci)}return Jt}B.sort(function(xt,gt){var Tt=xt._intersection,Ci=gt._intersection,Jt=!!(Tt&&Tt._overlap),hi=!!(Ci&&Ci._overlap),xi=xt._path,$e=gt._path;return Jt^hi?Jt?1:-1:!Tt^!Ci?Tt?1:-1:xi!==$e?xi._id-$e._id:xt._index-gt._index});for(var oe=0,le=B.length;oe<le;oe++){var ge=B[oe],re=Q(ge),ue=null,me=!1,Ce=!0,we=[],Ae,ze,We;if(re&&ge._path._overlapsOnly){var Je=ge._path,lt=ge._intersection._segment._path;Je.compare(lt)&&(Je.getArea()&&D.push(Je.clone(!1)),W(Je),W(lt),re=!1)}for(;re;){var Pe=!ue,Ie=se(ge,Pe),Qe=Ie.shift(),me=!Pe&&(J(ge)||J(Qe)),at=!me&&Qe;if(Pe&&(ue=new rt(I.NO_INSERT),Ae=null),me){(ge.isFirst()||ge.isLast())&&(Ce=ge._path._closed),ge._visited=!0;break}if(at&&Ae&&(we.push(Ae),Ae=null),Ae||(at&&Ie.push(ge),Ae={start:ue._segments.length,crossings:Ie,visited:ze=[],handleIn:We}),at&&(ge=Qe),!Q(ge)){ue.removeSegments(Ae.start);for(var st=0,mt=ze.length;st<mt;st++)ze[st]._visited=!1;ze.length=0;do ge=Ae&&Ae.crossings.shift(),(!ge||!ge._path)&&(ge=null,Ae=we.pop(),Ae&&(ze=Ae.visited,We=Ae.handleIn));while(Ae&&!Q(ge));if(!ge)break}var pt=ge.getNext();ue.add(new Ge(ge._point,We,pt&&ge._handleOut)),ge._visited=!0,ze.push(ge),ge=pt||ge._path.getFirstSegment(),We=pt&&pt._handleIn}me&&(Ce&&(ue.getFirstSegment().setHandleIn(We),ue.setClosed(Ce)),ue.getArea()!==0&&D.push(ue))}return D}return{_getWinding:function(B,q,D){return K(B,this.getCurves(),q,D)},unite:function(B,q){return j(this,B,"unite",q)},intersect:function(B,q){return j(this,B,"intersect",q)},subtract:function(B,q){return j(this,B,"subtract",q)},exclude:function(B,q){return j(this,B,"exclude",q)},divide:function(B,q){return q&&(q.trace==!1||q.stroke)?M(this,B,"divide"):A([this.subtract(B,q),this.intersect(B,q)],!0,this,B,q)},resolveCrossings:function(){var B=this._children,q=B||[this];function D(Ae,ze){var We=Ae&&Ae._intersection;return We&&We._overlap&&We._path===ze}var X=!1,Q=!1,J=this.getIntersections(null,function(Ae){return Ae.hasOverlap()&&(X=!0)||Ae.isCrossing()&&(Q=!0)}),W=X&&Q&&[];if(J=qe.expand(J),X)for(var se=R(J,function(Ae){return Ae.hasOverlap()},W),oe=se.length-1;oe>=0;oe--){var le=se[oe],ge=le._path,re=le._segment,ue=re.getPrevious(),me=re.getNext();D(ue,ge)&&D(me,ge)&&(re.remove(),ue._handleOut._set(0,0),me._handleIn._set(0,0),ue!==re&&!ue.getCurve().hasLength()&&(me._handleIn.set(ue._handleIn),ue.remove()))}Q&&(R(J,X&&function(Ae){var ze=Ae.getCurve(),We=Ae.getSegment(),Je=Ae._intersection,lt=Je._curve,Pe=Je._segment;if(ze&&lt&&ze._path&&lt._path)return!0;We&&(We._intersection=null),Pe&&(Pe._intersection=null)},W),W&&H(W),q=Z(a.each(q,function(Ae){a.push(this,Ae._segments)},[])));var Ce=q.length,we;return Ce>1&&B?(q!==B&&this.setChildren(q),we=this):Ce===1&&!B&&(q[0]!==this&&this.setSegments(q[0].removeSegments()),we=this),we||(we=new yt(I.NO_INSERT),we.addChildren(q),we=we.reduce(),we.copyAttributes(this),this.replaceWith(we)),we},reorient:function(B,q){var D=this._children;return D&&D.length?this.setChildren(z(this.removeChildren(),function(X){return!!(B?X:X&1)},q)):q!==t&&this.setClockwise(q),this},getInteriorPoint:function(){var B=this.getBounds(),q=B.getCenter(!0);if(!this.contains(q)){for(var D=this.getCurves(),X=q.y,Q=[],J=[],W=0,se=D.length;W<se;W++){var oe=D[W].getValues(),le=oe[1],ge=oe[3],re=oe[5],ue=oe[7];if(X>=l(le,ge,re,ue)&&X<=h(le,ge,re,ue))for(var me=he.getMonoCurves(oe),Ce=0,we=me.length;Ce<we;Ce++){var Ae=me[Ce],ze=Ae[1],We=Ae[7];if(ze!==We&&(X>=ze&&X<=We||X>=We&&X<=ze)){var Je=X===ze?Ae[0]:X===We?Ae[6]:he.solveCubic(Ae,1,X,J,0,1)===1?he.getPoint(Ae,J[0]).x:(Ae[0]+Ae[6])/2;Q.push(Je)}}}Q.length>1&&(Q.sort(function(lt,Pe){return lt-Pe}),q.x=(Q[0]+Q[1])/2)}return q}}});var _e=a.extend({_class:"PathFlattener",initialize:function(l,h,g,v,x){var T=[],A=[],O=0,j=1/(g||32),M=l._segments,P=M[0],H;function z(Z,B){var q=he.getValues(Z,B,x);T.push(q),R(q,Z._index,0,1)}function R(Z,B,q,D){if(D-q>j&&!(v&&he.isStraight(Z))&&!he.isFlatEnough(Z,h||.25)){var X=he.subdivide(Z,.5),Q=(q+D)/2;R(X[0],B,q,Q),R(X[1],B,Q,D)}else{var J=Z[6]-Z[0],W=Z[7]-Z[1],se=Math.sqrt(J*J+W*W);se>0&&(O+=se,A.push({offset:O,curve:Z,index:B,time:D}))}}for(var K=1,Y=M.length;K<Y;K++)H=M[K],z(P,H),P=H;l._closed&&z(H||P,M[0]),this.curves=T,this.parts=A,this.length=O,this.index=0},_get:function(l){for(var h=this.parts,g=h.length,v,x=this.index;v=x,!(!x||h[--x].offset<l););for(;v<g;v++){var T=h[v];if(T.offset>=l){this.index=v;var A=h[v-1],O=A&&A.index===T.index?A.time:0,j=A?A.offset:0;return{index:T.index,time:O+(T.time-O)*(l-j)/(T.offset-j)}}}return{index:h[g-1].index,time:1}},drawPart:function(l,h,g){for(var v=this._get(h),x=this._get(g),T=v.index,A=x.index;T<=A;T++){var O=he.getPart(this.curves[T],T===v.index?v.time:0,T===x.index?x.time:1);T===v.index&&l.moveTo(O[0],O[1]),l.bezierCurveTo.apply(l,O.slice(2))}}},a.each(he._evaluateMethods,function(l){this[l+"At"]=function(h){var g=this._get(h);return he[l](this.curves[g.index],g.time)}},{})),Ve=a.extend({initialize:function(l){for(var h=this.points=[],g=l._segments,v=l._closed,x=0,T,A=g.length;x<A;x++){var O=g[x].point;(!T||!T.equals(O))&&h.push(T=O.clone())}v&&(h.unshift(h[h.length-1]),h.push(h[1])),this.closed=v},fit:function(l){var h=this.points,g=h.length,v=null;return g>0&&(v=[new Ge(h[0])],g>1&&(this.fitCubic(v,l,0,g-1,h[1].subtract(h[0]),h[g-2].subtract(h[g-1])),this.closed&&(v.shift(),v.pop()))),v},fitCubic:function(l,h,g,v,x,T){var A=this.points;if(v-g===1){var O=A[g],j=A[v],M=O.getDistance(j)/3;this.addCurve(l,[O,O.add(x.normalize(M)),j.add(T.normalize(M)),j]);return}for(var P=this.chordLengthParameterize(g,v),H=Math.max(h,h*h),z,R=!0,K=0;K<=4;K++){var Y=this.generateBezier(g,v,P,x,T),Z=this.findMaxError(g,v,Y,P);if(Z.error<h&&R){this.addCurve(l,Y);return}if(z=Z.index,Z.error>=H)break;R=this.reparameterize(g,v,P,Y),H=Z.error}var B=A[z-1].subtract(A[z+1]);this.fitCubic(l,h,g,z,x,B),this.fitCubic(l,h,z,v,B.negate(),T)},addCurve:function(l,h){var g=l[l.length-1];g.setHandleOut(h[1].subtract(h[0])),l.push(new Ge(h[3],h[2].subtract(h[3])))},generateBezier:function(l,h,g,v,x){for(var T=1e-12,A=Math.abs,O=this.points,j=O[l],M=O[h],P=[[0,0],[0,0]],H=[0,0],z=0,R=h-l+1;z<R;z++){var K=g[z],Y=1-K,Z=3*K*Y,B=Y*Y*Y,q=Z*Y,D=Z*K,X=K*K*K,Q=v.normalize(q),J=x.normalize(D),W=O[l+z].subtract(j.multiply(B+q)).subtract(M.multiply(D+X));P[0][0]+=Q.dot(Q),P[0][1]+=Q.dot(J),P[1][0]=P[0][1],P[1][1]+=J.dot(J),H[0]+=Q.dot(W),H[1]+=J.dot(W)}var se=P[0][0]*P[1][1]-P[1][0]*P[0][1],oe,le;if(A(se)>T){var ge=P[0][0]*H[1]-P[1][0]*H[0],re=H[0]*P[1][1]-H[1]*P[0][1];oe=re/se,le=ge/se}else{var ue=P[0][0]+P[0][1],me=P[1][0]+P[1][1];oe=le=A(ue)>T?H[0]/ue:A(me)>T?H[1]/me:0}var Ce=M.getDistance(j),we=T*Ce,Ae,ze;if(oe<we||le<we)oe=le=Ce/3;else{var We=M.subtract(j);Ae=v.normalize(oe),ze=x.normalize(le),Ae.dot(We)-ze.dot(We)>Ce*Ce&&(oe=le=Ce/3,Ae=ze=null)}return[j,j.add(Ae||v.normalize(oe)),M.add(ze||x.normalize(le)),M]},reparameterize:function(l,h,g,v){for(var x=l;x<=h;x++)g[x-l]=this.findRoot(v,this.points[x],g[x-l]);for(var x=1,T=g.length;x<T;x++)if(g[x]<=g[x-1])return!1;return!0},findRoot:function(l,h,g){for(var v=[],x=[],T=0;T<=2;T++)v[T]=l[T+1].subtract(l[T]).multiply(3);for(var T=0;T<=1;T++)x[T]=v[T+1].subtract(v[T]).multiply(2);var A=this.evaluate(3,l,g),O=this.evaluate(2,v,g),j=this.evaluate(1,x,g),M=A.subtract(h),P=O.dot(O)+M.dot(j);return C.isMachineZero(P)?g:g-M.dot(O)/P},evaluate:function(l,h,g){for(var v=h.slice(),x=1;x<=l;x++)for(var T=0;T<=l-x;T++)v[T]=v[T].multiply(1-g).add(v[T+1].multiply(g));return v[0]},chordLengthParameterize:function(l,h){for(var g=[0],v=l+1;v<=h;v++)g[v-l]=g[v-l-1]+this.points[v].getDistance(this.points[v-1]);for(var v=1,x=h-l;v<=x;v++)g[v]/=g[x];return g},findMaxError:function(l,h,g,v){for(var x=Math.floor((h-l+1)/2),T=0,A=l+1;A<h;A++){var O=this.evaluate(3,g,v[A-l]),j=O.subtract(this.points[A]),M=j.x*j.x+j.y*j.y;M>=T&&(T=M,x=A)}return{error:T,index:x}}}),tt=I.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(h){this._content="",this._lines=[];var g=h&&a.isPlainObject(h)&&h.x===t&&h.y===t;this._initialize(g&&h,!g&&E.read(arguments))},_equals:function(l){return this._content===l._content},copyContent:function(l){this.setContent(l._content)},getContent:function(){return this._content},setContent:function(l){this._content=""+l,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ot=tt.extend({_class:"PointText",initialize:function(){tt.apply(this,arguments)},getPoint:function(){var l=this._matrix.getTranslation();return new V(l.x,l.y,this,"setPoint")},setPoint:function(){var l=E.read(arguments);this.translate(l.subtract(this._matrix.getTranslation()))},_draw:function(l,h,g){if(this._content){this._setStyles(l,h,g);var v=this._lines,x=this._style,T=x.hasFill(),A=x.hasStroke(),O=x.getLeading(),j=l.shadowColor;l.font=x.getFontStyle(),l.textAlign=x.getJustification();for(var M=0,P=v.length;M<P;M++){l.shadowColor=j;var H=v[M];T&&(l.fillText(H,0,0),l.shadowColor="rgba(0,0,0,0)"),A&&l.strokeText(H,0,0),l.translate(0,O)}}},_getBounds:function(l,h){var g=this._style,v=this._lines,x=v.length,T=g.getJustification(),A=g.getLeading(),O=this.getView().getTextWidth(g.getFontStyle(),v),j=0;T!=="left"&&(j-=O/(T==="center"?2:1));var M=new G(j,x?-.75*A:0,O,x*A);return l?l._transformBounds(M,M):M}}),ut=a.extend(new function(){var l={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},h={},g={transparent:[0,0,0,0]},v;function x(O){var j=O.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||O.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),M="rgb",P;if(j){var H=j[4]?4:3;P=new Array(H);for(var z=0;z<H;z++){var R=j[z+1];P[z]=parseInt(R.length==1?R+R:R,16)/255}}else if(j=O.match(/^(rgb|hsl)a?\((.*)\)$/)){M=j[1],P=j[2].trim().split(/[,\s]+/g);for(var K=M==="hsl",z=0,Y=Math.min(P.length,4);z<Y;z++){var Z=P[z],R=parseFloat(Z);if(K)if(z===0){var B=Z.match(/([a-z]*)$/)[1];R*={turn:360,rad:180/Math.PI,grad:.9}[B]||1}else z<3&&(R/=100);else z<3&&(R/=/%$/.test(Z)?100:255);P[z]=R}}else{var q=g[O];if(!q)if(i){v||(v=oi.getContext(1,1,{willReadFrequently:!0}),v.globalCompositeOperation="copy"),v.fillStyle="rgba(0,0,0,0)",v.fillStyle=O,v.fillRect(0,0,1,1);var D=v.getImageData(0,0,1,1).data;q=g[O]=[D[0]/255,D[1]/255,D[2]/255]}else q=[0,0,0];P=q.slice()}return[M,P]}var T=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],A={"rgb-hsb":function(O,j,M){var P=Math.max(O,j,M),H=Math.min(O,j,M),z=P-H,R=z===0?0:(P==O?(j-M)/z+(j<M?6:0):P==j?(M-O)/z+2:(O-j)/z+4)*60;return[R,P===0?0:z/P,P]},"hsb-rgb":function(O,j,M){O=(O/60%6+6)%6;var H=Math.floor(O),P=O-H,H=T[H],z=[M,M*(1-j),M*(1-j*P),M*(1-j*(1-P))];return[z[H[0]],z[H[1]],z[H[2]]]},"rgb-hsl":function(O,j,M){var P=Math.max(O,j,M),H=Math.min(O,j,M),z=P-H,R=z===0,K=R?0:(P==O?(j-M)/z+(j<M?6:0):P==j?(M-O)/z+2:(O-j)/z+4)*60,Y=(P+H)/2,Z=R?0:Y<.5?z/(P+H):z/(2-P-H);return[K,Z,Y]},"hsl-rgb":function(O,j,M){if(O=(O/360%1+1)%1,j===0)return[M,M,M];for(var P=[O+1/3,O,O-1/3],H=M<.5?M*(1+j):M+j-M*j,z=2*M-H,R=[],K=0;K<3;K++){var Y=P[K];Y<0&&(Y+=1),Y>1&&(Y-=1),R[K]=6*Y<1?z+(H-z)*6*Y:2*Y<1?H:3*Y<2?z+(H-z)*(2/3-Y)*6:z}return R},"rgb-gray":function(O,j,M){return[O*.2989+j*.587+M*.114]},"gray-rgb":function(O){return[O,O,O]},"gray-hsb":function(O){return[0,0,O]},"gray-hsl":function(O){return[0,0,O]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(l,function(O,j){h[j]=[],a.each(O,function(M,P){var H=a.capitalize(M),z=/^(hue|saturation)$/.test(M),R=h[j][P]=j==="gradient"?M==="gradient"?function(K){var Y=this._components[0];return K=wt.read(Array.isArray(K)?K:arguments,0,{readNull:!0}),Y!==K&&(Y&&Y._removeOwner(this),K&&K._addOwner(this)),K}:function(){return E.read(arguments,0,{readNull:M==="highlight",clone:!0})}:function(K){return K==null||isNaN(K)?0:+K};this["get"+H]=function(){return this._type===j||z&&/^hs[bl]$/.test(this._type)?this._components[P]:this._convert(j)[P]},this["set"+H]=function(K){this._type!==j&&!(z&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(j),this._properties=l[j],this._type=j),this._components[P]=R.call(this,K),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function O(j){var M=arguments,P=this.__read,H=0,z,R,K,Y;Array.isArray(j)&&(M=j,j=M[0]);var Z=j!=null&&typeof j;if(Z==="string"&&j in l&&(z=j,j=M[1],Array.isArray(j)?(R=j,K=M[2]):(P&&(H=1),M=a.slice(M,1),Z=typeof j)),!R){if(Y=Z==="number"?M:Z==="object"&&j.length!=null?j:null,Y){z||(z=Y.length>=3?"rgb":"gray");var B=l[z].length;K=Y[B],P&&(H+=Y===arguments?B+(K!=null?1:0):1),Y.length>B&&(Y=a.slice(Y,0,B))}else if(Z==="string"){var q=x(j);z=q[0],R=q[1],R.length===4&&(K=R[3],R.length--)}else if(Z==="object")if(j.constructor===O){if(z=j._type,R=j._components.slice(),K=j._alpha,z==="gradient")for(var D=1,X=R.length;D<X;D++){var Q=R[D];Q&&(R[D]=Q.clone())}}else if(j.constructor===wt)z="gradient",Y=M;else{z="hue"in j?"lightness"in j?"hsl":"hsb":"gradient"in j||"stops"in j||"radial"in j?"gradient":"gray"in j?"gray":"rgb";var J=l[z],W=h[z];this._components=R=[];for(var D=0,X=J.length;D<X;D++){var se=j[J[D]];se==null&&!D&&z==="gradient"&&"stops"in j&&(se={stops:j.stops,radial:j.radial}),se=W[D].call(this,se),se!=null&&(R[D]=se)}K=j.alpha}P&&z&&(H=1)}if(this._type=z||"rgb",!R){this._components=R=[];for(var W=h[this._type],D=0,X=W.length;D<X;D++){var se=W[D].call(this,Y&&Y[D]);se!=null&&(R[D]=se)}}return this._components=R,this._properties=l[this._type],this._alpha=K,P&&(this.__read=H),this},set:"#initialize",_serialize:function(O,j){var M=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?M:[this._type].concat(M),O,!0,j)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(O){var j;return this._type===O?this._components.slice():(j=A[this._type+"-"+O])?j.apply(this,this._components):A["rgb-"+O].apply(this,A[this._type+"-rgb"].apply(this,this._components))},convert:function(O){return new ut(O,this._convert(O),this._alpha)},getType:function(){return this._type},setType:function(O){this._components=this._convert(O),this._properties=l[O],this._type=O},getComponents:function(){var O=this._components.slice();return this._alpha!=null&&O.push(this._alpha),O},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(O){this._alpha=O==null?null:Math.min(Math.max(O,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(O){var j=a.isPlainValue(O,!0)?ut.read(arguments):O;return j===this||j&&this._class===j._class&&this._type===j._type&&this.getAlpha()===j.getAlpha()&&a.equals(this._components,j._components)||!1},toString:function(){for(var O=this._properties,j=[],M=this._type==="gradient",P=b.instance,H=0,z=O.length;H<z;H++){var R=this._components[H];R!=null&&j.push(O[H]+": "+(M?R:P.number(R)))}return this._alpha!=null&&j.push("alpha: "+P.number(this._alpha)),"{ "+j.join(", ")+" }"},toCSS:function(O){var j=this._convert("rgb"),M=O||this._alpha==null?1:this._alpha;function P(H){return Math.round((H<0?0:H>1?1:H)*255)}return j=[P(j[0]),P(j[1]),P(j[2])],M<1&&j.push(M<0?0:M),O?"#"+((1<<24)+(j[0]<<16)+(j[1]<<8)+j[2]).toString(16).slice(1):(j.length==4?"rgba(":"rgb(")+j.join(",")+")"},toCanvasStyle:function(O,j){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var M=this._components,P=M[0],H=P._stops,z=M[1],R=M[2],K=M[3],Y=j&&j.inverted(),Z;if(Y&&(z=Y._transformPoint(z),R=Y._transformPoint(R),K&&(K=Y._transformPoint(K))),P._radial){var B=R.getDistance(z);if(K){var q=K.subtract(z);q.getLength()>B&&(K=z.add(q.normalize(B-.1)))}var D=K||z;Z=O.createRadialGradient(D.x,D.y,0,z.x,z.y,B)}else Z=O.createLinearGradient(z.x,z.y,R.x,R.y);for(var X=0,Q=H.length;X<Q;X++){var J=H[X],W=J._offset;Z.addColorStop(W??X/(Q-1),J._color.toCanvasStyle())}return this._canvasStyle=Z},transform:function(O){if(this._type==="gradient"){for(var j=this._components,M=1,P=j.length;M<P;M++){var H=j[M];O._transformPoint(H,H,!0)}this._changed()}},statics:{_types:l,random:function(){var O=Math.random;return new ut(O(),O(),O())},_setOwner:function(O,j,M){return O&&(O._owner&&j&&O._owner!==j&&(O=O.clone()),!O._owner^!j&&(O._owner=j||null,O._setter=M||null)),O}}})},new function(){var l={add:function(h,g){return h+g},subtract:function(h,g){return h-g},multiply:function(h,g){return h*g},divide:function(h,g){return h/g}};return a.each(l,function(h,g){this[g]=function(v){v=ut.read(arguments);for(var x=this._type,T=this._components,A=v._convert(x),O=0,j=T.length;O<j;O++)A[O]=h(T[O],A[O]);return new ut(x,A,this._alpha!=null?h(this._alpha,v.getAlpha()):null)}},{})}),wt=a.extend({_class:"Gradient",initialize:function(h,g){this._id=N.get(),h&&a.isPlainObject(h)&&(this.set(h),h=g=null),this._stops==null&&this.setStops(h||["white","black"]),this._radial==null&&this.setRadial(typeof g=="string"&&g==="radial"||g||!1)},_serialize:function(l,h){return h.add(this,function(){return a.serialize([this._stops,this._radial],l,!0,h)})},_changed:function(){for(var l=0,h=this._owners&&this._owners.length;l<h;l++)this._owners[l]._changed()},_addOwner:function(l){this._owners||(this._owners=[]),this._owners.push(l)},_removeOwner:function(l){var h=this._owners?this._owners.indexOf(l):-1;h!=-1&&(this._owners.splice(h,1),this._owners.length||(this._owners=t))},clone:function(){for(var l=[],h=0,g=this._stops.length;h<g;h++)l[h]=this._stops[h].clone();return new wt(l,this._radial)},getStops:function(){return this._stops},setStops:function(l){if(l.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var h=this._stops;if(h)for(var g=0,v=h.length;g<v;g++)h[g]._owner=t;h=this._stops=Lt.readList(l,0,{clone:!0});for(var g=0,v=h.length;g<v;g++)h[g]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(l){this._radial=l,this._changed()},equals:function(l){if(l===this)return!0;if(l&&this._class===l._class){var h=this._stops,g=l._stops,v=h.length;if(v===g.length){for(var x=0;x<v;x++)if(!h[x].equals(g[x]))return!1;return!0}}return!1}}),Lt=a.extend({_class:"GradientStop",initialize:function(h,g){var v=h,x=g;typeof h=="object"&&g===t&&(Array.isArray(h)&&typeof h[0]!="number"?(v=h[0],x=h[1]):("color"in h||"offset"in h||"rampPoint"in h)&&(v=h.color,x=h.offset||h.rampPoint||0)),this.setColor(v),this.setOffset(x)},clone:function(){return new Lt(this._color.clone(),this._offset)},_serialize:function(l,h){var g=this._color,v=this._offset;return a.serialize(v==null?[g]:[g,v],l,!0,h)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(l){this._offset=l,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ut._setOwner(this._color,null),this._color=ut._setOwner(ut.read(arguments,0),this,"setColor"),this._changed()},equals:function(l){return l===this||l&&this._class===l._class&&this._color.equals(l._color)&&this._offset==l._offset||!1}}),Oi=a.extend(new function(){var l={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new E,selectedColor:null},h=a.set({},l,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),g=a.set({},h,{fillColor:new ut}),v={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},x={beans:!0},T={_class:"Style",beans:!0,initialize:function(O,j,M){this._values={},this._owner=j,this._project=j&&j._project||M||Nt.project,this._defaults=!j||j instanceof Ee?h:j instanceof tt?g:l,O&&this.set(O)}};return a.each(h,function(A,O){var j=/Color$/.test(O),M=O==="shadowOffset",P=a.capitalize(O),H=v[O],z="set"+P,R="get"+P;T[z]=function(K){var Y=this._owner,Z=Y&&Y._children,B=Z&&Z.length>0&&!(Y instanceof yt);if(B)for(var q=0,D=Z.length;q<D;q++)Z[q]._style[z](K);if((O==="selectedColor"||!B)&&O in this._defaults){var X=this._values[O];X!==K&&(j&&(X&&(ut._setOwner(X,null),X._canvasStyle=null),K&&K.constructor===ut&&(K=ut._setOwner(K,Y,B&&z))),this._values[O]=K,Y&&Y._changed(H||129))}},T[R]=function(K){var Y=this._owner,Z=Y&&Y._children,B=Z&&Z.length>0&&!(Y instanceof yt),q;if(B&&!K)for(var D=0,X=Z.length;D<X;D++){var Q=Z[D]._style[R]();if(!D)q=Q;else if(!a.equals(q,Q))return t}else if(O in this._defaults){var q=this._values[O];if(q===t)q=this._defaults[O],q&&q.clone&&(q=q.clone());else{var J=j?ut:M?E:null;J&&!(q&&q.constructor===J)&&(this._values[O]=q=J.read([q],0,{readNull:!0,clone:!0}))}}return q&&j&&(q=ut._setOwner(q,Y,B&&z)),q},x[R]=function(K){return this._style[R](K)},x[z]=function(K){this._style[z](K)}}),a.each({Font:"FontFamily",WindingRule:"FillRule"},function(A,O){var j="get"+O,M="set"+O;T[j]=x[j]="#get"+A,T[M]=x[M]="#set"+A}),I.inject(x),T},{set:function(l){var h=l instanceof Oi,g=h?l._values:l;if(g){for(var v in g)if(v in this._defaults){var x=g[v];this[v]=x&&h&&x.clone?x.clone():x}}},equals:function(l){function h(g,v,x){var T=g._values,A=v._values,O=v._defaults;for(var j in T){var M=T[j],P=A[j];if(!(x&&j in A)&&!a.equals(M,P===t?O[j]:P))return!1}return!0}return l===this||l&&this._class===l._class&&h(this,l)&&h(l,this,!0)||!1},_dispose:function(){var l;l=this.getFillColor(),l&&(l._canvasStyle=null),l=this.getStrokeColor(),l&&(l._canvasStyle=null),l=this.getShadowColor(),l&&(l._canvasStyle=null)},hasFill:function(){var l=this.getFillColor();return!!l&&l.alpha>0},hasStroke:function(){var l=this.getStrokeColor();return!!l&&l.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var l=this.getShadowColor();return!!l&&l.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var l=this.getFontSize();return this.getFontWeight()+" "+l+(/[a-z]/i.test(l+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function l(){var h=l.base.call(this),g=this.getFontSize();return/pt|em|%|px/.test(g)&&(g=this.getView().getPixelSize(g)),h??g*1.2}}),Ct=new function(){function l(h,g,v,x){for(var T=["","webkit","moz","Moz","ms","o"],A=g[0].toUpperCase()+g.substring(1),O=0;O<6;O++){var j=T[O],M=j?j+A:g;if(M in h){if(v)h[M]=x;else return h[M];break}}}return{getStyles:function(h){var g=h&&h.nodeType!==9?h.ownerDocument:h,v=g&&g.defaultView;return v&&v.getComputedStyle(h,"")},getBounds:function(h,g){var v=h.ownerDocument,x=v.body,T=v.documentElement,A;try{A=h.getBoundingClientRect()}catch{A={left:0,top:0,width:0,height:0}}var O=A.left-(T.clientLeft||x.clientLeft||0),j=A.top-(T.clientTop||x.clientTop||0);if(!g){var M=v.defaultView;O+=M.pageXOffset||T.scrollLeft||x.scrollLeft,j+=M.pageYOffset||T.scrollTop||x.scrollTop}return new G(O,j,A.width,A.height)},getViewportBounds:function(h){var g=h.ownerDocument,v=g.defaultView,x=g.documentElement;return new G(0,0,v.innerWidth||x.clientWidth,v.innerHeight||x.clientHeight)},getOffset:function(h,g){return Ct.getBounds(h,g).getPoint()},getSize:function(h){return Ct.getBounds(h,!0).getSize()},isInvisible:function(h){return Ct.getSize(h).equals(new L(0,0))},isInView:function(h){return!Ct.isInvisible(h)&&Ct.getViewportBounds(h).intersects(Ct.getBounds(h,!0))},isInserted:function(h){return s.body.contains(h)},getPrefixed:function(h,g){return h&&l(h,g)},setPrefixed:function(h,g,v){if(typeof g=="object")for(var x in g)l(h,x,!0,g[x]);else l(h,g,!0,v)}}},zt={add:function(l,h){if(l)for(var g in h)for(var v=h[g],x=g.split(/[\s,]+/g),T=0,A=x.length;T<A;T++){var O=x[T],j=l===s&&(O==="touchstart"||O==="touchmove")?{passive:!1}:!1;l.addEventListener(O,v,j)}},remove:function(l,h){if(l)for(var g in h)for(var v=h[g],x=g.split(/[\s,]+/g),T=0,A=x.length;T<A;T++)l.removeEventListener(x[T],v,!1)},getPoint:function(l){var h=l.targetTouches?l.targetTouches.length?l.targetTouches[0]:l.changedTouches[0]:l;return new E(h.pageX||h.clientX+s.documentElement.scrollLeft,h.pageY||h.clientY+s.documentElement.scrollTop)},getTarget:function(l){return l.target||l.srcElement},getRelatedTarget:function(l){return l.relatedTarget||l.toElement},getOffset:function(l,h){return zt.getPoint(l).subtract(Ct.getOffset(h||zt.getTarget(l)))}};zt.requestAnimationFrame=new function(){var l=Ct.getPrefixed(i,"requestAnimationFrame"),h=!1,g=[],v;function x(){var T=g;g=[];for(var A=0,O=T.length;A<O;A++)T[A]();h=l&&g.length,h&&l(x)}return function(T){g.push(T),l?h||(l(x),h=!0):v||(v=setInterval(x,1e3/60))}};var Qt=a.extend(u,{_class:"View",initialize:function l(h,g){function v(H){return g[H]||parseInt(g.getAttribute(H),10)}function x(){var H=Ct.getSize(g);return H.isNaN()||H.isZero()?new L(v("width"),v("height")):H}var T;if(i&&g){this._id=g.getAttribute("id"),this._id==null&&g.setAttribute("id",this._id="paper-view-"+l._id++),zt.add(g,this._viewEvents);var A="none";if(Ct.setPrefixed(g.style,{userDrag:A,userSelect:A,touchCallout:A,contentZooming:A,tapHighlightColor:"rgba(0,0,0,0)"}),p.hasAttribute(g,"resize")){var O=this;zt.add(i,this._windowEvents={resize:function(){O.setViewSize(x())}})}if(T=x(),p.hasAttribute(g,"stats")&&typeof Stats<"u"){this._stats=new Stats;var j=this._stats.domElement,M=j.style,P=Ct.getOffset(g);M.position="absolute",M.left=P.x+"px",M.top=P.y+"px",s.body.appendChild(j)}}else T=new L(g),g=null;this._project=h,this._scope=h._scope,this._element=g,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(T.width,T.height),this._viewSize=T,l._views.push(this),l._viewsById[this._id]=this,(this._matrix=new ne)._owner=this,l._focused||(l._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Nt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Qt._focused===this&&(Qt._focused=null),Qt._views.splice(Qt._views.indexOf(this),1),delete Qt._viewsById[this._id];var l=this._project;return l._view===this&&(l._view=null),zt.remove(this._element,this._viewEvents),zt.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(I._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(l){this[l]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(l){this._autoUpdate=l,l&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var l=this;zt.requestAnimationFrame(function(){if(l._requested=!1,l._animate){l.requestUpdate();var h=l._element;(!Ct.getPrefixed(s,"hidden")||p.getAttribute(h,"keepalive")==="true")&&Ct.isInView(h)&&l._handleFrame()}l._autoUpdate&&l.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Nt=this._scope;var l=Date.now()/1e3,h=this._last?l-this._last:0;this._last=l,this.emit("frame",new a({delta:h,time:this._time+=h,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(l,h){var g=this._frameItems;h?(g[l._id]={item:l,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete g[l._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(l){for(var h in this._frameItems){var g=this._frameItems[h];g.item.emit("frame",new a(l,{time:g.time+=l.delta,count:g.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var l=this._viewSize;return new ee(l.width,l.height,this,"setViewSize")},setViewSize:function(){var l=L.read(arguments),h=l.subtract(this._viewSize);h.isZero()||(this._setElementSize(l.width,l.height),this._viewSize.set(l),this._changed(),this.emit("resize",{size:l,delta:h}),this._autoUpdate&&this.update())},_setElementSize:function(l,h){var g=this._element;g&&(g.width!==l&&(g.width=l),g.height!==h&&(g.height=h))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new G(new E,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Ct.isInView(this._element)},isInserted:function(){return Ct.isInserted(this._element)},getPixelSize:function(l){var h=this._element,g;if(h){var v=h.parentNode,x=s.createElement("div");x.style.fontSize=l,v.appendChild(x),g=parseFloat(Ct.getStyles(x).fontSize),v.removeChild(x)}else g=parseFloat(g);return g},getTextWidth:function(l,h){return 0}},a.each(["rotate","scale","shear","skew"],function(l){var h=l==="rotate";this[l]=function(){var g=arguments,v=(h?a:E).read(g),x=E.read(g,0,{readNull:!0});return this.transform(new ne()[l](v,x||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var l=new ne;return this.transform(l.translate.apply(l,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var l=E.read(arguments);this.translate(this.getCenter().subtract(l))},getZoom:function(){var l=this._decompose().scaling;return(l.x+l.y)/2},setZoom:function(l){this.transform(new ne().scale(l/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(l){var h=this.getRotation();h!=null&&l!=null&&this.rotate(l-h)},getScaling:function(){var l=this._decompose().scaling;return new V(l.x,l.y,this,"setScaling")},setScaling:function(){var l=this.getScaling(),h=E.read(arguments,0,{clone:!0,readNull:!0});l&&h&&this.scale(h.x/l.x,h.y/l.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},transform:function(l){this._matrix.append(l)},scrollBy:function(){this.translate(E.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(E.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(E.read(arguments))},getEventPoint:function(l){return this.viewToProject(zt.getOffset(l,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(l,h){s&&typeof h=="string"&&(h=s.getElementById(h));var g=i?ta:Qt;return new g(l,h)}}},new function(){if(!i)return;var l,h,g=!1,v=!1;function x(re){var ue=zt.getTarget(re);return ue.getAttribute&&Qt._viewsById[ue.getAttribute("id")]}function T(){var re=Qt._focused;if(!re||!re.isVisible()){for(var ue=0,me=Qt._views.length;ue<me;ue++)if((re=Qt._views[ue]).isVisible()){Qt._focused=h=re;break}}}function A(re,ue,me){re._handleMouseEvent("mousemove",ue,me)}var O=i.navigator,j,M,P;O.pointerEnabled||O.msPointerEnabled?(j="pointerdown MSPointerDown",M="pointermove MSPointerMove",P="pointerup pointercancel MSPointerUp MSPointerCancel"):(j="touchstart",M="touchmove",P="touchend touchcancel","ontouchstart"in i&&O.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(j+=" mousedown",M+=" mousemove",P+=" mouseup"));var H={},z={mouseout:function(re){var ue=Qt._focused,me=zt.getRelatedTarget(re);if(ue&&(!me||me.nodeName==="HTML")){var Ce=zt.getOffset(re,ue._element),we=Ce.x,Ae=Math.abs,ze=Ae(we),We=1<<25,Je=ze-We;Ce.x=Ae(Je)<ze?Je*(we<0?-1:1):we,A(ue,re,ue.viewToProject(Ce))}},scroll:T};H[j]=function(re){var ue=Qt._focused=x(re);g||(g=!0,ue._handleMouseEvent("mousedown",re))},z[M]=function(re){var ue=Qt._focused;if(!v){var me=x(re);me?ue!==me&&(ue&&A(ue,re),l||(l=ue),ue=Qt._focused=h=me):h&&h===ue&&(l&&!l.isInserted()&&(l=null),ue=Qt._focused=l,l=null,T())}ue&&A(ue,re)},z[j]=function(){v=!0},z[P]=function(re){var ue=Qt._focused;ue&&g&&ue._handleMouseEvent("mouseup",re),v=g=!1},zt.add(s,z),zt.add(i,{load:T});var R=!1,K=!1,Y={doubleclick:"click",mousedrag:"mousemove"},Z=!1,B,q,D,X,Q,J,W,se;function oe(re,ue,me,Ce,we,Ae,ze){var We=!1,Je;function lt(Pe,Ie){if(Pe.responds(Ie)){if(Je||(Je=new ia(Ie,Ce,we,ue||Pe,Ae?we.subtract(Ae):null)),Pe.emit(Ie,Je)&&(R=!0,Je.prevented&&(K=!0),Je.stopped))return We=!0}else{var Qe=Y[Ie];if(Qe)return lt(Pe,Qe)}}for(;re&&re!==ze&&!lt(re,me);)re=re._parent;return We}function le(re,ue,me,Ce,we,Ae){return re._project.removeOn(me),K=R=!1,Q&&oe(Q,null,me,Ce,we,Ae)||ue&&ue!==Q&&!ue.isDescendant(Q)&&oe(ue,null,me==="mousedrag"?"mousemove":me,Ce,we,Ae,Q)||oe(re,Q||ue||re,me,Ce,we,Ae)}var ge={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:H,_handleMouseEvent:function(re,ue,me){var Ce=this._itemEvents,we=Ce.native[re],Ae=re==="mousemove",ze=this._scope.tool,We=this;function Je(mt){return Ce.virtual[mt]||We.responds(mt)||ze&&ze.responds(mt)}Ae&&g&&Je("mousedrag")&&(re="mousedrag"),me||(me=this.getEventPoint(ue));var lt=this.getBounds().contains(me),Pe=we&&lt&&We._project.hitTest(me,{tolerance:0,fill:!0,stroke:!0}),Ie=Pe&&Pe.item||null,Qe=!1,at={};if(at[re.substr(5)]=!0,we&&Ie!==X&&(X&&oe(X,null,"mouseleave",ue,me),Ie&&oe(Ie,null,"mouseenter",ue,me),X=Ie),Z^lt&&(oe(this,null,lt?"mouseenter":"mouseleave",ue,me),Qe=!0),(lt||at.drag)&&!me.equals(q)&&(le(this,Ie,Ae?re:"mousemove",ue,me,q),Qe=!0),Z=lt,at.down&&lt||at.up&&B){if(le(this,Ie,re,ue,me,B),at.down){if(se=Ie===J&&Date.now()-W<300,D=J=Ie,!K&&Ie){for(var st=Ie;st&&!st.responds("mousedrag");)st=st._parent;st&&(Q=Ie)}B=me}else at.up&&(!K&&Ie===D&&(W=Date.now(),le(this,Ie,se?"doubleclick":"click",ue,me,B),se=!1),D=Q=null);Z=!1,Qe=!0}q=me,Qe&&ze&&(R=ze._handleMouseEvent(re,ue,me,at)||R),ue.cancelable!==!1&&(R&&!at.move||at.down&&Je("mouseup"))&&ue.preventDefault()},_handleKeyEvent:function(re,ue,me,Ce){var we=this._scope,Ae=we.tool,ze;function We(Je){Je.responds(re)&&(Nt=we,Je.emit(re,ze=ze||new fs(re,ue,me,Ce)))}this.isVisible()&&(We(this),Ae&&Ae.responds(re)&&We(Ae))},_countItemEvent:function(re,ue){var me=this._itemEvents,Ce=me.native,we=me.virtual;for(var Ae in ge)Ce[Ae]=(Ce[Ae]||0)+(ge[Ae][re]||0)*ue;we[re]=(we[re]||0)+ue},statics:{updateFocus:T,_resetState:function(){g=v=R=Z=!1,l=h=B=q=D=X=Q=J=W=se=null}}}}),ta=Qt.extend({_class:"CanvasView",initialize:function(h,g){if(!(g instanceof i.HTMLCanvasElement)){var v=L.read(arguments,1);if(v.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));g=oi.getCanvas(v)}var x=this._context=g.getContext("2d");if(x.save(),this._pixelRatio=1,!/^off|false$/.test(p.getAttribute(g,"hidpi"))){var T=i.devicePixelRatio||1,A=Ct.getPrefixed(x,"backingStorePixelRatio")||1;this._pixelRatio=T/A}Qt.call(this,h,g),this._needsUpdate=!0},remove:function l(){return this._context.restore(),l.base.call(this)},_setElementSize:function l(h,g){var v=this._pixelRatio;if(l.base.call(this,h*v,g*v),v!==1){var x=this._element,T=this._context;if(!p.hasAttribute(x,"resize")){var A=x.style;A.width=h+"px",A.height=g+"px"}T.restore(),T.save(),T.scale(v,v)}},getContext:function(){return this._context},getPixelSize:function l(h){var g=Nt.agent,v;if(g&&g.firefox)v=l.base.call(this,h);else{var x=this._context,T=x.font;x.font=h+" serif",v=parseFloat(x.font),x.font=T}return v},getTextWidth:function(l,h){var g=this._context,v=g.font,x=0;g.font=l;for(var T=0,A=h.length;T<A;T++)x=Math.max(x,g.measureText(h[T]).width);return g.font=v,x},update:function(){if(!this._needsUpdate)return!1;var l=this._project,h=this._context,g=this._viewSize;return h.clearRect(0,0,g.width+1,g.height+1),l&&l.draw(h,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ms=a.extend({_class:"Event",initialize:function(h){this.event=h,this.type=h&&h.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Ds.modifiers}}),fs=Ms.extend({_class:"KeyEvent",initialize:function(h,g,v,x){this.type=h,this.event=g,this.key=v,this.character=x},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Ds=new function(){var l={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"	",space:" ",enter:"\r"},g={},v={},x,T,A=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var M=Nt&&Nt.agent;return M&&M.mac?this.meta:this.control}}});function O(M){var P=M.key||M.keyIdentifier;return P=/^U\+/.test(P)?String.fromCharCode(parseInt(P.substr(2),16)):/^Arrow[A-Z]/.test(P)?P.substr(5):P==="Unidentified"||P===t?String.fromCharCode(M.keyCode):P,l[P]||(P.length>1?a.hyphenate(P):P.toLowerCase())}function j(M,P,H,z){var R=Qt._focused,K;if(g[P]=M,M?v[P]=H:delete v[P],P.length>1&&(K=a.camelize(P))in A){A[K]=M;var Y=Nt&&Nt.agent;if(K==="meta"&&Y&&Y.mac)if(M)x={};else{for(var Z in x)Z in v&&j(!1,Z,x[Z],z);x=null}}else M&&x&&(x[P]=H);R&&R._handleKeyEvent(M?"keydown":"keyup",z,P,H)}return zt.add(s,{keydown:function(M){var P=O(M),H=Nt&&Nt.agent;P.length>1||H&&H.chrome&&(M.altKey||H.mac&&M.metaKey||!H.mac&&M.ctrlKey)?j(!0,P,h[P]||(P.length>1?"":P),M):T=P},keypress:function(M){if(T){var P=O(M),H=M.charCode,z=H>=32?String.fromCharCode(H):P.length>1?"":P;P!==T&&(P=z.toLowerCase()),j(!0,P,z,M),T=null}},keyup:function(M){var P=O(M);P in v&&j(!1,P,v[P],M)}}),zt.add(i,{blur:function(M){for(var P in v)j(!1,P,v[P],M)}}),{modifiers:A,isDown:function(M){return!!g[M]}}},ia=Ms.extend({_class:"MouseEvent",initialize:function(h,g,v,x,T){this.type=h,this.event=g,this.point=v,this.target=x,this.delta=T},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ns=Ms.extend({_class:"ToolEvent",_item:null,initialize:function(h,g,v){this.tool=h,this.type=g,this.event=v},_choosePoint:function(l,h){return l||(h?h.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(l){this._point=l},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(l){this._lastPoint=l},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(l){this._downPoint=l},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(l){this._middlePoint=l},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(l){this._delta=l},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(l){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=l},getItem:function(){if(!this._item){var l=this.tool._scope.project.hitTest(this.getPoint());if(l){for(var h=l.item,g=h._parent;/^(Group|CompoundPath)$/.test(g._class);)h=g,g=g._parent;this._item=h}}return this._item},setItem:function(l){this._item=l},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Qs=m.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(h){m.call(this),this._moveCount=-1,this._downCount=-1,this.set(h)},getMinDistance:function(){return this._minDistance},setMinDistance:function(l){this._minDistance=l,l!=null&&this._maxDistance!=null&&l>this._maxDistance&&(this._maxDistance=l)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(l){this._maxDistance=l,this._minDistance!=null&&l!=null&&l<this._minDistance&&(this._minDistance=l)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(l){this._minDistance=this._maxDistance=l},_handleMouseEvent:function(l,h,g,v){Nt=this._scope,v.drag&&!this.responds(l)&&(l="mousemove");var x=v.move||v.drag,T=this.responds(l),A=!1,O=this;function j(P,H){var z=g,R=x?O._point:O._downPoint||z;if(x){if(O._moveCount>=0&&z.equals(R))return!1;if(R&&(P!=null||H!=null)){var K=z.subtract(R),Y=K.getLength();if(Y<(P||0))return!1;H&&(z=R.add(K.normalize(Math.min(Y,H))))}O._moveCount++}return O._point=z,O._lastPoint=R||z,v.down&&(O._moveCount=-1,O._downPoint=z,O._downCount++),!0}function M(){T&&(A=O.emit(l,new Ns(O,l,h))||A)}if(v.down)j(),M();else if(v.up)j(null,this._maxDistance),M();else if(T)for(;j(this._minDistance,this._maxDistance);)M();return A}}),Js=a.extend(u,{_class:"Tween",statics:{easings:new a({linear:function(l){return l},easeInQuad:function(l){return l*l},easeOutQuad:function(l){return l*(2-l)},easeInOutQuad:function(l){return l<.5?2*l*l:-1+2*(2-l)*l},easeInCubic:function(l){return l*l*l},easeOutCubic:function(l){return--l*l*l+1},easeInOutCubic:function(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1},easeInQuart:function(l){return l*l*l*l},easeOutQuart:function(l){return 1- --l*l*l*l},easeInOutQuart:function(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l},easeInQuint:function(l){return l*l*l*l*l},easeOutQuint:function(l){return 1+--l*l*l*l*l},easeInOutQuint:function(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}})},initialize:function l(h,g,v,x,T,A){this.object=h;var O=typeof T,j=O==="function";this.type=j?O:O==="string"?T:"linear",this.easing=j?T:l.easings[this.type],this.duration=x,this.running=!1,this._then=null,this._startTime=null;var M=g||v;this._keys=M?Object.keys(M):[],this._parsedKeys=this._parseKeys(this._keys),this._from=M&&this._getState(g),this._to=M&&this._getState(v),A!==!1&&this.start()},then:function(l){return this._then=l,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(l){if(this.running){l>=1&&(l=1,this.running=!1);for(var h=this.easing(l),g=this._keys,v=function(P){return typeof P=="function"?P(h,l):P},x=0,T=g&&g.length;x<T;x++){var A=g[x],O=v(this._from[A]),j=v(this._to[A]),M=O&&j&&O.__add&&j.__add?j.__subtract(O).__multiply(h).__add(O):(j-O)*h+O;this._setProperty(this._parsedKeys[A],M)}this.responds("update")&&this.emit("update",new a({progress:l,factor:h})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(l){var h=this._startTime,g=h?(l-h)/this.duration:0;h||(this._startTime=l),this.update(g)},_getState:function(l){for(var h=this._keys,g={},v=0,x=h.length;v<x;v++){var T=h[v],A=this._parsedKeys[T],O=this._getProperty(A),j;if(l){var M=this._resolveValue(O,l[T]);this._setProperty(A,M),j=this._getProperty(A),j=j&&j.clone?j.clone():j,this._setProperty(A,O)}else j=O&&O.clone?O.clone():O;g[T]=j}return g},_resolveValue:function(l,h){if(h){if(Array.isArray(h)&&h.length===2){var g=h[0];return g&&g.match&&g.match(/^[+\-\*\/]=/)?this._calculate(l,g[0],h[1]):h}else if(typeof h=="string"){var v=h.match(/^[+\-*/]=(.*)/);if(v){var x=JSON.parse(v[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(l,h[0],x)}}}return h},_calculate:function(l,h,g){return Nt.PaperScript.calculateBinary(l,h,g)},_parseKeys:function(l){for(var h={},g=0,v=l.length;g<v;g++){var x=l[g],T=x.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");h[x]=T.split("/")}return h},_getProperty:function(l,h){for(var g=this.object,v=0,x=l.length-(h||0);v<x&&g;v++)g=g[l[v]];return g},_setProperty:function(l,h){var g=this._getProperty(l,1);g&&(g[l[l.length-1]]=h)}}),er={request:function(l){var h=new e.XMLHttpRequest;return h.open((l.method||"get").toUpperCase(),l.url,a.pick(l.async,!0)),l.mimeType&&h.overrideMimeType(l.mimeType),h.onload=function(){var g=h.status;g===0||g===200?l.onLoad&&l.onLoad.call(h,h.responseText):h.onerror()},h.onerror=function(){var g=h.status,v='Could not load "'+l.url+'" (Status: '+g+")";if(l.onError)l.onError(v,g);else throw new Error(v)},h.send(null)}},oi=a.exports.CanvasProvider={canvases:[],getCanvas:function(l,h,g){if(!i)return null;var v,x=!0;typeof l=="object"&&(h=l.height,l=l.width),this.canvases.length?v=this.canvases.pop():(v=s.createElement("canvas"),x=!1);var T=v.getContext("2d",g||{});if(!T)throw new Error("Canvas "+v+" is unable to provide a 2D context.");return v.width===l&&v.height===h?x&&T.clearRect(0,0,l+1,h+1):(v.width=l,v.height=h),T.save(),v},getContext:function(l,h,g){var v=this.getCanvas(l,h,g);return v?v.getContext("2d",g||{}):null},release:function(l){var h=l&&l.canvas?l.canvas:l;h&&h.getContext&&(h.getContext("2d").restore(),this.canvases.push(h))}},mr=new function(){var l=Math.min,h=Math.max,g=Math.abs,v,x,T,A,O,j,M,P,H,z,R;function K(Q,J,W){return .2989*Q+.587*J+.114*W}function Y(Q,J,W,le){var oe=le-K(Q,J,W);H=Q+oe,z=J+oe,R=W+oe;var le=K(H,z,R),ge=l(H,z,R),re=h(H,z,R);if(ge<0){var ue=le-ge;H=le+(H-le)*le/ue,z=le+(z-le)*le/ue,R=le+(R-le)*le/ue}if(re>255){var me=255-le,Ce=re-le;H=le+(H-le)*me/Ce,z=le+(z-le)*me/Ce,R=le+(R-le)*me/Ce}}function Z(Q,J,W){return h(Q,J,W)-l(Q,J,W)}function B(Q,J,W,se){var oe=[Q,J,W],le=h(Q,J,W),ge=l(Q,J,W),re;ge=ge===Q?0:ge===J?1:2,le=le===Q?0:le===J?1:2,re=l(ge,le)===0?h(ge,le)===1?2:1:0,oe[le]>oe[ge]?(oe[re]=(oe[re]-oe[ge])*se/(oe[le]-oe[ge]),oe[le]=se):oe[re]=oe[le]=0,oe[ge]=0,H=oe[0],z=oe[1],R=oe[2]}var q={multiply:function(){H=O*v/255,z=j*x/255,R=M*T/255},screen:function(){H=O+v-O*v/255,z=j+x-j*x/255,R=M+T-M*T/255},overlay:function(){H=O<128?2*O*v/255:255-2*(255-O)*(255-v)/255,z=j<128?2*j*x/255:255-2*(255-j)*(255-x)/255,R=M<128?2*M*T/255:255-2*(255-M)*(255-T)/255},"soft-light":function(){var Q=v*O/255;H=Q+O*(255-(255-O)*(255-v)/255-Q)/255,Q=x*j/255,z=Q+j*(255-(255-j)*(255-x)/255-Q)/255,Q=T*M/255,R=Q+M*(255-(255-M)*(255-T)/255-Q)/255},"hard-light":function(){H=v<128?2*v*O/255:255-2*(255-v)*(255-O)/255,z=x<128?2*x*j/255:255-2*(255-x)*(255-j)/255,R=T<128?2*T*M/255:255-2*(255-T)*(255-M)/255},"color-dodge":function(){H=O===0?0:v===255?255:l(255,255*O/(255-v)),z=j===0?0:x===255?255:l(255,255*j/(255-x)),R=M===0?0:T===255?255:l(255,255*M/(255-T))},"color-burn":function(){H=O===255?255:v===0?0:h(0,255-(255-O)*255/v),z=j===255?255:x===0?0:h(0,255-(255-j)*255/x),R=M===255?255:T===0?0:h(0,255-(255-M)*255/T)},darken:function(){H=O<v?O:v,z=j<x?j:x,R=M<T?M:T},lighten:function(){H=O>v?O:v,z=j>x?j:x,R=M>T?M:T},difference:function(){H=O-v,H<0&&(H=-H),z=j-x,z<0&&(z=-z),R=M-T,R<0&&(R=-R)},exclusion:function(){H=O+v*(255-O-O)/255,z=j+x*(255-j-j)/255,R=M+T*(255-M-M)/255},hue:function(){B(v,x,T,Z(O,j,M)),Y(H,z,R,K(O,j,M))},saturation:function(){B(O,j,M,Z(v,x,T)),Y(H,z,R,K(O,j,M))},luminosity:function(){Y(O,j,M,K(v,x,T))},color:function(){Y(v,x,T,K(O,j,M))},add:function(){H=l(O+v,255),z=l(j+x,255),R=l(M+T,255)},subtract:function(){H=h(O-v,0),z=h(j-x,0),R=h(M-T,0)},average:function(){H=(O+v)/2,z=(j+x)/2,R=(M+T)/2},negation:function(){H=255-g(255-v-O),z=255-g(255-x-j),R=255-g(255-T-M)}},D=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Q){this[Q]=!0},{}),X=oi.getContext(1,1,{willReadFrequently:!0});X&&(a.each(q,function(Q,J){var W=J==="darken",se=!1;X.save();try{X.fillStyle=W?"#300":"#a00",X.fillRect(0,0,1,1),X.globalCompositeOperation=J,X.globalCompositeOperation===J&&(X.fillStyle=W?"#a00":"#300",X.fillRect(0,0,1,1),se=X.getImageData(0,0,1,1).data[0]!==W?170:51)}catch{}X.restore(),D[J]=se}),oi.release(X)),this.process=function(Q,J,W,se,oe){var le=J.canvas,ge=Q==="normal";if(ge||D[Q])W.save(),W.setTransform(1,0,0,1,0,0),W.globalAlpha=se,ge||(W.globalCompositeOperation=Q),W.drawImage(le,oe.x,oe.y),W.restore();else{var re=q[Q];if(!re)return;for(var ue=W.getImageData(oe.x,oe.y,le.width,le.height),me=ue.data,Ce=J.getImageData(0,0,le.width,le.height).data,we=0,Ae=me.length;we<Ae;we+=4){v=Ce[we],O=me[we],x=Ce[we+1],j=me[we+1],T=Ce[we+2],M=me[we+2],A=Ce[we+3],P=me[we+3],re();var ze=A*se/255,We=1-ze;me[we]=ze*H+We*O,me[we+1]=ze*z+We*j,me[we+2]=ze*R+We*M,me[we+3]=A*se+We*P}W.putImageData(ue,oe.x,oe.y)}}},Wt=new function(){var l="http://www.w3.org/2000/svg",h="http://www.w3.org/2000/xmlns",g="http://www.w3.org/1999/xlink",v={href:g,xlink:h,xmlns:h+"/","xmlns:xlink":h+"/"};function x(O,j,M){return A(s.createElementNS(l,O),j,M)}function T(O,j){var M=v[j],P=M?O.getAttributeNS(M,j):O.getAttribute(j);return P==="null"?null:P}function A(O,j,M){for(var P in j){var H=j[P],z=v[P];typeof H=="number"&&M&&(H=M.number(H)),z?O.setAttributeNS(z,P,H):O.setAttribute(P,H)}return O}return{svg:l,xmlns:h,xlink:g,create:x,get:T,set:A}},$i=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(l,h){return!h&&(l instanceof it||l instanceof Be||l instanceof tt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(l,h){var g=a.capitalize(h),v=l[2];this[h]={type:l[1],property:h,attribute:l[0],toSVG:v,fromSVG:v&&a.each(v,function(x,T){this[x]=T},{}),exportFilter:l[3],get:"get"+g,set:"set"+g}},{});new function(){var l;function h(q,D,X){var Q=new a,J=q.getTranslation();if(D){var W;q.isInvertible()?(q=q._shiftless(),W=q._inverseTransform(J),J=null):W=new E,Q[X?"cx":"x"]=W.x,Q[X?"cy":"y"]=W.y}if(!q.isIdentity()){var se=q.decompose();if(se){var oe=[],le=se.rotation,ge=se.scaling,re=se.skewing;J&&!J.isZero()&&oe.push("translate("+l.point(J)+")"),le&&oe.push("rotate("+l.number(le)+")"),(!C.isZero(ge.x-1)||!C.isZero(ge.y-1))&&oe.push("scale("+l.point(ge)+")"),re.x&&oe.push("skewX("+l.number(re.x)+")"),re.y&&oe.push("skewY("+l.number(re.y)+")"),Q.transform=oe.join(" ")}else Q.transform="matrix("+q.getValues().join(",")+")"}return Q}function g(q,D){for(var X=h(q._matrix),Q=q._children,J=Wt.create("g",X,l),W=0,se=Q.length;W<se;W++){var oe=Q[W],le=Z(oe,D);if(le)if(oe.isClipMask()){var ge=Wt.create("clipPath");ge.appendChild(le),K(oe,ge,"clip"),Wt.set(J,{"clip-path":"url(#"+ge.id+")"})}else J.appendChild(le)}return J}function v(q,D){var X=h(q._matrix,!0),Q=q.getSize(),J=q.getImage();return X.x-=Q.width/2,X.y-=Q.height/2,X.width=Q.width,X.height=Q.height,X.href=D.embedImages==!1&&J&&J.src||q.toDataURL(),Wt.create("image",X,l)}function x(q,D){var X=D.matchShapes;if(X){var Q=q.toShape(!1);if(Q)return T(Q)}var J=q._segments,W=J.length,se,oe=h(q._matrix);if(X&&W>=2&&!q.hasHandles())if(W>2){se=q._closed?"polygon":"polyline";for(var le=[],ge=0;ge<W;ge++)le.push(l.point(J[ge]._point));oe.points=le.join(" ")}else{se="line";var re=J[0]._point,ue=J[1]._point;oe.set({x1:re.x,y1:re.y,x2:ue.x,y2:ue.y})}else se="path",oe.d=q.getPathData(null,D.precision);return Wt.create(se,oe,l)}function T(q){var D=q._type,X=q._radius,Q=h(q._matrix,!0,D!=="rectangle");if(D==="rectangle"){D="rect";var J=q._size,W=J.width,se=J.height;Q.x-=W/2,Q.y-=se/2,Q.width=W,Q.height=se,X.isZero()&&(X=null)}return X&&(D==="circle"?Q.r=X:(Q.rx=X.width,Q.ry=X.height)),Wt.create(D,Q,l)}function A(q,D){var X=h(q._matrix),Q=q.getPathData(null,D.precision);return Q&&(X.d=Q),Wt.create("path",X,l)}function O(q,D){var X=h(q._matrix,!0),Q=q._definition,J=R(Q,"symbol"),W=Q._item,se=W.getStrokeBounds();return J||(J=Wt.create("symbol",{viewBox:l.rectangle(se)}),J.appendChild(Z(W,D)),K(Q,J,"symbol")),X.href="#"+J.id,X.x+=se.x,X.y+=se.y,X.width=se.width,X.height=se.height,X.overflow="visible",Wt.create("use",X,l)}function j(q){var D=R(q,"color");if(!D){var X=q.getGradient(),Q=X._radial,J=q.getOrigin(),W=q.getDestination(),se;if(Q){se={cx:J.x,cy:J.y,r:J.getDistance(W)};var oe=q.getHighlight();oe&&(se.fx=oe.x,se.fy=oe.y)}else se={x1:J.x,y1:J.y,x2:W.x,y2:W.y};se.gradientUnits="userSpaceOnUse",D=Wt.create((Q?"radial":"linear")+"Gradient",se,l);for(var le=X._stops,ge=0,re=le.length;ge<re;ge++){var ue=le[ge],me=ue._color,Ce=me.getAlpha(),we=ue._offset;se={offset:we??ge/(re-1)},me&&(se["stop-color"]=me.toCSS(!0)),Ce<1&&(se["stop-opacity"]=Ce),D.appendChild(Wt.create("stop",se,l))}K(q,D,"color")}return"url(#"+D.id+")"}function M(q){var D=Wt.create("text",h(q._matrix,!0),l);return D.textContent=q._content,D}var P={Group:g,Layer:g,Raster:v,Path:x,Shape:T,CompoundPath:A,SymbolItem:O,PointText:M};function H(q,D,X,Q){var J={},W=!Q&&q.getParent(),se=[];return q._name!=null&&(J.id=q._name),a.each($i,function(oe){var le=oe.get,ge=oe.type,re=q[le]();if(oe.exportFilter?oe.exportFilter(q,re):X.reduceAttributes==!1||!W||!a.equals(W[le](),re)){if(ge==="color"&&re!=null){var ue=re.getAlpha();ue<1&&(J[oe.attribute+"-opacity"]=ue)}ge==="style"?se.push(oe.attribute+": "+re):J[oe.attribute]=re==null?"none":ge==="color"?re.gradient?j(re):re.toCSS(!0):ge==="array"?re.join(","):ge==="lookup"?oe.toSVG[re]:re}}),se.length&&(J.style=se.join(";")),J.opacity===1&&delete J.opacity,q._visible||(J.visibility="hidden"),Wt.set(D,J,l)}var z;function R(q,D){return z||(z={ids:{},svgs:{}}),q&&z.svgs[D+"-"+(q._id||q.__id||(q.__id=N.get("svg")))]}function K(q,D,X){z||R();var Q=z.ids[X]=(z.ids[X]||0)+1;D.id=X+"-"+Q,z.svgs[X+"-"+(q._id||q.__id)]=D}function Y(q,D){var X=q,Q=null;if(z){X=q.nodeName.toLowerCase()==="svg"&&q;for(var J in z.svgs)Q||(X||(X=Wt.create("svg"),X.appendChild(q)),Q=X.insertBefore(Wt.create("defs"),X.firstChild)),Q.appendChild(z.svgs[J]);z=null}return D.asString?new e.XMLSerializer().serializeToString(X):X}function Z(q,D,X){var Q=P[q._class],J=Q&&Q(q,D);if(J){var W=D.onExport;W&&(J=W(q,J,D)||J);var se=JSON.stringify(q._data);se&&se!=="{}"&&se!=="null"&&J.setAttribute("data-paper-data",se)}return J&&H(q,J,D,X)}function B(q){return q||(q={}),l=new b(q.precision),q}I.inject({exportSVG:function(q){return q=B(q),Y(Z(this,q,!0),q)}}),be.inject({exportSVG:function(q){q=B(q);var D=this._children,X=this.getView(),Q=a.pick(q.bounds,"view"),J=q.matrix||Q==="view"&&X._matrix,W=J&&ne.read([J]),se=Q==="view"?new G([0,0],X.getViewSize()):Q==="content"?I._getBounds(D,W,{stroke:!0}).rect:G.read([Q],0,{readNull:!0}),oe={version:"1.1",xmlns:Wt.svg,"xmlns:xlink":Wt.xlink};se&&(oe.width=se.width,oe.height=se.height,(se.x||se.x===0||se.y||se.y===0)&&(oe.viewBox=l.rectangle(se)));var le=Wt.create("svg",oe,l),ge=le;W&&!W.isIdentity()&&(ge=le.appendChild(Wt.create("g",h(W),l)));for(var re=0,ue=D.length;re<ue;re++)ge.appendChild(Z(D[re],q,!0));return Y(le,q)}})},new function(){var l={},h;function g(D,X,Q,J,W,se){var oe=Wt.get(D,X)||se,le=oe==null?J?null:Q?"":0:Q?oe:parseFloat(oe);return/%\s*$/.test(oe)?le/100*(W?1:h[/x|^width/.test(X)?"width":"height"]):le}function v(D,X,Q,J,W,se,oe){return X=g(D,X||"x",!1,J,W,se),Q=g(D,Q||"y",!1,J,W,oe),J&&(X==null||Q==null)?null:new E(X,Q)}function x(D,X,Q,J,W){return X=g(D,X||"width",!1,J,W),Q=g(D,Q||"height",!1,J,W),J&&(X==null||Q==null)?null:new L(X,Q)}function T(D,X,Q){return D==="none"?null:X==="number"?parseFloat(D):X==="array"?D?D.split(/[\s,]+/g).map(parseFloat):[]:X==="color"?Z(D)||D:X==="lookup"?Q[D]:D}function A(D,X,Q,J){var W=D.childNodes,se=X==="clippath",oe=X==="defs",le=new Ee,ge=le._project,re=ge._currentStyle,ue=[];if(!se&&!oe&&(le=Y(le,D,J),ge._currentStyle=le._style.clone()),J)for(var me=D.querySelectorAll("defs"),Ce=0,we=me.length;Ce<we;Ce++)B(me[Ce],Q,!1);for(var Ce=0,we=W.length;Ce<we;Ce++){var Ae=W[Ce],ze;Ae.nodeType===1&&!/^defs$/i.test(Ae.nodeName)&&(ze=B(Ae,Q,!1))&&!(ze instanceof et)&&ue.push(ze)}return le.addChildren(ue),se&&(le=Y(le.reduce(),D,J)),ge._currentStyle=re,(se||oe)&&(le.remove(),le=null),le}function O(D,X){for(var Q=D.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),J=[],W=0,se=Q.length;W<se;W+=2)J.push(new E(parseFloat(Q[W]),parseFloat(Q[W+1])));var oe=new rt(J);return X==="polygon"&&oe.closePath(),oe}function j(D){return it.create(D.getAttribute("d"))}function M(D,X){var Q=(g(D,"href",!0)||"").substring(1),J=X==="radialgradient",W;if(Q)W=l[Q].getGradient(),W._radial^J&&(W=W.clone(),W._radial=J);else{for(var se=D.childNodes,oe=[],le=0,ge=se.length;le<ge;le++){var re=se[le];re.nodeType===1&&oe.push(Y(new Lt,re))}W=new wt(oe,J)}var ue,me,Ce,we=g(D,"gradientUnits",!0)!=="userSpaceOnUse";J?(ue=v(D,"cx","cy",!1,we,"50%","50%"),me=ue.add(g(D,"r",!1,!1,we,"50%"),0),Ce=v(D,"fx","fy",!0,we)):(ue=v(D,"x1","y1",!1,we,"0%","0%"),me=v(D,"x2","y2",!1,we,"100%","0%"));var Ae=Y(new ut(W,ue,me,Ce),D);return Ae._scaleToBounds=we,null}var P={"#document":function(D,X,Q,J){for(var W=D.childNodes,se=0,oe=W.length;se<oe;se++){var le=W[se];if(le.nodeType===1)return B(le,Q,J)}},g:A,svg:A,clippath:A,polygon:O,polyline:O,path:j,lineargradient:M,radialgradient:M,image:function(D){var X=new ct(g(D,"href",!0));return X.on("load",function(){var Q=x(D);this.setSize(Q);var J=v(D).add(Q.divide(2));this._matrix.append(new ne().translate(J))}),X},symbol:function(D,X,Q,J){return new et(A(D,X,Q,J),!0)},defs:A,use:function(D){var X=(g(D,"href",!0)||"").substring(1),Q=l[X],J=v(D);return Q?Q instanceof et?Q.place(J):Q.clone().translate(J):null},circle:function(D){return new Be.Circle(v(D,"cx","cy"),g(D,"r"))},ellipse:function(D){return new Be.Ellipse({center:v(D,"cx","cy"),radius:x(D,"rx","ry")})},rect:function(D){return new Be.Rectangle(new G(v(D),x(D)),x(D,"rx","ry"))},line:function(D){return new rt.Line(v(D,"x1","y1"),v(D,"x2","y2"))},text:function(D){var X=new ot(v(D).add(v(D,"dx","dy")));return X.setContent(D.textContent.trim()||""),X},switch:A};function H(D,X,Q,J){if(D.transform){for(var W=(J.getAttribute(Q)||"").split(/\)\s*/g),se=new ne,oe=0,le=W.length;oe<le;oe++){var ge=W[oe];if(!ge)break;for(var re=ge.split(/\(\s*/),ue=re[0].trim(),me=re[1].split(/[\s,]+/g),Ce=0,we=me.length;Ce<we;Ce++)me[Ce]=parseFloat(me[Ce]);switch(ue){case"matrix":se.append(new ne(me[0],me[1],me[2],me[3],me[4],me[5]));break;case"rotate":se.rotate(me[0],me[1]||0,me[2]||0);break;case"translate":se.translate(me[0],me[1]||0);break;case"scale":se.scale(me);break;case"skewX":se.skew(me[0],0);break;case"skewY":se.skew(0,me[0]);break}}D.transform(se)}}function z(D,X,Q){var J=Q==="fill-opacity"?"getFillColor":"getStrokeColor",W=D[J]&&D[J]();W&&W.setAlpha(parseFloat(X))}var R=a.set(a.each($i,function(D){this[D.attribute]=function(X,Q){if(X[D.set]&&(X[D.set](T(Q,D.type,D.fromSVG)),D.type==="color")){var J=X[D.get]();if(J&&J._scaleToBounds){var W=X.getBounds();J.transform(new ne().translate(W.getPoint()).scale(W.getSize()))}}}},{}),{id:function(D,X){l[X]=D,D.setName&&D.setName(X)},"clip-path":function(D,X){var Q=Z(X);if(Q)if(Q=Q.clone(),Q.setClipMask(!0),D instanceof Ee)D.insertChild(0,Q);else return new Ee(Q,D)},gradientTransform:H,transform:H,"fill-opacity":z,"stroke-opacity":z,visibility:function(D,X){D.setVisible&&D.setVisible(X==="visible")},display:function(D,X){D.setVisible&&D.setVisible(X!==null)},"stop-color":function(D,X){D.setColor&&D.setColor(X)},"stop-opacity":function(D,X){D._color&&D._color.setAlpha(parseFloat(X))},offset:function(D,X){if(D.setOffset){var Q=X.match(/(.*)%$/);D.setOffset(Q?Q[1]/100:parseFloat(X))}},viewBox:function(D,X,Q,J,W){var se=new G(T(X,"array")),oe=x(J,null,null,!0),le,ge;if(D instanceof Ee){var re=oe?oe.divide(se.getSize()):1,ge=new ne().scale(re).translate(se.getPoint().negate());le=D}else D instanceof et&&(oe&&se.setSize(oe),le=D._item);if(le){if(K(J,"overflow",W)!=="visible"){var ue=new Be.Rectangle(se);ue.setClipMask(!0),le.addChild(ue)}ge&&le.transform(ge)}}});function K(D,X,Q){var J=D.attributes[X],W=J&&J.value;if(!W&&D.style){var se=a.camelize(X);W=D.style[se],!W&&Q.node[se]!==Q.parent[se]&&(W=Q.node[se])}return W?W==="none"?null:W:t}function Y(D,X,Q){var J=X.parentNode,W={node:Ct.getStyles(X)||{},parent:!Q&&!/^defs$/i.test(J.tagName)&&Ct.getStyles(J)||{}};return a.each(R,function(se,oe){var le=K(X,oe,W);D=le!==t&&se(D,le,oe,X,W)||D}),D}function Z(D){var X=D&&D.match(/\((?:["'#]*)([^"')]+)/),Q=X&&X[1],J=Q&&l[i?Q.replace(i.location.href.split("#")[0]+"#",""):Q];return J&&J._scaleToBounds&&(J=J.clone(),J._scaleToBounds=!0),J}function B(D,X,Q){var J=D.nodeName.toLowerCase(),W=J!=="#document",se=s.body,oe,le,ge;Q&&W&&(h=Nt.getView().getSize(),h=x(D,null,null,!0)||h,oe=Wt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),le=D.parentNode,ge=D.nextSibling,oe.appendChild(D),se.appendChild(oe));var re=Nt.settings,ue=re.applyMatrix,me=re.insertItems;re.applyMatrix=!1,re.insertItems=!1;var Ce=P[J],we=Ce&&Ce(D,J,X,Q)||null;if(re.insertItems=me,re.applyMatrix=ue,we){W&&!(we instanceof Ee)&&(we=Y(we,D,Q));var Ae=X.onImport,ze=W&&D.getAttribute("data-paper-data");Ae&&(we=Ae(D,we,X)||we),X.expandShapes&&we instanceof Be&&(we.remove(),we=we.toPath()),ze&&(we._data=JSON.parse(ze))}return oe&&(se.removeChild(oe),le&&(ge?le.insertBefore(D,ge):le.appendChild(D))),Q&&(l={},we&&a.pick(X.applyMatrix,ue)&&we.matrix.apply(!0,!0)),we}function q(D,X,Q){if(!D)return null;X=typeof X=="function"?{onLoad:X}:X||{};var J=Nt,W=null;function se(re){try{var ue=typeof re=="object"?re:new e.DOMParser().parseFromString(re.trim(),"image/svg+xml");if(!ue.nodeName)throw ue=null,new Error("Unsupported SVG source: "+D);Nt=J,W=B(ue,X,!0),(!X||X.insert!==!1)&&Q._insertItem(t,W);var me=X.onLoad;me&&me(W,re)}catch(Ce){oe(Ce)}}function oe(re,ue){var me=X.onError;if(me)me(re,ue);else throw new Error(re)}if(typeof D=="string"&&!/^[\s\S]*</.test(D)){var le=s.getElementById(D);le?se(le):er.request({url:D,async:!0,onLoad:se,onError:oe})}else if(typeof File<"u"&&D instanceof File){var ge=new FileReader;return ge.onload=function(){se(ge.result)},ge.onerror=function(){oe(ge.error)},ge.readAsText(D)}else se(D);return W}I.inject({importSVG:function(D,X){return q(D,X,this)}}),be.inject({importSVG:function(D,X){return this.activate(),q(D,X,this)}})},a.exports.PaperScript=(function(){var l=this,h=l.acorn;if(!h&&typeof j5<"u")try{h=R5()}catch{}if(!h){var g,v;h=g=v={},(function(Y,Z){if(typeof g=="object"&&typeof v=="object")return Z(g);if(typeof t=="function"&&t.amd)return t(["exports"],Z);Z(Y.acorn||(Y.acorn={}))})(this,function(Y){Y.version="0.5.0";var Z,B,q,D;Y.parse=function(ce,ve){return B=String(ce),q=B.length,Q(ve),gu(),Do(Z.program)};var X=Y.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Q(ce){Z=ce||{};for(var ve in X)Object.prototype.hasOwnProperty.call(Z,ve)||(Z[ve]=X[ve]);D=Z.sourceFile||null}var J=Y.getLineInfo=function(ce,ve){for(var Re=1,Ue=0;;){aa.lastIndex=Ue;var _t=aa.exec(ce);if(_t&&_t.index<ve)++Re,Ue=_t.index+_t[0].length;else break}return{line:Re,column:ve-Ue}};Y.tokenize=function(ce,ve){B=String(ce),q=B.length,Q(ve),gu();var Re={};function Ue(_t){return ze=oe,wr(_t),Re.start=se,Re.end=oe,Re.startLoc=le,Re.endLoc=ge,Re.type=re,Re.value=ue,Re}return Ue.jumpTo=function(_t,Ot){if(W=_t,Z.locations){Ce=1,we=aa.lastIndex=0;for(var St;(St=aa.exec(B))&&St.index<_t;)++Ce,we=St.index+St[0].length}me=Ot,la()},Ue};var W,se,oe,le,ge,re,ue,me,Ce,we,Ae,ze,We,Je,lt,Pe;function Ie(ce,ve){var Re=J(B,ce);ve+=" ("+Re.line+":"+Re.column+")";var Ue=new SyntaxError(ve);throw Ue.pos=ce,Ue.loc=Re,Ue.raisedAt=W,Ue}var Qe=[],at={type:"num"},st={type:"regexp"},mt={type:"string"},pt={type:"name"},xt={type:"eof"},gt={keyword:"break"},Tt={keyword:"case",beforeExpr:!0},Ci={keyword:"catch"},Jt={keyword:"continue"},hi={keyword:"debugger"},xi={keyword:"default"},$e={keyword:"do",isLoop:!0},si={keyword:"else",beforeExpr:!0},fi={keyword:"finally"},pi={keyword:"for",isLoop:!0},Ki={keyword:"function"},Pi={keyword:"if"},mi={keyword:"return",beforeExpr:!0},xn={keyword:"switch"},Qi={keyword:"throw",beforeExpr:!0},Ji={keyword:"try"},zn={keyword:"var"},vi={keyword:"while",isLoop:!0},en={keyword:"with"},fn={keyword:"new",beforeExpr:!0},vr={keyword:"this"},Ya={keyword:"null",atomValue:null},na={keyword:"true",atomValue:!0},Rs={keyword:"false",atomValue:!1},yr={keyword:"in",binop:7,beforeExpr:!0},Ls={break:gt,case:Tt,catch:Ci,continue:Jt,debugger:hi,default:xi,do:$e,else:si,finally:fi,for:pi,function:Ki,if:Pi,return:mi,switch:xn,throw:Qi,try:Ji,var:zn,while:vi,with:en,null:Ya,true:na,false:Rs,new:fn,in:yr,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:vr,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},In={type:"[",beforeExpr:!0},xr={type:"]"},ds={type:"{",beforeExpr:!0},Tn={type:"}"},At={type:"(",beforeExpr:!0},kn={type:")"},Fn={type:",",beforeExpr:!0},rn={type:";",beforeExpr:!0},tn={type:":",beforeExpr:!0},br={type:"."},_r={type:"?",beforeExpr:!0},gs={binop:10,beforeExpr:!0},f={isAssign:!0,beforeExpr:!0},S={isAssign:!0,beforeExpr:!0},F={postfix:!0,prefix:!0,isUpdate:!0},$={prefix:!0,beforeExpr:!0},ae={binop:1,beforeExpr:!0},Te={binop:2,beforeExpr:!0},Me={binop:3,beforeExpr:!0},Ze={binop:4,beforeExpr:!0},Ke={binop:5,beforeExpr:!0},kt={binop:6,beforeExpr:!0},Dt={binop:7,beforeExpr:!0},ti={binop:8,beforeExpr:!0},Ei={binop:9,prefix:!0,beforeExpr:!0},ps={binop:10,beforeExpr:!0};Y.tokTypes={bracketL:In,bracketR:xr,braceL:ds,braceR:Tn,parenL:At,parenR:kn,comma:Fn,semi:rn,colon:tn,dot:br,question:_r,slash:gs,eq:f,name:pt,eof:xt,num:at,regexp:st,string:mt};for(var ms in Ls)Y.tokTypes["_"+ms]=Ls[ms];function bi(ce){ce=ce.split(" ");var ve="",Re=[];e:for(var Ue=0;Ue<ce.length;++Ue){for(var _t=0;_t<Re.length;++_t)if(Re[_t][0].length==ce[Ue].length){Re[_t].push(ce[Ue]);continue e}Re.push([ce[Ue]])}function Ot(Gt){if(Gt.length==1)return ve+="return str === "+JSON.stringify(Gt[0])+";";ve+="switch(str){";for(var Un=0;Un<Gt.length;++Un)ve+="case "+JSON.stringify(Gt[Un])+":";ve+="return true}return false;"}if(Re.length>3){Re.sort(function(Gt,Un){return Un.length-Gt.length}),ve+="switch(str.length){";for(var Ue=0;Ue<Re.length;++Ue){var St=Re[Ue];ve+="case "+St[0].length+":",Ot(St)}ve+="}"}else Ot(ce);return new Function("str",ve)}var bn=bi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ts=bi("class enum extends super const export import"),sa=bi("implements interface let package private protected public static yield"),To=bi("eval arguments"),jl=bi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ml=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ra="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ko="------------------------------------------------------------------------------------------------------------------------------------------",Dl=new RegExp("["+ra+"]"),Rf=new RegExp("["+ra+ko+"]"),Ao=/[\n\r\u2028\u2029]/,aa=/\r\n|[\n\r\u2028\u2029]/g,oa=Y.isIdentifierStart=function(ce){return ce<65?ce===36:ce<91?!0:ce<97?ce===95:ce<123?!0:ce>=170&&Dl.test(String.fromCharCode(ce))},du=Y.isIdentifierChar=function(ce){return ce<48?ce===36:ce<58?!0:ce<65?!1:ce<91?!0:ce<97?ce===95:ce<123?!0:ce>=170&&Rf.test(String.fromCharCode(ce))};function Sr(){this.line=Ce,this.column=W-we}function gu(){Ce=1,W=we=0,me=!0,la()}function Fi(ce,ve){oe=W,Z.locations&&(ge=new Sr),re=ce,la(),ue=ve,me=ce.beforeExpr}function Lf(){var ce=Z.onComment&&Z.locations&&new Sr,ve=W,Re=B.indexOf("*/",W+=2);if(Re===-1&&Ie(W-2,"Unterminated comment"),W=Re+2,Z.locations){aa.lastIndex=ve;for(var Ue;(Ue=aa.exec(B))&&Ue.index<W;)++Ce,we=Ue.index+Ue[0].length}Z.onComment&&Z.onComment(!0,B.slice(ve+2,Re),ve,W,ce,Z.locations&&new Sr)}function Oo(){for(var ce=W,ve=Z.onComment&&Z.locations&&new Sr,Re=B.charCodeAt(W+=2);W<q&&Re!==10&&Re!==13&&Re!==8232&&Re!==8233;)++W,Re=B.charCodeAt(W);Z.onComment&&Z.onComment(!1,B.slice(ce+2,W),ce,W,ve,Z.locations&&new Sr)}function la(){for(;W<q;){var ce=B.charCodeAt(W);if(ce===32)++W;else if(ce===13){++W;var ve=B.charCodeAt(W);ve===10&&++W,Z.locations&&(++Ce,we=W)}else if(ce===10||ce===8232||ce===8233)++W,Z.locations&&(++Ce,we=W);else if(ce>8&&ce<14)++W;else if(ce===47){var ve=B.charCodeAt(W+1);if(ve===42)Lf();else if(ve===47)Oo();else break}else if(ce===160)++W;else if(ce>=5760&&Ml.test(String.fromCharCode(ce)))++W;else break}}function Pf(){var ce=B.charCodeAt(W+1);return ce>=48&&ce<=57?vu(!0):(++W,Fi(br))}function Bf(){var ce=B.charCodeAt(W+1);return me?(++W,mu()):ce===61?Vi(S,2):Vi(gs,1)}function zf(){var ce=B.charCodeAt(W+1);return ce===61?Vi(S,2):Vi(ps,1)}function Nl(ce){var ve=B.charCodeAt(W+1);return ve===ce?Vi(ce===124?ae:Te,2):ve===61?Vi(S,2):Vi(ce===124?Me:Ke,1)}function If(){var ce=B.charCodeAt(W+1);return ce===61?Vi(S,2):Vi(Ze,1)}function Ff(ce){var ve=B.charCodeAt(W+1);return ve===ce?ve==45&&B.charCodeAt(W+2)==62&&Ao.test(B.slice(ze,W))?(W+=3,Oo(),la(),wr()):Vi(F,2):ve===61?Vi(S,2):Vi(Ei,1)}function Vf(ce){var ve=B.charCodeAt(W+1),Re=1;return ve===ce?(Re=ce===62&&B.charCodeAt(W+2)===62?3:2,B.charCodeAt(W+Re)===61?Vi(S,Re+1):Vi(ti,Re)):ve==33&&ce==60&&B.charCodeAt(W+2)==45&&B.charCodeAt(W+3)==45?(W+=4,Oo(),la(),wr()):(ve===61&&(Re=B.charCodeAt(W+2)===61?3:2),Vi(Dt,Re))}function pu(ce){var ve=B.charCodeAt(W+1);return ve===61?Vi(kt,B.charCodeAt(W+2)===61?3:2):Vi(ce===61?f:$,1)}function Uf(ce){switch(ce){case 46:return Pf();case 40:return++W,Fi(At);case 41:return++W,Fi(kn);case 59:return++W,Fi(rn);case 44:return++W,Fi(Fn);case 91:return++W,Fi(In);case 93:return++W,Fi(xr);case 123:return++W,Fi(ds);case 125:return++W,Fi(Tn);case 58:return++W,Fi(tn);case 63:return++W,Fi(_r);case 48:var ve=B.charCodeAt(W+1);if(ve===120||ve===88)return Hf();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return vu(!1);case 34:case 39:return Yf(ce);case 47:return Bf();case 37:case 42:return zf();case 124:case 38:return Nl(ce);case 94:return If();case 43:case 45:return Ff(ce);case 60:case 62:return Vf(ce);case 61:case 33:return pu(ce);case 126:return Vi($,1)}return!1}function wr(ce){if(ce?W=se+1:se=W,Z.locations&&(le=new Sr),ce)return mu();if(W>=q)return Fi(xt);var ve=B.charCodeAt(W);if(oa(ve)||ve===92)return yu();var Re=Uf(ve);if(Re===!1){var Ue=String.fromCharCode(ve);if(Ue==="\\"||Dl.test(Ue))return yu();Ie(W,"Unexpected character '"+Ue+"'")}return Re}function Vi(ce,ve){var Re=B.slice(W,W+ve);W+=ve,Fi(ce,Re)}function mu(){for(var _t="",ce,ve,Re=W;;){W>=q&&Ie(Re,"Unterminated regular expression");var Ue=B.charAt(W);if(Ao.test(Ue)&&Ie(Re,"Unterminated regular expression"),ce)ce=!1;else{if(Ue==="[")ve=!0;else if(Ue==="]"&&ve)ve=!1;else if(Ue==="/"&&!ve)break;ce=Ue==="\\"}++W}var _t=B.slice(Re,W);++W;var Ot=ca();Ot&&!/^[gmsiy]*$/.test(Ot)&&Ie(Re,"Invalid regexp flag");try{var St=new RegExp(_t,Ot)}catch(Gt){Gt instanceof SyntaxError&&Ie(Re,Gt.message),Ie(Gt)}return Fi(st,St)}function Xa(ce,ve){for(var Re=W,Ue=0,_t=0,Ot=ve??1/0;_t<Ot;++_t){var St=B.charCodeAt(W),Gt;if(St>=97?Gt=St-97+10:St>=65?Gt=St-65+10:St>=48&&St<=57?Gt=St-48:Gt=1/0,Gt>=ce)break;++W,Ue=Ue*ce+Gt}return W===Re||ve!=null&&W-Re!==ve?null:Ue}function Hf(){W+=2;var ce=Xa(16);return ce==null&&Ie(se+2,"Expected hexadecimal number"),oa(B.charCodeAt(W))&&Ie(W,"Identifier directly after number"),Fi(at,ce)}function vu(ce){var ve=W,Re=!1,Ue=B.charCodeAt(W)===48;!ce&&Xa(10)===null&&Ie(ve,"Invalid number"),B.charCodeAt(W)===46&&(++W,Xa(10),Re=!0);var _t=B.charCodeAt(W);(_t===69||_t===101)&&(_t=B.charCodeAt(++W),(_t===43||_t===45)&&++W,Xa(10)===null&&Ie(ve,"Invalid number"),Re=!0),oa(B.charCodeAt(W))&&Ie(W,"Identifier directly after number");var Ot=B.slice(ve,W),St;return Re?St=parseFloat(Ot):!Ue||Ot.length===1?St=parseInt(Ot,10):/[89]/.test(Ot)||Pe?Ie(ve,"Invalid number"):St=parseInt(Ot,8),Fi(at,St)}function Yf(ce){W++;for(var ve="";;){W>=q&&Ie(se,"Unterminated string constant");var Re=B.charCodeAt(W);if(Re===ce)return++W,Fi(mt,ve);if(Re===92){Re=B.charCodeAt(++W);var Ue=/^[0-7]+/.exec(B.slice(W,W+3));for(Ue&&(Ue=Ue[0]);Ue&&parseInt(Ue,8)>255;)Ue=Ue.slice(0,-1);if(Ue==="0"&&(Ue=null),++W,Ue)Pe&&Ie(W-2,"Octal literal in strict mode"),ve+=String.fromCharCode(parseInt(Ue,8)),W+=Ue.length-1;else switch(Re){case 110:ve+=`
`;break;case 114:ve+="\r";break;case 120:ve+=String.fromCharCode(Eo(2));break;case 117:ve+=String.fromCharCode(Eo(4));break;case 85:ve+=String.fromCharCode(Eo(8));break;case 116:ve+="	";break;case 98:ve+="\b";break;case 118:ve+="\v";break;case 102:ve+="\f";break;case 48:ve+="\0";break;case 13:B.charCodeAt(W)===10&&++W;case 10:Z.locations&&(we=W,++Ce);break;default:ve+=String.fromCharCode(Re);break}}else(Re===13||Re===10||Re===8232||Re===8233)&&Ie(se,"Unterminated string constant"),ve+=String.fromCharCode(Re),++W}}function Eo(ce){var ve=Xa(16,ce);return ve===null&&Ie(se,"Bad character escape sequence"),ve}var tr;function ca(){tr=!1;for(var ce,ve=!0,Re=W;;){var Ue=B.charCodeAt(W);if(du(Ue))tr&&(ce+=B.charAt(W)),++W;else if(Ue===92){tr||(ce=B.slice(Re,W)),tr=!0,B.charCodeAt(++W)!=117&&Ie(W,"Expecting Unicode escape sequence \\uXXXX"),++W;var _t=Eo(4),Ot=String.fromCharCode(_t);Ot||Ie(W-1,"Invalid Unicode escape"),(ve?oa(_t):du(_t))||Ie(W-4,"Invalid Unicode escape"),ce+=Ot}else break;ve=!1}return tr?ce:B.slice(Re,W)}function yu(){var ce=ca(),ve=pt;return!tr&&jl(ce)&&(ve=Ls[ce]),Fi(ve,ce)}function Ut(){Ae=se,ze=oe,We=ge,wr()}function jo(ce){if(Pe=ce,W=se,Z.locations)for(;W<we;)we=B.lastIndexOf(`
`,we-2)+1,--Ce;la(),wr()}function Rl(){this.type=null,this.start=se,this.end=null}function Ll(){this.start=le,this.end=null,D!==null&&(this.source=D)}function Ui(){var ce=new Rl;return Z.locations&&(ce.loc=new Ll),Z.directSourceFile&&(ce.sourceFile=Z.directSourceFile),Z.ranges&&(ce.range=[se,0]),ce}function An(ce){var ve=new Rl;return ve.start=ce.start,Z.locations&&(ve.loc=new Ll,ve.loc.start=ce.loc.start),Z.ranges&&(ve.range=[ce.range[0],0]),ve}function Pt(ce,ve){return ce.type=ve,ce.end=ze,Z.locations&&(ce.loc.end=We),Z.ranges&&(ce.range[1]=ze),ce}function Pl(ce){return Z.ecmaVersion>=5&&ce.type==="ExpressionStatement"&&ce.expression.type==="Literal"&&ce.expression.value==="use strict"}function _i(ce){if(re===ce)return Ut(),!0}function Ga(){return!Z.strictSemicolons&&(re===xt||re===Tn||Ao.test(B.slice(ze,se)))}function ir(){!_i(rn)&&!Ga()&&On()}function yi(ce){re===ce?Ut():On()}function On(){Ie(se,"Unexpected token")}function Mo(ce){ce.type!=="Identifier"&&ce.type!=="MemberExpression"&&Ie(ce.start,"Assigning to rvalue"),Pe&&ce.type==="Identifier"&&To(ce.name)&&Ie(ce.start,"Assigning to "+ce.name+" in strict mode")}function Do(ce){Ae=ze=W,Z.locations&&(We=new Sr),Je=Pe=null,lt=[],wr();var ve=ce||Ui(),Re=!0;for(ce||(ve.body=[]);re!==xt;){var Ue=En();ve.body.push(Ue),Re&&Pl(Ue)&&jo(!0),Re=!1}return Pt(ve,"Program")}var No={kind:"loop"},xu={kind:"switch"};function En(){(re===gs||re===S&&ue=="/=")&&wr(!0);var ce=re,ve=Ui();switch(ce){case gt:case Jt:Ut();var Re=ce===gt;_i(rn)||Ga()?ve.label=null:re!==pt?On():(ve.label=Vn(),ir());for(var Ue=0;Ue<lt.length;++Ue){var _t=lt[Ue];if((ve.label==null||_t.name===ve.label.name)&&(_t.kind!=null&&(Re||_t.kind==="loop")||ve.label&&Re))break}return Ue===lt.length&&Ie(ve.start,"Unsyntactic "+ce.keyword),Pt(ve,Re?"BreakStatement":"ContinueStatement");case hi:return Ut(),ir(),Pt(ve,"DebuggerStatement");case $e:return Ut(),lt.push(No),ve.body=En(),lt.pop(),yi(vi),ve.test=Cr(),ir(),Pt(ve,"DoWhileStatement");case pi:if(Ut(),lt.push(No),yi(At),re===rn)return Ro(ve,null);if(re===zn){var Ot=Ui();return Ut(),bu(Ot,!0),Pt(Ot,"VariableDeclaration"),Ot.declarations.length===1&&_i(yr)?Bl(ve,Ot):Ro(ve,Ot)}var Ot=an(!1,!0);return _i(yr)?(Mo(Ot),Bl(ve,Ot)):Ro(ve,Ot);case Ki:return Ut(),nr(ve,!0);case Pi:return Ut(),ve.test=Cr(),ve.consequent=En(),ve.alternate=_i(si)?En():null,Pt(ve,"IfStatement");case mi:return!Je&&!Z.allowReturnOutsideFunction&&Ie(se,"'return' outside of function"),Ut(),_i(rn)||Ga()?ve.argument=null:(ve.argument=an(),ir()),Pt(ve,"ReturnStatement");case xn:Ut(),ve.discriminant=Cr(),ve.cases=[],yi(ds),lt.push(xu);for(var St,Gt;re!=Tn;)if(re===Tt||re===xi){var Un=re===Tt;St&&Pt(St,"SwitchCase"),ve.cases.push(St=Ui()),St.consequent=[],Ut(),Un?St.test=an():(Gt&&Ie(Ae,"Multiple default clauses"),Gt=!0,St.test=null),yi(tn)}else St||On(),St.consequent.push(En());return St&&Pt(St,"SwitchCase"),Ut(),lt.pop(),Pt(ve,"SwitchStatement");case Qi:return Ut(),Ao.test(B.slice(ze,se))&&Ie(ze,"Illegal newline after throw"),ve.argument=an(),ir(),Pt(ve,"ThrowStatement");case Ji:if(Ut(),ve.block=ua(),ve.handler=null,re===Ci){var sr=Ui();Ut(),yi(At),sr.param=Vn(),Pe&&To(sr.param.name)&&Ie(sr.param.start,"Binding "+sr.param.name+" in strict mode"),yi(kn),sr.guard=null,sr.body=ua(),ve.handler=Pt(sr,"CatchClause")}return ve.guardedHandlers=Qe,ve.finalizer=_i(fi)?ua():null,!ve.handler&&!ve.finalizer&&Ie(ve.start,"Missing catch or finally clause"),Pt(ve,"TryStatement");case zn:return Ut(),bu(ve),ir(),Pt(ve,"VariableDeclaration");case vi:return Ut(),ve.test=Cr(),lt.push(No),ve.body=En(),lt.pop(),Pt(ve,"WhileStatement");case en:return Pe&&Ie(se,"'with' in strict mode"),Ut(),ve.object=Cr(),ve.body=En(),Pt(ve,"WithStatement");case ds:return ua();case rn:return Ut(),Pt(ve,"EmptyStatement");default:var Fl=ue,Po=an();if(ce===pt&&Po.type==="Identifier"&&_i(tn)){for(var Ue=0;Ue<lt.length;++Ue)lt[Ue].name===Fl&&Ie(Po.start,"Label '"+Fl+"' is already declared");var qf=re.isLoop?"loop":re===xn?"switch":null;return lt.push({name:Fl,kind:qf}),ve.body=En(),lt.pop(),ve.label=Po,Pt(ve,"LabeledStatement")}else return ve.expression=Po,ir(),Pt(ve,"ExpressionStatement")}}function Cr(){yi(At);var ce=an();return yi(kn),ce}function ua(ce){var ve=Ui(),Re=!0,Ue=!1,_t;for(ve.body=[],yi(ds);!_i(Tn);){var Ot=En();ve.body.push(Ot),Re&&ce&&Pl(Ot)&&(_t=Ue,jo(Ue=!0)),Re=!1}return Ue&&!_t&&jo(!1),Pt(ve,"BlockStatement")}function Ro(ce,ve){return ce.init=ve,yi(rn),ce.test=re===rn?null:an(),yi(rn),ce.update=re===kn?null:an(),yi(kn),ce.body=En(),lt.pop(),Pt(ce,"ForStatement")}function Bl(ce,ve){return ce.left=ve,ce.right=an(),yi(kn),ce.body=En(),lt.pop(),Pt(ce,"ForInStatement")}function bu(ce,ve){for(ce.declarations=[],ce.kind="var";;){var Re=Ui();if(Re.id=Vn(),Pe&&To(Re.id.name)&&Ie(Re.id.start,"Binding "+Re.id.name+" in strict mode"),Re.init=_i(f)?an(!0,ve):null,ce.declarations.push(Pt(Re,"VariableDeclarator")),!_i(Fn))break}return ce}function an(ce,ve){var Re=zl(ve);if(!ce&&re===Fn){var Ue=An(Re);for(Ue.expressions=[Re];_i(Fn);)Ue.expressions.push(zl(ve));return Pt(Ue,"SequenceExpression")}return Re}function zl(ce){var ve=Xf(ce);if(re.isAssign){var Re=An(ve);return Re.operator=ue,Re.left=ve,Ut(),Re.right=zl(ce),Mo(ve),Pt(Re,"AssignmentExpression")}return ve}function Xf(ce){var ve=Gf(ce);if(_i(_r)){var Re=An(ve);return Re.test=ve,Re.consequent=an(!0),yi(tn),Re.alternate=an(!0,ce),Pt(Re,"ConditionalExpression")}return ve}function Gf(ce){return dn(Tr(),-1,ce)}function dn(ce,ve,Re){var Ue=re.binop;if(Ue!=null&&(!Re||re!==yr)&&Ue>ve){var _t=An(ce);_t.left=ce,_t.operator=ue;var Ot=re;Ut(),_t.right=dn(Tr(),Ue,Re);var St=Pt(_t,Ot===ae||Ot===Te?"LogicalExpression":"BinaryExpression");return dn(St,ve,Re)}return ce}function Tr(){if(re.prefix){var ce=Ui(),ve=re.isUpdate;return ce.operator=ue,ce.prefix=!0,me=!0,Ut(),ce.argument=Tr(),ve?Mo(ce.argument):Pe&&ce.operator==="delete"&&ce.argument.type==="Identifier"&&Ie(ce.start,"Deleting local variable in strict mode"),Pt(ce,ve?"UpdateExpression":"UnaryExpression")}for(var Re=_u();re.postfix&&!Ga();){var ce=An(Re);ce.operator=ue,ce.prefix=!1,ce.argument=Re,Mo(Re),Ut(),Re=Pt(ce,"UpdateExpression")}return Re}function _u(){return ha(Lo())}function ha(ce,ve){if(_i(br)){var Re=An(ce);return Re.object=ce,Re.property=Vn(!0),Re.computed=!1,ha(Pt(Re,"MemberExpression"),ve)}else if(_i(In)){var Re=An(ce);return Re.object=ce,Re.property=an(),Re.computed=!0,yi(xr),ha(Pt(Re,"MemberExpression"),ve)}else if(!ve&&_i(At)){var Re=An(ce);return Re.callee=ce,Re.arguments=qa(kn,!1),ha(Pt(Re,"CallExpression"),ve)}else return ce}function Lo(){switch(re){case vr:var Ue=Ui();return Ut(),Pt(Ue,"ThisExpression");case pt:return Vn();case at:case mt:case st:var Ue=Ui();return Ue.value=ue,Ue.raw=B.slice(se,oe),Ut(),Pt(Ue,"Literal");case Ya:case na:case Rs:var Ue=Ui();return Ue.value=re.atomValue,Ue.raw=re.keyword,Ut(),Pt(Ue,"Literal");case At:var ce=le,ve=se;Ut();var Re=an();return Re.start=ve,Re.end=oe,Z.locations&&(Re.loc.start=ce,Re.loc.end=ge),Z.ranges&&(Re.range=[ve,oe]),yi(kn),Re;case In:var Ue=Ui();return Ut(),Ue.elements=qa(xr,!0,!0),Pt(Ue,"ArrayExpression");case ds:return Il();case Ki:var Ue=Ui();return Ut(),nr(Ue,!1);case fn:return Su();default:On()}}function Su(){var ce=Ui();return Ut(),ce.callee=ha(Lo(),!0),_i(At)?ce.arguments=qa(kn,!1):ce.arguments=Qe,Pt(ce,"NewExpression")}function Il(){var ce=Ui(),ve=!0,Re=!1;for(ce.properties=[],Ut();!_i(Tn);){if(ve)ve=!1;else if(yi(Fn),Z.allowTrailingCommas&&_i(Tn))break;var Ue={key:wu()},_t=!1,Ot;if(_i(tn)?(Ue.value=an(!0),Ot=Ue.kind="init"):Z.ecmaVersion>=5&&Ue.key.type==="Identifier"&&(Ue.key.name==="get"||Ue.key.name==="set")?(_t=Re=!0,Ot=Ue.kind=Ue.key.name,Ue.key=wu(),re!==At&&On(),Ue.value=nr(Ui(),!1)):On(),Ue.key.type==="Identifier"&&(Pe||Re))for(var St=0;St<ce.properties.length;++St){var Gt=ce.properties[St];if(Gt.key.name===Ue.key.name){var Un=Ot==Gt.kind||_t&&Gt.kind==="init"||Ot==="init"&&(Gt.kind==="get"||Gt.kind==="set");Un&&!Pe&&Ot==="init"&&Gt.kind==="init"&&(Un=!1),Un&&Ie(Ue.key.start,"Redefinition of property")}}ce.properties.push(Ue)}return Pt(ce,"ObjectExpression")}function wu(){return re===at||re===mt?Lo():Vn(!0)}function nr(ce,ve){re===pt?ce.id=Vn():ve?On():ce.id=null,ce.params=[];var Re=!0;for(yi(At);!_i(kn);)Re?Re=!1:yi(Fn),ce.params.push(Vn());var Ue=Je,_t=lt;if(Je=!0,lt=[],ce.body=ua(!0),Je=Ue,lt=_t,Pe||ce.body.body.length&&Pl(ce.body.body[0]))for(var Ot=ce.id?-1:0;Ot<ce.params.length;++Ot){var St=Ot<0?ce.id:ce.params[Ot];if((sa(St.name)||To(St.name))&&Ie(St.start,"Defining '"+St.name+"' in strict mode"),Ot>=0)for(var Gt=0;Gt<Ot;++Gt)St.name===ce.params[Gt].name&&Ie(St.start,"Argument name clash in strict mode")}return Pt(ce,ve?"FunctionDeclaration":"FunctionExpression")}function qa(ce,ve,Re){for(var Ue=[],_t=!0;!_i(ce);){if(_t)_t=!1;else if(yi(Fn),ve&&Z.allowTrailingCommas&&_i(ce))break;Re&&re===Fn?Ue.push(null):Ue.push(an(!0))}return Ue}function Vn(ce){var ve=Ui();return ce&&Z.forbidReserved=="everywhere"&&(ce=!1),re===pt?(!ce&&(Z.forbidReserved&&(Z.ecmaVersion===3?bn:ts)(ue)||Pe&&sa(ue))&&B.slice(se,oe).indexOf("\\")==-1&&Ie(se,"The keyword '"+ue+"' is reserved"),ve.name=ue):ce&&re.keyword?ve.name=re.keyword:On(),me=!1,Ut(),Pt(ve,"Identifier")}}),h.version||(h=null)}function x(Y,Z){return(l.acorn||h).parse(Y,Z)}var T={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},A={"-":"__negate","+":"__self"},O=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Y){this["__"+Y]="#"+Y},{__self:function(){return this}});E.inject(O),L.inject(O),ut.inject(O);function j(Y,Z,B){var q=T[Z];if(Y&&Y[q]){var D=Y[q](B);return Z==="!="?!D:D}switch(Z){case"+":return Y+B;case"-":return Y-B;case"*":return Y*B;case"/":return Y/B;case"%":return Y%B;case"==":return Y==B;case"!=":return Y!=B}}function M(Y,Z){var B=A[Y];if(Z&&Z[B])return Z[B]();switch(Y){case"+":return+Z;case"-":return-Z}}function P(Y,Z){if(!Y)return"";Z=Z||{};var B=[];function q(Pe){for(var Ie=0,Qe=B.length;Ie<Qe;Ie++){var at=B[Ie];if(at[0]>=Pe)break;Pe+=at[1]}return Pe}function D(Pe){return Y.substring(q(Pe.range[0]),q(Pe.range[1]))}function X(Pe,Ie){return Y.substring(q(Pe.range[1]),q(Ie.range[0]))}function Q(Pe,Ie){for(var Qe=q(Pe.range[0]),at=q(Pe.range[1]),st=0,mt=B.length-1;mt>=0;mt--)if(Qe>B[mt][0]){st=mt+1;break}B.splice(st,0,[Qe,Ie.length-at+Qe]),Y=Y.substring(0,Qe)+Ie+Y.substring(at)}function J(Pe,Ie){switch(Pe.type){case"UnaryExpression":if(Pe.operator in A&&Pe.argument.type!=="Literal"){var Qe=D(Pe.argument);Q(Pe,'$__("'+Pe.operator+'", '+Qe+")")}break;case"BinaryExpression":if(Pe.operator in T&&Pe.left.type!=="Literal"){var at=D(Pe.left),st=D(Pe.right),mt=X(Pe.left,Pe.right),pt=Pe.operator;Q(Pe,"__$__("+at+","+mt.replace(new RegExp("\\"+pt),'"'+pt+'"')+", "+st+")")}break;case"UpdateExpression":case"AssignmentExpression":var xt=Ie&&Ie.type;if(!(xt==="ForStatement"||xt==="BinaryExpression"&&/^[=!<>]/.test(Ie.operator)||xt==="MemberExpression"&&Ie.computed)){if(Pe.type==="UpdateExpression"){var Qe=D(Pe.argument),gt="__$__("+Qe+', "'+Pe.operator[0]+'", 1)',Tt=Qe+" = "+gt;Pe.prefix?Tt="("+Tt+")":(xt==="AssignmentExpression"||xt==="VariableDeclarator"||xt==="BinaryExpression")&&(D(Ie.left||Ie.id)===Qe&&(Tt=gt),Tt=Qe+"; "+Tt),Q(Pe,Tt)}else if(/^.=$/.test(Pe.operator)&&Pe.left.type!=="Literal"){var at=D(Pe.left),st=D(Pe.right),gt=at+" = __$__("+at+', "'+Pe.operator[0]+'", '+st+")";Q(Pe,/^\(.*\)$/.test(D(Pe))?"("+gt+")":gt)}}break}}function W(Pe){switch(Pe.type){case"ExportDefaultDeclaration":Q({range:[Pe.start,Pe.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Ie=Pe.declaration,Qe=Pe.specifiers;if(Ie){var at=Ie.declarations;at&&(at.forEach(function(mt){Q(mt,"module.exports."+D(mt))}),Q({range:[Pe.start,Ie.start+Ie.kind.length]},""))}else if(Qe){var st=Qe.map(function(mt){var pt=D(mt);return"module.exports."+pt+" = "+pt+"; "}).join("");st&&Q(Pe,st)}break}}function se(Pe,Ie,Qe){if(Pe){for(var at in Pe)if(at!=="range"&&at!=="loc"){var st=Pe[at];if(Array.isArray(st))for(var mt=0,pt=st.length;mt<pt;mt++)se(st[mt],Pe,Qe);else st&&typeof st=="object"&&se(st,Pe,Qe)}Qe.operatorOverloading!==!1&&J(Pe,Ie),Qe.moduleExports!==!1&&W(Pe)}}function oe(Pe){var Ie="",Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Pe=(Math.abs(Pe)<<1)+(Pe<0?1:0);Pe||!Ie;){var at=Pe&31;Pe>>=5,Pe&&(at|=32),Ie+=Qe[at]}return Ie}var le=Z.url||"",ge=Z.sourceMaps,re=Z.paperFeatures||{},ue=Z.source||Y,me=Z.offset||0,Ce=Nt.agent,we=Ce.versionNumber,Ae=!1,ze=/\r\n|\n|\r/mg,We;if(ge&&(Ce.chrome&&we>=30||Ce.webkit&&we>=537.76||Ce.firefox&&we>=23||Ce.node)){if(Ce.node)me-=2;else if(i&&le&&!i.location.href.indexOf(le)){var Je=s.getElementsByTagName("html")[0].innerHTML;me=Je.substr(0,Je.indexOf(Y)+1).match(ze).length+1}Ae=me>0&&!(Ce.chrome&&we>=36||Ce.safari&&we>=600||Ce.firefox&&we>=40||Ce.node);var lt=["AA"+oe(Ae?0:me)+"A"];lt.length=(Y.match(ze)||[]).length+1+(Ae?me:0),We={version:3,file:le,names:[],mappings:lt.join(";AACA"),sourceRoot:"",sources:[le],sourcesContent:[ue]}}return(re.operatorOverloading!==!1||re.moduleExports!==!1)&&se(x(Y,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,re),We&&(Ae&&(Y=new Array(me+1).join(`
`)+Y),/^(inline|both)$/.test(ge)&&(Y+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(We))))),Y+=`
//# sourceURL=`+(le||"paperscript")),{url:le,source:ue,code:Y,map:We}}function H(Y,Z,B){Nt=Z;var q=Z.getView(),D=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Y)&&!/\bnew\s+Tool\b/.test(Y)?new Qs:null,X=D?D._events:[],Q=["onFrame","onResize"].concat(X),J=[],W=[],se,oe=typeof Y=="object"?Y:P(Y,B);Y=oe.code;function le(we,Ae){for(var ze in we)(Ae||!/^_/.test(ze))&&new RegExp("([\\b\\s\\W]|^)"+ze.replace(/\$/g,"\\$")+"\\b").test(Y)&&(J.push(ze),W.push(we[ze]))}le({__$__:j,$__:M,paper:Z,tool:D},!0),le(Z),Y="var module = { exports: {} }; "+Y;var me=a.each(Q,function(we){new RegExp("\\s+"+we+"\\b").test(Y)&&(J.push(we),this.push("module.exports."+we+" = "+we+";"))},[]).join(`
`);me&&(Y+=`
`+me),Y+=`
return module.exports;`;var ge=Nt.agent;if(s&&(ge.chrome||ge.firefox&&ge.versionNumber<40)){var re=s.createElement("script"),ue=s.head||s.getElementsByTagName("head")[0];ge.firefox&&(Y=`
`+Y),re.appendChild(s.createTextNode("document.__paperscript__ = function("+J+") {"+Y+`
}`)),ue.appendChild(re),se=s.__paperscript__,delete s.__paperscript__,ue.removeChild(re)}else se=Function(J,Y);var me=se&&se.apply(Z,W),Ce=me||{};return a.each(X,function(we){var Ae=Ce[we];Ae&&(D[we]=Ae)}),q&&(Ce.onResize&&q.setOnResize(Ce.onResize),q.emit("resize",{size:q.size,delta:new E}),Ce.onFrame&&q.setOnFrame(Ce.onFrame),q.requestUpdate()),me}function z(Y){if(/^text\/(?:x-|)paperscript$/.test(Y.type)&&p.getAttribute(Y,"ignore")!=="true"){var Z=p.getAttribute(Y,"canvas"),B=s.getElementById(Z),q=Y.src||Y.getAttribute("data-src"),D=p.hasAttribute(Y,"async"),X="data-paper-scope";if(!B)throw new Error('Unable to find canvas with id "'+Z+'"');var Q=p.get(B.getAttribute(X))||new p().setup(B);return B.setAttribute(X,Q._id),q?er.request({url:q,async:D,mimeType:"text/plain",onLoad:function(J){H(J,Q,q)}}):H(Y.innerHTML,Q,Y.baseURI),Y.setAttribute("data-paper-ignore","true"),Q}}function R(){a.each(s&&s.getElementsByTagName("script"),z)}function K(Y){return Y?z(Y):R()}return i&&(s.readyState==="complete"?setTimeout(R):zt.add(i,{load:R})),{compile:P,execute:H,load:K,parse:x,calculateBinary:j,calculateUnary:M}}).call(this);var Nt=new(p.inject(a.exports,{Base:a,Numerical:C,Key:Ds,DomEvent:zt,DomElement:Ct,document:s,window:i,Symbol:et,PlacedSymbol:nt}));return Nt.agent.node&&Dx(Nt),typeof t=="function"&&t.amd?t("paper",Nt):o&&(o.exports=Nt),Nt}).call(L5,typeof self=="object"?self:null)})(Zh)),Zh.exports}var B5=P5();const Ba=Kx(B5),Ur={cleanup(...o){o.forEach(e=>e&&!e.removed&&e.remove())},reorientSafe(o){return o&&o.closed&&o.reorient(),o},intersects(o,e){return o&&e&&o.intersects(e)},cloneSafe(o){return o?o.clone():null},simplifySafe(o,e=.5){return o&&o.simplify&&o.simplify(e),o},union(o,e){if(!o||!e)return null;const t=o.unite(e);return this.cleanup(o,e),this.reorientSafe(t)},intersect(o,e){if(!o||!e)return null;const t=o.intersect(e);return this.cleanup(o,e),this.reorientSafe(t)},subtract(o,e){if(!o||!e)return null;const t=o.subtract(e);return this.cleanup(o,e),this.reorientSafe(t)},exclude(o,e){if(!o||!e)return null;const t=o.exclude(e);return this.cleanup(o,e),this.reorientSafe(t)},divide(o,e){if(!o||!e)return[];const t=o.divide(e);return this.cleanup(o,e),t||[]},cut(o,e){if(!o||!e)return[];const t=o.divide(e);return this.cleanup(o,e),t||[]},punch(o,e){if(!o||!e)return null;const t=o.subtract(e);return this.cleanup(o,e),this.reorientSafe(t)},crop(o,e){if(!o||!e)return null;const t=o.intersect(e);return this.cleanup(o),this.reorientSafe(t)},xorSplit(o,e){if(!o||!e)return[];const t=o.exclude(e);return this.cleanup(o,e),t.children&&t.children.length?t.children.map(i=>this.reorientSafe(i)):[this.reorientSafe(t)]},smartUnion(o,e){return!o||!e||!this.intersects(o,e)?null:this.union(o,e)},keepLargest(o){return!o||!o.length?null:o.reduce((e,t)=>t.area>e.area?t:e,o[0])},keepSmallest(o){return!o||!o.length?null:o.reduce((e,t)=>t.area<e.area?t:e,o[0])},filterInside(o,e){return!o||!e?[]:o.filter(t=>e.contains(t.bounds.center))},filterOutside(o,e){return!o||!e?[]:o.filter(t=>!e.contains(t.bounds.center))},combine(o){return!o||o.length===0?null:o.reduce((e,t)=>e.unite(t))},snapToGrid(o,e=10){return o?(o.forEach(t=>{t.position.x=Math.round(t.position.x/e)*e,t.position.y=Math.round(t.position.y/e)*e}),o):[]}};function Ph(o){return{fill:o.fill,stroke:o.stroke,strokeWidth:o.strokeWidth,strokeDashArray:o.strokeDashArray,strokeLineCap:o.strokeLineCap,strokeLineJoin:o.strokeLineJoin,opacity:o.opacity}}function z5(o,e,t){let i=null;return e.forEach((s,a)=>{const u=o.project.importSVG(s.toSVG(),{expandShapes:!0,insert:!1}),p=I5(u.children?.[0]??u);a===0?i=p:i=Ur[t](i,p)}),i}function I5(o){return o.strokeWidth&&(o.strokeColor=null,o.strokeWidth=0,o.fill="black",o.closed=!0),o}function F5(o,e,t){if(!e)return null;if(!Array.isArray(e))return e.exportSVG({asString:!0,bounds:"content",precision:3});if(t==="divide"||t==="cut")return e.map(a=>a.exportSVG({asString:!0,bounds:"content",precision:3})).join(`
`);const i=new o.CompoundPath({children:e});i.reorient();const s=i.exportSVG({asString:!0,bounds:"content",precision:3});return i.remove(),s}function Lx(o){const[,e,t]=o.split("-");return h1[e]?.[t]}function V5(o){const e=document.createElement("canvas").getContext("2d");return e?(e.fillStyle="#000",e.fillStyle=o,e.fillStyle||null):null}let Cc=null;const U5={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},H5={union:"unite",intersect:"intersect",subtract:"subtract",exclude:"exclude",divide:"divide",cut:"cut",punch:"punch",crop:"crop",xorSplit:"xorSplit",smartUnion:"smartUnion"};function Y5(o){const e=o*Math.PI/180;return{x1:.5-Math.cos(e)/2,y1:.5-Math.sin(e)/2,x2:.5+Math.cos(e)/2,y2:.5+Math.sin(e)/2}}function X5(o){if(o.type==="linear"){const{x1:e,y1:t,x2:i,y2:s}=Y5(o.angle);return new Ys({type:"linear",gradientUnits:"objectBoundingBox",coords:{x1:e,y1:t,x2:i,y2:s},colorStops:o.stops})}return new Ys({type:"radial",gradientUnits:"objectBoundingBox",coords:{x1:.5,y1:.5,r1:0,x2:.5,y2:.5,r2:.5},colorStops:o.stops})}const G5=(o,e,t)=>({activePaint:"fill",fill:"rgba(0, 0, 0, 0)",stroke:"#000000",strokeWidth:1,strokeStyle:"solid",opacity:1,gradient:{type:"linear",angle:90,stops:[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}]},setGradient:i=>{o(s=>({gradient:{...s.gradient,...i}}))},applyFillGradient:()=>{const i=e().canvas,s=i?.getActiveObject();if(!i||!s)return;const a=X5(e().gradient);s.set("fill",a),i.requestRenderAll()},strokeStyleList:[{value:"solid",label:"Solid",dash:null,supported:!0},{value:"dashed",label:"Dashed",dash:[6,4],supported:!0},{value:"dotted",label:"Dotted",dash:[2,2],supported:!0},{value:"double",label:"Double",dash:null,supported:!1},{value:"groove",label:"Groove",dash:null,supported:!1},{value:"ridge",label:"Ridge",dash:null,supported:!1},{value:"inset",label:"Inset",dash:null,supported:!1},{value:"outset",label:"Outset",dash:null,supported:!1}],strokeStyleMap:{solid:{dashArray:null,lineCap:"butt"},dashed:{dashArray:[10,5],lineCap:"butt"},dotted:{dashArray:[2,5],lineCap:"round"},double:{dashArray:[1,3,1,3],lineCap:"butt"},groove:{dashArray:[4,2,1,2],lineCap:"butt"},ridge:{dashArray:[1,2,4,2],lineCap:"butt"},inset:{dashArray:[1,1],lineCap:"butt"},outset:{dashArray:[2,1],lineCap:"butt"}},setActivePaint:i=>o({activePaint:i}),setFill:i=>{const s=e().canvas;if(!s||typeof i=="string"&&i.startsWith("bg-")&&(i=Lx(i),!i))return;s.getActiveObjects().forEach(u=>u.set({fill:i})),s.requestRenderAll(),o({fill:i})},setStroke:i=>{const s=e().canvas;if(!s)return;s.getActiveObjects().forEach(u=>u.set({stroke:i})),s.requestRenderAll(),o({stroke:i})},setStrokeWidthN:i=>{const s=e().canvas;if(!s)return;s.getActiveObjects().forEach(u=>u.set({strokeWidth:i})),s.requestRenderAll(),o({strokeWidth:i})},setStrokeStyle:i=>{const s=e().canvas;if(!s)return;const a=s.getActiveObjects(),u=e().strokeStyleMap[i]||e().strokeStyleMap.solid;a.forEach(p=>{p.set({strokeDashArray:u.dashArray,strokeLineCap:u.lineCap})}),s.requestRenderAll(),o({strokeStyle:i})},setOpacity1:i=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const u=i/100;a.set("opacity",u),s.requestRenderAll(),o({opacity:i})},setOpacity:i=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const u=Math.min(1,Math.max(.05,i));a.set("opacity",u),s.requestRenderAll(),o({opacity:u})},previewOpacity:i=>{const s=e().canvas?.getActiveObject();s&&(Cc===null&&(Cc=s.opacity??1),s.set("opacity",i/100),e().canvas?.requestRenderAll())},endOpacityPreview:()=>{const i=e().canvas?.getActiveObject();!i||Cc===null||(i.set("opacity",Cc),Cc=null,e().canvas?.requestRenderAll())},handleColorChange:i=>{const s=e().canvas,a=e().geditor;if(!s)return;if(i.startsWith("bg-")){const m=Lx(i);if(!m)return;i=m}const u=V5(i);if(!u)return;const p=s.getActiveObjects();if(a&&a.activeStop&&e().activePaint==="fill"){a.updateActiveColor(u),o({fill:u}),s.requestRenderAll();return}if(p.length===0){if(e().activePaint==="stroke")o({stroke:u});else if(e().hasShadow)e().setShadowColor(u);else{o({fill:u});const m={color:u};e().setBrushColor(m)}return}p.forEach(m=>{if(e().activePaint==="stroke")m.set({stroke:u});else if(e().hasShadow)e().setShadowColor(u);else{if(m.fill instanceof Ys)return;m.set({fill:u})}}),console.log(e().hasShadow),e().activePaint==="stroke"?o({stroke:u}):e().hasShadow?e().setShadowColor(u):o({fill:u}),s.requestRenderAll()},addShadow:i=>{const s=e().canvas,a=s?.getActiveObject();a&&(a.set("shadow",new Pn(i)),s.requestRenderAll())},applyShadowPreset:i=>{const s=e().canvas,a=s?.getActiveObject();if(!a)return;const u=U5[i];if(!u)return;const p=new Pn({...u});a.set("shadow",p),s.requestRenderAll(),o({activeObjectShadow:p})},removeShadow:()=>{const i=e().canvas,s=i?.getActiveObject();s&&(s.set("shadow",null),i.requestRenderAll(),o({activeObjectShadow:null}))},toFabricPath(i){if(i.type==="path")return i;const a=i.toSVG().match(/d="([^"]+)"/);return a?new ji(a[1],{fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth,scaleX:i.scaleX,scaleY:i.scaleY,angle:i.angle}):null},booleanOperation:async(i="union")=>{try{const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}const u=a.getObjects();if(u.length<2)return;if(!Ur[i]){console.error("Invalid boolean operation:",i);return}const p=[],m=[];if(u.forEach(G=>{G.type==="textbox"||G.type==="text"||G.type==="i-text"?m.push(G):p.push(G)}),p.length+m.length<2){alert("Select at least 2 objects for boolean operation.");return}s.discardActiveObject();const y=a.getBoundingRect(!0),b={x:y.left+y.width/2,y:y.top+y.height/2},C=Ph(p[0]),N=new Ba.PaperScope;N.setup(new N.Size(5e3,5e3)),N.activate();let E=[];const V=[...p,...m];for(const G of V){const te=G.toSVG(),ne=N.project.importSVG(te,{expandShapes:!0,insert:!1}),de=np(ne.children?.[0]??ne),be=Array.isArray(de)?de.filter(I=>I&&typeof I.subtract=="function"):de&&typeof de.subtract=="function"?[de]:[];for(const I of be)if(!(!I||typeof I.divide!="function")){if(E.length===0){E.push(I);continue}if(["divide","cut","xorSplit"].includes(i)){const Ee=[];E.forEach(Ye=>{let Be=Ur[i](Ye,I);Be&&(Array.isArray(Be)||(Be=[Be]),Be.forEach(ct=>{ct&&typeof ct.divide=="function"&&Ee.push(ct)}))}),E=Ee;continue}if(["union","subtract","intersect","exclude","smartUnion","punch","crop"].includes(i)){const Ee=Ur[i](E[0],I);Ee&&(E=[Ee])}}}const L=[];if(E.length>0){const te=`<svg xmlns="http://www.w3.org/2000/svg">${E.map(de=>de.exportSVG({asString:!0,bounds:"content",precision:3})).join(`
`)}</svg>`;(await go(te)).objects.forEach(de=>{de.set({...C,strokeUniform:!0,originX:"center",originY:"center"}),de.setPositionByOrigin(new ke(b.x,b.y),"center","center"),L.push(de)})}s.remove(...u),L.forEach(G=>s.add(G)),m.forEach(G=>s.add(G));const ee=[...L,...m];if(ee.length>1){const G=new us(ee,{canvas:s});s.setActiveObject(G)}else ee.length===1&&s.setActiveObject(ee[0]);s.requestRenderAll()}catch(s){console.error("Boolean operation error:",s),alert("Boolean operation failed. Check console for details.")}},booleanOperationcd:async(i="union")=>{try{const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}const u=a.getObjects();if(u.length<2)return;if(!Ur[i]){console.error("Invalid boolean operation:",i);return}const p=a.getBoundingRect(!0),m={x:p.left+p.width/2,y:p.top+p.height/2},y=Ph(u[0]);s.discardActiveObject();const b=new Ba.PaperScope;b.setup(new b.Size(5e3,5e3));let C=[];if(u.forEach(L=>{let ee=L;(L.type==="text"||L.type==="i-text")&&(ee=L.toPath());const G=b.project.importSVG(ee.toSVG(),{expandShapes:!0,insert:!1}),te=np(G.children?.[0]??G);(Array.isArray(te)?te:te?[te]:[]).forEach(de=>{if(!(!de||typeof de.divide!="function")){if(C.length===0){C.push(de);return}if(["divide","cut","xorSplit"].includes(i)){const be=[];C.forEach(I=>{let Ee=Ur[i](I,de);Ee&&(Array.isArray(Ee)||(Ee=[Ee]),Ee.forEach(Ye=>{Ye&&typeof Ye.divide=="function"&&be.push(Ye)}))}),C=be;return}if(["union","subtract","intersect","exclude","smartUnion","punch","crop"].includes(i)){const be=Ur[i](C[0],de);C=be?[be]:[C[0]]}}})}),!C||C.length===0)return;const E=`<svg xmlns="http://www.w3.org/2000/svg">${C.map(L=>L.exportSVG({asString:!0,bounds:"content",precision:3})).join(`
`)}</svg>`,{objects:V}=await go(E);if(!V||V.length===0)return;if(s.remove(...u),V.forEach(L=>{L.set({...y,strokeUniform:!0}),s.add(L)}),V.length>1){const L=new us(V,{canvas:s});s.setActiveObject(L)}else s.setActiveObject(V[0]);s.requestRenderAll()}catch(s){console.error("Boolean operation error:",s),alert("Boolean operation failed. Check console for details.")}},booleanOperationfinal:async(i="union")=>{try{const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}const u=a.getObjects();if(u.length<2)return;if(!Ur[i]){console.error("Invalid boolean operation:",i);return}const p=a.getBoundingRect(!0),m={x:p.left+p.width/2,y:p.top+p.height/2},y=Ph(u[0]);s.discardActiveObject();const b=new Ba.PaperScope;b.setup(new b.Size(5e3,5e3));let C=[];if(u.forEach((ee,G)=>{const te=b.project.importSVG(ee.toSVG(),{expandShapes:!0,insert:!1}),ne=np(te.children?.[0]??te);(Array.isArray(ne)?ne:[ne]).forEach(be=>{if(!be)return;if(C.length===0){C.push(be);return}const I=Ur[i](C[0],be);I&&(Array.isArray(I)?C=I:C=[I])})}),!C||C.length===0)return;const E=`<svg xmlns="http://www.w3.org/2000/svg">${C.map(ee=>ee.exportSVG({asString:!0,bounds:"content",precision:3})).join(`
`)}</svg>`,{objects:V}=await go(E);if(!V||V.length===0)return;s.remove(...u),V.forEach(ee=>{ee.set({...y,strokeUniform:!0}),s.add(ee)});const L=new us(V,{canvas:s});s.setActiveObject(L),s.requestRenderAll()}catch(s){console.error("Boolean operation failed:",s),alert("Boolean operation failed. See console for details.")}},booleanOperation1:async(i="union")=>{const s=e().canvas,a=s.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}if(!H5[i]){console.error("Invalid boolean operation:",i);return}const u=a.getObjects();if(u.length<2)return;const p=a.getBoundingRect(!0);p.left+p.width/2,p.top+p.height/2;const m=u[0],y=Ph(m);s.discardActiveObject();const b=new Ba.PaperScope;b.setup(new b.Size(5e3,5e3));const C=z5(b,u,i);if(!C||C.length===0)return;const N=F5(b,C,i);if(!N)return;const{objects:E}=await go(`<svg xmlns="http://www.w3.org/2000/svg">${N}</svg>`);if(!E||E.length===0)return;E.forEach(L=>L.set({...y,strokeUniform:!0})),s.remove(...u),E.forEach(L=>s.add(L));const V=new us(E,{canvas:s});s.setActiveObject(V),s.requestRenderAll()},clipSelectedObject23:async()=>{const i=e().canvas,s=i.getActiveObject();if(!s||s.type!=="activeselection"){alert("Select exactly 2 objects (frame shape + image/object)");return}const a=s.getObjects();if(a.length!==2){alert("Select exactly 2 objects");return}const[u,p]=a,m=await Ai.object.clone(u);m.set({absolutePositioned:!0}),"scaleToWidth"in p&&(p.scaleToWidth(u.width),p.scaleToHeight(u.height));const y=await Ai.object.clone(u);y.set({fill:"transparent",stroke:"#999",strokeWidth:1,selectable:!1,evented:!1});const b=new Wi([p,y],{left:u.left,top:u.top,clipPath:m,subTargetCheck:!0});p.set({selectable:!0,evented:!0}),i.remove(u),i.add(b),i.discardActiveObject(),i.setActiveObject(b),i.requestRenderAll()},clipSelectedObject:async()=>{const i=e().canvas,s=i.getActiveObject();if(!s||s.type!=="activeselection"){alert("Select 2 objects (target + clip shape)");return}const a=s.getObjects();if(a.length!==2){alert("Select exactly 2 objects");return}const[u,p]=a;let m,y;u.type==="image"?(m=u,y=p):p.type==="image"?(m=p,y=u):(m=u,y=p),m.type==="image"&&!m.getElement().complete&&await new Promise(V=>{m.getElement().onload=V});const b=async V=>new Promise(L=>{if(!V)return L(null);const ee=V.clipPath,G=V.absolutePositioned;try{V.clipPath=null,V.absolutePositioned=!1,V.clone(te=>{V.clipPath=ee,V.absolutePositioned=G,L(te)})}catch(te){V.type==="image"?V.cloneAsImage(ne=>L(ne)):(console.error("Failed to clone object:",V.type,te),L(null))}}),C=await(async()=>{if(y.type==="activeSelection"||y.type==="group"){const V=await Promise.all(y._objects.map(L=>b(L)));return new Wi(V,{originX:"center",originY:"center"})}else return b(y)})();if(!C){console.error("Cannot clone clipper, skipping clip.");return}const N=m.width*m.scaleX||100,E=m.height*m.scaleY||100;C.set({absolutePositioned:!0,originX:"center",originY:"center",left:m.left+N/2,top:m.top+E/2}),m.set({clipPath:C}),i.remove(y),i.discardActiveObject(),i.setActiveObject(m),i.requestRenderAll()},clipSelectedObject1:()=>{const i=e().canvas,s=i.getActiveObject();if(!s||s.type!=="activeselection"){alert("Select 2 objects (target + clip shape)");return}const a=s.getObjects();if(a.length!==2){alert("Select exactly 2 objects");return}const[u,p]=a;p.set({absolutePositioned:!0,left:u.left,top:u.top}),u.set({clipPath:p}),i.remove(p),i.discardActiveObject(),i.setActiveObject(u),i.requestRenderAll()},unionSelected(i){return e().booleanOperation("union",i)},intersectSelected(i){return e().booleanOperation("intersect",i)},subtractSelected(i){return e().booleanOperation("subtract",i)},excludeSelected(i){return e().booleanOperation("exclude",i)},divideSelected(i){return e().booleanOperation("divide",i)},cutSelected(i){return e().booleanOperation("cut",i)},punchSelected(i){return e().booleanOperation("punch",i)},cropSelected(i){return e().booleanOperation("crop",i)},smartUnionSelected(i){return e().booleanOperation("smartUnion",i)},xorSplitSelected(i){return e().booleanOperation("xorSplit",i)}});function np(o){return o.strokeWidth&&(o.strokeColor=null,o.strokeWidth=0,o.fill="black",o.closed=!0),o}const q5=(o,e,t)=>({MAX_HISTORY:20,_isRestoring:!1,undoStack:[],redoStack:[],saveState:()=>{const{canvas:i,_isRestoring:s,undoStack:a}=e();if(!i||s)return;const u=JSON.stringify(i.toJSON()),p=[...a,u];o({undoStack:p,redoStack:[]})},undo:()=>{const{canvas:i,undoStack:s,redoStack:a}=e();if(!i||s.length<=1)return;const u=JSON.stringify(i.toJSON()),p=s[s.length-1],m=s.slice(0,-1);o({_isRestoring:!0}),i.loadFromJSON(p,()=>{o({undoStack:m,redoStack:[u,...a],_isRestoring:!1}),i.requestRenderAll()})},redo:()=>{const{canvas:i,undoStack:s,redoStack:a}=e();if(!i||a.length===0)return;const u=JSON.stringify(i.toJSON()),p=a[0],m=a.slice(1);o({_isRestoring:!0}),i.loadFromJSON(p,()=>{o({undoStack:[...s,u],redoStack:m,_isRestoring:!1}),i.requestRenderAll()})},clearHistory:()=>o({undoStack:[],redoStack:[]})});function W5(o,e,t){return e&&!t?-o:!e&&t?180-o:o}function Tc(o){return Math.round(o??0)}const Z5=(o,e,t)=>({transform:{x:0,y:0,width:100,height:100,rotation:0,flipX:!1,flipY:!1,originX:"center",centerY:"center",id:"c",rx:0,ry:0},hasSelection:!1,_isSyncing:!1,updateFromFabric:i=>{if(!i){o({hasSelection:!1});return}if(e()._isSyncing)return;const s=i.scaleX??1,a=i.scaleY??1,u={x:Tc(i.left??0),y:Tc(i.top??0),width:Tc(i.getScaledWidth?i.getScaledWidth():(i.width??0)*Math.abs(s)),height:Tc(i.getScaledHeight?i.getScaledHeight():(i.height??0)*Math.abs(a)),rotation:Tc(i.angle??0),flipX:s<0,flipY:a<0};if(i.type==="rect"){const y=i;u.rx=y.rx??0,u.ry=y.ry??0}const p=e().transform;(p.x!==u.x||p.y!==u.y||p.width!==u.width||p.height!==u.height||p.rotation!==u.rotation||p.flipX!==u.flipX||p.flipY!==u.flipY||p.rx!==u.rx||p.ry!==u.ry)&&o({transform:u,hasSelection:!0})},updateFabricFromStore111:()=>{const{transform:i,canvas:s}=e(),a=s?.getActiveObject();if(!a)return;o({_isSyncing:!0}),a.set({originX:"center",originY:"center",objectCaching:!1});const u=a._originalWidth||a.width||1,p=a._originalHeight||a.height||1;a._originalWidth||(a._originalWidth=u,a._originalHeight=p);const m=i.width/u,y=i.height/p;a.set({angle:i.rotation||0,scaleX:i.flipX?-Math.abs(m):Math.abs(m),scaleY:i.flipY?-Math.abs(y):Math.abs(y)}),a.setPositionByOrigin(new ke(i.x,i.y),"center","center"),a.setCoords(),s.requestRenderAll(),o({_isSyncing:!1})},updateFabricFromStore:()=>{console.log("here...");const{transform:i,canvas:s}=e(),a=s?.getActiveObject();if(!a||e()._isSyncing)return;o({_isSyncing:!0});const u=Number(i.x)||0,p=Number(i.y)||0,m=Math.max(1,Number(i.width)||1),y=Math.max(1,Number(i.height)||1),b=Number(i.rotation)||0,C=!!i.flipX,N=!!i.flipY;if(a.type==="image"){const E=a.width||1,V=a.height||1;a.set({left:u,top:p,scaleX:m/E,scaleY:y/V,angle:b,flipX:C,flipY:N})}else a.set({left:u,top:p,width:m,height:y,angle:b,flipX:C,flipY:N});a.setCoords(),s.requestRenderAll(),o({_isSyncing:!1})},updateFabricFromStore1:()=>{console.log(".......");const{transform:i,canvas:s}=e(),a=s?.getActiveObject();if(!a||e()._isSyncing)return;o({_isSyncing:!0});const u=Number(i.x)||0,p=Number(i.y)||0,m=Math.max(1,Number(i.width)||1),y=Math.max(1,Number(i.height)||1),b=Number(i.rotation)||0,C=!!i.flipX,N=!!i.flipY,E=W5(b,C,N);a.set({left:u,top:p,width:m,height:y,angle:E,flipX:C,flipY:N}),a.setCoords(),s.requestRenderAll(),o({_isSyncing:!1})},updateFabricFromStore11:()=>{const{transform:i,canvas:s}=e(),a=s?.getActiveObject();if(!a||e()._isSyncing)return;o({_isSyncing:!0});const u=Number(i.x)||0,p=Number(i.y)||0,m=Number(i.width)||1,y=Number(i.height)||1;let b=Number(i.rotation)||0;const C=!!i.flipX,N=!!i.flipY;console.log(u,p),C&&!N?b=-b:!C&&N&&(b=180-b);const E=a.getCenterPoint();a.set({originX:"center",originY:"center",left:E.x,top:E.y,width:m,height:y,angle:b,flipX:C,flipY:N}),a.setCoords(),s.renderAll(),o({_isSyncing:!1})},setTransform:(i,s)=>{console.log("here"),o(a=>({transform:{...a.transform,[i]:s}})),requestAnimationFrame(()=>e().updateFabricFromStore())},flipX:()=>{o(i=>({transform:{...i.transform,flipX:!i.transform.flipX}})),requestAnimationFrame(()=>e().updateFabricFromStore())},flipY:()=>{o(i=>({transform:{...i.transform,flipY:!i.transform.flipY}})),requestAnimationFrame(()=>e().updateFabricFromStore())},setOrigin:i=>{o(s=>({transform:{...s.transform,originX:i.originX,originY:i.originY,id:i.id}})),requestAnimationFrame(()=>e().updateFabricFromStore())},setRadius:(i,s)=>{const a=e().canvas;if(!a)return;const u=a.getActiveObject();if(!u)return;const p=i??0,m=s??0,y=b=>{b.type==="rect"&&(b.set({rx:p,ry:m}),b.setCoords())};u.type==="rect"?y(u):u.type==="activeselection"&&u.getObjects().forEach(y),a.requestRenderAll(),o(b=>({...b,transform:{...b.transform,rx:p,ry:m}}))},syncTransformFromSelection:()=>{const i=e().canvas;if(!i)return;const s=i.getActiveObject();if(s){if(s.type==="rect")o({transform:{rx:s.rx||0,ry:s.ry||0}});else if(s.type==="activeselection"){const a=s.getObjects().find(u=>u.type==="rect");o(a?{transform:{rx:a.rx||0,ry:a.ry||0}}:{transform:{rx:0,ry:0}})}}}});function Px(o,e){return Array.from({length:o},(t,i)=>{const s=2*Math.PI/o*i-Math.PI/2;return{x:e*Math.cos(s),y:e*Math.sin(s)}})}function $5(o=100,e=60){return[{x:0,y:-e/2},{x:o/2,y:0},{x:0,y:e/2},{x:-o/2,y:0}]}function sp(o,e,t,i){const{clockwise:s=!0}={},a=Ai.degreesToRadians(e),u=Ai.degreesToRadians(t),p=o,m=o,y=p+o*Math.cos(a),b=m+o*Math.sin(a),C=p+o*Math.cos(u),N=m+o*Math.sin(u),V=Math.abs(t-e)>180?1:0;return`
    M ${p} ${m}
    L ${y} ${b}
    A ${o} ${o} 0 ${V} ${s?1:0} ${C} ${N}
    Z
  `}const K5=(o,e,t)=>({addShape:(i,s={})=>{const a=e().canvas;if(!a)return;const u=a.getVpCenter(),p=u.x,m=u.y;s={...{left:p,top:m,originX:"center",originY:"center",selection:!0,hasControls:!0,customType:"shape",fill:"rgba(0,0,0,0)",objectCaching:!1},...s};let b;switch(i){case"triangle":b=new fr({...s});break;case"square":b=new wn({...s});break;case"rect":b=new wn({...s});break;case"polygon":case"pentagon":b=new Gr(Px(5,s.width/2),s);break;case"hexagon":b=new Gr(Px(6,s.width/2),s);break;case"semi-circle":{const C=sp(s.radius,-180,0);b=new ji(C,{...s});break}case"quadrant":{const C=sp(s.radius,-90,0);b=new ji(C,{...s});break}case"sector":{const C=sp(s.radius,-60,0);b=new ji(C,{...s});break}case"circle":b=new qi({...s});break;case"capsule":b=new wn({...s});break;case"ellipse":b=new Fs({...s});break;case"line":b=new cs([50,50,200,50],{stroke:"black",strokeWidth:2,selectable:!0,hasControls:!0,hasBorders:!1,...s});break;case"diamond":b=new Gr($5(s.width||100,s.height||60),s);break;case"quadratic":{const C=s.startX??0,N=s.startY??0,E=s.controlX??(s.width||100)/2,V=s.controlY??-(s.height||100)/2,L=s.endX??(s.width||100),ee=s.endY??0,G=`M ${C} ${N} Q ${E} ${V} ${L} ${ee}`;b=new ji(G,{...s,fill:"transparent",stroke:s.stroke||"black",strokeWidth:s.strokeWidth||2});break}case"star":b=new Gr(e().generateStarPoints(s.numPoints||5,s.outerRadius||50,s.innerRadius||20),{fill:"transparent",stroke:"black",...s});break;case"arrow":b=e().createArrowShape({...s});break;case"paper":{const C=new wn({width:300,height:80,fill:"#FFFFFF",originX:"center",originY:"center",stroke:1,fontFamily:"Bubblegum Sans"}),N=new gr("Type to enter text",{fontSize:20,width:200,textAlign:"center",originX:"center",originY:"center",fontFamily:"Bubblegum Sans"});b=new Wi([C,N],s),b.__text=N,b.__box=C,N.__group=b}break;default:console.warn("Shape not supported:",i);return}b.__instances=[],a.add(b),a.setActiveObject(b),a.renderAll(),e().setToolbar({target:b}),e().updateFromFabric(b),e().saveState(),e().addLayer(b,i)},generateStarPoints:(i=5,s=50,a=20)=>{const u=[],p=Math.PI/i;for(let m=0;m<2*i;m++){const y=m%2===0?s:a,b=m*p-Math.PI/2;u.push({x:y*Math.cos(b),y:y*Math.sin(b)})}return u},createArrowShape:({width:i=120,stroke:s="black",strokeWidth:a=2,headLength:u=12,headWidth:p=12,left:m=0,top:y=0})=>{const b=new cs([0,0,i,0],{stroke:s,strokeWidth:a,originX:"left",originY:"center"}),C=new fr({width:u,height:p,fill:s,left:i,top:0,angle:90,originX:"center",originY:"center"});return new Wi([b,C],{left:m,top:y,originX:"center",originY:"center"})}}),Q5=[{label:"Arial",value:"Arial"},{label:"Bubblegum Sans",value:"Bubblegum Sans"},{label:"Comic Neue",value:"Comic Neue"},{label:"Consolas",value:"Consolas"},{label:"Courier New",value:"Courier New"},{label:"Fredoka One",value:"Fredoka One"},{label:"Georgia",value:"Georgia"},{label:"Helvetica",value:"Helvetica"},{label:"Monaco",value:"Monaco"},{label:"Palatino",value:"Palatino"},{label:"Patrick Hand",value:"Patrick Hand"},{label:"Poppins",value:"Poppins"},{label:"Tahoma",value:"Tahoma"},{label:"Times New Roman",value:"Times New Roman"},{label:"Trebuchet MS",value:"Trebuchet MS"},{label:"Verdana",value:"Verdana"}],J5=(o,e,t)=>({fonts:Q5,fontSize:16,bgColor:"#000000",setBgColor:i=>o({bgColor:i}),setFontSize:i=>o({fontSize:i}),color:"#000000",hasShadow:!1,setHasShadow:i=>o({hasShadow:i}),shadowColor:"",setShadowColor:i=>o({shadowColor:i}),setColor:i=>o({color:i}),fontFamily:"Arial",setFontFamily:i=>o({fontFamily:i}),isBold:!1,setIsBold:i=>o({isBold:i}),isItalic:!1,setIsItalic:i=>o({isItalic:i}),isUnderline:!1,setIsUnderline:i=>o({isUnderline:i}),charSpacing:0,setCharSpacing:i=>o({charSpacing:i}),lineHeight:1.2,setLineHeight:i=>o({lineHeight:i}),strokeColor:"#000000",setStrokeColor:i=>o({strokeColor:i}),strokeWidth:1,setStrokeWidth:i=>o({strokeWidth:i}),fillColor:"#000000",setFillColor:i=>o({fillColor:i}),textAlign:"",setTextAlign:i=>o({textAlign:i}),updateText:i=>{console.log(i);const s=e().canvas,a=s?.getActiveObject();a&&a.type.includes("text")&&(a.set(i),s.requestRenderAll())},addText:(i={})=>{const s=e().canvas;if(!s)return;const{text:a="Enter text",fontSize:u=36,bold:p=!1,italic:m=!1,underline:y=!1,fontFamily:b="Arial",width:C=200,textColor:N="#000000",placeholderColor:E="#9ca3af"}=i,V=s.getVpCenter(),L=V.x,ee=V.y,G=new gr(a,{left:L,top:ee,originX:"center",originY:"center",fontSize:u,fontWeight:p?"bold":"normal",fontStyle:m?"italic":"normal",underline:y,fill:E,fontFamily:b,width:C,editable:!0,objectCaching:!1,padding:4,splitByGrapheme:!0});G.on("editing:entered",()=>{G.fill===E&&(G.selectAll(),G.set("fill",N),s.requestRenderAll())}),G.on("editing:exited",()=>{G.text.trim()?G.set("fill",N):(G.text=a,G.set("fill",E)),s.requestRenderAll()}),s.add(G),s.setActiveObject(G),G.enterEditing(),setTimeout(()=>{G.hiddenTextarea?.focus(),G.selectAll()},0),o({showTextToolbar:!0,selectedObject:G},!1,"text/add"),e().saveState(),s.requestRenderAll()}});function e3(o){const[,e,t]=o.split("-");return h1[e]?.[t]}const t3=(o,e,t)=>({backgroundColor:"#ff0000",borderColor:"#000000",borderWidth:"1",borderStyle:"solid",setBackgroundColor:i=>{const s=e().canvas;if(!s)return;const a=e3(i);if(!a)return;const u=s.getActiveObject();u&&(u.set("fill",a),s.requestRenderAll(),o({backgroundColor:i}))}}),i3=(o,e,t)=>({visible:!1,x:0,y:0,items:[],openMenu:(i,s,a)=>{const p=a.length*36,m=Math.min(i,window.innerWidth-220),y=Math.min(s,window.innerHeight-p);o({visible:!0,x:m,y,items:a})},closeMenu:()=>o({visible:!1})}),Bx={mode:"dark",iconSize:"md",backgroundStyle1:"ruled",orientation:"LANDSCAPE",freehand:!0,format:"FREEHAND"},n3=(o,e,t)=>({settings:{...Bx},load:()=>{},setMode:i=>{console.log(i),o(s=>({settings:{...s.settings,mode:i}})),e().applyTheme(i),e().opendbSave()},applyTheme:i=>{const s=document.documentElement,a=i==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i;s.classList.toggle("dark",a==="dark")},toggleFreehand:()=>{o(i=>{const s=!i.settings.freehand;return{settings:{...i.settings,freehand:s,format:s?"FREEHAND":"A4"}}}),e().opendbSave()},hydrate:i=>{o({settings:{...Bx,...i}},!1,"settings/hydrate")},updateSetting:(i,s)=>{o(a=>({settings:{...a.settings,[i]:s}})),e().opendbSave()},setFormat:i=>{o(s=>s.settings.freehand?{}:{settings:{...s.settings,format:i}}),e().opendbSave()},setOrientation:i=>{o(s=>s.settings.freehand?{}:{settings:{...s.settings,orientation:i}}),e().opendbSave()},opendbSave:()=>{const{settings:i}=e();Tl.local.set("fateboard-settings",i)}});let $h=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const s3={objects:[],_isSyncing:!1},r3=(o,e,t)=>({...s3,setCanvas:i=>o({canvas:i}),addObject:i=>{const s=e().canvas;s&&(s.add(i),o({objects:[...e().objects,i]}))},cloneObject:async i=>{if(!i)return null;const s=await i.clone();return s.set({id:$h()}),s},repeatHorizontally:async(i,s=3,a=10)=>{const u=e().canvas;if(!u||!i)return;const p=[];for(let m=1;m<=s;m++){const y=await e().cloneObject(i);y.set({left:i.left+m*(i.width*i.scaleX+a),top:i.top}),u.add(y),p.push(y)}return p},repeatGrid:async(i,s=2,a=2,u=10,p=10)=>{const m=e().canvas;if(!m||!i)return;const y=[];for(let b=0;b<s;b++)for(let C=0;C<a;C++){if(b===0&&C===0)continue;const N=await e().cloneObject(i);N.set({left:i.left+C*(i.width*i.scaleX+u),top:i.top+b*(i.height*i.scaleY+p)}),m.add(N),y.push(N)}return y},repeatRadiallya:async(i,s=6,a,u)=>{const p=e().canvas;if(!p||!i)return;const m=[],y=360/s;for(let b=1;b<s;b++){const C=await e().cloneObject(i);C.rotate(i.angle+b*y),C.set({originX:"center",originY:"center"}),C.setPositionByOrigin(new ke(a,u),"center","center"),p.add(C),m.push(C)}return m},repeatRadiallyaa:async(i,s,a,u)=>{if(!i||s<2)return;const p=i.canvas;if(!p)return;const m=i.getCenterPoint(),y=360/s;for(let b=1;b<s;b++){const C=await e().cloneObject(i),N=y*b,E=Ai.degreesToRadians(N),V=m.x-a,L=m.y-u,ee=V*Math.cos(E)-L*Math.sin(E),G=V*Math.sin(E)+L*Math.cos(E),te=a+ee,ne=u+G;C.set({angle:i.angle+N}),C.setPositionByOrigin(new ke(te,ne),"center","center"),C.setCoords(),p.add(C)}p.requestRenderAll()},repeatRadiallywww:async(i,s,a,u,p=0)=>{if(!i||s<2)return;const m=i.canvas;if(!m)return;const y=i.getCenterPoint(),b=360/s;let C=y.x-a,N=y.y-u,E=Math.hypot(C,N);E===0&&(C=1,N=0,E=1);for(let V=1;V<s;V++){const L=await e().cloneObject(i),ee=b*V,G=Ai.degreesToRadians(ee),te=E+p,ne=C*Math.cos(G)-N*Math.sin(G),de=C*Math.sin(G)+N*Math.cos(G),be=Math.hypot(ne,de),I=ne/be*te,Ee=de/be*te,Ye=a+I,Be=u+Ee;L.set({angle:i.angle+ee}),L.setPositionByOrigin(new ke(Ye,Be),"center","center"),L.setCoords(),m.add(L)}m.requestRenderAll()},repeatRadially:async(i,s)=>{if(!i||s.count<2)return;const a=i.canvas;if(!a)return;const{count:u,pivotX:p,pivotY:m,gap:y=0,mode:b="ring",startAngle:C=0,clockwise:N=!0,scaleStep:E=0,rotateAlongPath:V=!1,opacityFade:L=!1,jitter:ee=0}=s,G=i.getCenterPoint();let te=G.x-p,ne=G.y-m,de=Math.hypot(te,ne);de===0&&(te=1,ne=0,de=1);const be=N?1:-1,I=360/u;for(let Ee=1;Ee<u;Ee++){const Ye=await e().cloneObject(i),Be=C+be*I*Ee,ct=Ai.degreesToRadians(Be),nt=de+(b==="spiral"?y*Ee:y),et=te*Math.cos(ct)-ne*Math.sin(ct),ft=te*Math.sin(ct)+ne*Math.cos(ct),Ge=Math.hypot(et,ft),Mt=et/Ge*nt,he=ft/Ge*nt;let qe=p+Mt,it=m+he;ee>0&&(qe+=(Math.random()-.5)*2*ee,it+=(Math.random()-.5)*2*ee),Ye.set({angle:V?Be:i.angle+I*Ee,scaleX:i.scaleX*(1+E*Ee),scaleY:i.scaleY*(1+E*Ee),opacity:L?Math.max(0,1-Ee/u):i.opacity}),Ye.setPositionByOrigin(new ke(qe,it),"center","center"),Ye.setCoords(),a.add(Ye)}a.requestRenderAll()},repeatAlongPath1:async(i,s,a=20)=>{const u=e().canvas;if(!u||!i||!s)return;const p=[],m=s.getTotalLength();for(let y=0;y<m;y+=a){const b=s.getPointAtLength(y),C=await e().cloneObject(i);C.set({left:b.x,top:b.y,originX:"center",originY:"center"}),u.add(C),p.push(C)}return p},repeatAlongPath23:async(i,s,a=20,u)=>{if(!i||!s)return;const p=i.canvas;if(!p)return;const{rotateAlongPath:m=!1,scaleStep:y=0,opacityFade:b=!1}=u||{},C=s.path.reduce((G,te,ne,de)=>{if(te[0]==="M")return G;const be=de[ne-1];if(!be)return G;const I=te[1]-be[1],Ee=te[2]-be[2];return G+Math.hypot(I,Ee)},0);if(Math.floor(C/a)<1)return;const E=[];let V=0;const L=1,ee=s.path[0][0]==="M"?{x:s.path[0][1],y:s.path[0][2]}:{x:0,y:0};for(let G=1;G<s.path.length;G++){const te=s.path[G];if(te[0]==="L"){const ne=te[1],de=te[2],be=ne-ee.x,I=de-ee.y,Ee=Math.hypot(be,I),Ye=Math.floor(Ee/L);for(let Be=0;Be<Ye;Be++)if(V+=L,V%a<L){const ct=Be/Ye,nt=ee.x+be*ct,et=ee.y+I*ct,ft=Math.atan2(I,be)*(180/Math.PI);E.push({x:nt,y:et,angle:ft})}ee.x=ne,ee.y=de}}for(let G=0;G<E.length;G++){const te=await e().cloneObject(i),ne=E[G];te.set({left:ne.x,top:ne.y,angle:m?ne.angle:i.angle,scaleX:i.scaleX*(1+y*G),scaleY:i.scaleY*(1+y*G),opacity:b?Math.max(0,1-G/E.length):i.opacity}),te.setOriginX("center"),te.setOriginY("center"),te.setCoords(),p.add(te)}p.requestRenderAll()},repeatAlongPath:async(i,s,a=30,u={rotateAlongPath:!0})=>{const p=e().canvas;if(!p)return;const y=Ai.getPathSegmentsInfo(s.path).at(-1)?.length||0;if(y){p.discardActiveObject();for(let b=a;b<=y;b+=a){const{x:C,y:N,angle:E}=a3(s,b),V=await i.clone();V.set({left:C,top:N,originX:"center",originY:"center",angle:u.rotateAlongPath?E*180/Math.PI:i.angle}),p.add(V)}p.requestRenderAll()}},fillPattern:async(i,s)=>{if(!i||!s)return;const a=e().canvas;if(!a)return;const u=await e().cloneObject(i),p=new vl({source:u.toCanvasElement(),repeat:"repeat"});return s.set("fill",p),a.requestRenderAll(),p},removeObject:i=>{const s=e().canvas;!s||!i||(s.remove(i),o({objects:e().objects.filter(a=>a!==i)}))}});function a3(o,e){const t=Ai.getPointOnPath(o.path,e),i=o.calcTransformMatrix(),s=Ai.transformPoint(new ke(t.x,t.y),i),a=Ai.getPointOnPath(o.path,e+.1),u=Ai.transformPoint(new ke(a.x,a.y),i),p=Math.atan2(u.y-s.y,u.x-s.x);return{x:s.x,y:s.y,angle:p}}const o3=(o,e,t)=>({inputGeometry:null,outputGeometry:null,graph:{nodes:[]},setInputFromFabric:i=>{const s=e().fabricToGeometry(i);o({inputGeometry:s},()=>e().runGraph())},addNode:i=>o(s=>({graph:{nodes:[...s.graph.nodes,i]}}),()=>e().runGraph()),updateNodeInputs:(i,s)=>o(a=>({graph:{nodes:a.graph.nodes.map(u=>u.id===i?{...u,inputs:{...u.inputs,...s}}:u)}}),()=>e().runGraph()),removeNode:i=>o(s=>({graph:{nodes:s.graph.nodes.filter(a=>a.id!==i)}}),()=>e().runGraph()),runGraph:()=>{const{graph:i,inputGeometry:s}=e();if(!s)return;let a=structuredClone(s);for(const u of i.nodes)a=u.run(a,u.inputs,e());o({outputGeometry:a}),e().renderToFabric()},renderToFabric:()=>{const{canvas:i,outputGeometry:s}=e();!i||!s||(i.clear(),s.paths.forEach(a=>{const u=e().geometryPathToFabric(a);i.add(u)}),i.requestRenderAll())},translate:(i,s,a)=>({x:i.x+s,y:i.y+a}),rotate:(i,s)=>{const a=s*Math.PI/180;return{x:i.x*Math.cos(a)-i.y*Math.sin(a),y:i.x*Math.sin(a)+i.y*Math.cos(a)}},TransformNode:()=>({id:$h(),type:"transform",inputs:{x:0,y:0,rotation:0},run:(i,{x:s,y:a,rotation:u},p)=>({...i,paths:i.paths.map(m=>({...m,points:m.points.map(y=>p.rotate(p.translate(y,s,a),u))}))})}),RepeatNode:()=>({id:$h(),type:"repeat",inputs:{count:5,spacing:40,mode:"linear"},run:(i,{count:s,spacing:a,mode:u},p)=>{const m=[];for(let y=0;y<s;y++){const b=structuredClone(i);u==="linear"&&b.paths.forEach(C=>C.points.forEach(N=>{N.x+=y*a})),u==="radial"&&b.paths.forEach(C=>C.points.forEach((N,E)=>{C.points[E]=p.rotate(N,360/s*y)})),m.push(b)}return{type:"geometry",paths:m.flatMap(y=>y.paths)}}}),BooleanNode:()=>({id:$h(),type:"boolean",inputs:{mode:"unite",target},run:(i,{mode:s,target:a},u)=>{Ba.setup(new Ba.Size(5e3,5e3));const p=u.geometryToPaper(i),m=u.geometryToPaper(a),y=p[s](m);return u.paperToGeometry(y)}}),fabricToGeometry:i=>({type:"geometry",paths:[{closed:!0,points:i.path.map(s=>({x:s[1],y:s[2]}))}]}),geometryPathToFabric:i=>{const s=i.points.map((a,u)=>`${u===0?"M":"L"} ${a.x} ${a.y}`).join(" ")+(i.closed?" Z":"");return new ji(s,{fill:"",stroke:"black"})},geometryToPaper:i=>{const s=new Ba.Path;return i.paths[0].points.forEach((a,u)=>u===0?s.moveTo(a):s.lineTo(a)),s.closed=i.paths[0].closed,s},paperToGeometry:i=>({type:"geometry",paths:[{closed:i.closed,points:i.segments.map(s=>({x:s.point.x,y:s.point.y}))}]})});function f1(o,e,t){const i=o.getCenterPoint(),s=Ai.degreesToRadians(o.angle||0),a=o.scaleX||1,u=o.scaleY||1,p=o.pathOffset||{x:0,y:0},m=t.left-i.x,y=t.top-i.y,b=(m*Math.cos(-s)-y*Math.sin(-s))/a,C=(m*Math.sin(-s)+y*Math.cos(-s))/u;e[1]=b+p.x,e[2]=C+p.y,o.dirty=!0,o.setCoords()}function zx(o,e,t){const i=e.getCenterPoint(),s=Ai.degreesToRadians(e.angle||0),a=e.scaleX||1,u=e.scaleY||1,p=e.pathOffset||{x:0,y:0},m=(t[1]-p.x)*a,y=(t[2]-p.y)*u,b=m*Math.cos(s)-y*Math.sin(s),C=m*Math.sin(s)+y*Math.cos(s);o.set({left:i.x+b,top:i.y+C}),o.setCoords()}function l3(o){if(o.path&&(o.type==="circle"||o.type==="ellipse")){const e=(o.width||0)/2,t=(o.height||0)/2;o.path=[["M",0,-t],["L",e,0],["L",0,t],["L",-e,0],["Z"]],o.dirty=!0,o.setCoords()}}function c3(o,e){if(!e.path)return[];e.selectable=!1,e.evented=!1;const t=[];return e.path.forEach(i=>{if(typeof i[1]!="number"||typeof i[2]!="number")return;const s=new qi({radius:5,fill:"white",stroke:"blue",strokeWidth:2,originX:"center",originY:"center",hasControls:!1,hasBorders:!1,selectable:!0,evented:!0,hoverCursor:"pointer"});zx(s,e,i),s.on("moving",()=>{const a=e.getCenterPoint(),u=Ai.degreesToRadians(e.angle||0),p=e.scaleX||1,m=e.scaleY||1,y=s.left-a.x,b=s.top-a.y,C=y*Math.cos(-u)-b*Math.sin(-u),N=y*Math.sin(-u)+b*Math.cos(-u);i[1]=C/p,i[2]=N/m,e.dirty=!0,e.setCoords(),t.forEach(E=>zx(E.node,e,E.seg)),o.requestRenderAll()}),o.on("mouse:down",a=>{const u=xe.getState();u.activeTool&&!a.target&&u.exitNodeMode(o)}),o.add(s),t.push({node:s,seg:i})}),t}function u3(o,e,t,i){if(!e.path)return;const s=e.pathOffset||{x:0,y:0},a=["L",t-s.x,i-s.y];e.path.push(a);const u=new qi({radius:5,fill:"white",stroke:"blue",strokeWidth:2,originX:"center",originY:"center",selectable:!0,evented:!0,hoverCursor:"pointer"});u.set({left:t,top:i}),u.on("moving",()=>f1(e,a,u)),u.on("mousedblclick",()=>h3(o,e,u,a)),o.add(u),e.dirty=!0,e.setCoords(),o.requestRenderAll()}function h3(o,e,t,i){const s=e.path.indexOf(i);s>-1&&e.path.splice(s,1),o.remove(t),e.dirty=!0,e.setCoords(),o.requestRenderAll()}async function f3(o){const e=o.getActiveObject();if(!e)return null;const t=await e.clone();t.set({left:0,top:0,angle:0,scaleX:1,scaleY:1,skewX:0,skewY:0});const i=e.getCenterPoint(),s=t.toSVG(),a=new Ba.PaperScope;a.setup(new a.Size(1,1)),a.activate();const u=a.project.importSVG(s,{expandShapes:!0,insert:!1});if(!u)return null;let p=null;if(u instanceof a.Path||u instanceof a.CompoundPath)p=u.pathData;else if(u instanceof a.Group){const m=u.getItems({class:a.Path,recursive:!0})[0];m&&(p=m.pathData)}return a.project.clear(),p?{d:p,center:i}:null}function d3(o,e,t){e.on("mousedown",i=>{const s=o.getPointer(i.e),a=s.x,u=s.y;if(!e.path)return;let p=1/0,m=0;for(let y=0;y<e.path.length-1;y++){const b=e.path[y],C=e.path[y+1],N=b[1]+(e.pathOffset?.x||0),E=b[2]+(e.pathOffset?.y||0),V=C[1]+(e.pathOffset?.x||0),L=C[2]+(e.pathOffset?.y||0),ee=g3({x:a,y:u},{x:N,y:E},{x:V,y:L});ee<p&&(p=ee,m=y+1)}if(p<20){const y=["L",a-(e.pathOffset?.x||0),u-(e.pathOffset?.y||0)];v3(o,e,y,m,a,u,t)}})}function g3(o,e,t){const i=(e.x-t.x)**2+(e.y-t.y)**2;if(i===0)return Math.hypot(o.x-e.x,o.y-e.y);const s=Math.max(0,Math.min(1,((o.x-e.x)*(t.x-e.x)+(o.y-e.y)*(t.y-e.y))/i)),a=e.x+s*(t.x-e.x),u=e.y+s*(t.y-e.y);return Math.hypot(o.x-a,o.y-u)}function p3(o,e){const t=e.getBoundingRect(!0),i=new qi({radius:6,fill:"green",stroke:"black",strokeWidth:1,originX:"center",originY:"center",selectable:!0,evented:!0,hoverCursor:"crosshair"});return i.selectable=!1,i.set({left:t.left+t.width/2,top:t.top-30}),i.on("moving",()=>{const s=e.getCenterPoint(),a=i.left-s.x,u=i.top-s.y,p=Math.atan2(u,a);e.set({angle:Ai.radiansToDegrees(p)}),e.setCoords(),o.requestRenderAll()}),i}function Ix(o,e,t,i=50){const s=new cs([e.left,e.top,t.left,t.top],{stroke:"yellow",strokeWidth:1,selectable:!1,evented:!1,strokeDashArray:[4,2]});o.add(s);const a=()=>{const u=t.left-e.left,p=t.top-e.top,m=Math.sqrt(u*u+p*p);let y=t.left,b=t.top;if(m>i){const C=i/m;y=e.left+u*C,b=e.top+p*C}s.set({x1:e.left,y1:e.top,x2:y,y2:b}),s.setCoords(),o.requestRenderAll()};return e.on("moving",a),t.on("moving",a),a(),s}function m3(o,e,t,i){const s=t.indexOf(i);s!==-1&&(e.path.splice(s,1),o.remove(i.node),i.handle&&o.remove(i.handle),i.oppositeHandle&&o.remove(i.oppositeHandle),i.handleLine&&o.remove(i.handleLine),i.oppositeHandleLine&&o.remove(i.oppositeHandleLine),t.splice(s,1),e.dirty=!0,e.setCoords(),o.requestRenderAll())}function rp(o,e){o.handle&&o.handle.set({visible:e}),o.oppositeHandle&&o.oppositeHandle.set({visible:e}),o.handleLine&&o.handleLine.set({visible:e}),o.oppositeHandleLine&&o.oppositeHandleLine.set({visible:e}),o.handlesVisible=e}function v3(o,e,t,i,s,a,u){e.pathOffset;const p=new qi({radius:5,fill:"white",stroke:"blue",strokeWidth:2,originX:"center",originY:"center",selectable:!0,evented:!0,hoverCursor:"pointer"});p.set({left:s,top:a}),o.add(p);const m={type:"anchor",index:i,seg:t,node:p};if(t[0]==="C"||t[0]==="Q"){const y=new qi({radius:4,fill:"orange",originX:"center",originY:"center",selectable:!0,evented:!0});o.add(y);const b=Ix(o,p,y,50);if(m.handle=y,m.handleLine=b,t[0]==="C"){const C=new qi({radius:4,fill:"orange",originX:"center",originY:"center",selectable:!0,evented:!0});o.add(C);const N=Ix(o,p,C,50);y3(m,p),m.oppositeHandle=C,m.oppositeHandleLine=N}rp(m,!1),p.on("selected",()=>rp(m,!0)),p.on("deselected",()=>rp(m,!1))}return p.on("moving",()=>f1(e,t,p)),p.on("mousedblclick",()=>m3(o,e,u,m)),u.splice(i,0,m),e.path.splice(i,0,t),e.dirty=!0,e.setCoords(),o.requestRenderAll(),m}function y3(o,e){if(!o.handle||!o.oppositeHandle)return;o.mirrorHandles=!0;const t=(i,s)=>{const a=e.left,u=e.top,p=i.left,m=i.top,y=p-a,b=m-u;s.set({left:a-y,top:u-b}),s.setCoords(),o.oppositeHandleLine&&o.oppositeHandleLine.set({x2:s.left,y2:s.top}),canvas.requestRenderAll()};o.handle.on("moving",()=>t(o.handle,o.oppositeHandle)),o.oppositeHandle.on("moving",()=>t(o.oppositeHandle,o.handle))}const x3=(o,e,t)=>({nodeMode:!1,activePath:null,nodes:[],enterNodeMode:async()=>{const{canvas:i}=e(),s=i.getActiveObject();if(!s)return;const a=await f3(i);if(!a)return;const u=new ji(a.d,{left:a.center.x,top:a.center.y,fill:s.fill,stroke:s.stroke,strokeWidth:s.strokeWidth,opacity:s.opacity,originX:"center",originY:"center",objectCaching:!1,noScaleCache:!0,selectable:!1,evented:!1});u.set({angle:s.angle,scaleX:s.scaleX,scaleY:s.scaleY}),l3(u),i.add(u),i.remove(s),u.setCoords();const p=c3(i,u),m=p3(i,u);d3(i,u,p),o({nodeMode:!0,activePath:u,nodes:p,rotationHandle:m}),o({nodeMode:!0,activePath:u,nodes:p,rotationHandle:m}),i.requestRenderAll()},exitNodeMode:i=>{const s=e().activePath;s&&(e().nodes.forEach(a=>{i.remove(a.node),a.handle&&i.remove(a.handle),a.oppositeHandle&&i.remove(a.oppositeHandle),a.handleLine&&i.remove(a.handleLine),a.oppositeHandleLine&&i.remove(a.oppositeHandleLine)}),s.selectable=!0,s.evented=!0,s.setCoords(),o({nodeMode:!1,activePath:null,nodes:[]}),i.requestRenderAll())},addNodeAt:(i,s,a)=>{const u=e().activePath;u&&u3(i,u,s,a)}}),Fx={brightness:0,contrast:0,saturation:0,blur:0,noise:0,pixelate:1,hue:0,gamma:[1,1,1],grayscale:!1,sepia:!1,invert:!1,opacity:1},b3=o=>({...Fx,setFilter:(e,t)=>o(()=>({[e]:t})),resetFilters:()=>o(()=>({...Fx}))}),_3=(o,e,t)=>({...f5(o,e),...E5(o,e),...d5(o,e),...g5(o,e),...jx(o,e),..._5(o,e),...O5(o,e),...G5(o,e),...q5(o,e),...Z5(o,e),...K5(o,e),...J5(o,e),...t3(o,e),...i3(o),...n3(o,e),...r3(o,e),...o3(o,e),...x3(o,e),...b3(o),...jx(o,e)}),S3=!1,xe=Rw(Iw(_3,{name:"DesignEditorStore",enabled:S3}));function w3(){const[o,e]=fe.useState(!1);return fe.useEffect(()=>{const t=Tl.local.get("fateboard-settings",{});xe.getState().hydrate(t),e(!0)},[]),o&&k.jsx(q2,{})}const pf=({src:o,...e})=>k.jsx(k.Fragment,{children:k.jsx("img",{src:o,...e})});function d1(o){fe.useEffect(()=>{document.title=o},[o])}function C3({images:o}){const[e,t]=Yr.useState(0);return Yr.useEffect(()=>{const i=setInterval(()=>{t(s=>(s+1)%o.length)},2500);return()=>clearInterval(i)},[o.length]),k.jsxs("div",{className:"relative bg-white rounded-2xl shadow overflow-hidden",children:[k.jsx("img",{src:o[e],alt:"Fateboard glimpse",className:"w-full h-64 object-cover transition-all"}),k.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2",children:o.map((i,s)=>k.jsx("span",{className:`h-2 w-2 rounded-full ${s===e?"bg-blue-600":"bg-gray-300"}`},s))})]})}function T3(){d1("Online Whiteboard | Fateboard");const o=vf(),e=()=>{o("/draw")};return k.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800",children:[k.jsx("header",{className:"bg-white shadow-sm",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex justify-between items-center",children:[k.jsx(pf,{src:"fate.svg",className:"h-10 cursor-pointer"}),k.jsxs("nav",{className:"space-x-6 text-sm",children:[k.jsx("a",{href:"#features",className:"hover:text-blue-600",children:"Features"}),k.jsx("a",{href:"#process",className:"hover:text-blue-600",children:"Action"})]})]})}),k.jsx("section",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-24 text-center",children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Draw the Fate"}),k.jsx("p",{className:"max-w-2xl mx-auto text-lg mb-8 opacity-90",children:"Just start with a blank canvas and the freedom to move the draw fate."}),k.jsx("button",{className:"bg-white text-blue-600 px-8 py-3 rounded-full font-semibold shadow hover:scale-105 transition",onClick:e,children:"Start Now"})]})}),k.jsx("section",{id:"features",className:"py-20",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[k.jsx("h3",{className:"text-3xl font-bold text-center mb-12",children:"Key Features"}),k.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{title:"Shape Creation",desc:"Draw rectangles, circles, arrows, and freehand shapes just like on a real whiteboard."},{title:"Easy to Use",desc:"No learning curve. Pick a tool, draw, and your idea comes to life instantly."},{title:"Color Options",desc:"Choose colors that feel right  soft, bold, or playful  to match your story."}].map(t=>k.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow hover:shadow-lg transition",children:[k.jsx("h4",{className:"text-xl font-semibold mb-3",children:t.title}),k.jsx("p",{className:"text-sm text-gray-600",children:t.desc})]},t.title))})]})}),k.jsx("section",{id:"process",className:"bg-gray-100 py-20",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[k.jsx("h3",{className:"text-3xl font-bold text-center mb-6",children:"See It In Action"}),k.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"A quick look at how ideas turn into visuals  simple, smooth, and human."}),k.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Draw Naturally"}),k.jsx("p",{className:"text-sm text-gray-600",children:"Pick a shape or pen and draw freely, just like on a real whiteboard."})]}),k.jsxs("div",{children:[k.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Adjust as You Go"}),k.jsx("p",{className:"text-sm text-gray-600",children:"Resize, recolor, and tweak elements until it feels right."})]}),k.jsxs("div",{children:[k.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Bring It to Life"}),k.jsx("p",{className:"text-sm text-gray-600",children:"Watch your board come alive with smooth visual flow."})]})]}),k.jsx(C3,{images:["./demo.png","./shape.png","./draw.png","./text.png"]})]})]})}),k.jsx("footer",{className:"bg-white border-t",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-6 text-sm text-center text-gray-500",children:[" ",new Date().getFullYear()," fateboard. All rights reserved."]})})]})}const k3=({header:o,leftSidebar:e,undoRedoSidebar:t,canvasBoard:i,rightSidebar:s,footer:a,rightPanel:u})=>k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[o&&o,k.jsxs("main",{className:"relative flex flex-1 overflow-hidden",children:[i&&i,u&&k.jsx("div",{className:"absolute top-0 right-0 h-full",children:u})]}),a&&a]}),e&&e]});function A3(o,e=!1){return[o.metaKey?"Meta":"",o.ctrlKey?"Ctrl":"",o.shiftKey?"Shift":"",o.altKey?"Alt":"",e?"Drag":"",o.code.startsWith("Key")?o.code.replace("Key","").toLowerCase():o.code].filter(Boolean).join("+")}function g1(){const o=xe(t=>t.commands),e=xe(t=>t.runCommand);fe.useEffect(()=>{const t=i=>{const s=i.target;if(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)return;const a=A3(i),u=o.find(p=>Mx(p.shortcut)===Mx(a));u&&(i.preventDefault(),e(u.id))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o,e])}function p1(o){var e,t,i="";if(typeof o=="string"||typeof o=="number")i+=o;else if(typeof o=="object")if(Array.isArray(o)){var s=o.length;for(e=0;e<s;e++)o[e]&&(t=p1(o[e]))&&(i&&(i+=" "),i+=t)}else for(t in o)o[t]&&(i&&(i+=" "),i+=t);return i}function yn(){for(var o,e,t=0,i="",s=arguments.length;t<s;t++)(o=arguments[t])&&(e=p1(o))&&(i&&(i+=" "),i+=e);return i}const Bh=8,O3=300,hn=({content:o,position:e="top",children:t})=>{const i=fe.useRef(null),s=fe.useRef(null),a=fe.useRef(null),[u,p]=fe.useState(!1),[m,y]=fe.useState({top:0,left:0}),[b,C]=fe.useState(e);fe.useEffect(()=>()=>{a.current&&window.clearTimeout(a.current)},[]);const N=()=>{a.current&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{a.current=null,p(!0)},O3)},E=()=>{a.current&&(window.clearTimeout(a.current),a.current=null),p(!1)};fe.useLayoutEffect(()=>{if(!u||!i.current||!s.current)return;const G=i.current.getBoundingClientRect(),te=s.current.getBoundingClientRect(),ne=Ee=>{switch(Ee){case"bottom":return{top:G.bottom+Bh,left:G.left+G.width/2-te.width/2};case"left":return{top:G.top+G.height/2-te.height/2,left:G.left-te.width-Bh};case"right":return{top:G.top+G.height/2-te.height/2,left:G.right+Bh};default:return{top:G.top-te.height-Bh,left:G.left+G.width/2-te.width/2}}};let de=e,{top:be,left:I}=ne(de);be<4&&de==="top"&&(de="bottom"),be+te.height>window.innerHeight&&de==="bottom"&&(de="top"),I<4&&de==="left"&&(de="right"),I+te.width>window.innerWidth&&de==="right"&&(de="left"),{top:be,left:I}=ne(de),C(de),y({top:Math.max(6,Math.round(be)),left:Math.max(6,Math.round(I))})},[u,e]);const V=G=>{G.key==="Escape"&&E()},L=fe.useRef(`tooltip-${Math.random().toString(36).slice(2)}`),ee=typeof document<"u"?document.body:null;return k.jsxs(k.Fragment,{children:[k.jsx("span",{ref:i,className:"inline-flex",onMouseEnter:N,onMouseLeave:E,onClick:E,onFocus:N,onBlur:E,onKeyDown:V,tabIndex:0,"aria-describedby":o?L.current:void 0,children:t}),u&&ee?Ip.createPortal(k.jsxs("div",{id:L.current,ref:s,role:"tooltip","aria-hidden":!u,style:{position:"fixed",top:m.top,left:m.left},className:"animate-tooltip z-[9999] rounded-md bg-white px-3 py-1.5 text-[11px] font-medium text-gray-900 shadow-[0_8px_24px_rgba(0,0,0,0.18)] whitespace-nowrap pointer-events-none animate-tooltip-min",children:[o,k.jsx("div",{className:`absolute w-1.5 h-1.5 bg-white rotate-45 ${b==="top"?"bottom-[-3px] left-1/2 -translate-x-1/2":b==="bottom"?"top-[-3px] left-1/2 -translate-x-1/2":b==="left"?"right-[-3px] top-1/2 -translate-y-1/2":"left-[-3px] top-1/2 -translate-y-1/2"}`})]}),ee):null]})},E3="inline-flex overflow-hidden rounded-sm bg-stone-200 shadow-[0_1px_2px_rgba(0,0,0,0.03)]",j3="flex items-center gap-1 px-2 h-6 text-[11px] font-medium transition-colors border-r border-gray-100 last:border-r-0",jp=({options:o,value:e={},onChange:t,single:i=!1})=>{const a=p=>{const m=e??{};let y;i?(y={...m},o.forEach(b=>{y[b.key]=b.key===p})):y={...m,[p]:!m[p]},t?.(y)},u=p=>typeof p=="string"?k.jsx("i",{className:p,style:{fontSize:9.8}}):p;return k.jsx("div",{className:E3,role:"group",children:o.map(({key:p,icon:m,label:y,tooltip:b})=>{const C=!!e?.[p];return k.jsx(hn,{content:b,position:"bottom",children:k.jsxs("button",{type:"button","aria-pressed":C,onClick:()=>a(p),className:yn(j3,C?"bg-blue-500 text-white hover:bg-blue-600":"text-gray-600 hover:bg-gray-50"),children:[u(m),y&&k.jsx("span",{children:y})]})},p)})})};function $s({options:o=[],value:e,onChange:t,className:i="",label:s,preview:a,disabled:u,size:p="sm",variant:m="default"}){const y={sm:"h-4 text-xs px-1",md:"h-6 text-sm px-2",lg:"h-8 text-base px-3"},b={default:"border-gray-300",error:"border-red-400"};return k.jsxs("div",{className:yn("flex items-center gap-1",i),children:[s&&k.jsx("span",{className:"text-xs text-gray-600",children:s}),a&&k.jsx("div",{children:a}),k.jsx("select",{value:e,onChange:C=>t?.(C.target.value),disabled:u,className:yn("px-1 h-6 text-xs border border-gray-300 rounded cursor-pointer",y[p],b[m]),children:o.map(C=>k.jsx("option",{value:C.value,children:C.label},C.value))})]})}const m1=[{label:"8px",value:8},{label:"10px",value:10},{label:"12px",value:12},{label:"14px",value:14},{label:"16px",value:16},{label:"18px",value:18},{label:"20px",value:20},{label:"24px",value:24},{label:"28px",value:28},{label:"32px",value:32},{label:"36px",value:36},{label:"48px",value:48},{label:"64px",value:64},{label:"72px",value:72},{label:"96px",value:96},{label:"144px",value:144}],v1=[{key:"bold",icon:"fa-solid fa-bold",tooltip:"Bold"},{key:"italic",icon:"fa-solid fa-italic",tooltip:"Italic"},{key:"underline",icon:"fa-solid fa-underline",tooltip:"Underline"}];function y1({target:o,canvas:e,onChange:t}){const i=xe(L=>L.fontSize),s=xe(L=>L.setFontSize),a=xe(L=>L.fontFamily),u=xe(L=>L.setFontFamily),p=xe(L=>L.isBold),m=xe(L=>L.setIsBold),y=xe(L=>L.isItalic),b=xe(L=>L.setIsItalic),C=xe(L=>L.isUnderline),N=xe(L=>L.setIsUnderline),E=xe(L=>L.fonts),V=fe.useRef(null);return fe.useEffect(()=>{o&&(m(o.fontWeight==="bold"),b(o.fontStyle==="italic"),N(!!o.underline),u(o.fontFamily||"Arial"),s(o.fontSize||14))},[o]),fe.useLayoutEffect(()=>{if(!o||!e||!V.current)return;const L=V.current,ee=()=>{if(!o||!L)return;o.setCoords();const{tl:de,tr:be,bl:I,br:Ee}=o.aCoords,Ye=(de.x+be.x)/2,Be=(I.y+Ee.y)/2,ct=e.viewportTransform||[1,0,0,1,0,0],nt=ct[0]*Ye+ct[2]*Be+ct[4],et=ct[1]*Ye+ct[3]*Be+ct[5],ft=e.getElement().getBoundingClientRect(),Ge=8,Mt=ft.left+nt,he=ft.top+et+Ge,qe=L.getBoundingClientRect();L.style.position="fixed",L.style.left=`${Mt-qe.width/2}px`,L.style.top=`${he}px`,L.style.zIndex="500"};let G=null;const te=()=>{G==null&&(G=requestAnimationFrame(()=>{G=null,ee()}))};ee();const ne=["object:moving","object:scaling","object:rotating","object:modified","mouse:wheel","after:render"];return ne.forEach(de=>e.on(de,te)),window.addEventListener("resize",ee),window.addEventListener("scroll",ee,!0),()=>{ne.forEach(de=>e.off(de,te)),window.removeEventListener("resize",ee),window.removeEventListener("scroll",ee,!0),G!=null&&cancelAnimationFrame(G)}},[o,e]),o?k.jsxs("div",{ref:V,className:"absolute z-50 flex items-center gap-2 bg-stone-50 shadow-lg rounded-full border-1 border-stone-100 px-4 py-2",children:[k.jsx($s,{value:a,options:E,onChange:L=>{console.log(L),u(L),t?.({fontFamily:L})}}),k.jsx($s,{value:i,options:m1,onChange:L=>{const ee=parseInt(String(L),10);s(ee),t?.({fontSize:ee})}}),k.jsx(jp,{options:v1,value:{bold:p,italic:y,underline:C},onChange:L=>{const{bold:ee,italic:G,underline:te}=L;m(ee),b(G),N(te),t?.({fontWeight:ee?"bold":"normal",fontStyle:G?"italic":"normal",underline:te})}})]}):null}const x1=[...v0,{type:"divider"},...x0,{type:"divider"},...y0],Xc=8e3,Pa=Xc/2;function M3({mouseX:o,scrollX:e,viewportWidth:t}){const i=Pa-e,s=100,u=s/10,p=2e3;return k.jsxs("div",{className:"h-[16px] bg-slate-50 border-b border-slate-200 relative overflow-hidden select-none",children:[Array.from({length:p*2/u}).map((m,y)=>{const b=y*u-p,C=i+b+15;if(C<-60||C>t+60)return null;const N=b%s===0,E=b%s===s/2,V=N?"h-full":E?"h-[40%]":"h-[20%]",L=N?"border-slate-500":"border-slate-300";return k.jsx("div",{className:`absolute bottom-0 border-l ${V} ${L}`,style:{left:C},children:N&&k.jsx("span",{className:"absolute top-[4px] left-[4px] text-[6px] text-slate-600 font-medium",children:b})},y)}),k.jsx("div",{className:"absolute top-0 h-full w-[2px] bg-blue-600 pointer-events-none",style:{left:i+15}}),k.jsx("div",{className:"absolute top-0 h-full w-[1px] bg-red-500/80 pointer-events-none",style:{left:i+o+15}})]})}function D3({mouseY:o,scrollY:e,viewportHeight:t}){const i=Pa-e,s=100,u=s/10,p=2e3;return k.jsxs("div",{className:"w-[16px] bg-slate-50 border-r border-slate-200 relative overflow-hidden select-none",children:[Array.from({length:p*2/u}).map((m,y)=>{const b=y*u-p,C=i+b;if(C<-60||C>t+60)return null;const N=b%s===0,E=b%s===s/2,V=N?"w-full":E?"w-[40%]":"w-[20%]",L=N?"border-slate-900":"border-slate-300";return k.jsx("div",{className:`absolute right-0 border-t ${V} ${L}`,style:{top:C},children:N&&k.jsx("span",{className:"absolute left-[6px] top-[6px] -rotate-90 origin-left text-[6px] text-slate-600 font-medium",children:b})},y)}),k.jsx("div",{className:"absolute left-0 w-full h-[2px] bg-blue-600 pointer-events-none",style:{top:i}}),k.jsx("div",{className:"absolute left-0 w-full h-[1px] bg-red-500/80 pointer-events-none",style:{top:i+o}})]})}function N3(){const o=fe.useRef(null),e=fe.useRef(null),t=xe(V=>V.init),i=xe(V=>V.canvas),s=xe(V=>V.openMenu),a=xe(V=>V.fill),u=xe(V=>V.selectedObject);g1();const p=fe.useRef(null),[m,y]=fe.useState({x:0,y:0}),[b,C]=fe.useState({x:0,y:0});fe.useEffect(()=>{o.current&&!i&&t(o.current)},[t,i]),fe.useEffect(()=>(i&&(e.current=new m0(i,()=>a),i.renderAll()),()=>{i&&(e.current?.disable(),e.current=null)}),[i,a]);const N=V=>{V.preventDefault(),console.log(V.clientX,V.clientY),s(V.clientX,V.clientY,x1)};fe.useEffect(()=>{const V=p.current;V&&(V.scrollLeft=Pa-300,V.scrollTop=Pa-60)},[]),fe.useEffect(()=>{const V=p.current;if(!V)return;const L=()=>{C({x:V.scrollLeft,y:V.scrollTop})};return V.addEventListener("scroll",L),L(),()=>V.removeEventListener("scroll",L)},[]);const E=V=>{const L=p.current,ee=L.getBoundingClientRect();return{x:V.clientX-ee.left+L.scrollLeft-Pa,y:V.clientY-ee.top+L.scrollTop-Pa}};return k.jsxs("div",{className:"relative w-full h-full",children:[k.jsx(M3,{mouseX:m.x,scrollX:b.x,viewportWidth:p.current?.clientWidth??0}),k.jsxs("div",{className:"flex bg-amber-400",style:{height:"calc(100% - 16px)"},children:[k.jsx(D3,{mouseY:m.y,scrollY:b.y,viewportHeight:p.current?.clientHeight??0}),k.jsx("div",{ref:p,className:"relative overflow-auto bg-stone-200 w-full",onMouseMove:V=>y(E(V)),children:k.jsx("div",{className:"relative",style:{width:Xc,height:Xc},onContextMenu:N,children:k.jsxs("div",{className:"overflow-hidden absolute bg-white border border-stone-300 shadow-sm",style:{left:Pa,top:Pa},children:[k.jsx("canvas",{ref:o,width:Xc,height:Xc,className:"absolute inset-0"}),u?.type==="textbox"&&i&&k.jsx(y1,{target:u,canvas:i,onChange:V=>{u&&(u.set(V),i.requestRenderAll())}})]})})})]})]})}function R3(o,e,t){switch(o){case"left":return{top:e.top-10,left:e.right+18};case"right":return{top:e.top,left:e.left-t.width-18};case"top":return{top:e.bottom+18,left:e.left};case"bottom":return{top:e.top-t.height-18,left:e.left};default:return{top:e.top,left:e.right+18}}}function L3({tools:o,activeTool:e,onToolClick:t,position:i}){const s=xe(u=>u.isActiveObjectLocked());xe(u=>u.iconSize);const a={left:"fixed top-1/2 left-6 -translate-y-1/2 flex-col",right:"fixed top-1/2 right-2 -translate-y-1/2 flex-col",top:"fixed top-0 left-1/2 -translate-x-1/2 flex-row",bottom:"fixed bottom-0 left-1/2 -translate-x-1/2 flex-row"};return k.jsx("div",{className:`flex justify-center items-center bg-white border border-stone-200 shadow rounded-md gap-2 z-50 p-2 ${a[i]}`,children:o.map(u=>{const p=u.id==="lock"?s?"fa-solid fa-lock":"fa-solid fa-unlock":u.icon;return k.jsx(hn,{content:u.tooltip,position:u.position,children:k.jsx("button",{onClick:m=>t(u.id,m),className:yn("flex justify-center items-center cursor-pointer h-8 w-8 p-2 rounded-md",e===u.id?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200"),children:k.jsx("i",{className:p})},u.id)},u.id)})})}function P3({isOpen:o,position:e,from:t="left",children:i}){return e?Ip.createPortal(k.jsx("aside",{style:{position:"fixed",top:"50%",left:`${e.left}px`},className:yn("bg-stone-100 border border-stone-200 rounded-md shadow-lg w-70 p-4 z-50 transform -translate-y-1/2 transition-all duration-300 ease-out",o?"opacity-100 translate-x-0 pointer-events-auto":t==="left"?"-translate-x-4 opacity-0 pointer-events-none":"translate-x-4 opacity-0 pointer-events-none"),children:i}),document.body):null}const B3=(o,e)=>({select:()=>o.setActiveTool("select"),pan:()=>o.setActiveTool("pan"),draw:()=>o.setActiveTool("draw"),shapes:()=>{},text:()=>o.addText({}),delete:()=>e(),undo:()=>o.undo(),redo:()=>o.redo(),group:()=>o.groupLayers(),ungroup:()=>o.ungroupSelected(),forward:()=>o.bringForward(),backward:()=>o.sendBackward(),forwards:()=>o.bringToFront(),backwards:()=>o.sendToBack(),lock:()=>o.toggleActiveObjectLock(),fullscreen:()=>o.toggleFullscreen(),zoomIn:()=>o.zoomIn(),zoomOut:()=>o.zoomOut(),zoomFit:()=>o.zoomFit(),copy:()=>o.copy(),paste:()=>o.paste(),duplicate:()=>o.duplicate()}),z3=(o,e,t)=>{if(!o?.component)return null;const i=e.currentTarget.getBoundingClientRect(),s=o.panelSize||{width:288,height:300};return R3(t,i,s)};function I3({config:o,toolbarPosition:e="left"}){const[t,i]=fe.useState(null),[s,a]=fe.useState(null),u=xe(),p=u.removeLayer,m=B3(u,p),y=(C,N)=>{const E=o.find(V=>V.id===C);if(E){if(E.type==="momentary"){u.setActiveTool(C),setTimeout(()=>u.setActiveTool(null),400),m[C]?.();return}if(E.type==="exclusive"){u.activeTool===C?(u.setActiveTool("select"),i(null)):(u.setActiveTool(C),i(null),m[C]?.());return}if(E.type==="panel"){t===C?(i(null),u.setActiveTool("select")):(i(C),a(z3(E,N,e)),u.setActiveTool(C),m[C]?.());return}}},b=C=>{const N=o.find(E=>E.id===C);N&&(i(null),N.id!=="draw"&&u.setActiveTool("select"))};return k.jsxs(k.Fragment,{children:[k.jsx(L3,{tools:o,activeTool:u.activeTool,onToolClick:y,position:e}),o.map(C=>t===C.id&&C.component&&k.jsx(P3,{isOpen:!0,position:s,from:e,children:typeof C.component=="function"?k.jsx(C.component,{closePanel:()=>b(C.id)}):C.component},C.id))]})}const F3=({onClick:o,size:e=24,className:t="",title:i="Close"})=>k.jsx("button",{onClick:o,title:i,"aria-label":i,className:yn("flex items-center justify-center rounded-full hover:bg-gray-200 cursor-pointer",t),style:{width:e,height:e},children:""});function b1({title:o,onClose:e}){return k.jsxs("div",{className:"flex items-center justify-between pb-3",children:[k.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o}),k.jsx(F3,{onClick:e})]})}function V3({closePanel:o}){xe(m=>m.canvas);const e=xe(m=>m.color),t=xe(m=>m.setBrushColor),i=xe(m=>m.width),s=xe(m=>m.setBrushWidth),a=xe(m=>m.brush),u=xe(m=>m.setBrush);console.log("brushColor",e);const p=["pencil","circle","spray","pattern","eraser"];return k.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[k.jsx(b1,{title:"Draw",onClose:o}),k.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[k.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:k.jsx("input",{type:"range",min:"1",max:"50",value:i,onChange:m=>s({width:Number(m.target.value)}),className:"rotate-[-90deg] w-48 cursor-pointer"})}),k.jsxs("div",{className:"flex items-center justify-between pl-4 relative",children:[k.jsx("span",{className:"text-sm font-medium",children:"Color:"}),k.jsx("input",{type:"color",value:e,onChange:m=>t({color:m.target.value}),className:"absolute right-0 w-8 h-8 opacity-0 cursor-pointer"}),k.jsx("div",{className:"h-6 w-6 rounded-full border shadow-sm",style:{backgroundColor:e}})]}),k.jsxs("div",{className:"flex items-center justify-between pl-4",children:[k.jsx("span",{className:"text-sm font-medium",children:"Brush:"}),k.jsx("select",{value:a,onChange:m=>u({color:e,width:i,brush:m.target.value}),className:"ml-2 border rounded p-1 flex-1",children:p.map(m=>k.jsx("option",{value:m,children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),k.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[k.jsx("span",{className:"text-sm font-medium",children:"Width:"}),[12,10,8,6,4,2].map(m=>k.jsx("div",{onClick:()=>s({width:m}),className:`rounded-full border cursor-pointer flex items-center justify-center transition-transform
                        ${i===m?"scale-110 border-blue-500":"border-gray-400"}`,style:{width:`${m*2}px`,height:`${m*2}px`,backgroundColor:e}},m))]}),k.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[k.jsx("div",{className:"flex items-center justify-center rounded-full border h-6 w-6",style:{backgroundColor:e,borderColor:"#333"},children:k.jsx("span",{className:"text-xs text-white select-none",children:a.charAt(0).toUpperCase()})}),k.jsxs("span",{className:"text-sm",children:[i,"px"]})]})]})]})}const U3=o=>k.jsx("svg",{width:"200",height:"100",viewBox:"0 0 200 100",children:k.jsx("path",{d:"M 0 100 A 100 100 0 0 1 200 100 Z",fill:"black"})}),H3=o=>k.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:k.jsx("path",{d:`
        M 0 100
        A 100 100 0 0 1 100 0
        L 100 100
        Z
        `,fill:"black"})}),Y3=o=>k.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:k.jsx("path",{d:`
        M 0 100
        A 100 100 0 0 1 60 0
        L 100 100
        Z
        `,fill:"black"})}),Vx=[{type:"triangle",tooltip:"Triangle",icon:"fas fa-play rotate-270",defaultProps:{width:120,height:120,fill:"transparent",stroke:"black"}},{type:"square",tooltip:"Square",icon:"fa-sharp fa-solid fa-square",defaultProps:{width:120,height:120,rx:0,ry:0,fill:"transparent",stroke:"black"}},{type:"rect",tooltip:"Rectangle",icon:"fa-solid fa-square transform scale-x-120",defaultProps:{width:200,height:120,rx:0,ry:0,fill:"transparent",stroke:"black"}},{type:"pentagon",tooltip:"Pentagon",icon:"fa-sharp fa-solid fa-pentagon",defaultProps:{width:200,height:120,rx:0,ry:0,fill:"transparent",stroke:"black"}},{type:"hexagon",tooltip:"Hexagon",icon:"fa-sharp fa-solid fa-hexagon",defaultProps:{width:200,height:120,rx:0,ry:0,stroke:"black",fill:"rgba(0,0,0,0)",objectCaching:!1}},{type:"semi-circle",tooltip:"Semi Circle",icon:U3,defaultProps:{radius:120,fill:"transparent",stroke:"black"}},{type:"quadrant",tooltip:"Quadrant",icon:H3,defaultProps:{radius:120,fill:"transparent",stroke:"black"}},{type:"sector",tooltip:"Sector",icon:Y3,defaultProps:{radius:120,fill:"transparent",stroke:"black"}},{type:"circle",tooltip:"Circle",icon:"fa-sharp fa-solid fa-circle",defaultProps:{radius:60,fill:"transparent",stroke:"black"}},{type:"ellipse",tooltip:"Ellipse",icon:"fa-regular fa-circle transform scale-x-120",defaultProps:{rx:100,ry:60,fill:"transparent",stroke:"black"}},{type:"line",tooltip:"Line",icon:"fa-solid fa-slash",defaultProps:{strokeWidth:2,stroke:"black"}},{type:"paper",tooltip:"Paper",icon:"fa-solid fa-square-pen",defaultProps:{with:120,height:60,fill:"transparent",strock:"black"}},{type:"star",tooltip:"Star",icon:"fa-regular fa-star",defaultProps:{numPoints:5,innerRadius:20,outerRadius:50,fill:"transparent",stroke:"black",strokeWidth:2}},{type:"arrow",tooltip:"Arrow",icon:"fa-solid fa-arrow-up",defaultProps:{width:120,height:20,fill:"transparent",stroke:"black",strokeWidth:3,headLength:15}}],X3=()=>{const o=xe(N=>N.canvas),e=xe(N=>N.addShape),t=xe(N=>N.setActiveTool),i=(N,E={})=>{if(!o)return;const V=Vx.find(L=>L.type===N);V&&e(N,{...V.defaultProps,...E})};let s=null,a=!1,u=!1;const p=N=>{if(N.target)return;a=!0;const E=o.getPointer(N.e),V=[E.x,E.y,E.x,E.y];s=new cs(V,{strokeWidth:2,stroke:"black",selectable:!0,evented:!0}),o.add(s)},m=N=>{if(!a||!s)return;const E=o.getPointer(N.e);s.set({x2:E.x,y2:E.y}),o.renderAll()},y=()=>{a&&(a=!1,s=null,t("select"),C())},b=()=>{!o||u||(o.on("mouse:down",p),o.on("mouse:move",m),o.on("mouse:up",y),u=!0,o.isDrawingMode=!1)},C=()=>{!o||!u||(o.off("mouse:down",p),o.off("mouse:move",m),o.off("mouse:up",y),u=!1)};return{shapesList:Vx,add:i,enableLineDrawing:b,disableLineDrawing:C}},G3={sm:"h-6 w-6 p-1",md:"h-6 w-6 p-1",lg:"h-7 w-7 p-2.5"},q3={sm:"text-[10px] [&>svg]:h-3 [&>svg]:w-3 [&>img]:h-3 [&>img]:w-3",md:"text-[10px] [&>svg]:h-4 [&>svg]:w-4 [&>img]:h-4 [&>img]:w-4",lg:"text-[12px] [&>svg]:h-5 [&>svg]:w-5 [&>img]:h-5 [&>img]:w-5"};function es({icon:o,active:e,size:t="md",className:i,...s}){return k.jsx("button",{...s,className:yn("border border-stone-200 flex items-center justify-center cursor-pointer transition rounded-sm",G3[t],q3[t],e?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200",i),children:o})}function W3({closePanel:o}){const{fill:e,stroke:t,strokeWidth:i,strokeStyle:s,strokeStyleList:a,setFill:u,setStroke:p,setStrokeWidth:m,setStrokeStyle:y}=xe(),{shapesList:b,add:C,enableLineDrawing:N}=X3(),E={fill:e,stroke:t,strokeWidth:i},V=xe(G=>G.settings.iconSize);function L(G){G==="line"?N():C(G,E),o?.(G)}const ee=G=>{if(!G)return null;if(typeof G=="string")return G.match(/\.(png|jpg|jpeg|webp|svg)$/)?k.jsx("img",{src:G,alt:""}):G.trim().startsWith("<svg")?k.jsx("span",{dangerouslySetInnerHTML:{__html:G}}):k.jsx("i",{className:G});if(typeof G=="function"){const te=G;return k.jsx(te,{})}return React.isValidElement(G)?G:null};return k.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[k.jsx(b1,{title:"Shapes",onClose:o}),k.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[k.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:k.jsx("input",{type:"range",min:"0",max:"16",value:i,onChange:G=>m(Number(G.target.value)),className:"rotate-[-90deg] w-48 cursor-pointer"})}),k.jsx("div",{className:"gap-1.5 flex items-center justify-start pl-4 flex-wrap py-4",children:b.map((G,te)=>k.jsx(hn,{position:"bottom",content:G.tooltip,children:k.jsx(es,{icon:ee(G.icon),title:G.tooltip,"aria-label":G.tooltip,onClick:()=>L(G.type),size:V})},G.id??`${G.type}-${te}`))})]})]})}const Z3=({label:o,value:e=0,min:t=0,max:i,step:s=1,onChange:a,onKeyDown:u,unit:p,disabled:m,className:y=""})=>k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsxs("span",{children:[o,":"]}),k.jsxs("div",{className:"flex items-center gap-0.5",children:[k.jsx("input",{type:"number",min:t,max:i,step:s,value:e,disabled:m,onChange:b=>a?.(Number(b.target.value)),onKeyDown:u,className:`w-14 h-6 px-1.5 text-[11px] text-gray-500 border border-gray-200
            rounded bg-transparent focus:outline-none focus:border-gray-300`}),p&&k.jsx("span",{className:"text-[10px] text-gray-400",children:p})]})]}),$3=[{id:"select",type:"exclusive",icon:"fa-solid fa-location-arrow rotate-280",position:"left",component:null,tooltip:"Selector Tool"},{id:"node",type:"exclusive",icon:"fa-solid fa-share-nodes",position:"left",component:null,tooltip:"Node Tool"},{id:"pan",type:"exclusive",icon:"fa-solid fa-hand",position:"left",component:null,tooltip:"Hand Tool"},{id:"draw",type:"panel",icon:"fa-solid fa-pencil",position:"left",component:V3,panelSize:{width:300,height:250},tooltip:"Pencil Tool"},{id:"shapes",type:"panel",icon:"fa-solid fa-shapes",position:"left",component:o=>k.jsx(W3,{...o,panelId:"shapes"}),tooltip:"Shape Builder Tool"},{id:"text",type:"momentary",icon:"fa-solid fa-font",position:"left",component:null,tooltip:"Text Tool"}],K3=()=>{const o=xe(i=>i.toggleFullscreen),e=xe(i=>i.isFullScreen),t=xe(i=>i.settings.iconSize);return k.jsx(hn,{position:"bottom",content:"Fullscreen",children:k.jsx(es,{active:e,icon:k.jsx("i",{className:`fa-solid ${e?"fa-compress":"fa-expand"}`}),onClick:o,title:"Toggle Fullscreen",className:"border border-stone-200",size:t})})},Q3=({colorTool:o,zoomTool:e,strokeTool:t})=>k.jsxs("div",{className:"flex bg-white flex-col items-start px-2 py-1",children:[o&&k.jsx("div",{className:"flex-1 flex justify-center",children:o}),k.jsxs("div",{className:"flex items-center gap-2",children:[e&&k.jsx("div",{className:"flex py-1",children:e}),t&&k.jsx("div",{className:"flex py-1",children:t})]})]}),Ux=({label:o,hasActiveShape:e,isTileActive:t,setActiveTile:i,color:s})=>k.jsxs("div",{className:"flex items-center h-4",children:[k.jsx("label",{className:"text-[11px] font-medium text-gray-500 w-10 leading-none select-none",children:o}),e?k.jsx("div",{onClick:()=>i("fill"),title:"Edit fill color",className:yn("ml-2 h-4 w-10 rounded border cursor-pointer",t?"ring-1 ring-blue-500 border-blue-500":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:s}}):k.jsx("span",{className:"ml-2 w-8 text-center text-[10px] text-gray-400",children:"N/A"})]}),J3=({label:o,strokeStyleList:e,strokeStyle:t,setStrokeStyle:i,disabled:s})=>k.jsxs("div",{className:"flex items-center justify-center h-8 gap-2",children:[k.jsx("span",{className:"text-[11px] font-medium text-gray-500 leading-none select-none",children:o}),k.jsx($s,{disabled:s,options:e,value:t,onChange:i})]}),ek=({value:o,min:e=0,max:t=100,step:i=1,unit:s,onChange:a,disabled:u=!1})=>{const p=m=>Math.min(t,Math.max(e,m));return k.jsxs("div",{className:yn("inline-flex items-center rounded-lg border border-gray-300 bg-white shadow-sm",u&&"opacity-40 pointer-events-none"),children:[k.jsx("button",{onClick:()=>a(p(o-i)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-l-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Decrease",children:k.jsx("i",{className:"fa-solid fa-minus"})}),k.jsxs("div",{className:`px-3 text-sm font-semibold text-gray-800 bg-gray-50 border-x border-gray-300
                   min-w-[44px] text-center`,title:"Value",children:[o,s]}),k.jsx("button",{onClick:()=>a(p(o+i)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-r-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Increase",children:k.jsx("i",{className:"fa-solid fa-plus"})})]})},tk=({value:o=1,onChange:e,disabled:t})=>{const i=Math.round(o*100);return k.jsx(ek,{value:i,min:0,max:100,step:5,unit:"%",disabled:t,onChange:s=>e(s/100)})},Zn=({label:o,value:e,disabled:t,onChange:i,max:s})=>{const a=p=>{const m=p;if(m===""){i?.("");return}const y=Number(m);Number.isNaN(y)||typeof s=="number"&&y>s||i?.(y)},u=p=>{(p.key==="."||p.key==="e")&&p.preventDefault()};return k.jsx(Z3,{label:o,value:e??0,onChange:a,disabled:t,onKeyDown:u,max:s})};function Hx({action:o,toggleType:e="switch",iconOn:t,iconOff:i,tooltipOn:s="",tooltipOff:a="",initial:u=!1,size:p=26,onChange:m}){const[y,b]=fe.useState(u),C=xe(V=>V.settings.iconSize),N=()=>{let V=y;e==="switch"&&(V=!y),e==="exclusive"&&(V=!0),b(V),m?.({action:o,value:V})},E=V=>typeof V=="string"?k.jsx("i",{className:V}):V;return k.jsx(hn,{content:y?s:a,position:"bottom",children:k.jsx(es,{icon:E(y?t:i),title:y?t:i,"aria-label":y?t:i,onClick:N,size:C,style:{color:y?"#fff":"#334155",background:y?"linear-gradient(#3b82f6, #2563eb)":"linear-gradient(#ffffff, #f1f5f9)",border:"1px solid #cbd5e1",boxShadow:y?"0 2px 4px rgba(37,99,235,0.4)":"0 1px 2px rgba(0,0,0,0.12)"}})})}const ik=({size:o=20})=>k.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("defs",{children:k.jsxs("linearGradient",{id:"g1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[k.jsx("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.15"}),k.jsx("stop",{offset:"100%",stopColor:"currentColor"})]})}),k.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",fill:"url(#g1)"})]}),nk=({size:o=20})=>k.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),k.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),k.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),k.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),k.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.07",y2:"7.07"}),k.jsx("line",{x1:"16.93",y1:"16.93",x2:"19.07",y2:"19.07"}),k.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.07",y2:"16.93"}),k.jsx("line",{x1:"16.93",y1:"7.07",x2:"19.07",y2:"4.93"}),k.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"currentColor",opacity:"0.3"})]}),Yx=({size:o=20})=>k.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("line",{x1:"5",y1:"19",x2:"19",y2:"5"}),k.jsx("circle",{cx:"5",cy:"19",r:"2",fill:"currentColor"}),k.jsx("circle",{cx:"19",cy:"5",r:"2",fill:"currentColor"})]}),sk=[{label:"Select Operation",value:""},{label:"Union",value:"union"},{label:"Intersect",value:"intersect"},{label:"Subtract",value:"subtract"},{label:"Exclude",value:"exclude"},{label:"Divide",value:"divide"},{label:"Cut",value:"cut"},{label:"Punch",value:"punch"},{label:"Crop",value:"crop"},{label:"Smart Union",value:"smartUnion"},{label:"Xor Split",value:"xorSplit"},{label:"Clip",value:"clip"}],rk=()=>{const[o,e]=fe.useState(""),t=xe(V=>V.unionSelected),i=xe(V=>V.intersectSelected),s=xe(V=>V.subtractSelected),a=xe(V=>V.excludeSelected),u=xe(V=>V.divideSelected),p=xe(V=>V.cutSelected),m=xe(V=>V.punchSelected),y=xe(V=>V.cropSelected),b=xe(V=>V.smartUnionSelected),C=xe(V=>V.xorSplitSelected),N=xe(V=>V.clipSelectedObject),E=V=>{switch(V){case"union":t({fill:"green"});break;case"intersect":i({fill:"orange"});break;case"subtract":s({fill:"pink"});break;case"exclude":a({fill:"purple"});break;case"divide":u({fill:"purple"});break;case"cut":p({fill:"purple"});break;case"punch":m({fill:"purple"});break;case"crop":y({fill:"purple"});break;case"smartUnion":b({fill:"purple"});break;case"xorSplit":C({fill:"purple"});break;case"clip":N({fill:"purple"});break}};return k.jsx("div",{className:"flex items-center space-x-2",children:k.jsx($s,{value:o,options:sk,onChange:V=>{e(V),E(V)}})})},Xx={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},ak=({disabled:o})=>{const e=xe(a=>a.activeObjectShadow),t=xe(a=>a.applyShadowPreset),i=xe(a=>a.removeShadow),s=e?Object.entries(Xx).find(([,a])=>a.blur===e.blur&&a.offsetX===e.offsetX&&a.offsetY===e.offsetY&&a.color===e.color)?.[0]??"custom":"none";return k.jsx($s,{value:s,disabled:o,options:[{label:"None",value:"none"},...Object.keys(Xx).map(a=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:a}))],onChange:a=>{if(a==="none")return i();t(a)}})};function ok(){const o=xe(te=>te.activePaint),e=xe(te=>te.setStrokeWidthN),t=xe(te=>te.hasActiveShape),i=xe(te=>te.setActivePaint),s=xe(te=>te.fill),a=xe(te=>te.stroke),u=xe(te=>te.strokeWidth),p=xe(te=>te.strokeStyleList),m=xe(te=>te.strokeStyle),y=xe(te=>te.setStrokeStyle),b=xe(te=>te.opacity),C=xe(te=>te.setOpacity),N=xe(te=>te.geditor),V=xe(te=>te.canvas)?.getActiveObject(),L=o==="fill",ee=o==="stroke",G=te=>{const ne=Math.max(0,Number(te)||0);e(ne)};return k.jsxs("div",{className:yn("flex flex-row justify-center items-center gap-5 bg-white",!V&&"pointer-events-none opacity-50"),children:[k.jsxs("div",{className:"flex flex-col gap-x-2 gap-y-1",children:[k.jsx(Ux,{label:"Fill",hasActiveShape:t,isTileActive:L,setActiveTile:()=>i("fill"),color:s}),k.jsx(Ux,{label:"Stroke",hasActiveShape:t,isTileActive:ee,setActiveTile:()=>i("stroke"),color:a})]}),k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsx(Zn,{disabled:!t,label:"Width",value:u,onChange:G,max:"16"}),k.jsx(J3,{label:"Style",strokeStyleList:p,strokeStyle:m,setStrokeStyle:y,disabled:!t})]}),k.jsx("div",{className:"flex gap-2 items-center",children:k.jsx(tk,{value:b,onChange:C,disabled:!t})}),k.jsx("div",{className:"flex",children:k.jsx(ak,{disabled:!t})}),k.jsxs("div",{className:"flex items-center gap-1 bg-stone-100 p-1 rounded-lg",children:[k.jsx(Hx,{action:"gradient",toggleType:"switch",iconOn:k.jsx(Yx,{}),iconOff:k.jsx(Yx,{}),tooltipOn:"Gradient",tooltipOff:"Normal",initial:!1,onChange:te=>{te.value?N.enable():N.disable()}}),k.jsx(Hx,{action:"gradienttype",toggleType:"switch",iconOn:k.jsx(ik,{}),iconOff:k.jsx(nk,{}),tooltipOn:"Linear Gradient",tooltipOff:"Radial Graient",initial:!1,onChange:te=>{N.toggleGradientType()}})]}),k.jsx("div",{className:"flex",children:k.jsx(rk,{})})]})}function lk(){return k.jsx("footer",{className:"flex flex-col border-t border-stone-200 bg-stone-500",children:k.jsx(Q3,{zoomTool:k.jsx(K3,{}),strokeTool:k.jsx(ok,{})})})}const ck=()=>{const o=xe(p=>p.visible),e=xe(p=>p.items),t=xe(p=>p.closeMenu),i=xe(p=>p.x),s=xe(p=>p.y);if(!o)return null;const a=e.filter(p=>typeof p.when=="function"?p.when():!0),u=a.filter((p,m)=>{if(p.type!=="divider")return!0;const y=a[m-1],b=a[m+1];return y&&b&&y.type!=="divider"&&b.type!=="divider"});return u.length===0?null:(console.log(u),k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"fixed inset-0 z-40",onClick:t}),k.jsx("div",{className:`fixed z-50 min-w-[220px] rounded-lg
                   bg-white shadow-lg border border-stone-200 p-1`,style:{top:s,left:i},children:u.map((p,m)=>p.type==="divider"?k.jsx("div",{className:"my-1 h-px bg-stone-200"},p.id??m):k.jsxs("button",{disabled:p.disabled,onClick:()=>{p.onClick(),t()},className:`
                                flex w-full items-center justify-between
                                rounded-lg px-3 py-2 text-sm
                                hover:bg-gray-100
                                disabled:opacity-40
                            `,children:[k.jsxs("span",{className:"flex items-center gap-2",children:[p.icon,p.label]}),p.shortcut&&k.jsx("span",{className:"text-xs text-gray-400",children:p.shortcut})]},p.id??m))})]}))},uk=({bgColor:o,isActive:e=!1,onClick:t,className:i=""})=>k.jsx("div",{onClick:t,role:"button",tabIndex:0,className:yn("relative w-5 h-5 ml-px mb-px border border-stone-300 cursor-pointer",o,i),children:e&&k.jsx("span",{className:"absolute inset-0 m-auto w-2 h-2 rounded-full bg-white",style:{boxShadow:"0 0 0 1px #000"}})}),hk=({fill:o,bgColors:e,onClick:t})=>k.jsx(k.Fragment,{children:[...e].reverse().map((i,s)=>k.jsx(uk,{bgColor:i,isActive:i===o,onClick:()=>t(i,o)},s))}),fk=({scrollRef:o,fill:e,bgColors:t,colorsMap:i,onClick:s})=>k.jsx(k.Fragment,{children:k.jsx("div",{ref:o,className:"bg-white w-full flex flex-1 flex-wrap gap-0.01 overflow-y-auto",children:t.flatMap((a,u)=>k.jsx(hk,{fill:e,bgColors:i[a],onClick:s},`${a}-${u}`))})}),dk=({scrollRef:o,className:e=""})=>{const[t,i]=fe.useState(!1),[s,a]=fe.useState(!1),u=()=>{const m=o.current;m&&(i(m.scrollTop>0),a(m.scrollTop<m.scrollHeight-m.clientHeight))};fe.useEffect(()=>{const m=o.current;if(m)return u(),m.addEventListener("scroll",u),()=>m.removeEventListener("scroll",u)},[o]);const p=m=>{const y=o.current;if(!y)return;const b=y.scrollHeight-y.clientHeight;let C=y.scrollTop+m;C<0&&(C=0),C>b&&(C=b),y.scrollTop=C,requestAnimationFrame(()=>{y.scrollTop=C,u()})};return k.jsxs("div",{className:yn("flex flex-col items-center",e),children:[k.jsx("button",{className:"h-5 w-5 flex items-center justify-center hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t,onClick:()=>p(-20),children:k.jsx("i",{className:"fa-solid fa-chevron-up"})}),k.jsx("button",{className:"h-5 w-5 flex items-center justify-center hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!s,onClick:()=>p(20),children:k.jsx("i",{className:"fa-solid fa-chevron-down"})})]})},gk={red:["bg-red-50","bg-red-100","bg-red-200","bg-red-300","bg-red-400","bg-red-500","bg-red-600","bg-red-700","bg-red-800","bg-red-900"],orange:["bg-orange-50","bg-orange-100","bg-orange-200","bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700","bg-orange-800","bg-orange-900"],amber:["bg-amber-50","bg-amber-100","bg-amber-200","bg-amber-300","bg-amber-400","bg-amber-500","bg-amber-600","bg-amber-700","bg-amber-800","bg-amber-900"],yellow:["bg-yellow-50","bg-yellow-100","bg-yellow-200","bg-yellow-300","bg-yellow-400","bg-yellow-500","bg-yellow-600","bg-yellow-700","bg-yellow-800","bg-yellow-900"],lime:["bg-lime-50","bg-lime-100","bg-lime-200","bg-lime-300","bg-lime-400","bg-lime-500","bg-lime-600","bg-lime-700","bg-lime-800","bg-lime-900"],green:["bg-green-50","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500","bg-green-600","bg-green-700","bg-green-800","bg-green-900"],emerald:["bg-emerald-50","bg-emerald-100","bg-emerald-200","bg-emerald-300","bg-emerald-400","bg-emerald-500","bg-emerald-600","bg-emerald-700","bg-emerald-800","bg-emerald-900"],teal:["bg-teal-50","bg-teal-100","bg-teal-200","bg-teal-300","bg-teal-400","bg-teal-500","bg-teal-600","bg-teal-700","bg-teal-800","bg-teal-900"],cyan:["bg-cyan-50","bg-cyan-100","bg-cyan-200","bg-cyan-300","bg-cyan-400","bg-cyan-500","bg-cyan-600","bg-cyan-700","bg-cyan-800","bg-cyan-900"],sky:["bg-sky-50","bg-sky-100","bg-sky-200","bg-sky-300","bg-sky-400","bg-sky-500","bg-sky-600","bg-sky-700","bg-sky-800","bg-sky-900"],blue:["bg-blue-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-400","bg-blue-500","bg-blue-600","bg-blue-700","bg-blue-800","bg-blue-900"],indigo:["bg-indigo-50","bg-indigo-100","bg-indigo-200","bg-indigo-300","bg-indigo-400","bg-indigo-500","bg-indigo-600","bg-indigo-700","bg-indigo-800","bg-indigo-900"],violet:["bg-violet-50","bg-violet-100","bg-violet-200","bg-violet-300","bg-violet-400","bg-violet-500","bg-violet-600","bg-violet-700","bg-violet-800","bg-violet-900"],purple:["bg-purple-50","bg-purple-100","bg-purple-200","bg-purple-300","bg-purple-400","bg-purple-500","bg-purple-600","bg-purple-700","bg-purple-800","bg-purple-900"],fuchsia:["bg-fuchsia-50","bg-fuchsia-100","bg-fuchsia-200","bg-fuchsia-300","bg-fuchsia-400","bg-fuchsia-500","bg-fuchsia-600","bg-fuchsia-700","bg-fuchsia-800","bg-fuchsia-900"],pink:["bg-pink-50","bg-pink-100","bg-pink-200","bg-pink-300","bg-pink-400","bg-pink-500","bg-pink-600","bg-pink-700","bg-pink-800","bg-pink-900"],rose:["bg-rose-50","bg-rose-100","bg-rose-200","bg-rose-300","bg-rose-400","bg-rose-500","bg-rose-600","bg-rose-700","bg-rose-800","bg-rose-900"],slate:["bg-slate-50","bg-slate-100","bg-slate-200","bg-slate-300","bg-slate-400","bg-slate-500","bg-slate-600","bg-slate-700","bg-slate-800","bg-slate-900"],gray:["bg-gray-50","bg-gray-100","bg-gray-200","bg-gray-300","bg-gray-400","bg-gray-500","bg-gray-600","bg-gray-700","bg-gray-800","bg-gray-900"],zinc:["bg-zinc-50","bg-zinc-100","bg-zinc-200","bg-zinc-300","bg-zinc-400","bg-zinc-500","bg-zinc-600","bg-zinc-700","bg-zinc-800","bg-zinc-900"],neutral:["bg-neutral-50","bg-neutral-100","bg-neutral-200","bg-neutral-300","bg-neutral-400","bg-neutral-500","bg-neutral-600","bg-neutral-700","bg-neutral-800","bg-neutral-900"],stone:["bg-stone-50","bg-stone-100","bg-stone-200","bg-stone-300","bg-stone-400","bg-stone-500","bg-stone-600","bg-stone-700","bg-stone-800","bg-stone-900"]};function pk({onClick:o}){return k.jsx("div",{role:"button",tabIndex:0,onClick:o,title:"Remove stroke",className:`
        relative w-5 h-5 ml-px mb-px
        border border-dashed border-stone-400
        cursor-pointer
        group
        hover:border-red-500
        hover:bg-red-50
        focus:outline-none
      `,children:k.jsx("span",{className:`
          absolute inset-0
          before:absolute before:top-1/2 before:left-1/2
          before:w-[120%] before:h-px
          before:bg-stone-500
          before:-translate-x-1/2 before:-translate-y-1/2
          before:-rotate-45
          group-hover:before:bg-red-500
        `})})}function mk({onClick:o}){return k.jsx("div",{role:"button",tabIndex:0,onClick:o,title:"Remove stroke",className:`
        relative w-5 h-5 ml-px mb-px
        border border-dashed border-stone-400
        cursor-pointer
        group
        hover:border-red-500
        hover:bg-red-50
        focus:outline-none
      `,children:k.jsx("span",{className:`
          absolute inset-0
          before:absolute before:top-1/2 before:left-1/2
          before:w-[120%] before:h-px
          before:bg-stone-500
          before:-translate-x-1/2 before:-translate-y-1/2
          before:-rotate-45
          group-hover:before:bg-red-500
        `})})}const vk=()=>{const[o,e]=fe.useState(["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","slate","gray","zinc","neutral","stone"]),t=fe.useRef(null),{handleColorChange:i,fill:s,setStrokeWidthN:a}=xe();return k.jsxs("div",{className:"flex flex-col items-start bg-white w-6 flex-wrap",children:[k.jsx(hn,{content:"Remove Stroke",children:k.jsx(pk,{onClick:()=>a(0)})}),k.jsx(fk,{scrollRef:t,fill:s,bgColors:o,colorsMap:gk,onClick:i}),k.jsx(hn,{content:"Remove File",children:k.jsx(mk,{onClick:()=>i("rgba(0,0,0,0)")})}),k.jsx(dk,{scrollRef:t})]})};function yk({tabs:o,onSelect:e,onRemove:t}){return k.jsxs("details",{className:"relative ml-auto group",children:[k.jsx("summary",{className:`
          list-none cursor-pointer
          flex items-center justify-center
          h-9 w-9
          rounded-md
          hover:bg-neutral-100
          active:bg-neutral-200
          focus:outline-none
        `,children:k.jsx("i",{className:"fa-solid fa-caret-down text-sm text-neutral-700"})}),k.jsxs("div",{className:`
          absolute right-0 mt-2
          w-48
          rounded-md
          border border-neutral-200
          bg-white
          shadow-lg
          z-50
          overflow-hidden
        `,children:[o.map(i=>k.jsxs("div",{className:`
              group/item
              flex items-center justify-between
              px-3 py-2
              text-sm
              hover:bg-neutral-100
            `,children:[k.jsx("button",{onClick:()=>e(i.id),className:`
                flex-1 text-left
                truncate
                text-neutral-800
              `,children:i.label}),i.closable&&k.jsx("button",{onClick:s=>{s.stopPropagation(),t(i.id)},className:`
                  ml-2
                  h-6 w-6
                  flex items-center justify-center
                  rounded
                  text-neutral-400
                  opacity-0
                  group-hover/item:opacity-100
                  hover:bg-neutral-200
                  hover:text-neutral-700
                `,"aria-label":"Remove tab",children:k.jsx("i",{className:"fa-solid fa-xmark text-xs"})})]},i.id)),o.length===0&&k.jsx("div",{className:"px-3 py-2 text-sm text-neutral-400",children:"No hidden tabs"})]})]})}function xk({tabs:o,defaultTab:e}){const[t,i]=fe.useState([...o]),[s,a]=fe.useState(e??o[0].id),u=fe.useRef(null),p=fe.useRef(null),[m,y]=fe.useState([]),[b,C]=fe.useState([]),N=V=>{i(L=>{const ee=L.findIndex(te=>te.id===V),G=L.filter(te=>te.id!==V);if(V===s){const te=G[ee]??G[ee-1]??G[0];te&&a(te.id)}return G})};fe.useLayoutEffect(()=>{if(!u.current||!p.current)return;const V=u.current.offsetWidth,L=Array.from(p.current.children),ee=4,G=[],te=[];let ne=0;if(t.forEach((de,be)=>{const I=L[be].offsetWidth,Ee=te.length>0?40:0;ne+I+Ee<=V||G.length<ee?(G.push(de),ne+=I):te.push(de)}),te.some(de=>de.id===s)){const de=te.find(be=>be.id===s);te.splice(te.indexOf(de),1),G.length>0&&te.unshift(G.pop()),G.push(de)}y(G),C(te)},[t,s]);const E=t.find(V=>V.id===s);return k.jsxs("div",{className:"flex flex-col w-full",children:[k.jsxs("div",{ref:u,className:"flex items-center border-b border-stone-200 px-4",children:[m.map(V=>{const L=V.icon,ee=V.id===s;return k.jsxs("div",{className:yn("group flex items-center gap-2 px-6 py-1",ee?"text-blue-600 bg-stone-200":"text-neutral-500 hover:text-neutral-700"),children:[k.jsx(hn,{content:V.label,position:"bottom",children:k.jsx("button",{onClick:()=>a(V.id),children:k.jsx("i",{className:yn(L)})})}),V.closable&&k.jsx("button",{onClick:G=>{G.stopPropagation(),N(V.id)},className:"opacity-0 group-hover:opacity-100",children:k.jsx("i",{className:"fa-solid fa-xmark"})})]},V.id)}),b.length>0&&k.jsx(yk,{tabs:b,onSelect:a,onRemove:N})]}),k.jsx("div",{className:"flex-1 px-2 py-1",children:E&&k.jsx(E.content,{})}),k.jsx("div",{ref:p,className:"absolute invisible whitespace-nowrap",children:t.map(V=>k.jsx("div",{className:"px-3 py-2 text-sm",children:V.label},V.id))})]})}const Gx=[{id:"tiling",label:"Tiling",icon:"fa-solid fa-grip"},{id:"rotate",label:"Rotate",icon:"fa-solid fa-rotate"},{id:"along-path",label:"Along Path",icon:"fa-solid fa-bezier-curve"}],bk=({value:o,onChange:e})=>{const t=fe.useRef(null),i=Gx.find(a=>a.id===o),s=a=>{e(a),requestAnimationFrame(()=>{t.current?.removeAttribute("open")})};return k.jsxs("details",{ref:t,className:"relative w-full",children:[k.jsxs("summary",{className:`
          list-none flex items-center justify-between
          px-3 py-2
          bg-neutral-50
          border border-neutral-300
          rounded-md
          cursor-pointer
          hover:bg-neutral-100
        `,children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("i",{className:`${i.icon} text-neutral-600`}),k.jsx("span",{className:"text-sm font-medium",children:i.label})]}),k.jsx("i",{className:"fa-solid fa-chevron-down text-xs text-neutral-500 transition-transform"})]}),k.jsx("div",{className:`
          absolute z-30 mt-1 w-full
          bg-white border border-neutral-200
          rounded-md shadow-lg
        `,children:Gx.map(a=>k.jsxs("button",{onClick:()=>s(a.id),className:`
              w-full flex items-center gap-2 px-3 py-2 text-sm
              hover:bg-blue-50
              ${a.id===o?"bg-blue-100 text-blue-700 font-medium":"text-neutral-700"}
            `,children:[k.jsx("i",{className:a.icon}),a.label]},a.id))})]})},_0=({title:o,children:e,onApply:t,disabled:i})=>k.jsxs("div",{className:"flex flex-col gap-3 p-3 my-2 bg-white border border-neutral-200 rounded-md",children:[k.jsx("div",{className:"text-sm font-medium text-neutral-700",children:o}),e,t&&k.jsx("button",{disabled:i,onClick:t,className:`bg-blue-600 text-white px-3 py-1.5 rounded
                     hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed`,children:"Apply"})]}),_k=({children:o})=>k.jsx("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4",children:o}),Sk=()=>{const{canvas:o,repeatGrid:e}=xe(),t=o?.getActiveObject(),[i,s]=fe.useState({rows:2,cols:2,gapX:10,gapY:10}),a=(u,p)=>{s(m=>({...m,[u]:parseInt(p,10)||0}))};return k.jsx(k.Fragment,{children:k.jsx(_0,{title:"Repeat Grid",disabled:!t,onApply:()=>e(t,i.rows,i.cols,i.gapX,i.gapY),children:k.jsxs(_k,{children:[k.jsx(Zn,{label:"Rows",value:i.rows,onChange:u=>a("rows",u)}),k.jsx(Zn,{label:"Gap X",value:i.gapX,onChange:u=>a("gapX",u)}),k.jsx(Zn,{label:"Columns",value:i.cols,onChange:u=>a("cols",u)}),k.jsx(Zn,{label:"Gap Y",value:i.gapY,onChange:u=>a("gapY",u)})]})})})},wk=[{label:"ring",value:"Ring"},{label:"spiral",value:"Spiral"}],Ck=[{label:"TL",value:"TL"},{label:"TC",value:"TC"},{label:"TR",value:"TR"},{label:"CL",value:"CL"},{label:"CC",value:"CC"},{label:"CR",value:"CR"},{label:"BL",value:"BL"},{label:"BC",value:"BC"},{label:"BR",value:"BR"}],Tk=()=>{const{canvas:o,repeatRadially:e}=xe(),t=o?.getActiveObject(),[i,s]=fe.useState(6),[a,u]=fe.useState(0),[p,m]=fe.useState("ring"),[y,b]=fe.useState(0),[C,N]=fe.useState(!0),[E,V]=fe.useState(0),[L,ee]=fe.useState(!1),[G,te]=fe.useState(!1),[ne,de]=fe.useState(0),[be,I]=fe.useState("CC"),Ee=(Be,ct)=>{const nt=Be.getBoundingRect(!0,!0),et={TL:{x:nt.left,y:nt.top},TC:{x:nt.left+nt.width/2,y:nt.top},TR:{x:nt.left+nt.width,y:nt.top},CL:{x:nt.left,y:nt.top+nt.height/2},CC:{x:nt.left+nt.width/2,y:nt.top+nt.height/2},CR:{x:nt.left+nt.width,y:nt.top+nt.height/2},BL:{x:nt.left,y:nt.top+nt.height},BC:{x:nt.left+nt.width/2,y:nt.top+nt.height},BR:{x:nt.left+nt.width,y:nt.top+nt.height}};return et[ct]??et.CC};if(!t)return null;const Ye=Ee(t,be);return k.jsxs(_0,{title:"Repeat Radially",disabled:!t,onApply:()=>e(t,{count:i,pivotX:Ye.x,pivotY:Ye.y,gap:a,mode:p,startAngle:y,clockwise:C,scaleStep:E,rotateAlongPath:L,opacityFade:G,jitter:ne}),children:[k.jsx(Zn,{label:"Count",value:i,onChange:Be=>s(parseInt(Be)||2)}),k.jsx(Zn,{label:"Gap",value:a,onChange:Be=>u(parseInt(Be)||0)}),k.jsx(Zn,{label:"Start Angle",value:y,onChange:Be=>b(parseInt(Be)||0)}),k.jsx(Zn,{label:"Scale Step",value:E,onChange:Be=>V(parseFloat(Be)||0)}),k.jsx(Zn,{label:"Jitter",value:ne,onChange:Be=>de(parseFloat(Be)||0)}),k.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsx("span",{children:"Mode:"}),k.jsx($s,{options:wk,value:p,onChange:Be=>{m(Be)}})]}),k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsx("span",{children:"Clockwise:"}),k.jsx("input",{type:"checkbox",checked:C,onChange:Be=>N(Be.target.checked)})]}),k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsx("span",{children:"Rotate Along Path:"}),k.jsx("input",{type:"checkbox",checked:L,onChange:Be=>ee(Be.target.checked)})]}),k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsx("span",{children:"Opacity Fade:"}),k.jsx("input",{type:"checkbox",checked:G,onChange:Be=>te(Be.target.checked)})]})]}),k.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[k.jsx("span",{children:"Anchor:"}),k.jsx($s,{value:be,options:Ck,onChange:Be=>{I(Be)}})]})]})},kk=o=>{if(!o||o.getObjects("path").length)return;const e=o.getWidth()/2,t=o.getHeight()/2,i=120;[new ji("M 0 0 L 300 0",{left:e-150,top:t-180}),new ji("M 0 0 C 100 -150 200 150 300 0",{left:e-150,top:t-90}),new ji("M 0 0 Q 150 -200 300 0",{left:e-150,top:t}),new ji("M 0 0 Q 50 -50 100 0 T 200 0 T 300 0",{left:e-150,top:t+90}),new ji("M 0 0 L 50 -50 L 100 50 L 150 -50 L 200 50 L 250 -50 L 300 0",{left:e-150,top:t+180}),new ji(`
      M ${i} 0
      C ${i} ${i*.5523} ${i*.5523} ${i} 0 ${i}
      C ${-i*.5523} ${i} ${-i} ${i*.5523} ${-i} 0
      C ${-i} ${-i*.5523} ${-i*.5523} ${-i} 0 ${-i}
      C ${i*.5523} ${-i} ${i} ${-i*.5523} ${i} 0
      Z
      `,{left:e,top:t+300}),new ji(`
      M ${-i} 0
      C ${-i} ${-i*.5523} ${-i*.5523} ${-i} 0 ${-i}
      C ${i*.5523} ${-i} ${i} ${-i*.5523} ${i} 0
      `,{left:e-i,top:t+460})].forEach(a=>{a.set({stroke:"#3b82f6",fill:"",strokeWidth:2,visible:!1,selectable:!1,evented:!1,objectCaching:!1,uid:crypto.randomUUID()}),o.add(a)}),o.requestRenderAll()};function qx(o,e){o.getObjects("path").forEach(t=>{t.set({visible:t===e,selectable:t===e,evented:t===e,opacity:t===e?1:0})}),o.requestRenderAll()}function Ak(o,e){const t=Ai.getPointOnPath(o.path,e),i=o.calcTransformMatrix(),s=Ai.transformPoint(new ke(t.x,t.y),i),a=Ai.getPointOnPath(o.path,e+.1),u=Ai.transformPoint(new ke(a.x,a.y),i),p=Math.atan2(u.y-s.y,u.x-s.x);return{x:s.x,y:s.y,angle:p}}const Ok=async(o,e,t=30,i={rotateAlongPath:!0})=>{const s=o.canvas||e.canvas;if(!s)return;const u=Ai.getPathSegmentsInfo(e.path).at(-1)?.length||0;if(u){s.discardActiveObject();for(let p=t;p<=u;p+=t){const{x:m,y,angle:b}=Ak(e,p),C=await o.clone();C.set({left:m,top:y,originX:"center",originY:"center",angle:i.rotateAlongPath?b*180/Math.PI:o.angle}),s.add(C)}s.requestRenderAll()}},Ek=()=>{const{canvas:o}=xe(),e=o?.getActiveObject(),[t,i]=fe.useState(30),[s,a]=fe.useState(!0),u=o?.getObjects("path")||[],[p,m]=fe.useState(null);return fe.useEffect(()=>{if(o)return kk(o),()=>{o.getObjects("path").forEach(y=>o.remove(y)),o.requestRenderAll()}},[o]),fe.useEffect(()=>{if(!p&&u.length){const y=u[0];m(y),qx(o,y)}},[u,p]),o?k.jsxs(_0,{title:"Repeat Along Path",disabled:!e||!p,onApply:()=>{!e||!p||Ok(e,p,t,{rotateAlongPath:s})},children:[k.jsx("label",{className:"text-xs",children:"Path"}),k.jsx("select",{className:"w-full border px-2 py-1",value:p?.uid,onChange:y=>{const b=u.find(C=>C.uid===y.target.value);b&&(m(b),qx(o,b),o.discardActiveObject(),o.setActiveObject(b))},children:u.map((y,b)=>k.jsxs("option",{value:y.uid,children:["Path ",b+1]},y.uid))}),k.jsx(Zn,{label:"Spacing",value:t,onChange:y=>i(+y||20)}),k.jsxs("button",{onClick:()=>a(y=>!y),className:"w-full mt-2 bg-gray-200",children:["Rotate Along Path: ",s?"ON":"OFF"]})]}):null},jk={tiling:Sk,rotate:Tk,"along-path":Ek},Mk=()=>{const[o,e]=fe.useState("tiling"),t=jk[o];return k.jsxs("div",{className:"flex flex-col gap-4 p-3",children:[k.jsx(bk,{value:o,onChange:e}),k.jsx(t,{})]})};function Dk({title:o,actions:e,children:t}){return k.jsxs("div",{className:"flex flex-col gap-3 p-2",children:[k.jsx("div",{className:"flex items-center justify-between border border-stone-200 p-2 rounded-md",children:k.jsx("h3",{className:"text-sm font-medium text-stone-700",children:o})}),k.jsx("div",{className:"flex flex-col gap-3",children:t}),e&&k.jsx("div",{className:"flex items-center gap-2",children:e})]})}const Nk=({size:o="md",variant:e="primary",onClick:t,children:i,className:s="",disabled:a=!1,ariaLabel:u,title:p})=>{const m={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-3 text-lg"},y={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white shadow-sm",ghost:"bg-transparent hover:bg-gray-100 text-gray-800 border border-transparent"};return k.jsx("button",{type:"button","aria-label":u,title:p,disabled:a,onClick:a?void 0:t,className:yn("inline-flex items-center justify-center rounded-md transition-shadow duration-150 outline-none focus-visible:ring-2 focus-visible:ring-offset-2",m[o],a?"bg-gray-200 text-gray-500 cursor-not-allowed shadow-none opacity-80":y[e],s),"aria-disabled":a,children:i})},Kh=fe.forwardRef(({label:o,error:e,className:t="",...i},s)=>{const a="w-full rounded-md px-3 py-2 border bg-white dark:bg-transparent text-sm transition-shadow duration-150",u=e?"border-red-500":"border-gray-300 focus:border-blue-500";return k.jsxs("div",{className:yn("w-full",t),children:[o?k.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-600",children:o}):null,k.jsx("input",{ref:s,className:`${a} ${u} focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-300`,...i}),e?k.jsx("div",{className:"mt-1 text-xs text-red-500",children:typeof e=="string"?e:""}):null]})});function Rk({checked:o,onCheckedChange:e}){return k.jsx("button",{onClick:()=>e(!o),className:`w-11 h-6 rounded-full relative transition ${o?"bg-black":"bg-gray-300"}`,children:k.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white transition ${o?"translate-x-5":"translate-x-0"}`})})}function ul({label:o,value:e,onChange:t,children:i}){return k.jsxs("div",{className:"flex items-center justify-between gap-4 my-2",children:[k.jsx("span",{className:"text-sm font-medium",children:o}),k.jsx("div",{className:"flex items-center gap-2",children:i??k.jsx(Rk,{checked:!!e,onCheckedChange:t})})]})}const Lk=[{key:1,value:"jpeg",label:"JPEG"},{key:1,value:"svg",label:"SVG"},{key:1,value:"png",label:"PNG"},{key:1,value:"json",label:"JSON"}],Pk=()=>{const o=xe(E=>E.canvas),[e,t]=fe.useState(400),[i,s]=fe.useState(300),[a,u]=fe.useState("drawing"),[p,m]=fe.useState("png"),[y,b]=fe.useState(""),C=async()=>{if(o)try{const E=o.toDataURL({format:"png",quality:1});b(E)}catch(E){console.error("Preview generation failed:",E)}};fe.useEffect(()=>{C()},[o,e,i]);const N=async()=>{if(!o)return alert("Canvas not ready");let E;try{if(p==="png"||p==="jpeg"){const V=o.getObjects("image");await Promise.all(V.map(ft=>new Promise(Ge=>{const Mt=ft._element;if(!Mt||Mt.complete&&Mt.naturalWidth!==0)return Ge();Mt.onload=()=>Ge(),Mt.onerror=()=>Ge()})));const L=document.createElement("canvas");L.width=e,L.height=i;const ee=L.getContext("2d"),G=o.toDataURL({format:p,quality:1}),te=new Image;await new Promise((ft,Ge)=>{te.onload=ft,te.onerror=Ge,te.src=G});const ne=e/o.width,de=i/o.height,be=Math.min(ne,de),I=o.width*be,Ee=o.height*be,Ye=(e-I)/2,Be=(i-Ee)/2;p==="jpeg"&&(ee.fillStyle="white",ee.fillRect(0,0,e,i)),ee.drawImage(te,Ye,Be,I,Ee);const ct=L.toDataURL(`image/${p}`,1),nt=atob(ct.split(",")[1]),et=new Uint8Array(nt.length);for(let ft=0;ft<nt.length;ft++)et[ft]=nt.charCodeAt(ft);E=new Blob([et],{type:`image/${p}`})}else if(p==="svg"){const V=o.toSVG({width:e+"px",height:i+"px"});E=new Blob([V],{type:"image/svg+xml"})}else if(p==="json"){const V=JSON.stringify(o.toJSON(),null,2);E=new Blob([V],{type:"application/json"})}if(E){const V=document.createElement("a");V.href=URL.createObjectURL(E),V.download=`${a}.${p}`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(V.href)}}catch(V){console.error("Export failed:",V),alert("Export failed: "+V.message)}};return k.jsxs(Dk,{title:"Export",actions:k.jsx(Nk,{className:"w-full mt-2",onClick:N,children:"Export"}),children:[k.jsx(Kh,{label:"File Name",value:a,placeholder:"File Name",onChange:E=>{u(E.target.value)}}),k.jsx(ul,{label:"Format",children:k.jsx($s,{options:Lk,value:p,onChange:E=>{m(E)},className:"w-full"})}),k.jsx(Kh,{label:"Height",placeholder:"Height",value:i,onChange:E=>s(Number(E.target.value))}),k.jsx(Kh,{label:"Width",placeholder:"Width",value:e,onChange:E=>t(Number(E.target.value))}),k.jsx("div",{className:"border border-gray-300 focus:border-blue-500 h-40 w-full flex justify-center items-center bg-gray-50",children:y?k.jsx("img",{src:y,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}}):k.jsx("span",{className:"text-gray-400",children:"Preview"})})]})};function Bk({min:o,max:e,step:t,value:i,onChange:s}){const a=(i-o)/(e-o)*100;return k.jsxs("div",{className:"relative h-1 bg-gray-200 rounded-full",children:[k.jsx("div",{style:{width:`${a}%`},className:`
                w-full cursor-pointer appearance-none
                h-1 rounded-full
                bg-gradient-to-r from-indigo-500 to-sky-400

                opacity-80 transition-opacity
                hover:opacity-100

                [&::-webkit-slider-thumb]:appearance-none
                [&::-webkit-slider-thumb]:h-4
                [&::-webkit-slider-thumb]:w-4
                [&::-webkit-slider-thumb]:rounded-full
                [&::-webkit-slider-thumb]:bg-white
                [&::-webkit-slider-thumb]:shadow
                [&::-webkit-slider-thumb]:ring-2
                [&::-webkit-slider-thumb]:ring-indigo-500

                [&::-moz-range-thumb]:h-4
                [&::-moz-range-thumb]:w-4
                [&::-moz-range-thumb]:rounded-full
                [&::-moz-range-thumb]:bg-white
                [&::-moz-range-thumb]:border-2
                [&::-moz-range-thumb]:border-indigo-500
              `}),k.jsx("input",{type:"range",min:o,max:e,step:t,value:i,onChange:u=>s(+u.target.value),className:`
          absolute top-0 w-full h-1 cursor-pointer appearance-none bg-transparent
          [&::-webkit-slider-thumb]:appearance-none
          [&::-webkit-slider-thumb]:h-3
          [&::-webkit-slider-thumb]:w-3
          [&::-webkit-slider-thumb]:rounded-full
          [&::-webkit-slider-thumb]:bg-white
          [&::-webkit-slider-thumb]:shadow-md
          [&::-webkit-slider-thumb]:border-2
          [&::-webkit-slider-thumb]:border-blue-500
          [&::-webkit-slider-thumb]:transition-transform
          [&::-webkit-slider-thumb]:duration-150
          hover:[&::-webkit-slider-thumb]:scale-110
          active:[&::-webkit-slider-thumb]:scale-125
          [&::-moz-range-thumb]:h-5
          [&::-moz-range-thumb]:w-5
          [&::-moz-range-thumb]:rounded-full
          [&::-moz-range-thumb]:bg-white
          [&::-moz-range-thumb]:border-2
          [&::-moz-range-thumb]:border-blue-500
          [&::-moz-range-thumb]:shadow-md
          [&::-moz-range-thumb]:transition-transform
          [&::-moz-range-thumb]:duration-150
          hover:[&::-moz-range-thumb]:scale-110
          active:[&::-moz-range-thumb]:scale-125
        `})]})}const $c=({label:o,className:e=""})=>k.jsx("h1",{className:e+" py-2",children:o});function zk({label:o,min:e,max:t,step:i,onChange:s}){const[a,u]=fe.useState(0),p=m=>{u(m),s(m)};return k.jsxs("div",{className:"mb-4",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx($c,{label:o,className:"text-[11px] text-gray-500"}),k.jsx("span",{className:"text-sm font-semibold text-blue-600",children:a.toFixed(2)})]}),k.jsx(Bk,{min:e,max:t,step:i,value:a,onChange:p})]})}const Ik=({checked:o,onClick:e})=>k.jsx(k.Fragment,{children:k.jsx("button",{type:"button",role:"switch","aria-checked":o,onClick:e,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out
            ${o?"bg-indigo-500":"bg-gray-300"}`,children:k.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out
              ${o?"translate-x-5":"translate-x-0"}`})})});function Fk({label:o,onChange:e,className:t}){const[i,s]=fe.useState(!1),a=u=>{s(u),e(u)};return k.jsxs("div",{className:yn("flex items-center space-x-3",t),children:[k.jsx($c,{label:o,className:"text-[11px] text-gray-500"}),k.jsx(Ik,{checked:i,onClick:()=>a(!i)})]})}const kc={brightness:0,contrast:1,saturation:2,hue:3,blur:4,noise:5,pixelate:6,grayscale:7,sepia:8,invert:9,gamma:10,sharpen:11,edge:12,colorMatrix:13},Vk=[0,-1,0,-1,5,-1,0,-1,0],Uk=[-1,-1,-1,-1,8,-1,-1,-1,-1],Hk={vintage:[.6279,.3202,-.0396,0,0,.0253,.6441,.0326,0,0,.0466,-.0851,.5242,0,0,0,0,0,1,0]},Mp={none:{},vivid:{brightness:.05,contrast:.35,saturation:.5},noir:{grayscale:!0,contrast:.4},cinematic:{contrast:.35,saturation:.2,gamma:1.2},sharpPro:{sharpen:!0,contrast:.25},vintageFilm:{colorMatrix:"vintage"}},Yk=[{key:"brightness",label:"Brightness",min:-1,max:1,step:.01},{key:"contrast",label:"Contrast",min:-1,max:1,step:.01},{key:"saturation",label:"Saturation",min:-1,max:1,step:.01},{key:"hue",label:"Hue",min:0,max:Math.PI*2,step:.01},{key:"blur",label:"Blur",min:0,max:1,step:.01},{key:"noise",label:"Noise",min:0,max:1,step:.01},{key:"pixelate",label:"Pixelate",min:0,max:20,step:1},{key:"gamma",label:"Gamma",min:.2,max:2,step:.01}],Xk=Object.keys(Mp),Gk=[{key:"grayscale",label:"Grayscale"},{key:"sepia",label:"Sepia"},{key:"invert",label:"Invert"},{key:"sharpen",label:"Sharpen"},{key:"edge",label:"Edge Detect"}];function qk(){const o=xe(b=>b.canvas),[e,t]=fe.useState(null),[i,s]=fe.useState(null);fe.useEffect(()=>{const b=xe.getState().canvas;if(!b)return;const C=()=>{const N=y(.25);s(N),console.log("pdated",N)};return C(),b.on("selection:created",C),b.on("selection:updated",C),b.on("selection:cleared",C),b.on("object:modified",C),()=>{b.off("selection:created",C),b.off("selection:updated",C),b.off("selection:cleared",C),b.off("object:modified",C)}},[]);const a=(b,C)=>{switch(b){case"brightness":return new Mn.Brightness({brightness:C});case"contrast":return new Mn.Contrast({contrast:C});case"saturation":return new Mn.Saturation({saturation:C});case"hue":return new Mn.HueRotation({rotation:C});case"blur":return new Mn.Blur({blur:C});case"noise":return new Mn.Noise({noise:C*100});case"pixelate":return new Mn.Pixelate({blocksize:Math.max(1,C)});case"gamma":return new Mn.Gamma({gamma:[C,C,C]});case"grayscale":return C?new Mn.Grayscale:null;case"sepia":return C?new Mn.Sepia:null;case"invert":return C?new Mn.Invert:null;case"sharpen":return C?new Mn.Convolute({matrix:Vk}):null;case"edge":return C?new Mn.Convolute({matrix:Uk}):null;case"colorMatrix":return new Mn.ColorMatrix({matrix:Hk[C]});default:return null}},u=(b,C)=>{const N=xe.getState().canvas;if(!N)return;const E=N.getActiveObject();if(E instanceof cn){if(C==null)E.filters[kc[b]]=null;else{const V=a(b,C);V?E.filters[kc[b]]=V:E.filters[kc[b]]=null}E.applyFilters(),N.requestRenderAll()}},p=b=>{if(e===b){Object.keys(kc).forEach(N=>u(N,null)),t(null);return}const C=Mp[b];Object.keys(kc).forEach(N=>{u(N,C[N]??null)})},m=async()=>{const b=o?.getActiveObject();if(!o||!b)return;const C=b.toDataURL({multiplier:2}),N=await cn.fromURL(C,{crossOrigin:"anonymous"});N.set({left:b.left,top:b.top,angle:b.angle,scaleX:b.scaleX,scaleY:b.scaleY}),o.remove(b),o.add(N),o.setActiveObject(N),o.requestRenderAll()},y=(b=1,C=!0)=>{const N=xe.getState().canvas;if(!N)return null;const E=N.getActiveObject();if(!(E instanceof cn))return null;let V=b;if(C)try{const L=document.createElement("canvas").getContext("webgl"),ee=L?.getParameter(L.MAX_TEXTURE_SIZE)??1e3,G=E.width*b*(E.scaleX??1),te=E.height*b*(E.scaleY??1),ne=Math.max(G,te);ne>ee&&(V=ee/ne*b)}catch{console.warn("Unable to detect WebGL max texture, using default multiplier.")}return E.toDataURL({multiplier:V,format:"png"})};return k.jsxs("div",{className:"flex flex-col gap-4 p-2",children:[k.jsxs("div",{className:"flex justify-between border border-stone-200 p-2 rounded-md",children:[k.jsx("h3",{className:"text-lg font-medium",children:"Filters"}),k.jsx(hn,{content:"Convert Shape to Image",children:k.jsx(es,{icon:k.jsx("i",{className:"fa-solid fa-image"}),onClick:m})})]}),k.jsxs("section",{className:"flex flex-col gap-4 border border-stone-200 p-3 rounded-md",children:[k.jsx($c,{label:"Filter"}),Yk.map(({key:b,...C})=>k.jsx(zk,{...C,onChange:N=>u(b,N)},b))]}),k.jsxs("section",{className:"flex flex-col gap-4 border border-stone-200 p-3 rounded-md",children:[k.jsx($c,{label:"Presets"}),k.jsx(Wk,{presets:Xk,appliedPreset:e,appliedImageUrl:i,onSelect:b=>p(b),createFilter:a,filterPresets:Mp})]}),k.jsxs("section",{className:"flex flex-col gap-4 border border-stone-200 p-3 rounded-md",children:[k.jsx($c,{label:"Filter"}),Gk.map(({key:b,label:C})=>k.jsx(Fk,{label:C,onChange:N=>u(b,N),className:"justify-between"},b))]})]})}function Wk({presets:o,appliedImageUrl:e,appliedPreset:t=null,onSelect:i,createFilter:s,filterPresets:a}){const[u,p]=fe.useState({});return fe.useEffect(()=>{if(!e)return;let m=!0;return(async()=>{const b={};for(const C of o){const N=a[C];try{const E=await Zk({imageUrl:e,preset:N,createFilter:s});b[C]=E}catch(E){console.error(`Failed to generate thumbnail for ${C}:`,E)}}m&&p(b)})(),()=>{m=!1}},[e,o,a,s]),k.jsx("section",{className:"flex overflow-x-auto gap-3 p-3 rounded-md",children:o.map(m=>{const y=t===m,b=u[m];return k.jsx("div",{className:`flex-shrink-0 p-1 rounded-md border-2 cursor-pointer transition-colors border-1 border-stone-200 ${y?"border-blue-500":"hover:border-gray-300"}`,onClick:()=>i?.(m),children:b?k.jsx("img",{src:b,alt:m,className:"w-16 h-16 object-cover rounded-md"}):k.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-md animate-pulse"})},m)})})}async function Zk({imageUrl:o,preset:e,createFilter:t}){const i=new wo(null,{width:60,height:60,renderOnAddRemove:!1});try{const s=await cn.fromURL(o,{crossOrigin:"anonymous"});if(!s)throw new Error("Image failed to load");const a=Math.max(60/s.width,60/s.height);s.scale(a),s.set({left:(60-s.width*a)/2,top:(60-s.height*a)/2});const u=Object.entries(e).map(([p,m])=>t(p,m)).filter(Boolean);return u.length>0&&(s.filters=u,await s.applyFilters()),i.add(s),i.renderAll(),i.toDataURL({format:"png",quality:.8})}finally{i.dispose()}}const $k=[{id:"effects",label:"Edit Tools",icon:"fa-solid fa-screwdriver-wrench",closable:!1,content:()=>k.jsx(Mk,{})},{id:"filter",label:"Filter Tools",icon:"fa-solid fa-sliders",closable:!1,content:()=>k.jsx(qk,{})},{id:"export",label:"Export",icon:"fa-solid fa-file-export",closable:!1,content:()=>k.jsx(Pk,{})}],Kk=({open:o,width:e=280,onToggle:t,scrollRef:i,onScrollSave:s,children:a})=>k.jsxs("div",{className:"relative flex h-full",children:[k.jsx("button",{onClick:t,className:"w-2 border border-stone-200 cursor-ew-resize flex items-center justify-center bg-stone-200 hover:bg-stone-300",children:k.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),k.jsx("div",{className:`bg-white shadow-
        xl border-l border-stone-200 transition-[width,opacity] duration-300 overflow-hidden`,style:{width:o?e:0,opacity:o?1:0},children:k.jsx("div",{ref:i,onScroll:u=>s(u.target.scrollTop),className:"h-full overflow-y-auto",children:a})})]}),Qk=()=>{const[o,e]=fe.useState(!1),[t,i]=fe.useState("props"),s=fe.useRef({props:{scrollTop:0},layers:{scrollTop:0},assets:{scrollTop:0}}),a=fe.useRef(null);return fe.useEffect(()=>{if(!o)return;const u=s.current[t];a.current&&u&&(a.current.scrollTop=u.scrollTop)},[t,o]),k.jsxs("aside",{className:"flex h-full",children:[k.jsx(Kk,{open:o,onToggle:()=>e(u=>!u),scrollRef:a,onScrollSave:u=>{s.current[t].scrollTop=u},children:k.jsx(xk,{tabs:$k,defaultTab:"effects"})}),k.jsx(vk,{})]})},Jk=()=>k.jsxs(k.Fragment,{children:[k.jsx(pf,{src:"fate.svg",className:"h-8 cursor-pointer hidden md:block"}),k.jsx(pf,{src:"fateicon.svg",className:"h-8 cursor-pointer md:hidden"})]}),eA=()=>k.jsx(k.Fragment,{children:k.jsx(pf,{src:"fateicon.svg",className:"h-8 cursor-pointer"})}),tA=({brand:o,toolbar:e,transform:t})=>k.jsxs("section",{className:"flex flex-col",children:[k.jsxs("div",{className:"flex flex-row items-center",children:[o,e]}),k.jsx("div",{className:"flex flex-row items-center",children:t})]});function iA(o){o.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,lockRotation:!1,perPixelTargetFind:!1,objectCaching:!1}),o.setCoords()}async function nA(o,e){if(!o||!e)return;const{pageWidth:t,pageHeight:i,scale:s}=xe.getState(),a=URL.createObjectURL(e);try{const u=await cn.fromURL(a),p=t/2*s,m=i/2*s;u.set({left:p,top:m,originX:"center",originY:"center"});const y=o.getWidth();u.scaleToWidth(Math.min(400,y*.7)),iA(u),o.add(u),o.setActiveObject(u),o.requestRenderAll(),xe.getState().setToolbar({target:u}),xe.getState().syncFromObject(u)}catch(u){console.error("Image load failed",u)}finally{setTimeout(()=>URL.revokeObjectURL(a),1e3)}}async function sA(o,e){if(!o||!e)return;const t=await e.text();try{const i=await go(t);let s=[];if(Array.isArray(i)?s=i:i?.type?s=[i]:i?.objects&&(s=i.objects),!s.length){console.error("No SVG objects found",i);return}const a=s.length===1?s[0]:new Wi(s),u=o.getWidth(),p=o.getHeight();a.set({left:u/2,top:p/2,originX:"center",originY:"center",selectable:!0,evented:!0}),a.width&&a.height?a.scaleToWidth(Math.min(400,u*.7)):a.scale(1),a.setCoords(),o.add(a),o.setActiveObject(a),o.requestRenderAll()}catch(i){console.error("SVG import failed",i)}}async function rA(o,e){if(!(!o||!e))try{const t=await e.text(),i=JSON.parse(t);o.loadFromJSON(i,()=>{o.requestRenderAll()})}catch(t){console.error("Failed to load Fabric JSON",t)}}function aA(o){const e=o.name.split(".").pop()?.toLowerCase();return e==="svg"?"svg":e==="fateboard"||e==="json"?"fabric-json":["png","jpg","jpeg","webp"].includes(e)?"image":"unknown"}async function oA(o,e){switch(aA(e)){case"image":return nA(o,e);case"svg":return sA(o,e);case"fabric-json":return rA(o,e);default:alert("Unsupported file type")}}function lA(o){return c1.map(t=>t.id!=="open"?t:{...t,onClick:o.openFile})}const cA=()=>{const o=xe(a=>a.settings.iconSize),e=fe.useRef(null),t=xe(a=>a.canvas),s=lA({openFile:()=>{e.current?.click()}});return k.jsxs(k.Fragment,{children:[k.jsx("input",{ref:e,type:"file",accept:".png,.jpg,.jpeg,.webp,.svg,.fateboard",hidden:!0,onChange:async a=>{if(!t)return;const u=a.target.files?.[0];u&&(await oA(t,u),a.target.value="")}}),k.jsx("ul",{className:"flex items-center gap-2 px-1",children:s.map(a=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:a.label}),k.jsx("span",{className:"text-xs opacity-60",children:a.shortcut})]}),children:k.jsx(es,{icon:a.icon,title:a.tooltip,"aria-label":a.tooltip,onClick:a.onClick,size:o})})},a.id))})]})},uA=()=>{const o=xe(e=>e.iconSize);return k.jsx("ul",{className:"flex items-center gap-2 px-1",children:v0.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},hA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-2 px-1",children:C5.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:e.label,children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},fA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-1 px-1",children:x0.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},dA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-1 px-1",children:y0.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},gA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-1 px-1",children:u1.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},Wx={tl:{x:"left",y:"top",left:"12%",top:"12%"},tr:{x:"right",y:"top",left:"88%",top:"12%"},c:{x:"center",y:"center",left:"50%",top:"50%"},bl:{x:"left",y:"bottom",left:"12%",top:"88%"},br:{x:"right",y:"bottom",left:"88%",top:"88%"}};function pA({size:o=24,value:e="c",onChange:t}){const i=Wx[e],s=o*.34;return k.jsxs("div",{style:{width:o,height:o,position:"relative",cursor:"pointer"},children:[k.jsx("div",{style:{position:"absolute",inset:2,borderRadius:3,border:"1px solid #cbd5e1",background:"linear-gradient(#ffffff, #f8fafc)"}}),k.jsx("div",{style:{position:"absolute",inset:"50% 4px auto 4px",height:1,background:"#e2e8f0"}}),k.jsx("div",{style:{position:"absolute",inset:"4px auto 4px 50%",width:1,background:"#e2e8f0"}}),Object.entries(Wx).map(([a,u])=>k.jsx("div",{onClick:()=>t?.({originX:u.x,originY:u.y,id:a}),style:{position:"absolute",left:u.left,top:u.top,width:o*.45,height:o*.45,transform:"translate(-50%,-50%)"}},a)),e==="c"?k.jsx("div",{style:{position:"absolute",left:i.left,top:i.top,width:s,height:s,borderRadius:"50%",background:"#ffffff",border:"2px solid #3b82f6",boxShadow:`
              0 1px 2px rgba(0,0,0,0.15),
              0 0 0 3px rgba(59,130,246,0.15)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}}):k.jsx("div",{style:{position:"absolute",left:i.left,top:i.top,width:s,height:s,borderRadius:"50%",background:"#3b82f6",boxShadow:`
              0 2px 4px rgba(0,0,0,0.2),
              0 0 0 3px rgba(59,130,246,0.25)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}})]})}function mA({message:o,duration:e=2e3,onClose:t}){const[i,s]=fe.useState(!1),[a]=fe.useState(()=>{const p=document.createElement("div");return p.id="toast-portal",p});fe.useEffect(()=>(document.body.appendChild(a),()=>a.remove()),[a]),fe.useEffect(()=>{s(!0);const p=setTimeout(()=>{s(!1),setTimeout(()=>t&&t(),200)},e);return()=>clearTimeout(p)},[]);const u=k.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2
                  px-4 py-2 bg-gray-800 text-white text-sm rounded-md
                  shadow-lg transition-opacity duration-200
                  ${i?"opacity-100":"opacity-0"}`,children:o});return Ip.createPortal(u,a)}const vA=()=>{const o=xe(y=>y.canvas),e=xe(y=>y.settings.iconSize),t=vf(),i=fe.useRef(crypto.randomUUID()),[s,a]=fe.useState(""),u=y=>{a(y)},p=y=>{if(!y)return;const b=i.current,C={id:b,version:1,canvasJSON:y.toJSON(),updatedAt:Date.now()};Tl.local.set(`board:${b}`,JSON.stringify(C));const N=`${window.location.origin}/#/share/${b}?mode=view`;navigator.clipboard?.writeText(N).catch(()=>{}),window.open(N,"_blank","noopener,noreferrer"),u("Preview opened in new tab & link copied!")},m=[{id:"grid",label:"Grid",shortcut:Kt("L","Ctrl+L"),icon:k.jsx("i",{className:"fa-solid fa-table-cells-large"}),onClick:()=>xe.getState().toggleGrid()},{id:"settings",label:"Settings",icon:k.jsx("i",{className:"fa-solid fa-gear"}),onClick:()=>{t("/setting",!0)}},{id:"preview",label:"Preview",icon:k.jsx("i",{className:"fa-solid fa-share-from-square"}),onClick:()=>{p(o)}},{id:"help",label:"Help",icon:k.jsx("i",{className:"fa-solid fa-circle-question"}),onClick:()=>{t("/help")}}];return k.jsxs(k.Fragment,{children:[k.jsx("ul",{className:"flex items-center gap-1 px-1",children:m.map(y=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:y.label}),k.jsx("span",{className:"text-xs opacity-60",children:y.shortcut})]}),children:k.jsx(es,{icon:y.icon,title:y.label,"aria-label":y.label,onClick:y.onClick,size:e})})},y.id))}),s&&k.jsx(mA,{message:s,onClose:()=>a(""),duration:2e3})]})},dl=()=>k.jsxs("div",{className:"group relative mx-3 flex h-6 w-[2px] items-center justify-center",children:[k.jsx("div",{className:"absolute inset-y-0 w-[6px] rounded-full bg-blue-400/20 blur-md transition group-hover:bg-blue-400/40"}),k.jsx("div",{className:"absolute inset-y-0 w-px bg-gradient-to-b from-transparent via-blue-400/70 to-transparent transition-opacity group-hover:via-blue-400"}),k.jsx("div",{className:"absolute inset-y-2 w-px bg-white/50 opacity-60 group-hover:opacity-100 transition"})]}),Zx=[{id:"file",component:cA},{id:"edit",component:uA},{id:"alignment",component:hA},{id:"group",component:fA},{id:"lock",component:dA},{id:"zoom",component:gA},{id:"origin",component:pA},{id:"extra",component:vA}],yA=()=>k.jsx("div",{className:"flex items-center gap-2 px-2 py-1 bg-panel shadow-toolbar",children:Zx.map((o,e)=>{const t=o.component;return k.jsxs(Yr.Fragment,{children:[k.jsx(t,{}),e<Zx.length-1&&k.jsx(k.Fragment,{children:k.jsx(dl,{})})]},o.id)})});function xA({label:o,value:e,onChange:t,className:i=""}){return k.jsxs("label",{className:"inline-flex items-center gap-1.5 text-[11px] text-gray-600",children:[o?k.jsxs("span",{className:"font-medium",children:[o,":"]}):null,k.jsx("div",{className:"w-5 h-5 rounded-full p-[2px] border border-gray-200 shadow-sm",style:{backgroundColor:e},children:k.jsx("input",{type:"color",value:e,onChange:s=>t?.(s.target.value),className:`w-full h-full rounded-full opacity-0 cursor-pointer ${i}`})})]})}const bA=[{key:"left",icon:"fa-solid fa-align-left",tooltip:"Left Align"},{key:"center",icon:"fa-solid fa-align-center",tooltip:"Center Align"},{key:"right",icon:"fa-solid fa-align-right",tooltip:"Right Align"},{key:"justify",icon:"fa-solid fa-align-justify",tooltip:"Justify"}],_A=({value:o,options:e,handleApply:t,className:i=""})=>k.jsx($s,{value:o,options:e,className:i,onChange:s=>{t?.(s)}}),SA=()=>{const{canvas:o}=xe(),e=xe(ne=>ne.fontSize),t=xe(ne=>ne.setFontSize);xe(ne=>ne.bgColor),xe(ne=>ne.setBgColor),xe(ne=>ne.color),xe(ne=>ne.setColor);const i=xe(ne=>ne.hasShadow),s=xe(ne=>ne.setHasShadow),a=xe(ne=>ne.shadowColor),u=xe(ne=>ne.setShadowColor),p=xe(ne=>ne.fontFamily),m=xe(ne=>ne.setFontFamily);xe(ne=>ne.align),xe(ne=>ne.setAlign);const y=xe(ne=>ne.isBold),b=xe(ne=>ne.setIsBold),C=xe(ne=>ne.isItalic),N=xe(ne=>ne.setIsItalic),E=xe(ne=>ne.isUnderline),V=xe(ne=>ne.setIsUnderline);xe(ne=>ne.charSpacing),xe(ne=>ne.setCharSpacing),xe(ne=>ne.lineHeight),xe(ne=>ne.setLineHeight),xe(ne=>ne.strokeWidth),xe(ne=>ne.setStrokeWidth),xe(ne=>ne.strokeColor),xe(ne=>ne.setStrokeColor),xe(ne=>ne.fillColor),xe(ne=>ne.setFillColor);const L=xe(ne=>ne.textAlign),ee=xe(ne=>ne.setTextAlign),G=xe(ne=>ne.updateText),te=xe(ne=>ne.fonts);return fe.useEffect(()=>{if(!o)return;const ne=()=>{const de=o.getActiveObject();de&&de.type.includes("text")&&(t(de.fontSize||24),m(de.fontFamily||"Arial"))};return o.on("selection:created",ne),o.on("selection:updated",ne),()=>{o.off("selection:created",ne),o.off("selection:updated",ne)}},[o]),k.jsx("div",{className:"px-5 flex flex-wrap gap-4 overflow-x-auto items-center bg-white text-sm",children:k.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm gap-4",children:[k.jsx($s,{value:p,options:te,onChange:ne=>{console.log(ne),m(ne),G({fontFamily:ne})}}),k.jsx(_A,{value:e,options:m1,handleApply:ne=>{console.log(ne),t(ne),G({fontSize:ne})}}),k.jsx(jp,{options:v1,value:{bold:y,italic:C,underline:E},onChange:ne=>{const{bold:de,italic:be,underline:I}=ne;b(de),N(be),V(I),G({fontWeight:de?"bold":"normal"}),G({fontStyle:be?"italic":"normal"}),G({underline:I})}}),k.jsx(jp,{single:!0,options:bA,value:{left:L==="left",center:L==="center",right:L==="right",justify:L==="justify"},onChange:ne=>{const{center:de,right:be,justify:I}=ne;let Ee="left";de?Ee="center":be?Ee="right":I&&(Ee="justify"),ee(Ee),G({textAlign:Ee})}}),k.jsx(dl,{}),k.jsx(es,{icon:k.jsx("i",{className:"fa-solid fa-circle text-xs"}),onClick:()=>{const ne=!i;s(ne),G({shadow:ne?{color:a,blur:5,offsetX:2,offsetY:2}:null})},active:i,title:"Shadow"}),i&&k.jsx(xA,{label:"Shadow",value:a,onChange:ne=>{u(ne),G({shadow:{color:ne,blur:5,offsetX:2,offsetY:2}})}})]})})},wA=[{id:"sendtoback",label:"Send to Back",shortcut:Kt("","Shift+Ctrl+"),icon:k.jsx("i",{className:"fa-solid fa-angles-down"}),onClick:()=>xe.getState().sendToBack()},{id:"sendbackward",label:"Send backward",shortcut:Kt("","Ctrl+"),icon:k.jsx("i",{className:"fa-solid fa-angle-down"}),onClick:()=>xe.getState().sendBackward()},{id:"bringforward",label:"Bring forward",shortcut:Kt("","Ctrl+"),icon:k.jsx("i",{className:"fa-solid fa-angle-up"}),onClick:()=>xe.getState().bringForward()},{id:"bringtofront",label:"Bring to front",shortcut:Kt("","Shift+Ctrl+"),icon:k.jsx("i",{className:"fa-solid fa-angles-up"}),onClick:()=>xe.getState().bringToFront()}],CA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-1 px-1",children:wA.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},$x=o=>k.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:[k.jsx("path",{d:"M10 5L3.5 19H10V5Z",className:"fill-current opacity-50"}),k.jsx("path",{d:"M14 5L20.5 19H14V5Z",className:"fill-current"}),k.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21",strokeWidth:"2",strokeDasharray:"3 2",strokeLinecap:"round",className:"stroke-current"})]}),TA=[{id:"flipx",label:"flipX",name:"flipX",description:"flipX",icon:k.jsx($x,{className:"cursor-pointer"}),when:()=>xe.getState().hasSelection,onClick:()=>{const{flipX:o}=xe.getState().transform;xe.getState().setTransform("flipX",!o)}},{id:"flipy",label:"Flip Y",name:"Flip Y",description:"Flip Y",icon:k.jsx($x,{className:"rotate-90 cursor-pointer"}),when:()=>xe.getState().hasSelection,onClick:()=>{const{flipY:o}=xe.getState().transform;xe.getState().setTransform("flipY",!o)}}],kA=()=>{const o=xe(e=>e.settings.iconSize);return k.jsx("ul",{className:"flex items-center gap-1 px-1",children:TA.map(e=>k.jsx("li",{children:k.jsx(hn,{position:"bottom",content:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{children:e.label}),k.jsx("span",{className:"text-xs opacity-60",children:e.shortcut})]}),children:k.jsx(es,{icon:e.icon,title:e.label,"aria-label":e.label,onClick:e.onClick,size:o})})},e.id))})},AA=[{key:"x",label:"X"},{key:"y",label:"Y"},{key:"width",label:"W"},{key:"height",label:"H"},{key:"rotation",label:"R"}],OA=()=>{const o=xe(p=>p.transform),e=xe(p=>p.setTransform),t=xe(p=>p.hasSelection),i=xe(p=>p.canvas),s=xe(p=>p.setRadius),{selectedObject:a}=xe(),u=i?.getActiveObject();return k.jsx("div",{className:`px-2 py-1 overflow-x-auto bg-white ${u?"":"pointer-events-none opacity-50"}`,children:k.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm",children:[k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx(kA,{}),k.jsx(dl,{}),k.jsx(CA,{}),k.jsx(dl,{}),k.jsx("div",{className:"flex items-center gap-2",children:AA.map(p=>k.jsx(Zn,{label:p.label,value:o[p.key],disabled:!t,onChange:m=>e(p.key,m)},p.key))})]}),(u?.type==="square"||u?.type==="rect")&&k.jsxs("div",{className:"flex gap-4 px-4",children:[k.jsx(dl,{}),k.jsx(Zn,{label:"Rx",value:o.rx,onChange:p=>s(p,o.ry)}),k.jsx(Zn,{label:"Ry",value:o.ry,onChange:p=>s(o.rx,p)})]}),a&&a?.type==="textbox"&&k.jsxs("div",{className:"flex px-4",children:[k.jsx(dl,{}),k.jsx(SA,{})]})]})})},EA=()=>k.jsx("header",{className:"flex bg-white p-1 px-2 shadow-xs border-b border-stone-200",children:k.jsx(tA,{brand:k.jsx(Jk,{}),toolbar:k.jsx(yA,{}),transform:k.jsx(OA,{})})});function jA(){const o=fe.useRef(null),e=fe.useRef(null),t=fe.useRef(null),i=xe(b=>b.init),s=xe(b=>b.selectedObject),a=xe(b=>b.canvas),u=xe(b=>b.fill),p=xe(b=>b.openMenu);g1();const m=()=>{a&&e.current&&(a.setDimensions({width:e.current.clientWidth,height:e.current.clientHeight}),a.renderAll())};fe.useEffect(()=>(o.current&&(i(o.current,e.current),t.current=new m0(a,()=>u)),()=>{a&&(a.dispose(),t.current?.disable(),t.current=null,e.current=null)}),[i]),fe.useEffect(()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[a]);const y=b=>{b.preventDefault(),p(b.clientX,b.clientY,x1)};return k.jsx("div",{className:"flex flex-1",children:k.jsxs("div",{className:"shadow-xs relative h-full w-full",ref:e,onContextMenu:y,children:[k.jsx("canvas",{ref:o}),s?.type==="textbox"&&a&&k.jsx(y1,{target:s,canvas:a,onChange:b=>{s&&(s.set(b),a.requestRenderAll())}})]})})}const MA=()=>{const o=xe(e=>e.settings.freehand);return d1("Draw | Fateboard"),k.jsxs(k.Fragment,{children:[k.jsx(k3,{header:k.jsx(EA,{}),leftSidebar:k.jsx(I3,{config:$3,toolbarPosition:"left"}),rightPanel:k.jsx(Qk,{}),canvasBoard:o?k.jsx(jA,{}):k.jsx(N3,{}),footer:k.jsx(lk,{})}),k.jsx(ck,{})]})};function DA({children:o}){return k.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:o})}function NA({children:o}){return k.jsx("div",{className:"flex justify-end gap-2",children:o})}function RA({title:o}){return k.jsx("h3",{className:"text-base font-semibold text-gray-900",children:o})}function _1({title:o,children:e,footer:t}){return k.jsxs("div",{className:`
        my-8 w-full max-w-3xl
        rounded-xl border border-gray-200
        bg-white
        shadow-sm hover:shadow-md
        transition-shadow duration-200
      `,children:[o&&k.jsx("div",{className:"px-5 pt-5 pb-3 border-b border-gray-100",children:k.jsx(RA,{title:o})}),k.jsx("div",{className:"px-5 py-4",children:k.jsx(DA,{children:e})}),t&&k.jsx("div",{className:"px-5 py-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:k.jsx(NA,{children:t})})]})}function LA(){const o=xe(u=>u.settings),e=xe(u=>u.toggleFreehand),t=xe(u=>u.updateSetting),i=xe(u=>u.setFormat),s=xe(u=>u.setOrientation),a=xe(u=>u.setMode);return k.jsx("div",{className:"min-h-screen",children:k.jsxs(_1,{title:"Settings",children:[k.jsx(ul,{label:"Freehand",value:o.freehand,onChange:()=>e()}),!o.freehand&&k.jsx(ul,{label:"Page Size",children:k.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"A4",value:"A4"},{label:"A3",value:"A3"},{label:"A5",value:"A5"},{label:"Letter",value:"LETTER"},{label:"Custom",value:"CUSTOM"}].map(u=>k.jsx("button",{onClick:()=>i(u.value),className:`px-3 py-1 rounded text-sm border transition
                                ${o.format===u.value?"bg-black text-white border-black":"bg-white border-gray-300 hover:bg-gray-100"}`,children:u.label},u.value))})}),!o.freehand&&k.jsx(ul,{label:"Orientation",children:k.jsx("div",{className:"flex gap-2",children:[{label:"Landscape",value:"LANDSCAPE"},{label:"Portrait",value:"PORTRAIT"}].map(u=>k.jsx("button",{onClick:()=>s(u.value),className:`px-3 py-1 rounded text-sm border transition
                                ${o.orientation===u.value?"bg-black text-white border-black":"bg-white border-gray-300 hover:bg-gray-100"}`,children:u.label},u.value))})}),k.jsx(ul,{label:"Icon Size",children:k.jsx("div",{className:"flex gap-2",children:["sm","md","lg"].map(u=>k.jsxs("button",{onClick:()=>t("iconSize",u),className:`px-3 py-1 rounded text-sm border transition
                    ${o.iconSize===u?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"}`,children:[u==="sm"&&"Small",u==="md"&&"Medium",u==="lg"&&"Large"]},u))})}),k.jsx(ul,{label:"Theme",children:k.jsx($s,{value:o.mode,onChange:u=>a(u),options:[{label:"Dark",value:"dark"},{label:"Light",value:"light"},{label:"System",value:"system"}]})})]})})}const zh=[{id:"preferences",label:"Preferences",component:LA}];function PA(){const[o,e]=fe.useState(zh[0].id),[t,i]=fe.useState([]),s=zh.find(u=>u.id===o)?.component,a=u=>{i(p=>p.includes(u)?p.filter(m=>m!==u):[...p,u])};return k.jsxs("div",{className:"flex h-full bg-gray-50 text-gray-800",children:[k.jsxs("aside",{className:"w-72 p-6 bg-white flex flex-col",children:[k.jsxs("h3",{className:"flex gap-x-2 text-xl font-semibold mb-6 text-gray-900",children:[k.jsx(eA,{}),"Settings"]}),k.jsx("input",{type:"text",placeholder:"Search topics...",className:"mb-4 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",onChange:u=>{const p=u.target.value.toLowerCase(),m=zh.find(y=>y.label.toLowerCase().includes(p));m&&e(m.id)}}),k.jsx("ul",{className:"space-y-2 flex-1 overflow-y-auto",children:zh.map(u=>k.jsx("li",{children:k.jsx("button",{className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-blue-100 hover:text-blue-900 ${u.id===o?"bg-blue-200 text-blue-900 font-semibold shadow-inner":"text-gray-700"}`,onClick:()=>e(u.id),children:u.label})},u.id))})]}),k.jsx("main",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:k.jsx("div",{className:"rounded-2xl p-6 transition-all duration-300",children:s?k.jsx(s,{toggleSection:a,expandedSections:t}):k.jsx("p",{className:"text-gray-500",children:"Select a topic from the left."})})})]})}function BA({items:o,keyExtractor:e,renderItem:t,emptySlot:i}){return!o||o.length===0?i??k.jsx("div",{className:"p-3 text-sm text-gray-500",children:"No results"}):k.jsx("ul",{children:o.map((s,a)=>k.jsx("li",{children:t(s,a)},e(s,a)))})}function zA({value:o,onChange:e,...t}){return k.jsx(Kh,{type:"text",value:o,onChange:i=>e(i.target.value),placeholder:"Search...",className:"w-full p-2 my-2",...t})}function IA(o,e){const[t,i]=fe.useState(""),s=fe.useMemo(()=>{if(!t)return o;const a=t.toLowerCase();return o.filter(u=>e(u,a))},[o,t,e]);return{query:t,setQuery:i,filteredItems:s}}const FA=(o,e)=>o.title.toLowerCase().includes(e.toLowerCase()),VA=Yr.memo(function({cmd:o}){return k.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg hover:bg-gray-100 cursor-pointer",children:[k.jsx("span",{children:o.title}),o.shortcut]})});function UA(){return k.jsx("p",{className:"p-2 text-gray-500 text-sm",children:"No command found"})}function HA({commands:o}){const{query:e,setQuery:t,filteredItems:i}=IA(o,FA),s=Yr.useCallback(a=>k.jsx(VA,{cmd:a}),[]);return k.jsx("div",{className:"flex justify-center items-start pt-2",children:k.jsxs(_1,{title:"Command Palette",children:[k.jsx(zA,{placeholder:"Type a command...",value:e,onChange:t}),k.jsx(BA,{items:i,keyExtractor:a=>a.id,renderItem:s,emptySlot:k.jsx(UA,{})})]})})}function YA(){const o=fe.useRef(null),e=fe.useRef(null),t=fe.useRef(!1),{docId:i}=N2(),[s]=Tw(),a=s.get("mode")||"view";return fe.useLayoutEffect(()=>{if(!e.current||t.current)return;t.current=!0;const u=new iu(e.current,{backgroundColor:"#fff",preserveObjectStacking:!0});o.current=u;const p=Tl.local.get(`board:${i}`);if(!p)return;const{canvasJSON:m}=JSON.parse(p);return u.loadFromJSON(m,()=>{const y=a==="view";u.selection=!y,u.forEachObject(b=>{b.selectable=!y,b.evented=!y}),u.requestRenderAll()}),()=>{o.current&&(o.current.dispose(),o.current=null,t.current=!1)}},[i,a]),k.jsx("div",{className:"flex justify-center items-center",children:k.jsx("canvas",{ref:e,className:"flex-1",height:window.innerHeight,width:window.innerWidth})})}function XA(){const o=[{title:"What is the Color List Tool?",content:"The Color List Tool (also called the Swatches Panel) lets you quickly apply colors to shapes, text, nodes, and strokes. It provides predefined colors and supports custom colors for consistent design."},{title:"When to use",list:["Apply consistent colors to objects","Quickly switch between frequently used colors","Maintain visual hierarchy and branding","Reuse project-specific color palettes"]},{title:"How to use",list:["Open the Color List panel from the right side of the canvas","Select an object on the canvas","Click a color swatch to apply it","Use the color picker to add custom colors","Reorder colors to keep frequently used ones at the top"]},{title:"Best practices",list:["Stick to a limited color palette for clarity","Use similar shades for related elements","Save custom colors for brand or project consistency","Avoid using too many bright colors together"]},{title:"Keyboard shortcuts",list:["C  Open Color List panel","Arrow Keys  Navigate between swatches","Enter  Apply selected color","Delete / Backspace  Remove a custom swatch"]},{title:"Related tools",list:["Selector Tool  Select objects before applying color","Shape Builder  Fill shapes with color","Node Tool  Apply color to nodes","Pencil Tool  Set stroke color","Text Tool  Change text color"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Color List Tool"}),k.jsx("p",{className:"text-gray-600",children:"Quickly apply and manage colors using swatches and custom palettes."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function GA(){const o=[{title:"What is the Hand Tool?",content:"The Hand Tool lets you move around the canvas by panning the view. It does not select or modify objects, making it safe for navigation."},{title:"When to use",list:["Navigate large or zoomed-in boards","Review content without editing","Present or explain diagrams to others"]},{title:"How to use",list:["Select the Hand Tool from the toolbar","Click and drag anywhere on the canvas","Release the mouse to stop panning"]},{title:"Keyboard shortcuts",list:["Hold Spacebar  Temporarily activate Hand Tool","Scroll  Zoom in or out","Use Hand Tool after zooming to reposition the view"]},{title:"Best practices",list:["Use the Hand Tool instead of the Selector when only moving the view","Combine panning with zoom for faster navigation","Use during presentations to avoid accidental edits"]},{title:"Related tools",list:["Selector Tool  Select and edit objects","Pencil Tool  Freehand drawing","Shape Builder  Structured shapes","Node Tool  Diagrams and flows"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hand Tool"}),k.jsx("p",{className:"text-gray-600",children:"Navigate the canvas smoothly without modifying any objects."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function qA(){const o=[{title:"What is a Node?",content:"A node is a visual block that represents a single idea, step, or component. Nodes are commonly used to build flows, diagrams, and structured relationships."},{title:"When to use",list:["Create flowcharts","Build mind maps","Design system or architecture diagrams","Model decision trees or processes"]},{title:"How to create a node",list:["Select the Node Tool from the toolbar","Click anywhere on the canvas","A new node will be created at that position"]},{title:"Editing nodes",list:["Drag nodes to reposition them","Resize nodes using the corner handles","Double-click a node to edit its text"]},{title:"Connecting nodes",content:"Drag from a nodes connection handle to another node to create a link. Connections automatically adjust when nodes are moved."},{title:"Best practices",list:["Keep node labels short and clear","Align nodes to improve readability","Avoid crossing connections","Use color to group related nodes"]},{title:"Related tools",list:["Selector Tool  Move and edit nodes","Shape Builder  Structured visual blocks","Text Tool  Labels and annotations","Hand Tool  Navigate the canvas"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Node Tool"}),k.jsx("p",{className:"text-gray-600",children:"Create connected elements to represent flows, systems, and relationships."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function WA(){const o=[{title:"What is the Pencil Tool?",content:"The Pencil Tool lets you draw freely on the canvas using mouse or touch input. It is ideal for sketching ideas, adding annotations, and quick visual thinking."},{title:"When to use",list:["Sketch ideas quickly","Create annotations or highlights","Draw freeform lines or shapes","Mark up diagrams or images"]},{title:"How to draw",list:["Select the Pencil Tool from the toolbar","Click and drag on the canvas to draw","Release the mouse or touch to finish the stroke"]},{title:"Editing strokes",list:["Use the Selector Tool to move or resize strokes","Press Delete / Backspace to remove a stroke","Change stroke color or thickness from the toolbar"]},{title:"Best practices",list:["Keep strokes simple and intentional","Use grouping or layers to organize sketches","Combine with Shape or Node tools for clarity"]},{title:"Keyboard shortcuts",list:["P  Activate Pencil Tool","Ctrl / Cmd + Z  Undo last stroke","Ctrl / Cmd + Y  Redo stroke","Delete / Backspace  Remove selected stroke"]},{title:"Related tools",list:["Selector Tool  Edit and move strokes","Hand Tool  Navigate without drawing","Node Tool  Structured diagrams","Shape Builder  Clean shapes and blocks"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pencil Tool"}),k.jsx("p",{className:"text-gray-600",children:"Draw freely on the canvas for sketches, annotations, and brainstorming."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function ZA(){const o=[{title:"File",list:["New Board  Create a new blank board","Open  Load an existing board","Save / Export  Save or export the board as image or PDF"]},{title:"Edit",list:["Undo  Revert the last action (Ctrl / Cmd + Z)","Redo  Reapply the last undone action (Ctrl / Cmd + Shift + Z)","Cut, Copy, Paste  Standard clipboard actions"]},{title:"Alignment",list:["Align Left, Center, Right, Top, Middle, Bottom","Distribute objects horizontally or vertically","Use alignment to keep layouts clean and consistent"]},{title:"Group and Ungroup",list:["Group selected objects (Ctrl / Cmd + G)","Ungroup objects (Ctrl / Cmd + Shift + G)","Grouped items move and resize together"]},{title:"Lock and Unlock",list:["Lock objects to prevent accidental edits","Unlock objects to allow changes","Useful for templates and background elements"]},{title:"Zoom controls",list:["Zoom In / Out to change view level","Fit to Screen to view all content","Actual Size to return to 100% zoom","Ctrl / Cmd + Scroll to zoom quickly"]},{title:"Best practices",list:["Align and distribute objects for neat layouts","Lock important elements before editing details","Group complex elements to simplify management","Zoom frequently to maintain context on large boards"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Primary Toolbar"}),k.jsx("p",{className:"text-gray-600",children:"Access essential actions for file management, editing, alignment, grouping, and zoom."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function $A(){const o=[{title:"Flip & transform",list:["Flip objects horizontally or vertically","Rotate objects using the rotation control","Hold Shift while resizing to keep proportions"]},{title:"Layer management",list:["Bring Forward or Send Backward to adjust order","Bring to Front or Send to Back for full reordering","Use layers to control overlap and visibility"]},{title:"Dimensions & position",list:["Top and Left values control object position","Width and Height adjust object size","Hold Shift to maintain aspect ratio while resizing"]},{title:"Font controls (text only)",list:["Font Family  choose a typeface","Font Size  control text scale","Font Style  bold, italic, underline","Text Alignment  left, center, right, justify","Shadow  add depth or emphasis to text"]},{title:"Best practices",list:["Manage layers to avoid accidental overlaps","Keep sizes and spacing consistent","Use text styles consistently across the board","Apply shadows and flips only when needed"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Top Toolbar  Advanced Controls"}),k.jsx("p",{className:"text-gray-600",children:"Advanced controls for transforming objects, managing layers, and styling text."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function KA(){const o=[{title:"What is the Shape Tool?",content:"The Shape Tool lets you create structured shapes such as rectangles, circles, arrows, and blocks. It is ideal for building clean diagrams and layouts."},{title:"When to use",list:["Create flowcharts and diagrams","Build organizational charts","Design system or architecture visuals","Prototype UI blocks or layouts"]},{title:"How to create shapes",list:["Select the Shape Tool from the toolbar","Click and drag on the canvas","Release to place the shape"]},{title:"Editing shapes",list:["Use the Selector Tool to move or resize shapes","Change fill color, border, or opacity from the toolbar","Duplicate shapes to reuse layouts"]},{title:"Best practices",list:["Align shapes for better readability","Use consistent sizes for structured layouts","Group related shapes to stay organized"]},{title:"Keyboard shortcuts",list:["S  Activate Shape Tool","Ctrl / Cmd + D  Duplicate shape","Delete / Backspace  Remove selected shape"]},{title:"Related tools",list:["Selector Tool  Move and edit shapes","Node Tool  Structured flow elements","Pencil Tool  Annotations and sketches","Hand Tool  Canvas navigation"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shape Tool"}),k.jsx("p",{className:"text-gray-600",children:"Create structured shapes, blocks, and diagrams quickly and efficiently."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function QA(){const[o,e]=fe.useState(""),t=b0.filter(i=>i.label.toLowerCase().includes(o.toLowerCase())||i.shortcut.toLowerCase().includes(o.toLowerCase()));return k.jsx("section",{className:"space-y-8",children:k.jsxs("div",{className:"flex flex-col bg-white p-6",children:[k.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Keyboard Shortcuts"}),k.jsx("p",{className:"text-gray-500 mb-4",children:"Quickly reference all keyboard commands available in the Whiteboard."}),k.jsxs("div",{className:"relative mb-8",children:[k.jsx("span",{className:"absolute inset-y-0 left-3 flex items-center text-gray-400",children:k.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),k.jsx("input",{type:"text",placeholder:"Search shortcuts...",value:o,onChange:i=>e(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 placeholder-gray-400"})]}),k.jsx("div",{className:"overflow-x-auto rounded-lg",children:k.jsxs("table",{className:"w-full border-collapse text-sm",children:[k.jsx("thead",{className:"bg-gray-100",children:k.jsxs("tr",{children:[k.jsx("th",{className:"p-3 text-left font-medium text-gray-700 border-b border-stone-200",children:"Action"}),k.jsx("th",{className:"p-3 text-center font-medium text-gray-700 border-b border-stone-200",children:"Shortcut"})]})}),k.jsxs("tbody",{children:[t.map((i,s)=>k.jsxs("tr",{className:`transition-colors ${s%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50`,children:[k.jsx("td",{className:"p-3 text-gray-800 font-medium",children:i.label}),k.jsx("td",{className:"p-3 text-center font-mono text-gray-700",children:i.shortcut})]},i.id)),t.length===0&&k.jsx("tr",{children:k.jsx("td",{colSpan:2,className:"p-3 text-center text-gray-400",children:"No shortcuts found."})})]})]})})]})})}function JA(){const o=[{title:"What is the Selector Tool?",content:"The Selector Tool is the main tool for interacting with objects on the canvas. You can select, move, resize, group, and modify shapes, text, nodes, and images."},{title:"When to use",list:["Select one or multiple objects","Move or reposition elements","Resize objects","Group or ungroup items","Modify object properties"]},{title:"How to select objects",list:["Click to select a single object","Hold Shift to select multiple objects","Drag a selection box around multiple elements"]},{title:"Moving and resizing",list:["Drag selected objects to move them","Use arrow keys for precise movement","Resize with handles (hold Shift to maintain aspect ratio)","Hold Alt/Option to resize from center"]},{title:"Grouping and layering",list:["Ctrl/Cmd + G to group selected objects","Ctrl/Cmd + Shift + G to ungroup","Bring to front, send to back, or adjust layer order"]},{title:"Keyboard shortcuts",list:["V  Activate Selector Tool","Delete / Backspace  Remove selected object","Ctrl / Cmd + A  Select all","Ctrl / Cmd + D  Duplicate selection"]},{title:"Best practices",list:["Switch back to Selector Tool after drawing objects","Group related items to stay organized","Use alignment guides for clean layouts","Avoid excessive nesting of groups"]},{title:"Related tools",list:["Node Tool  for structured diagrams","Shape Builder  for visual blocks","Text Tool  for labels and descriptions","Hand Tool  for navigation without editing"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Selector Tool"}),k.jsx("p",{className:"text-gray-600",children:"Use the Selector Tool to select, move, resize, group, and organize objects on the canvas."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 p-5 rounded-xl shadow-sm hover:shadow-md transition-shadow space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}function eO(){const o=[{title:"What is the Text Tool?",content:"The Text Tool lets you add text elements to the canvas. You can use it for labels, titles, annotations, and descriptions inside your board."},{title:"When to use",list:["Label shapes, nodes, or diagram elements","Add explanations or notes","Create titles or section headings"]},{title:"How to add text",list:["Select the Text Tool from the toolbar","Click anywhere on the canvas","Type your text and press Enter or click outside to finish"]},{title:"Editing text",list:["Click on text to edit its content","Change font, size, color, or alignment from the toolbar","Resize the text box using the handles"]},{title:"Best practices",list:["Keep text short and clear","Use consistent font sizes and styles","Align text with related shapes or nodes"]},{title:"Keyboard shortcuts",list:["T  Activate Text Tool","Ctrl / Cmd + Z  Undo text changes","Delete / Backspace  Remove selected text"]},{title:"Related tools",list:["Selector Tool  Move and edit text","Node Tool  Structured elements with text","Shape Tool  Labeled shapes","Hand Tool  Navigate without editing"]}];return k.jsxs("div",{className:"space-y-8 p-6",children:[k.jsxs("header",{className:"space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Text Tool"}),k.jsx("p",{className:"text-gray-600",children:"Add labels, annotations, and descriptions to your canvas."})]}),o.map(e=>k.jsxs("section",{className:"bg-gray-50 rounded-xl p-5 shadow-sm space-y-2",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),e.content&&k.jsx("p",{className:"text-gray-700",children:e.content}),e.list&&k.jsx("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.list.map(t=>k.jsx("li",{children:t},t))})]},e.title))]})}const Ih=[{id:"selector",label:"Selector Tool",component:JA},{id:"pencil",label:"Pencil Tool",component:WA},{id:"node",label:"Node Tool",component:qA},{id:"hand",label:"Hand Tool",component:GA},{id:"shape-builder",label:"Shape Builder",component:KA},{id:"text",label:"Text Tool",component:eO},{id:"color-list",label:"Color List",component:XA},{id:"top-toolbar",label:"Top Toolbar",component:ZA},{id:"top-toolbar-advanced",label:"Top Toolbar Advanced",component:$A},{id:"command",label:"Shortcuts",component:QA}];function tO(){const[o,e]=fe.useState(Ih[0].id),[t,i]=fe.useState([]),s=Ih.find(u=>u.id===o)?.component,a=u=>{i(p=>p.includes(u)?p.filter(m=>m!==u):[...p,u])};return k.jsxs("div",{className:"flex h-full bg-gray-50 text-gray-800",children:[k.jsxs("aside",{className:"w-72 border-r border-gray-200 p-6 bg-white shadow-lg flex flex-col",children:[k.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-900",children:"Help Topics"}),k.jsx("input",{type:"text",placeholder:"Search topics...",className:"mb-4 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",onChange:u=>{const p=u.target.value.toLowerCase(),m=Ih.find(y=>y.label.toLowerCase().includes(p));m&&e(m.id)}}),k.jsx("ul",{className:"space-y-2 flex-1 overflow-y-auto",children:Ih.map(u=>k.jsx("li",{children:k.jsx("button",{className:`w-full text-left px-4 py-2 rounded-lg transition-colors duration-200 hover:bg-blue-100 hover:text-blue-900 ${u.id===o?"bg-blue-200 text-blue-900 font-semibold shadow-inner":"text-gray-700"}`,onClick:()=>e(u.id),children:u.label})},u.id))})]}),k.jsx("main",{className:"flex-1 overflow-y-auto p-8 bg-gray-50",children:k.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6 transition-all duration-300",children:s?k.jsx(s,{toggleSection:a,expandedSections:t}):k.jsx("p",{className:"text-gray-500",children:"Select a topic from the left."})})})]})}function iO(){const o=fe.useRef(null),[e,t]=fe.useState(0),[i,s]=fe.useState(!1),[a,u]=fe.useState(0),p=fe.useRef(0);return fe.useEffect(()=>{const m=o.current,y=m?.getContext("2d");if(!m||!y)return;const b=20,C=[{x:8*b,y:10*b},{x:7*b,y:10*b},{x:6*b,y:10*b}];let N=V(),E="RIGHT";function V(){return{x:Math.floor(Math.random()*(m.width/b))*b,y:Math.floor(Math.random()*(m.height/b))*b}}const L=ne=>{ne.key==="ArrowLeft"&&E!=="RIGHT"&&(E="LEFT"),ne.key==="ArrowUp"&&E!=="DOWN"&&(E="UP"),ne.key==="ArrowRight"&&E!=="LEFT"&&(E="RIGHT"),ne.key==="ArrowDown"&&E!=="UP"&&(E="DOWN")};document.addEventListener("keydown",L);const ee=()=>{y.fillStyle="#fdfdfd",y.fillRect(0,0,m.width,m.height);for(let Ee=0;Ee<C.length;Ee++)y.fillStyle=Ee===0?"#2ecc71":"#27ae60",y.fillRect(C[Ee].x,C[Ee].y,b,b),y.strokeStyle="#ecf0f1",y.strokeRect(C[Ee].x,C[Ee].y,b,b);y.fillStyle="#e74c3c",y.fillRect(N.x,N.y,b,b);let ne=C[0].x,de=C[0].y;E==="LEFT"&&(ne-=b),E==="UP"&&(de-=b),E==="RIGHT"&&(ne+=b),E==="DOWN"&&(de+=b),ne===N.x&&de===N.y?(p.current+=1,t(p.current),N=V()):C.pop();const I={x:ne,y:de};(ne<0||de<0||ne>=m.width||de>=m.height||G(I,C))&&(s(!0),clearInterval(te),document.removeEventListener("keydown",L)),C.unshift(I),y.fillStyle="#2c3e50",y.font="18px Arial",y.fillText("Score: "+p.current,b,b)},G=(ne,de)=>{for(let be=0;be<de.length;be++)if(ne.x===de[be].x&&ne.y===de[be].y)return!0;return!1},te=setInterval(ee,100);return()=>{clearInterval(te),document.removeEventListener("keydown",L)}},[a]),k.jsxs("div",{className:"flex flex-col items-center p-6 font-sans m-4",children:[k.jsx("h1",{className:"text-7xl font-bold text-red-600",children:"404"}),k.jsx("p",{className:"m-4 text-lg text-gray-700",children:"Oops! Page not found."}),i?k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsxs("p",{className:"text-xl text-red-600 font-semibold m-4",children:[" Game Over! Final Score: ",e]}),k.jsx("button",{onClick:()=>{t(0),p.current=0,s(!1),u(m=>m+1)},className:"mt-4 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-800",children:" Restart Game"})]}):k.jsx("canvas",{ref:o,width:600,height:400,className:"border border-gray-400 rounded shadow"},a),k.jsx(zp,{to:"/",className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-800 transition",children:"Go Back Home"})]})}function nO(){return k.jsx(bw,{basename:"/",children:k.jsxs(Z2,{children:[k.jsxs(Vr,{element:k.jsx(w3,{}),children:[k.jsx(Vr,{path:"/",element:k.jsx(T3,{})}),k.jsx(Vr,{path:"/draw",element:k.jsx(MA,{})}),k.jsx(Vr,{path:"/setting",element:k.jsx(PA,{})}),k.jsx(Vr,{path:"/command-palette",element:k.jsx(HA,{commands:b0})}),k.jsx(Vr,{path:"/share/:docId",element:k.jsx(YA,{})}),k.jsx(Vr,{path:"/help",element:k.jsx(tO,{})})]}),k.jsx(Vr,{path:"*",element:k.jsx(iO,{})})]})})}function sO(){return k.jsx(nO,{})}WS.createRoot(document.getElementById("fateboard")).render(k.jsx(fe.StrictMode,{children:k.jsx(sO,{})}));
