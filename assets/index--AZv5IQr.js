(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function J_(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Dx(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var t=l.default;if(typeof t=="function"){var e=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(l).forEach(function(n){var a=Object.getOwnPropertyDescriptor(l,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return l[n]}})}),e}var dg={exports:{}},ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function jx(){if(Pv)return ou;Pv=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var d=null;if(o!==void 0&&(d=""+o),a.key!==void 0&&(d=""+a.key),"key"in a){o={};for(var p in a)p!=="key"&&(o[p]=a[p])}else o=a;return a=o.ref,{$$typeof:l,type:n,key:d,ref:a!==void 0?a:null,props:o}}return ou.Fragment=t,ou.jsx=e,ou.jsxs=e,ou}var Nv;function Rx(){return Nv||(Nv=1,dg.exports=jx()),dg.exports}var J=Rx(),gg={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function Lx(){if(Bv)return Ne;Bv=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.iterator;function F(ft){return ft===null||typeof ft!="object"?null:(ft=M&&ft[M]||ft["@@iterator"],typeof ft=="function"?ft:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,z={};function it(ft,Ut,ue){this.props=ft,this.context=Ut,this.refs=z,this.updater=ue||E}it.prototype.isReactComponent={},it.prototype.setState=function(ft,Ut){if(typeof ft!="object"&&typeof ft!="function"&&ft!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ft,Ut,"setState")},it.prototype.forceUpdate=function(ft){this.updater.enqueueForceUpdate(this,ft,"forceUpdate")};function $(){}$.prototype=it.prototype;function lt(ft,Ut,ue){this.props=ft,this.context=Ut,this.refs=z,this.updater=ue||E}var gt=lt.prototype=new $;gt.constructor=lt,X(gt,it.prototype),gt.isPureReactComponent=!0;var kt=Array.isArray,St={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function Jt(ft,Ut,ue,ee,fe,ge){return ue=ge.ref,{$$typeof:l,type:ft,key:Ut,ref:ue!==void 0?ue:null,props:ge}}function Wt(ft,Ut){return Jt(ft.type,Ut,void 0,void 0,void 0,ft.props)}function Zt(ft){return typeof ft=="object"&&ft!==null&&ft.$$typeof===l}function he(ft){var Ut={"=":"=0",":":"=2"};return"$"+ft.replace(/[=:]/g,function(ue){return Ut[ue]})}var Pt=/\/+/g;function Yt(ft,Ut){return typeof ft=="object"&&ft!==null&&ft.key!=null?he(""+ft.key):Ut.toString(36)}function _e(){}function Xt(ft){switch(ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason;default:switch(typeof ft.status=="string"?ft.then(_e,_e):(ft.status="pending",ft.then(function(Ut){ft.status==="pending"&&(ft.status="fulfilled",ft.value=Ut)},function(Ut){ft.status==="pending"&&(ft.status="rejected",ft.reason=Ut)})),ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason}}throw ft}function Re(ft,Ut,ue,ee,fe){var ge=typeof ft;(ge==="undefined"||ge==="boolean")&&(ft=null);var pe=!1;if(ft===null)pe=!0;else switch(ge){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(ft.$$typeof){case l:case t:pe=!0;break;case C:return pe=ft._init,Re(pe(ft._payload),Ut,ue,ee,fe)}}if(pe)return fe=fe(ft),pe=ee===""?"."+Yt(ft,0):ee,kt(fe)?(ue="",pe!=null&&(ue=pe.replace(Pt,"$&/")+"/"),Re(fe,Ut,ue,"",function(Be){return Be})):fe!=null&&(Zt(fe)&&(fe=Wt(fe,ue+(fe.key==null||ft&&ft.key===fe.key?"":(""+fe.key).replace(Pt,"$&/")+"/")+pe)),Ut.push(fe)),1;pe=0;var vi=ee===""?".":ee+":";if(kt(ft))for(var Ze=0;Ze<ft.length;Ze++)ee=ft[Ze],ge=vi+Yt(ee,Ze),pe+=Re(ee,Ut,ue,ge,fe);else if(Ze=F(ft),typeof Ze=="function")for(ft=Ze.call(ft),Ze=0;!(ee=ft.next()).done;)ee=ee.value,ge=vi+Yt(ee,Ze++),pe+=Re(ee,Ut,ue,ge,fe);else if(ge==="object"){if(typeof ft.then=="function")return Re(Xt(ft),Ut,ue,ee,fe);throw Ut=String(ft),Error("Objects are not valid as a React child (found: "+(Ut==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":Ut)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ut(ft,Ut,ue){if(ft==null)return ft;var ee=[],fe=0;return Re(ft,ee,"","",function(ge){return Ut.call(ue,ge,fe++)}),ee}function Gt(ft){if(ft._status===-1){var Ut=ft._result;Ut=Ut(),Ut.then(function(ue){(ft._status===0||ft._status===-1)&&(ft._status=1,ft._result=ue)},function(ue){(ft._status===0||ft._status===-1)&&(ft._status=2,ft._result=ue)}),ft._status===-1&&(ft._status=0,ft._result=Ut)}if(ft._status===1)return ft._result.default;throw ft._result}var re=typeof reportError=="function"?reportError:function(ft){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ft=="object"&&ft!==null&&typeof ft.message=="string"?String(ft.message):String(ft),error:ft});if(!window.dispatchEvent(Ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ft);return}console.error(ft)};function le(){}return Ne.Children={map:ut,forEach:function(ft,Ut,ue){ut(ft,function(){Ut.apply(this,arguments)},ue)},count:function(ft){var Ut=0;return ut(ft,function(){Ut++}),Ut},toArray:function(ft){return ut(ft,function(Ut){return Ut})||[]},only:function(ft){if(!Zt(ft))throw Error("React.Children.only expected to receive a single React element child.");return ft}},Ne.Component=it,Ne.Fragment=e,Ne.Profiler=a,Ne.PureComponent=lt,Ne.StrictMode=n,Ne.Suspense=v,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(ft){return St.H.useMemoCache(ft)}},Ne.cache=function(ft){return function(){return ft.apply(null,arguments)}},Ne.cloneElement=function(ft,Ut,ue){if(ft==null)throw Error("The argument must be a React element, but you passed "+ft+".");var ee=X({},ft.props),fe=ft.key,ge=void 0;if(Ut!=null)for(pe in Ut.ref!==void 0&&(ge=void 0),Ut.key!==void 0&&(fe=""+Ut.key),Ut)!V.call(Ut,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Ut.ref===void 0||(ee[pe]=Ut[pe]);var pe=arguments.length-2;if(pe===1)ee.children=ue;else if(1<pe){for(var vi=Array(pe),Ze=0;Ze<pe;Ze++)vi[Ze]=arguments[Ze+2];ee.children=vi}return Jt(ft.type,fe,void 0,void 0,ge,ee)},Ne.createContext=function(ft){return ft={$$typeof:d,_currentValue:ft,_currentValue2:ft,_threadCount:0,Provider:null,Consumer:null},ft.Provider=ft,ft.Consumer={$$typeof:o,_context:ft},ft},Ne.createElement=function(ft,Ut,ue){var ee,fe={},ge=null;if(Ut!=null)for(ee in Ut.key!==void 0&&(ge=""+Ut.key),Ut)V.call(Ut,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=Ut[ee]);var pe=arguments.length-2;if(pe===1)fe.children=ue;else if(1<pe){for(var vi=Array(pe),Ze=0;Ze<pe;Ze++)vi[Ze]=arguments[Ze+2];fe.children=vi}if(ft&&ft.defaultProps)for(ee in pe=ft.defaultProps,pe)fe[ee]===void 0&&(fe[ee]=pe[ee]);return Jt(ft,ge,void 0,void 0,null,fe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(ft){return{$$typeof:p,render:ft}},Ne.isValidElement=Zt,Ne.lazy=function(ft){return{$$typeof:C,_payload:{_status:-1,_result:ft},_init:Gt}},Ne.memo=function(ft,Ut){return{$$typeof:b,type:ft,compare:Ut===void 0?null:Ut}},Ne.startTransition=function(ft){var Ut=St.T,ue={};St.T=ue;try{var ee=ft(),fe=St.S;fe!==null&&fe(ue,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(le,re)}catch(ge){re(ge)}finally{St.T=Ut}},Ne.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()},Ne.use=function(ft){return St.H.use(ft)},Ne.useActionState=function(ft,Ut,ue){return St.H.useActionState(ft,Ut,ue)},Ne.useCallback=function(ft,Ut){return St.H.useCallback(ft,Ut)},Ne.useContext=function(ft){return St.H.useContext(ft)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(ft,Ut){return St.H.useDeferredValue(ft,Ut)},Ne.useEffect=function(ft,Ut,ue){var ee=St.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(ft,Ut)},Ne.useId=function(){return St.H.useId()},Ne.useImperativeHandle=function(ft,Ut,ue){return St.H.useImperativeHandle(ft,Ut,ue)},Ne.useInsertionEffect=function(ft,Ut){return St.H.useInsertionEffect(ft,Ut)},Ne.useLayoutEffect=function(ft,Ut){return St.H.useLayoutEffect(ft,Ut)},Ne.useMemo=function(ft,Ut){return St.H.useMemo(ft,Ut)},Ne.useOptimistic=function(ft,Ut){return St.H.useOptimistic(ft,Ut)},Ne.useReducer=function(ft,Ut,ue){return St.H.useReducer(ft,Ut,ue)},Ne.useRef=function(ft){return St.H.useRef(ft)},Ne.useState=function(ft){return St.H.useState(ft)},Ne.useSyncExternalStore=function(ft,Ut,ue){return St.H.useSyncExternalStore(ft,Ut,ue)},Ne.useTransition=function(){return St.H.useTransition()},Ne.version="19.1.0",Ne}var zv;function i0(){return zv||(zv=1,gg.exports=Lx()),gg.exports}var Dt=i0();const fh=J_(Dt);var pg={exports:{}},lu={},mg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function Px(){return Fv||(Fv=1,function(l){function t(ut,Gt){var re=ut.length;ut.push(Gt);t:for(;0<re;){var le=re-1>>>1,ft=ut[le];if(0<a(ft,Gt))ut[le]=Gt,ut[re]=ft,re=le;else break t}}function e(ut){return ut.length===0?null:ut[0]}function n(ut){if(ut.length===0)return null;var Gt=ut[0],re=ut.pop();if(re!==Gt){ut[0]=re;t:for(var le=0,ft=ut.length,Ut=ft>>>1;le<Ut;){var ue=2*(le+1)-1,ee=ut[ue],fe=ue+1,ge=ut[fe];if(0>a(ee,re))fe<ft&&0>a(ge,ee)?(ut[le]=ge,ut[fe]=re,le=fe):(ut[le]=ee,ut[ue]=re,le=ue);else if(fe<ft&&0>a(ge,re))ut[le]=ge,ut[fe]=re,le=fe;else break t}}return Gt}function a(ut,Gt){var re=ut.sortIndex-Gt.sortIndex;return re!==0?re:ut.id-Gt.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;l.unstable_now=function(){return o.now()}}else{var d=Date,p=d.now();l.unstable_now=function(){return d.now()-p}}var v=[],b=[],C=1,M=null,F=3,E=!1,X=!1,z=!1,it=!1,$=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;function kt(ut){for(var Gt=e(b);Gt!==null;){if(Gt.callback===null)n(b);else if(Gt.startTime<=ut)n(b),Gt.sortIndex=Gt.expirationTime,t(v,Gt);else break;Gt=e(b)}}function St(ut){if(z=!1,kt(ut),!X)if(e(v)!==null)X=!0,V||(V=!0,Yt());else{var Gt=e(b);Gt!==null&&Re(St,Gt.startTime-ut)}}var V=!1,Jt=-1,Wt=5,Zt=-1;function he(){return it?!0:!(l.unstable_now()-Zt<Wt)}function Pt(){if(it=!1,V){var ut=l.unstable_now();Zt=ut;var Gt=!0;try{t:{X=!1,z&&(z=!1,lt(Jt),Jt=-1),E=!0;var re=F;try{e:{for(kt(ut),M=e(v);M!==null&&!(M.expirationTime>ut&&he());){var le=M.callback;if(typeof le=="function"){M.callback=null,F=M.priorityLevel;var ft=le(M.expirationTime<=ut);if(ut=l.unstable_now(),typeof ft=="function"){M.callback=ft,kt(ut),Gt=!0;break e}M===e(v)&&n(v),kt(ut)}else n(v);M=e(v)}if(M!==null)Gt=!0;else{var Ut=e(b);Ut!==null&&Re(St,Ut.startTime-ut),Gt=!1}}break t}finally{M=null,F=re,E=!1}Gt=void 0}}finally{Gt?Yt():V=!1}}}var Yt;if(typeof gt=="function")Yt=function(){gt(Pt)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Xt=_e.port2;_e.port1.onmessage=Pt,Yt=function(){Xt.postMessage(null)}}else Yt=function(){$(Pt,0)};function Re(ut,Gt){Jt=$(function(){ut(l.unstable_now())},Gt)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(ut){ut.callback=null},l.unstable_forceFrameRate=function(ut){0>ut||125<ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Wt=0<ut?Math.floor(1e3/ut):5},l.unstable_getCurrentPriorityLevel=function(){return F},l.unstable_next=function(ut){switch(F){case 1:case 2:case 3:var Gt=3;break;default:Gt=F}var re=F;F=Gt;try{return ut()}finally{F=re}},l.unstable_requestPaint=function(){it=!0},l.unstable_runWithPriority=function(ut,Gt){switch(ut){case 1:case 2:case 3:case 4:case 5:break;default:ut=3}var re=F;F=ut;try{return Gt()}finally{F=re}},l.unstable_scheduleCallback=function(ut,Gt,re){var le=l.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?le+re:le):re=le,ut){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=re+ft,ut={id:C++,callback:Gt,priorityLevel:ut,startTime:re,expirationTime:ft,sortIndex:-1},re>le?(ut.sortIndex=re,t(b,ut),e(v)===null&&ut===e(b)&&(z?(lt(Jt),Jt=-1):z=!0,Re(St,re-le))):(ut.sortIndex=ft,t(v,ut),X||E||(X=!0,V||(V=!0,Yt()))),ut},l.unstable_shouldYield=he,l.unstable_wrapCallback=function(ut){var Gt=F;return function(){var re=F;F=Gt;try{return ut.apply(this,arguments)}finally{F=re}}}}(vg)),vg}var Iv;function Nx(){return Iv||(Iv=1,mg.exports=Px()),mg.exports}var _g={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function Bx(){if(Vv)return gn;Vv=1;var l=i0();function t(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(v,b,C){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:M==null?null:""+M,children:v,containerInfo:b,implementation:C}}var d=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,gn.createPortal=function(v,b){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(t(299));return o(v,b,null,C)},gn.flushSync=function(v){var b=d.T,C=n.p;try{if(d.T=null,n.p=2,v)return v()}finally{d.T=b,n.p=C,n.d.f()}},gn.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,n.d.C(v,b))},gn.prefetchDNS=function(v){typeof v=="string"&&n.d.D(v)},gn.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var C=b.as,M=p(C,b.crossOrigin),F=typeof b.integrity=="string"?b.integrity:void 0,E=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;C==="style"?n.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:M,integrity:F,fetchPriority:E}):C==="script"&&n.d.X(v,{crossOrigin:M,integrity:F,fetchPriority:E,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},gn.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var C=p(b.as,b.crossOrigin);n.d.M(v,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&n.d.M(v)},gn.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var C=b.as,M=p(C,b.crossOrigin);n.d.L(v,C,{crossOrigin:M,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},gn.preloadModule=function(v,b){if(typeof v=="string")if(b){var C=p(b.as,b.crossOrigin);n.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else n.d.m(v)},gn.requestFormReset=function(v){n.d.r(v)},gn.unstable_batchedUpdates=function(v,b){return v(b)},gn.useFormState=function(v,b,C){return d.H.useFormState(v,b,C)},gn.useFormStatus=function(){return d.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var Uv;function $_(){if(Uv)return _g.exports;Uv=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),_g.exports=Bx(),_g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function zx(){if(Hv)return lu;Hv=1;var l=Nx(),t=i0(),e=$_();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,u=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(u=r.return),i=r.return;while(i)}return r.tag===3?u:null}function d(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(o(i)!==i)throw Error(n(188))}function v(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var u=i,g=r;;){var _=u.return;if(_===null)break;var w=_.alternate;if(w===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===u)return p(_),i;if(w===g)return p(_),r;w=w.sibling}throw Error(n(188))}if(u.return!==g.return)u=_,g=w;else{for(var H=!1,tt=_.child;tt;){if(tt===u){H=!0,u=_,g=w;break}if(tt===g){H=!0,g=_,u=w;break}tt=tt.sibling}if(!H){for(tt=w.child;tt;){if(tt===u){H=!0,u=w,g=_;break}if(tt===g){H=!0,g=w,u=_;break}tt=tt.sibling}if(!H)throw Error(n(189))}}if(u.alternate!==g)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var C=Object.assign,M=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),it=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),lt=Symbol.for("react.consumer"),gt=Symbol.for("react.context"),kt=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),Zt=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Pt=Symbol.iterator;function Yt(i){return i===null||typeof i!="object"?null:(i=Pt&&i[Pt]||i["@@iterator"],typeof i=="function"?i:null)}var _e=Symbol.for("react.client.reference");function Xt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===_e?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case X:return"Fragment";case it:return"Profiler";case z:return"StrictMode";case St:return"Suspense";case V:return"SuspenseList";case Zt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case gt:return(i.displayName||"Context")+".Provider";case lt:return(i._context.displayName||"Context")+".Consumer";case kt:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Jt:return r=i.displayName||null,r!==null?r:Xt(i.type)||"Memo";case Wt:r=i._payload,i=i._init;try{return Xt(i(r))}catch{}}return null}var Re=Array.isArray,ut=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Gt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},le=[],ft=-1;function Ut(i){return{current:i}}function ue(i){0>ft||(i.current=le[ft],le[ft]=null,ft--)}function ee(i,r){ft++,le[ft]=i.current,i.current=r}var fe=Ut(null),ge=Ut(null),pe=Ut(null),vi=Ut(null);function Ze(i,r){switch(ee(pe,r),ee(ge,i),ee(fe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?uv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=uv(r),i=cv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ue(fe),ee(fe,i)}function Be(){ue(fe),ue(ge),ue(pe)}function ze(i){i.memoizedState!==null&&ee(vi,i);var r=fe.current,u=cv(r,i.type);r!==u&&(ee(ge,i),ee(fe,u))}function $e(i){ge.current===i&&(ue(fe),ue(ge)),vi.current===i&&(ue(vi),iu._currentValue=re)}var Rs=Object.prototype.hasOwnProperty,tr=l.unstable_scheduleCallback,Ls=l.unstable_cancelCallback,ts=l.unstable_shouldYield,ho=l.unstable_requestPaint,Fi=l.unstable_now,es=l.unstable_getCurrentPriorityLevel,is=l.unstable_ImmediatePriority,ns=l.unstable_UserBlockingPriority,ri=l.unstable_NormalPriority,rs=l.unstable_LowPriority,Ye=l.unstable_IdlePriority,Ta=l.log,Le=l.unstable_setDisableYieldValue,s=null,c=null;function f(i){if(typeof Ta=="function"&&Le(i),c&&typeof c.setStrictMode=="function")try{c.setStrictMode(s,i)}catch{}}var m=Math.clz32?Math.clz32:T,y=Math.log,S=Math.LN2;function T(i){return i>>>=0,i===0?32:31-(y(i)/S|0)|0}var k=256,O=4194304;function A(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function N(i,r,u){var g=i.pendingLanes;if(g===0)return 0;var _=0,w=i.suspendedLanes,H=i.pingedLanes;i=i.warmLanes;var tt=g&134217727;return tt!==0?(g=tt&~w,g!==0?_=A(g):(H&=tt,H!==0?_=A(H):u||(u=tt&~i,u!==0&&(_=A(u))))):(tt=g&~w,tt!==0?_=A(tt):H!==0?_=A(H):u||(u=g&~i,u!==0&&(_=A(u)))),_===0?0:r!==0&&r!==_&&(r&w)===0&&(w=_&-_,u=r&-r,w>=u||w===32&&(u&4194048)!==0)?r:_}function B(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function R(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j(){var i=k;return k<<=1,(k&4194048)===0&&(k=256),i}function Z(){var i=O;return O<<=1,(O&62914560)===0&&(O=4194304),i}function I(i){for(var r=[],u=0;31>u;u++)r.push(i);return r}function q(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function P(i,r,u,g,_,w){var H=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var tt=i.entanglements,ht=i.expirationTimes,Mt=i.hiddenUpdates;for(u=H&~u;0<u;){var zt=31-m(u),Ht=1<<zt;tt[zt]=0,ht[zt]=-1;var Rt=Mt[zt];if(Rt!==null)for(Mt[zt]=null,zt=0;zt<Rt.length;zt++){var Lt=Rt[zt];Lt!==null&&(Lt.lane&=-536870913)}u&=~Ht}g!==0&&Y(i,g,0),w!==0&&_===0&&i.tag!==0&&(i.suspendedLanes|=w&~(H&~r))}function Y(i,r,u){i.pendingLanes|=r,i.suspendedLanes&=~r;var g=31-m(r);i.entangledLanes|=r,i.entanglements[g]=i.entanglements[g]|1073741824|u&4194090}function D(i,r){var u=i.entangledLanes|=r;for(i=i.entanglements;u;){var g=31-m(u),_=1<<g;_&r|i[g]&r&&(i[g]|=r),u&=~_}}function U(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function K(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Q(){var i=Gt.p;return i!==0?i:(i=window.event,i===void 0?32:Ev(i.type))}function W(i,r){var u=Gt.p;try{return Gt.p=i,r()}finally{Gt.p=u}}var et=Math.random().toString(36).slice(2),nt="__reactFiber$"+et,at="__reactProps$"+et,dt="__reactContainer$"+et,rt="__reactEvents$"+et,ct="__reactListeners$"+et,pt="__reactHandles$"+et,bt="__reactResources$"+et,xt="__reactMarker$"+et;function Ot(i){delete i[nt],delete i[at],delete i[rt],delete i[ct],delete i[pt]}function It(i){var r=i[nt];if(r)return r;for(var u=i.parentNode;u;){if(r=u[dt]||u[nt]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(i=gv(i);i!==null;){if(u=i[nt])return u;i=gv(i)}return r}i=u,u=i.parentNode}return null}function qt(i){if(i=i[nt]||i[dt]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function $t(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function se(i){var r=i[bt];return r||(r=i[bt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function jt(i){i[xt]=!0}var Bt=new Set,ie={};function ae(i,r){oe(i,r),oe(i+"Capture",r)}function oe(i,r){for(ie[i]=r,i=0;i<r.length;i++)Bt.add(r[i])}var be=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),me={},we={};function Me(i){return Rs.call(we,i)?!0:Rs.call(me,i)?!1:be.test(i)?we[i]=!0:(me[i]=!0,!1)}function xe(i,r,u){if(Me(r))if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var g=r.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+u)}}function di(i,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+u)}}function We(i,r,u,g){if(g===null)i.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(r,u,""+g)}}var yi,gi;function Kt(i){if(yi===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);yi=r&&r[1]||"",gi=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yi+i+gi}var ei=!1;function si(i,r){if(!i||ei)return"";ei=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(r){var Ht=function(){throw Error()};if(Object.defineProperty(Ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ht,[])}catch(Lt){var Rt=Lt}Reflect.construct(i,[],Ht)}else{try{Ht.call()}catch(Lt){Rt=Lt}i.call(Ht.prototype)}}else{try{throw Error()}catch(Lt){Rt=Lt}(Ht=i())&&typeof Ht.catch=="function"&&Ht.catch(function(){})}}catch(Lt){if(Lt&&Rt&&typeof Lt.stack=="string")return[Lt.stack,Rt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),H=w[0],tt=w[1];if(H&&tt){var ht=H.split(`
`),Mt=tt.split(`
`);for(_=g=0;g<ht.length&&!ht[g].includes("DetermineComponentFrameRoot");)g++;for(;_<Mt.length&&!Mt[_].includes("DetermineComponentFrameRoot");)_++;if(g===ht.length||_===Mt.length)for(g=ht.length-1,_=Mt.length-1;1<=g&&0<=_&&ht[g]!==Mt[_];)_--;for(;1<=g&&0<=_;g--,_--)if(ht[g]!==Mt[_]){if(g!==1||_!==1)do if(g--,_--,0>_||ht[g]!==Mt[_]){var zt=`
`+ht[g].replace(" at new "," at ");return i.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",i.displayName)),zt}while(1<=g&&0<=_);break}}}finally{ei=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Kt(u):""}function wi(i){switch(i.tag){case 26:case 27:case 5:return Kt(i.type);case 16:return Kt("Lazy");case 13:return Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return si(i.type,!1);case 11:return si(i.type.render,!1);case 1:return si(i.type,!0);case 31:return Kt("Activity");default:return""}}function en(i){try{var r="";do r+=wi(i),i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function bi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cn(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _n(i){var r=cn(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),g=""+i[r];if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,w=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return _.call(this)},set:function(H){g=""+H,w.call(this,H)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(H){g=""+H},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ai(i){i._valueTracker||(i._valueTracker=_n(i))}function Zi(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var u=r.getValue(),g="";return i&&(g=cn(i)?i.checked?"true":"false":i.value),i=g,i!==u?(r.setValue(i),!0):!1}function hn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ci=/[\n"\\]/g;function ii(i){return i.replace(Ci,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ps(i,r,u,g,_,w,H,tt){i.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.type=H:i.removeAttribute("type"),r!=null?H==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+bi(r)):i.value!==""+bi(r)&&(i.value=""+bi(r)):H!=="submit"&&H!=="reset"||i.removeAttribute("value"),r!=null?Bs(i,H,bi(r)):u!=null?Bs(i,H,bi(u)):g!=null&&i.removeAttribute("value"),_==null&&w!=null&&(i.defaultChecked=!!w),_!=null&&(i.checked=_&&typeof _!="function"&&typeof _!="symbol"),tt!=null&&typeof tt!="function"&&typeof tt!="symbol"&&typeof tt!="boolean"?i.name=""+bi(tt):i.removeAttribute("name")}function Ns(i,r,u,g,_,w,H,tt){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),r!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||r!=null))return;u=u!=null?""+bi(u):"",r=r!=null?""+bi(r):u,tt||r===i.value||(i.value=r),i.defaultValue=r}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=tt?i.checked:!!g,i.defaultChecked=!!g,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(i.name=H)}function Bs(i,r,u){r==="number"&&hn(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function vr(i,r,u,g){if(i=i.options,r){r={};for(var _=0;_<u.length;_++)r["$"+u[_]]=!0;for(u=0;u<i.length;u++)_=r.hasOwnProperty("$"+i[u].value),i[u].selected!==_&&(i[u].selected=_),_&&g&&(i[u].defaultSelected=!0)}else{for(u=""+bi(u),r=null,_=0;_<i.length;_++){if(i[_].value===u){i[_].selected=!0,g&&(i[_].defaultSelected=!0);return}r!==null||i[_].disabled||(r=i[_])}r!==null&&(r.selected=!0)}}function ka(i,r,u){if(r!=null&&(r=""+bi(r),r!==i.value&&(i.value=r),u==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=u!=null?""+bi(u):""}function ss(i,r,u,g){if(r==null){if(g!=null){if(u!=null)throw Error(n(92));if(Re(g)){if(1<g.length)throw Error(n(93));g=g[0]}u=g}u==null&&(u=""),r=u}u=bi(r),i.defaultValue=u,g=i.textContent,g===u&&g!==""&&g!==null&&(i.value=g)}function yn(i,r){if(r){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=r;return}}i.textContent=r}var as=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dr(i,r,u){var g=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":g?i.setProperty(r,u):typeof u!="number"||u===0||as.has(r)?r==="float"?i.cssFloat=u:i[r]=(""+u).trim():i[r]=u+"px"}function er(i,r,u){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||r!=null&&r.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var _ in r)g=r[_],r.hasOwnProperty(_)&&u[_]!==g&&Dr(i,_,g)}else for(var w in r)r.hasOwnProperty(w)&&Dr(i,w,r[w])}function fn(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nn(i){return bn.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var rn=null;function Hn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ir=null,nr=null;function zs(i){var r=qt(i);if(r&&(i=r.stateNode)){var u=i[at]||null;t:switch(i=r.stateNode,r.type){case"input":if(Ps(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ii(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var g=u[r];if(g!==i&&g.form===i.form){var _=g[at]||null;if(!_)throw Error(n(90));Ps(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<u.length;r++)g=u[r],g.form===i.form&&Zi(g)}break t;case"textarea":ka(i,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&vr(i,!!u.multiple,r,!1)}}}var h=!1;function x(i,r,u){if(h)return i(r,u);h=!0;try{var g=i(r);return g}finally{if(h=!1,(ir!==null||nr!==null)&&(Xc(),ir&&(r=ir,i=nr,nr=ir=null,zs(r),i)))for(r=0;r<i.length;r++)zs(i[r])}}function L(i,r){var u=i.stateNode;if(u===null)return null;var g=u[at]||null;if(g===null)return null;u=g[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,r,typeof u));return u}var G=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),st=!1;if(G)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){st=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{st=!1}var Et=null,Qt=null,te=null;function Se(){if(te)return te;var i,r=Qt,u=r.length,g,_="value"in Et?Et.value:Et.textContent,w=_.length;for(i=0;i<u&&r[i]===_[i];i++);var H=u-i;for(g=1;g<=H&&r[u-g]===_[w-g];g++);return te=_.slice(i,1<g?1-g:void 0)}function De(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ke(){return!0}function Li(){return!1}function Ei(i){function r(u,g,_,w,H){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=w,this.target=H,this.currentTarget=null;for(var tt in i)i.hasOwnProperty(tt)&&(u=i[tt],this[tt]=u?u(w):w[tt]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ke:Li,this.isPropagationStopped=Li,this}return C(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ke)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ke)},persist:function(){},isPersistent:Ke}),r}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=Ei(sn),jn=C({},sn,{view:0,detail:0}),jr=Ei(jn),fo,Fs,Oa,go=C({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oa&&(Oa&&i.type==="mousemove"?(fo=i.screenX-Oa.screenX,Fs=i.screenY-Oa.screenY):Fs=fo=0,Oa=i),fo)},movementY:function(i){return"movementY"in i?i.movementY:Fs}}),dl=Ei(go),vf=C({},go,{dataTransfer:0}),ic=Ei(vf),_f=C({},jn,{relatedTarget:0}),Is=Ei(_f),Vs=C({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),po=Ei(Vs),nc=C({},sn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),os=Ei(nc),rc=C({},sn,{data:0}),Pi=Ei(rc),yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bf(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Us[i])?!!r[i]:!1}function pl(){return bf}var xf=C({},jn,{key:function(i){if(i.key){var r=yf[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=De(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pl,charCode:function(i){return i.type==="keypress"?De(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?De(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Sf=Ei(xf),wf=C({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Ei(wf),Cf=C({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pl}),Tf=Ei(Cf),kf=C({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ls=Ei(kf),Ii=C({},go,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=Ei(Ii),Aa=C({},sn,{newState:0,oldState:0}),Of=Ei(Aa),oc=[9,13,27,32],ml=G&&"CompositionEvent"in window,Rr=null;G&&"documentMode"in document&&(Rr=document.documentMode);var Hs=G&&"TextEvent"in window&&!Rr,vl=G&&(!ml||Rr&&8<Rr&&11>=Rr),_l=" ",He=!1;function mo(i,r){switch(i){case"keyup":return oc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var us=!1;function Gi(i,r){switch(i){case"compositionend":return yl(r);case"keypress":return r.which!==32?null:(He=!0,_l);case"textInput":return i=r.data,i===_l&&He?null:i;default:return null}}function Lr(i,r){if(us)return i==="compositionend"||!ml&&mo(i,r)?(i=Se(),te=Qt=Et=null,us=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return vl&&r.locale!=="ko"?null:r.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vo(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Pe[i.type]:r==="textarea"}function pi(i,r,u,g){ir?nr?nr.push(g):nr=[g]:ir=g,r=Qc(r,"onChange"),0<r.length&&(u=new xn("onChange","change",null,u,g),i.push({event:u,listeners:r}))}var Pr=null,Yn=null;function Mi(i){rv(i,0)}function Rn(i){var r=$t(i);if(Zi(r))return i}function Ea(i,r){if(i==="change")return r}var lc=!1;if(G){var Ma;if(G){var bl="oninput"in document;if(!bl){var Ln=document.createElement("div");Ln.setAttribute("oninput","return;"),bl=typeof Ln.oninput=="function"}Ma=bl}else Ma=!1;lc=Ma&&(!document.documentMode||9<document.documentMode)}function Ys(){Pr&&(Pr.detachEvent("onpropertychange",Xs),Yn=Pr=null)}function Xs(i){if(i.propertyName==="value"&&Rn(Yn)){var r=[];pi(r,Yn,i,Hn(i)),x(Mi,r)}}function xl(i,r,u){i==="focusin"?(Ys(),Pr=r,Yn=u,Pr.attachEvent("onpropertychange",Xs)):i==="focusout"&&Ys()}function uc(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rn(Yn)}function cc(i,r){if(i==="click")return Rn(r)}function Ki(i,r){if(i==="input"||i==="change")return Rn(r)}function Sl(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Sn=typeof Object.is=="function"?Object.is:Sl;function Da(i,r){if(Sn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var u=Object.keys(i),g=Object.keys(r);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!Rs.call(r,_)||!Sn(i[_],r[_]))return!1}return!0}function _o(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yo(i,r){var u=_o(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=r&&g>=r)return{node:u,offset:r-i};i=g}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=_o(u)}}function hc(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?hc(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Gs(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=hn(i.document);r instanceof i.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)i=r.contentWindow;else break;r=hn(i.document)}return r}function ja(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Af=G&&"documentMode"in document&&11>=document.documentMode,qs=null,bo=null,cs=null,Ra=!1;function _r(i,r,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ra||qs==null||qs!==hn(g)||(g=qs,"selectionStart"in g&&ja(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),cs&&Da(cs,g)||(cs=g,g=Qc(bo,"onSelect"),0<g.length&&(r=new xn("onSelect","select",null,r,u),i.push({event:r,listeners:g}),r.target=qs)))}function ot(i,r){var u={};return u[i.toLowerCase()]=r.toLowerCase(),u["Webkit"+i]="webkit"+r,u["Moz"+i]="moz"+r,u}var mt={animationend:ot("Animation","AnimationEnd"),animationiteration:ot("Animation","AnimationIteration"),animationstart:ot("Animation","AnimationStart"),transitionrun:ot("Transition","TransitionRun"),transitionstart:ot("Transition","TransitionStart"),transitioncancel:ot("Transition","TransitionCancel"),transitionend:ot("Transition","TransitionEnd")},Nt={},Ft={};G&&(Ft=document.createElement("div").style,"AnimationEvent"in window||(delete mt.animationend.animation,delete mt.animationiteration.animation,delete mt.animationstart.animation),"TransitionEvent"in window||delete mt.transitionend.transition);function ve(i){if(Nt[i])return Nt[i];if(!mt[i])return i;var r=mt[i],u;for(u in r)if(r.hasOwnProperty(u)&&u in Ft)return Nt[i]=r[u];return i}var Ce=ve("animationend"),Ae=ve("animationiteration"),Xe=ve("animationstart"),Xn=ve("transitionrun"),hs=ve("transitionstart"),wl=ve("transitioncancel"),La=ve("transitionend"),fc=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function yr(i,r){fc.set(i,r),ae(r,[i])}var V0=new WeakMap;function rr(i,r){if(typeof i=="object"&&i!==null){var u=V0.get(i);return u!==void 0?u:(r={value:i,source:r,stack:en(r)},V0.set(i,r),r)}return{value:i,source:r,stack:en(r)}}var sr=[],xo=0,Mf=0;function dc(){for(var i=xo,r=Mf=xo=0;r<i;){var u=sr[r];sr[r++]=null;var g=sr[r];sr[r++]=null;var _=sr[r];sr[r++]=null;var w=sr[r];if(sr[r++]=null,g!==null&&_!==null){var H=g.pending;H===null?_.next=_:(_.next=H.next,H.next=_),g.pending=_}w!==0&&U0(u,_,w)}}function gc(i,r,u,g){sr[xo++]=i,sr[xo++]=r,sr[xo++]=u,sr[xo++]=g,Mf|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function Df(i,r,u,g){return gc(i,r,u,g),pc(i)}function So(i,r){return gc(i,null,null,r),pc(i)}function U0(i,r,u){i.lanes|=u;var g=i.alternate;g!==null&&(g.lanes|=u);for(var _=!1,w=i.return;w!==null;)w.childLanes|=u,g=w.alternate,g!==null&&(g.childLanes|=u),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(_=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,_&&r!==null&&(_=31-m(u),i=w.hiddenUpdates,g=i[_],g===null?i[_]=[r]:g.push(r),r.lane=u|536870912),w):null}function pc(i){if(50<Wl)throw Wl=0,Bd=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var wo={};function mb(i,r,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,r,u,g){return new mb(i,r,u,g)}function jf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fs(i,r){var u=i.alternate;return u===null?(u=Gn(i.tag,r,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=r,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,r=i.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function H0(i,r){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,r=u.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function mc(i,r,u,g,_,w){var H=0;if(g=i,typeof i=="function")jf(i)&&(H=1);else if(typeof i=="string")H=_x(i,u,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Zt:return i=Gn(31,u,r,_),i.elementType=Zt,i.lanes=w,i;case X:return Pa(u.children,_,w,r);case z:H=8,_|=24;break;case it:return i=Gn(12,u,r,_|2),i.elementType=it,i.lanes=w,i;case St:return i=Gn(13,u,r,_),i.elementType=St,i.lanes=w,i;case V:return i=Gn(19,u,r,_),i.elementType=V,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:case gt:H=10;break t;case lt:H=9;break t;case kt:H=11;break t;case Jt:H=14;break t;case Wt:H=16,g=null;break t}H=29,u=Error(n(130,i===null?"null":typeof i,"")),g=null}return r=Gn(H,u,r,_),r.elementType=i,r.type=g,r.lanes=w,r}function Pa(i,r,u,g){return i=Gn(7,i,g,r),i.lanes=u,i}function Rf(i,r,u){return i=Gn(6,i,null,r),i.lanes=u,i}function Lf(i,r,u){return r=Gn(4,i.children!==null?i.children:[],i.key,r),r.lanes=u,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Co=[],To=0,vc=null,_c=0,ar=[],or=0,Na=null,ds=1,gs="";function Ba(i,r){Co[To++]=_c,Co[To++]=vc,vc=i,_c=r}function Y0(i,r,u){ar[or++]=ds,ar[or++]=gs,ar[or++]=Na,Na=i;var g=ds;i=gs;var _=32-m(g)-1;g&=~(1<<_),u+=1;var w=32-m(r)+_;if(30<w){var H=_-_%5;w=(g&(1<<H)-1).toString(32),g>>=H,_-=H,ds=1<<32-m(r)+_|u<<_|g,gs=w+i}else ds=1<<w|u<<_|g,gs=i}function Pf(i){i.return!==null&&(Ba(i,1),Y0(i,1,0))}function Nf(i){for(;i===vc;)vc=Co[--To],Co[To]=null,_c=Co[--To],Co[To]=null;for(;i===Na;)Na=ar[--or],ar[or]=null,gs=ar[--or],ar[or]=null,ds=ar[--or],ar[or]=null}var wn=null,Di=null,ti=!1,za=null,Nr=!1,Bf=Error(n(519));function Fa(i){var r=Error(n(418,""));throw kl(rr(r,i)),Bf}function X0(i){var r=i.stateNode,u=i.type,g=i.memoizedProps;switch(r[nt]=i,r[at]=g,u){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(u=0;u<Kl.length;u++)Ue(Kl[u],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Ns(r,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Ai(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),ss(r,g.value,g.defaultValue,g.children),Ai(r)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||g.suppressHydrationWarning===!0||lv(r.textContent,u)?(g.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),g.onScroll!=null&&Ue("scroll",r),g.onScrollEnd!=null&&Ue("scrollend",r),g.onClick!=null&&(r.onclick=Jc),r=!0):r=!1,r||Fa(i)}function G0(i){for(wn=i.return;wn;)switch(wn.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:wn=wn.return}}function Cl(i){if(i!==wn)return!1;if(!ti)return G0(i),ti=!0,!1;var r=i.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||$d(i.type,i.memoizedProps)),u=!u),u&&Di&&Fa(i),G0(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(r===0){Di=xr(i.nextSibling);break t}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++;i=i.nextSibling}Di=null}}else r===27?(r=Di,ua(i.type)?(i=ng,ng=null,Di=i):Di=r):Di=wn?xr(i.stateNode.nextSibling):null;return!0}function Tl(){Di=wn=null,ti=!1}function q0(){var i=za;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),za=null),i}function kl(i){za===null?za=[i]:za.push(i)}var zf=Ut(null),Ia=null,ps=null;function Ws(i,r,u){ee(zf,r._currentValue),r._currentValue=u}function ms(i){i._currentValue=zf.current,ue(zf)}function Ff(i,r,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,g!==null&&(g.childLanes|=r)):g!==null&&(g.childLanes&r)!==r&&(g.childLanes|=r),i===u)break;i=i.return}}function If(i,r,u,g){var _=i.child;for(_!==null&&(_.return=i);_!==null;){var w=_.dependencies;if(w!==null){var H=_.child;w=w.firstContext;t:for(;w!==null;){var tt=w;w=_;for(var ht=0;ht<r.length;ht++)if(tt.context===r[ht]){w.lanes|=u,tt=w.alternate,tt!==null&&(tt.lanes|=u),Ff(w.return,u,i),g||(H=null);break t}w=tt.next}}else if(_.tag===18){if(H=_.return,H===null)throw Error(n(341));H.lanes|=u,w=H.alternate,w!==null&&(w.lanes|=u),Ff(H,u,i),H=null}else H=_.child;if(H!==null)H.return=_;else for(H=_;H!==null;){if(H===i){H=null;break}if(_=H.sibling,_!==null){_.return=H.return,H=_;break}H=H.return}_=H}}function Ol(i,r,u,g){i=null;for(var _=r,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var H=_.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var tt=_.type;Sn(_.pendingProps.value,H.value)||(i!==null?i.push(tt):i=[tt])}}else if(_===vi.current){if(H=_.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(i!==null?i.push(iu):i=[iu])}_=_.return}i!==null&&If(r,i,u,g),r.flags|=262144}function yc(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Va(i){Ia=i,ps=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return W0(Ia,i)}function bc(i,r){return Ia===null&&Va(i),W0(i,r)}function W0(i,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},ps===null){if(i===null)throw Error(n(308));ps=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ps=ps.next=r;return u}var vb=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(u,g){i.push(g)}};this.abort=function(){r.aborted=!0,i.forEach(function(u){return u()})}},_b=l.unstable_scheduleCallback,yb=l.unstable_NormalPriority,qi={$$typeof:gt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vf(){return{controller:new vb,data:new Map,refCount:0}}function Al(i){i.refCount--,i.refCount===0&&_b(yb,function(){i.controller.abort()})}var El=null,Uf=0,ko=0,Oo=null;function bb(i,r){if(El===null){var u=El=[];Uf=0,ko=Yd(),Oo={status:"pending",value:void 0,then:function(g){u.push(g)}}}return Uf++,r.then(Z0,Z0),r}function Z0(){if(--Uf===0&&El!==null){Oo!==null&&(Oo.status="fulfilled");var i=El;El=null,ko=0,Oo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function xb(i,r){var u=[],g={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return i.then(function(){g.status="fulfilled",g.value=r;for(var _=0;_<u.length;_++)(0,u[_])(r)},function(_){for(g.status="rejected",g.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),g}var K0=ut.S;ut.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&bb(i,r),K0!==null&&K0(i,r)};var Ua=Ut(null);function Hf(){var i=Ua.current;return i!==null?i:mi.pooledCache}function xc(i,r){r===null?ee(Ua,Ua.current):ee(Ua,r.pool)}function Q0(){var i=Hf();return i===null?null:{parent:qi._currentValue,pool:i}}var Ml=Error(n(460)),J0=Error(n(474)),Sc=Error(n(542)),Yf={then:function(){}};function $0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function wc(){}function tp(i,r,u){switch(u=i[u],u===void 0?i.push(r):u!==r&&(r.then(wc,wc),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ip(i),i;default:if(typeof r.status=="string")r.then(wc,wc);else{if(i=mi,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(g){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=g}},function(g){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=g}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ip(i),i}throw Dl=r,Ml}}var Dl=null;function ep(){if(Dl===null)throw Error(n(459));var i=Dl;return Dl=null,i}function ip(i){if(i===Ml||i===Sc)throw Error(n(483))}var Zs=!1;function Xf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ks(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Qs(i,r,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(ai&2)!==0){var _=g.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),g.pending=r,r=pc(i),U0(i,null,u),r}return gc(i,g,r,u),pc(i)}function jl(i,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var g=r.lanes;g&=i.pendingLanes,u|=g,r.lanes=u,D(i,u)}}function qf(i,r){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var H={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?_=w=H:w=w.next=H,u=u.next}while(u!==null);w===null?_=w=r:w=w.next=r}else _=w=r;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=r:i.next=r,u.lastBaseUpdate=r}var Wf=!1;function Rl(){if(Wf){var i=Oo;if(i!==null)throw i}}function Ll(i,r,u,g){Wf=!1;var _=i.updateQueue;Zs=!1;var w=_.firstBaseUpdate,H=_.lastBaseUpdate,tt=_.shared.pending;if(tt!==null){_.shared.pending=null;var ht=tt,Mt=ht.next;ht.next=null,H===null?w=Mt:H.next=Mt,H=ht;var zt=i.alternate;zt!==null&&(zt=zt.updateQueue,tt=zt.lastBaseUpdate,tt!==H&&(tt===null?zt.firstBaseUpdate=Mt:tt.next=Mt,zt.lastBaseUpdate=ht))}if(w!==null){var Ht=_.baseState;H=0,zt=Mt=ht=null,tt=w;do{var Rt=tt.lane&-536870913,Lt=Rt!==tt.lane;if(Lt?(Ge&Rt)===Rt:(g&Rt)===Rt){Rt!==0&&Rt===ko&&(Wf=!0),zt!==null&&(zt=zt.next={lane:0,tag:tt.tag,payload:tt.payload,callback:null,next:null});t:{var Ee=i,Te=tt;Rt=r;var ci=u;switch(Te.tag){case 1:if(Ee=Te.payload,typeof Ee=="function"){Ht=Ee.call(ci,Ht,Rt);break t}Ht=Ee;break t;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Te.payload,Rt=typeof Ee=="function"?Ee.call(ci,Ht,Rt):Ee,Rt==null)break t;Ht=C({},Ht,Rt);break t;case 2:Zs=!0}}Rt=tt.callback,Rt!==null&&(i.flags|=64,Lt&&(i.flags|=8192),Lt=_.callbacks,Lt===null?_.callbacks=[Rt]:Lt.push(Rt))}else Lt={lane:Rt,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},zt===null?(Mt=zt=Lt,ht=Ht):zt=zt.next=Lt,H|=Rt;if(tt=tt.next,tt===null){if(tt=_.shared.pending,tt===null)break;Lt=tt,tt=Lt.next,Lt.next=null,_.lastBaseUpdate=Lt,_.shared.pending=null}}while(!0);zt===null&&(ht=Ht),_.baseState=ht,_.firstBaseUpdate=Mt,_.lastBaseUpdate=zt,w===null&&(_.shared.lanes=0),sa|=H,i.lanes=H,i.memoizedState=Ht}}function np(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function rp(i,r){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)np(u[i],r)}var Ao=Ut(null),Cc=Ut(0);function sp(i,r){i=ws,ee(Cc,i),ee(Ao,r),ws=i|r.baseLanes}function Zf(){ee(Cc,ws),ee(Ao,Ao.current)}function Kf(){ws=Cc.current,ue(Ao),ue(Cc)}var Js=0,Fe=null,li=null,Vi=null,Tc=!1,Eo=!1,Ha=!1,kc=0,Pl=0,Mo=null,Sb=0;function Ni(){throw Error(n(321))}function Qf(i,r){if(r===null)return!1;for(var u=0;u<r.length&&u<i.length;u++)if(!Sn(i[u],r[u]))return!1;return!0}function Jf(i,r,u,g,_,w){return Js=w,Fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ut.H=i===null||i.memoizedState===null?Up:Hp,Ha=!1,w=u(g,_),Ha=!1,Eo&&(w=op(r,u,g,_)),ap(i),w}function ap(i){ut.H=jc;var r=li!==null&&li.next!==null;if(Js=0,Vi=li=Fe=null,Tc=!1,Pl=0,Mo=null,r)throw Error(n(300));i===null||Qi||(i=i.dependencies,i!==null&&yc(i)&&(Qi=!0))}function op(i,r,u,g){Fe=i;var _=0;do{if(Eo&&(Mo=null),Pl=0,Eo=!1,25<=_)throw Error(n(301));if(_+=1,Vi=li=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ut.H=Eb,w=r(u,g)}while(Eo);return w}function wb(){var i=ut.H,r=i.useState()[0];return r=typeof r.then=="function"?Nl(r):r,i=i.useState()[0],(li!==null?li.memoizedState:null)!==i&&(Fe.flags|=1024),r}function $f(){var i=kc!==0;return kc=0,i}function td(i,r,u){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~u}function ed(i){if(Tc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Tc=!1}Js=0,Vi=li=Fe=null,Eo=!1,Pl=kc=0,Mo=null}function Pn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?Fe.memoizedState=Vi=i:Vi=Vi.next=i,Vi}function Ui(){if(li===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=li.next;var r=Vi===null?Fe.memoizedState:Vi.next;if(r!==null)Vi=r,li=i;else{if(i===null)throw Fe.alternate===null?Error(n(467)):Error(n(310));li=i,i={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},Vi===null?Fe.memoizedState=Vi=i:Vi=Vi.next=i}return Vi}function id(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(i){var r=Pl;return Pl+=1,Mo===null&&(Mo=[]),i=tp(Mo,i,r),r=Fe,(Vi===null?r.memoizedState:Vi.next)===null&&(r=r.alternate,ut.H=r===null||r.memoizedState===null?Up:Hp),i}function Oc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Nl(i);if(i.$$typeof===gt)return dn(i)}throw Error(n(438,String(i)))}function nd(i){var r=null,u=Fe.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var g=Fe.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(r={data:g.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=id(),Fe.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(i),g=0;g<i;g++)u[g]=he;return r.index++,u}function vs(i,r){return typeof r=="function"?r(i):r}function Ac(i){var r=Ui();return rd(r,li,i)}function rd(i,r,u){var g=i.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var _=i.baseQueue,w=g.pending;if(w!==null){if(_!==null){var H=_.next;_.next=w.next,w.next=H}r.baseQueue=_=w,g.pending=null}if(w=i.baseState,_===null)i.memoizedState=w;else{r=_.next;var tt=H=null,ht=null,Mt=r,zt=!1;do{var Ht=Mt.lane&-536870913;if(Ht!==Mt.lane?(Ge&Ht)===Ht:(Js&Ht)===Ht){var Rt=Mt.revertLane;if(Rt===0)ht!==null&&(ht=ht.next={lane:0,revertLane:0,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),Ht===ko&&(zt=!0);else if((Js&Rt)===Rt){Mt=Mt.next,Rt===ko&&(zt=!0);continue}else Ht={lane:0,revertLane:Mt.revertLane,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},ht===null?(tt=ht=Ht,H=w):ht=ht.next=Ht,Fe.lanes|=Rt,sa|=Rt;Ht=Mt.action,Ha&&u(w,Ht),w=Mt.hasEagerState?Mt.eagerState:u(w,Ht)}else Rt={lane:Ht,revertLane:Mt.revertLane,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},ht===null?(tt=ht=Rt,H=w):ht=ht.next=Rt,Fe.lanes|=Ht,sa|=Ht;Mt=Mt.next}while(Mt!==null&&Mt!==r);if(ht===null?H=w:ht.next=tt,!Sn(w,i.memoizedState)&&(Qi=!0,zt&&(u=Oo,u!==null)))throw u;i.memoizedState=w,i.baseState=H,i.baseQueue=ht,g.lastRenderedState=w}return _===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function sd(i){var r=Ui(),u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var g=u.dispatch,_=u.pending,w=r.memoizedState;if(_!==null){u.pending=null;var H=_=_.next;do w=i(w,H.action),H=H.next;while(H!==_);Sn(w,r.memoizedState)||(Qi=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),u.lastRenderedState=w}return[w,g]}function lp(i,r,u){var g=Fe,_=Ui(),w=ti;if(w){if(u===void 0)throw Error(n(407));u=u()}else u=r();var H=!Sn((li||_).memoizedState,u);H&&(_.memoizedState=u,Qi=!0),_=_.queue;var tt=hp.bind(null,g,_,i);if(Bl(2048,8,tt,[i]),_.getSnapshot!==r||H||Vi!==null&&Vi.memoizedState.tag&1){if(g.flags|=2048,Do(9,Ec(),cp.bind(null,g,_,u,r),null),mi===null)throw Error(n(349));w||(Js&124)!==0||up(g,r,u)}return u}function up(i,r,u){i.flags|=16384,i={getSnapshot:r,value:u},r=Fe.updateQueue,r===null?(r=id(),Fe.updateQueue=r,r.stores=[i]):(u=r.stores,u===null?r.stores=[i]:u.push(i))}function cp(i,r,u,g){r.value=u,r.getSnapshot=g,fp(r)&&dp(i)}function hp(i,r,u){return u(function(){fp(r)&&dp(i)})}function fp(i){var r=i.getSnapshot;i=i.value;try{var u=r();return!Sn(i,u)}catch{return!0}}function dp(i){var r=So(i,2);r!==null&&Qn(r,i,2)}function ad(i){var r=Pn();if(typeof i=="function"){var u=i;if(i=u(),Ha){f(!0);try{u()}finally{f(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:i},r}function gp(i,r,u,g){return i.baseState=u,rd(i,li,typeof g=="function"?g:vs)}function Cb(i,r,u,g,_){if(Dc(i))throw Error(n(485));if(i=r.action,i!==null){var w={payload:_,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){w.listeners.push(H)}};ut.T!==null?u(!0):w.isTransition=!1,g(w),u=r.pending,u===null?(w.next=r.pending=w,pp(r,w)):(w.next=u.next,r.pending=u.next=w)}}function pp(i,r){var u=r.action,g=r.payload,_=i.state;if(r.isTransition){var w=ut.T,H={};ut.T=H;try{var tt=u(_,g),ht=ut.S;ht!==null&&ht(H,tt),mp(i,r,tt)}catch(Mt){od(i,r,Mt)}finally{ut.T=w}}else try{w=u(_,g),mp(i,r,w)}catch(Mt){od(i,r,Mt)}}function mp(i,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){vp(i,r,g)},function(g){return od(i,r,g)}):vp(i,r,u)}function vp(i,r,u){r.status="fulfilled",r.value=u,_p(r),i.state=u,r=i.pending,r!==null&&(u=r.next,u===r?i.pending=null:(u=u.next,r.next=u,pp(i,u)))}function od(i,r,u){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do r.status="rejected",r.reason=u,_p(r),r=r.next;while(r!==g)}i.action=null}function _p(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function yp(i,r){return r}function bp(i,r){if(ti){var u=mi.formState;if(u!==null){t:{var g=Fe;if(ti){if(Di){e:{for(var _=Di,w=Nr;_.nodeType!==8;){if(!w){_=null;break e}if(_=xr(_.nextSibling),_===null){_=null;break e}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){Di=xr(_.nextSibling),g=_.data==="F!";break t}}Fa(g)}g=!1}g&&(r=u[0])}}return u=Pn(),u.memoizedState=u.baseState=r,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:r},u.queue=g,u=Fp.bind(null,Fe,g),g.dispatch=u,g=ad(!1),w=fd.bind(null,Fe,!1,g.queue),g=Pn(),_={state:r,dispatch:null,action:i,pending:null},g.queue=_,u=Cb.bind(null,Fe,_,w,u),_.dispatch=u,g.memoizedState=i,[r,u,!1]}function xp(i){var r=Ui();return Sp(r,li,i)}function Sp(i,r,u){if(r=rd(i,r,yp)[0],i=Ac(vs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var g=Nl(r)}catch(H){throw H===Ml?Sc:H}else g=r;r=Ui();var _=r.queue,w=_.dispatch;return u!==r.memoizedState&&(Fe.flags|=2048,Do(9,Ec(),Tb.bind(null,_,u),null)),[g,w,i]}function Tb(i,r){i.action=r}function wp(i){var r=Ui(),u=li;if(u!==null)return Sp(r,u,i);Ui(),r=r.memoizedState,u=Ui();var g=u.queue.dispatch;return u.memoizedState=i,[r,g,!1]}function Do(i,r,u,g){return i={tag:i,create:u,deps:g,inst:r,next:null},r=Fe.updateQueue,r===null&&(r=id(),Fe.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,r.lastEffect=i),i}function Ec(){return{destroy:void 0,resource:void 0}}function Cp(){return Ui().memoizedState}function Mc(i,r,u,g){var _=Pn();g=g===void 0?null:g,Fe.flags|=i,_.memoizedState=Do(1|r,Ec(),u,g)}function Bl(i,r,u,g){var _=Ui();g=g===void 0?null:g;var w=_.memoizedState.inst;li!==null&&g!==null&&Qf(g,li.memoizedState.deps)?_.memoizedState=Do(r,w,u,g):(Fe.flags|=i,_.memoizedState=Do(1|r,w,u,g))}function Tp(i,r){Mc(8390656,8,i,r)}function kp(i,r){Bl(2048,8,i,r)}function Op(i,r){return Bl(4,2,i,r)}function Ap(i,r){return Bl(4,4,i,r)}function Ep(i,r){if(typeof r=="function"){i=i();var u=r(i);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Mp(i,r,u){u=u!=null?u.concat([i]):null,Bl(4,4,Ep.bind(null,r,i),u)}function ld(){}function Dp(i,r){var u=Ui();r=r===void 0?null:r;var g=u.memoizedState;return r!==null&&Qf(r,g[1])?g[0]:(u.memoizedState=[i,r],i)}function jp(i,r){var u=Ui();r=r===void 0?null:r;var g=u.memoizedState;if(r!==null&&Qf(r,g[1]))return g[0];if(g=i(),Ha){f(!0);try{i()}finally{f(!1)}}return u.memoizedState=[g,r],g}function ud(i,r,u){return u===void 0||(Js&1073741824)!==0?i.memoizedState=r:(i.memoizedState=u,i=Pm(),Fe.lanes|=i,sa|=i,u)}function Rp(i,r,u,g){return Sn(u,r)?u:Ao.current!==null?(i=ud(i,u,g),Sn(i,r)||(Qi=!0),i):(Js&42)===0?(Qi=!0,i.memoizedState=u):(i=Pm(),Fe.lanes|=i,sa|=i,r)}function Lp(i,r,u,g,_){var w=Gt.p;Gt.p=w!==0&&8>w?w:8;var H=ut.T,tt={};ut.T=tt,fd(i,!1,r,u);try{var ht=_(),Mt=ut.S;if(Mt!==null&&Mt(tt,ht),ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var zt=xb(ht,g);zl(i,r,zt,Kn(i))}else zl(i,r,g,Kn(i))}catch(Ht){zl(i,r,{then:function(){},status:"rejected",reason:Ht},Kn())}finally{Gt.p=w,ut.T=H}}function kb(){}function cd(i,r,u,g){if(i.tag!==5)throw Error(n(476));var _=Pp(i).queue;Lp(i,_,r,re,u===null?kb:function(){return Np(i),u(g)})}function Pp(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:re},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:u},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Np(i){var r=Pp(i).next.queue;zl(i,r,{},Kn())}function hd(){return dn(iu)}function Bp(){return Ui().memoizedState}function zp(){return Ui().memoizedState}function Ob(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var u=Kn();i=Ks(u);var g=Qs(r,i,u);g!==null&&(Qn(g,r,u),jl(g,r,u)),r={cache:Vf()},i.payload=r;return}r=r.return}}function Ab(i,r,u){var g=Kn();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Dc(i)?Ip(r,u):(u=Df(i,r,u,g),u!==null&&(Qn(u,i,g),Vp(u,r,g)))}function Fp(i,r,u){var g=Kn();zl(i,r,u,g)}function zl(i,r,u,g){var _={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dc(i))Ip(r,_);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var H=r.lastRenderedState,tt=w(H,u);if(_.hasEagerState=!0,_.eagerState=tt,Sn(tt,H))return gc(i,r,_,0),mi===null&&dc(),!1}catch{}finally{}if(u=Df(i,r,_,g),u!==null)return Qn(u,i,g),Vp(u,r,g),!0}return!1}function fd(i,r,u,g){if(g={lane:2,revertLane:Yd(),action:g,hasEagerState:!1,eagerState:null,next:null},Dc(i)){if(r)throw Error(n(479))}else r=Df(i,u,g,2),r!==null&&Qn(r,i,2)}function Dc(i){var r=i.alternate;return i===Fe||r!==null&&r===Fe}function Ip(i,r){Eo=Tc=!0;var u=i.pending;u===null?r.next=r:(r.next=u.next,u.next=r),i.pending=r}function Vp(i,r,u){if((u&4194048)!==0){var g=r.lanes;g&=i.pendingLanes,u|=g,r.lanes=u,D(i,u)}}var jc={readContext:dn,use:Oc,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni,useHostTransitionStatus:Ni,useFormState:Ni,useActionState:Ni,useOptimistic:Ni,useMemoCache:Ni,useCacheRefresh:Ni},Up={readContext:dn,use:Oc,useCallback:function(i,r){return Pn().memoizedState=[i,r===void 0?null:r],i},useContext:dn,useEffect:Tp,useImperativeHandle:function(i,r,u){u=u!=null?u.concat([i]):null,Mc(4194308,4,Ep.bind(null,r,i),u)},useLayoutEffect:function(i,r){return Mc(4194308,4,i,r)},useInsertionEffect:function(i,r){Mc(4,2,i,r)},useMemo:function(i,r){var u=Pn();r=r===void 0?null:r;var g=i();if(Ha){f(!0);try{i()}finally{f(!1)}}return u.memoizedState=[g,r],g},useReducer:function(i,r,u){var g=Pn();if(u!==void 0){var _=u(r);if(Ha){f(!0);try{u(r)}finally{f(!1)}}}else _=r;return g.memoizedState=g.baseState=_,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:_},g.queue=i,i=i.dispatch=Ab.bind(null,Fe,i),[g.memoizedState,i]},useRef:function(i){var r=Pn();return i={current:i},r.memoizedState=i},useState:function(i){i=ad(i);var r=i.queue,u=Fp.bind(null,Fe,r);return r.dispatch=u,[i.memoizedState,u]},useDebugValue:ld,useDeferredValue:function(i,r){var u=Pn();return ud(u,i,r)},useTransition:function(){var i=ad(!1);return i=Lp.bind(null,Fe,i.queue,!0,!1),Pn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,u){var g=Fe,_=Pn();if(ti){if(u===void 0)throw Error(n(407));u=u()}else{if(u=r(),mi===null)throw Error(n(349));(Ge&124)!==0||up(g,r,u)}_.memoizedState=u;var w={value:u,getSnapshot:r};return _.queue=w,Tp(hp.bind(null,g,w,i),[i]),g.flags|=2048,Do(9,Ec(),cp.bind(null,g,w,u,r),null),u},useId:function(){var i=Pn(),r=mi.identifierPrefix;if(ti){var u=gs,g=ds;u=(g&~(1<<32-m(g)-1)).toString(32)+u,r=""+r+"R"+u,u=kc++,0<u&&(r+="H"+u.toString(32)),r+=""}else u=Sb++,r=""+r+"r"+u.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:hd,useFormState:bp,useActionState:bp,useOptimistic:function(i){var r=Pn();r.memoizedState=r.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=fd.bind(null,Fe,!0,u),u.dispatch=r,[i,r]},useMemoCache:nd,useCacheRefresh:function(){return Pn().memoizedState=Ob.bind(null,Fe)}},Hp={readContext:dn,use:Oc,useCallback:Dp,useContext:dn,useEffect:kp,useImperativeHandle:Mp,useInsertionEffect:Op,useLayoutEffect:Ap,useMemo:jp,useReducer:Ac,useRef:Cp,useState:function(){return Ac(vs)},useDebugValue:ld,useDeferredValue:function(i,r){var u=Ui();return Rp(u,li.memoizedState,i,r)},useTransition:function(){var i=Ac(vs)[0],r=Ui().memoizedState;return[typeof i=="boolean"?i:Nl(i),r]},useSyncExternalStore:lp,useId:Bp,useHostTransitionStatus:hd,useFormState:xp,useActionState:xp,useOptimistic:function(i,r){var u=Ui();return gp(u,li,i,r)},useMemoCache:nd,useCacheRefresh:zp},Eb={readContext:dn,use:Oc,useCallback:Dp,useContext:dn,useEffect:kp,useImperativeHandle:Mp,useInsertionEffect:Op,useLayoutEffect:Ap,useMemo:jp,useReducer:sd,useRef:Cp,useState:function(){return sd(vs)},useDebugValue:ld,useDeferredValue:function(i,r){var u=Ui();return li===null?ud(u,i,r):Rp(u,li.memoizedState,i,r)},useTransition:function(){var i=sd(vs)[0],r=Ui().memoizedState;return[typeof i=="boolean"?i:Nl(i),r]},useSyncExternalStore:lp,useId:Bp,useHostTransitionStatus:hd,useFormState:wp,useActionState:wp,useOptimistic:function(i,r){var u=Ui();return li!==null?gp(u,li,i,r):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:nd,useCacheRefresh:zp},jo=null,Fl=0;function Rc(i){var r=Fl;return Fl+=1,jo===null&&(jo=[]),tp(jo,i,r)}function Il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Lc(i,r){throw r.$$typeof===M?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Yp(i){var r=i._init;return r(i._payload)}function Xp(i){function r(Ct,yt){if(i){var At=Ct.deletions;At===null?(Ct.deletions=[yt],Ct.flags|=16):At.push(yt)}}function u(Ct,yt){if(!i)return null;for(;yt!==null;)r(Ct,yt),yt=yt.sibling;return null}function g(Ct){for(var yt=new Map;Ct!==null;)Ct.key!==null?yt.set(Ct.key,Ct):yt.set(Ct.index,Ct),Ct=Ct.sibling;return yt}function _(Ct,yt){return Ct=fs(Ct,yt),Ct.index=0,Ct.sibling=null,Ct}function w(Ct,yt,At){return Ct.index=At,i?(At=Ct.alternate,At!==null?(At=At.index,At<yt?(Ct.flags|=67108866,yt):At):(Ct.flags|=67108866,yt)):(Ct.flags|=1048576,yt)}function H(Ct){return i&&Ct.alternate===null&&(Ct.flags|=67108866),Ct}function tt(Ct,yt,At,Vt){return yt===null||yt.tag!==6?(yt=Rf(At,Ct.mode,Vt),yt.return=Ct,yt):(yt=_(yt,At),yt.return=Ct,yt)}function ht(Ct,yt,At,Vt){var de=At.type;return de===X?zt(Ct,yt,At.props.children,Vt,At.key):yt!==null&&(yt.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Wt&&Yp(de)===yt.type)?(yt=_(yt,At.props),Il(yt,At),yt.return=Ct,yt):(yt=mc(At.type,At.key,At.props,null,Ct.mode,Vt),Il(yt,At),yt.return=Ct,yt)}function Mt(Ct,yt,At,Vt){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==At.containerInfo||yt.stateNode.implementation!==At.implementation?(yt=Lf(At,Ct.mode,Vt),yt.return=Ct,yt):(yt=_(yt,At.children||[]),yt.return=Ct,yt)}function zt(Ct,yt,At,Vt,de){return yt===null||yt.tag!==7?(yt=Pa(At,Ct.mode,Vt,de),yt.return=Ct,yt):(yt=_(yt,At),yt.return=Ct,yt)}function Ht(Ct,yt,At){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return yt=Rf(""+yt,Ct.mode,At),yt.return=Ct,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case F:return At=mc(yt.type,yt.key,yt.props,null,Ct.mode,At),Il(At,yt),At.return=Ct,At;case E:return yt=Lf(yt,Ct.mode,At),yt.return=Ct,yt;case Wt:var Vt=yt._init;return yt=Vt(yt._payload),Ht(Ct,yt,At)}if(Re(yt)||Yt(yt))return yt=Pa(yt,Ct.mode,At,null),yt.return=Ct,yt;if(typeof yt.then=="function")return Ht(Ct,Rc(yt),At);if(yt.$$typeof===gt)return Ht(Ct,bc(Ct,yt),At);Lc(Ct,yt)}return null}function Rt(Ct,yt,At,Vt){var de=yt!==null?yt.key:null;if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return de!==null?null:tt(Ct,yt,""+At,Vt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case F:return At.key===de?ht(Ct,yt,At,Vt):null;case E:return At.key===de?Mt(Ct,yt,At,Vt):null;case Wt:return de=At._init,At=de(At._payload),Rt(Ct,yt,At,Vt)}if(Re(At)||Yt(At))return de!==null?null:zt(Ct,yt,At,Vt,null);if(typeof At.then=="function")return Rt(Ct,yt,Rc(At),Vt);if(At.$$typeof===gt)return Rt(Ct,yt,bc(Ct,At),Vt);Lc(Ct,At)}return null}function Lt(Ct,yt,At,Vt,de){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return Ct=Ct.get(At)||null,tt(yt,Ct,""+Vt,de);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case F:return Ct=Ct.get(Vt.key===null?At:Vt.key)||null,ht(yt,Ct,Vt,de);case E:return Ct=Ct.get(Vt.key===null?At:Vt.key)||null,Mt(yt,Ct,Vt,de);case Wt:var Ie=Vt._init;return Vt=Ie(Vt._payload),Lt(Ct,yt,At,Vt,de)}if(Re(Vt)||Yt(Vt))return Ct=Ct.get(At)||null,zt(yt,Ct,Vt,de,null);if(typeof Vt.then=="function")return Lt(Ct,yt,At,Rc(Vt),de);if(Vt.$$typeof===gt)return Lt(Ct,yt,At,bc(yt,Vt),de);Lc(yt,Vt)}return null}function Ee(Ct,yt,At,Vt){for(var de=null,Ie=null,ye=yt,ke=yt=0,$i=null;ye!==null&&ke<At.length;ke++){ye.index>ke?($i=ye,ye=null):$i=ye.sibling;var Qe=Rt(Ct,ye,At[ke],Vt);if(Qe===null){ye===null&&(ye=$i);break}i&&ye&&Qe.alternate===null&&r(Ct,ye),yt=w(Qe,yt,ke),Ie===null?de=Qe:Ie.sibling=Qe,Ie=Qe,ye=$i}if(ke===At.length)return u(Ct,ye),ti&&Ba(Ct,ke),de;if(ye===null){for(;ke<At.length;ke++)ye=Ht(Ct,At[ke],Vt),ye!==null&&(yt=w(ye,yt,ke),Ie===null?de=ye:Ie.sibling=ye,Ie=ye);return ti&&Ba(Ct,ke),de}for(ye=g(ye);ke<At.length;ke++)$i=Lt(ye,Ct,ke,At[ke],Vt),$i!==null&&(i&&$i.alternate!==null&&ye.delete($i.key===null?ke:$i.key),yt=w($i,yt,ke),Ie===null?de=$i:Ie.sibling=$i,Ie=$i);return i&&ye.forEach(function(ga){return r(Ct,ga)}),ti&&Ba(Ct,ke),de}function Te(Ct,yt,At,Vt){if(At==null)throw Error(n(151));for(var de=null,Ie=null,ye=yt,ke=yt=0,$i=null,Qe=At.next();ye!==null&&!Qe.done;ke++,Qe=At.next()){ye.index>ke?($i=ye,ye=null):$i=ye.sibling;var ga=Rt(Ct,ye,Qe.value,Vt);if(ga===null){ye===null&&(ye=$i);break}i&&ye&&ga.alternate===null&&r(Ct,ye),yt=w(ga,yt,ke),Ie===null?de=ga:Ie.sibling=ga,Ie=ga,ye=$i}if(Qe.done)return u(Ct,ye),ti&&Ba(Ct,ke),de;if(ye===null){for(;!Qe.done;ke++,Qe=At.next())Qe=Ht(Ct,Qe.value,Vt),Qe!==null&&(yt=w(Qe,yt,ke),Ie===null?de=Qe:Ie.sibling=Qe,Ie=Qe);return ti&&Ba(Ct,ke),de}for(ye=g(ye);!Qe.done;ke++,Qe=At.next())Qe=Lt(ye,Ct,ke,Qe.value,Vt),Qe!==null&&(i&&Qe.alternate!==null&&ye.delete(Qe.key===null?ke:Qe.key),yt=w(Qe,yt,ke),Ie===null?de=Qe:Ie.sibling=Qe,Ie=Qe);return i&&ye.forEach(function(Mx){return r(Ct,Mx)}),ti&&Ba(Ct,ke),de}function ci(Ct,yt,At,Vt){if(typeof At=="object"&&At!==null&&At.type===X&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case F:t:{for(var de=At.key;yt!==null;){if(yt.key===de){if(de=At.type,de===X){if(yt.tag===7){u(Ct,yt.sibling),Vt=_(yt,At.props.children),Vt.return=Ct,Ct=Vt;break t}}else if(yt.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Wt&&Yp(de)===yt.type){u(Ct,yt.sibling),Vt=_(yt,At.props),Il(Vt,At),Vt.return=Ct,Ct=Vt;break t}u(Ct,yt);break}else r(Ct,yt);yt=yt.sibling}At.type===X?(Vt=Pa(At.props.children,Ct.mode,Vt,At.key),Vt.return=Ct,Ct=Vt):(Vt=mc(At.type,At.key,At.props,null,Ct.mode,Vt),Il(Vt,At),Vt.return=Ct,Ct=Vt)}return H(Ct);case E:t:{for(de=At.key;yt!==null;){if(yt.key===de)if(yt.tag===4&&yt.stateNode.containerInfo===At.containerInfo&&yt.stateNode.implementation===At.implementation){u(Ct,yt.sibling),Vt=_(yt,At.children||[]),Vt.return=Ct,Ct=Vt;break t}else{u(Ct,yt);break}else r(Ct,yt);yt=yt.sibling}Vt=Lf(At,Ct.mode,Vt),Vt.return=Ct,Ct=Vt}return H(Ct);case Wt:return de=At._init,At=de(At._payload),ci(Ct,yt,At,Vt)}if(Re(At))return Ee(Ct,yt,At,Vt);if(Yt(At)){if(de=Yt(At),typeof de!="function")throw Error(n(150));return At=de.call(At),Te(Ct,yt,At,Vt)}if(typeof At.then=="function")return ci(Ct,yt,Rc(At),Vt);if(At.$$typeof===gt)return ci(Ct,yt,bc(Ct,At),Vt);Lc(Ct,At)}return typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint"?(At=""+At,yt!==null&&yt.tag===6?(u(Ct,yt.sibling),Vt=_(yt,At),Vt.return=Ct,Ct=Vt):(u(Ct,yt),Vt=Rf(At,Ct.mode,Vt),Vt.return=Ct,Ct=Vt),H(Ct)):u(Ct,yt)}return function(Ct,yt,At,Vt){try{Fl=0;var de=ci(Ct,yt,At,Vt);return jo=null,de}catch(ye){if(ye===Ml||ye===Sc)throw ye;var Ie=Gn(29,ye,null,Ct.mode);return Ie.lanes=Vt,Ie.return=Ct,Ie}finally{}}}var Ro=Xp(!0),Gp=Xp(!1),lr=Ut(null),Br=null;function $s(i){var r=i.alternate;ee(Wi,Wi.current&1),ee(lr,i),Br===null&&(r===null||Ao.current!==null||r.memoizedState!==null)&&(Br=i)}function qp(i){if(i.tag===22){if(ee(Wi,Wi.current),ee(lr,i),Br===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(Br=i)}}else ta()}function ta(){ee(Wi,Wi.current),ee(lr,lr.current)}function _s(i){ue(lr),Br===i&&(Br=null),ue(Wi)}var Wi=Ut(0);function Pc(i){for(var r=i;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||ig(u)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function dd(i,r,u,g){r=i.memoizedState,u=u(g,r),u=u==null?r:C({},r,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var gd={enqueueSetState:function(i,r,u){i=i._reactInternals;var g=Kn(),_=Ks(g);_.payload=r,u!=null&&(_.callback=u),r=Qs(i,_,g),r!==null&&(Qn(r,i,g),jl(r,i,g))},enqueueReplaceState:function(i,r,u){i=i._reactInternals;var g=Kn(),_=Ks(g);_.tag=1,_.payload=r,u!=null&&(_.callback=u),r=Qs(i,_,g),r!==null&&(Qn(r,i,g),jl(r,i,g))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var u=Kn(),g=Ks(u);g.tag=2,r!=null&&(g.callback=r),r=Qs(i,g,u),r!==null&&(Qn(r,i,u),jl(r,i,u))}};function Wp(i,r,u,g,_,w,H){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,w,H):r.prototype&&r.prototype.isPureReactComponent?!Da(u,g)||!Da(_,w):!0}function Zp(i,r,u,g){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,g),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,g),r.state!==i&&gd.enqueueReplaceState(r,r.state,null)}function Ya(i,r){var u=r;if("ref"in r){u={};for(var g in r)g!=="ref"&&(u[g]=r[g])}if(i=i.defaultProps){u===r&&(u=C({},u));for(var _ in i)u[_]===void 0&&(u[_]=i[_])}return u}var Nc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Kp(i){Nc(i)}function Qp(i){console.error(i)}function Jp(i){Nc(i)}function Bc(i,r){try{var u=i.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(g){setTimeout(function(){throw g})}}function $p(i,r,u){try{var g=i.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function pd(i,r,u){return u=Ks(u),u.tag=3,u.payload={element:null},u.callback=function(){Bc(i,r)},u}function tm(i){return i=Ks(i),i.tag=3,i}function em(i,r,u,g){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var w=g.value;i.payload=function(){return _(w)},i.callback=function(){$p(r,u,g)}}var H=u.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(i.callback=function(){$p(r,u,g),typeof _!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var tt=g.stack;this.componentDidCatch(g.value,{componentStack:tt!==null?tt:""})})}function Mb(i,r,u,g,_){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(r=u.alternate,r!==null&&Ol(r,u,_,!0),u=lr.current,u!==null){switch(u.tag){case 13:return Br===null?Fd():u.alternate===null&&ji===0&&(ji=3),u.flags&=-257,u.flags|=65536,u.lanes=_,g===Yf?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([g]):r.add(g),Vd(i,g,_)),!1;case 22:return u.flags|=65536,g===Yf?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([g]):u.add(g)),Vd(i,g,_)),!1}throw Error(n(435,u.tag))}return Vd(i,g,_),Fd(),!1}if(ti)return r=lr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,g!==Bf&&(i=Error(n(422),{cause:g}),kl(rr(i,u)))):(g!==Bf&&(r=Error(n(423),{cause:g}),kl(rr(r,u))),i=i.current.alternate,i.flags|=65536,_&=-_,i.lanes|=_,g=rr(g,u),_=pd(i.stateNode,g,_),qf(i,_),ji!==4&&(ji=2)),!1;var w=Error(n(520),{cause:g});if(w=rr(w,u),ql===null?ql=[w]:ql.push(w),ji!==4&&(ji=2),r===null)return!0;g=rr(g,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,i=_&-_,u.lanes|=i,i=pd(u.stateNode,g,i),qf(u,i),!1;case 1:if(r=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(aa===null||!aa.has(w))))return u.flags|=65536,_&=-_,u.lanes|=_,_=tm(_),em(_,i,u,g),qf(u,_),!1}u=u.return}while(u!==null);return!1}var im=Error(n(461)),Qi=!1;function an(i,r,u,g){r.child=i===null?Gp(r,null,u,g):Ro(r,i.child,u,g)}function nm(i,r,u,g,_){u=u.render;var w=r.ref;if("ref"in g){var H={};for(var tt in g)tt!=="ref"&&(H[tt]=g[tt])}else H=g;return Va(r),g=Jf(i,r,u,H,w,_),tt=$f(),i!==null&&!Qi?(td(i,r,_),ys(i,r,_)):(ti&&tt&&Pf(r),r.flags|=1,an(i,r,g,_),r.child)}function rm(i,r,u,g,_){if(i===null){var w=u.type;return typeof w=="function"&&!jf(w)&&w.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=w,sm(i,r,w,g,_)):(i=mc(u.type,null,g,r,r.mode,_),i.ref=r.ref,i.return=r,r.child=i)}if(w=i.child,!wd(i,_)){var H=w.memoizedProps;if(u=u.compare,u=u!==null?u:Da,u(H,g)&&i.ref===r.ref)return ys(i,r,_)}return r.flags|=1,i=fs(w,g),i.ref=r.ref,i.return=r,r.child=i}function sm(i,r,u,g,_){if(i!==null){var w=i.memoizedProps;if(Da(w,g)&&i.ref===r.ref)if(Qi=!1,r.pendingProps=g=w,wd(i,_))(i.flags&131072)!==0&&(Qi=!0);else return r.lanes=i.lanes,ys(i,r,_)}return md(i,r,u,g,_)}function am(i,r,u){var g=r.pendingProps,_=g.children,w=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if((r.flags&128)!==0){if(g=w!==null?w.baseLanes|u:u,i!==null){for(_=r.child=i.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;r.childLanes=w&~g}else r.childLanes=0,r.child=null;return om(i,r,g,u)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&xc(r,w!==null?w.cachePool:null),w!==null?sp(r,w):Zf(),qp(r);else return r.lanes=r.childLanes=536870912,om(i,r,w!==null?w.baseLanes|u:u,u)}else w!==null?(xc(r,w.cachePool),sp(r,w),ta(),r.memoizedState=null):(i!==null&&xc(r,null),Zf(),ta());return an(i,r,_,u),r.child}function om(i,r,u,g){var _=Hf();return _=_===null?null:{parent:qi._currentValue,pool:_},r.memoizedState={baseLanes:u,cachePool:_},i!==null&&xc(r,null),Zf(),qp(r),i!==null&&Ol(i,r,g,!0),null}function zc(i,r){var u=r.ref;if(u===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(r.flags|=4194816)}}function md(i,r,u,g,_){return Va(r),u=Jf(i,r,u,g,void 0,_),g=$f(),i!==null&&!Qi?(td(i,r,_),ys(i,r,_)):(ti&&g&&Pf(r),r.flags|=1,an(i,r,u,_),r.child)}function lm(i,r,u,g,_,w){return Va(r),r.updateQueue=null,u=op(r,g,u,_),ap(i),g=$f(),i!==null&&!Qi?(td(i,r,w),ys(i,r,w)):(ti&&g&&Pf(r),r.flags|=1,an(i,r,u,w),r.child)}function um(i,r,u,g,_){if(Va(r),r.stateNode===null){var w=wo,H=u.contextType;typeof H=="object"&&H!==null&&(w=dn(H)),w=new u(g,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=gd,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=g,w.state=r.memoizedState,w.refs={},Xf(r),H=u.contextType,w.context=typeof H=="object"&&H!==null?dn(H):wo,w.state=r.memoizedState,H=u.getDerivedStateFromProps,typeof H=="function"&&(dd(r,u,H,g),w.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(H=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),H!==w.state&&gd.enqueueReplaceState(w,w.state,null),Ll(r,g,w,_),Rl(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),g=!0}else if(i===null){w=r.stateNode;var tt=r.memoizedProps,ht=Ya(u,tt);w.props=ht;var Mt=w.context,zt=u.contextType;H=wo,typeof zt=="object"&&zt!==null&&(H=dn(zt));var Ht=u.getDerivedStateFromProps;zt=typeof Ht=="function"||typeof w.getSnapshotBeforeUpdate=="function",tt=r.pendingProps!==tt,zt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(tt||Mt!==H)&&Zp(r,w,g,H),Zs=!1;var Rt=r.memoizedState;w.state=Rt,Ll(r,g,w,_),Rl(),Mt=r.memoizedState,tt||Rt!==Mt||Zs?(typeof Ht=="function"&&(dd(r,u,Ht,g),Mt=r.memoizedState),(ht=Zs||Wp(r,u,ht,g,Rt,Mt,H))?(zt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=g,r.memoizedState=Mt),w.props=g,w.state=Mt,w.context=H,g=ht):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),g=!1)}else{w=r.stateNode,Gf(i,r),H=r.memoizedProps,zt=Ya(u,H),w.props=zt,Ht=r.pendingProps,Rt=w.context,Mt=u.contextType,ht=wo,typeof Mt=="object"&&Mt!==null&&(ht=dn(Mt)),tt=u.getDerivedStateFromProps,(Mt=typeof tt=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H!==Ht||Rt!==ht)&&Zp(r,w,g,ht),Zs=!1,Rt=r.memoizedState,w.state=Rt,Ll(r,g,w,_),Rl();var Lt=r.memoizedState;H!==Ht||Rt!==Lt||Zs||i!==null&&i.dependencies!==null&&yc(i.dependencies)?(typeof tt=="function"&&(dd(r,u,tt,g),Lt=r.memoizedState),(zt=Zs||Wp(r,u,zt,g,Rt,Lt,ht)||i!==null&&i.dependencies!==null&&yc(i.dependencies))?(Mt||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,Lt,ht),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,Lt,ht)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||H===i.memoizedProps&&Rt===i.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===i.memoizedProps&&Rt===i.memoizedState||(r.flags|=1024),r.memoizedProps=g,r.memoizedState=Lt),w.props=g,w.state=Lt,w.context=ht,g=zt):(typeof w.componentDidUpdate!="function"||H===i.memoizedProps&&Rt===i.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===i.memoizedProps&&Rt===i.memoizedState||(r.flags|=1024),g=!1)}return w=g,zc(i,r),g=(r.flags&128)!==0,w||g?(w=r.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,i!==null&&g?(r.child=Ro(r,i.child,null,_),r.child=Ro(r,null,u,_)):an(i,r,u,_),r.memoizedState=w.state,i=r.child):i=ys(i,r,_),i}function cm(i,r,u,g){return Tl(),r.flags|=256,an(i,r,u,g),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _d(i){return{baseLanes:i,cachePool:Q0()}}function yd(i,r,u){return i=i!==null?i.childLanes&~u:0,r&&(i|=ur),i}function hm(i,r,u){var g=r.pendingProps,_=!1,w=(r.flags&128)!==0,H;if((H=w)||(H=i!==null&&i.memoizedState===null?!1:(Wi.current&2)!==0),H&&(_=!0,r.flags&=-129),H=(r.flags&32)!==0,r.flags&=-33,i===null){if(ti){if(_?$s(r):ta(),ti){var tt=Di,ht;if(ht=tt){t:{for(ht=tt,tt=Nr;ht.nodeType!==8;){if(!tt){tt=null;break t}if(ht=xr(ht.nextSibling),ht===null){tt=null;break t}}tt=ht}tt!==null?(r.memoizedState={dehydrated:tt,treeContext:Na!==null?{id:ds,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},ht=Gn(18,null,null,0),ht.stateNode=tt,ht.return=r,r.child=ht,wn=r,Di=null,ht=!0):ht=!1}ht||Fa(r)}if(tt=r.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null))return ig(tt)?r.lanes=32:r.lanes=536870912,null;_s(r)}return tt=g.children,g=g.fallback,_?(ta(),_=r.mode,tt=Fc({mode:"hidden",children:tt},_),g=Pa(g,_,u,null),tt.return=r,g.return=r,tt.sibling=g,r.child=tt,_=r.child,_.memoizedState=_d(u),_.childLanes=yd(i,H,u),r.memoizedState=vd,g):($s(r),bd(r,tt))}if(ht=i.memoizedState,ht!==null&&(tt=ht.dehydrated,tt!==null)){if(w)r.flags&256?($s(r),r.flags&=-257,r=xd(i,r,u)):r.memoizedState!==null?(ta(),r.child=i.child,r.flags|=128,r=null):(ta(),_=g.fallback,tt=r.mode,g=Fc({mode:"visible",children:g.children},tt),_=Pa(_,tt,u,null),_.flags|=2,g.return=r,_.return=r,g.sibling=_,r.child=g,Ro(r,i.child,null,u),g=r.child,g.memoizedState=_d(u),g.childLanes=yd(i,H,u),r.memoizedState=vd,r=_);else if($s(r),ig(tt)){if(H=tt.nextSibling&&tt.nextSibling.dataset,H)var Mt=H.dgst;H=Mt,g=Error(n(419)),g.stack="",g.digest=H,kl({value:g,source:null,stack:null}),r=xd(i,r,u)}else if(Qi||Ol(i,r,u,!1),H=(u&i.childLanes)!==0,Qi||H){if(H=mi,H!==null&&(g=u&-u,g=(g&42)!==0?1:U(g),g=(g&(H.suspendedLanes|u))!==0?0:g,g!==0&&g!==ht.retryLane))throw ht.retryLane=g,So(i,g),Qn(H,i,g),im;tt.data==="$?"||Fd(),r=xd(i,r,u)}else tt.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=ht.treeContext,Di=xr(tt.nextSibling),wn=r,ti=!0,za=null,Nr=!1,i!==null&&(ar[or++]=ds,ar[or++]=gs,ar[or++]=Na,ds=i.id,gs=i.overflow,Na=r),r=bd(r,g.children),r.flags|=4096);return r}return _?(ta(),_=g.fallback,tt=r.mode,ht=i.child,Mt=ht.sibling,g=fs(ht,{mode:"hidden",children:g.children}),g.subtreeFlags=ht.subtreeFlags&65011712,Mt!==null?_=fs(Mt,_):(_=Pa(_,tt,u,null),_.flags|=2),_.return=r,g.return=r,g.sibling=_,r.child=g,g=_,_=r.child,tt=i.child.memoizedState,tt===null?tt=_d(u):(ht=tt.cachePool,ht!==null?(Mt=qi._currentValue,ht=ht.parent!==Mt?{parent:Mt,pool:Mt}:ht):ht=Q0(),tt={baseLanes:tt.baseLanes|u,cachePool:ht}),_.memoizedState=tt,_.childLanes=yd(i,H,u),r.memoizedState=vd,g):($s(r),u=i.child,i=u.sibling,u=fs(u,{mode:"visible",children:g.children}),u.return=r,u.sibling=null,i!==null&&(H=r.deletions,H===null?(r.deletions=[i],r.flags|=16):H.push(i)),r.child=u,r.memoizedState=null,u)}function bd(i,r){return r=Fc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Fc(i,r){return i=Gn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function xd(i,r,u){return Ro(r,i.child,null,u),i=bd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function fm(i,r,u){i.lanes|=r;var g=i.alternate;g!==null&&(g.lanes|=r),Ff(i.return,r,u)}function Sd(i,r,u,g,_){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=u,w.tailMode=_)}function dm(i,r,u){var g=r.pendingProps,_=g.revealOrder,w=g.tail;if(an(i,r,g.children,u),g=Wi.current,(g&2)!==0)g=g&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fm(i,u,r);else if(i.tag===19)fm(i,u,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(ee(Wi,g),_){case"forwards":for(u=r.child,_=null;u!==null;)i=u.alternate,i!==null&&Pc(i)===null&&(_=u),u=u.sibling;u=_,u===null?(_=r.child,r.child=null):(_=u.sibling,u.sibling=null),Sd(r,!1,_,u,w);break;case"backwards":for(u=null,_=r.child,r.child=null;_!==null;){if(i=_.alternate,i!==null&&Pc(i)===null){r.child=_;break}i=_.sibling,_.sibling=u,u=_,_=i}Sd(r,!0,u,null,w);break;case"together":Sd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ys(i,r,u){if(i!==null&&(r.dependencies=i.dependencies),sa|=r.lanes,(u&r.childLanes)===0)if(i!==null){if(Ol(i,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,u=fs(i,i.pendingProps),r.child=u,u.return=r;i.sibling!==null;)i=i.sibling,u=u.sibling=fs(i,i.pendingProps),u.return=r;u.sibling=null}return r.child}function wd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&yc(i)))}function Db(i,r,u){switch(r.tag){case 3:Ze(r,r.stateNode.containerInfo),Ws(r,qi,i.memoizedState.cache),Tl();break;case 27:case 5:ze(r);break;case 4:Ze(r,r.stateNode.containerInfo);break;case 10:Ws(r,r.type,r.memoizedProps.value);break;case 13:var g=r.memoizedState;if(g!==null)return g.dehydrated!==null?($s(r),r.flags|=128,null):(u&r.child.childLanes)!==0?hm(i,r,u):($s(r),i=ys(i,r,u),i!==null?i.sibling:null);$s(r);break;case 19:var _=(i.flags&128)!==0;if(g=(u&r.childLanes)!==0,g||(Ol(i,r,u,!1),g=(u&r.childLanes)!==0),_){if(g)return dm(i,r,u);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ee(Wi,Wi.current),g)break;return null;case 22:case 23:return r.lanes=0,am(i,r,u);case 24:Ws(r,qi,i.memoizedState.cache)}return ys(i,r,u)}function gm(i,r,u){if(i!==null)if(i.memoizedProps!==r.pendingProps)Qi=!0;else{if(!wd(i,u)&&(r.flags&128)===0)return Qi=!1,Db(i,r,u);Qi=(i.flags&131072)!==0}else Qi=!1,ti&&(r.flags&1048576)!==0&&Y0(r,_c,r.index);switch(r.lanes=0,r.tag){case 16:t:{i=r.pendingProps;var g=r.elementType,_=g._init;if(g=_(g._payload),r.type=g,typeof g=="function")jf(g)?(i=Ya(g,i),r.tag=1,r=um(null,r,g,i,u)):(r.tag=0,r=md(null,r,g,i,u));else{if(g!=null){if(_=g.$$typeof,_===kt){r.tag=11,r=nm(null,r,g,i,u);break t}else if(_===Jt){r.tag=14,r=rm(null,r,g,i,u);break t}}throw r=Xt(g)||g,Error(n(306,r,""))}}return r;case 0:return md(i,r,r.type,r.pendingProps,u);case 1:return g=r.type,_=Ya(g,r.pendingProps),um(i,r,g,_,u);case 3:t:{if(Ze(r,r.stateNode.containerInfo),i===null)throw Error(n(387));g=r.pendingProps;var w=r.memoizedState;_=w.element,Gf(i,r),Ll(r,g,null,u);var H=r.memoizedState;if(g=H.cache,Ws(r,qi,g),g!==w.cache&&If(r,[qi],u,!0),Rl(),g=H.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:H.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=cm(i,r,g,u);break t}else if(g!==_){_=rr(Error(n(424)),r),kl(_),r=cm(i,r,g,u);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Di=xr(i.firstChild),wn=r,ti=!0,za=null,Nr=!0,u=Gp(r,null,g,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Tl(),g===_){r=ys(i,r,u);break t}an(i,r,g,u)}r=r.child}return r;case 26:return zc(i,r),i===null?(u=_v(r.type,null,r.pendingProps,null))?r.memoizedState=u:ti||(u=r.type,i=r.pendingProps,g=$c(pe.current).createElement(u),g[nt]=r,g[at]=i,ln(g,u,i),jt(g),r.stateNode=g):r.memoizedState=_v(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ze(r),i===null&&ti&&(g=r.stateNode=pv(r.type,r.pendingProps,pe.current),wn=r,Nr=!0,_=Di,ua(r.type)?(ng=_,Di=xr(g.firstChild)):Di=_),an(i,r,r.pendingProps.children,u),zc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&ti&&((_=g=Di)&&(g=sx(g,r.type,r.pendingProps,Nr),g!==null?(r.stateNode=g,wn=r,Di=xr(g.firstChild),Nr=!1,_=!0):_=!1),_||Fa(r)),ze(r),_=r.type,w=r.pendingProps,H=i!==null?i.memoizedProps:null,g=w.children,$d(_,w)?g=null:H!==null&&$d(_,H)&&(r.flags|=32),r.memoizedState!==null&&(_=Jf(i,r,wb,null,null,u),iu._currentValue=_),zc(i,r),an(i,r,g,u),r.child;case 6:return i===null&&ti&&((i=u=Di)&&(u=ax(u,r.pendingProps,Nr),u!==null?(r.stateNode=u,wn=r,Di=null,i=!0):i=!1),i||Fa(r)),null;case 13:return hm(i,r,u);case 4:return Ze(r,r.stateNode.containerInfo),g=r.pendingProps,i===null?r.child=Ro(r,null,g,u):an(i,r,g,u),r.child;case 11:return nm(i,r,r.type,r.pendingProps,u);case 7:return an(i,r,r.pendingProps,u),r.child;case 8:return an(i,r,r.pendingProps.children,u),r.child;case 12:return an(i,r,r.pendingProps.children,u),r.child;case 10:return g=r.pendingProps,Ws(r,r.type,g.value),an(i,r,g.children,u),r.child;case 9:return _=r.type._context,g=r.pendingProps.children,Va(r),_=dn(_),g=g(_),r.flags|=1,an(i,r,g,u),r.child;case 14:return rm(i,r,r.type,r.pendingProps,u);case 15:return sm(i,r,r.type,r.pendingProps,u);case 19:return dm(i,r,u);case 31:return g=r.pendingProps,u=r.mode,g={mode:g.mode,children:g.children},i===null?(u=Fc(g,u),u.ref=r.ref,r.child=u,u.return=r,r=u):(u=fs(i.child,g),u.ref=r.ref,r.child=u,u.return=r,r=u),r;case 22:return am(i,r,u);case 24:return Va(r),g=dn(qi),i===null?(_=Hf(),_===null&&(_=mi,w=Vf(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=u),_=w),r.memoizedState={parent:g,cache:_},Xf(r),Ws(r,qi,_)):((i.lanes&u)!==0&&(Gf(i,r),Ll(r,null,null,u),Rl()),_=i.memoizedState,w=r.memoizedState,_.parent!==g?(_={parent:g,cache:g},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),Ws(r,qi,g)):(g=w.cache,Ws(r,qi,g),g!==_.cache&&If(r,[qi],u,!0))),an(i,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function bs(i){i.flags|=4}function pm(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wv(r)){if(r=lr.current,r!==null&&((Ge&4194048)===Ge?Br!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Br))throw Dl=Yf,J0;i.flags|=8192}}function Ic(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Z():536870912,i.lanes|=r,Bo|=r)}function Vl(i,r){if(!ti)switch(i.tailMode){case"hidden":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Ti(i){var r=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(r)for(var _=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=g,i.childLanes=u,r}function jb(i,r,u){var g=r.pendingProps;switch(Nf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(r),null;case 1:return Ti(r),null;case 3:return u=r.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),r.memoizedState.cache!==g&&(r.flags|=2048),ms(qi),Be(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Cl(r)?bs(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,q0())),Ti(r),null;case 26:return u=r.memoizedState,i===null?(bs(r),u!==null?(Ti(r),pm(r,u)):(Ti(r),r.flags&=-16777217)):u?u!==i.memoizedState?(bs(r),Ti(r),pm(r,u)):(Ti(r),r.flags&=-16777217):(i.memoizedProps!==g&&bs(r),Ti(r),r.flags&=-16777217),null;case 27:$e(r),u=pe.current;var _=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==g&&bs(r);else{if(!g){if(r.stateNode===null)throw Error(n(166));return Ti(r),null}i=fe.current,Cl(r)?X0(r):(i=pv(_,g,u),r.stateNode=i,bs(r))}return Ti(r),null;case 5:if($e(r),u=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==g&&bs(r);else{if(!g){if(r.stateNode===null)throw Error(n(166));return Ti(r),null}if(i=fe.current,Cl(r))X0(r);else{switch(_=$c(pe.current),i){case 1:i=_.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=_.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?_.createElement(u,{is:g.is}):_.createElement(u)}}i[nt]=r,i[at]=g;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)i.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=i;t:switch(ln(i,u,g),u){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&bs(r)}}return Ti(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==g&&bs(r);else{if(typeof g!="string"&&r.stateNode===null)throw Error(n(166));if(i=pe.current,Cl(r)){if(i=r.stateNode,u=r.memoizedProps,g=null,_=wn,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}i[nt]=r,i=!!(i.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||lv(i.nodeValue,u)),i||Fa(r)}else i=$c(i).createTextNode(g),i[nt]=r,r.stateNode=i}return Ti(r),null;case 13:if(g=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_=Cl(r),g!==null&&g.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[nt]=r}else Tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ti(r),_=!1}else _=q0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(_s(r),r):(_s(r),null)}if(_s(r),(r.flags&128)!==0)return r.lanes=u,r;if(u=g!==null,i=i!==null&&i.memoizedState!==null,u){g=r.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==_&&(g.flags|=2048)}return u!==i&&u&&(r.child.flags|=8192),Ic(r,r.updateQueue),Ti(r),null;case 4:return Be(),i===null&&Wd(r.stateNode.containerInfo),Ti(r),null;case 10:return ms(r.type),Ti(r),null;case 19:if(ue(Wi),_=r.memoizedState,_===null)return Ti(r),null;if(g=(r.flags&128)!==0,w=_.rendering,w===null)if(g)Vl(_,!1);else{if(ji!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(w=Pc(i),w!==null){for(r.flags|=128,Vl(_,!1),i=w.updateQueue,r.updateQueue=i,Ic(r,i),r.subtreeFlags=0,i=u,u=r.child;u!==null;)H0(u,i),u=u.sibling;return ee(Wi,Wi.current&1|2),r.child}i=i.sibling}_.tail!==null&&Fi()>Hc&&(r.flags|=128,g=!0,Vl(_,!1),r.lanes=4194304)}else{if(!g)if(i=Pc(w),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,Ic(r,i),Vl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!ti)return Ti(r),null}else 2*Fi()-_.renderingStartTime>Hc&&u!==536870912&&(r.flags|=128,g=!0,Vl(_,!1),r.lanes=4194304);_.isBackwards?(w.sibling=r.child,r.child=w):(i=_.last,i!==null?i.sibling=w:r.child=w,_.last=w)}return _.tail!==null?(r=_.tail,_.rendering=r,_.tail=r.sibling,_.renderingStartTime=Fi(),r.sibling=null,i=Wi.current,ee(Wi,g?i&1|2:i&1),r):(Ti(r),null);case 22:case 23:return _s(r),Kf(),g=r.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(r.flags|=8192):g&&(r.flags|=8192),g?(u&536870912)!==0&&(r.flags&128)===0&&(Ti(r),r.subtreeFlags&6&&(r.flags|=8192)):Ti(r),u=r.updateQueue,u!==null&&Ic(r,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),g=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),g!==u&&(r.flags|=2048),i!==null&&ue(Ua),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ms(qi),Ti(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function Rb(i,r){switch(Nf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ms(qi),Be(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return $e(r),null;case 13:if(_s(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Tl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ue(Wi),null;case 4:return Be(),null;case 10:return ms(r.type),null;case 22:case 23:return _s(r),Kf(),i!==null&&ue(Ua),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ms(qi),null;case 25:return null;default:return null}}function mm(i,r){switch(Nf(r),r.tag){case 3:ms(qi),Be();break;case 26:case 27:case 5:$e(r);break;case 4:Be();break;case 13:_s(r);break;case 19:ue(Wi);break;case 10:ms(r.type);break;case 22:case 23:_s(r),Kf(),i!==null&&ue(Ua);break;case 24:ms(qi)}}function Ul(i,r){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){g=void 0;var w=u.create,H=u.inst;g=w(),H.destroy=g}u=u.next}while(u!==_)}}catch(tt){hi(r,r.return,tt)}}function ea(i,r,u){try{var g=r.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var w=_.next;g=w;do{if((g.tag&i)===i){var H=g.inst,tt=H.destroy;if(tt!==void 0){H.destroy=void 0,_=r;var ht=u,Mt=tt;try{Mt()}catch(zt){hi(_,ht,zt)}}}g=g.next}while(g!==w)}}catch(zt){hi(r,r.return,zt)}}function vm(i){var r=i.updateQueue;if(r!==null){var u=i.stateNode;try{rp(r,u)}catch(g){hi(i,i.return,g)}}}function _m(i,r,u){u.props=Ya(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(g){hi(i,r,g)}}function Hl(i,r){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof u=="function"?i.refCleanup=u(g):u.current=g}}catch(_){hi(i,r,_)}}function zr(i,r){var u=i.ref,g=i.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(_){hi(i,r,_)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){hi(i,r,_)}else u.current=null}function ym(i){var r=i.type,u=i.memoizedProps,g=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break t;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(_){hi(i,i.return,_)}}function Cd(i,r,u){try{var g=i.stateNode;tx(g,i.type,u,r),g[at]=r}catch(_){hi(i,i.return,_)}}function bm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ua(i.type)||i.tag===4}function Td(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||bm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ua(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kd(i,r,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(i),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=Jc));else if(g!==4&&(g===27&&ua(i.type)&&(u=i.stateNode,r=null),i=i.child,i!==null))for(kd(i,r,u),i=i.sibling;i!==null;)kd(i,r,u),i=i.sibling}function Vc(i,r,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,r?u.insertBefore(i,r):u.appendChild(i);else if(g!==4&&(g===27&&ua(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Vc(i,r,u),i=i.sibling;i!==null;)Vc(i,r,u),i=i.sibling}function xm(i){var r=i.stateNode,u=i.memoizedProps;try{for(var g=i.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);ln(r,g,u),r[nt]=i,r[at]=u}catch(w){hi(i,i.return,w)}}var xs=!1,Bi=!1,Od=!1,Sm=typeof WeakSet=="function"?WeakSet:Set,Ji=null;function Lb(i,r){if(i=i.containerInfo,Qd=sh,i=Gs(i),ja(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break t}var H=0,tt=-1,ht=-1,Mt=0,zt=0,Ht=i,Rt=null;e:for(;;){for(var Lt;Ht!==u||_!==0&&Ht.nodeType!==3||(tt=H+_),Ht!==w||g!==0&&Ht.nodeType!==3||(ht=H+g),Ht.nodeType===3&&(H+=Ht.nodeValue.length),(Lt=Ht.firstChild)!==null;)Rt=Ht,Ht=Lt;for(;;){if(Ht===i)break e;if(Rt===u&&++Mt===_&&(tt=H),Rt===w&&++zt===g&&(ht=H),(Lt=Ht.nextSibling)!==null)break;Ht=Rt,Rt=Ht.parentNode}Ht=Lt}u=tt===-1||ht===-1?null:{start:tt,end:ht}}else u=null}u=u||{start:0,end:0}}else u=null;for(Jd={focusedElem:i,selectionRange:u},sh=!1,Ji=r;Ji!==null;)if(r=Ji,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Ji=i;else for(;Ji!==null;){switch(r=Ji,w=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,u=r,_=w.memoizedProps,w=w.memoizedState,g=u.stateNode;try{var Ee=Ya(u.type,_,u.elementType===u.type);i=g.getSnapshotBeforeUpdate(Ee,w),g.__reactInternalSnapshotBeforeUpdate=i}catch(Te){hi(u,u.return,Te)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,u=i.nodeType,u===9)eg(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":eg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,Ji=i;break}Ji=r.return}}function wm(i,r,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:ia(i,u),g&4&&Ul(5,u);break;case 1:if(ia(i,u),g&4)if(i=u.stateNode,r===null)try{i.componentDidMount()}catch(H){hi(u,u.return,H)}else{var _=Ya(u.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(_,r,i.__reactInternalSnapshotBeforeUpdate)}catch(H){hi(u,u.return,H)}}g&64&&vm(u),g&512&&Hl(u,u.return);break;case 3:if(ia(i,u),g&64&&(i=u.updateQueue,i!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{rp(i,r)}catch(H){hi(u,u.return,H)}}break;case 27:r===null&&g&4&&xm(u);case 26:case 5:ia(i,u),r===null&&g&4&&ym(u),g&512&&Hl(u,u.return);break;case 12:ia(i,u);break;case 13:ia(i,u),g&4&&km(i,u),g&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=Hb.bind(null,u),ox(i,u))));break;case 22:if(g=u.memoizedState!==null||xs,!g){r=r!==null&&r.memoizedState!==null||Bi,_=xs;var w=Bi;xs=g,(Bi=r)&&!w?na(i,u,(u.subtreeFlags&8772)!==0):ia(i,u),xs=_,Bi=w}break;case 30:break;default:ia(i,u)}}function Cm(i){var r=i.alternate;r!==null&&(i.alternate=null,Cm(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ot(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xi=null,Nn=!1;function Ss(i,r,u){for(u=u.child;u!==null;)Tm(i,r,u),u=u.sibling}function Tm(i,r,u){if(c&&typeof c.onCommitFiberUnmount=="function")try{c.onCommitFiberUnmount(s,u)}catch{}switch(u.tag){case 26:Bi||zr(u,r),Ss(i,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Bi||zr(u,r);var g=xi,_=Nn;ua(u.type)&&(xi=u.stateNode,Nn=!1),Ss(i,r,u),Jl(u.stateNode),xi=g,Nn=_;break;case 5:Bi||zr(u,r);case 6:if(g=xi,_=Nn,xi=null,Ss(i,r,u),xi=g,Nn=_,xi!==null)if(Nn)try{(xi.nodeType===9?xi.body:xi.nodeName==="HTML"?xi.ownerDocument.body:xi).removeChild(u.stateNode)}catch(w){hi(u,r,w)}else try{xi.removeChild(u.stateNode)}catch(w){hi(u,r,w)}break;case 18:xi!==null&&(Nn?(i=xi,dv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),au(i)):dv(xi,u.stateNode));break;case 4:g=xi,_=Nn,xi=u.stateNode.containerInfo,Nn=!0,Ss(i,r,u),xi=g,Nn=_;break;case 0:case 11:case 14:case 15:Bi||ea(2,u,r),Bi||ea(4,u,r),Ss(i,r,u);break;case 1:Bi||(zr(u,r),g=u.stateNode,typeof g.componentWillUnmount=="function"&&_m(u,r,g)),Ss(i,r,u);break;case 21:Ss(i,r,u);break;case 22:Bi=(g=Bi)||u.memoizedState!==null,Ss(i,r,u),Bi=g;break;default:Ss(i,r,u)}}function km(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{au(i)}catch(u){hi(r,r.return,u)}}function Pb(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Sm),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Sm),r;default:throw Error(n(435,i.tag))}}function Ad(i,r){var u=Pb(i);r.forEach(function(g){var _=Yb.bind(null,i,g);u.has(g)||(u.add(g),g.then(_,_))})}function qn(i,r){var u=r.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g],w=i,H=r,tt=H;t:for(;tt!==null;){switch(tt.tag){case 27:if(ua(tt.type)){xi=tt.stateNode,Nn=!1;break t}break;case 5:xi=tt.stateNode,Nn=!1;break t;case 3:case 4:xi=tt.stateNode.containerInfo,Nn=!0;break t}tt=tt.return}if(xi===null)throw Error(n(160));Tm(w,H,_),xi=null,Nn=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Om(r,i),r=r.sibling}var br=null;function Om(i,r){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(r,i),Wn(i),g&4&&(ea(3,i,i.return),Ul(3,i),ea(5,i,i.return));break;case 1:qn(r,i),Wn(i),g&512&&(Bi||u===null||zr(u,u.return)),g&64&&xs&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var _=br;if(qn(r,i),Wn(i),g&512&&(Bi||u===null||zr(u,u.return)),g&4){var w=u!==null?u.memoizedState:null;if(g=i.memoizedState,u===null)if(g===null)if(i.stateNode===null){t:{g=i.type,u=i.memoizedProps,_=_.ownerDocument||_;e:switch(g){case"title":w=_.getElementsByTagName("title")[0],(!w||w[xt]||w[nt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(g),_.head.insertBefore(w,_.querySelector("head > title"))),ln(w,g,u),w[nt]=i,jt(w),g=w;break t;case"link":var H=xv("link","href",_).get(g+(u.href||""));if(H){for(var tt=0;tt<H.length;tt++)if(w=H[tt],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){H.splice(tt,1);break e}}w=_.createElement(g),ln(w,g,u),_.head.appendChild(w);break;case"meta":if(H=xv("meta","content",_).get(g+(u.content||""))){for(tt=0;tt<H.length;tt++)if(w=H[tt],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){H.splice(tt,1);break e}}w=_.createElement(g),ln(w,g,u),_.head.appendChild(w);break;default:throw Error(n(468,g))}w[nt]=i,jt(w),g=w}i.stateNode=g}else Sv(_,i.type,i.stateNode);else i.stateNode=bv(_,g,i.memoizedProps);else w!==g?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,g===null?Sv(_,i.type,i.stateNode):bv(_,g,i.memoizedProps)):g===null&&i.stateNode!==null&&Cd(i,i.memoizedProps,u.memoizedProps)}break;case 27:qn(r,i),Wn(i),g&512&&(Bi||u===null||zr(u,u.return)),u!==null&&g&4&&Cd(i,i.memoizedProps,u.memoizedProps);break;case 5:if(qn(r,i),Wn(i),g&512&&(Bi||u===null||zr(u,u.return)),i.flags&32){_=i.stateNode;try{yn(_,"")}catch(Lt){hi(i,i.return,Lt)}}g&4&&i.stateNode!=null&&(_=i.memoizedProps,Cd(i,_,u!==null?u.memoizedProps:_)),g&1024&&(Od=!0);break;case 6:if(qn(r,i),Wn(i),g&4){if(i.stateNode===null)throw Error(n(162));g=i.memoizedProps,u=i.stateNode;try{u.nodeValue=g}catch(Lt){hi(i,i.return,Lt)}}break;case 3:if(ih=null,_=br,br=th(r.containerInfo),qn(r,i),br=_,Wn(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{au(r.containerInfo)}catch(Lt){hi(i,i.return,Lt)}Od&&(Od=!1,Am(i));break;case 4:g=br,br=th(i.stateNode.containerInfo),qn(r,i),Wn(i),br=g;break;case 12:qn(r,i),Wn(i);break;case 13:qn(r,i),Wn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ld=Fi()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,Ad(i,g)));break;case 22:_=i.memoizedState!==null;var ht=u!==null&&u.memoizedState!==null,Mt=xs,zt=Bi;if(xs=Mt||_,Bi=zt||ht,qn(r,i),Bi=zt,xs=Mt,Wn(i),g&8192)t:for(r=i.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(u===null||ht||xs||Bi||Xa(i)),u=null,r=i;;){if(r.tag===5||r.tag===26){if(u===null){ht=u=r;try{if(w=ht.stateNode,_)H=w.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{tt=ht.stateNode;var Ht=ht.memoizedProps.style,Rt=Ht!=null&&Ht.hasOwnProperty("display")?Ht.display:null;tt.style.display=Rt==null||typeof Rt=="boolean"?"":(""+Rt).trim()}}catch(Lt){hi(ht,ht.return,Lt)}}}else if(r.tag===6){if(u===null){ht=r;try{ht.stateNode.nodeValue=_?"":ht.memoizedProps}catch(Lt){hi(ht,ht.return,Lt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}g&4&&(g=i.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Ad(i,u))));break;case 19:qn(r,i),Wn(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,Ad(i,g)));break;case 30:break;case 21:break;default:qn(r,i),Wn(i)}}function Wn(i){var r=i.flags;if(r&2){try{for(var u,g=i.return;g!==null;){if(bm(g)){u=g;break}g=g.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var _=u.stateNode,w=Td(i);Vc(i,w,_);break;case 5:var H=u.stateNode;u.flags&32&&(yn(H,""),u.flags&=-33);var tt=Td(i);Vc(i,tt,H);break;case 3:case 4:var ht=u.stateNode.containerInfo,Mt=Td(i);kd(i,Mt,ht);break;default:throw Error(n(161))}}catch(zt){hi(i,i.return,zt)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Am(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Am(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ia(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)wm(i,r.alternate,r),r=r.sibling}function Xa(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ea(4,r,r.return),Xa(r);break;case 1:zr(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&_m(r,r.return,u),Xa(r);break;case 27:Jl(r.stateNode);case 26:case 5:zr(r,r.return),Xa(r);break;case 22:r.memoizedState===null&&Xa(r);break;case 30:Xa(r);break;default:Xa(r)}i=i.sibling}}function na(i,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var g=r.alternate,_=i,w=r,H=w.flags;switch(w.tag){case 0:case 11:case 15:na(_,w,u),Ul(4,w);break;case 1:if(na(_,w,u),g=w,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Mt){hi(g,g.return,Mt)}if(g=w,_=g.updateQueue,_!==null){var tt=g.stateNode;try{var ht=_.shared.hiddenCallbacks;if(ht!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ht.length;_++)np(ht[_],tt)}catch(Mt){hi(g,g.return,Mt)}}u&&H&64&&vm(w),Hl(w,w.return);break;case 27:xm(w);case 26:case 5:na(_,w,u),u&&g===null&&H&4&&ym(w),Hl(w,w.return);break;case 12:na(_,w,u);break;case 13:na(_,w,u),u&&H&4&&km(_,w);break;case 22:w.memoizedState===null&&na(_,w,u),Hl(w,w.return);break;case 30:break;default:na(_,w,u)}r=r.sibling}}function Ed(i,r){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Al(u))}function Md(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Al(i))}function Fr(i,r,u,g){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Em(i,r,u,g),r=r.sibling}function Em(i,r,u,g){var _=r.flags;switch(r.tag){case 0:case 11:case 15:Fr(i,r,u,g),_&2048&&Ul(9,r);break;case 1:Fr(i,r,u,g);break;case 3:Fr(i,r,u,g),_&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Al(i)));break;case 12:if(_&2048){Fr(i,r,u,g),i=r.stateNode;try{var w=r.memoizedProps,H=w.id,tt=w.onPostCommit;typeof tt=="function"&&tt(H,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ht){hi(r,r.return,ht)}}else Fr(i,r,u,g);break;case 13:Fr(i,r,u,g);break;case 23:break;case 22:w=r.stateNode,H=r.alternate,r.memoizedState!==null?w._visibility&2?Fr(i,r,u,g):Yl(i,r):w._visibility&2?Fr(i,r,u,g):(w._visibility|=2,Lo(i,r,u,g,(r.subtreeFlags&10256)!==0)),_&2048&&Ed(H,r);break;case 24:Fr(i,r,u,g),_&2048&&Md(r.alternate,r);break;default:Fr(i,r,u,g)}}function Lo(i,r,u,g,_){for(_=_&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var w=i,H=r,tt=u,ht=g,Mt=H.flags;switch(H.tag){case 0:case 11:case 15:Lo(w,H,tt,ht,_),Ul(8,H);break;case 23:break;case 22:var zt=H.stateNode;H.memoizedState!==null?zt._visibility&2?Lo(w,H,tt,ht,_):Yl(w,H):(zt._visibility|=2,Lo(w,H,tt,ht,_)),_&&Mt&2048&&Ed(H.alternate,H);break;case 24:Lo(w,H,tt,ht,_),_&&Mt&2048&&Md(H.alternate,H);break;default:Lo(w,H,tt,ht,_)}r=r.sibling}}function Yl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=i,g=r,_=g.flags;switch(g.tag){case 22:Yl(u,g),_&2048&&Ed(g.alternate,g);break;case 24:Yl(u,g),_&2048&&Md(g.alternate,g);break;default:Yl(u,g)}r=r.sibling}}var Xl=8192;function Po(i){if(i.subtreeFlags&Xl)for(i=i.child;i!==null;)Mm(i),i=i.sibling}function Mm(i){switch(i.tag){case 26:Po(i),i.flags&Xl&&i.memoizedState!==null&&bx(br,i.memoizedState,i.memoizedProps);break;case 5:Po(i);break;case 3:case 4:var r=br;br=th(i.stateNode.containerInfo),Po(i),br=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Xl,Xl=16777216,Po(i),Xl=r):Po(i));break;default:Po(i)}}function Dm(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Gl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var g=r[u];Ji=g,Rm(g,i)}Dm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jm(i),i=i.sibling}function jm(i){switch(i.tag){case 0:case 11:case 15:Gl(i),i.flags&2048&&ea(9,i,i.return);break;case 3:Gl(i);break;case 12:Gl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Uc(i)):Gl(i);break;default:Gl(i)}}function Uc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var g=r[u];Ji=g,Rm(g,i)}Dm(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ea(8,r,r.return),Uc(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,Uc(r));break;default:Uc(r)}i=i.sibling}}function Rm(i,r){for(;Ji!==null;){var u=Ji;switch(u.tag){case 0:case 11:case 15:ea(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Al(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Ji=g;else t:for(u=i;Ji!==null;){g=Ji;var _=g.sibling,w=g.return;if(Cm(g),g===u){Ji=null;break t}if(_!==null){_.return=w,Ji=_;break t}Ji=w}}}var Nb={getCacheForType:function(i){var r=dn(qi),u=r.data.get(i);return u===void 0&&(u=i(),r.data.set(i,u)),u}},Bb=typeof WeakMap=="function"?WeakMap:Map,ai=0,mi=null,Ve=null,Ge=0,oi=0,Zn=null,ra=!1,No=!1,Dd=!1,ws=0,ji=0,sa=0,Ga=0,jd=0,ur=0,Bo=0,ql=null,Bn=null,Rd=!1,Ld=0,Hc=1/0,Yc=null,aa=null,on=0,oa=null,zo=null,Fo=0,Pd=0,Nd=null,Lm=null,Wl=0,Bd=null;function Kn(){if((ai&2)!==0&&Ge!==0)return Ge&-Ge;if(ut.T!==null){var i=ko;return i!==0?i:Yd()}return Q()}function Pm(){ur===0&&(ur=(Ge&536870912)===0||ti?j():536870912);var i=lr.current;return i!==null&&(i.flags|=32),ur}function Qn(i,r,u){(i===mi&&(oi===2||oi===9)||i.cancelPendingCommit!==null)&&(Io(i,0),la(i,Ge,ur,!1)),q(i,u),((ai&2)===0||i!==mi)&&(i===mi&&((ai&2)===0&&(Ga|=u),ji===4&&la(i,Ge,ur,!1)),Ir(i))}function Nm(i,r,u){if((ai&6)!==0)throw Error(n(327));var g=!u&&(r&124)===0&&(r&i.expiredLanes)===0||B(i,r),_=g?Ib(i,r):Id(i,r,!0),w=g;do{if(_===0){No&&!g&&la(i,r,0,!1);break}else{if(u=i.current.alternate,w&&!zb(u)){_=Id(i,r,!1),w=!1;continue}if(_===2){if(w=r,i.errorRecoveryDisabledLanes&w)var H=0;else H=i.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){r=H;t:{var tt=i;_=ql;var ht=tt.current.memoizedState.isDehydrated;if(ht&&(Io(tt,H).flags|=256),H=Id(tt,H,!1),H!==2){if(Dd&&!ht){tt.errorRecoveryDisabledLanes|=w,Ga|=w,_=4;break t}w=Bn,Bn=_,w!==null&&(Bn===null?Bn=w:Bn.push.apply(Bn,w))}_=H}if(w=!1,_!==2)continue}}if(_===1){Io(i,0),la(i,r,0,!0);break}t:{switch(g=i,w=_,w){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:la(g,r,ur,!ra);break t;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(_=Ld+300-Fi(),10<_)){if(la(g,r,ur,!ra),N(g,0,!0)!==0)break t;g.timeoutHandle=hv(Bm.bind(null,g,u,Bn,Yc,Rd,r,ur,Ga,Bo,ra,w,2,-0,0),_);break t}Bm(g,u,Bn,Yc,Rd,r,ur,Ga,Bo,ra,w,0,-0,0)}}break}while(!0);Ir(i)}function Bm(i,r,u,g,_,w,H,tt,ht,Mt,zt,Ht,Rt,Lt){if(i.timeoutHandle=-1,Ht=r.subtreeFlags,(Ht&8192||(Ht&16785408)===16785408)&&(eu={stylesheets:null,count:0,unsuspend:yx},Mm(r),Ht=xx(),Ht!==null)){i.cancelPendingCommit=Ht(Ym.bind(null,i,r,w,u,g,_,H,tt,ht,zt,1,Rt,Lt)),la(i,w,H,!Mt);return}Ym(i,r,w,u,g,_,H,tt,ht)}function zb(i){for(var r=i;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var _=u[g],w=_.getSnapshot;_=_.value;try{if(!Sn(w(),_))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function la(i,r,u,g){r&=~jd,r&=~Ga,i.suspendedLanes|=r,i.pingedLanes&=~r,g&&(i.warmLanes|=r),g=i.expirationTimes;for(var _=r;0<_;){var w=31-m(_),H=1<<w;g[w]=-1,_&=~H}u!==0&&Y(i,u,r)}function Xc(){return(ai&6)===0?(Zl(0),!1):!0}function zd(){if(Ve!==null){if(oi===0)var i=Ve.return;else i=Ve,ps=Ia=null,ed(i),jo=null,Fl=0,i=Ve;for(;i!==null;)mm(i.alternate,i),i=i.return;Ve=null}}function Io(i,r){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,ix(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),zd(),mi=i,Ve=u=fs(i.current,null),Ge=r,oi=0,Zn=null,ra=!1,No=B(i,r),Dd=!1,Bo=ur=jd=Ga=sa=ji=0,Bn=ql=null,Rd=!1,(r&8)!==0&&(r|=r&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=r;0<g;){var _=31-m(g),w=1<<_;r|=i[_],g&=~w}return ws=r,dc(),u}function zm(i,r){Fe=null,ut.H=jc,r===Ml||r===Sc?(r=ep(),oi=3):r===J0?(r=ep(),oi=4):oi=r===im?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Zn=r,Ve===null&&(ji=1,Bc(i,rr(r,i.current)))}function Fm(){var i=ut.H;return ut.H=jc,i===null?jc:i}function Im(){var i=ut.A;return ut.A=Nb,i}function Fd(){ji=4,ra||(Ge&4194048)!==Ge&&lr.current!==null||(No=!0),(sa&134217727)===0&&(Ga&134217727)===0||mi===null||la(mi,Ge,ur,!1)}function Id(i,r,u){var g=ai;ai|=2;var _=Fm(),w=Im();(mi!==i||Ge!==r)&&(Yc=null,Io(i,r)),r=!1;var H=ji;t:do try{if(oi!==0&&Ve!==null){var tt=Ve,ht=Zn;switch(oi){case 8:zd(),H=6;break t;case 3:case 2:case 9:case 6:lr.current===null&&(r=!0);var Mt=oi;if(oi=0,Zn=null,Vo(i,tt,ht,Mt),u&&No){H=0;break t}break;default:Mt=oi,oi=0,Zn=null,Vo(i,tt,ht,Mt)}}Fb(),H=ji;break}catch(zt){zm(i,zt)}while(!0);return r&&i.shellSuspendCounter++,ps=Ia=null,ai=g,ut.H=_,ut.A=w,Ve===null&&(mi=null,Ge=0,dc()),H}function Fb(){for(;Ve!==null;)Vm(Ve)}function Ib(i,r){var u=ai;ai|=2;var g=Fm(),_=Im();mi!==i||Ge!==r?(Yc=null,Hc=Fi()+500,Io(i,r)):No=B(i,r);t:do try{if(oi!==0&&Ve!==null){r=Ve;var w=Zn;e:switch(oi){case 1:oi=0,Zn=null,Vo(i,r,w,1);break;case 2:case 9:if($0(w)){oi=0,Zn=null,Um(r);break}r=function(){oi!==2&&oi!==9||mi!==i||(oi=7),Ir(i)},w.then(r,r);break t;case 3:oi=7;break t;case 4:oi=5;break t;case 7:$0(w)?(oi=0,Zn=null,Um(r)):(oi=0,Zn=null,Vo(i,r,w,7));break;case 5:var H=null;switch(Ve.tag){case 26:H=Ve.memoizedState;case 5:case 27:var tt=Ve;if(!H||wv(H)){oi=0,Zn=null;var ht=tt.sibling;if(ht!==null)Ve=ht;else{var Mt=tt.return;Mt!==null?(Ve=Mt,Gc(Mt)):Ve=null}break e}}oi=0,Zn=null,Vo(i,r,w,5);break;case 6:oi=0,Zn=null,Vo(i,r,w,6);break;case 8:zd(),ji=6;break t;default:throw Error(n(462))}}Vb();break}catch(zt){zm(i,zt)}while(!0);return ps=Ia=null,ut.H=g,ut.A=_,ai=u,Ve!==null?0:(mi=null,Ge=0,dc(),ji)}function Vb(){for(;Ve!==null&&!ts();)Vm(Ve)}function Vm(i){var r=gm(i.alternate,i,ws);i.memoizedProps=i.pendingProps,r===null?Gc(i):Ve=r}function Um(i){var r=i,u=r.alternate;switch(r.tag){case 15:case 0:r=lm(u,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=lm(u,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:ed(r);default:mm(u,r),r=Ve=H0(r,ws),r=gm(u,r,ws)}i.memoizedProps=i.pendingProps,r===null?Gc(i):Ve=r}function Vo(i,r,u,g){ps=Ia=null,ed(r),jo=null,Fl=0;var _=r.return;try{if(Mb(i,_,r,u,Ge)){ji=1,Bc(i,rr(u,i.current)),Ve=null;return}}catch(w){if(_!==null)throw Ve=_,w;ji=1,Bc(i,rr(u,i.current)),Ve=null;return}r.flags&32768?(ti||g===1?i=!0:No||(Ge&536870912)!==0?i=!1:(ra=i=!0,(g===2||g===9||g===3||g===6)&&(g=lr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Hm(r,i)):Gc(r)}function Gc(i){var r=i;do{if((r.flags&32768)!==0){Hm(r,ra);return}i=r.return;var u=jb(r.alternate,r,ws);if(u!==null){Ve=u;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);ji===0&&(ji=5)}function Hm(i,r){do{var u=Rb(i.alternate,i);if(u!==null){u.flags&=32767,Ve=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=u}while(i!==null);ji=6,Ve=null}function Ym(i,r,u,g,_,w,H,tt,ht){i.cancelPendingCommit=null;do qc();while(on!==0);if((ai&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(w=r.lanes|r.childLanes,w|=Mf,P(i,u,w,H,tt,ht),i===mi&&(Ve=mi=null,Ge=0),zo=r,oa=i,Fo=u,Pd=w,Nd=_,Lm=g,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Xb(ri,function(){return Zm(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||g){g=ut.T,ut.T=null,_=Gt.p,Gt.p=2,H=ai,ai|=4;try{Lb(i,r,u)}finally{ai=H,Gt.p=_,ut.T=g}}on=1,Xm(),Gm(),qm()}}function Xm(){if(on===1){on=0;var i=oa,r=zo,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=ut.T,ut.T=null;var g=Gt.p;Gt.p=2;var _=ai;ai|=4;try{Om(r,i);var w=Jd,H=Gs(i.containerInfo),tt=w.focusedElem,ht=w.selectionRange;if(H!==tt&&tt&&tt.ownerDocument&&hc(tt.ownerDocument.documentElement,tt)){if(ht!==null&&ja(tt)){var Mt=ht.start,zt=ht.end;if(zt===void 0&&(zt=Mt),"selectionStart"in tt)tt.selectionStart=Mt,tt.selectionEnd=Math.min(zt,tt.value.length);else{var Ht=tt.ownerDocument||document,Rt=Ht&&Ht.defaultView||window;if(Rt.getSelection){var Lt=Rt.getSelection(),Ee=tt.textContent.length,Te=Math.min(ht.start,Ee),ci=ht.end===void 0?Te:Math.min(ht.end,Ee);!Lt.extend&&Te>ci&&(H=ci,ci=Te,Te=H);var Ct=yo(tt,Te),yt=yo(tt,ci);if(Ct&&yt&&(Lt.rangeCount!==1||Lt.anchorNode!==Ct.node||Lt.anchorOffset!==Ct.offset||Lt.focusNode!==yt.node||Lt.focusOffset!==yt.offset)){var At=Ht.createRange();At.setStart(Ct.node,Ct.offset),Lt.removeAllRanges(),Te>ci?(Lt.addRange(At),Lt.extend(yt.node,yt.offset)):(At.setEnd(yt.node,yt.offset),Lt.addRange(At))}}}}for(Ht=[],Lt=tt;Lt=Lt.parentNode;)Lt.nodeType===1&&Ht.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<Ht.length;tt++){var Vt=Ht[tt];Vt.element.scrollLeft=Vt.left,Vt.element.scrollTop=Vt.top}}sh=!!Qd,Jd=Qd=null}finally{ai=_,Gt.p=g,ut.T=u}}i.current=r,on=2}}function Gm(){if(on===2){on=0;var i=oa,r=zo,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=ut.T,ut.T=null;var g=Gt.p;Gt.p=2;var _=ai;ai|=4;try{wm(i,r.alternate,r)}finally{ai=_,Gt.p=g,ut.T=u}}on=3}}function qm(){if(on===4||on===3){on=0,ho();var i=oa,r=zo,u=Fo,g=Lm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?on=5:(on=0,zo=oa=null,Wm(i,i.pendingLanes));var _=i.pendingLanes;if(_===0&&(aa=null),K(u),r=r.stateNode,c&&typeof c.onCommitFiberRoot=="function")try{c.onCommitFiberRoot(s,r,void 0,(r.current.flags&128)===128)}catch{}if(g!==null){r=ut.T,_=Gt.p,Gt.p=2,ut.T=null;try{for(var w=i.onRecoverableError,H=0;H<g.length;H++){var tt=g[H];w(tt.value,{componentStack:tt.stack})}}finally{ut.T=r,Gt.p=_}}(Fo&3)!==0&&qc(),Ir(i),_=i.pendingLanes,(u&4194090)!==0&&(_&42)!==0?i===Bd?Wl++:(Wl=0,Bd=i):Wl=0,Zl(0)}}function Wm(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Al(r)))}function qc(i){return Xm(),Gm(),qm(),Zm()}function Zm(){if(on!==5)return!1;var i=oa,r=Pd;Pd=0;var u=K(Fo),g=ut.T,_=Gt.p;try{Gt.p=32>u?32:u,ut.T=null,u=Nd,Nd=null;var w=oa,H=Fo;if(on=0,zo=oa=null,Fo=0,(ai&6)!==0)throw Error(n(331));var tt=ai;if(ai|=4,jm(w.current),Em(w,w.current,H,u),ai=tt,Zl(0,!1),c&&typeof c.onPostCommitFiberRoot=="function")try{c.onPostCommitFiberRoot(s,w)}catch{}return!0}finally{Gt.p=_,ut.T=g,Wm(i,r)}}function Km(i,r,u){r=rr(u,r),r=pd(i.stateNode,r,2),i=Qs(i,r,2),i!==null&&(q(i,2),Ir(i))}function hi(i,r,u){if(i.tag===3)Km(i,i,u);else for(;r!==null;){if(r.tag===3){Km(r,i,u);break}else if(r.tag===1){var g=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(aa===null||!aa.has(g))){i=rr(u,i),u=tm(2),g=Qs(r,u,2),g!==null&&(em(u,g,r,i),q(g,2),Ir(g));break}}r=r.return}}function Vd(i,r,u){var g=i.pingCache;if(g===null){g=i.pingCache=new Bb;var _=new Set;g.set(r,_)}else _=g.get(r),_===void 0&&(_=new Set,g.set(r,_));_.has(u)||(Dd=!0,_.add(u),i=Ub.bind(null,i,r,u),r.then(i,i))}function Ub(i,r,u){var g=i.pingCache;g!==null&&g.delete(r),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,mi===i&&(Ge&u)===u&&(ji===4||ji===3&&(Ge&62914560)===Ge&&300>Fi()-Ld?(ai&2)===0&&Io(i,0):jd|=u,Bo===Ge&&(Bo=0)),Ir(i)}function Qm(i,r){r===0&&(r=Z()),i=So(i,r),i!==null&&(q(i,r),Ir(i))}function Hb(i){var r=i.memoizedState,u=0;r!==null&&(u=r.retryLane),Qm(i,u)}function Yb(i,r){var u=0;switch(i.tag){case 13:var g=i.stateNode,_=i.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(r),Qm(i,u)}function Xb(i,r){return tr(i,r)}var Wc=null,Uo=null,Ud=!1,Zc=!1,Hd=!1,qa=0;function Ir(i){i!==Uo&&i.next===null&&(Uo===null?Wc=Uo=i:Uo=Uo.next=i),Zc=!0,Ud||(Ud=!0,qb())}function Zl(i,r){if(!Hd&&Zc){Hd=!0;do for(var u=!1,g=Wc;g!==null;){if(i!==0){var _=g.pendingLanes;if(_===0)var w=0;else{var H=g.suspendedLanes,tt=g.pingedLanes;w=(1<<31-m(42|i)+1)-1,w&=_&~(H&~tt),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,ev(g,w))}else w=Ge,w=N(g,g===mi?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||B(g,w)||(u=!0,ev(g,w));g=g.next}while(u);Hd=!1}}function Gb(){Jm()}function Jm(){Zc=Ud=!1;var i=0;qa!==0&&(ex()&&(i=qa),qa=0);for(var r=Fi(),u=null,g=Wc;g!==null;){var _=g.next,w=$m(g,r);w===0?(g.next=null,u===null?Wc=_:u.next=_,_===null&&(Uo=u)):(u=g,(i!==0||(w&3)!==0)&&(Zc=!0)),g=_}Zl(i)}function $m(i,r){for(var u=i.suspendedLanes,g=i.pingedLanes,_=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var H=31-m(w),tt=1<<H,ht=_[H];ht===-1?((tt&u)===0||(tt&g)!==0)&&(_[H]=R(tt,r)):ht<=r&&(i.expiredLanes|=tt),w&=~tt}if(r=mi,u=Ge,u=N(i,i===r?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,u===0||i===r&&(oi===2||oi===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&Ls(g),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||B(i,u)){if(r=u&-u,r===i.callbackPriority)return r;switch(g!==null&&Ls(g),K(u)){case 2:case 8:u=ns;break;case 32:u=ri;break;case 268435456:u=Ye;break;default:u=ri}return g=tv.bind(null,i),u=tr(u,g),i.callbackPriority=r,i.callbackNode=u,r}return g!==null&&g!==null&&Ls(g),i.callbackPriority=2,i.callbackNode=null,2}function tv(i,r){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(qc()&&i.callbackNode!==u)return null;var g=Ge;return g=N(i,i===mi?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(Nm(i,g,r),$m(i,Fi()),i.callbackNode!=null&&i.callbackNode===u?tv.bind(null,i):null)}function ev(i,r){if(qc())return null;Nm(i,r,!0)}function qb(){nx(function(){(ai&6)!==0?tr(is,Gb):Jm()})}function Yd(){return qa===0&&(qa=j()),qa}function iv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:nn(""+i)}function nv(i,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,i.id&&u.setAttribute("form",i.id),r.parentNode.insertBefore(u,r),i=new FormData(i),u.parentNode.removeChild(u),i}function Wb(i,r,u,g,_){if(r==="submit"&&u&&u.stateNode===_){var w=iv((_[at]||null).action),H=g.submitter;H&&(r=(r=H[at]||null)?iv(r.formAction):H.getAttribute("formAction"),r!==null&&(w=r,H=null));var tt=new xn("action","action",null,g,_);i.push({event:tt,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(qa!==0){var ht=H?nv(_,H):new FormData(_);cd(u,{pending:!0,data:ht,method:_.method,action:w},null,ht)}}else typeof w=="function"&&(tt.preventDefault(),ht=H?nv(_,H):new FormData(_),cd(u,{pending:!0,data:ht,method:_.method,action:w},w,ht))},currentTarget:_}]})}}for(var Xd=0;Xd<Ef.length;Xd++){var Gd=Ef[Xd],Zb=Gd.toLowerCase(),Kb=Gd[0].toUpperCase()+Gd.slice(1);yr(Zb,"on"+Kb)}yr(Ce,"onAnimationEnd"),yr(Ae,"onAnimationIteration"),yr(Xe,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(Xn,"onTransitionRun"),yr(hs,"onTransitionStart"),yr(wl,"onTransitionCancel"),yr(La,"onTransitionEnd"),oe("onMouseEnter",["mouseout","mouseover"]),oe("onMouseLeave",["mouseout","mouseover"]),oe("onPointerEnter",["pointerout","pointerover"]),oe("onPointerLeave",["pointerout","pointerover"]),ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function rv(i,r){r=(r&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],_=g.event;g=g.listeners;t:{var w=void 0;if(r)for(var H=g.length-1;0<=H;H--){var tt=g[H],ht=tt.instance,Mt=tt.currentTarget;if(tt=tt.listener,ht!==w&&_.isPropagationStopped())break t;w=tt,_.currentTarget=Mt;try{w(_)}catch(zt){Nc(zt)}_.currentTarget=null,w=ht}else for(H=0;H<g.length;H++){if(tt=g[H],ht=tt.instance,Mt=tt.currentTarget,tt=tt.listener,ht!==w&&_.isPropagationStopped())break t;w=tt,_.currentTarget=Mt;try{w(_)}catch(zt){Nc(zt)}_.currentTarget=null,w=ht}}}}function Ue(i,r){var u=r[rt];u===void 0&&(u=r[rt]=new Set);var g=i+"__bubble";u.has(g)||(sv(r,i,2,!1),u.add(g))}function qd(i,r,u){var g=0;r&&(g|=4),sv(u,i,g,r)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Wd(i){if(!i[Kc]){i[Kc]=!0,Bt.forEach(function(u){u!=="selectionchange"&&(Qb.has(u)||qd(u,!1,i),qd(u,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Kc]||(r[Kc]=!0,qd("selectionchange",!1,r))}}function sv(i,r,u,g){switch(Ev(r)){case 2:var _=Cx;break;case 8:_=Tx;break;default:_=lg}u=_.bind(null,r,u,i),_=void 0,!st||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),g?_!==void 0?i.addEventListener(r,u,{capture:!0,passive:_}):i.addEventListener(r,u,!0):_!==void 0?i.addEventListener(r,u,{passive:_}):i.addEventListener(r,u,!1)}function Zd(i,r,u,g,_){var w=g;if((r&1)===0&&(r&2)===0&&g!==null)t:for(;;){if(g===null)return;var H=g.tag;if(H===3||H===4){var tt=g.stateNode.containerInfo;if(tt===_)break;if(H===4)for(H=g.return;H!==null;){var ht=H.tag;if((ht===3||ht===4)&&H.stateNode.containerInfo===_)return;H=H.return}for(;tt!==null;){if(H=It(tt),H===null)return;if(ht=H.tag,ht===5||ht===6||ht===26||ht===27){g=w=H;continue t}tt=tt.parentNode}}g=g.return}x(function(){var Mt=w,zt=Hn(u),Ht=[];t:{var Rt=fc.get(i);if(Rt!==void 0){var Lt=xn,Ee=i;switch(i){case"keypress":if(De(u)===0)break t;case"keydown":case"keyup":Lt=Sf;break;case"focusin":Ee="focus",Lt=Is;break;case"focusout":Ee="blur",Lt=Is;break;case"beforeblur":case"afterblur":Lt=Is;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Tf;break;case Ce:case Ae:case Xe:Lt=po;break;case La:Lt=ls;break;case"scroll":case"scrollend":Lt=jr;break;case"wheel":Lt=ac;break;case"copy":case"cut":case"paste":Lt=os;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=sc;break;case"toggle":case"beforetoggle":Lt=Of}var Te=(r&4)!==0,ci=!Te&&(i==="scroll"||i==="scrollend"),Ct=Te?Rt!==null?Rt+"Capture":null:Rt;Te=[];for(var yt=Mt,At;yt!==null;){var Vt=yt;if(At=Vt.stateNode,Vt=Vt.tag,Vt!==5&&Vt!==26&&Vt!==27||At===null||Ct===null||(Vt=L(yt,Ct),Vt!=null&&Te.push(Ql(yt,Vt,At))),ci)break;yt=yt.return}0<Te.length&&(Rt=new Lt(Rt,Ee,null,u,zt),Ht.push({event:Rt,listeners:Te}))}}if((r&7)===0){t:{if(Rt=i==="mouseover"||i==="pointerover",Lt=i==="mouseout"||i==="pointerout",Rt&&u!==rn&&(Ee=u.relatedTarget||u.fromElement)&&(It(Ee)||Ee[dt]))break t;if((Lt||Rt)&&(Rt=zt.window===zt?zt:(Rt=zt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,Lt?(Ee=u.relatedTarget||u.toElement,Lt=Mt,Ee=Ee?It(Ee):null,Ee!==null&&(ci=o(Ee),Te=Ee.tag,Ee!==ci||Te!==5&&Te!==27&&Te!==6)&&(Ee=null)):(Lt=null,Ee=Mt),Lt!==Ee)){if(Te=dl,Vt="onMouseLeave",Ct="onMouseEnter",yt="mouse",(i==="pointerout"||i==="pointerover")&&(Te=sc,Vt="onPointerLeave",Ct="onPointerEnter",yt="pointer"),ci=Lt==null?Rt:$t(Lt),At=Ee==null?Rt:$t(Ee),Rt=new Te(Vt,yt+"leave",Lt,u,zt),Rt.target=ci,Rt.relatedTarget=At,Vt=null,It(zt)===Mt&&(Te=new Te(Ct,yt+"enter",Ee,u,zt),Te.target=At,Te.relatedTarget=ci,Vt=Te),ci=Vt,Lt&&Ee)e:{for(Te=Lt,Ct=Ee,yt=0,At=Te;At;At=Ho(At))yt++;for(At=0,Vt=Ct;Vt;Vt=Ho(Vt))At++;for(;0<yt-At;)Te=Ho(Te),yt--;for(;0<At-yt;)Ct=Ho(Ct),At--;for(;yt--;){if(Te===Ct||Ct!==null&&Te===Ct.alternate)break e;Te=Ho(Te),Ct=Ho(Ct)}Te=null}else Te=null;Lt!==null&&av(Ht,Rt,Lt,Te,!1),Ee!==null&&ci!==null&&av(Ht,ci,Ee,Te,!0)}}t:{if(Rt=Mt?$t(Mt):window,Lt=Rt.nodeName&&Rt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Rt.type==="file")var de=Ea;else if(vo(Rt))if(lc)de=Ki;else{de=uc;var Ie=xl}else Lt=Rt.nodeName,!Lt||Lt.toLowerCase()!=="input"||Rt.type!=="checkbox"&&Rt.type!=="radio"?Mt&&fn(Mt.elementType)&&(de=Ea):de=cc;if(de&&(de=de(i,Mt))){pi(Ht,de,u,zt);break t}Ie&&Ie(i,Rt,Mt),i==="focusout"&&Mt&&Rt.type==="number"&&Mt.memoizedProps.value!=null&&Bs(Rt,"number",Rt.value)}switch(Ie=Mt?$t(Mt):window,i){case"focusin":(vo(Ie)||Ie.contentEditable==="true")&&(qs=Ie,bo=Mt,cs=null);break;case"focusout":cs=bo=qs=null;break;case"mousedown":Ra=!0;break;case"contextmenu":case"mouseup":case"dragend":Ra=!1,_r(Ht,u,zt);break;case"selectionchange":if(Af)break;case"keydown":case"keyup":_r(Ht,u,zt)}var ye;if(ml)t:{switch(i){case"compositionstart":var ke="onCompositionStart";break t;case"compositionend":ke="onCompositionEnd";break t;case"compositionupdate":ke="onCompositionUpdate";break t}ke=void 0}else us?mo(i,u)&&(ke="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ke="onCompositionStart");ke&&(vl&&u.locale!=="ko"&&(us||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&us&&(ye=Se()):(Et=zt,Qt="value"in Et?Et.value:Et.textContent,us=!0)),Ie=Qc(Mt,ke),0<Ie.length&&(ke=new Pi(ke,i,null,u,zt),Ht.push({event:ke,listeners:Ie}),ye?ke.data=ye:(ye=yl(u),ye!==null&&(ke.data=ye)))),(ye=Hs?Gi(i,u):Lr(i,u))&&(ke=Qc(Mt,"onBeforeInput"),0<ke.length&&(Ie=new Pi("onBeforeInput","beforeinput",null,u,zt),Ht.push({event:Ie,listeners:ke}),Ie.data=ye)),Wb(Ht,i,Mt,u,zt)}rv(Ht,r)})}function Ql(i,r,u){return{instance:i,listener:r,currentTarget:u}}function Qc(i,r){for(var u=r+"Capture",g=[];i!==null;){var _=i,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=L(i,u),_!=null&&g.unshift(Ql(i,_,w)),_=L(i,r),_!=null&&g.push(Ql(i,_,w))),i.tag===3)return g;i=i.return}return[]}function Ho(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function av(i,r,u,g,_){for(var w=r._reactName,H=[];u!==null&&u!==g;){var tt=u,ht=tt.alternate,Mt=tt.stateNode;if(tt=tt.tag,ht!==null&&ht===g)break;tt!==5&&tt!==26&&tt!==27||Mt===null||(ht=Mt,_?(Mt=L(u,w),Mt!=null&&H.unshift(Ql(u,Mt,ht))):_||(Mt=L(u,w),Mt!=null&&H.push(Ql(u,Mt,ht)))),u=u.return}H.length!==0&&i.push({event:r,listeners:H})}var Jb=/\r\n?/g,$b=/\u0000|\uFFFD/g;function ov(i){return(typeof i=="string"?i:""+i).replace(Jb,`
`).replace($b,"")}function lv(i,r){return r=ov(r),ov(i)===r}function Jc(){}function ui(i,r,u,g,_,w){switch(u){case"children":typeof g=="string"?r==="body"||r==="textarea"&&g===""||yn(i,g):(typeof g=="number"||typeof g=="bigint")&&r!=="body"&&yn(i,""+g);break;case"className":di(i,"class",g);break;case"tabIndex":di(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":di(i,u,g);break;case"style":er(i,g,w);break;case"data":if(r!=="object"){di(i,"data",g);break}case"src":case"href":if(g===""&&(r!=="a"||u!=="href")){i.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=nn(""+g),i.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(r!=="input"&&ui(i,r,"name",_.name,_,null),ui(i,r,"formEncType",_.formEncType,_,null),ui(i,r,"formMethod",_.formMethod,_,null),ui(i,r,"formTarget",_.formTarget,_,null)):(ui(i,r,"encType",_.encType,_,null),ui(i,r,"method",_.method,_,null),ui(i,r,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=nn(""+g),i.setAttribute(u,g);break;case"onClick":g!=null&&(i.onclick=Jc);break;case"onScroll":g!=null&&Ue("scroll",i);break;case"onScrollEnd":g!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}u=nn(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""+g):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":g===!0?i.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,g):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(u,g):i.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(u):i.setAttribute(u,g);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),xe(i,"popover",g);break;case"xlinkActuate":We(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":We(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":We(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":We(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":We(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":We(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":We(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":We(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":We(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":xe(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Oe.get(u)||u,xe(i,u,g))}}function Kd(i,r,u,g,_,w){switch(u){case"style":er(i,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof g=="string"?yn(i,g):(typeof g=="number"||typeof g=="bigint")&&yn(i,""+g);break;case"onScroll":g!=null&&Ue("scroll",i);break;case"onScrollEnd":g!=null&&Ue("scrollend",i);break;case"onClick":g!=null&&(i.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ie.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),r=u.slice(2,_?u.length-7:void 0),w=i[at]||null,w=w!=null?w[u]:null,typeof w=="function"&&i.removeEventListener(r,w,_),typeof g=="function")){typeof w!="function"&&w!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(r,g,_);break t}u in i?i[u]=g:g===!0?i.setAttribute(u,""):xe(i,u,g)}}}function ln(i,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var g=!1,_=!1,w;for(w in u)if(u.hasOwnProperty(w)){var H=u[w];if(H!=null)switch(w){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ui(i,r,w,H,u,null)}}_&&ui(i,r,"srcSet",u.srcSet,u,null),g&&ui(i,r,"src",u.src,u,null);return;case"input":Ue("invalid",i);var tt=w=H=_=null,ht=null,Mt=null;for(g in u)if(u.hasOwnProperty(g)){var zt=u[g];if(zt!=null)switch(g){case"name":_=zt;break;case"type":H=zt;break;case"checked":ht=zt;break;case"defaultChecked":Mt=zt;break;case"value":w=zt;break;case"defaultValue":tt=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,r));break;default:ui(i,r,g,zt,u,null)}}Ns(i,w,tt,ht,Mt,H,_,!1),Ai(i);return;case"select":Ue("invalid",i),g=H=w=null;for(_ in u)if(u.hasOwnProperty(_)&&(tt=u[_],tt!=null))switch(_){case"value":w=tt;break;case"defaultValue":H=tt;break;case"multiple":g=tt;default:ui(i,r,_,tt,u,null)}r=w,u=H,i.multiple=!!g,r!=null?vr(i,!!g,r,!1):u!=null&&vr(i,!!g,u,!0);return;case"textarea":Ue("invalid",i),w=_=g=null;for(H in u)if(u.hasOwnProperty(H)&&(tt=u[H],tt!=null))switch(H){case"value":g=tt;break;case"defaultValue":_=tt;break;case"children":w=tt;break;case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(91));break;default:ui(i,r,H,tt,u,null)}ss(i,g,_,w),Ai(i);return;case"option":for(ht in u)if(u.hasOwnProperty(ht)&&(g=u[ht],g!=null))switch(ht){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ui(i,r,ht,g,u,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(g=0;g<Kl.length;g++)Ue(Kl[g],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Mt in u)if(u.hasOwnProperty(Mt)&&(g=u[Mt],g!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ui(i,r,Mt,g,u,null)}return;default:if(fn(r)){for(zt in u)u.hasOwnProperty(zt)&&(g=u[zt],g!==void 0&&Kd(i,r,zt,g,u,void 0));return}}for(tt in u)u.hasOwnProperty(tt)&&(g=u[tt],g!=null&&ui(i,r,tt,g,u,null))}function tx(i,r,u,g){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,H=null,tt=null,ht=null,Mt=null,zt=null;for(Lt in u){var Ht=u[Lt];if(u.hasOwnProperty(Lt)&&Ht!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":ht=Ht;default:g.hasOwnProperty(Lt)||ui(i,r,Lt,null,g,Ht)}}for(var Rt in g){var Lt=g[Rt];if(Ht=u[Rt],g.hasOwnProperty(Rt)&&(Lt!=null||Ht!=null))switch(Rt){case"type":w=Lt;break;case"name":_=Lt;break;case"checked":Mt=Lt;break;case"defaultChecked":zt=Lt;break;case"value":H=Lt;break;case"defaultValue":tt=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,r));break;default:Lt!==Ht&&ui(i,r,Rt,Lt,g,Ht)}}Ps(i,H,tt,ht,Mt,zt,w,_);return;case"select":Lt=H=tt=Rt=null;for(w in u)if(ht=u[w],u.hasOwnProperty(w)&&ht!=null)switch(w){case"value":break;case"multiple":Lt=ht;default:g.hasOwnProperty(w)||ui(i,r,w,null,g,ht)}for(_ in g)if(w=g[_],ht=u[_],g.hasOwnProperty(_)&&(w!=null||ht!=null))switch(_){case"value":Rt=w;break;case"defaultValue":tt=w;break;case"multiple":H=w;default:w!==ht&&ui(i,r,_,w,g,ht)}r=tt,u=H,g=Lt,Rt!=null?vr(i,!!u,Rt,!1):!!g!=!!u&&(r!=null?vr(i,!!u,r,!0):vr(i,!!u,u?[]:"",!1));return;case"textarea":Lt=Rt=null;for(tt in u)if(_=u[tt],u.hasOwnProperty(tt)&&_!=null&&!g.hasOwnProperty(tt))switch(tt){case"value":break;case"children":break;default:ui(i,r,tt,null,g,_)}for(H in g)if(_=g[H],w=u[H],g.hasOwnProperty(H)&&(_!=null||w!=null))switch(H){case"value":Rt=_;break;case"defaultValue":Lt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==w&&ui(i,r,H,_,g,w)}ka(i,Rt,Lt);return;case"option":for(var Ee in u)if(Rt=u[Ee],u.hasOwnProperty(Ee)&&Rt!=null&&!g.hasOwnProperty(Ee))switch(Ee){case"selected":i.selected=!1;break;default:ui(i,r,Ee,null,g,Rt)}for(ht in g)if(Rt=g[ht],Lt=u[ht],g.hasOwnProperty(ht)&&Rt!==Lt&&(Rt!=null||Lt!=null))switch(ht){case"selected":i.selected=Rt&&typeof Rt!="function"&&typeof Rt!="symbol";break;default:ui(i,r,ht,Rt,g,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in u)Rt=u[Te],u.hasOwnProperty(Te)&&Rt!=null&&!g.hasOwnProperty(Te)&&ui(i,r,Te,null,g,Rt);for(Mt in g)if(Rt=g[Mt],Lt=u[Mt],g.hasOwnProperty(Mt)&&Rt!==Lt&&(Rt!=null||Lt!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":if(Rt!=null)throw Error(n(137,r));break;default:ui(i,r,Mt,Rt,g,Lt)}return;default:if(fn(r)){for(var ci in u)Rt=u[ci],u.hasOwnProperty(ci)&&Rt!==void 0&&!g.hasOwnProperty(ci)&&Kd(i,r,ci,void 0,g,Rt);for(zt in g)Rt=g[zt],Lt=u[zt],!g.hasOwnProperty(zt)||Rt===Lt||Rt===void 0&&Lt===void 0||Kd(i,r,zt,Rt,g,Lt);return}}for(var Ct in u)Rt=u[Ct],u.hasOwnProperty(Ct)&&Rt!=null&&!g.hasOwnProperty(Ct)&&ui(i,r,Ct,null,g,Rt);for(Ht in g)Rt=g[Ht],Lt=u[Ht],!g.hasOwnProperty(Ht)||Rt===Lt||Rt==null&&Lt==null||ui(i,r,Ht,Rt,g,Lt)}var Qd=null,Jd=null;function $c(i){return i.nodeType===9?i:i.ownerDocument}function uv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function $d(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tg=null;function ex(){var i=window.event;return i&&i.type==="popstate"?i===tg?!1:(tg=i,!0):(tg=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(i){return fv.resolve(null).then(i).catch(rx)}:hv;function rx(i){setTimeout(function(){throw i})}function ua(i){return i==="head"}function dv(i,r){var u=r,g=0,_=0;do{var w=u.nextSibling;if(i.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<g&&8>g){u=g;var H=i.ownerDocument;if(u&1&&Jl(H.documentElement),u&2&&Jl(H.body),u&4)for(u=H.head,Jl(u),H=u.firstChild;H;){var tt=H.nextSibling,ht=H.nodeName;H[xt]||ht==="SCRIPT"||ht==="STYLE"||ht==="LINK"&&H.rel.toLowerCase()==="stylesheet"||u.removeChild(H),H=tt}}if(_===0){i.removeChild(w),au(r);return}_--}else u==="$"||u==="$?"||u==="$!"?_++:g=u.charCodeAt(0)-48;else g=0;u=w}while(u);au(r)}function eg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":eg(u),Ot(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function sx(i,r,u,g){for(;i.nodeType===1;){var _=u;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[xt])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==_.rel||i.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||i.getAttribute("title")!==(_.title==null?null:_.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(_.src==null?null:_.src)||i.getAttribute("type")!==(_.type==null?null:_.type)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=xr(i.nextSibling),i===null)break}return null}function ax(i,r,u){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=xr(i.nextSibling),i===null))return null;return i}function ig(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function ox(i,r){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")r();else{var g=function(){r(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function xr(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var ng=null;function gv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return i;r--}else u==="/$"&&r++}i=i.previousSibling}return null}function pv(i,r,u){switch(r=$c(u),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Jl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ot(i)}var cr=new Map,mv=new Set;function th(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Cs=Gt.d;Gt.d={f:lx,r:ux,D:cx,C:hx,L:fx,m:dx,X:px,S:gx,M:mx};function lx(){var i=Cs.f(),r=Xc();return i||r}function ux(i){var r=qt(i);r!==null&&r.tag===5&&r.type==="form"?Np(r):Cs.r(i)}var Yo=typeof document>"u"?null:document;function vv(i,r,u){var g=Yo;if(g&&typeof r=="string"&&r){var _=ii(r);_='link[rel="'+i+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),mv.has(_)||(mv.add(_),i={rel:i,crossOrigin:u,href:r},g.querySelector(_)===null&&(r=g.createElement("link"),ln(r,"link",i),jt(r),g.head.appendChild(r)))}}function cx(i){Cs.D(i),vv("dns-prefetch",i,null)}function hx(i,r){Cs.C(i,r),vv("preconnect",i,r)}function fx(i,r,u){Cs.L(i,r,u);var g=Yo;if(g&&i&&r){var _='link[rel="preload"][as="'+ii(r)+'"]';r==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+ii(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+ii(u.imageSizes)+'"]')):_+='[href="'+ii(i)+'"]';var w=_;switch(r){case"style":w=Xo(i);break;case"script":w=Go(i)}cr.has(w)||(i=C({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:i,as:r},u),cr.set(w,i),g.querySelector(_)!==null||r==="style"&&g.querySelector($l(w))||r==="script"&&g.querySelector(tu(w))||(r=g.createElement("link"),ln(r,"link",i),jt(r),g.head.appendChild(r)))}}function dx(i,r){Cs.m(i,r);var u=Yo;if(u&&i){var g=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+ii(g)+'"][href="'+ii(i)+'"]',w=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Go(i)}if(!cr.has(w)&&(i=C({rel:"modulepreload",href:i},r),cr.set(w,i),u.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(tu(w)))return}g=u.createElement("link"),ln(g,"link",i),jt(g),u.head.appendChild(g)}}}function gx(i,r,u){Cs.S(i,r,u);var g=Yo;if(g&&i){var _=se(g).hoistableStyles,w=Xo(i);r=r||"default";var H=_.get(w);if(!H){var tt={loading:0,preload:null};if(H=g.querySelector($l(w)))tt.loading=5;else{i=C({rel:"stylesheet",href:i,"data-precedence":r},u),(u=cr.get(w))&&rg(i,u);var ht=H=g.createElement("link");jt(ht),ln(ht,"link",i),ht._p=new Promise(function(Mt,zt){ht.onload=Mt,ht.onerror=zt}),ht.addEventListener("load",function(){tt.loading|=1}),ht.addEventListener("error",function(){tt.loading|=2}),tt.loading|=4,eh(H,r,g)}H={type:"stylesheet",instance:H,count:1,state:tt},_.set(w,H)}}}function px(i,r){Cs.X(i,r);var u=Yo;if(u&&i){var g=se(u).hoistableScripts,_=Go(i),w=g.get(_);w||(w=u.querySelector(tu(_)),w||(i=C({src:i,async:!0},r),(r=cr.get(_))&&sg(i,r),w=u.createElement("script"),jt(w),ln(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function mx(i,r){Cs.M(i,r);var u=Yo;if(u&&i){var g=se(u).hoistableScripts,_=Go(i),w=g.get(_);w||(w=u.querySelector(tu(_)),w||(i=C({src:i,async:!0,type:"module"},r),(r=cr.get(_))&&sg(i,r),w=u.createElement("script"),jt(w),ln(w,"link",i),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function _v(i,r,u,g){var _=(_=pe.current)?th(_):null;if(!_)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=Xo(u.href),u=se(_).hoistableStyles,g=u.get(r),g||(g={type:"style",instance:null,count:0,state:null},u.set(r,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Xo(u.href);var w=se(_).hoistableStyles,H=w.get(i);if(H||(_=_.ownerDocument||_,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,H),(w=_.querySelector($l(i)))&&!w._p&&(H.instance=w,H.state.loading=5),cr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},cr.set(i,u),w||vx(_,i,u,H.state))),r&&g===null)throw Error(n(528,""));return H}if(r&&g!==null)throw Error(n(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Go(u),u=se(_).hoistableScripts,g=u.get(r),g||(g={type:"script",instance:null,count:0,state:null},u.set(r,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Xo(i){return'href="'+ii(i)+'"'}function $l(i){return'link[rel="stylesheet"]['+i+"]"}function yv(i){return C({},i,{"data-precedence":i.precedence,precedence:null})}function vx(i,r,u,g){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?g.loading=1:(r=i.createElement("link"),g.preload=r,r.addEventListener("load",function(){return g.loading|=1}),r.addEventListener("error",function(){return g.loading|=2}),ln(r,"link",u),jt(r),i.head.appendChild(r))}function Go(i){return'[src="'+ii(i)+'"]'}function tu(i){return"script[async]"+i}function bv(i,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var g=i.querySelector('style[data-href~="'+ii(u.href)+'"]');if(g)return r.instance=g,jt(g),g;var _=C({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),jt(g),ln(g,"style",_),eh(g,u.precedence,i),r.instance=g;case"stylesheet":_=Xo(u.href);var w=i.querySelector($l(_));if(w)return r.state.loading|=4,r.instance=w,jt(w),w;g=yv(u),(_=cr.get(_))&&rg(g,_),w=(i.ownerDocument||i).createElement("link"),jt(w);var H=w;return H._p=new Promise(function(tt,ht){H.onload=tt,H.onerror=ht}),ln(w,"link",g),r.state.loading|=4,eh(w,u.precedence,i),r.instance=w;case"script":return w=Go(u.src),(_=i.querySelector(tu(w)))?(r.instance=_,jt(_),_):(g=u,(_=cr.get(w))&&(g=C({},u),sg(g,_)),i=i.ownerDocument||i,_=i.createElement("script"),jt(_),ln(_,"link",g),i.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(g=r.instance,r.state.loading|=4,eh(g,u.precedence,i));return r.instance}function eh(i,r,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,w=_,H=0;H<g.length;H++){var tt=g[H];if(tt.dataset.precedence===r)w=tt;else if(w!==_)break}w?w.parentNode.insertBefore(i,w.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(i,r.firstChild))}function rg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function sg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var ih=null;function xv(i,r,u){if(ih===null){var g=new Map,_=ih=new Map;_.set(u,g)}else _=ih,g=_.get(u),g||(g=new Map,_.set(u,g));if(g.has(i))return g;for(g.set(i,null),u=u.getElementsByTagName(i),_=0;_<u.length;_++){var w=u[_];if(!(w[xt]||w[nt]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var H=w.getAttribute(r)||"";H=i+H;var tt=g.get(H);tt?tt.push(w):g.set(H,[w])}}return g}function Sv(i,r,u){i=i.ownerDocument||i,i.head.insertBefore(u,r==="title"?i.querySelector("head > title"):null)}function _x(i,r,u){if(u===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function wv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var eu=null;function yx(){}function bx(i,r,u){if(eu===null)throw Error(n(475));var g=eu;if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var _=Xo(u.href),w=i.querySelector($l(_));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=nh.bind(g),i.then(g,g)),r.state.loading|=4,r.instance=w,jt(w);return}w=i.ownerDocument||i,u=yv(u),(_=cr.get(_))&&rg(u,_),w=w.createElement("link"),jt(w);var H=w;H._p=new Promise(function(tt,ht){H.onload=tt,H.onerror=ht}),ln(w,"link",u),r.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(g.count++,r=nh.bind(g),i.addEventListener("load",r),i.addEventListener("error",r))}}function xx(){if(eu===null)throw Error(n(475));var i=eu;return i.stylesheets&&i.count===0&&ag(i,i.stylesheets),0<i.count?function(r){var u=setTimeout(function(){if(i.stylesheets&&ag(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u)}}:null}function nh(){if(this.count--,this.count===0){if(this.stylesheets)ag(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rh=null;function ag(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rh=new Map,r.forEach(Sx,i),rh=null,nh.call(i))}function Sx(i,r){if(!(r.state.loading&4)){var u=rh.get(i);if(u)var g=u.get(null);else{u=new Map,rh.set(i,u);for(var _=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var H=_[w];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(u.set(H.dataset.precedence,H),g=H)}g&&u.set(null,g)}_=r.instance,H=_.getAttribute("data-precedence"),w=u.get(H)||g,w===g&&u.set(null,_),u.set(H,_),this.count++,g=nh.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),w?w.parentNode.insertBefore(_,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(_,i.firstChild)),r.state.loading|=4}}var iu={$$typeof:gt,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function wx(i,r,u,g,_,w,H,tt){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function Cv(i,r,u,g,_,w,H,tt,ht,Mt,zt,Ht){return i=new wx(i,r,u,H,tt,ht,Mt,Ht),r=1,w===!0&&(r|=24),w=Gn(3,null,null,r),i.current=w,w.stateNode=i,r=Vf(),r.refCount++,i.pooledCache=r,r.refCount++,w.memoizedState={element:g,isDehydrated:u,cache:r},Xf(w),i}function Tv(i){return i?(i=wo,i):wo}function kv(i,r,u,g,_,w){_=Tv(_),g.context===null?g.context=_:g.pendingContext=_,g=Ks(r),g.payload={element:u},w=w===void 0?null:w,w!==null&&(g.callback=w),u=Qs(i,g,r),u!==null&&(Qn(u,i,r),jl(u,i,r))}function Ov(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<r?u:r}}function og(i,r){Ov(i,r),(i=i.alternate)&&Ov(i,r)}function Av(i){if(i.tag===13){var r=So(i,67108864);r!==null&&Qn(r,i,67108864),og(i,67108864)}}var sh=!0;function Cx(i,r,u,g){var _=ut.T;ut.T=null;var w=Gt.p;try{Gt.p=2,lg(i,r,u,g)}finally{Gt.p=w,ut.T=_}}function Tx(i,r,u,g){var _=ut.T;ut.T=null;var w=Gt.p;try{Gt.p=8,lg(i,r,u,g)}finally{Gt.p=w,ut.T=_}}function lg(i,r,u,g){if(sh){var _=ug(g);if(_===null)Zd(i,r,g,ah,u),Mv(i,g);else if(Ox(_,i,r,u,g))g.stopPropagation();else if(Mv(i,g),r&4&&-1<kx.indexOf(i)){for(;_!==null;){var w=qt(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var H=A(w.pendingLanes);if(H!==0){var tt=w;for(tt.pendingLanes|=2,tt.entangledLanes|=2;H;){var ht=1<<31-m(H);tt.entanglements[1]|=ht,H&=~ht}Ir(w),(ai&6)===0&&(Hc=Fi()+500,Zl(0))}}break;case 13:tt=So(w,2),tt!==null&&Qn(tt,w,2),Xc(),og(w,2)}if(w=ug(g),w===null&&Zd(i,r,g,ah,u),w===_)break;_=w}_!==null&&g.stopPropagation()}else Zd(i,r,g,null,u)}}function ug(i){return i=Hn(i),cg(i)}var ah=null;function cg(i){if(ah=null,i=It(i),i!==null){var r=o(i);if(r===null)i=null;else{var u=r.tag;if(u===13){if(i=d(r),i!==null)return i;i=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return ah=i,null}function Ev(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(es()){case is:return 2;case ns:return 8;case ri:case rs:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var hg=!1,ca=null,ha=null,fa=null,nu=new Map,ru=new Map,da=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mv(i,r){switch(i){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":nu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(r.pointerId)}}function su(i,r,u,g,_,w){return i===null||i.nativeEvent!==w?(i={blockedOn:r,domEventName:u,eventSystemFlags:g,nativeEvent:w,targetContainers:[_]},r!==null&&(r=qt(r),r!==null&&Av(r)),i):(i.eventSystemFlags|=g,r=i.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),i)}function Ox(i,r,u,g,_){switch(r){case"focusin":return ca=su(ca,i,r,u,g,_),!0;case"dragenter":return ha=su(ha,i,r,u,g,_),!0;case"mouseover":return fa=su(fa,i,r,u,g,_),!0;case"pointerover":var w=_.pointerId;return nu.set(w,su(nu.get(w)||null,i,r,u,g,_)),!0;case"gotpointercapture":return w=_.pointerId,ru.set(w,su(ru.get(w)||null,i,r,u,g,_)),!0}return!1}function Dv(i){var r=It(i.target);if(r!==null){var u=o(r);if(u!==null){if(r=u.tag,r===13){if(r=d(u),r!==null){i.blockedOn=r,W(i.priority,function(){if(u.tag===13){var g=Kn();g=U(g);var _=So(u,g);_!==null&&Qn(_,u,g),og(u,g)}});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function oh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var u=ug(i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);rn=g,u.target.dispatchEvent(g),rn=null}else return r=qt(u),r!==null&&Av(r),i.blockedOn=u,!1;r.shift()}return!0}function jv(i,r,u){oh(i)&&u.delete(r)}function Ax(){hg=!1,ca!==null&&oh(ca)&&(ca=null),ha!==null&&oh(ha)&&(ha=null),fa!==null&&oh(fa)&&(fa=null),nu.forEach(jv),ru.forEach(jv)}function lh(i,r){i.blockedOn===r&&(i.blockedOn=null,hg||(hg=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Ax)))}var uh=null;function Rv(i){uh!==i&&(uh=i,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){uh===i&&(uh=null);for(var r=0;r<i.length;r+=3){var u=i[r],g=i[r+1],_=i[r+2];if(typeof g!="function"){if(cg(g||u)===null)continue;break}var w=qt(u);w!==null&&(i.splice(r,3),r-=3,cd(w,{pending:!0,data:_,method:u.method,action:g},g,_))}}))}function au(i){function r(ht){return lh(ht,i)}ca!==null&&lh(ca,i),ha!==null&&lh(ha,i),fa!==null&&lh(fa,i),nu.forEach(r),ru.forEach(r);for(var u=0;u<da.length;u++){var g=da[u];g.blockedOn===i&&(g.blockedOn=null)}for(;0<da.length&&(u=da[0],u.blockedOn===null);)Dv(u),u.blockedOn===null&&da.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var _=u[g],w=u[g+1],H=_[at]||null;if(typeof w=="function")H||Rv(u);else if(H){var tt=null;if(w&&w.hasAttribute("formAction")){if(_=w,H=w[at]||null)tt=H.formAction;else if(cg(_)!==null)continue}else tt=H.action;typeof tt=="function"?u[g+1]=tt:(u.splice(g,3),g-=3),Rv(u)}}}function fg(i){this._internalRoot=i}ch.prototype.render=fg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var u=r.current,g=Kn();kv(u,g,i,r,null,null)},ch.prototype.unmount=fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;kv(i.current,2,null,i,null,null),Xc(),r[dt]=null}};function ch(i){this._internalRoot=i}ch.prototype.unstable_scheduleHydration=function(i){if(i){var r=Q();i={blockedOn:null,target:i,priority:r};for(var u=0;u<da.length&&r!==0&&r<da[u].priority;u++);da.splice(u,0,i),u===0&&Dv(i)}};var Lv=t.version;if(Lv!=="19.1.0")throw Error(n(527,Lv,"19.1.0"));Gt.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=v(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var Ex={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ut,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{s=hh.inject(Ex),c=hh}catch{}}return lu.createRoot=function(i,r){if(!a(i))throw Error(n(299));var u=!1,g="",_=Kp,w=Qp,H=Jp,tt=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(H=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(tt=r.unstable_transitionCallbacks)),r=Cv(i,1,!1,null,null,u,g,_,w,H,tt,null),i[dt]=r.current,Wd(i),new fg(r)},lu.hydrateRoot=function(i,r,u){if(!a(i))throw Error(n(299));var g=!1,_="",w=Kp,H=Qp,tt=Jp,ht=null,Mt=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(H=u.onCaughtError),u.onRecoverableError!==void 0&&(tt=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ht=u.unstable_transitionCallbacks),u.formState!==void 0&&(Mt=u.formState)),r=Cv(i,1,!0,r,u??null,g,_,w,H,tt,ht,Mt),r.context=Tv(null),u=r.current,g=Kn(),g=U(g),_=Ks(g),_.callback=null,Qs(u,_,g),u=g,r.current.lanes=u,q(r,u),Ir(r),i[dt]=r.current,Wd(i),new ch(r)},lu.version="19.1.0",lu}var Yv;function Fx(){if(Yv)return pg.exports;Yv=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),pg.exports=zx(),pg.exports}var Ix=Fx();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xv="popstate";function Vx(l={}){function t(n,a){let{pathname:o,search:d,hash:p}=n.location;return Rg("",{pathname:o,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Fu(a)}return Hx(t,e,null,l)}function Oi(l,t){if(l===!1||l===null||typeof l>"u")throw new Error(t)}function Zr(l,t){if(!l){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ux(){return Math.random().toString(36).substring(2,10)}function Gv(l,t){return{usr:l.state,key:l.key,idx:t}}function Rg(l,t,e=null,n){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof t=="string"?ol(t):t,state:e,key:t&&t.key||n||Ux()}}function Fu({pathname:l="/",search:t="",hash:e=""}){return t&&t!=="?"&&(l+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(l+=e.charAt(0)==="#"?e:"#"+e),l}function ol(l){let t={};if(l){let e=l.indexOf("#");e>=0&&(t.hash=l.substring(e),l=l.substring(0,e));let n=l.indexOf("?");n>=0&&(t.search=l.substring(n),l=l.substring(0,n)),l&&(t.pathname=l)}return t}function Hx(l,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,d=a.history,p="POP",v=null,b=C();b==null&&(b=0,d.replaceState({...d.state,idx:b},""));function C(){return(d.state||{idx:null}).idx}function M(){p="POP";let it=C(),$=it==null?null:it-b;b=it,v&&v({action:p,location:z.location,delta:$})}function F(it,$){p="PUSH";let lt=Rg(z.location,it,$);b=C()+1;let gt=Gv(lt,b),kt=z.createHref(lt);try{d.pushState(gt,"",kt)}catch(St){if(St instanceof DOMException&&St.name==="DataCloneError")throw St;a.location.assign(kt)}o&&v&&v({action:p,location:z.location,delta:1})}function E(it,$){p="REPLACE";let lt=Rg(z.location,it,$);b=C();let gt=Gv(lt,b),kt=z.createHref(lt);d.replaceState(gt,"",kt),o&&v&&v({action:p,location:z.location,delta:0})}function X(it){return Yx(it)}let z={get action(){return p},get location(){return l(a,d)},listen(it){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Xv,M),v=it,()=>{a.removeEventListener(Xv,M),v=null}},createHref(it){return t(a,it)},createURL:X,encodeLocation(it){let $=X(it);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:F,replace:E,go(it){return d.go(it)}};return z}function Yx(l,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Oi(e,"No window.location.(origin|href) available to create URL");let n=typeof l=="string"?l:Fu(l);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function ty(l,t,e="/"){return Xx(l,t,e,!1)}function Xx(l,t,e,n){let a=typeof t=="string"?ol(t):t,o=As(a.pathname||"/",e);if(o==null)return null;let d=ey(l);Gx(d);let p=null;for(let v=0;p==null&&v<d.length;++v){let b=n2(o);p=e2(d[v],b,n)}return p}function ey(l,t=[],e=[],n=""){let a=(o,d,p)=>{let v={relativePath:p===void 0?o.path||"":p,caseSensitive:o.caseSensitive===!0,childrenIndex:d,route:o};v.relativePath.startsWith("/")&&(Oi(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length));let b=ks([n,v.relativePath]),C=e.concat(v);o.children&&o.children.length>0&&(Oi(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),ey(o.children,t,C,b)),!(o.path==null&&!o.index)&&t.push({path:b,score:$x(b,o.index),routesMeta:C})};return l.forEach((o,d)=>{if(o.path===""||!o.path?.includes("?"))a(o,d);else for(let p of iy(o.path))a(o,d,p)}),t}function iy(l){let t=l.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let d=iy(n.join("/")),p=[];return p.push(...d.map(v=>v===""?o:[o,v].join("/"))),a&&p.push(...d),p.map(v=>l.startsWith("/")&&v===""?"/":v)}function Gx(l){l.sort((t,e)=>t.score!==e.score?e.score-t.score:t2(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var qx=/^:[\w-]+$/,Wx=3,Zx=2,Kx=1,Qx=10,Jx=-2,qv=l=>l==="*";function $x(l,t){let e=l.split("/"),n=e.length;return e.some(qv)&&(n+=Jx),t&&(n+=Zx),e.filter(a=>!qv(a)).reduce((a,o)=>a+(qx.test(o)?Wx:o===""?Kx:Qx),n)}function t2(l,t){return l.length===t.length&&l.slice(0,-1).every((n,a)=>n===t[a])?l[l.length-1]-t[t.length-1]:0}function e2(l,t,e=!1){let{routesMeta:n}=l,a={},o="/",d=[];for(let p=0;p<n.length;++p){let v=n[p],b=p===n.length-1,C=o==="/"?t:t.slice(o.length)||"/",M=Rh({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},C),F=v.route;if(!M&&b&&e&&!n[n.length-1].route.index&&(M=Rh({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},C)),!M)return null;Object.assign(a,M.params),d.push({params:a,pathname:ks([o,M.pathname]),pathnameBase:o2(ks([o,M.pathnameBase])),route:F}),M.pathnameBase!=="/"&&(o=ks([o,M.pathnameBase]))}return d}function Rh(l,t){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[e,n]=i2(l.path,l.caseSensitive,l.end),a=t.match(e);if(!a)return null;let o=a[0],d=o.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:n.reduce((b,{paramName:C,isOptional:M},F)=>{if(C==="*"){let X=p[F]||"";d=o.slice(0,o.length-X.length).replace(/(.)\/+$/,"$1")}const E=p[F];return M&&!E?b[C]=void 0:b[C]=(E||"").replace(/%2F/g,"/"),b},{}),pathname:o,pathnameBase:d,pattern:l}}function i2(l,t=!1,e=!0){Zr(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let n=[],a="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,v)=>(n.push({paramName:p,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(n.push({paramName:"*"}),a+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":l!==""&&l!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function n2(l){try{return l.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zr(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),l}}function As(l,t){if(t==="/")return l;if(!l.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=l.charAt(e);return n&&n!=="/"?null:l.slice(e)||"/"}function r2(l,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof l=="string"?ol(l):l;return{pathname:e?e.startsWith("/")?e:s2(e,t):t,search:l2(n),hash:u2(a)}}function s2(l,t){let e=t.replace(/\/+$/,"").split("/");return l.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function yg(l,t,e,n){return`Cannot include a '${l}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a2(l){return l.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function ny(l){let t=a2(l);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function ry(l,t,e,n=!1){let a;typeof l=="string"?a=ol(l):(a={...l},Oi(!a.pathname||!a.pathname.includes("?"),yg("?","pathname","search",a)),Oi(!a.pathname||!a.pathname.includes("#"),yg("#","pathname","hash",a)),Oi(!a.search||!a.search.includes("#"),yg("#","search","hash",a)));let o=l===""||a.pathname==="",d=o?"/":a.pathname,p;if(d==null)p=e;else{let M=t.length-1;if(!n&&d.startsWith("..")){let F=d.split("/");for(;F[0]==="..";)F.shift(),M-=1;a.pathname=F.join("/")}p=M>=0?t[M]:"/"}let v=r2(a,p),b=d&&d!=="/"&&d.endsWith("/"),C=(o||d===".")&&e.endsWith("/");return!v.pathname.endsWith("/")&&(b||C)&&(v.pathname+="/"),v}var ks=l=>l.join("/").replace(/\/\/+/g,"/"),o2=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),l2=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,u2=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function c2(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var sy=["POST","PUT","PATCH","DELETE"];new Set(sy);var h2=["GET",...sy];new Set(h2);var ll=Dt.createContext(null);ll.displayName="DataRouter";var Qh=Dt.createContext(null);Qh.displayName="DataRouterState";Dt.createContext(!1);var ay=Dt.createContext({isTransitioning:!1});ay.displayName="ViewTransition";var f2=Dt.createContext(new Map);f2.displayName="Fetchers";var d2=Dt.createContext(null);d2.displayName="Await";var Qr=Dt.createContext(null);Qr.displayName="Navigation";var Wu=Dt.createContext(null);Wu.displayName="Location";var Ds=Dt.createContext({outlet:null,matches:[],isDataRoute:!1});Ds.displayName="Route";var n0=Dt.createContext(null);n0.displayName="RouteError";function g2(l,{relative:t}={}){Oi(Zu(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=Dt.useContext(Qr),{hash:a,pathname:o,search:d}=Ku(l,{relative:t}),p=o;return e!=="/"&&(p=o==="/"?e:ks([e,o])),n.createHref({pathname:p,search:d,hash:a})}function Zu(){return Dt.useContext(Wu)!=null}function so(){return Oi(Zu(),"useLocation() may be used only in the context of a <Router> component."),Dt.useContext(Wu).location}var oy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ly(l){Dt.useContext(Qr).static||Dt.useLayoutEffect(l)}function uy(){let{isDataRoute:l}=Dt.useContext(Ds);return l?O2():p2()}function p2(){Oi(Zu(),"useNavigate() may be used only in the context of a <Router> component.");let l=Dt.useContext(ll),{basename:t,navigator:e}=Dt.useContext(Qr),{matches:n}=Dt.useContext(Ds),{pathname:a}=so(),o=JSON.stringify(ny(n)),d=Dt.useRef(!1);return ly(()=>{d.current=!0}),Dt.useCallback((v,b={})=>{if(Zr(d.current,oy),!d.current)return;if(typeof v=="number"){e.go(v);return}let C=ry(v,JSON.parse(o),a,b.relative==="path");l==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:ks([t,C.pathname])),(b.replace?e.replace:e.push)(C,b.state,b)},[t,e,o,a,l])}Dt.createContext(null);function Ku(l,{relative:t}={}){let{matches:e}=Dt.useContext(Ds),{pathname:n}=so(),a=JSON.stringify(ny(e));return Dt.useMemo(()=>ry(l,JSON.parse(a),n,t==="path"),[l,a,n,t])}function m2(l,t){return cy(l,t)}function cy(l,t,e,n){Oi(Zu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Dt.useContext(Qr),{matches:o}=Dt.useContext(Ds),d=o[o.length-1],p=d?d.params:{},v=d?d.pathname:"/",b=d?d.pathnameBase:"/",C=d&&d.route;{let $=C&&C.path||"";hy(v,!C||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let M=so(),F;if(t){let $=typeof t=="string"?ol(t):t;Oi(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),F=$}else F=M;let E=F.pathname||"/",X=E;if(b!=="/"){let $=b.replace(/^\//,"").split("/");X="/"+E.replace(/^\//,"").split("/").slice($.length).join("/")}let z=ty(l,{pathname:X});Zr(C||z!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Zr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let it=x2(z&&z.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:ks([b,a.encodeLocation?a.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:ks([b,a.encodeLocation?a.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),o,e,n);return t&&it?Dt.createElement(Wu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},it):it}function v2(){let l=k2(),t=c2(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),e=l instanceof Error?l.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",l),d=Dt.createElement(Dt.Fragment,null,Dt.createElement("p",null," Hey developer "),Dt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Dt.createElement("code",{style:o},"ErrorBoundary")," or"," ",Dt.createElement("code",{style:o},"errorElement")," prop on your route.")),Dt.createElement(Dt.Fragment,null,Dt.createElement("h2",null,"Unexpected Application Error!"),Dt.createElement("h3",{style:{fontStyle:"italic"}},t),e?Dt.createElement("pre",{style:a},e):null,d)}var _2=Dt.createElement(v2,null),y2=class extends Dt.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,t){return t.location!==l.location||t.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:t.error,location:t.location,revalidation:l.revalidation||t.revalidation}}componentDidCatch(l,t){console.error("React Router caught the following error during render",l,t)}render(){return this.state.error!==void 0?Dt.createElement(Ds.Provider,{value:this.props.routeContext},Dt.createElement(n0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b2({routeContext:l,match:t,children:e}){let n=Dt.useContext(ll);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Dt.createElement(Ds.Provider,{value:l},e)}function x2(l,t=[],e=null,n=null){if(l==null){if(!e)return null;if(e.errors)l=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)l=e.matches;else return null}let a=l,o=e?.errors;if(o!=null){let v=a.findIndex(b=>b.route.id&&o?.[b.route.id]!==void 0);Oi(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let d=!1,p=-1;if(e)for(let v=0;v<a.length;v++){let b=a[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=v),b.route.id){let{loaderData:C,errors:M}=e,F=b.route.loader&&!C.hasOwnProperty(b.route.id)&&(!M||M[b.route.id]===void 0);if(b.route.lazy||F){d=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((v,b,C)=>{let M,F=!1,E=null,X=null;e&&(M=o&&b.route.id?o[b.route.id]:void 0,E=b.route.errorElement||_2,d&&(p<0&&C===0?(hy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,X=null):p===C&&(F=!0,X=b.route.hydrateFallbackElement||null)));let z=t.concat(a.slice(0,C+1)),it=()=>{let $;return M?$=E:F?$=X:b.route.Component?$=Dt.createElement(b.route.Component,null):b.route.element?$=b.route.element:$=v,Dt.createElement(b2,{match:b,routeContext:{outlet:v,matches:z,isDataRoute:e!=null},children:$})};return e&&(b.route.ErrorBoundary||b.route.errorElement||C===0)?Dt.createElement(y2,{location:e.location,revalidation:e.revalidation,component:E,error:M,children:it(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):it()},null)}function r0(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S2(l){let t=Dt.useContext(ll);return Oi(t,r0(l)),t}function w2(l){let t=Dt.useContext(Qh);return Oi(t,r0(l)),t}function C2(l){let t=Dt.useContext(Ds);return Oi(t,r0(l)),t}function s0(l){let t=C2(l),e=t.matches[t.matches.length-1];return Oi(e.route.id,`${l} can only be used on routes that contain a unique "id"`),e.route.id}function T2(){return s0("useRouteId")}function k2(){let l=Dt.useContext(n0),t=w2("useRouteError"),e=s0("useRouteError");return l!==void 0?l:t.errors?.[e]}function O2(){let{router:l}=S2("useNavigate"),t=s0("useNavigate"),e=Dt.useRef(!1);return ly(()=>{e.current=!0}),Dt.useCallback(async(a,o={})=>{Zr(e.current,oy),e.current&&(typeof a=="number"?l.navigate(a):await l.navigate(a,{fromRouteId:t,...o}))},[l,t])}var Wv={};function hy(l,t,e){!t&&!Wv[l]&&(Wv[l]=!0,Zr(!1,e))}Dt.memo(A2);function A2({routes:l,future:t,state:e}){return cy(l,void 0,e,t)}function du(l){Oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E2({basename:l="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1}){Oi(!Zu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=l.replace(/^\/*/,"/"),p=Dt.useMemo(()=>({basename:d,navigator:a,static:o,future:{}}),[d,a,o]);typeof e=="string"&&(e=ol(e));let{pathname:v="/",search:b="",hash:C="",state:M=null,key:F="default"}=e,E=Dt.useMemo(()=>{let X=As(v,d);return X==null?null:{location:{pathname:X,search:b,hash:C,state:M,key:F},navigationType:n}},[d,v,b,C,M,F,n]);return Zr(E!=null,`<Router basename="${d}"> is not able to match the URL "${v}${b}${C}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:Dt.createElement(Qr.Provider,{value:p},Dt.createElement(Wu.Provider,{children:t,value:E}))}function M2({children:l,location:t}){return m2(Lg(l),t)}function Lg(l,t=[]){let e=[];return Dt.Children.forEach(l,(n,a)=>{if(!Dt.isValidElement(n))return;let o=[...t,a];if(n.type===Dt.Fragment){e.push.apply(e,Lg(n.props.children,o));return}Oi(n.type===du,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let d={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=Lg(n.props.children,o)),e.push(d)}),e}var Ch="get",Th="application/x-www-form-urlencoded";function Jh(l){return l!=null&&typeof l.tagName=="string"}function D2(l){return Jh(l)&&l.tagName.toLowerCase()==="button"}function j2(l){return Jh(l)&&l.tagName.toLowerCase()==="form"}function R2(l){return Jh(l)&&l.tagName.toLowerCase()==="input"}function L2(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function P2(l,t){return l.button===0&&(!t||t==="_self")&&!L2(l)}var dh=null;function N2(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var B2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bg(l){return l!=null&&!B2.has(l)?(Zr(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):l}function z2(l,t){let e,n,a,o,d;if(j2(l)){let p=l.getAttribute("action");n=p?As(p,t):null,e=l.getAttribute("method")||Ch,a=bg(l.getAttribute("enctype"))||Th,o=new FormData(l)}else if(D2(l)||R2(l)&&(l.type==="submit"||l.type==="image")){let p=l.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=l.getAttribute("formaction")||p.getAttribute("action");if(n=v?As(v,t):null,e=l.getAttribute("formmethod")||p.getAttribute("method")||Ch,a=bg(l.getAttribute("formenctype"))||bg(p.getAttribute("enctype"))||Th,o=new FormData(p,l),!N2()){let{name:b,type:C,value:M}=l;if(C==="image"){let F=b?`${b}.`:"";o.append(`${F}x`,"0"),o.append(`${F}y`,"0")}else b&&o.append(b,M)}}else{if(Jh(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Ch,n=null,a=Th,d=l}return o&&a==="text/plain"&&(d=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a0(l,t){if(l===!1||l===null||typeof l>"u")throw new Error(t)}function F2(l,t,e){let n=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&As(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function I2(l,t){if(l.id in t)return t[l.id];try{let e=await import(l.module);return t[l.id]=e,e}catch(e){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function V2(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function U2(l,t,e){let n=await Promise.all(l.map(async a=>{let o=t.routes[a.route.id];if(o){let d=await I2(o,e);return d.links?d.links():[]}return[]}));return G2(n.flat(1).filter(V2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Zv(l,t,e,n,a,o){let d=(v,b)=>e[b]?v.route.id!==e[b].route.id:!0,p=(v,b)=>e[b].pathname!==v.pathname||e[b].route.path?.endsWith("*")&&e[b].params["*"]!==v.params["*"];return o==="assets"?t.filter((v,b)=>d(v,b)||p(v,b)):o==="data"?t.filter((v,b)=>{let C=n.routes[v.route.id];if(!C||!C.hasLoader)return!1;if(d(v,b)||p(v,b))return!0;if(v.route.shouldRevalidate){let M=v.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function H2(l,t,{includeHydrateFallback:e}={}){return Y2(l.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Y2(l){return[...new Set(l)]}function X2(l){let t={},e=Object.keys(l).sort();for(let n of e)t[n]=l[n];return t}function G2(l,t){let e=new Set;return new Set(t),l.reduce((n,a)=>{let o=JSON.stringify(X2(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function fy(){let l=Dt.useContext(ll);return a0(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function q2(){let l=Dt.useContext(Qh);return a0(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var o0=Dt.createContext(void 0);o0.displayName="FrameworkContext";function dy(){let l=Dt.useContext(o0);return a0(l,"You must render this element inside a <HydratedRouter> element"),l}function W2(l,t){let e=Dt.useContext(o0),[n,a]=Dt.useState(!1),[o,d]=Dt.useState(!1),{onFocus:p,onBlur:v,onMouseEnter:b,onMouseLeave:C,onTouchStart:M}=t,F=Dt.useRef(null);Dt.useEffect(()=>{if(l==="render"&&d(!0),l==="viewport"){let z=$=>{$.forEach(lt=>{d(lt.isIntersecting)})},it=new IntersectionObserver(z,{threshold:.5});return F.current&&it.observe(F.current),()=>{it.disconnect()}}},[l]),Dt.useEffect(()=>{if(n){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[n]);let E=()=>{a(!0)},X=()=>{a(!1),d(!1)};return e?l!=="intent"?[o,F,{}]:[o,F,{onFocus:uu(p,E),onBlur:uu(v,X),onMouseEnter:uu(b,E),onMouseLeave:uu(C,X),onTouchStart:uu(M,E)}]:[!1,F,{}]}function uu(l,t){return e=>{l&&l(e),e.defaultPrevented||t(e)}}function Z2({page:l,...t}){let{router:e}=fy(),n=Dt.useMemo(()=>ty(e.routes,l,e.basename),[e.routes,l,e.basename]);return n?Dt.createElement(Q2,{page:l,matches:n,...t}):null}function K2(l){let{manifest:t,routeModules:e}=dy(),[n,a]=Dt.useState([]);return Dt.useEffect(()=>{let o=!1;return U2(l,t,e).then(d=>{o||a(d)}),()=>{o=!0}},[l,t,e]),n}function Q2({page:l,matches:t,...e}){let n=so(),{manifest:a,routeModules:o}=dy(),{basename:d}=fy(),{loaderData:p,matches:v}=q2(),b=Dt.useMemo(()=>Zv(l,t,v,a,n,"data"),[l,t,v,a,n]),C=Dt.useMemo(()=>Zv(l,t,v,a,n,"assets"),[l,t,v,a,n]),M=Dt.useMemo(()=>{if(l===n.pathname+n.search+n.hash)return[];let X=new Set,z=!1;if(t.forEach($=>{let lt=a.routes[$.route.id];!lt||!lt.hasLoader||(!b.some(gt=>gt.route.id===$.route.id)&&$.route.id in p&&o[$.route.id]?.shouldRevalidate||lt.hasClientLoader?z=!0:X.add($.route.id))}),X.size===0)return[];let it=F2(l,d,"data");return z&&X.size>0&&it.searchParams.set("_routes",t.filter($=>X.has($.route.id)).map($=>$.route.id).join(",")),[it.pathname+it.search]},[d,p,n,a,b,t,l,o]),F=Dt.useMemo(()=>H2(C,a),[C,a]),E=K2(C);return Dt.createElement(Dt.Fragment,null,M.map(X=>Dt.createElement("link",{key:X,rel:"prefetch",as:"fetch",href:X,...e})),F.map(X=>Dt.createElement("link",{key:X,rel:"modulepreload",href:X,...e})),E.map(({key:X,link:z})=>Dt.createElement("link",{key:X,...z})))}function J2(...l){return t=>{l.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var gy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gy&&(window.__reactRouterVersion="7.7.1")}catch{}function $2({basename:l,children:t,window:e}){let n=Dt.useRef();n.current==null&&(n.current=Vx({window:e,v5Compat:!0}));let a=n.current,[o,d]=Dt.useState({action:a.action,location:a.location}),p=Dt.useCallback(v=>{Dt.startTransition(()=>d(v))},[d]);return Dt.useLayoutEffect(()=>a.listen(p),[a,p]),Dt.createElement(E2,{basename:l,children:t,location:o.location,navigationType:o.action,navigator:a})}var py=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l0=Dt.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:d,state:p,target:v,to:b,preventScrollReset:C,viewTransition:M,...F},E){let{basename:X}=Dt.useContext(Qr),z=typeof b=="string"&&py.test(b),it,$=!1;if(typeof b=="string"&&z&&(it=b,gy))try{let Zt=new URL(window.location.href),he=b.startsWith("//")?new URL(Zt.protocol+b):new URL(b),Pt=As(he.pathname,X);he.origin===Zt.origin&&Pt!=null?b=Pt+he.search+he.hash:$=!0}catch{Zr(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let lt=g2(b,{relative:a}),[gt,kt,St]=W2(n,F),V=nS(b,{replace:d,state:p,target:v,preventScrollReset:C,relative:a,viewTransition:M});function Jt(Zt){t&&t(Zt),Zt.defaultPrevented||V(Zt)}let Wt=Dt.createElement("a",{...F,...St,href:it||lt,onClick:$||o?t:Jt,ref:J2(E,kt),target:v,"data-discover":!z&&e==="render"?"true":void 0});return gt&&!z?Dt.createElement(Dt.Fragment,null,Wt,Dt.createElement(Z2,{page:lt})):Wt});l0.displayName="Link";var tS=Dt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:d,viewTransition:p,children:v,...b},C){let M=Ku(d,{relative:b.relative}),F=so(),E=Dt.useContext(Qh),{navigator:X,basename:z}=Dt.useContext(Qr),it=E!=null&&lS(M)&&p===!0,$=X.encodeLocation?X.encodeLocation(M).pathname:M.pathname,lt=F.pathname,gt=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;e||(lt=lt.toLowerCase(),gt=gt?gt.toLowerCase():null,$=$.toLowerCase()),gt&&z&&(gt=As(gt,z)||gt);const kt=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let St=lt===$||!a&&lt.startsWith($)&&lt.charAt(kt)==="/",V=gt!=null&&(gt===$||!a&&gt.startsWith($)&&gt.charAt($.length)==="/"),Jt={isActive:St,isPending:V,isTransitioning:it},Wt=St?t:void 0,Zt;typeof n=="function"?Zt=n(Jt):Zt=[n,St?"active":null,V?"pending":null,it?"transitioning":null].filter(Boolean).join(" ");let he=typeof o=="function"?o(Jt):o;return Dt.createElement(l0,{...b,"aria-current":Wt,className:Zt,ref:C,style:he,to:d,viewTransition:p},typeof v=="function"?v(Jt):v)});tS.displayName="NavLink";var eS=Dt.forwardRef(({discover:l="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:d=Ch,action:p,onSubmit:v,relative:b,preventScrollReset:C,viewTransition:M,...F},E)=>{let X=aS(),z=oS(p,{relative:b}),it=d.toLowerCase()==="get"?"get":"post",$=typeof p=="string"&&py.test(p),lt=gt=>{if(v&&v(gt),gt.defaultPrevented)return;gt.preventDefault();let kt=gt.nativeEvent.submitter,St=kt?.getAttribute("formmethod")||d;X(kt||gt.currentTarget,{fetcherKey:t,method:St,navigate:e,replace:a,state:o,relative:b,preventScrollReset:C,viewTransition:M})};return Dt.createElement("form",{ref:E,method:it,action:z,onSubmit:n?v:lt,...F,"data-discover":!$&&l==="render"?"true":void 0})});eS.displayName="Form";function iS(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function my(l){let t=Dt.useContext(ll);return Oi(t,iS(l)),t}function nS(l,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:d}={}){let p=uy(),v=so(),b=Ku(l,{relative:o});return Dt.useCallback(C=>{if(P2(C,t)){C.preventDefault();let M=e!==void 0?e:Fu(v)===Fu(b);p(l,{replace:M,state:n,preventScrollReset:a,relative:o,viewTransition:d})}},[v,p,b,e,n,t,l,a,o,d])}var rS=0,sS=()=>`__${String(++rS)}__`;function aS(){let{router:l}=my("useSubmit"),{basename:t}=Dt.useContext(Qr),e=T2();return Dt.useCallback(async(n,a={})=>{let{action:o,method:d,encType:p,formData:v,body:b}=z2(n,t);if(a.navigate===!1){let C=a.fetcherKey||sS();await l.fetch(C,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:v,body:b,formMethod:a.method||d,formEncType:a.encType||p,flushSync:a.flushSync})}else await l.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:v,body:b,formMethod:a.method||d,formEncType:a.encType||p,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[l,t,e])}function oS(l,{relative:t}={}){let{basename:e}=Dt.useContext(Qr),n=Dt.useContext(Ds);Oi(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Ku(l||".",{relative:t})},d=so();if(l==null){o.search=d.search;let p=new URLSearchParams(o.search),v=p.getAll("index");if(v.some(C=>C==="")){p.delete("index"),v.filter(M=>M).forEach(M=>p.append("index",M));let C=p.toString();o.search=C?`?${C}`:""}}return(!l||l===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:ks([e,o.pathname])),Fu(o)}function lS(l,{relative:t}={}){let e=Dt.useContext(ay);Oi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=my("useViewTransitionState"),a=Ku(l,{relative:t});if(!e.isTransitioning)return!1;let o=As(e.currentLocation.pathname,n)||e.currentLocation.pathname,d=As(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Rh(a.pathname,d)!=null||Rh(a.pathname,o)!=null}var vy=$_();const uS=({header:l,leftSidebar:t,undoRedoSidebar:e,canvasBoard:n,rightSidebar:a,footer:o})=>J.jsxs("div",{className:"flex flex-col w-full h-screen bg-stone-300",children:[l&&J.jsx("div",{className:"flex-none",children:l}),J.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t&&J.jsx("div",{className:"flex-none",children:t}),e&&J.jsx("div",{className:"flex-none",children:e}),J.jsx("div",{className:"flex-1 flex justify-center items-center",children:n}),a&&J.jsx("div",{className:"flex-none",children:a})]}),o&&J.jsx("div",{className:"flex-none",children:o})]});function vt(l,t,e){return(t=function(n){var a=function(o,d){if(typeof o!="object"||!o)return o;var p=o[Symbol.toPrimitive];if(p!==void 0){var v=p.call(o,d);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(o)}(n,"string");return typeof a=="symbol"?a:a+""}(t))in l?Object.defineProperty(l,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):l[t]=e,l}function Kv(l,t){var e=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),e.push.apply(e,n)}return e}function _t(l){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Kv(Object(e),!0).forEach(function(n){vt(l,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(e)):Kv(Object(e)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(e,n))})}return l}function _i(l,t){if(l==null)return{};var e,n,a=function(d,p){if(d==null)return{};var v={};for(var b in d)if({}.hasOwnProperty.call(d,b)){if(p.indexOf(b)>=0)continue;v[b]=d[b]}return v}(l,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(l,e)&&(a[e]=l[e])}return a}function Jr(l,t){return t||(t=l.slice(0)),Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(t)}}))}class Qv{constructor(){vt(this,"browserShadowBlurConstant",1),vt(this,"DPI",96),vt(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),vt(this,"perfLimitSizeTotal",2097152),vt(this,"maxCacheSideLimit",4096),vt(this,"minCacheSideLimit",256),vt(this,"disableStyleCopyPaste",!1),vt(this,"enableGLFiltering",!0),vt(this,"textureSize",4096),vt(this,"forceGLPutImageData",!1),vt(this,"cachesBoundsOfCurve",!1),vt(this,"fontPaths",{}),vt(this,"NUM_FRACTION_DIGITS",4)}}const qe=new class extends Qv{constructor(l){super(),this.configure(l)}configure(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,l)}addFonts(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=_t(_t({},this.fontPaths),l)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(l=>{delete this.fontPaths[l]})}clearFonts(){this.fontPaths={}}restoreDefaults(l){const t=new Qv,e=l?.reduce((n,a)=>(n[a]=t[a],n),{})||t;this.configure(e)}},Es=function(l){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return console[l]("fabric",...e)};class Yr extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class u0 extends Yr{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}let cS=class{};class hS extends cS{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),a=t.createShader(t.FRAGMENT_SHADER);return!!a&&(t.shaderSource(a,n),t.compileShader(a),!!t.getShaderParameter(a,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(e,n)),e.getExtension("WEBGL_lose_context").loseContext(),Es("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const fS={};let Pg;const dS=l=>{Pg=l},Ar=()=>Pg||(Pg={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new hS,dispose(){},copyPasteData:fS}),ao=()=>Ar().document,Tr=()=>Ar().window,_y=()=>{var l;return Math.max((l=qe.devicePixelRatio)!==null&&l!==void 0?l:Tr().devicePixelRatio,1)},Jo=new class{constructor(){vt(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(l){let{fontFamily:t,fontStyle:e,fontWeight:n}=l;t=t.toLowerCase();const a=this.charWidthsCache;a.has(t)||a.set(t,new Map);const o=a.get(t),d="".concat(e.toLowerCase(),"_").concat((n+"").toLowerCase());return o.has(d)||o.set(d,new Map),o.get(d)}clearFontCache(l){l?this.charWidthsCache.delete((l||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(l){const{perfLimitSizeTotal:t}=qe,e=Math.sqrt(t*l);return[Math.floor(e),Math.floor(t/e)]}},Lh="6.9.0";function to(){}const ba=Math.PI/2,Ms=2*Math.PI,c0=Math.PI/180,vn=Object.freeze([1,0,0,1,0,0]),h0=16,pa=.4477152502,je="center",ni="left",Vn="top",Ng="bottom",zi="right",An="none",f0=/\r?\n/,yy="moving",$h="scaling",by="rotating",d0="rotate",xy="skewing",Iu="resizing",Sy="modifyPoly",gS="modifyPath",Ph="changed",tf="scale",Dn="scaleX",$n="scaleY",ul="skewX",cl="skewY",Yi="fill",En="stroke",Nh="modified",qo="json",xg="svg",ce=new class{constructor(){this[qo]=new Map,this[xg]=new Map}has(l){return this[qo].has(l)}getClass(l){const t=this[qo].get(l);if(!t)throw new Yr("No class registered for ".concat(l));return t}setClass(l,t){t?this[qo].set(t,l):(this[qo].set(l.type,l),this[qo].set(l.type.toLowerCase(),l))}getSVGClass(l){return this[xg].get(l)}setSVGClass(l,t){this[xg].set(t??l.type.toLowerCase(),l)}},Vu=new class extends Array{remove(l){const t=this.indexOf(l);t>-1&&this.splice(t,1)}cancelAll(){const l=this.splice(0);return l.forEach(t=>t.abort()),l}cancelByCanvas(l){if(!l)return[];const t=this.filter(e=>{var n;return e.target===l||typeof e.target=="object"&&((n=e.target)===null||n===void 0?void 0:n.canvas)===l});return t.forEach(e=>e.abort()),t}cancelByTarget(l){if(!l)return[];const t=this.filter(e=>e.target===l);return t.forEach(e=>e.abort()),t}};class wy{constructor(){vt(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(n=>{let[a,o]=n;this.on(a,o)}),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach(a=>{let[o,d]=a;n.push(this.once(o,d))}),()=>n.forEach(a=>a())}if(e){const n=this.on(t,function(){for(var a=arguments.length,o=new Array(a),d=0;d<a;d++)o[d]=arguments[d];e.call(this,...o),n()});return n}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],a=n.indexOf(e);a>-1&&n.splice(a,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach(n=>{let[a,o]=n;this._removeEventListener(a,o)}):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const a=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(a)for(let o=0;o<a.length;o++)a[o].call(this,e||{})}}const Za=(l,t)=>{const e=l.indexOf(t);return e!==-1&&l.splice(e,1),l},Er=l=>{if(l===0)return 1;switch(Math.abs(l)/ba){case 1:case 3:return 0;case 2:return-1}return Math.cos(l)},Mr=l=>{if(l===0)return 0;const t=l/ba,e=Math.sign(l);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(l)};class Tt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new Tt(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new Tt(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new Tt(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new Tt(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new Tt(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new Tt(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new Tt(this.x/t.x,this.y/t.y)}scalarDivide(t){return new Tt(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new Tt(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new Tt(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new Tt(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new Tt(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g0;const n=Mr(t),a=Er(t),o=this.subtract(e);return new Tt(o.x*a-o.y*n,o.x*n+o.y*a).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Tt(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const g0=new Tt(0,0),kh=l=>!!l&&Array.isArray(l._objects);function p0(l){class t extends l{constructor(){super(...arguments),vt(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];const d=this._objects.push(...a);return a.forEach(p=>this._onObjectAdded(p)),d}insertAt(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return this._objects.splice(n,0,...o),o.forEach(p=>this._onObjectAdded(p)),this._objects.length}remove(){const n=this._objects,a=[];for(var o=arguments.length,d=new Array(o),p=0;p<o;p++)d[p]=arguments[p];return d.forEach(v=>{const b=n.indexOf(v);b!==-1&&(n.splice(b,1),a.push(v),this._onObjectRemoved(v))}),a}forEachObject(n){this.getObjects().forEach((a,o,d)=>n(a,o,d))}getObjects(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length===0?[...this._objects]:this._objects.filter(d=>d.isType(...a))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,a){return!!this._objects.includes(n)||!!a&&this._objects.some(o=>o instanceof t&&o.contains(n,!0))}complexity(){return this._objects.reduce((n,a)=>n+=a.complexity?a.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Za(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Za(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,a){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const d=this.findNewLowerIndex(n,o,a);return Za(this._objects,n),this._objects.splice(d,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,a){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const d=this.findNewUpperIndex(n,o,a);return Za(this._objects,n),this._objects.splice(d,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,a){return n!==this._objects[a]&&(Za(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,a,o){let d;if(o){d=a;for(let p=a-1;p>=0;--p)if(n.isOverlapping(this._objects[p])){d=p;break}}else d=a-1;return d}findNewUpperIndex(n,a,o){let d;if(o){d=a;for(let p=a+1;p<this._objects.length;++p)if(n.isOverlapping(this._objects[p])){d=p;break}}else d=a+1;return d}collectObjects(n){let{left:a,top:o,width:d,height:p}=n,{includeIntersecting:v=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const b=[],C=new Tt(a,o),M=C.add(new Tt(d,p));for(let F=this._objects.length-1;F>=0;F--){const E=this._objects[F];E.selectable&&E.visible&&(v&&E.intersectsWithRect(C,M)||E.isContainedWithinRect(C,M)||v&&E.containsPoint(C)||v&&E.containsPoint(M))&&b.push(E)}return b}}return t}class Cy extends wy{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Ru(l){return Tr().requestAnimationFrame(l)}function Ty(l){return Tr().cancelAnimationFrame(l)}let pS=0;const xa=()=>pS++,mr=()=>{const l=ao().createElement("canvas");if(!l||l.getContext===void 0)throw new Yr("Failed to create `canvas` element");return l},ky=()=>ao().createElement("img"),Un=l=>{const t=mr();return t.width=l.width,t.height=l.height,t},m0=(l,t,e)=>l.toDataURL("image/".concat(t),e),v0=(l,t,e)=>new Promise((n,a)=>{l.toBlob(n,"image/".concat(t),e)}),Ri=l=>l*c0,Kr=l=>l/c0,Oy=l=>l.every((t,e)=>t===vn[e]),pn=(l,t,e)=>new Tt(l).transform(t,e),In=l=>{const t=1/(l[0]*l[3]-l[1]*l[2]),e=[t*l[3],-t*l[1],-t*l[2],t*l[0],0,0],{x:n,y:a}=new Tt(l[4],l[5]).transform(e,!0);return e[4]=-n,e[5]=-a,e},ki=(l,t,e)=>[l[0]*t[0]+l[2]*t[1],l[1]*t[0]+l[3]*t[1],l[0]*t[2]+l[2]*t[3],l[1]*t[2]+l[3]*t[3],e?0:l[0]*t[4]+l[2]*t[5]+l[4],e?0:l[1]*t[4]+l[3]*t[5]+l[5]],ef=(l,t)=>l.reduceRight((e,n)=>n&&e?ki(n,e,t):n||e,void 0)||vn.concat(),Ay=l=>{let[t,e]=l;return Math.atan2(e,t)},eo=l=>{const t=Ay(l),e=Math.pow(l[0],2)+Math.pow(l[1],2),n=Math.sqrt(e),a=(l[0]*l[3]-l[2]*l[1])/n,o=Math.atan2(l[0]*l[2]+l[1]*l[3],e);return{angle:Kr(t),scaleX:n,scaleY:a,skewX:Kr(o),skewY:0,translateX:l[4]||0,translateY:l[5]||0}},hl=function(l){return[1,0,0,1,l,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function oo(){let{angle:l=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Ri(l),a=Er(n),o=Mr(n);return[a,o,-o,a,t?t-(a*t-o*e):0,e?e-(o*t+a*e):0]}const nf=function(l){return[l,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,0,0]},Ey=l=>Math.tan(Ri(l)),_0=l=>[1,0,Ey(l),1,0,0],y0=l=>[1,Ey(l),0,1,0,0],Qu=l=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:a=!1,skewX:o=0,skewY:d=0}=l,p=nf(n?-t:t,a?-e:e);return o&&(p=ki(p,_0(o),!0)),d&&(p=ki(p,y0(d),!0)),p},My=l=>{const{translateX:t=0,translateY:e=0,angle:n=0}=l;let a=hl(t,e);n&&(a=ki(a,oo({angle:n})));const o=Qu(l);return Oy(o)||(a=ki(a,o)),a},Lu=function(l){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,a){if(t&&t.aborted)return a(new u0("loadImage"));const o=ky();let d;t&&(d=function(v){o.src="",a(v)},t.addEventListener("abort",d,{once:!0}));const p=function(){o.onload=o.onerror=null,d&&t?.removeEventListener("abort",d),n(o)};l?(o.onload=p,o.onerror=function(){d&&t?.removeEventListener("abort",d),a(new Yr("Error loading ".concat(o.src)))},e&&(o.crossOrigin=e),o.src=l):p()})},el=function(l){let{signal:t,reviver:e=to}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,a)=>{const o=[];t&&t.addEventListener("abort",a,{once:!0}),Promise.all(l.map(d=>ce.getClass(d.type).fromObject(d,{signal:t}).then(p=>(e(d,p),o.push(p),p)))).then(n).catch(d=>{o.forEach(p=>{p.dispose&&p.dispose()}),a(d)}).finally(()=>{t&&t.removeEventListener("abort",a)})})},Ju=function(l){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,n)=>{const a=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(l).map(p=>p&&p.type&&ce.has(p.type)?el([p],{signal:t}).then(v=>{let[b]=v;return a.push(b),b}):p),d=Object.keys(l);Promise.all(o).then(p=>p.reduce((v,b,C)=>(v[d[C]]=b,v),{})).then(e).catch(p=>{a.forEach(v=>{v.dispose&&v.dispose()}),n(p)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},lo=function(l){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in l&&(t[e]=l[e]),t),{})},b0=(l,t)=>Object.keys(l).reduce((e,n)=>(t(l[n],n,l)&&(e[n]=l[n]),e),{}),fi=(l,t)=>parseFloat(Number(l).toFixed(t)),il=l=>"matrix("+l.map(t=>fi(t,qe.NUM_FRACTION_DIGITS)).join(" ")+")",dr=l=>!!l&&l.toLive!==void 0,Jv=l=>!!l&&typeof l.toObject=="function",$v=l=>!!l&&l.offsetX!==void 0&&"source"in l,Ka=l=>!!l&&"multiSelectionStacking"in l;function Dy(l){const t=l&&Cr(l);let e=0,n=0;if(!l||!t)return{left:e,top:n};let a=l;const o=t.documentElement,d=t.body||{scrollLeft:0,scrollTop:0};for(;a&&(a.parentNode||a.host)&&(a=a.parentNode||a.host,a===t?(e=d.scrollLeft||o.scrollLeft||0,n=d.scrollTop||o.scrollTop||0):(e+=a.scrollLeft||0,n+=a.scrollTop||0),a.nodeType!==1||a.style.position!=="fixed"););return{left:e,top:n}}const Cr=l=>l.ownerDocument||null,jy=l=>{var t;return((t=l.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Ry=function(l,t,e){let{width:n,height:a}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;l.width=n,l.height=a,o>1&&(l.setAttribute("width",(n*o).toString()),l.setAttribute("height",(a*o).toString()),t.scale(o,o))},Bg=(l,t)=>{let{width:e,height:n}=t;e&&(l.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(l.style.height=typeof n=="number"?"".concat(n,"px"):n)};function t_(l){return l.onselectstart!==void 0&&(l.onselectstart=()=>!1),l.style.userSelect=An,l}class x0{constructor(t){vt(this,"_originalCanvasStyle",void 0),vt(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(n=t)&&n.getContext!==void 0?t:t&&ao().getElementById(t)||mr();var n;if(e.hasAttribute("data-fabric"))throw new Yr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:a}=this.lower;a.classList.remove("lower-canvas"),a.removeAttribute("data-fabric"),a.setAttribute("width","".concat(e)),a.setAttribute("height","".concat(n)),a.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:a}=this.lower;Ry(n,a,t,e)}setCSSDimensions(t){Bg(this.lower.el,t)}calcOffset(){return function(t){var e;const n=t&&Cr(t),a={left:0,top:0};if(!n)return a;const o=((e=jy(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};a.left+=parseInt(o.borderLeftWidth,10)||0,a.top+=parseInt(o.borderTopWidth,10)||0,a.left+=parseInt(o.paddingLeft,10)||0,a.top+=parseInt(o.paddingTop,10)||0;let d={left:0,top:0};const p=n.documentElement;t.getBoundingClientRect!==void 0&&(d=t.getBoundingClientRect());const v=Dy(t);return{left:d.left+v.left-(p.clientLeft||0)+a.left,top:d.top+v.top-(p.clientTop||0)+a.top}}(this.lower.el)}dispose(){Ar().dispose(this.lower.el),delete this.lower}}const mS={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...vn]},vS=["objects"];class fl extends p0(Cy){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return fl.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new x0(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Es("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?_y():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const a=_t({width:this.width,height:this.height},t);this.elements.setDimensions(a,this.getRetinaScaling()),this.hasLostContext=!0,this.width=a.width,this.height=a.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,a=[...this.viewportTransform],o=pn(t,In(a));a[0]=e,a[3]=e;const d=pn(o,a);a[4]+=n.x-d.x,a[5]+=n.y-d.y,this.setViewportTransform(a)}setZoom(t){this.zoomToPoint(new Tt(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new Tt(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ru(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,n=In(this.viewportTransform),a=pn({x:0,y:0},n),o=pn({x:t,y:e},n),d=a.min(o),p=a.max(o);return this.vptCoords={tl:d,tr:new Tt(p.x,d.y),bl:new Tt(d.x,p.y),br:p}}cancelRequestedRender(){this.nextRenderHandle&&(Ty(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,a=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),a&&(a._set("canvas",this),a.shouldCache(),a._transformDone=!0,a.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,a)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,a=e.length;n<a;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],a=this["".concat(e,"Image")],o=this.viewportTransform,d=this["".concat(e,"Vpt")];if(!n&&!a)return;const p=dr(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=p?n.toLive(t):n,d&&t.transform(...o),p){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const v=n.gradientTransform||n.patternTransform;v&&t.transform(...v)}t.fill(),t.restore()}if(a){t.save();const{skipOffscreen:v}=this;this.skipOffscreen=d,d&&t.transform(...o),a.render(t),this.skipOffscreen=v,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Tt(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new Tt(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new Tt(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new Tt(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new Tt(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return pn(this.getCenterPoint(),In(this.viewportTransform))}_centerObject(t,e){t.setXY(e,je,je),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,a=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return _t(_t(_t({version:Lh},lo(this,e)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,t,e))},this.__serializeBgOverlay(t,e)),a?{clipPath:a}:null)}_toObject(t,e,n){let a;this.includeDefaultValues||(a=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!a),o}__serializeBgOverlay(t,e){const n={},a=this.backgroundImage,o=this.overlayImage,d=this.backgroundColor,p=this.overlayColor;return dr(d)?d.excludeFromExport||(n.background=d.toObject(e)):d&&(n.background=d),dr(p)?p.excludeFromExport||(n.overlay=p.toObject(e)):p&&(n.overlay=p),a&&!a.excludeFromExport&&(n.backgroundImage=this._toObject(a,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),a=e.height||"".concat(this.height),o=qe.NUM_FRACTION_DIGITS,d=e.viewBox;let p;if(d)p='viewBox="'.concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height,'" ');else if(this.svgViewportTransformation){const v=this.viewportTransform;p='viewBox="'.concat(fi(-v[4]/v[0],o)," ").concat(fi(-v[5]/v[3],o)," ").concat(fi(this.width/v[0],o)," ").concat(fi(this.height/v[3],o),'" ')}else p='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',a,'" ',p,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Lh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(xa()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(dr(e)){const n=this["".concat(t,"Vpt")],a=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?a[0]:1),height:this.height/(n?a[3]:1)};return e.toSVG(o,{additionalTransform:n?il(a):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=qe.fontPaths;this._objects.forEach(function o(d){t.push(d),kh(d)&&d._objects.forEach(o)}),t.forEach(o=>{if(!(d=o)||typeof d._renderText!="function")return;var d;const{styles:p,fontFamily:v}=o;!e[v]&&n[v]&&(e[v]=!0,p&&Object.values(p).forEach(b=>{Object.values(b).forEach(C=>{let{fontFamily:M=""}=C;!e[M]&&n[M]&&(e[M]=!0)})}))});const a=Object.keys(e).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return a?`	<style type="text/css"><![CDATA[
`.concat(a,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(t,n,e)})}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const a=this[e];a&&!a.excludeFromExport&&a.toSVG&&t.push(a.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(dr(n)){const a=n.repeat||"",o=this.width,d=this.height,p=this["".concat(e,"Vpt")]?il(In(this.viewportTransform)):"";t.push('<rect transform="'.concat(p," translate(").concat(o/2,",").concat(d/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-d/2,'" width="').concat(a!=="repeat-y"&&a!=="no-repeat"||!$v(n)?o:n.source.width,'" height="').concat(a!=="repeat-x"&&a!=="no-repeat"||!$v(n)?d:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Yr("`json` is undefined"));const a=typeof t=="string"?JSON.parse(t):t,{objects:o=[]}=a,d=_i(a,vS),{backgroundImage:p,background:v,overlayImage:b,overlay:C,clipPath:M}=d,F=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([el(o,{reviver:e,signal:n}),Ju({backgroundImage:p,backgroundColor:v,overlayImage:b,overlayColor:C,clipPath:M},{signal:n})]).then(E=>{let[X,z]=E;return this.clear(),this.add(...X),this.set(d),this.set(z),this.renderOnAddRemove=F,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Un(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,d=a*(o?this.getRetinaScaling():1);return m0(this.toCanvasElement(d,t),e,n)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,d=a*(o?this.getRetinaScaling():1);return v0(this.toCanvasElement(d,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:a,top:o,filter:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=(e||this.width)*t,v=(n||this.height)*t,b=this.getZoom(),C=this.width,M=this.height,F=this.skipControlsDrawing,E=b*t,X=this.viewportTransform,z=[E,0,0,E,(X[4]-(a||0))*t,(X[5]-(o||0))*t],it=this.enableRetinaScaling,$=Un({width:p,height:v}),lt=d?this._objects.filter(gt=>d(gt)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=z,this.width=p,this.height=v,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas($.getContext("2d"),lt),this.viewportTransform=X,this.width=C,this.height=M,this.calcViewportBoundaries(),this.enableRetinaScaling=it,this.skipControlsDrawing=F,$}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Vu.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}vt(fl,"ownDefaults",mS);const _S=["touchstart","touchmove","touchend"],Ly=l=>{const t=Dy(l.target),e=function(n){const a=n.changedTouches;return a&&a[0]?a[0]:n}(l);return new Tt(e.clientX+t.left,e.clientY+t.top)},Bh=l=>_S.includes(l.type)||l.pointerType==="touch",e_=l=>{l.preventDefault(),l.stopPropagation()},Wr=l=>{let t=0,e=0,n=0,a=0;for(let o=0,d=l.length;o<d;o++){const{x:p,y:v}=l[o];(p>n||!o)&&(n=p),(p<t||!o)&&(t=p),(v>a||!o)&&(a=v),(v<e||!o)&&(e=v)}return{left:t,top:e,width:n-t,height:a-e}},yS=["translateX","translateY","scaleX","scaleY"],Py=(l,t)=>nl(l,ki(t,l.calcOwnMatrix())),nl=(l,t)=>{const e=eo(t),{translateX:n,translateY:a,scaleX:o,scaleY:d}=e,p=_i(e,yS),v=new Tt(n,a);l.flipX=!1,l.flipY=!1,Object.assign(l,p),l.set({scaleX:o,scaleY:d}),l.setPositionByOrigin(v,je,je)},Ny=l=>{l.scaleX=1,l.scaleY=1,l.skewX=0,l.skewY=0,l.flipX=!1,l.flipY=!1,l.rotate(0)},S0=l=>({scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,angle:l.angle,left:l.left,flipX:l.flipX,flipY:l.flipY,top:l.top}),rf=(l,t,e)=>{const n=l/2,a=t/2,o=[new Tt(-n,-a),new Tt(n,-a),new Tt(-n,a),new Tt(n,a)].map(p=>p.transform(e)),d=Wr(o);return new Tt(d.width,d.height)},$u=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vn;return ki(In(arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn),l)},Os=function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vn;return l.transform($u(t,e))},By=function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vn;return l.transform($u(t,e),!0)},zg=(l,t,e)=>{const n=$u(t,e);return nl(l,ki(n,l.calcOwnMatrix())),n},w0=(l,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(l),_t(_t({},t),{},{target:n})),n.fire(l,t)},bS={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Hi=l=>typeof l=="string"?bS[l]:l-.5,zh="not-allowed";function zy(l){return Hi(l.originX)===Hi(je)&&Hi(l.originY)===Hi(je)}function i_(l){return .5-Hi(l)}const Or=(l,t)=>l[t],C0=(l,t,e,n)=>({e:l,transform:t,pointer:new Tt(e,n)});function Fy(l,t){const e=l.getTotalAngle()+Kr(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function sf(l,t,e,n,a){var o;let{target:d,corner:p}=l;const v=d.controls[p],b=((o=d.canvas)===null||o===void 0?void 0:o.getZoom())||1,C=d.padding/b,M=function(F,E,X,z){const it=F.getRelativeCenterPoint(),$=X!==void 0&&z!==void 0?F.translateToGivenOrigin(it,je,je,X,z):new Tt(F.left,F.top);return(F.angle?E.rotate(-Ri(F.angle),it):E).subtract($)}(d,new Tt(n,a),t,e);return M.x>=C&&(M.x-=C),M.x<=-C&&(M.x+=C),M.y>=C&&(M.y-=C),M.y<=C&&(M.y+=C),M.x-=v.offsetX,M.y-=v.offsetY,M}const Iy=(l,t,e,n)=>{const{target:a,offsetX:o,offsetY:d}=t,p=e-o,v=n-d,b=!Or(a,"lockMovementX")&&a.left!==p,C=!Or(a,"lockMovementY")&&a.top!==v;return b&&a.set(ni,p),C&&a.set(Vn,v),(b||C)&&w0(yy,C0(l,t,e,n)),b||C},Fh=l=>l.replace(/\s+/g," "),n_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Sg=(l,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?l+6*(t-l)*e:e<.5?t:e<2/3?l+(t-l)*(2/3-e)*6:l),r_=(l,t,e,n)=>{l/=255,t/=255,e/=255;const a=Math.max(l,t,e),o=Math.min(l,t,e);let d,p;const v=(a+o)/2;if(a===o)d=p=0;else{const b=a-o;switch(p=v>.5?b/(2-a-o):b/(a+o),a){case l:d=(t-e)/b+(t<e?6:0);break;case t:d=(e-l)/b+2;break;case e:d=(l-t)/b+4}d/=6}return[Math.round(360*d),Math.round(100*p),Math.round(100*v),n]},s_=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(l)/(l.endsWith("%")?100:1)},gh=l=>Math.min(Math.round(l),255).toString(16).toUpperCase().padStart(2,"0"),a_=l=>{let[t,e,n,a=1]=l;const o=Math.round(.3*t+.59*e+.11*n);return[o,o,o,a]};class Je{constructor(t){if(vt(this,"isUnrecognised",!1),t)if(t instanceof Je)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,a,o=1]=t;this.setSource([e,n,a,o])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in n_&&(t=n_[t]),t==="transparent"?[255,255,255,0]:Je.sourceFromHex(t)||Je.sourceFromRgb(t)||Je.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=r_(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,a]=r_(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(a,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,a]=this.getSource();return"".concat(gh(t)).concat(gh(e)).concat(gh(n)).concat(gh(Math.round(255*a)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(a_(this.getSource())),this}toBlackWhite(t){const[e,,,n]=a_(this.getSource()),a=e<(t||127)?0:255;return this.setSource([a,a,a,n]),this}overlayWith(t){t instanceof Je||(t=new Je(t));const e=this.getSource(),n=t.getSource(),[a,o,d]=e.map((p,v)=>Math.round(.5*p+.5*n[v]));return this.setSource([a,o,d,e[3]]),this}static fromRgb(t){return Je.fromRgba(t)}static fromRgba(t){return new Je(Je.sourceFromRgb(t))}static sourceFromRgb(t){const e=Fh(t).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(e){const[n,a,o]=e.slice(1,4).map(d=>{const p=parseFloat(d);return d.endsWith("%")?Math.round(2.55*p):p});return[n,a,o,s_(e[4])]}}static fromHsl(t){return Je.fromHsla(t)}static fromHsla(t){return new Je(Je.sourceFromHsl(t))}static sourceFromHsl(t){const e=Fh(t).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!e)return;const n=(Je.parseAngletoDegrees(e[1])%360+360)%360/360,a=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let d,p,v;if(a===0)d=p=v=o;else{const b=o<=.5?o*(a+1):o+a-o*a,C=2*o-b;d=Sg(C,b,n+1/3),p=Sg(C,b,n),v=Sg(C,b,n-1/3)}return[Math.round(255*d),Math.round(255*p),Math.round(255*v),s_(e[4])]}static fromHex(t){return new Je(Je.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let n;n=e.length<=4?e.split("").map(v=>v+v):e.match(/.{2}/g);const[a,o,d,p=255]=n.map(v=>parseInt(v,16));return[a,o,d,p/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),n=parseFloat(e);return e.includes("rad")?Kr(n):e.includes("turn")?360*n:n}}const Cn=function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h0;const e=/\D{0,2}$/.exec(l),n=parseFloat(l),a=qe.DPI;switch(e?.[0]){case"mm":return n*a/25.4;case"cm":return n*a/2.54;case"in":return n*a;case"pt":return n*a/72;case"pc":return n*a/72*12;case"em":return n*t;default:return n}},T0=l=>{const[t,e]=l.trim().split(" "),[n,a]=(o=t)&&o!==An?[o.slice(1,4),o.slice(5,8)]:o===An?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:e||"meet",alignX:n,alignY:a}},Uu=function(l,t){let e,n,a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const o=new Je(t),d=o.getAlpha();e=o.toRgb(),d!==1&&(n=d.toString())}else e="none";return a?"".concat(l,": ").concat(e,"; ").concat(n?"".concat(l,"-opacity: ").concat(n,"; "):""):"".concat(l,'="').concat(e,'" ').concat(n?"".concat(l,'-opacity="').concat(n,'" '):"")};class Vy{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):An,o=this.strokeDashOffset?this.strokeDashOffset:"0",d=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",v=this.strokeMiterLimit?this.strokeMiterLimit:"4",b=this.opacity!==void 0?this.opacity:"1",C=this.visible?"":" visibility: hidden;",M=t?"":this.getSvgFilter(),F=Uu(Yi,this.fill);return[Uu(En,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",d,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",v,"; ",F,"fill-rule: ",e,"; ","opacity: ",b,";",M,C].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'.concat(il(n));return"".concat(a).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=a,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:a,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=e?"":'style="'.concat(this.getSvgStyles(),'" '),p=a?'style="'.concat(this.getSvgFilter(),'" '):"",v=this.clipPath,b=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",C=v&&v.absolutePositioned,M=this.stroke,F=this.fill,E=this.shadow,X=[],z=t.indexOf("COMMON_PARTS");let it;v&&(v.clipPathId="CLIPPATH_".concat(xa()),it='<clipPath id="'.concat(v.clipPathId,`" >
`).concat(v.toClipPathSVG(n),`</clipPath>
`)),C&&X.push("<g ",p,this.getSvgCommons(),` >
`),X.push("<g ",this.getSvgTransform(!1),C?"":p+this.getSvgCommons(),` >
`);const $=[d,b,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[z]=$,dr(F)&&X.push(F.toSVG(this)),dr(M)&&X.push(M.toSVG(this)),E&&X.push(E.toSVG(this)),v&&X.push(it),X.push(t.join("")),X.push(`</g>
`),C&&X.push(`</g>
`),n?n(X.join("")):X.join("")}addPaintOrder(){return this.paintFirst!==Yi?' paint-order="'.concat(this.paintFirst,'" '):""}}function af(l){return new RegExp("^("+l.join("|")+")\\b","i")}const io="textDecorationThickness",Uy=["fontSize","fontWeight","fontFamily","fontStyle"],Hy=["underline","overline","linethrough"],Yy=[...Uy,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Xy=[...Yy,...Hy,"textBackgroundColor","direction",io],xS=[...Uy,...Hy,En,"strokeWidth",Yi,"deltaY","textBackgroundColor",io],SS={_reNewline:f0,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ni,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ni,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[io]:66.667},Ur="justify",Ih="justify-left",Pu="justify-right",Nu="justify-center";var o_,l_,u_;const kr=String.raw(o_||(o_=Jr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),wg=String.raw(l_||(l_=Jr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),Fg="http://www.w3.org/2000/svg",wS=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+kr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+kr+"))?\\s+(.*)"),CS={cx:ni,x:ni,r:"radius",cy:Vn,y:Vn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":io},Cg="font-size",Tg="clip-path",TS=af(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),kS=af(["symbol","image","marker","pattern","view","svg"]),c_=af(["symbol","g","a","svg","clipPath","defs"]),h_=new RegExp(String.raw(u_||(u_=Jr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),kr,wg,kr,wg,kr,wg,kr)),OS=new Tt(1,0),Gy=new Tt,k0=(l,t)=>l.rotate(t),Vh=(l,t)=>new Tt(t).subtract(l),Uh=l=>l.distanceFrom(Gy),Hh=(l,t)=>Math.atan2($o(l,t),Wy(l,t)),qy=l=>Hh(OS,l),of=l=>l.eq(Gy)?l:l.scalarDivide(Uh(l)),O0=function(l){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return of(new Tt(-l.y,l.x).scalarMultiply(t?1:-1))},$o=(l,t)=>l.x*t.y-l.y*t.x,Wy=(l,t)=>l.x*t.x+l.y*t.y,Ig=(l,t,e)=>{if(l.eq(t)||l.eq(e))return!0;const n=$o(t,e),a=$o(t,l),o=$o(e,l);return n>=0?a>=0&&o<=0:!(a<=0&&o>=0)},f_="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",d_=new RegExp("(?:\\s|^)"+f_+f_+"("+kr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Mn{constructor(t){const e=typeof t=="string"?Mn.parseShadow(t):t;Object.assign(this,Mn.ownDefaults,e),this.id=xa()}static parseShadow(t){const e=t.trim(),[,n=0,a=0,o=0]=(d_.exec(e)||[]).map(d=>parseFloat(d)||0);return{color:(e.replace(d_,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:a,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=k0(new Tt(this.offsetX,this.offsetY),Ri(-t.angle)),n=new Je(this.color);let a=40,o=40;return t.width&&t.height&&(a=100*fi((Math.abs(e.x)+this.blur)/t.width,qe.NUM_FRACTION_DIGITS)+20,o=100*fi((Math.abs(e.y)+this.blur)/t.height,qe.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(a,'%" width="').concat(100+2*a,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(fi(this.blur?this.blur/2:0,qe.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(fi(e.x,qe.NUM_FRACTION_DIGITS),'" dy="').concat(fi(e.y,qe.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Mn.ownDefaults;return this.includeDefaultValues?t:b0(t,(n,a)=>n!==e[a])}static async fromObject(t){return new this(t)}}vt(Mn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),vt(Mn,"type","shadow"),ce.setClass(Mn,"shadow");const no=(l,t,e)=>Math.max(l,Math.min(t,e)),AS=[Vn,ni,Dn,$n,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ul,cl],js=[Yi,En,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],ES={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ni,originY:Vn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Yi,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},kg=(l,t,e,n)=>(l<Math.abs(t)?(l=t,n=e/4):n=t===0&&l===0?e/Ms*Math.asin(1):e/Ms*Math.asin(t/l),{a:l,c:t,p:e,s:n}),g_=(l,t,e,n,a)=>l*Math.pow(2,10*(n-=1))*Math.sin((n*a-t)*Ms/e),Zy=(l,t,e,n)=>-e*Math.cos(l/n*ba)+e+t,Vg=(l,t,e,n)=>(l/=n)<1/2.75?e*(7.5625*l*l)+t:l<2/2.75?e*(7.5625*(l-=1.5/2.75)*l+.75)+t:l<2.5/2.75?e*(7.5625*(l-=2.25/2.75)*l+.9375)+t:e*(7.5625*(l-=2.625/2.75)*l+.984375)+t,p_=(l,t,e,n)=>e-Vg(n-l,0,e,n)+t;var MS=Object.freeze({__proto__:null,defaultEasing:Zy,easeInBack:function(l,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(l/=n)*l*((a+1)*l-a)+t},easeInBounce:p_,easeInCirc:(l,t,e,n)=>-e*(Math.sqrt(1-(l/=n)*l)-1)+t,easeInCubic:(l,t,e,n)=>e*(l/n)**3+t,easeInElastic:(l,t,e,n)=>{const a=e;let o=0;if(l===0)return t;if((l/=n)===1)return t+e;o||(o=.3*n);const{a:d,s:p,p:v}=kg(a,e,o,1.70158);return-g_(d,p,v,l,n)+t},easeInExpo:(l,t,e,n)=>l===0?t:e*2**(10*(l/n-1))+t,easeInOutBack:function(l,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(l/=n/2)<1?e/2*(l*l*((1+(a*=1.525))*l-a))+t:e/2*((l-=2)*l*((1+(a*=1.525))*l+a)+2)+t},easeInOutBounce:(l,t,e,n)=>l<n/2?.5*p_(2*l,0,e,n)+t:.5*Vg(2*l-n,0,e,n)+.5*e+t,easeInOutCirc:(l,t,e,n)=>(l/=n/2)<1?-e/2*(Math.sqrt(1-l**2)-1)+t:e/2*(Math.sqrt(1-(l-=2)*l)+1)+t,easeInOutCubic:(l,t,e,n)=>(l/=n/2)<1?e/2*l**3+t:e/2*((l-2)**3+2)+t,easeInOutElastic:(l,t,e,n)=>{const a=e;let o=0;if(l===0)return t;if((l/=n/2)===2)return t+e;o||(o=n*(.3*1.5));const{a:d,s:p,p:v,c:b}=kg(a,e,o,1.70158);return l<1?-.5*g_(d,p,v,l,n)+t:d*Math.pow(2,-10*(l-=1))*Math.sin((l*n-p)*Ms/v)*.5+b+t},easeInOutExpo:(l,t,e,n)=>l===0?t:l===n?t+e:(l/=n/2)<1?e/2*2**(10*(l-1))+t:e/2*-(2**(-10*--l)+2)+t,easeInOutQuad:(l,t,e,n)=>(l/=n/2)<1?e/2*l**2+t:-e/2*(--l*(l-2)-1)+t,easeInOutQuart:(l,t,e,n)=>(l/=n/2)<1?e/2*l**4+t:-e/2*((l-=2)*l**3-2)+t,easeInOutQuint:(l,t,e,n)=>(l/=n/2)<1?e/2*l**5+t:e/2*((l-2)**5+2)+t,easeInOutSine:(l,t,e,n)=>-e/2*(Math.cos(Math.PI*l/n)-1)+t,easeInQuad:(l,t,e,n)=>e*(l/=n)*l+t,easeInQuart:(l,t,e,n)=>e*(l/=n)*l**3+t,easeInQuint:(l,t,e,n)=>e*(l/n)**5+t,easeInSine:(l,t,e,n)=>-e*Math.cos(l/n*ba)+e+t,easeOutBack:function(l,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((l=l/n-1)*l*((a+1)*l+a)+1)+t},easeOutBounce:Vg,easeOutCirc:(l,t,e,n)=>e*Math.sqrt(1-(l=l/n-1)*l)+t,easeOutCubic:(l,t,e,n)=>e*((l/n-1)**3+1)+t,easeOutElastic:(l,t,e,n)=>{const a=e;let o=0;if(l===0)return t;if((l/=n)===1)return t+e;o||(o=.3*n);const{a:d,s:p,p:v,c:b}=kg(a,e,o,1.70158);return d*2**(-10*l)*Math.sin((l*n-p)*Ms/v)+b+t},easeOutExpo:(l,t,e,n)=>l===n?t+e:e*-(2**(-10*l/n)+1)+t,easeOutQuad:(l,t,e,n)=>-e*(l/=n)*(l-2)+t,easeOutQuart:(l,t,e,n)=>-e*((l=l/n-1)*l**3-1)+t,easeOutQuint:(l,t,e,n)=>e*((l/n-1)**5+1)+t,easeOutSine:(l,t,e,n)=>e*Math.sin(l/n*ba)+t});const DS=()=>!1;class A0{constructor(t){let{startValue:e,byValue:n,duration:a=500,delay:o=0,easing:d=Zy,onStart:p=to,onChange:v=to,onComplete:b=to,abort:C=DS,target:M}=t;vt(this,"_state","pending"),vt(this,"durationProgress",0),vt(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=a,this.delay=o,this.easing=d,this._onStart=p,this._onChange=v,this._onComplete=b,this._abort=C,this.target=M,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ru(t),this.delay):Ru(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:a,valueProgress:o}=this.calculate(n);this.value=Object.freeze(a),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ru(this.tick)))}register(){Vu.push(this)}unregister(){Vu.remove(this)}abort(){this._state="aborted",this.unregister()}}const jS=["startValue","endValue"];class RS extends A0{constructor(t){let{startValue:e=0,endValue:n=100}=t;super(_t(_t({},_i(t,jS)),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const LS=["startValue","endValue"];class PS extends A0{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t;super(_t(_t({},_i(t,LS)),{},{startValue:e,byValue:n.map((a,o)=>a-e[o])}))}calculate(t){const e=this.startValue.map((n,a)=>this.easing(t,n,this.byValue[a],this.duration,a));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const NS=["startValue","endValue","easing","onChange","onComplete","abort"],BS=(l,t,e,n)=>t+e*(1-Math.cos(l/n*ba)),Og=l=>l&&((t,e,n)=>l(new Je(t).toRgba(),e,n));class zS extends A0{constructor(t){let{startValue:e,endValue:n,easing:a=BS,onChange:o,onComplete:d,abort:p}=t,v=_i(t,NS);const b=new Je(e).getSource(),C=new Je(n).getSource();super(_t(_t({},v),{},{startValue:b,byValue:C.map((M,F)=>M-b[F]),easing:a,onChange:Og(o),onComplete:Og(d),abort:Og(p)}))}calculate(t){const[e,n,a,o]=this.startValue.map((p,v)=>this.easing(t,p,this.byValue[v],this.duration,v)),d=[...[e,n,a].map(Math.round),no(0,o,1)];return{value:d,valueProgress:d.map((p,v)=>this.byValue[v]!==0?Math.abs((p-this.startValue[v])/this.byValue[v]):0).find(p=>p!==0)||0}}}function E0(l){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(l)?new PS(l):new RS(l);return t.start(),t}function Ky(l){const t=new zS(l);return t.start(),t}class Si{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter(a=>!this.includes(a))),this}static isPointContained(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(a||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(a||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=Vh(e,n),d=Vh(e,t).divide(o);return a?Math.abs(d.x)===Math.abs(d.y):d.x===d.y&&d.x>=0&&d.x<=1}}static isPointInPolygon(t,e){const n=new Tt(t).setX(Math.min(t.x-1,...e.map(o=>o.x)));let a=0;for(let o=0;o<e.length;o++){const d=this.intersectSegmentSegment(e[o],e[(o+1)%e.length],t,n);if(d.includes(t))return!0;a+=+(d.status==="Intersection")}return a%2==1}static intersectLineLine(t,e,n,a){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],d=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const p=e.x-t.x,v=e.y-t.y,b=a.x-n.x,C=a.y-n.y,M=t.x-n.x,F=t.y-n.y,E=b*F-C*M,X=p*F-v*M,z=C*p-b*v;if(z!==0){const it=E/z,$=X/z;return(o||0<=it&&it<=1)&&(d||0<=$&&$<=1)?new Si("Intersection").append(new Tt(t.x+it*p,t.y+it*v)):new Si}if(E===0||X===0){const it=o||d||Si.isPointContained(t,n,a)||Si.isPointContained(e,n,a)||Si.isPointContained(n,t,e)||Si.isPointContained(a,t,e);return new Si(it?"Coincident":void 0)}return new Si("Parallel")}static intersectSegmentLine(t,e,n,a){return Si.intersectLineLine(t,e,n,a,!1,!0)}static intersectSegmentSegment(t,e,n,a){return Si.intersectLineLine(t,e,n,a,!1,!1)}static intersectLinePolygon(t,e,n){let a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const o=new Si,d=n.length;for(let p,v,b,C=0;C<d;C++){if(p=n[C],v=n[(C+1)%d],b=Si.intersectLineLine(t,e,p,v,a,!1),b.status==="Coincident")return b;o.append(...b.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return Si.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new Si,a=t.length,o=[];for(let d=0;d<a;d++){const p=t[d],v=t[(d+1)%a],b=Si.intersectSegmentPolygon(p,v,e);b.status==="Coincident"?(o.push(b),n.append(p,v)):n.append(...b.points)}return o.length>0&&o.length===t.length?new Si("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const a=e.min(n),o=e.max(n),d=new Tt(o.x,a.y),p=new Tt(a.x,o.y);return Si.intersectPolygonPolygon(t,[a,d,o,p])}}class FS extends Cy{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?pn(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=pn(t,In(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new Tt(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:n,bl:a}=this.aCoords||(this.aCoords=this.calcACoords()),o=[t,e,n,a];if(this.group){const d=this.group.calcTransformMatrix();return o.map(p=>pn(p,d))}return o}intersectsWithRect(t,e){return Si.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Si.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:n,top:a,width:o,height:d}=this.getBoundingRect();return n>=t.x&&n+o<=e.x&&a>=t.y&&a+d<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Si.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=e.x&&n.x>=t.x&&n.y<=e.y&&n.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(n=>(n.x>=e.x||n.x<=t.x)&&(n.y>=e.y||n.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return Wr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Dn,t),this._set($n,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Kr(Ay(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||vn.concat()}calcACoords(){const t=oo({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),a=hl(e,n),o=ki(a,t),d=this._getTransformedDimensions(),p=d.x/2,v=d.y/2;return{tl:pn({x:-p,y:-v},o),tr:pn({x:p,y:-v},o),bl:pn({x:-p,y:v},o),br:pn({x:p,y:v},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Hi(this.originX),Hi(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),a=this.matrixCache;return a&&a.key.every((o,d)=>o===n[d])?a.value:(this.group&&(e=ki(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),a={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=My(a);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new Tt(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=_t({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let a=n,o=0;this.strokeUniform&&(a=0,o=n);const d=e.width+a,p=e.height+a;let v;return v=e.skewX===0&&e.skewY===0?new Tt(d*e.scaleX,p*e.scaleY):rf(d,p,Qu(e)),v.scalarAdd(o)}translateToGivenOrigin(t,e,n,a,o){let d=t.x,p=t.y;const v=Hi(a)-Hi(e),b=Hi(o)-Hi(n);if(v||b){const C=this._getTransformedDimensions();d+=v*C.x,p+=b*C.y}return new Tt(d,p)}translateToCenterPoint(t,e,n){if(e===je&&n===je)return t;const a=this.translateToGivenOrigin(t,e,n,je,je);return this.angle?a.rotate(Ri(this.angle),t):a}translateToOriginPoint(t,e,n){const a=this.translateToGivenOrigin(t,je,je,e,n);return this.angle?a.rotate(Ri(this.angle),t):a}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?pn(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new Tt(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const a=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(a,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ni,Vn)}}const IS=["type"],VS=["extraParam"];let Vr=class Oh extends FS{static getDefaults(){return Oh.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Es("warn","Setting type has no effect",t)}constructor(t){super(),vt(this,"_cacheContext",null),Object.assign(this,Oh.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=mr(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,a=qe.maxCacheSideLimit,o=qe.minCacheSideLimit;if(e<=a&&n<=a&&e*n<=qe.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const d=e/n,[p,v]=Jo.limitDimsByArea(d),b=no(o,p,a),C=no(o,v,a);return e>b&&(t.zoomX/=e/b,t.width=b,t.capped=!0),n>C&&(t.zoomY/=n/C,t.height=C,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,a=e.y*t.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(a+2),zoomX:t.x,zoomY:t.y,x:n,y:a}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:n,height:a,zoomX:o,zoomY:d,x:p,y:v}=this._limitCacheSize(this._getCacheCanvasDimensions()),b=n!==t.width||a!==t.height,C=this.zoomX!==o||this.zoomY!==d;if(!t||!e)return!1;if(b||C){n!==t.width||a!==t.height?(t.width=n,t.height=a):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const M=p/2,F=v/2;return this.cacheTranslationX=Math.round(t.width/2-M)+M,this.cacheTranslationY=Math.round(t.height/2-F)+F,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(o,d),this.zoomX=o,this.zoomY=d,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new Tt(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=eo(this.calcTransformMatrix());return new Tt(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==Dn&&t!==$n||(e=this._constrainScale(e)),t===Dn&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Mn||(e=new Mn(e));const n=this[t]!==e;return this[t]=e,n&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:n,cacheTranslationX:a,cacheTranslationY:o}=this,{width:d,height:p}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:n,cacheTranslationX:a,cacheTranslationY:o,width:d,height:p,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===En&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,n){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(n,0,0),t.restore()}drawObject(t,e,n){const a=this.fill,o=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,n),this.fill=a,this.stroke=o}createClipPathLayer(t,e){const n=Un(e),a=n.getContext("2d");if(a.translate(e.cacheTranslationX,e.cacheTranslationY),a.scale(e.zoomX,e.zoomY),t._cacheCanvas=n,e.parentClipPaths.forEach(o=>{o.transform(a)}),e.parentClipPaths.push(t),t.absolutePositioned){const o=In(this.calcTransformMatrix());a.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return t.transform(a),t.drawObject(a,!0,e),n}_drawClipPath(t,e,n){if(!e)return;e._transformDone=!0;const a=this.createClipPathLayer(e,n);this.drawClipPathOnCache(t,e,a)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,n=this._cacheContext;return!(!e||!n||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&n&&!t&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,dr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(dr(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,a=this.getCanvasRetinaScaling(),[o,,,d]=n?.viewportTransform||vn,p=o*a,v=d*a,b=e.nonScaling?new Tt(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*qe.browserShadowBlurConstant*(p+v)*(b.x+b.y)/4,t.shadowOffsetX=e.offsetX*p*b.x,t.shadowOffsetY=e.offsetY*v*b.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!dr(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,a=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,a,o):t.transform(1,0,0,1,a,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:a,offsetY:o}}_renderPaintInOrder(t){this.paintFirst===En?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const a=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),d=a.x/this.scaleX/o,p=a.y/this.scaleY/o,v=Un({width:Math.ceil(d),height:Math.ceil(p)}),b=v.getContext("2d");b&&(b.beginPath(),b.moveTo(0,0),b.lineTo(d,0),b.lineTo(d,p),b.lineTo(0,p),b.closePath(),b.translate(d/2,p/2),b.scale(a.zoomX/this.scaleX/o,a.zoomY/this.scaleY/o),this._applyPatternGradientTransform(b,e),b.fillStyle=e.toLive(t),b.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/a.zoomX,o*this.scaleY/a.zoomY),t.strokeStyle=(n=b.createPattern(v,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new Tt(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(ce.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=S0(this),n=this.group,a=this.shadow,o=Math.abs,d=t.enableRetinaScaling?_y():1,p=(t.multiplier||1)*d,v=t.canvasProvider||(lt=>new fl(lt,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Ny(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&zg(this,this.getViewportTransform()),this.setCoords();const b=mr(),C=this.getBoundingRect(),M=this.shadow,F=new Tt;if(M){const lt=M.blur,gt=M.nonScaling?new Tt(1,1):this.getObjectScaling();F.x=2*Math.round(o(M.offsetX)+lt)*o(gt.x),F.y=2*Math.round(o(M.offsetY)+lt)*o(gt.y)}const E=C.width+F.x,X=C.height+F.y;b.width=Math.ceil(E),b.height=Math.ceil(X);const z=v(b);t.format==="jpeg"&&(z.backgroundColor="#fff"),this.setPositionByOrigin(new Tt(z.width/2,z.height/2),je,je);const it=this.canvas;z._objects=[this],this.set("canvas",z),this.setCoords();const $=z.toCanvasElement(p||1,t);return this.set("canvas",it),this.shadow=a,n&&(this.group=n),this.set(e),this.setCoords(),z._objects=[],z.destroy(),$}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return m0(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return v0(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:a}=this;if(e){const{x:o,y:d}=this.getRelativeCenterPoint();this.originX=je,this.originY=je,this.left=o,this.top=d}if(this.set("angle",t),e){const{x:o,y:d}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,a);this.left=o,this.top=d,this.originX=n,this.originY=a}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Vu.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Ar().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((n,a)=>{let[o,d]=a;return n[o]=this._animate(o,d,e),n},{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=t.split("."),o=this.constructor.colorProperties.includes(a[a.length-1]),{abort:d,startValue:p,onChange:v,onComplete:b}=n,C=_t(_t({},n),{},{target:this,startValue:p??a.reduce((M,F)=>M[F],this),endValue:e,abort:d?.bind(this),onChange:(M,F,E)=>{a.reduce((X,z,it)=>(it===a.length-1&&(X[z]=M),X[z]),this),v&&v(M,F,E)},onComplete:(M,F,E)=>{this.setCoords(),b&&b(M,F,E)}});return o?Ky(C):E0(C)}isDescendantOf(t){const{parent:e,group:n}=this;return e===t||n===t||!!e&&e.isDescendantOf(t)||!!n&&n!==e&&n.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),n=t.getAncestors();if(e.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[t,...n.slice(0,n.length-1)],common:[this]};for(let a,o=0;o<e.length;o++){if(a=e[o],a===t)return{fork:[this,...e.slice(0,o)],otherFork:[],common:e.slice(o)};for(let d=0;d<n.length;d++){if(this===n[d])return{fork:[],otherFork:[t,...n.slice(0,d)],common:[this,...e]};if(a===n[d])return{fork:[this,...e.slice(0,o)],otherFork:[t,...n.slice(0,d)],common:e.slice(o)}}}return{fork:[this,...e],otherFork:[t,...n],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0]||this.canvas;if(!n)return;const a=e.fork.pop(),o=e.otherFork.pop(),d=n._objects.indexOf(a),p=n._objects.indexOf(o);return d>-1&&d>p}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Oh.customProperties,this.constructor.customProperties||[]);let e;const n=qe.NUM_FRACTION_DIGITS,{clipPath:a,fill:o,stroke:d,shadow:p,strokeDashArray:v,left:b,top:C,originX:M,originY:F,width:E,height:X,strokeWidth:z,strokeLineCap:it,strokeDashOffset:$,strokeLineJoin:lt,strokeUniform:gt,strokeMiterLimit:kt,scaleX:St,scaleY:V,angle:Jt,flipX:Wt,flipY:Zt,opacity:he,visible:Pt,backgroundColor:Yt,fillRule:_e,paintFirst:Xt,globalCompositeOperation:Re,skewX:ut,skewY:Gt}=this;a&&!a.excludeFromExport&&(e=a.toObject(t.concat("inverted","absolutePositioned")));const re=ft=>fi(ft,n),le=_t(_t({},lo(this,t)),{},{type:this.constructor.type,version:Lh,originX:M,originY:F,left:re(b),top:re(C),width:re(E),height:re(X),fill:Jv(o)?o.toObject():o,stroke:Jv(d)?d.toObject():d,strokeWidth:re(z),strokeDashArray:v&&v.concat(),strokeLineCap:it,strokeDashOffset:$,strokeLineJoin:lt,strokeUniform:gt,strokeMiterLimit:re(kt),scaleX:re(St),scaleY:re(V),angle:re(Jt),flipX:Wt,flipY:Zt,opacity:re(he),shadow:p&&p.toObject(),visible:Pt,backgroundColor:Yt,fillRule:_e,paintFirst:Xt,globalCompositeOperation:Re,skewX:re(ut),skewY:re(Gt)},e?{clipPath:e}:null);return this.includeDefaultValues?le:this._removeDefaultValues(le)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),n=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return b0(t,(a,o)=>{if(o===ni||o===Vn||o==="type")return!0;const d=n[o];return a!==d&&!(Array.isArray(a)&&Array.isArray(d)&&a.length===0&&d.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=_i(t,IS),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:a}=n,o=_i(n,VS);return Ju(e,o).then(d=>a?(delete d[a],new this(e[a],d)):new this(d))}static fromObject(t,e){return this._fromObject(t,e)}};vt(Vr,"stateProperties",AS),vt(Vr,"cacheProperties",js),vt(Vr,"ownDefaults",ES),vt(Vr,"type","FabricObject"),vt(Vr,"colorProperties",[Yi,En,"backgroundColor"]),vt(Vr,"customProperties",[]),ce.setClass(Vr),ce.setClass(Vr,"object");const wa=(l,t,e)=>(n,a,o,d)=>{const p=t(n,a,o,d);return p&&w0(l,_t(_t({},C0(n,a,o,d)),e)),p};function uo(l){return(t,e,n,a)=>{const{target:o,originX:d,originY:p}=e,v=o.getRelativeCenterPoint(),b=o.translateToOriginPoint(v,d,p),C=l(t,e,n,a);return o.setPositionByOrigin(b,e.originX,e.originY),C}}const Ug=wa(Iu,uo((l,t,e,n)=>{const a=sf(t,t.originX,t.originY,e,n);if(Hi(t.originX)===Hi(je)||Hi(t.originX)===Hi(zi)&&a.x<0||Hi(t.originX)===Hi(ni)&&a.x>0){const{target:o}=t,d=o.strokeWidth/(o.strokeUniform?o.scaleX:1),p=zy(t)?2:1,v=o.width,b=Math.abs(a.x*p/o.scaleX)-d;return o.set("width",Math.max(b,1)),v!==o.width}return!1}));function Qy(l,t,e,n,a){n=n||{};const o=this.sizeX||n.cornerSize||a.cornerSize,d=this.sizeY||n.cornerSize||a.cornerSize,p=n.transparentCorners!==void 0?n.transparentCorners:a.transparentCorners,v=p?En:Yi,b=!p&&(n.cornerStrokeColor||a.cornerStrokeColor);let C,M=t,F=e;l.save(),l.fillStyle=n.cornerColor||a.cornerColor||"",l.strokeStyle=n.cornerStrokeColor||a.cornerStrokeColor||"",o>d?(C=o,l.scale(1,d/o),F=e*o/d):d>o?(C=d,l.scale(o/d,1),M=t*d/o):C=o,l.beginPath(),l.arc(M,F,C/2,0,Ms,!1),l[v](),b&&l.stroke(),l.restore()}function Jy(l,t,e,n,a){n=n||{};const o=this.sizeX||n.cornerSize||a.cornerSize,d=this.sizeY||n.cornerSize||a.cornerSize,p=n.transparentCorners!==void 0?n.transparentCorners:a.transparentCorners,v=p?En:Yi,b=!p&&(n.cornerStrokeColor||a.cornerStrokeColor),C=o/2,M=d/2;l.save(),l.fillStyle=n.cornerColor||a.cornerColor||"",l.strokeStyle=n.cornerStrokeColor||a.cornerStrokeColor||"",l.translate(t,e);const F=a.getTotalAngle();l.rotate(Ri(F)),l["".concat(v,"Rect")](-C,-M,o,d),b&&l.strokeRect(-C,-M,o,d),l.restore()}class zn{constructor(t){vt(this,"visible",!0),vt(this,"actionName",tf),vt(this,"angle",0),vt(this,"x",0),vt(this,"y",0),vt(this,"offsetX",0),vt(this,"offsetY",0),vt(this,"sizeX",0),vt(this,"sizeY",0),vt(this,"touchSizeX",0),vt(this,"touchSizeY",0),vt(this,"cursorStyle","crosshair"),vt(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,n,a){var o;let{tl:d,tr:p,br:v,bl:b}=a;return((o=e.canvas)===null||o===void 0?void 0:o.getActiveObject())===e&&e.isControlVisible(t)&&Si.isPointInPolygon(n,[d,p,v,b])}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,a;return(n=(a=t._controlsVisibility)===null||a===void 0?void 0:a[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,a){return new Tt(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,a,o,d){const p=ef([hl(n,a),oo({angle:t}),nf((o?this.touchSizeX:this.sizeX)||e,(o?this.touchSizeY:this.sizeY)||e)]);return{tl:new Tt(-.5,-.5).transform(p),tr:new Tt(.5,-.5).transform(p),br:new Tt(.5,.5).transform(p),bl:new Tt(-.5,.5).transform(p)}}render(t,e,n,a,o){((a=a||{}).cornerStyle||o.cornerStyle)==="circle"?Qy.call(this,t,e,n,a,o):Jy.call(this,t,e,n,a,o)}}const $y=(l,t,e)=>e.lockRotation?zh:t.cursorStyle,t1=wa(by,uo((l,t,e,n)=>{let{target:a,ex:o,ey:d,theta:p,originX:v,originY:b}=t;const C=a.translateToOriginPoint(a.getRelativeCenterPoint(),v,b);if(Or(a,"lockRotation"))return!1;const M=Math.atan2(d-C.y,o-C.x),F=Math.atan2(n-C.y,e-C.x);let E=Kr(F-M+p);if(a.snapAngle&&a.snapAngle>0){const z=a.snapAngle,it=a.snapThreshold||z,$=Math.ceil(E/z)*z,lt=Math.floor(E/z)*z;Math.abs(E-lt)<it?E=lt:Math.abs(E-$)<it&&(E=$)}E<0&&(E=360+E),E%=360;const X=a.angle!==E;return a.angle=E,X}));function e1(l,t){const e=t.canvas,n=l[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function i1(l,t,e){const n=Or(l,"lockScalingX"),a=Or(l,"lockScalingY");if(n&&a||!t&&(n||a)&&e||n&&t==="x"||a&&t==="y")return!0;const{width:o,height:d,strokeWidth:p}=l;return o===0&&p===0&&t!=="y"||d===0&&p===0&&t!=="x"}const US=["e","se","s","sw","w","nw","n","ne","e"],Ko=(l,t,e)=>{const n=e1(l,e);if(i1(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",n))return zh;const a=Fy(e,t);return"".concat(US[a],"-resize")};function M0(l,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,d=a.by,p=e1(l,o);let v,b,C,M,F,E;if(i1(o,d,p))return!1;if(t.gestureScale)b=t.scaleX*t.gestureScale,C=t.scaleY*t.gestureScale;else{if(v=sf(t,t.originX,t.originY,e,n),F=d!=="y"?Math.sign(v.x||t.signX||1):1,E=d!=="x"?Math.sign(v.y||t.signY||1):1,t.signX||(t.signX=F),t.signY||(t.signY=E),Or(o,"lockScalingFlip")&&(t.signX!==F||t.signY!==E))return!1;if(M=o._getTransformedDimensions(),p&&!d){const it=Math.abs(v.x)+Math.abs(v.y),{original:$}=t,lt=it/(Math.abs(M.x*$.scaleX/o.scaleX)+Math.abs(M.y*$.scaleY/o.scaleY));b=$.scaleX*lt,C=$.scaleY*lt}else b=Math.abs(v.x*o.scaleX/M.x),C=Math.abs(v.y*o.scaleY/M.y);zy(t)&&(b*=2,C*=2),t.signX!==F&&d!=="y"&&(t.originX=i_(t.originX),b*=-1,t.signX=F),t.signY!==E&&d!=="x"&&(t.originY=i_(t.originY),C*=-1,t.signY=E)}const X=o.scaleX,z=o.scaleY;return d?(d==="x"&&o.set(Dn,b),d==="y"&&o.set($n,C)):(!Or(o,"lockScalingX")&&o.set(Dn,b),!Or(o,"lockScalingY")&&o.set($n,C)),X!==o.scaleX||z!==o.scaleY}const gu=wa($h,uo((l,t,e,n)=>M0(l,t,e,n))),n1=wa($h,uo((l,t,e,n)=>M0(l,t,e,n,{by:"x"}))),r1=wa($h,uo((l,t,e,n)=>M0(l,t,e,n,{by:"y"}))),HS=["target","ex","ey","skewingSide"],Ag={x:{counterAxis:"y",scale:Dn,skew:ul,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:$n,skew:cl,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},YS=["ns","nesw","ew","nwse"],s1=(l,t,e)=>{if(t.x!==0&&Or(e,"lockSkewingY")||t.y!==0&&Or(e,"lockSkewingX"))return zh;const n=Fy(e,t)%4;return"".concat(YS[n],"-resize")};function a1(l,t,e,n,a){const{target:o}=e,{counterAxis:d,origin:p,lockSkewing:v,skew:b,flip:C}=Ag[l];if(Or(o,v))return!1;const{origin:M,flip:F}=Ag[d],E=Hi(e[M])*(o[F]?-1:1),X=-Math.sign(E)*(o[C]?-1:1),z=.5*-((o[b]===0&&sf(e,je,je,n,a)[l]>0||o[b]>0?1:-1)*X)+.5;return wa(xy,uo(($,lt,gt,kt)=>function(St,V,Jt){let{target:Wt,ex:Zt,ey:he,skewingSide:Pt}=V,Yt=_i(V,HS);const{skew:_e}=Ag[St],Xt=Jt.subtract(new Tt(Zt,he)).divide(new Tt(Wt.scaleX,Wt.scaleY))[St],Re=Wt[_e],ut=Yt[_e],Gt=Math.tan(Ri(ut)),re=St==="y"?Wt._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:Wt._getTransformedDimensions({scaleX:1,scaleY:1}).y,le=2*Xt*Pt/Math.max(re,1)+Gt,ft=Kr(Math.atan(le));Wt.set(_e,ft);const Ut=Re!==Wt[_e];if(Ut&&St==="y"){const{skewX:ue,scaleX:ee}=Wt,fe=Wt._getTransformedDimensions({skewY:Re}),ge=Wt._getTransformedDimensions(),pe=ue!==0?fe.x/ge.x:1;pe!==1&&Wt.set(Dn,pe*ee)}return Ut}(l,lt,new Tt(gt,kt))))(t,_t(_t({},e),{},{[p]:z,skewingSide:X}),n,a)}const o1=(l,t,e,n)=>a1("x",l,t,e,n),l1=(l,t,e,n)=>a1("y",l,t,e,n);function lf(l,t){return l[t.canvas.altActionKey]}const pu=(l,t,e)=>{const n=lf(l,e);return t.x===0?n?ul:$n:t.y===0?n?cl:Dn:""},Qa=(l,t,e)=>lf(l,e)?s1(0,t,e):Ko(l,t,e),Hg=(l,t,e,n)=>lf(l,t.target)?l1(l,t,e,n):n1(l,t,e,n),Yg=(l,t,e,n)=>lf(l,t.target)?o1(l,t,e,n):r1(l,t,e,n),D0=()=>({ml:new zn({x:-.5,y:0,cursorStyleHandler:Qa,actionHandler:Hg,getActionName:pu}),mr:new zn({x:.5,y:0,cursorStyleHandler:Qa,actionHandler:Hg,getActionName:pu}),mb:new zn({x:0,y:.5,cursorStyleHandler:Qa,actionHandler:Yg,getActionName:pu}),mt:new zn({x:0,y:-.5,cursorStyleHandler:Qa,actionHandler:Yg,getActionName:pu}),tl:new zn({x:-.5,y:-.5,cursorStyleHandler:Ko,actionHandler:gu}),tr:new zn({x:.5,y:-.5,cursorStyleHandler:Ko,actionHandler:gu}),bl:new zn({x:-.5,y:.5,cursorStyleHandler:Ko,actionHandler:gu}),br:new zn({x:.5,y:.5,cursorStyleHandler:Ko,actionHandler:gu}),mtr:new zn({x:0,y:-.5,actionHandler:t1,cursorStyleHandler:$y,offsetY:-40,withConnection:!0,actionName:d0})}),u1=()=>({mr:new zn({x:.5,y:0,actionHandler:Ug,cursorStyleHandler:Qa,actionName:Iu}),ml:new zn({x:-.5,y:0,actionHandler:Ug,cursorStyleHandler:Qa,actionName:Iu})}),c1=()=>_t(_t({},D0()),u1());class rl extends Vr{static getDefaults(){return _t(_t({},super.getDefaults()),rl.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),rl.ownDefaults),this.setOptions(t)}static createControls(){return{controls:D0()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,n=e.target,a=e.action;if(this===n&&a&&a.startsWith(tf))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let a=n.length-1;a>=0;a--){const[o,d]=n[a],p=this.controls[o];if(p.shouldActivate(o,this,t,e?d.touchCorner:d.corner))return this.__corner=o,{key:o,control:p,coord:this.oCoords[o]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=hl(e.x,e.y),a=oo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=ki(n,a),d=ki(t,o),p=ki(d,[1/t[0],0,0,1/t[3],0,0]),v=this.group?eo(this.calcTransformMatrix()):void 0;v&&(v.scaleX=Math.abs(v.scaleX),v.scaleY=Math.abs(v.scaleY));const b=this._calculateCurrentDimensions(v),C={};return this.forEachControl((M,F)=>{const E=M.positionHandler(b,p,this,M);C[F]=Object.assign(E,this._calcCornerCoords(M,E))}),C}_calcCornerCoords(t,e){const n=this.getTotalAngle();return{corner:t.calcCornerCoords(n,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(n,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),a=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/a[0],1/a[3]),t.rotate(Ri(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=_t({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=a.borderColor,this._setLineDash(t,a.borderDashArray),this.strokeBorders(t,e),a.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:a}=this,o=_t({hasBorders:n,hasControls:a},e),d=this.getViewportTransform(),p=o.hasBorders,v=o.hasControls,b=ki(d,this.calcTransformMatrix()),C=eo(b);t.save(),t.translate(C.translateX,C.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(C.angle-=180),t.rotate(Ri(this.group?C.angle:this.angle)),p&&this.drawBorders(t,C,e),v&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let a;if(n&&n.forActiveSelection||this.group){const o=rf(this.width,this.height,Qu(e)),d=this.isStrokeAccountedForInDimensions()?g0:(this.strokeUniform?new Tt().scalarAdd(this.canvas?this.canvas.getZoom():1):new Tt(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);a=o.add(d).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else a=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,a,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl((a,o)=>{a.withConnection&&a.getVisibility(this,o)&&(n=!0,t.moveTo(a.x*e.x,a.y*e.y),t.lineTo(a.x*e.x+a.offsetX,a.y*e.y+a.offsetY))}),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:a,cornerDashArray:o,cornerColor:d}=this,p=_t({cornerStrokeColor:a,cornerDashArray:o,cornerColor:d},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=p.cornerColor,this.transparentCorners||(t.strokeStyle=p.cornerStrokeColor),this._setLineDash(t,p.cornerDashArray),this.forEachControl((v,b)=>{if(v.getVisibility(this,b)){const C=this.oCoords[b];v.render(t,C.x,C.y,p,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[n,a]=e;return this.setControlVisible(n,a)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const a=this.width+4,o=this.height+4;return e.clearRect(-a/2,-o/2,a,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function h1(l,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(l.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})}),l}vt(rl,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class tn extends rl{}h1(tn,[Vy]),ce.setClass(tn),ce.setClass(tn,"object");const f1=(l,t,e,n)=>{const a=2*(n=Math.round(n))+1,{data:o}=l.getImageData(t-n,e-n,a,a);for(let d=3;d<o.length;d+=4)if(o[d]>0)return!1;return!0};class d1{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Tt(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Tt(1/this.options.scaleX,1/this.options.scaleY):new Tt(1,1)}createSideVector(t,e){const n=Vh(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new Tt(t);return e.y+=e.x*Math.tan(Ri(this.options.skewY)),e.x+=e.y*Math.tan(Ri(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const XS=new Tt;class tl extends d1{static getOrthogonalRotationFactor(t,e){const n=e?Hh(t,e):qy(t);return Math.abs(n)<ba?-1:1}constructor(t,e,n,a){super(a),vt(this,"AB",void 0),vt(this,"AC",void 0),vt(this,"alpha",void 0),vt(this,"bisector",void 0),this.A=new Tt(t),this.B=new Tt(e),this.C=new Tt(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Hh(this.AB,this.AC),this.bisector=of(k0(this.AB.eq(XS)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,e),o=O0(a),d=tl.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*d)}projectBevel(){const t=[];return(this.alpha%Ms==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),a=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?Uh(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Uh(a)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(a))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],a=new Tt(tl.getOrthogonalRotationFactor(this.bisector),tl.getOrthogonalRotationFactor(new Tt(this.bisector.y,this.bisector.x)));return[new Tt(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a),new Tt(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a)].forEach(o=>{Ig(o,t,e)&&n.push(this.A.add(o))}),n}projectRoundWithSkew(t,e){const n=[],{skewX:a,skewY:o,scaleX:d,scaleY:p,strokeUniform:v}=this.options,b=new Tt(Math.tan(Ri(a)),Math.tan(Ri(o))),C=this.strokeProjectionMagnitude,M=v?C/p/Math.sqrt(1/p**2+1/d**2*b.y**2):C/Math.sqrt(1+b.y**2),F=new Tt(Math.sqrt(Math.max(C**2-M**2,0)),M),E=v?C/Math.sqrt(1+b.x**2*(1/p)**2/(1/d+1/d*b.x*b.y)**2):C/Math.sqrt(1+b.x**2/(1+b.x*b.y)**2),X=new Tt(E,Math.sqrt(Math.max(C**2-E**2,0)));return[X,X.scalarMultiply(-1),F,F.scalarMultiply(-1)].map(z=>this.applySkew(v?z.multiply(this.strokeUniformScalar):z)).forEach(z=>{Ig(z,t,e)&&n.push(this.applySkew(this.A).add(z))}),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%Ms==0,n=this.applySkew(this.A),a=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),d=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),p=$o(a,d)>0,v=p?a:o,b=p?o:a;return this.isSkewed()?t.push(...this.projectRoundWithSkew(v,b)):t.push(...this.projectRoundNoSkew(v,b)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class m_ extends d1{constructor(t,e,n){super(n),this.A=new Tt(t),this.T=new Tt(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,e);return this.scaleUnitVector(O0(a),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new Tt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new tl(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new Tt(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(of(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),a=this.A.add(n);t.push(a.add(e),a.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const g1=function(l,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(l.length===0)return n;const a=l.reduce((o,d)=>(o[o.length-1].eq(d)||o.push(new Tt(d)),o),[new Tt(l[0])]);if(a.length===1)e=!0;else if(!e){const o=a[0],d=((p,v)=>{for(let b=p.length-1;b>=0;b--)if(v(p[b],b,p))return b;return-1})(a,p=>!p.eq(o));a.splice(d+1)}return a.forEach((o,d,p)=>{let v,b;d===0?(b=p[1],v=e?o:p[p.length-1]):d===p.length-1?(v=p[d-1],b=e?o:p[0]):(v=p[d-1],b=p[d+1]),e&&p.length===1?n.push(...new m_(o,o,t).project()):!e||d!==0&&d!==p.length-1?n.push(...new tl(o,v,b,t).project()):n.push(...new m_(o,d===0?b:v,t).project())}),n},j0=l=>{const t={};return Object.keys(l).forEach(e=>{t[e]={},Object.keys(l[e]).forEach(n=>{t[e][n]=_t({},l[e][n])})}),t},p1=l=>l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let cu;const uf=l=>{if(cu||cu||(cu="Intl"in Tr()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),cu){const t=cu.segment(l);return Array.from(t).map(e=>{let{segment:n}=e;return n})}return GS(l)},GS=l=>{const t=[];for(let e,n=0;n<l.length;n++)(e=qS(l,n))!==!1&&t.push(e);return t},qS=(l,t)=>{const e=l.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return l.charAt(t);if(55296<=e&&e<=56319){if(l.length<=t+1)throw"High surrogate without following low surrogate";const a=l.charCodeAt(t+1);if(56320>a||a>57343)throw"High surrogate without following low surrogate";return l.charAt(t)+l.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=l.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var WS=Object.freeze({__proto__:null,capitalize:function(l){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(l.charAt(0).toUpperCase()).concat(t?l.slice(1):l.slice(1).toLowerCase())},escapeXml:p1,graphemeSplit:uf});const cf=function(l,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.fill!==t.fill||l.stroke!==t.stroke||l.strokeWidth!==t.strokeWidth||l.fontSize!==t.fontSize||l.fontFamily!==t.fontFamily||l.fontWeight!==t.fontWeight||l.fontStyle!==t.fontStyle||l.textDecorationThickness!==t.textDecorationThickness||l.textBackgroundColor!==t.textBackgroundColor||l.deltaY!==t.deltaY||e&&(l.overline!==t.overline||l.underline!==t.underline||l.linethrough!==t.linethrough)},m1=(l,t)=>{const e=t.split(`
`),n=[];let a=-1,o={};l=j0(l);for(let d=0;d<e.length;d++){const p=uf(e[d]);if(l[d])for(let v=0;v<p.length;v++){a++;const b=l[d][v];b&&Object.keys(b).length>0&&(cf(o,b,!0)?n.push({start:a,end:a+1,style:b}):n[n.length-1].end++),o=b||{}}else a+=p.length,o={}}return n},v1=(l,t)=>{if(!Array.isArray(l))return j0(l);const e=t.split(f0),n={};let a=-1,o=0;for(let d=0;d<e.length;d++){const p=uf(e[d]);for(let v=0;v<p.length;v++)a++,l[o]&&l[o].start<=a&&a<l[o].end&&(n[d]=n[d]||{},n[d][v]=_t({},l[o].style),a===l[o].end-1&&o++)}return n},Ca=["display","transform",Yi,"fill-opacity","fill-rule","opacity",En,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function v_(l,t){const e=l.nodeName,n=l.getAttribute("class"),a=l.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let d;if(d=new RegExp("^"+e,"i"),t=t.replace(d,""),a&&t.length&&(d=new RegExp("#"+a+o,"i"),t=t.replace(d,"")),n&&t.length){const p=n.split(" ");for(let v=p.length;v--;)d=new RegExp("\\."+p[v]+o,"i"),t=t.replace(d,"")}return t.length===0}function ZS(l,t){let e=!0;const n=v_(l,t.pop());return n&&t.length&&(e=function(a,o){let d,p=!0;for(;a.parentElement&&a.parentElement.nodeType===1&&o.length;)p&&(d=o.pop()),p=v_(a=a.parentElement,d);return o.length===0}(l,t)),n&&e&&t.length===0}const KS=l=>{var t;return(t=CS[l])!==null&&t!==void 0?t:l},QS=new RegExp("(".concat(kr,")"),"gi"),JS=l=>Fh(l.replace(QS," $1 ").replace(/,/gi," "));var __,y_,b_,x_,S_,w_,C_;const kn="(".concat(kr,")"),$S=String.raw(__||(__=Jr(["(skewX)(",")"],["(skewX)\\(","\\)"])),kn),tw=String.raw(y_||(y_=Jr(["(skewY)(",")"],["(skewY)\\(","\\)"])),kn),ew=String.raw(b_||(b_=Jr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),kn,kn,kn),iw=String.raw(x_||(x_=Jr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),kn,kn),nw=String.raw(S_||(S_=Jr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),kn,kn),rw=String.raw(w_||(w_=Jr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),kn,kn,kn,kn,kn,kn),R0="(?:".concat(rw,"|").concat(nw,"|").concat(ew,"|").concat(iw,"|").concat($S,"|").concat(tw,")"),sw="(?:".concat(R0,"*)"),aw=String.raw(C_||(C_=Jr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),sw),ow=new RegExp(aw),lw=new RegExp(R0),uw=new RegExp(R0,"g");function Hu(l){const t=[];if(!(l=JS(l).replace(/\s*([()])\s*/gi,"$1"))||l&&!ow.test(l))return[...vn];for(const e of l.matchAll(uw)){const n=lw.exec(e[0]);if(!n)continue;let a=vn;const o=n.filter(X=>!!X),[,d,...p]=o,[v,b,C,M,F,E]=p.map(X=>parseFloat(X));switch(d){case"translate":a=hl(v,b);break;case d0:a=oo({angle:v},{x:b,y:C});break;case tf:a=nf(v,b);break;case ul:a=_0(v);break;case cl:a=y0(v);break;case"matrix":a=[v,b,C,M,F,E]}t.push(a)}return ef(t)}function cw(l,t,e,n){const a=Array.isArray(t);let o,d=t;if(l!==Yi&&l!==En||t!==An){if(l==="strokeUniform")return t==="non-scaling-stroke";if(l==="strokeDashArray")d=t===An?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(l==="transformMatrix")d=e&&e.transformMatrix?ki(e.transformMatrix,Hu(t)):Hu(t);else if(l==="visible")d=t!==An&&t!=="hidden",e&&e.visible===!1&&(d=!1);else if(l==="opacity")d=parseFloat(t),e&&e.opacity!==void 0&&(d*=e.opacity);else if(l==="textAnchor")d=t==="start"?ni:t==="end"?zi:je;else if(l==="charSpacing"||l===io)o=Cn(t,n)/n*1e3;else if(l==="paintFirst"){const p=t.indexOf(Yi),v=t.indexOf(En);d=Yi,(p>-1&&v>-1&&v<p||p===-1&&v>-1)&&(d=En)}else{if(l==="href"||l==="xlink:href"||l==="font"||l==="id")return t;if(l==="imageSmoothing")return t==="optimizeQuality";o=a?t.map(Cn):Cn(t,n)}}else d="";return!a&&isNaN(o)?d:o}function _1(l,t){const e=l.match(wS);if(!e)return;const n=e[1],a=e[3],o=e[4],d=e[5],p=e[6];n&&(t.fontStyle=n),a&&(t.fontWeight=isNaN(parseFloat(a))?a:parseFloat(a)),o&&(t.fontSize=Cn(o)),p&&(t.fontFamily=p),d&&(t.lineHeight=d==="normal"?1:d)}function Xg(l,t){l.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[n,a]=e.split(":");t[n.trim().toLowerCase()]=a.trim()})}function y1(l){const t={},e=l.getAttribute("style");return e&&(typeof e=="string"?Xg(e,t):function(n,a){Object.entries(n).forEach(o=>{let[d,p]=o;p!==void 0&&(a[d.toLowerCase()]=p)})}(e,t)),t}const hw={stroke:"strokeOpacity",fill:"fillOpacity"};function $r(l,t,e){if(!l)return{};let n,a={},o=h0;l.parentNode&&c_.test(l.parentNode.nodeName)&&(a=$r(l.parentElement,t,e),a.fontSize&&(n=o=Cn(a.fontSize)));const d=_t(_t(_t({},t.reduce((b,C)=>{const M=l.getAttribute(C);return M&&(b[C]=M),b},{})),function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M={};for(const F in C)ZS(b,F.split(" "))&&(M=_t(_t({},M),C[F]));return M}(l,e)),y1(l));d[Tg]&&l.setAttribute(Tg,d[Tg]),d[Cg]&&(n=Cn(d[Cg],o),d[Cg]="".concat(n));const p={};for(const b in d){const C=KS(b),M=cw(C,d[b],a,n);p[C]=M}p&&p.font&&_1(p.font,p);const v=_t(_t({},a),p);return c_.test(l.nodeName)?v:function(b){const C=tn.getDefaults();return Object.entries(hw).forEach(M=>{let[F,E]=M;if(b[E]===void 0||b[F]==="")return;if(b[F]===void 0){if(!C[F])return;b[F]=C[F]}if(b[F].indexOf("url(")===0)return;const X=new Je(b[F]);b[F]=X.setAlpha(fi(X.getAlpha()*b[E],2)).toRgba()}),b}(v)}const fw=["left","top","width","height","visible"],b1=["rx","ry"];class On extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),On.ownDefaults)}constructor(t){super(),Object.assign(this,On.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,a=-e/2,o=-n/2,d=this.rx?Math.min(this.rx,e/2):0,p=this.ry?Math.min(this.ry,n/2):0,v=d!==0||p!==0;t.beginPath(),t.moveTo(a+d,o),t.lineTo(a+e-d,o),v&&t.bezierCurveTo(a+e-pa*d,o,a+e,o+pa*p,a+e,o+p),t.lineTo(a+e,o+n-p),v&&t.bezierCurveTo(a+e,o+n-pa*p,a+e-pa*d,o+n,a+e-d,o+n),t.lineTo(a+d,o+n),v&&t.bezierCurveTo(a+pa*d,o+n,a,o+n-pa*p,a,o+n-p),t.lineTo(a,o+p),v&&t.bezierCurveTo(a,o+pa*p,a+pa*d,o,a+d,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...b1,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:a}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(a,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const a=$r(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:d=0,width:p=0,height:v=0,visible:b=!0}=a,C=_i(a,fw);return new this(_t(_t(_t({},e),C),{},{left:o,top:d,width:p,height:v,visible:!!(b&&p&&v)}))}}vt(On,"type","Rect"),vt(On,"cacheProperties",[...js,...b1]),vt(On,"ownDefaults",{rx:0,ry:0}),vt(On,"ATTRIBUTE_NAMES",[...Ca,"x","y","rx","ry","width","height"]),ce.setClass(On),ce.setSVGClass(On);const Ts="initialization",Yh="added",L0="removed",Xh="imperative",x1=(l,t)=>{const{strokeUniform:e,strokeWidth:n,width:a,height:o,group:d}=t,p=d&&d!==l?$u(d.calcTransformMatrix(),l.calcTransformMatrix()):null,v=p?t.getRelativeCenterPoint().transform(p):t.getRelativeCenterPoint(),b=!t.isStrokeAccountedForInDimensions(),C=e&&b?By(new Tt(n,n),void 0,l.calcTransformMatrix()):g0,M=!e&&b?n:0,F=rf(a+M,o+M,ef([p,t.calcOwnMatrix()],!0)).add(C).scalarDivide(2);return[v.subtract(F),v.add(F)]};class tc{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:n,strategy:a}=t;return e===Ts||e===Xh||!!n&&a!==n}shouldLayoutClipPath(t){let{type:e,target:{clipPath:n}}=t;return e!==Ts&&n&&!n.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:n,target:a}=e;if(n===Xh&&e.overrides)return e.overrides;if(t.length===0)return;const{left:o,top:d,width:p,height:v}=Wr(t.map(M=>x1(a,M)).reduce((M,F)=>M.concat(F),[])),b=new Tt(p,v),C=new Tt(o,d).add(b.scalarDivide(2));if(n===Ts){const M=this.getInitialSize(e,{size:b,center:C});return{center:C,relativeCorrection:new Tt(0,0),size:M}}return{center:C.transform(a.calcOwnMatrix()),size:b}}}vt(tc,"type","strategy");class Gh extends tc{shouldPerformLayout(t){return!0}}vt(Gh,"type","fit-content"),ce.setClass(Gh);const dw=["strategy"],gw=["target","strategy","bubbles","prevStrategy"],S1="layoutManager";class sl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Gh;vt(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=_t(_t({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const n=this.getLayoutResult(e);n&&this.commitLayout(e,n),this.onAfterLayout(e,n),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:n}=e;return[Nh,yy,Iu,by,$h,xy,Ph,Sy,gS].map(a=>t.on(a,o=>this.performLayout(a===Nh?{type:"object_modified",trigger:a,e:o,target:n}:{type:"object_modifying",trigger:a,e:o,target:n})))}subscribe(t,e){this.unsubscribe(t,e);const n=this.attachHandlers(t,e);this._subscriptions.set(t,n)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(n=>n()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:n}=t,{canvas:a}=e;if(n===Ts||n===Yh?this.subscribeTargets(t):n===L0&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),a&&a.fire("object:layout:before",{target:e,context:t}),n===Xh&&t.deep){const o=_i(t,dw);e.forEachObject(d=>d.layoutManager&&d.layoutManager.performLayout(_t(_t({},o),{},{bubbles:!1,target:d})))}}getLayoutResult(t){const{target:e,strategy:n,type:a}=t,o=n.calcLayoutResult(t,e.getObjects());if(!o)return;const d=a===Ts?new Tt:e.getRelativeCenterPoint(),{center:p,correction:v=new Tt,relativeCorrection:b=new Tt}=o,C=d.subtract(p).add(v).transform(a===Ts?vn:In(e.calcOwnMatrix()),!0).add(b);return{result:o,prevCenter:d,nextCenter:p,offset:C}}commitLayout(t,e){const{target:n}=t,{result:{size:a},nextCenter:o}=e;var d,p;n.set({width:a.x,height:a.y}),this.layoutObjects(t,e),t.type===Ts?n.set({left:(d=t.x)!==null&&d!==void 0?d:o.x+a.x*Hi(n.originX),top:(p=t.y)!==null&&p!==void 0?p:o.y+a.y*Hi(n.originY)}):(n.setPositionByOrigin(o,je,je),n.setCoords(),n.set("dirty",!0))}layoutObjects(t,e){const{target:n}=t;n.forEachObject(a=>{a.group===n&&this.layoutObject(t,e,a)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,n.clipPath)}layoutObject(t,e,n){let{offset:a}=e;n.set({left:n.left+a.x,top:n.top+a.y})}onAfterLayout(t,e){const{target:n,strategy:a,bubbles:o,prevStrategy:d}=t,p=_i(t,gw),{canvas:v}=n;n.fire("layout:after",{context:t,result:e}),v&&v.fire("object:layout:after",{context:t,result:e,target:n});const b=n.parent;o&&b!=null&&b.layoutManager&&((p.path||(p.path=[])).push(n),b.layoutManager.performLayout(_t(_t({},p),{},{target:b}))),n.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(n=>n())),t.clear()}toObject(){return{type:S1,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ce.setClass(sl,S1);const pw=["type","objects","layoutManager"];class mw extends sl{performLayout(){}}class mn extends p0(tn){static getDefaults(){return _t(_t({},super.getDefaults()),mn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vt(this,"_activeObjects",[]),vt(this,"__objectSelectionTracker",void 0),vt(this,"__objectSelectionDisposer",void 0),Object.assign(this,mn.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var n;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(a=>{this.enterGroup(a,!1)}),this.layoutManager=(n=e.layoutManager)!==null&&n!==void 0?n:new sl,this.layoutManager.performLayout({type:Ts,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Es("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Es("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,n,a)=>this.canEnterGroup(e)&&a.indexOf(e)===n)}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const a=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...a);return this._onAfterObjectsChange(Yh,a),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];const o=this._filterObjectsBeforeEnteringGroup(n),d=super.insertAt(t,...o);return this._onAfterObjectsChange(Yh,o),d}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(L0,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&(this._objects||[]).forEach(a=>{a._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:n}=e;const a=this._activeObjects;if(t)a.push(n),this._set("dirty",!0);else if(a.length>0){const o=a.indexOf(n);o>-1&&(a.splice(o,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&nl(t,ki(In(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(nl(t,ki(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=tn.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,n){this._renderBackground(t);for(let o=0;o<this._objects.length;o++){var a;const d=this._objects[o];(a=this.canvas)!==null&&a!==void 0&&a.preserveObjectStacking&&d.group!==this?(t.save(),t.transform(...In(this.calcTransformMatrix())),d.render(t),t.restore()):d.group===this&&d.render(t)}this._drawClipPath(t,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(_t({target:this,type:Xh},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter(function(a){return!a.excludeFromExport}).map(function(a){const o=a.includeDefaultValues;a.includeDefaultValues=n;const d=a[t||"toObject"](e);return a.includeDefaultValues=o,d})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return _t(_t(_t({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=On.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const a=e.join("");return t?t(a):a}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let a=0;a<this._objects.length;a++)e.push("		",this._objects[a].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let a=0;a<this._objects.length;a++)e.push("	",this._objects[a].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:n,objects:a=[],layoutManager:o}=t,d=_i(t,pw);return Promise.all([el(a,e),Ju(d,e)]).then(p=>{let[v,b]=p;const C=new this(v,_t(_t(_t({},d),b),{},{layoutManager:new mw}));if(o){const M=ce.getClass(o.type),F=ce.getClass(o.strategy);C.layoutManager=new M(new F)}else C.layoutManager=new sl;return C.layoutManager.subscribeTargets({type:Ts,target:C,targets:C.getObjects()}),C.setCoords(),C})}}vt(mn,"type","Group"),vt(mn,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ce.setClass(mn);const w1=(l,t)=>Math.min(t.width/l.width,t.height/l.height),C1=(l,t)=>Math.max(t.width/l.width,t.height/l.height),Gg="\\s*,?\\s*",hu="".concat(Gg,"(").concat(kr,")"),vw="".concat(hu).concat(hu).concat(hu).concat(Gg,"([01])").concat(Gg,"([01])").concat(hu).concat(hu),_w={m:"l",M:"L"},yw=(l,t,e,n,a,o,d,p,v,b,C)=>{const M=Er(l),F=Mr(l),E=Er(t),X=Mr(t),z=e*a*E-n*o*X+d,it=n*a*E+e*o*X+p;return["C",b+v*(-e*a*F-n*o*M),C+v*(-n*a*F+e*o*M),z+v*(e*a*X+n*o*E),it+v*(n*a*X-e*o*E),z,it]},T_=(l,t,e,n)=>{const a=Math.atan2(t,l),o=Math.atan2(n,e);return o>=a?o-a:2*Math.PI-(a-o)};function qg(l,t,e,n,a,o,d,p){let v;if(qe.cachesBoundsOfCurve&&(v=[...arguments].join(),Jo.boundsOfCurveCache[v]))return Jo.boundsOfCurveCache[v];const b=Math.sqrt,C=Math.abs,M=[],F=[[0,0],[0,0]];let E=6*l-12*e+6*a,X=-3*l+9*e-9*a+3*d,z=3*e-3*l;for(let kt=0;kt<2;++kt){if(kt>0&&(E=6*t-12*n+6*o,X=-3*t+9*n-9*o+3*p,z=3*n-3*t),C(X)<1e-12){if(C(E)<1e-12)continue;const Zt=-z/E;0<Zt&&Zt<1&&M.push(Zt);continue}const St=E*E-4*z*X;if(St<0)continue;const V=b(St),Jt=(-E+V)/(2*X);0<Jt&&Jt<1&&M.push(Jt);const Wt=(-E-V)/(2*X);0<Wt&&Wt<1&&M.push(Wt)}let it=M.length;const $=it,lt=k1(l,t,e,n,a,o,d,p);for(;it--;){const{x:kt,y:St}=lt(M[it]);F[0][it]=kt,F[1][it]=St}F[0][$]=l,F[1][$]=t,F[0][$+1]=d,F[1][$+1]=p;const gt=[new Tt(Math.min(...F[0]),Math.min(...F[1])),new Tt(Math.max(...F[0]),Math.max(...F[1]))];return qe.cachesBoundsOfCurve&&(Jo.boundsOfCurveCache[v]=gt),gt}const bw=(l,t,e)=>{let[n,a,o,d,p,v,b,C]=e;const M=((F,E,X,z,it,$,lt)=>{if(X===0||z===0)return[];let gt=0,kt=0,St=0;const V=Math.PI,Jt=lt*c0,Wt=Mr(Jt),Zt=Er(Jt),he=.5*(-Zt*F-Wt*E),Pt=.5*(-Zt*E+Wt*F),Yt=X**2,_e=z**2,Xt=Pt**2,Re=he**2,ut=Yt*_e-Yt*Xt-_e*Re;let Gt=Math.abs(X),re=Math.abs(z);if(ut<0){const ze=Math.sqrt(1-ut/(Yt*_e));Gt*=ze,re*=ze}else St=(it===$?-1:1)*Math.sqrt(ut/(Yt*Xt+_e*Re));const le=St*Gt*Pt/re,ft=-St*re*he/Gt,Ut=Zt*le-Wt*ft+.5*F,ue=Wt*le+Zt*ft+.5*E;let ee=T_(1,0,(he-le)/Gt,(Pt-ft)/re),fe=T_((he-le)/Gt,(Pt-ft)/re,(-he-le)/Gt,(-Pt-ft)/re);$===0&&fe>0?fe-=2*V:$===1&&fe<0&&(fe+=2*V);const ge=Math.ceil(Math.abs(fe/V*2)),pe=[],vi=fe/ge,Ze=8/3*Math.sin(vi/4)*Math.sin(vi/4)/Math.sin(vi/2);let Be=ee+vi;for(let ze=0;ze<ge;ze++)pe[ze]=yw(ee,Be,Zt,Wt,Gt,re,Ut,ue,Ze,gt,kt),gt=pe[ze][5],kt=pe[ze][6],ee=Be,Be+=vi;return pe})(b-l,C-t,a,o,p,v,d);for(let F=0,E=M.length;F<E;F++)M[F][1]+=l,M[F][2]+=t,M[F][3]+=l,M[F][4]+=t,M[F][5]+=l,M[F][6]+=t;return M},T1=l=>{let t=0,e=0,n=0,a=0;const o=[];let d,p=0,v=0;for(const b of l){const C=[...b];let M;switch(C[0]){case"l":C[1]+=t,C[2]+=e;case"L":t=C[1],e=C[2],M=["L",t,e];break;case"h":C[1]+=t;case"H":t=C[1],M=["L",t,e];break;case"v":C[1]+=e;case"V":e=C[1],M=["L",t,e];break;case"m":C[1]+=t,C[2]+=e;case"M":t=C[1],e=C[2],n=C[1],a=C[2],M=["M",t,e];break;case"c":C[1]+=t,C[2]+=e,C[3]+=t,C[4]+=e,C[5]+=t,C[6]+=e;case"C":p=C[3],v=C[4],t=C[5],e=C[6],M=["C",C[1],C[2],p,v,t,e];break;case"s":C[1]+=t,C[2]+=e,C[3]+=t,C[4]+=e;case"S":d==="C"?(p=2*t-p,v=2*e-v):(p=t,v=e),t=C[3],e=C[4],M=["C",p,v,C[1],C[2],t,e],p=M[3],v=M[4];break;case"q":C[1]+=t,C[2]+=e,C[3]+=t,C[4]+=e;case"Q":p=C[1],v=C[2],t=C[3],e=C[4],M=["Q",p,v,t,e];break;case"t":C[1]+=t,C[2]+=e;case"T":d==="Q"?(p=2*t-p,v=2*e-v):(p=t,v=e),t=C[1],e=C[2],M=["Q",p,v,t,e];break;case"a":C[6]+=t,C[7]+=e;case"A":bw(t,e,C).forEach(F=>o.push(F)),t=C[6],e=C[7];break;case"z":case"Z":t=n,e=a,M=["Z"]}M?(o.push(M),d=M[0]):d=""}return o},qh=(l,t,e,n)=>Math.sqrt((e-l)**2+(n-t)**2),k1=(l,t,e,n,a,o,d,p)=>v=>{const b=v**3,C=(E=>3*E**2*(1-E))(v),M=(E=>3*E*(1-E)**2)(v),F=(E=>(1-E)**3)(v);return new Tt(d*b+a*C+e*M+l*F,p*b+o*C+n*M+t*F)},O1=l=>l**2,A1=l=>2*l*(1-l),E1=l=>(1-l)**2,xw=(l,t,e,n,a,o,d,p)=>v=>{const b=O1(v),C=A1(v),M=E1(v),F=3*(M*(e-l)+C*(a-e)+b*(d-a)),E=3*(M*(n-t)+C*(o-n)+b*(p-o));return Math.atan2(E,F)},Sw=(l,t,e,n,a,o)=>d=>{const p=O1(d),v=A1(d),b=E1(d);return new Tt(a*p+e*v+l*b,o*p+n*v+t*b)},ww=(l,t,e,n,a,o)=>d=>{const p=1-d,v=2*(p*(e-l)+d*(a-e)),b=2*(p*(n-t)+d*(o-n));return Math.atan2(b,v)},k_=(l,t,e)=>{let n=new Tt(t,e),a=0;for(let o=1;o<=100;o+=1){const d=l(o/100);a+=qh(n.x,n.y,d.x,d.y),n=d}return a},Cw=(l,t)=>{let e,n=0,a=0,o={x:l.x,y:l.y},d=_t({},o),p=.01,v=0;const b=l.iterator,C=l.angleFinder;for(;a<t&&p>1e-4;)d=b(n),v=n,e=qh(o.x,o.y,d.x,d.y),e+a>t?(n-=p,p/=2):(o=d,n+=p,a+=e);return _t(_t({},d),{},{angle:C(v)})},P0=l=>{let t,e,n=0,a=0,o=0,d=0,p=0;const v=[];for(const b of l){const C={x:a,y:o,command:b[0],length:0};switch(b[0]){case"M":e=C,e.x=d=a=b[1],e.y=p=o=b[2];break;case"L":e=C,e.length=qh(a,o,b[1],b[2]),a=b[1],o=b[2];break;case"C":t=k1(a,o,b[1],b[2],b[3],b[4],b[5],b[6]),e=C,e.iterator=t,e.angleFinder=xw(a,o,b[1],b[2],b[3],b[4],b[5],b[6]),e.length=k_(t,a,o),a=b[5],o=b[6];break;case"Q":t=Sw(a,o,b[1],b[2],b[3],b[4]),e=C,e.iterator=t,e.angleFinder=ww(a,o,b[1],b[2],b[3],b[4]),e.length=k_(t,a,o),a=b[3],o=b[4];break;case"Z":e=C,e.destX=d,e.destY=p,e.length=qh(a,o,d,p),a=d,o=p}n+=e.length,v.push(e)}return v.push({length:n,x:a,y:o}),v},M1=function(l,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P0(l),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const a=e[n],o=t/a.length,d=l[n];switch(a.command){case"M":return{x:a.x,y:a.y,angle:0};case"Z":return _t(_t({},new Tt(a.x,a.y).lerp(new Tt(a.destX,a.destY),o)),{},{angle:Math.atan2(a.destY-a.y,a.destX-a.x)});case"L":return _t(_t({},new Tt(a.x,a.y).lerp(new Tt(d[1],d[2]),o)),{},{angle:Math.atan2(d[2]-a.y,d[1]-a.x)});case"C":case"Q":return Cw(a,t)}},Tw=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),O_=new RegExp(vw,"g"),kw=new RegExp(kr,"gi"),Ow={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},D1=l=>{var t;const e=[],n=(t=l.match(Tw))!==null&&t!==void 0?t:[];for(const a of n){const o=a[0];if(o==="z"||o==="Z"){e.push([o]);continue}const d=Ow[o.toLowerCase()];let p=[];if(o==="a"||o==="A"){O_.lastIndex=0;for(let v=null;v=O_.exec(a);)p.push(...v.slice(1))}else p=a.match(kw)||[];for(let v=0;v<p.length;v+=d){const b=new Array(d),C=_w[o];b[0]=v>0&&C?C:o;for(let M=0;M<d;M++)b[M+1]=parseFloat(p[v+M]);e.push(b)}}return e},j1=function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new Tt(l[0]),n=new Tt(l[1]),a=1,o=0;const d=[],p=l.length,v=p>2;let b;for(v&&(a=l[2].x<n.x?-1:l[2].x===n.x?0:1,o=l[2].y<n.y?-1:l[2].y===n.y?0:1),d.push(["M",e.x-a*t,e.y-o*t]),b=1;b<p;b++){if(!e.eq(n)){const C=e.midPointFrom(n);d.push(["Q",e.x,e.y,C.x,C.y])}e=l[b],b+1<l.length&&(n=l[b+1])}return v&&(a=e.x>l[b-2].x?1:e.x===l[b-2].x?0:-1,o=e.y>l[b-2].y?1:e.y===l[b-2].y?0:-1),d.push(["L",e.x+a*t,e.y+o*t]),d},N0=(l,t)=>l.map(e=>e.map((n,a)=>a===0||t===void 0?n:fi(n,t)).join(" ")).join(" ");function Wh(l,t){const e=l.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(n=>{let[a,o]=n;return e.setProperty(a,o)}))}const Ja=(l,t)=>Math.floor(Math.random()*(t-l+1))+l;function R1(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||to,n=new(Tr()).XMLHttpRequest,a=t.signal,o=function(){n.abort()},d=function(){a&&a.removeEventListener("abort",o),n.onerror=n.ontimeout=to};if(a&&a.aborted)throw new u0("request");return a&&a.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(d(),e(n),n.onreadystatechange=to)},n.onerror=n.ontimeout=d,n.open("get",l,!0),n.send(),n}const Ah=(l,t)=>{let e=l._findCenterFromElement();l.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:a,scaleY:o,angle:d,skewX:p}=eo(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(Dn,a),n.set($n,o),n.angle=d,n.skewX=p,n.skewY=0}})(l),e=e.transform(l.transformMatrix)),delete l.transformMatrix,t&&(l.scaleX*=t.scaleX,l.scaleY*=t.scaleY,l.cropX=t.cropX,l.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,l.width=t.width,l.height=t.height),l.setPositionByOrigin(e,je,je)};var Wg=Object.freeze({__proto__:null,addTransformToObject:Py,animate:E0,animateColor:Ky,applyTransformToObject:nl,calcAngleBetweenVectors:Hh,calcDimensionsMatrix:Qu,calcPlaneChangeMatrix:$u,calcVectorRotation:qy,cancelAnimFrame:Ty,capValue:no,composeMatrix:My,copyCanvasElement:l=>{var t;const e=Un(l);return(t=e.getContext("2d"))===null||t===void 0||t.drawImage(l,0,0),e},cos:Er,createCanvasElement:mr,createImage:ky,createRotateMatrix:oo,createScaleMatrix:nf,createSkewXMatrix:_0,createSkewYMatrix:y0,createTranslateMatrix:hl,createVector:Vh,crossProduct:$o,degreesToRadians:Ri,dotProduct:Wy,ease:MS,enlivenObjectEnlivables:Ju,enlivenObjects:el,findScaleToCover:C1,findScaleToFit:w1,getBoundsOfCurve:qg,getOrthonormalVector:O0,getPathSegmentsInfo:P0,getPointOnPath:M1,getPointer:Ly,getRandomInt:Ja,getRegularPolygonPath:(l,t)=>{const e=2*Math.PI/l;let n=-ba;l%2==0&&(n+=e/2);const a=new Array(l+1);for(let o=0;o<l;o++){const d=o*e+n,{x:p,y:v}=new Tt(Er(d),Mr(d)).scalarMultiply(t);a[o]=[o===0?"M":"L",p,v]}return a[l]=["Z"],a},getSmoothPathFromPoints:j1,getSvgAttributes:l=>{const t=["instantiated_by_use","style","id","class"];switch(l){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:of,groupSVGElements:(l,t)=>l&&l.length===1?l[0]:new mn(l,t),hasStyleChanged:cf,invertTransform:In,isBetweenVectors:Ig,isIdentityMatrix:Oy,isTouchEvent:Bh,isTransparent:f1,joinPath:N0,loadImage:Lu,magnitude:Uh,makeBoundingBoxFromPoints:Wr,makePathSimpler:T1,matrixToSVG:il,mergeClipPaths:(l,t)=>{var e;let n=l,a=t;n.inverted&&!a.inverted&&(n=t,a=l),zg(a,(e=a.group)===null||e===void 0?void 0:e.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&a.inverted;return o&&(n.inverted=a.inverted=!1),new mn([n],{clipPath:a,inverted:o})},multiplyTransformMatrices:ki,multiplyTransformMatrixArray:ef,parsePath:D1,parsePreserveAspectRatioAttribute:T0,parseUnit:Cn,pick:lo,projectStrokeOnPoints:g1,qrDecompose:eo,radiansToDegrees:Kr,removeFromArray:Za,removeTransformFromObject:(l,t)=>{const e=In(t),n=ki(e,l.calcOwnMatrix());nl(l,n)},removeTransformMatrixForSvgParsing:Ah,request:R1,requestAnimFrame:Ru,resetObjectTransform:Ny,rotatePoint:(l,t,e)=>l.rotate(e,t),rotateVector:k0,saveObjectTransform:S0,sendObjectToPlane:zg,sendPointToPlane:Os,sendVectorToPlane:By,setStyle:Wh,sin:Mr,sizeAfterTransform:rf,string:WS,stylesFromArray:v1,stylesToArray:m1,toBlob:v0,toDataURL:m0,toFixed:fi,transformPath:(l,t,e)=>(e&&(t=ki(t,[1,0,0,1,-e.x,-e.y])),l.map(n=>{const a=[...n];for(let o=1;o<n.length-1;o+=2){const{x:d,y:p}=pn({x:n[o],y:n[o+1]},t);a[o]=d,a[o+1]=p}return a})),transformPoint:pn});class L1 extends x0{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),vt(this,"upper",void 0),vt(this,"container",void 0);const{el:a}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(a,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const d=this.createContainerElement();d.classList.add(n),a.parentNode&&a.parentNode.replaceChild(d,a),d.append(a,o),this.container=d}createUpperCanvas(){const{el:t}=this.lower,e=mr();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=ao().createElement("div");return t.setAttribute("data-fabric","wrapper"),Wh(t,{position:"relative"}),t_(t),t}applyCanvasStyle(t,e){const{styles:n,allowTouchScrolling:a}=e;Wh(t,_t(_t({},n),{},{"touch-action":a?"manipulation":An})),t_(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:a}=this.upper;Ry(n,a,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Bg(this.upper.el,t),Bg(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:a}=this.upper;super.cleanupDOM(t),e.removeChild(a),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),Ar().dispose(this.upper.el),delete this.upper,delete this.container}}class hf extends fl{constructor(){super(...arguments),vt(this,"targets",[]),vt(this,"_hoveredTargets",[]),vt(this,"_currentTransform",null),vt(this,"_groupSelector",null),vt(this,"contextTopDirty",!1)}static getDefaults(){return _t(_t({},super.getDefaults()),hf.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new L1(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const a=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+a,-n+a),o.transform(...this.viewportTransform);const d=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=d,o.restore();const p=Math.round(a*this.getRetinaScaling());return f1(o,p,p,p)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(n=>!!n&&t[n]===!0):t[e])}_shouldClearSelection(t,e){const n=this.getActiveObjects(),a=this._activeObject;return!!(!e||e&&a&&n.length>1&&n.indexOf(e)===-1&&a!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&a&&a!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let a;return e===tf||e===Dn||e===$n||e===Iu?a=this.centeredScaling||t.centeredScaling:e===d0&&(a=this.centeredRotation||t.centeredRotation),a?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?n.x=zi:["mr","tr","br"].includes(e)&&(n.x=ni),["tl","mt","tr"].includes(e)?n.y=Ng:["bl","mb","br"].includes(e)&&(n.y=Vn)),n}_setupCurrentTransform(t,e,n){var a;const o=e.group?Os(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:d="",control:p}=e.getActiveControl()||{},v=n&&p?(a=p.getActionHandler(t,e,p))===null||a===void 0?void 0:a.bind(p):Iy,b=((E,X,z,it)=>{if(!X||!E)return"drag";const $=it.controls[X];return $.getActionName(z,$,it)})(n,d,t,e),C=t[this.centeredKey],M=this._shouldCenterTransform(e,b,C)?{x:je,y:je}:this._getOriginFromCorner(e,d),F={target:e,action:b,actionHandler:v,actionPerformed:!1,corner:d,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:o.x-e.left,offsetY:o.y-e.top,originX:M.x,originY:M.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:Ri(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:C,original:_t(_t({},S0(e)),{},{originX:M.x,originY:M.y})};this._currentTransform=F,this.fire("before:transform",{e:t,transform:F})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:a,deltaY:o}=this._groupSelector,d=new Tt(e,n).transform(this.viewportTransform),p=new Tt(e+a,n+o).transform(this.viewportTransform),v=this.selectionLineWidth/2;let b=Math.min(d.x,p.x),C=Math.min(d.y,p.y),M=Math.max(d.x,p.x),F=Math.max(d.y,p.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(b,C,M-b,F-C)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,b+=v,C+=v,M-=v,F-=v,tn.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(b,C,M-b,F-C))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),n=this._activeObject,a=this.getActiveObjects();if(this.targets=[],n&&a.length>=1){if(n.findControl(e,Bh(t))||a.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e)){if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const d=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&d&&d!==n?(this.targets=o,n):d}return n}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let n=t.getCoords();const a=this.getZoom(),o=t.padding/a;if(o){const[d,p,v,b]=n,C=Math.atan2(p.y-d.y,p.x-d.x),M=Er(C)*o,F=Mr(C)*o,E=M+F,X=M-F;n=[new Tt(d.x-X,d.y-E),new Tt(p.x+E,p.y-X),new Tt(v.x+X,v.y+E),new Tt(b.x-E,b.y+X)]}return Si.isPointInPolygon(e,n)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Os(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let n=t.length;for(;n--;){const a=t[n];if(this._checkTarget(a,e)){if(kh(a)&&a.subTargetCheck){const o=this._searchPossibleTargets(a._objects,e);o&&this.targets.push(o)}return a}}}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);if(n&&kh(n)&&n.interactive&&this.targets[0]){const a=this.targets;for(let o=a.length-1;o>0;o--){const d=a[o];if(!kh(d)||!d.interactive)return d}return a[0]}return n}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,a=n.getBoundingClientRect();let o=Ly(t),d=a.width||0,p=a.height||0;d&&p||(Vn in a&&Ng in a&&(p=Math.abs(a.top-a.bottom)),zi in a&&ni in a&&(d=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=Os(o,void 0,this.viewportTransform));const v=this.getRetinaScaling();v!==1&&(o.x/=v,o.y/=v);const b=d===0||p===0?new Tt(1,1):new Tt(n.width/d,n.height/p);return o.multiply(b)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=mr(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Ka(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let n=!1,a=!1;const o=this.getActiveObjects(),d=[],p=[];t.forEach(v=>{o.includes(v)||(n=!0,v.fire("deselected",{e,target:v}),p.push(v))}),o.forEach(v=>{t.includes(v)||(n=!0,v.fire("selected",{e,target:v}),d.push(v))}),t.length>0&&o.length>0?(a=!0,n&&this.fire("selection:updated",{e,selected:d,deselected:p})):o.length>0?(a=!0,this.fire("selection:created",{e,selected:d})):t.length>0&&(a=!0,this.fire("selection:cleared",{e,deselected:p})),a&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),a=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),a}_setActiveObject(t,e){const n=this._activeObject;return n!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,Ka(t)&&n!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const n=this._activeObject;return!!n&&!n.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),Ka(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const a=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),a}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,a={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",a),n.fire(Nh,a))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;Ka(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const a=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(a),o}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&Ka(e)&&this._activeObject===e){const n=lo(t,["angle","flipX","flipY",ni,Dn,$n,ul,cl,Vn]);return Py(t,e.calcOwnMatrix()),n}return{}}_setSVGObject(t,e,n){const a=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(a)}}vt(hf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Aw{constructor(t){vt(this,"targets",[]),vt(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:a}=t.getActiveObject()||{};a&&a.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),Za(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Ew=["target","oldTarget","fireCanvas","e"],Jn={passive:!1},Wo=(l,t)=>{const e=l.getViewportPoint(t),n=l.getScenePoint(t);return{viewportPoint:e,scenePoint:n,pointer:e,absolutePointer:n}},ma=function(l){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return l.addEventListener(...e)},hr=function(l){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return l.removeEventListener(...e)},Mw={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Yu extends hf{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),vt(this,"_isClick",void 0),vt(this,"textEditingManager",new Aw(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(ma,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,a=this._getEventPrefix();t(jy(n),"resize",this._onResize),t(n,a+"down",this._onMouseDown),t(n,"".concat(a,"move"),this._onMouseMove,Jn),t(n,"".concat(a,"out"),this._onMouseOut),t(n,"".concat(a,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel,{passive:!1}),t(n,"contextmenu",this._onContextMenu),t(n,"click",this._onClick),t(n,"dblclick",this._onClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,Jn)}removeListeners(){this.addOrRemove(hr,"remove");const t=this._getEventPrefix(),e=Cr(this.upperCanvasEl);hr(e,"".concat(t,"up"),this._onMouseUp),hr(e,"touchend",this._onTouchEnd,Jn),hr(e,"".concat(t,"move"),this._onMouseMove,Jn),hr(e,"touchmove",this._onMouseMove,Jn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n=_t({e:t},Wo(this,t));this.fire("mouse:out",_t(_t({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",_t({},n)),this._hoveredTargets.forEach(a=>{this.fire("mouse:out",_t(_t({},n),{},{target:a})),a&&a.fire("mouseout",_t({},n))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",_t({e:t},Wo(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};return this.fire("dragstart",n),e.fire("dragstart",n),void ma(this.upperCanvasEl,"drag",this._onDragProgress)}e_(t)}_renderDragEffects(t,e,n){let a=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),a=!0),e?.clearContextTop(),n!==e&&n?.clearContextTop();const d=this.contextTop;d.save(),d.transform(...this.viewportTransform),e&&(d.save(),e.transform(d),e.renderDragSourceEffect(t),d.restore(),a=!0),n&&(d.save(),n.transform(d),n.renderDropTargetEffect(t),d.restore(),a=!0),d.restore(),a&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==An,n=e?this._activeObject:void 0,a={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};hr(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",a),this._dragSource&&this._dragSource.fire("dragend",a),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:a}=this.findDragTargets(t),o=this._dragSource,d={e:t,target:n,subTargets:a,dragSource:o,canDrop:!1,dropTarget:void 0};let p;this.fire(e,d),this._fireEnterLeaveEvents(n,d),n&&(n.canDrop(t)&&(p=n),n.fire(e,d));for(let v=0;v<a.length;v++){const b=a[v];b.canDrop(t)&&(p=b),b.fire(e,d)}this._renderDragEffects(t,o,p),this._dropTarget=p}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),a={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",a),this._fireEnterLeaveEvents(e,a)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),a=this._basicEventHandler("drop:before",_t({e:t,target:e,subTargets:n,dragSource:this._dragSource},Wo(this,t)));a.didDrop=!1,a.dropTarget=void 0,this._basicEventHandler("drop",a),this.fire("drop:after",a)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],a=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&e_(t),this._basicEventHandler("contextmenu",a),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||n&&this._target===n)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const a=this.upperCanvasEl,o=this._getEventPrefix(),d=Cr(a);ma(d,"touchend",this._onTouchEnd,Jn),e&&ma(d,"touchmove",this._onMouseMove,Jn),hr(a,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();hr(e,"".concat(n,"move"),this._onMouseMove,Jn);const a=Cr(e);ma(a,"".concat(n,"up"),this._onMouseUp),ma(a,"".concat(n,"move"),this._onMouseMove,Jn)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),n=Cr(this.upperCanvasEl);hr(n,"touchend",this._onTouchEnd,Jn),hr(n,"touchmove",this._onMouseMove,Jn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{ma(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const a=Cr(this.upperCanvasEl);hr(a,"".concat(n,"up"),this._onMouseUp),hr(a,"".concat(n,"move"),this._onMouseMove,Jn),ma(e,"".concat(n,"move"),this._onMouseMove,Jn)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const n=this._currentTransform,a=this._isClick,o=this._target,{button:d}=t;if(d)return(this.fireMiddleClick&&d===1||this.fireRightClick&&d===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let p,v,b=!1;if(n&&(this._finalizeCurrentTransform(t),b=n.actionPerformed),!a){const C=o===this._activeObject;this.handleSelection(t),b||(b=this._shouldRender(o)||!C&&o===this._activeObject)}if(o){const C=o.findControl(this.getViewportPoint(t),Bh(t)),{key:M,control:F}=C||{};if(v=M,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,t),b=!0;else if(F){const E=F.getMouseUpHandler(t,o,F);E&&(p=this.getScenePoint(t),E.call(F,t,n,p.x,p.y))}o.isMoving=!1}if(n&&(n.target!==o||n.corner!==v)){const C=n.target&&n.target.controls[n.corner],M=C&&C.getMouseUpHandler(t,n.target,C);p=p||this.getScenePoint(t),M&&M.call(C,t,n,p.x,p.y)}this._setCursorFromEvent(t,o),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),b?this.requestRenderAll():a||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:a=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<a.length;o++)a[o]!==n&&a[o].fire(t,e);return e}_handleEvent(t,e,n){const a=this._target,o=this.targets||[],d=_t(_t(_t({e:t,target:a,subTargets:o},Wo(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?n:{});this.fire("mouse:".concat(e),d),a&&a.fire("mouse".concat(e),d);for(let p=0;p<o.length;p++)o[p]!==a&&o[p].fire("mouse".concat(e),d)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,n=!!e&&e===this._activeObject;const{button:a}=t;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(t,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let o=this._shouldRender(e),d=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,d=!0,o=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const p=this.getScenePoint(t);this._groupSelector={x:p.x,y:p.y,deltaY:0,deltaX:0}}if(n=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const p=e.findControl(this.getViewportPoint(t),Bh(t));if(e===this._activeObject&&(p||!d)){this._setupCurrentTransform(t,e,n);const v=p?p.control:void 0,b=this.getScenePoint(t),C=v&&v.getMouseDownHandler(t,e,v);C&&C.call(v,t,this._currentTransform,b.x,b.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:n}),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Os(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getScenePoint(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,a=this._hoveredTargets,o=this.targets,d=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let p=0;p<d;p++)o[p]===e||a[p]&&a[p]===n||this.fireSyntheticInOutEvents("mouse",{e:t,target:o[p],oldTarget:a[p]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,a=this._hoveredTargets,o=this.targets,d=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("drag",_t(_t({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let p=0;p<d;p++)this.fireSyntheticInOutEvents("drag",_t(_t({},e),{},{target:o[p],oldTarget:a[p]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:a,fireCanvas:o,e:d}=e,p=_i(e,Ew);const{targetIn:v,targetOut:b,canvasIn:C,canvasOut:M}=Mw[t],F=a!==n;if(a&&F){const E=_t(_t({},p),{},{e:d,target:a,nextTarget:n},Wo(this,d));o&&this.fire(M,E),a.fire(b,E)}if(n&&F){const E=_t(_t({},p),{},{e:d,target:n,previousTarget:a},Wo(this,d));o&&this.fire(C,E),n.fire(v,E)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),n=this._currentTransform,a=n.target,o=a.group?Os(e,void 0,a.group.calcTransformMatrix()):e;n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const{action:a,actionHandler:o,target:d}=e,p=!!o&&o(t,e,n.x,n.y);p&&d.setCoords(),a==="drag"&&p&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||p}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let n=e.hoverCursor||this.hoverCursor;const a=Ka(this._activeObject)?this._activeObject:null,o=(!a||e.group!==a)&&e.findControl(this.getViewportPoint(t));if(o){const d=o.control;this.setCursor(d.cursorStyleHandler(t,d,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(d=>{n=d.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(t,e){const n=this._activeObject,a=Ka(n);if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||a)&&(a||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(a){const o=n.getObjects();if(e===n){const d=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(o,d)||this.searchPossibleTargets(this._objects,d))||!e.selectable)return!1}e.group===n?(n.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),t)):(n.multiSelectAdd(e),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,t)}else{n.isEditing&&n.exitEditing();const o=new(ce.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(n,e),this._hoveredTarget=o,this._setActiveObject(o,t),this._fireSelectionEvents([n],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:a,deltaY:o}=this._groupSelector,d=new Tt(e,n),p=d.add(new Tt(a,o)),v=d.min(p),b=d.max(p).subtract(v),C=this.collectObjects({left:v.x,top:v.y,width:b.x,height:b.y},{includeIntersecting:!this.selectionFullyContained}),M=d.eq(p)?C[0]?[C[0]]:[]:C.length>1?C.filter(F=>!F.onSelect({e:t})).reverse():C;if(M.length===1)this.setActiveObject(M[0],t);else if(M.length>1){const F=ce.getClass("ActiveSelection");this.setActiveObject(new F(M,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const P1={x1:0,y1:0,x2:0,y2:0},Dw=_t(_t({},P1),{},{r1:0,r2:0}),Qo=(l,t)=>isNaN(l)&&typeof t=="number"?t:l;function N1(l){return l&&/%$/.test(l)&&Number.isFinite(parseFloat(l))}function B1(l,t){const e=typeof l=="number"?l:typeof l=="string"?parseFloat(l)/(N1(l)?100:1):NaN;return no(0,Qo(e,t),1)}const jw=/\s*;\s*/,Rw=/\s*:\s*/;function Lw(l,t){let e,n;const a=l.getAttribute("style");if(a){const d=a.split(jw);d[d.length-1]===""&&d.pop();for(let p=d.length;p--;){const[v,b]=d[p].split(Rw).map(C=>C.trim());v==="stop-color"?e=b:v==="stop-opacity"&&(n=b)}}const o=new Je(e||l.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:B1(l.getAttribute("offset"),0),color:o.toRgb(),opacity:Qo(parseFloat(n||l.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function Pw(l,t){const e=[],n=l.getElementsByTagName("stop"),a=B1(t,1);for(let o=n.length;o--;)e.push(Lw(n[o],a));return e}function z1(l){return l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?"linear":"radial"}function F1(l){return l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Sr(l,t){return l.getAttribute(t)}function Nw(l,t){return function(e,n){let a,{width:o,height:d,gradientUnits:p}=n;return Object.entries(e).reduce((v,b)=>{let[C,M]=b;if(M==="Infinity")a=1;else if(M==="-Infinity")a=0;else{const F=typeof M=="string";a=F?parseFloat(M):M,F&&N1(M)&&(a*=.01,p==="pixels"&&(C!=="x1"&&C!=="x2"&&C!=="r2"||(a*=o),C!=="y1"&&C!=="y2"||(a*=d)))}return v[C]=a,v},{})}(z1(l)==="linear"?function(e){return{x1:Sr(e,"x1")||0,y1:Sr(e,"y1")||0,x2:Sr(e,"x2")||"100%",y2:Sr(e,"y2")||0}}(l):function(e){return{x1:Sr(e,"fx")||Sr(e,"cx")||"50%",y1:Sr(e,"fy")||Sr(e,"cy")||"50%",r1:0,x2:Sr(e,"cx")||"50%",y2:Sr(e,"cy")||"50%",r2:Sr(e,"r")||"50%"}}(l),_t(_t({},t),{},{gradientUnits:F1(l)}))}class pr{constructor(t){const{type:e="linear",gradientUnits:n="pixels",coords:a={},colorStops:o=[],offsetX:d=0,offsetY:p=0,gradientTransform:v,id:b}=t||{};Object.assign(this,{type:e,gradientUnits:n,coords:_t(_t({},e==="radial"?Dw:P1),a),colorStops:o,offsetX:d,offsetY:p,gradientTransform:v,id:b?"".concat(b,"_").concat(xa()):xa()})}addColorStop(t){for(const e in t){const n=new Je(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return _t(_t({},lo(this,t)),{},{type:this.type,coords:_t({},this.coords),colorStops:this.colorStops.map(e=>_t({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],a=this.gradientTransform?this.gradientTransform.concat():vn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",d=this.colorStops.map(M=>_t({},M)).sort((M,F)=>M.offset-F.offset);let p=-this.offsetX,v=-this.offsetY;var b;o==="objectBoundingBox"?(p/=t.width,v/=t.height):(p+=t.width/2,v+=t.height/2),(b=t)&&typeof b._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(p-=t.pathOffset.x,v-=t.pathOffset.y),a[4]-=p,a[5]-=v;const C=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(il(a),'"'),""].join(" ");if(this.type==="linear"){const{x1:M,y1:F,x2:E,y2:X}=this.coords;n.push("<linearGradient ",C,' x1="',M,'" y1="',F,'" x2="',E,'" y2="',X,`">
`)}else if(this.type==="radial"){const{x1:M,y1:F,x2:E,y2:X,r1:z,r2:it}=this.coords,$=z>it;n.push("<radialGradient ",C,' cx="',$?M:E,'" cy="',$?F:X,'" r="',$?z:it,'" fx="',$?E:M,'" fy="',$?X:F,`">
`),$&&(d.reverse(),d.forEach(gt=>{gt.offset=1-gt.offset}));const lt=Math.min(z,it);if(lt>0){const gt=lt/Math.max(z,it);d.forEach(kt=>{kt.offset+=gt*(1-kt.offset)})}}return d.forEach(M=>{let{color:F,offset:E,opacity:X}=M;n.push("<stop ",'offset="',100*E+"%",'" style="stop-color:',F,X!==void 0?";stop-opacity: "+X:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const{x1:e,y1:n,x2:a,y2:o,r1:d,r2:p}=this.coords,v=this.type==="linear"?t.createLinearGradient(e,n,a,o):t.createRadialGradient(e,n,d,a,o,p);return this.colorStops.forEach(b=>{let{color:C,opacity:M,offset:F}=b;v.addColorStop(F,M!==void 0?new Je(C).setAlpha(M).toRgba():C)}),v}static async fromObject(t){const{colorStops:e,gradientTransform:n}=t;return new this(_t(_t({},t),{},{colorStops:e?e.map(a=>_t({},a)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(t,e,n){const a=F1(t),o=e._findCenterFromElement();return new this(_t({id:t.getAttribute("id")||void 0,type:z1(t),coords:Nw(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:Pw(t,n.opacity),gradientUnits:a,gradientTransform:Hu(t.getAttribute("gradientTransform")||"")},a==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}vt(pr,"type","Gradient"),ce.setClass(pr,"gradient"),ce.setClass(pr,"linear"),ce.setClass(pr,"radial");const Bw=["type","source","patternTransform"];class Bu{get type(){return"pattern"}set type(t){Es("warn","Setting type has no effect",t)}constructor(t){vt(this,"repeat","repeat"),vt(this,"offsetX",0),vt(this,"offsetY",0),vt(this,"crossOrigin",""),this.id=xa(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return _t(_t({},lo(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:fi(this.offsetX,qe.NUM_FRACTION_DIGITS),offsetY:fi(this.offsetY,qe.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:a,repeat:o,id:d}=this,p=Qo(this.offsetX/e,0),v=Qo(this.offsetY/n,0),b=o==="repeat-y"||o==="no-repeat"?1+Math.abs(p||0):Qo(a.width/e,0),C=o==="repeat-x"||o==="no-repeat"?1+Math.abs(v||0):Qo(a.height/n,0);return['<pattern id="SVGID_'.concat(d,'" x="').concat(p,'" y="').concat(v,'" width="').concat(b,'" height="').concat(C,'">'),'<image x="0" y="0" width="'.concat(a.width,'" height="').concat(a.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:n,source:a,patternTransform:o}=t,d=_i(t,Bw);const p=await Lu(a,_t(_t({},e),{},{crossOrigin:d.crossOrigin}));return new this(_t(_t({},d),{},{patternTransform:o&&o.slice(0),source:p}))}}vt(Bu,"type","Pattern"),ce.setClass(Bu),ce.setClass(Bu,"pattern");class ff{constructor(t){vt(this,"color","rgb(0, 0, 0)"),vt(this,"width",1),vt(this,"shadow",null),vt(this,"strokeLineCap","round"),vt(this,"strokeLineJoin","round"),vt(this,"strokeMiterLimit",10),vt(this,"strokeDashArray",null),vt(this,"limitedToCanvasSize",!1),this.canvas=t}_setBrushStyles(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])}_saveAndTransform(t){const e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}needsFullRender(){return new Je(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const t=this.canvas,e=this.shadow,n=t.contextTop,a=t.getZoom()*t.getRetinaScaling();n.shadowColor=e.color,n.shadowBlur=e.blur*a,n.shadowOffsetX=e.offsetX*a,n.shadowOffsetY=e.offsetY*a}_resetShadow(){const t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}_isOutSideCanvas(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}const zw=["path","left","top"],Fw=["d"];class Hr extends tn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:a,top:o}=e,d=_i(e,zw);super(),Object.assign(this,Hr.ownDefaults),this.setOptions(d),this._setPath(t||[],!0),typeof a=="number"&&this.set(ni,a),typeof o=="number"&&this.set(Vn,o)}_setPath(t,e){this.path=T1(Array.isArray(t)?t:D1(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new Tt(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,n=-this.pathOffset.y;t.beginPath();for(const a of this.path)switch(a[0]){case"L":t.lineTo(a[1]+e,a[2]+n);break;case"M":t.moveTo(a[1]+e,a[2]+n);break;case"C":t.bezierCurveTo(a[1]+e,a[2]+n,a[3]+e,a[4]+n,a[5]+e,a[6]+n);break;case"Q":t.quadraticCurveTo(a[1]+e,a[2]+n,a[3]+e,a[4]+n);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return _t(_t({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=N0(this.path,qe.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=qe.NUM_FRACTION_DIGITS;return" translate(".concat(fi(-this.pathOffset.x,t),", ").concat(fi(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:a}=this._calcDimensions();this.set({width:e,height:n,pathOffset:a}),t&&this.setPositionByOrigin(a,je,je)}_calcBoundsFromPath(){const t=[];let e=0,n=0,a=0,o=0;for(const d of this.path)switch(d[0]){case"L":a=d[1],o=d[2],t.push({x:e,y:n},{x:a,y:o});break;case"M":a=d[1],o=d[2],e=a,n=o;break;case"C":t.push(...qg(a,o,d[1],d[2],d[3],d[4],d[5],d[6])),a=d[5],o=d[6];break;case"Q":t.push(...qg(a,o,d[1],d[2],d[1],d[2],d[3],d[4])),a=d[3],o=d[4];break;case"Z":a=e,o=n}return Wr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return _t(_t({},t),{},{pathOffset:new Tt(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const a=$r(t,this.ATTRIBUTE_NAMES,n),{d:o}=a;return new this(o,_t(_t(_t({},_i(a,Fw)),e),{},{left:void 0,top:void 0}))}}vt(Hr,"type","Path"),vt(Hr,"cacheProperties",[...js,"path","fillRule"]),vt(Hr,"ATTRIBUTE_NAMES",[...Ca,"d"]),ce.setClass(Hr),ce.setSVGClass(Hr);class ro extends ff{constructor(t){super(t),vt(this,"decimate",.4),vt(this,"drawStraightLine",!1),vt(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(t,e,n){const a=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,a.x,a.y),a}onMouseDown(t,e){let{e:n}=e;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(t),this._addPoint(t),this._render())}onMouseMove(t,e){let{e:n}=e;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(t))&&this._addPoint(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const a=this._points,o=a.length,d=this.canvas.contextTop;this._saveAndTransform(d),this.oldEnd&&(d.beginPath(),d.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=ro.drawSegment(d,a[o-2],a[o-1]),d.stroke(),d.restore()}}onMouseUp(t){let{e}=t;return!this.canvas._isMainEvent(e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(t){this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)}_addPoint(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,e=this._points[0],n=this._points[1];if(this._saveAndTransform(t),t.beginPath(),this._points.length===2&&e.x===n.x&&e.y===n.y){const a=this.width/1e3;e.x-=a,n.x+=a}t.moveTo(e.x,e.y);for(let a=1;a<this._points.length;a++)ro.drawSegment(t,e,n),e=this._points[a],n=this._points[a+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}convertPointsToSVGPath(t){const e=this.width/1e3;return j1(t,e)}createPath(t){const e=new Hr(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new Mn(this.shadow)),e}decimatePoints(t,e){if(t.length<=2)return t;let n,a=t[0];const o=this.canvas.getZoom(),d=Math.pow(e/o,2),p=t.length-1,v=[a];for(let b=1;b<p-1;b++)n=Math.pow(a.x-t[b].x,2)+Math.pow(a.y-t[b].y,2),n>=d&&(a=t[b],v.push(a));return v.push(t[p]),v}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const t=this.convertPointsToSVGPath(this._points);if(function(n){return N0(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(t))return void this.canvas.requestRenderAll();const e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}const Iw=["left","top","radius"],I1=["radius","startAngle","endAngle","counterClockwise"];class Fn extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),Fn.ownDefaults)}constructor(t){super(),Object.assign(this,Fn.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Ri(this.startAngle),Ri(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Dn)}getRadiusY(){return this.get("radius")*this.get($n)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...I1,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=Ri(this.startAngle),a=Ri(this.endAngle),o=Er(n)*e,d=Mr(n)*e,p=Er(a)*e,v=Mr(a)*e,b=t>180?1:0,C=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(d," A ").concat(e," ").concat(e," 0 ").concat(b," ").concat(C," ").concat(p," ").concat(v,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const a=$r(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:d=0,radius:p=0}=a;return new this(_t(_t({},_i(a,Iw)),{},{radius:p,left:o-p,top:d-p}))}static fromObject(t){return super._fromObject(t)}}vt(Fn,"type","Circle"),vt(Fn,"cacheProperties",[...js,...I1]),vt(Fn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),vt(Fn,"ATTRIBUTE_NAMES",["cx","cy","r",...Ca]),ce.setClass(Fn),ce.setSVGClass(Fn);class V1 extends ff{constructor(t){super(t),vt(this,"width",10),this.points=[]}drawDot(t){const e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()}dot(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()}onMouseDown(t){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)}_render(){const t=this.canvas.contextTop,e=this.points;this._saveAndTransform(t);for(let n=0;n<e.length;n++)this.dot(t,e[n]);t.restore()}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let a=0;a<this.points.length;a++){const o=this.points[a],d=new Fn({radius:o.radius,left:o.x,top:o.y,originX:je,originY:je,fill:o.fill});this.shadow&&(d.shadow=new Mn(this.shadow)),e.push(d)}const n=new mn(e,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}addPoint(t){let{x:e,y:n}=t;const a={x:e,y:n,radius:Ja(Math.max(0,this.width-20),this.width+20)/2,fill:new Je(this.color).setAlpha(Ja(0,100)/100).toRgba()};return this.points.push(a),a}}class U1 extends ff{constructor(t){super(t),vt(this,"width",10),vt(this,"density",20),vt(this,"dotWidth",1),vt(this,"dotWidthVariance",1),vt(this,"randomOpacity",!1),vt(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(t){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.renderChunck(this.sprayChunk)}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.renderChunck(this.sprayChunk))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let a=0;a<this.sprayChunks.length;a++){const o=this.sprayChunks[a];for(let d=0;d<o.length;d++){const p=o[d],v=new On({width:p.width,height:p.width,left:p.x+1,top:p.y+1,originX:je,originY:je,fill:this.color});e.push(v)}}const n=new mn(this.optimizeOverlapping?function(a){const o={},d=[];for(let p,v=0;v<a.length;v++)p="".concat(a[v].left).concat(a[v].top),o[p]||(o[p]=!0,d.push(a[v]));return d}(e):e,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&n.set("shadow",new Mn(this.shadow)),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}renderChunck(t){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let n=0;n<t.length;n++){const a=t[n];e.globalAlpha=a.opacity,e.fillRect(a.x,a.y,a.width,a.width)}e.restore()}_render(){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let e=0;e<this.sprayChunks.length;e++)this.renderChunck(this.sprayChunks[e]);t.restore()}addSprayChunk(t){this.sprayChunk=[];const e=this.width/2;for(let n=0;n<this.density;n++)this.sprayChunk.push({x:Ja(t.x-e,t.x+e),y:Ja(t.y-e,t.y+e),width:this.dotWidthVariance?Ja(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?Ja(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class H1 extends ro{constructor(t){super(t)}getPatternSrc(){const t=mr(),e=t.getContext("2d");return t.width=t.height=25,e&&(e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill()),t}getPattern(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(t){super._setBrushStyles(t);const e=this.getPattern(t);e&&(t.strokeStyle=e)}createPath(t){const e=super.createPath(t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new Bu({source:this.source||this.getPatternSrc(),offsetX:-n.x,offsetY:-n.y}),e}}const Vw=["x1","y1","x2","y2"],Uw=["x1","y1","x2","y2"],Zg=["x1","x2","y1","y2"];class gr extends tn{constructor(){let[t,e,n,a]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,gr.ownDefaults),this.setOptions(o),this.x1=t,this.x2=n,this.y1=e,this.y2=a,this._setWidthHeight();const{left:d,top:p}=o;typeof d=="number"&&this.set(ni,d),typeof p=="number"&&this.set(Vn,p)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:a}=this;this.width=Math.abs(n-t),this.height=Math.abs(a-e);const{left:o,top:d,width:p,height:v}=Wr([{x:t,y:e},{x:n,y:a}]),b=new Tt(o+p/2,d+v/2);this.setPositionByOrigin(b,je,je)}_set(t,e){return super._set(t,e),Zg.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;var a;dr(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(a=this.stroke)!==null&&a!==void 0?a:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new Tt((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return _t(_t({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:a,width:o,height:d}=this,p=t<=e?-1:1,v=n<=a?-1:1;return{x1:p*o/2,x2:p*-o/2,y1:v*d/2,y2:v*-d/2}}_toSVG(){const{x1:t,x2:e,y1:n,y2:a}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(a,`" />
`)]}static async fromElement(t,e,n){const a=$r(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:d=0,x2:p=0,y2:v=0}=a;return new this([o,d,p,v],_i(a,Vw))}static fromObject(t){let{x1:e,y1:n,x2:a,y2:o}=t,d=_i(t,Uw);return this._fromObject(_t(_t({},d),{},{points:[e,n,a,o]}),{extraParam:"points"})}}vt(gr,"type","Line"),vt(gr,"cacheProperties",[...js,...Zg]),vt(gr,"ATTRIBUTE_NAMES",Ca.concat(Zg)),ce.setClass(gr),ce.setSVGClass(gr);class Xr extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),Xr.ownDefaults)}constructor(t){super(),Object.assign(this,Xr.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}vt(Xr,"type","Triangle"),vt(Xr,"ownDefaults",{width:100,height:100}),ce.setClass(Xr),ce.setSVGClass(Xr);const Y1=["rx","ry"];class wr extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),wr.ownDefaults)}constructor(t){super(),Object.assign(this,wr.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(Dn)}getRy(){return this.get("ry")*this.get($n)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Y1,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,Ms,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const a=$r(t,this.ATTRIBUTE_NAMES,n);return a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,new this(a)}}function X1(l){if(!l)return[];const t=l.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}vt(wr,"type","Ellipse"),vt(wr,"cacheProperties",[...js,...Y1]),vt(wr,"ownDefaults",{rx:0,ry:0}),vt(wr,"ATTRIBUTE_NAMES",[...Ca,"cx","cy","rx","ry"]),ce.setClass(wr),ce.setSVGClass(wr);const Hw=["left","top"],G1={exactBoundingBox:!1};class fr extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),fr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vt(this,"strokeDiff",void 0),Object.assign(this,fr.ownDefaults),this.setOptions(e),this.points=t;const{left:n,top:a}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(ni,n),typeof a=="number"&&this.set(Vn,a)}isOpen(){return!0}_projectStrokeOnPoints(t){return g1(this.points,t,this.isOpen())}_calcDimensions(t){t=_t({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(b=>b.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Tt,strokeOffset:new Tt,strokeDiff:new Tt};const n=Wr(e),a=Qu(_t(_t({},t),{},{scaleX:1,scaleY:1})),o=Wr(this.points.map(b=>pn(b,a,!0))),d=new Tt(this.scaleX,this.scaleY);let p=n.left+n.width/2,v=n.top+n.height/2;return this.exactBoundingBox&&(p-=v*Math.tan(Ri(this.skewX)),v-=p*Math.tan(Ri(this.skewY))),_t(_t({},n),{},{pathOffset:new Tt(p,v),strokeOffset:new Tt(o.left,o.top).subtract(new Tt(n.left,n.top)).multiply(d),strokeDiff:new Tt(n.width,n.height).subtract(new Tt(o.width,o.height)).multiply(d)})}_findCenterFromElement(){const t=Wr(this.points);return new Tt(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:a,height:o,pathOffset:d,strokeOffset:p,strokeDiff:v}=this._calcDimensions();this.set({width:a,height:o,pathOffset:d,strokeOffset:p,strokeDiff:v}),t&&this.setPositionByOrigin(new Tt(e+a/2,n+o/2),je,je)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Tt(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let d;if(Object.keys(t).some(p=>this.strokeUniform||this.constructor.layoutProperties.includes(p))){var e,n;const{width:p,height:v}=this._calcDimensions(t);d=new Tt((e=t.width)!==null&&e!==void 0?e:p,(n=t.height)!==null&&n!==void 0?n:v)}else{var a,o;d=new Tt((a=t.width)!==null&&a!==void 0?a:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return d.multiply(new Tt(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,a=super._set(t,e);return this.exactBoundingBox&&n&&((t===Dn||t===$n)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),a}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return _t(_t({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:n,y:a}=e;return{x:n,y:a}})})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,a=qe.NUM_FRACTION_DIGITS;for(let o=0,d=this.points.length;o<d;o++)t.push(fi(this.points[o].x-e,a),",",fi(this.points[o].y-n,a)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,a=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-a);for(let o=0;o<e;o++){const d=this.points[o];t.lineTo(d.x-n,d.y-a)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){return new this(X1(t.getAttribute("points")),_t(_t({},_i($r(t,this.ATTRIBUTE_NAMES,n),Hw)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}vt(fr,"ownDefaults",G1),vt(fr,"type","Polyline"),vt(fr,"layoutProperties",[ul,cl,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),vt(fr,"cacheProperties",[...js,"points"]),vt(fr,"ATTRIBUTE_NAMES",[...Ca]),ce.setClass(fr),ce.setSVGClass(fr);class _a extends fr{isOpen(){return!1}}vt(_a,"ownDefaults",G1),vt(_a,"type","Polygon"),ce.setClass(_a),ce.setSVGClass(_a);class q1 extends tn{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const n in e)for(const a in e[n])for(const o in e[n][a])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const n=e===void 0?this.styles:{0:this.styles[e]};for(const a in n)for(const o in n[a])if(n[a][o][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n,a,o=0,d=!0,p=0;for(const v in e){n=0;for(const b in e[v]){const C=e[v][b]||{};o++,C[t]!==void 0?(a?C[t]!==a&&(d=!1):a=C[t],C[t]===this[t]&&delete C[t]):d=!1,Object.keys(C).length!==0?n++:delete e[v][b]}n===0&&delete e[v]}for(let v=0;v<this._textLines.length;v++)p+=this._textLines[v].length;d&&o===p&&(this[t]=a,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,a,o;for(a in e){for(o in n=e[a],n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[a]}}_extendStyles(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n);const o=b0(_t(_t({},this._getStyleDeclaration(n,a)),e),d=>d!==void 0);this._setStyleDeclaration(n,a,o)}getSelectionStyles(t,e,n){const a=[];for(let o=t;o<(e||t);o++)a.push(this.getStyleAtPosition(o,n));return a}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,a):this._getStyleDeclaration(n,a)}setSelectionStyles(t,e,n){for(let a=e;a<(n||e);a++)this._extendStyles(a,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const a=this.styles&&this.styles[t];return a&&(n=a[e])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(t,e){return _t(_t({},lo(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}vt(q1,"_styleProperties",xS);const Yw=/  +/g,Xw=/"/g;function Eg(l,t,e,n,a){return"		".concat(function(o,d){let{left:p,top:v,width:b,height:C}=d,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qe.NUM_FRACTION_DIGITS;const F=Uu(Yi,o,!1),[E,X,z,it]=[p,v,b,C].map($=>fi($,M));return"<rect ".concat(F,' x="').concat(E,'" y="').concat(X,'" width="').concat(z,'" height="').concat(it,'"></rect>')}(l,{left:t,top:e,width:n,height:a}),`
`)}const Gw=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Mg;class un extends q1{static getDefaults(){return _t(_t({},super.getDefaults()),un.ownDefaults)}constructor(t,e){super(),vt(this,"__charBounds",[]),Object.assign(this,un.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=P0(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ur)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,a,o,d,p;for(let v=0,b=this._textLines.length;v<b;v++)if((this.textAlign===Ur||v!==b-1&&!this.isEndOfWrapping(v))&&(a=0,o=this._textLines[v],e=this.getLineWidth(v),e<this.width&&(p=this.textLines[v].match(this._reSpacesAndTabs)))){n=p.length,t=(this.width-e)/n;for(let C=0;C<=o.length;C++)d=this.__charBounds[v][C],this._reSpaceAndTab.test(o[C])?(d.width+=t,d.kernedWidth+=t,d.left+=a,a+=t):d.left+=a}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let a;for(a=0;a<n.length;a++){if(t<=n[a].length)return{lineIndex:a,charIndex:t};t-=n[a].length+this.missingNewlineOffset(a,e)}return{lineIndex:a-1,charIndex:n[a-1].length<t?n[a-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===En?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case je:t.textBaseline="middle";break;case"ascender":t.textBaseline=Vn;break;case"descender":t.textBaseline=Ng}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const a=this.getLineWidth(e);a>t&&(t=a)}return t}_renderTextLine(t,e,n,a,o,d){this._renderChars(t,e,n,a,o,d)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let a=this._getTopOffset();for(let o=0,d=this._textLines.length;o<d;o++){const p=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){a+=p;continue}const v=this._textLines[o].length,b=this._getLineLeftOffset(o);let C,M,F=0,E=0,X=this.getValueOfPropertyAt(o,0,"textBackgroundColor");const z=this.getHeightOfLineImpl(o);for(let it=0;it<v;it++){const $=this.__charBounds[o][it];M=this.getValueOfPropertyAt(o,it,"textBackgroundColor"),this.path?(t.save(),t.translate($.renderLeft,$.renderTop),t.rotate($.angle),t.fillStyle=M,M&&t.fillRect(-$.width/2,-z*(1-this._fontSizeFraction),$.width,z),t.restore()):M!==X?(C=n+b+E,this.direction==="rtl"&&(C=this.width-C-F),t.fillStyle=X,X&&t.fillRect(C,a,F,z),E=$.left,F=$.width,X=M):F+=$.kernedWidth}M&&!this.path&&(C=n+b+E,this.direction==="rtl"&&(C=this.width-C-F),t.fillStyle=M,t.fillRect(C,a,F,z)),a+=p}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,a){const o=Jo.getFontCache(e),d=this._getFontDeclaration(e),p=n+t,v=n&&d===this._getFontDeclaration(a),b=e.fontSize/this.CACHE_FONT_SIZE;let C,M,F,E;if(n&&o.has(n)&&(F=o.get(n)),o.has(t)&&(E=C=o.get(t)),v&&o.has(p)&&(M=o.get(p),E=M-F),C===void 0||F===void 0||M===void 0){const X=function(){return Mg||(Mg=Un({width:0,height:0}).getContext("2d")),Mg}();this._setTextStyles(X,e,!0),C===void 0&&(E=C=X.measureText(t).width,o.set(t,C)),F===void 0&&v&&n&&(F=X.measureText(n).width,o.set(n,F)),v&&M===void 0&&(M=X.measureText(p).width,o.set(p,M),E=M-F)}return{width:C*b,kernedWidth:E*b}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,n,a=0;const o=this.pathSide===zi,d=this.path,p=this._textLines[t],v=p.length,b=new Array(v);this.__charBounds[t]=b;for(let C=0;C<v;C++){const M=p[C];n=this._getGraphemeBox(M,t,C,e),b[C]=n,a+=n.kernedWidth,e=M}if(b[v]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},d&&d.segmentsInfo){let C=0;const M=d.segmentsInfo[d.segmentsInfo.length-1].length;switch(this.textAlign){case ni:C=o?M-a:0;break;case je:C=(M-a)/2;break;case zi:C=o?0:M-a}C+=this.pathStartOffset*(o?-1:1);for(let F=o?v-1:0;o?F>=0:F<v;o?F--:F++)n=b[F],C>M?C%=M:C<0&&(C+=M),this._setGraphemeOnPath(C,n),C+=n.kernedWidth}return{width:a,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,a=this.path,o=M1(a.path,n,a.segmentsInfo);e.renderLeft=o.x-a.pathOffset.x,e.renderTop=o.y-a.pathOffset.y,e.angle=o.angle+(this.pathSide===zi?Math.PI:0)}_getGraphemeBox(t,e,n,a,o){const d=this.getCompleteStyleDeclaration(e,n),p=a?this.getCompleteStyleDeclaration(e,n-1):{},v=this._measureChar(t,d,a,p);let b,C=v.kernedWidth,M=v.width;this.charSpacing!==0&&(b=this._getWidthOfCharSpacing(),M+=b,C+=b);const F={width:M,left:0,height:d.fontSize,kernedWidth:C,deltaY:d.deltaY};if(n>0&&!o){const E=this.__charBounds[e][n-1];F.left=E.left+E.width+v.kernedWidth-v.width}return F}getHeightOfLineImpl(t){const e=this.__lineHeights;if(e[t])return e[t];let n=this.getHeightOfChar(t,0);for(let a=1,o=this._textLines[t].length;a<o;a++)n=Math.max(this.getHeightOfChar(t,a),n);return e[t]=n*this._fontSizeMult}getHeightOfLine(t){return this.getHeightOfLineImpl(t)*this.lineHeight}calcTextHeight(){let t=0;for(let e=0,n=this._textLines.length;e<n;e++)t+=e===n-1?this.getHeightOfLineImpl(e):this.getHeightOfLine(e);return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const a=this._getLeftOffset(),o=this._getTopOffset();for(let d=0,p=this._textLines.length;d<p;d++)this._renderTextLine(e,t,this._textLines[d],a+this._getLineLeftOffset(d),o+n+this.getHeightOfLineImpl(d),d),n+=this.getHeightOfLine(d);t.restore()}_renderTextFill(t){(this.fill||this.styleHas(Yi))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,a,o,d){const p=this.textAlign.includes(Ur),v=this.path,b=!p&&this.charSpacing===0&&this.isEmptyStyles(d)&&!v,C=this.direction==="ltr",M=this.direction==="ltr"?1:-1,F=e.direction;let E,X,z,it,$,lt="",gt=0;if(e.save(),F!==this.direction&&(e.canvas.setAttribute("dir",C?"ltr":"rtl"),e.direction=C?"ltr":"rtl",e.textAlign=C?ni:zi),o-=this.getHeightOfLineImpl(d)*this._fontSizeFraction,b)return this._renderChar(t,e,d,0,n.join(""),a,o),void e.restore();for(let kt=0,St=n.length-1;kt<=St;kt++)it=kt===St||this.charSpacing||v,lt+=n[kt],z=this.__charBounds[d][kt],gt===0?(a+=M*(z.kernedWidth-z.width),gt+=z.width):gt+=z.kernedWidth,p&&!it&&this._reSpaceAndTab.test(n[kt])&&(it=!0),it||(E=E||this.getCompleteStyleDeclaration(d,kt),X=this.getCompleteStyleDeclaration(d,kt+1),it=cf(E,X,!1)),it&&(v?(e.save(),e.translate(z.renderLeft,z.renderTop),e.rotate(z.angle),this._renderChar(t,e,d,kt,lt,-gt/2,0),e.restore()):($=a,this._renderChar(t,e,d,kt,lt,$,o)),lt="",E=X,a+=M*gt,gt=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,n=this.height+this.strokeWidth,a=Un({width:e,height:n}),o=a.getContext("2d");return a.width=e,a.height=n,o.beginPath(),o.moveTo(0,0),o.lineTo(e,0),o.lineTo(e,n),o.lineTo(0,n),o.closePath(),o.translate(e/2,n/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(a,"no-repeat")}handleFiller(t,e,n){let a,o;return dr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(a=-this.width/2,o=-this.height/2,t.translate(a,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:a,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:a}=e;return t.lineWidth=a,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,a,o,d,p){const v=this._getStyleDeclaration(n,a),b=this.getCompleteStyleDeclaration(n,a),C=t==="fillText"&&b.fill,M=t==="strokeText"&&b.stroke&&b.strokeWidth;if(M||C){if(e.save(),e.font=this._getFontDeclaration(b),v.textBackgroundColor&&this._removeShadow(e),v.deltaY&&(p+=v.deltaY),C){const F=this._setFillStyles(e,b);e.fillText(o,d-F.offsetX,p-F.offsetY)}if(M){const F=this._setStrokeStyles(e,b);e.strokeText(o,d-F.offsetX,p-F.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const a=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),d=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),p={fontSize:o*n.size,deltaY:d+o*n.baseline};this.setSelectionStyles(p,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,a=this.textAlign,o=this.direction,d=this.isEndOfWrapping(t);let p=0;return a===Ur||a===Nu&&!d||a===Pu&&!d||a===Ih&&!d?0:(a===je&&(p=n/2),a===zi&&(p=n),a===Nu&&(p=n/2),a===Pu&&(p=n),o==="rtl"&&(a===zi||a===Ur||a===Pu?p=0:a===ni||a===Ih?p=-n:a!==je&&a!==Nu||(p=-n/2)),p)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var a;return(a=this._getStyleDeclaration(t,e)[n])!==null&&a!==void 0?a:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const a=this._getLeftOffset(),o=this.path,d=this._getWidthOfCharSpacing(),p=e==="linethrough"?.5:e==="overline"?1:0,v=this.offsets[e];for(let b=0,C=this._textLines.length;b<C;b++){const M=this.getHeightOfLine(b);if(!this[e]&&!this.styleHas(e,b)){n+=M;continue}const F=this._textLines[b],E=M/this.lineHeight,X=this._getLineLeftOffset(b);let z=0,it=0,$=this.getValueOfPropertyAt(b,0,e),lt=this.getValueOfPropertyAt(b,0,Yi),gt=this.getValueOfPropertyAt(b,0,io),kt=$,St=lt,V=gt;const Jt=n+E*(1-this._fontSizeFraction);let Wt=this.getHeightOfChar(b,0),Zt=this.getValueOfPropertyAt(b,0,"deltaY");for(let Yt=0,_e=F.length;Yt<_e;Yt++){const Xt=this.__charBounds[b][Yt];kt=this.getValueOfPropertyAt(b,Yt,e),St=this.getValueOfPropertyAt(b,Yt,Yi),V=this.getValueOfPropertyAt(b,Yt,io);const Re=this.getHeightOfChar(b,Yt),ut=this.getValueOfPropertyAt(b,Yt,"deltaY");if(o&&kt&&St){const Gt=this.fontSize*V/1e3;t.save(),t.fillStyle=lt,t.translate(Xt.renderLeft,Xt.renderTop),t.rotate(Xt.angle),t.fillRect(-Xt.kernedWidth/2,v*Re+ut-p*Gt,Xt.kernedWidth,Gt),t.restore()}else if((kt!==$||St!==lt||Re!==Wt||V!==gt||ut!==Zt)&&it>0){const Gt=this.fontSize*gt/1e3;let re=a+X+z;this.direction==="rtl"&&(re=this.width-re-it),$&&lt&&gt&&(t.fillStyle=lt,t.fillRect(re,Jt+v*Wt+Zt-p*Gt,it,Gt)),z=Xt.left,it=Xt.width,$=kt,gt=V,lt=St,Wt=Re,Zt=ut}else it+=Xt.kernedWidth}let he=a+X+z;this.direction==="rtl"&&(he=this.width-he-it),t.fillStyle=St;const Pt=this.fontSize*V/1e3;kt&&St&&V&&t.fillRect(he,Jt+v*Wt+Zt-p*Pt,it-d,Pt),n+=M}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:a=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const d=t.includes("'")||t.includes('"')||t.includes(",")||un.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:a,"px"),d].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return uf(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),a=[`
`];let o=[];for(let d=0;d<e.length;d++)n[d]=this.graphemeSplit(e[d]),o=o.concat(n[d],a);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return _t(_t({},super.toObject([...Xy,...t])),{},{styles:m1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let a=!1,o=!1;if(typeof t=="object")for(const d in t)d==="path"&&this.setPathInfo(),a=a||n.includes(d),o=o||d==="path";else a=n.includes(t),o=t==="path";return o&&this.setPathInfo(),a&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const a=$r(t,un.ATTRIBUTE_NAMES,n),o=_t(_t({},e),a),{textAnchor:d=ni,textDecoration:p="",dx:v=0,dy:b=0,top:C=0,left:M=0,fontSize:F=h0,strokeWidth:E=1}=o,X=_i(o,Gw),z=new this(Fh(t.textContent||"").trim(),_t({left:M+v,top:C+b,underline:p.includes("underline"),overline:p.includes("overline"),linethrough:p.includes("line-through"),strokeWidth:0,fontSize:F},X)),it=z.getScaledHeight()/z.height,$=((z.height+z.strokeWidth)*z.lineHeight-z.height)*it,lt=z.getScaledHeight()+$;let gt=0;return d===je&&(gt=z.getScaledWidth()/2),d===zi&&(gt=z.getScaledWidth()),z.set({left:z.left-gt,top:z.top-(lt-z.fontSize*(.07+z._fontSizeFraction))/z.lineHeight,strokeWidth:E}),z}static fromObject(t){return this._fromObject(_t(_t({},t),{},{styles:v1(t.styles||{},t.text)}),{extraParam:"text"})}}vt(un,"textLayoutProperties",Yy),vt(un,"cacheProperties",[...js,...Xy]),vt(un,"ownDefaults",SS),vt(un,"type","Text"),vt(un,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),vt(un,"ATTRIBUTE_NAMES",Ca.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),h1(un,[class extends Vy{_toSVG(){const l=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(l){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:l,withShadow:!0,additionalTransform:il(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(l){let{textBgRects:t,textSpans:e}=l;const n=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(Xw,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(l,t){const e=[],n=[];let a,o=l;this.backgroundColor&&n.push(...Eg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let d=0,p=this._textLines.length;d<p;d++)a=this._getLineLeftOffset(d),this.direction==="rtl"&&(a+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(n,d,t+a,o),this._setSVGTextLineText(e,d,t+a,o),o+=this.getHeightOfLine(d);return{textSpans:e,textBgRects:n}}_createTextCharSpan(l,t,e,n,a){const o=qe.NUM_FRACTION_DIGITS,d=this.getSvgSpanStyles(t,l!==l.trim()||!!l.match(Yw)),p=d?'style="'.concat(d,'"'):"",v=t.deltaY,b=v?' dy="'.concat(fi(v,o),'" '):"",{angle:C,renderLeft:M,renderTop:F,width:E}=a;let X="";if(M!==void 0){const z=E/2;C&&(X=' rotate="'.concat(fi(Kr(C),o),'"'));const it=oo({angle:Kr(C)});it[4]=M,it[5]=F;const $=new Tt(-z,0).transform(it);e=$.x,n=$.y}return'<tspan x="'.concat(fi(e,o),'" y="').concat(fi(n,o),'" ').concat(b).concat(X).concat(p,">").concat(p1(l),"</tspan>")}_setSVGTextLineText(l,t,e,n){const a=this.getHeightOfLine(t),o=this.textAlign.includes(Ur),d=this._textLines[t];let p,v,b,C,M,F="",E=0;n+=a*(1-this._fontSizeFraction)/this.lineHeight;for(let X=0,z=d.length-1;X<=z;X++)M=X===z||this.charSpacing||this.path,F+=d[X],b=this.__charBounds[t][X],E===0?(e+=b.kernedWidth-b.width,E+=b.width):E+=b.kernedWidth,o&&!M&&this._reSpaceAndTab.test(d[X])&&(M=!0),M||(p=p||this.getCompleteStyleDeclaration(t,X),v=this.getCompleteStyleDeclaration(t,X+1),M=cf(p,v,!0)),M&&(C=this._getStyleDeclaration(t,X),l.push(this._createTextCharSpan(F,C,e,n,b)),F="",p=v,this.direction==="rtl"?e-=E:e+=E,E=0)}_setSVGTextLineBg(l,t,e,n){const a=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight;let d,p=0,v=0,b=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let C=0;C<a.length;C++){const{left:M,width:F,kernedWidth:E}=this.__charBounds[t][C];d=this.getValueOfPropertyAt(t,C,"textBackgroundColor"),d!==b?(b&&l.push(...Eg(b,e+v,n,p,o)),v=M,p=F,b=d):p+=E}d&&l.push(...Eg(b,e+v,n,p,o))}_getSVGLineTopOffset(l){let t,e=0;for(t=0;t<l;t++)e+=this.getHeightOfLine(t);const n=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(l){return"".concat(super.getSvgStyles(l)," text-decoration-thickness: ").concat(fi(this.textDecorationThickness*this.getObjectScaling().y/10,qe.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(l,t){const{fontFamily:e,strokeWidth:n,stroke:a,fill:o,fontSize:d,fontStyle:p,fontWeight:v,deltaY:b,textDecorationThickness:C,linethrough:M,overline:F,underline:E}=l,X=this.getSvgTextDecoration({underline:E??this.underline,overline:F??this.overline,linethrough:M??this.linethrough}),z=C||this.textDecorationThickness;return[a?Uu(En,a):"",n?"stroke-width: ".concat(n,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",d?"font-size: ".concat(d,"px; "):"",p?"font-style: ".concat(p,"; "):"",v?"font-weight: ".concat(v,"; "):"",X?"text-decoration: ".concat(X,"; text-decoration-thickness: ").concat(fi(z*this.getObjectScaling().y/10,qe.NUM_FRACTION_DIGITS),"%; "):"",o?Uu(Yi,o):"",b?"baseline-shift: ".concat(-b,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(l){return["overline","underline","line-through"].filter(t=>l[t.replace("-","")]).join(" ")}}]),ce.setClass(un),ce.setSVGClass(un);class qw{constructor(t){vt(this,"target",void 0),vt(this,"__mouseDownInPlace",!1),vt(this,"__dragStartFired",!1),vt(this,"__isDraggingOver",!1),vt(this,"__dragStartSelection",void 0),vt(this,"__dragImageDisposer",void 0),vt(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:a,selectionEnd:o}=e;const d=this.target,p=d.canvas,v=new Tt(d.flipX?-1:1,d.flipY?-1:1),b=d._getCursorBoundaries(a),C=new Tt(b.left+b.leftOffset,b.top+b.topOffset).multiply(v).transform(d.calcTransformMatrix()),M=p.getScenePoint(t).subtract(C),F=d.getCanvasRetinaScaling(),E=d.getBoundingRect(),X=C.subtract(new Tt(E.left,E.top)),z=p.viewportTransform,it=X.add(M).transform(z,!0),$=d.backgroundColor,lt=j0(d.styles);d.backgroundColor="";const gt={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};d.setSelectionStyles(gt,0,a),d.setSelectionStyles(gt,o,d.text.length),d.dirty=!0;const kt=d.toCanvasElement({enableRetinaScaling:p.enableRetinaScaling,viewportTransform:!0});d.backgroundColor=$,d.styles=lt,d.dirty=!0,Wh(kt,{position:"fixed",left:"".concat(-kt.width,"px"),border:An,width:"".concat(kt.width/F,"px"),height:"".concat(kt.height/F,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{kt.remove()},Cr(t.target||this.target.hiddenTextarea).body.appendChild(kt),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(kt,it.x,it.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const a=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(a.selectionStart,a.selectionEnd).join(""),d=_t({text:e.text,value:o},a);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(a.selectionStart,a.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,d)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,a=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!a){const d=this.target,p=d.canvas;let v=d.getSelectionStartFromPointer(n);const{styles:b}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},C=o[Math.max(0,o.length-1)],M=0;if(this.__dragStartSelection){const F=this.__dragStartSelection.selectionStart,E=this.__dragStartSelection.selectionEnd;v>F&&v<=E?v=F:v>E&&(v-=E-F),d.removeChars(F,E),delete this.__dragStartSelection}d._reNewline.test(C)&&(d._reNewline.test(d._text[v])||v===d._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=d,d.insertChars(o,b,v),p.setActiveObject(d),d.enterEditing(n),d.selectionStart=Math.min(v+M,d._text.length),d.selectionEnd=Math.min(d.selectionStart+o.length,d._text.length),d.hiddenTextarea.value=d.text,d._updateTextarea(),d.hiddenTextarea.focus(),d.fire(Ph,{index:v+M,action:"drop"}),p.fire("text:changed",{target:d}),p.contextTopDirty=!0,p.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const a=this.target,o=this.target.canvas,{selectionStart:d,selectionEnd:p}=this.__dragStartSelection,v=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||An;v===An?(a.selectionStart=d,a.selectionEnd=p,a._updateTextarea(),a.hiddenTextarea.focus()):(a.clearContextTop(),v==="move"&&(a.removeChars(d,p),a.selectionStart=a.selectionEnd=d,a.hiddenTextarea&&(a.hiddenTextarea.value=a.text),a._updateTextarea(),a.fire(Ph,{index:d,action:"dragend"}),o.fire("text:changed",{target:a}),o.requestRenderAll()),a.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const A_=/[ \n\.,;!\?\-]/;class Ww extends un{constructor(){super(...arguments),vt(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:a,onComplete:o}=t;return E0({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:a,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:d=>{this._currentCursorOpacity=d,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let a=t>0&&this._reSpace.test(n[t])&&(e===-1||!f0.test(n[t-1]))?t-1:t,o=n[a];for(;a>0&&a<n.length&&!A_.test(o);)a+=e,o=n[a];return e===-1&&A_.test(o)&&a++,a}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.searchWordBoundary(t,-1),a=Math.max(n,this.searchWordBoundary(t,1));this.selectionStart=n,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.findLineBoundaryLeft(t),a=this.findLineBoundaryRight(t);this.selectionStart=n,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Cr(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),a=this.selectionStart,o=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&a!==o||a!==n&&o!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===a&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const a=n.slice(0,t),o=this.graphemeSplit(a).length;if(t===e)return{selectionStart:o,selectionEnd:o};const d=n.slice(t,e);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(d).length}}fromGraphemeToStringSelection(t,e,n){const a=n.slice(0,t).join("").length;return t===e?{selectionStart:a,selectionEnd:a}:{selectionStart:a,selectionEnd:a+n.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),a=n.lineIndex,o=n.charIndex,d=this.getValueOfPropertyAt(a,o,"fontSize")*this.lineHeight,p=e.leftOffset,v=this.getCanvasRetinaScaling(),b=this.canvas.upperCanvasEl,C=b.width/v,M=b.height/v,F=C-d,E=M-d,X=new Tt(e.left+p,e.top+e.topOffset+d).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Tt(b.clientWidth/C,b.clientHeight/M));return X.x<0&&(X.x=0),X.x>F&&(X.x=F),X.y<0&&(X.y=0),X.y>E&&(X.y=E),X.x+=this.canvas._offset.left,X.y+=this.canvas._offset.top,{left:"".concat(X.x,"px"),top:"".concat(X.y,"px"),fontSize:"".concat(d,"px"),charHeight:d}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(Nh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:d}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let p=a;p<this._unwrappedTextLines[n].length;p++)delete this.styles[n][p];if(this.styles[o])for(let p=d;p<this._unwrappedTextLines[o].length;p++){const v=this.styles[o][p];v&&(this.styles[n]||(this.styles[n]={}),this.styles[n][a+p-d]=v)}for(let p=n+1;p<=o;p++)delete this.styles[p];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const p=this.styles[n],v=d-a;for(let b=a;b<d;b++)delete p[b];for(const b in this.styles[n]){const C=parseInt(b,10);C>=d&&(p[C-v]=p[b],delete p[b])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const a in this.styles){const o=parseInt(a,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,a){const o={},d=this._unwrappedTextLines[t].length,p=d===e;let v=!1;n||(n=1),this.shiftLineStyles(t,n);const b=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const M in this.styles[t]){const F=parseInt(M,10);F>=e&&(v=!0,o[F-e]=this.styles[t][M],p&&e===0||delete this.styles[t][M])}let C=!1;for(v&&!p&&(this.styles[t+n]=o,C=!0),(C||d>e)&&n--;n>0;)a&&a[n-1]?this.styles[t+n]={0:_t({},a[n-1])}:b?this.styles[t+n]={0:_t({},b)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,a){this.styles||(this.styles={});const o=this.styles[t],d=o?_t({},o):{};n||(n=1);for(const v in d){const b=parseInt(v,10);b>=e&&(o[b+n]=d[b],d[b-n]||delete o[b])}if(this._forceClearCache=!0,a){for(;n--;)Object.keys(a[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=_t({},a[n]));return}if(!o)return;const p=o[e?e-1:1];for(;p&&n--;)this.styles[t][e+n]=_t({},p)}insertNewStyleBlock(t,e,n){const a=this.get2DCursorLocation(e,!0),o=[0];let d,p=0;for(let v=0;v<t.length;v++)t[v]===`
`?(p++,o[p]=0):o[p]++;for(o[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),p&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+o[0],p),d=1;d<p;d++)o[d]>0?this.insertCharStyleObject(a.lineIndex+d,0,o[d],n):n&&this.styles[a.lineIndex+d]&&n[0]&&(this.styles[a.lineIndex+d][0]=n[0]),n=n&&n.slice(o[d]+1);o[d]>0&&this.insertCharStyleObject(a.lineIndex+d,0,o[d],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;a>n&&this.removeStyleFromTo(n,a);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(a)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=ni:this._selectionDirection===zi&&(this._selectionDirection=ni,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===zi?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=zi:this._selectionDirection===ni&&(this._selectionDirection=zi,this.selectionStart=e),this.selectionEnd=n)}}class Zw extends Ww{initHiddenTextarea(){const t=this.canvas&&Cr(this.canvas.getElement())||ao(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(d=>{let[p,v]=d;return e.setAttribute(p,v)});const{top:n,left:a,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(a,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(d=>{let[p,v]=d;return e.addEventListener(p,this[v].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:n,selectionStart:a,selectionEnd:o}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const d=()=>{this.updateFromTextArea(),this.fire(Ph),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void d();const p=this._splitTextIntoLines(n).graphemeText,v=this._text.length,b=p.length,C=this.selectionStart,M=this.selectionEnd,F=C!==M;let E,X,z,it,$=b-v;const lt=this.fromStringToGraphemeSelection(a,o,n),gt=C>lt.selectionStart;F?(X=this._text.slice(C,M),$+=M-C):b<v&&(X=gt?this._text.slice(M+$,M):this._text.slice(C,C-$));const kt=p.slice(lt.selectionEnd-$,lt.selectionEnd);if(X&&X.length&&(kt.length&&(E=this.getSelectionStyles(C,C+1,!1),E=kt.map(()=>E[0])),F?(z=C,it=M):gt?(z=M-X.length,it=M):(z=M,it=M+X.length),this.removeStyleFromTo(z,it)),kt.length){const{copyPasteData:St}=Ar();e&&kt.join("")===St.copiedText&&!qe.disableStyleCopyPaste&&(E=St.copiedTextStyle),this.insertNewStyleBlock(kt,C,E)}d()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:a}=e;this.compositionStart=n,this.compositionEnd=a,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Ar();t.copiedText=this.getSelectedText(),qe.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n,a=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],a+=n.left+n.width),a}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),a=this.get2DCursorLocation(n),o=a.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const d=a.charIndex,p=this._getWidthBeforeCursor(o,d),v=this._getIndexOnLine(o+1,p);return this._textLines[o].slice(d).length+v+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),a=this.get2DCursorLocation(n),o=a.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const d=a.charIndex,p=this._getWidthBeforeCursor(o,d),v=this._getIndexOnLine(o-1,p),b=this._textLines[o].slice(0,d),C=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+v-b.length+(1-C)}_getIndexOnLine(t,e){const n=this._textLines[t];let a,o,d=this._getLineLeftOffset(t),p=0;for(let v=0,b=n.length;v<b;v++)if(a=this.__charBounds[t][v].width,d+=a,d>e){o=!0;const C=d-a,M=d,F=Math.abs(C-e);p=Math.abs(M-e)<F?v:v-1;break}return o||(p=n.length-1),p}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===zi);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const a=this.text.length;this.selectionStart=no(0,this.selectionStart,a),this.selectionEnd=no(0,this.selectionEnd,a),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===ni?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let a;if(t.altKey)a=this["findWordBoundary".concat(n)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=n==="Left"?-1:1,!0;a=this["findLineBoundary".concat(n)](this[e])}return a!==void 0&&this[e]!==a&&(this[e]=a,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=ni,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===zi&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ni,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===ni&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=zi,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=zi,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const E_=l=>!!l.button;class Kw extends Zw{constructor(){super(...arguments),vt(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new qw(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:n}=t;this.canvas&&this.editable&&!E_(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(t){let{e,transform:n}=t;const a=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||E_(e)||a||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,a=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,a,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(In(this.calcTransformMatrix())).add(new Tt(-this._getLeftOffset(),-this._getTopOffset()));let n=0,a=0,o=0;for(let b=0;b<this._textLines.length&&n<=e.y;b++)n+=this.getHeightOfLine(b),o=b,b>0&&(a+=this._textLines[b-1].length+this.missingNewlineOffset(b-1));let d=Math.abs(this._getLineLeftOffset(o));const p=this._textLines[o].length,v=this.__charBounds[o];for(let b=0;b<p;b++){const C=d+v[b].kernedWidth;if(e.x<=C){Math.abs(e.x-C)<=Math.abs(e.x-d)&&a++;break}d=C,a++}return Math.min(this.flipX?p-a:a,this._text.length)}}const ph="moveCursorUp",mh="moveCursorDown",vh="moveCursorLeft",_h="moveCursorRight",yh="exitEditing",M_=(l,t)=>{const e=t.getRetinaScaling();l.setTransform(e,0,0,e,0,0);const n=t.viewportTransform;l.transform(n[0],n[1],n[2],n[3],n[4],n[5])},Qw=_t({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:yh,27:yh,33:ph,34:mh,35:_h,36:vh,37:vh,38:ph,39:_h,40:mh},keysMapRtl:{9:yh,27:yh,33:ph,34:mh,35:vh,36:_h,37:_h,38:ph,39:vh,40:mh},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Gr extends Kw{static getDefaults(){return _t(_t({},super.getDefaults()),Gr.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,_t(_t({},Gr.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Yu&&this.canvas.textEditingManager.remove(this),e instanceof Yu&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),a=n.length>0;let o,d=t;if(a){o=Un(t.canvas),d=o.getContext("2d"),M_(d,this.canvas);const p=this.calcTransformMatrix();d.transform(p[0],p[1],p[2],p[3],p[4],p[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(d,e):this.renderCursor(d,e),a)for(const p of n){const v=p.clipPath,b=Un(t.canvas),C=b.getContext("2d");if(M_(C,this.canvas),!v.absolutePositioned){const M=p.calcTransformMatrix();C.transform(M[0],M[1],M[2],M[3],M[4],M[5])}v.transform(C),v.drawObject(C,!0,{}),this.drawClipPathOnCache(d,v,b)}a&&(t.setTransform(1,0,0,1,0,0),t.drawImage(o,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),a=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:a,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:a,lineIndex:o}=this.get2DCursorLocation(t);for(let b=0;b<o;b++)e+=this.getHeightOfLine(b);const d=this._getLineLeftOffset(o),p=this.__charBounds[o][a];p&&(n=p.left),this.charSpacing!==0&&a===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const v={top:e,left:d+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===zi||this.textAlign===Ur||this.textAlign===Pu?v.left*=-1:this.textAlign===ni||this.textAlign===Ih?v.left=d-(n>0?n:0):this.textAlign!==je&&this.textAlign!==Nu||(v.left=d-(n>0?n:0))),v}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const n=this.get2DCursorLocation(t),a=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,d=this.getValueOfPropertyAt(a,o,"fontSize"),p=this.getObjectScaling().x*this.canvas.getZoom(),v=this.cursorWidth/p,b=this.getValueOfPropertyAt(a,o,"deltaY"),C=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-d*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(a,o,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-v/2,top:C+e.top+b,width:v,height:d}}_renderCursor(t,e,n){const{color:a,opacity:o,left:d,top:p,width:v,height:b}=this.getCursorRenderingData(n,e);t.fillStyle=a,t.globalAlpha=o,t.fillRect(d,p,v,b)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const a=e.selectionStart,o=e.selectionEnd,d=this.textAlign.includes(Ur),p=this.get2DCursorLocation(a),v=this.get2DCursorLocation(o),b=p.lineIndex,C=v.lineIndex,M=p.charIndex<0?0:p.charIndex,F=v.charIndex<0?0:v.charIndex;for(let E=b;E<=C;E++){const X=this._getLineLeftOffset(E)||0;let z=this.getHeightOfLine(E),it=0,$=0,lt=0;if(E===b&&($=this.__charBounds[b][M].left),E>=b&&E<C)lt=d&&!this.isEndOfWrapping(E)?this.width:this.getLineWidth(E)||5;else if(E===C)if(F===0)lt=this.__charBounds[C][F].left;else{const Jt=this._getWidthOfCharSpacing();lt=this.__charBounds[C][F-1].left+this.__charBounds[C][F-1].width-Jt}it=z,(this.lineHeight<1||E===C&&this.lineHeight>1)&&(z/=this.lineHeight);let gt=n.left+X+$,kt=z,St=0;const V=lt-$;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",kt=1,St=z):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===zi||this.textAlign===Ur||this.textAlign===Pu?gt=this.width-gt-V:this.textAlign===ni||this.textAlign===Ih?gt=n.left+X-lt:this.textAlign!==je&&this.textAlign!==Nu||(gt=n.left+X-lt)),t.fillRect(gt,n.top+n.topOffset+St,V,kt),n.topOffset+=it}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,Yi)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}vt(Gr,"ownDefaults",Qw),vt(Gr,"type","IText"),ce.setClass(Gr),ce.setClass(Gr,"i-text");class qr extends Gr{static getDefaults(){return _t(_t({},super.getDefaults()),qr.ownDefaults)}constructor(t,e){super(t,_t(_t({},qr.ownDefaults),e))}static createControls(){return{controls:c1()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ur)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,a=0;const o={};for(let d=0;d<t.graphemeLines.length;d++)t.graphemeText[a]===`
`&&d>0?(n=0,a++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[a])&&d>0&&(n++,a++),o[d]={line:e,offset:n},a+=t.graphemeLines[d].length,n+=t.graphemeLines[d].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,n=0,a=t+1,o=!1;const d=this._styleMap[t],p=this._styleMap[t+1];d&&(t=d.line,n=d.offset),p&&(a=p.line,o=a===t,e=p.offset);const v=t===void 0?this.styles:{line:this.styles[t]};for(const b in v)for(const C in v[b]){const M=parseInt(C,10);if(M>=n&&(!o||M<e))for(const F in v[b][C])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const a=this._styleMap[t];super._setStyleDeclaration(a.line,a.offset+e,n)}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];super._deleteStyleDeclaration(n.line,n.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),a=[];for(let o=0;o<n.wordsData.length;o++)a.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,a}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let a=0;return{wordsData:t.map((o,d)=>{let p=0;const v=e?this.graphemeSplit(o):this.wordSplit(o);return v.length===0?[{word:[],width:0}]:v.map(b=>{const C=e?[b]:this.graphemeSplit(b),M=this._measureWord(C,d,p);return a=Math.max(M,a),p+=C.length+n.length,{word:C,width:M}})}),largestWordWidth:a}}_measureWord(t,e){let n,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let d=0,p=t.length;d<p;d++)o+=this._getGraphemeBox(t[d],e,d+a,n,!0).kernedWidth,n=t[d];return o}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:a,wordsData:o}=n,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const p=this._getWidthOfCharSpacing(),v=this.splitByGrapheme,b=[],C=v?"":" ";let M=0,F=[],E=0,X=0,z=!0;e-=d;const it=Math.max(e,a,this.dynamicMinWidth),$=o[t];let lt;for(E=0,lt=0;lt<$.length;lt++){const{word:gt,width:kt}=$[lt];E+=gt.length,M+=X+kt-p,M>it&&!z?(b.push(F),F=[],M=kt,z=!0):M+=p,z||v||F.push(C),F=F.concat(gt),X=v?0:this._measureWord([C],t,E),E++,z=!1}return lt&&b.push(F),a+d>this.dynamicMinWidth&&(this.dynamicMinWidth=a-p+d),b}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),a=new Array(n.length);for(let o=0;o<n.length;o++)a[o]=n[o].join("");return e.lines=a,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const a=this._styleMap[e].line;t.set("".concat(a),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}vt(qr,"type","Textbox"),vt(qr,"textLayoutProperties",[...Gr.textLayoutProperties,"width"]),vt(qr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ce.setClass(qr);class Kg extends tc{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:n}=t,{clipPath:a,group:o}=n;if(!a||!this.shouldPerformLayout(t))return;const{width:d,height:p}=Wr(x1(n,a)),v=new Tt(d,p);if(a.absolutePositioned)return{center:Os(a.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:v};{const b=a.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:C=new Tt,correction:M=new Tt}=this.calcBoundingBox(e,t)||{};return{center:C.add(b),correction:M.subtract(b),size:v}}return{center:n.getRelativeCenterPoint().add(b),size:v}}}}vt(Kg,"type","clip-path"),ce.setClass(Kg);class Qg extends tc{getInitialSize(t,e){let{target:n}=t,{size:a}=e;return new Tt(n.width||a.x,n.height||a.y)}}vt(Qg,"type","fixed"),ce.setClass(Qg);class Jw extends sl{subscribeTargets(t){const e=t.target;t.targets.reduce((n,a)=>(a.parent&&n.add(a.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[e]})})}unsubscribeTargets(t){const e=t.target,n=e.getObjects();t.targets.reduce((a,o)=>(o.parent&&a.add(o.parent),a),new Set).forEach(a=>{!n.some(o=>o.parent===a)&&a.layoutManager.unsubscribeTargets({target:a,targets:[e]})})}}class ya extends mn{static getDefaults(){return _t(_t({},super.getDefaults()),ya.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ya.ownDefaults),this.setOptions(e);const{left:n,top:a,layoutManager:o}=e;this.groupInit(t,{left:n,top:a,layoutManager:o??new Jw})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(a=>{const o=this._objects.findIndex(p=>p.isInFrontOf(a)),d=o===-1?this.size():o;this.insertAt(d,a)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(Es("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=new Set;e.forEach(a=>{const{parent:o}=a;o&&n.add(o)}),t===L0?n.forEach(a=>{a._onAfterObjectsChange(Yh,e)}):n.forEach(a=>{a._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const a=_t(_t({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,a);super._renderControls(t,e),t.restore()}}vt(ya,"type","ActiveSelection"),vt(ya,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ce.setClass(ya),ce.setClass(ya,"activeSelection");class W1{constructor(){vt(this,"resources",{})}applyFilters(t,e,n,a,o){const d=o.getContext("2d");if(!d)return;d.drawImage(e,0,0,n,a);const p={sourceWidth:n,sourceHeight:a,imageData:d.getImageData(0,0,n,a),originalEl:e,originalImageData:d.getImageData(0,0,n,a),canvasEl:o,ctx:d,filterBackend:this};t.forEach(b=>{b.applyTo(p)});const{imageData:v}=p;return v.width===n&&v.height===a||(o.width=v.width,o.height=v.height),d.putImageData(v,0,0),p}}class Xu{constructor(){let{tileSize:t=qe.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),vt(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const n=Un({width:t,height:e}),a=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)}applyFilters(t,e,n,a,o,d){const p=this.gl,v=o.getContext("2d");if(!p||!v)return;let b;d&&(b=this.getCachedTexture(d,e));const C={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:n,sourceHeight:a,destinationWidth:n,destinationHeight:a,context:p,sourceTexture:this.createTexture(p,n,a,b?void 0:e),targetTexture:this.createTexture(p,n,a),originalTexture:b||this.createTexture(p,n,a,b?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},M=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,M),t.forEach(F=>{F&&F.applyTo(C)}),function(F){const E=F.targetCanvas,X=E.width,z=E.height,it=F.destinationWidth,$=F.destinationHeight;X===it&&z===$||(E.width=it,E.height=$)}(C),this.copyGLTo2D(p,C),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(C.sourceTexture),p.deleteTexture(C.targetTexture),p.deleteFramebuffer(M),v.setTransform(1,0,0,1,0,0),C}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,a,o){const{NEAREST:d,TEXTURE_2D:p,RGBA:v,UNSIGNED_BYTE:b,CLAMP_TO_EDGE:C,TEXTURE_MAG_FILTER:M,TEXTURE_MIN_FILTER:F,TEXTURE_WRAP_S:E,TEXTURE_WRAP_T:X}=t,z=t.createTexture();return t.bindTexture(p,z),t.texParameteri(p,M,o||d),t.texParameteri(p,F,o||d),t.texParameteri(p,E,C),t.texParameteri(p,X,C),a?t.texImage2D(p,0,v,v,b,a):t.texImage2D(p,0,v,e,n,0,v,b,null),z}getCachedTexture(t,e,n){const{textureCache:a}=this;if(a[t])return a[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(a[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,a=e.targetCanvas,o=a.getContext("2d");if(!o)return;o.translate(0,a.height),o.scale(1,-1);const d=n.height-a.height;o.drawImage(n,0,d,a.width,a.height,0,0,a.width,a.height)}copyGLTo2DPutImageData(t,e){const n=e.targetCanvas.getContext("2d"),a=e.destinationWidth,o=e.destinationHeight,d=a*o*4;if(!n)return;const p=new Uint8Array(this.imageBuffer,0,d),v=new Uint8ClampedArray(this.imageBuffer,0,d);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,p);const b=new ImageData(v,a,o);n.putImageData(b,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const a=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);a&&(e.renderer=a.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}let Eh;function Z1(){const{WebGLProbe:l}=Ar();return l.queryWebGL(mr()),qe.enableGLFiltering&&l.isSupported(qe.textureSize)?new Xu({tileSize:qe.textureSize}):new W1}function Mh(){return!Eh&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Eh=Z1()),Eh}function $w(l){Eh=l}const tC=["filters","resizeFilter","src","crossOrigin","type"],K1=["cropX","cropY"];class Tn extends tn{static getDefaults(){return _t(_t({},super.getDefaults()),Tn.ownDefaults)}constructor(t,e){super(),vt(this,"_lastScaleX",1),vt(this,"_lastScaleY",1),vt(this,"_filterScalingX",1),vt(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Tn.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(xa()),this.setElement(typeof t=="string"?(this.canvas&&Cr(this.canvas.getElement())||ao()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(n),(e=t.classList)===null||e===void 0||e.add(Tn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Mh(!1);e instanceof Xu&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Ar().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(n=>{n&&e.push(n.toObject())}),_t(_t({},super.toObject([...K1,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,a=-this.height/2;let o=[],d=[],p="",v="";if(!e)return[];if(this.hasCrop()){const b=xa();o.push('<clipPath id="imageCrop_'+b+`">
`,'	<rect x="'+n+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+b+')" '}if(this.imageSmoothing||(v=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(a-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(v).concat(p,`></image>
`)),this.stroke||this.strokeDashArray){const b=this.fill;this.fill=null,d=['	<rect x="'.concat(n,'" y="').concat(a,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=b}return o=this.paintFirst!==Yi?o.concat(d,t):o.concat(t,d),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lu(t,{crossOrigin:e,signal:n}).then(a=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(a)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),a=n.x,o=n.y,d=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||a>e&&o>e)return this._element=d,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,void(this._lastScaleY=o);const p=Un(d),{width:v,height:b}=d;this._element=p,this._lastScaleX=t.scaleX=a,this._lastScaleY=t.scaleY=o,Mh().applyFilters([t],d,v,b,this._element),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,n=e.naturalWidth||e.width,a=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=Un({width:n,height:a});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,a),this._lastScaleX=1,this._lastScaleY=1);Mh().applyFilters(t,this._originalElement,n,a,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,a=this._filterScalingY,o=this.width,d=this.height,p=Math.max(this.cropX,0),v=Math.max(this.cropY,0),b=e.naturalWidth||e.width,C=e.naturalHeight||e.height,M=p*n,F=v*a,E=Math.min(o*n,b-M),X=Math.min(d*a,C-F),z=-o/2,it=-d/2,$=Math.min(o,b/n-p),lt=Math.min(d,C/a-v);e&&t.drawImage(e,M,F,E,X,z,it,$,lt)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=T0(this.preserveAspectRatio||""),e=this.width,n=this.height,a={width:e,height:n};let o,d=this._element.width,p=this._element.height,v=1,b=1,C=0,M=0,F=0,E=0;return!t||t.alignX===An&&t.alignY===An?(v=e/d,b=n/p):(t.meetOrSlice==="meet"&&(v=b=w1(this._element,a),o=(e-d*v)/2,t.alignX==="Min"&&(C=-o),t.alignX==="Max"&&(C=o),o=(n-p*b)/2,t.alignY==="Min"&&(M=-o),t.alignY==="Max"&&(M=o)),t.meetOrSlice==="slice"&&(v=b=C1(this._element,a),o=d-e/v,t.alignX==="Mid"&&(F=o/2),t.alignX==="Max"&&(F=o),o=p-n/b,t.alignY==="Mid"&&(E=o/2),t.alignY==="Max"&&(E=o),d=e/v,p=n/b)),{width:d,height:p,scaleX:v,scaleY:b,offsetLeft:C,offsetTop:M,cropX:F,cropY:E}}static fromObject(t,e){let{filters:n,resizeFilter:a,src:o,crossOrigin:d,type:p}=t,v=_i(t,tC);return Promise.all([Lu(o,_t(_t({},e),{},{crossOrigin:d})),n&&el(n,e),a&&el([a],e),Ju(v,e)]).then(b=>{let[C,M=[],[F]=[],E={}]=b;return new this(C,_t(_t({},v),{},{src:o,filters:M,resizeFilter:F},E))})}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return Lu(t,{crossOrigin:e,signal:n}).then(o=>new this(o,a))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a=$r(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(a["xlink:href"]||a.href,e,a).catch(o=>(Es("log","Unable to parse Image",o),null))}}function Dg(l){if(!kS.test(l.nodeName))return{};const t=l.getAttribute("viewBox");let e,n,a=1,o=1,d=0,p=0;const v=l.getAttribute("width"),b=l.getAttribute("height"),C=l.getAttribute("x")||0,M=l.getAttribute("y")||0,F=!(t&&h_.test(t)),E=!v||!b||v==="100%"||b==="100%";let X="",z=0,it=0;if(F&&(C||M)&&l.parentNode&&l.parentNode.nodeName!=="#document"&&(X=" translate("+Cn(C||"0")+" "+Cn(M||"0")+") ",e=(l.getAttribute("transform")||"")+X,l.setAttribute("transform",e),l.removeAttribute("x"),l.removeAttribute("y")),F&&E)return{width:0,height:0};const $={width:0,height:0};if(F)return $.width=Cn(v),$.height=Cn(b),$;const lt=t.match(h_);d=-parseFloat(lt[1]),p=-parseFloat(lt[2]);const gt=parseFloat(lt[3]),kt=parseFloat(lt[4]);$.minX=d,$.minY=p,$.viewBoxWidth=gt,$.viewBoxHeight=kt,E?($.width=gt,$.height=kt):($.width=Cn(v),$.height=Cn(b),a=$.width/gt,o=$.height/kt);const St=T0(l.getAttribute("preserveAspectRatio")||"");if(St.alignX!==An&&(St.meetOrSlice==="meet"&&(o=a=a>o?o:a),St.meetOrSlice==="slice"&&(o=a=a>o?a:o),z=$.width-gt*a,it=$.height-kt*a,St.alignX==="Mid"&&(z/=2),St.alignY==="Mid"&&(it/=2),St.alignX==="Min"&&(z=0),St.alignY==="Min"&&(it=0)),a===1&&o===1&&d===0&&p===0&&C===0&&M===0)return $;if((C||M)&&l.parentNode.nodeName!=="#document"&&(X=" translate("+Cn(C||"0")+" "+Cn(M||"0")+") "),e=X+" matrix("+a+" 0 0 "+o+" "+(d*a+z)+" "+(p*o+it)+") ",l.nodeName==="svg"){for(n=l.ownerDocument.createElementNS(Fg,"g");l.firstChild;)n.appendChild(l.firstChild);l.appendChild(n)}else n=l,n.removeAttribute("x"),n.removeAttribute("y"),e=n.getAttribute("transform")+e;return n.setAttribute("transform",e),$}vt(Tn,"type","Image"),vt(Tn,"cacheProperties",[...js,...K1]),vt(Tn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),vt(Tn,"CSS_CANVAS","canvas-img"),vt(Tn,"ATTRIBUTE_NAMES",[...Ca,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ce.setClass(Tn),ce.setSVGClass(Tn);const Zh=l=>l.tagName.replace("svg:",""),eC=af(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function Q1(l,t){let e,n,a,o,d=[];for(a=0,o=t.length;a<o;a++)e=t[a],n=l.getElementsByTagNameNS("http://www.w3.org/2000/svg",e),d=d.concat(Array.from(n));return d}const iC=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],jg="xlink:href";function J1(l,t){var e;const n=((e=t.getAttribute(jg))===null||e===void 0?void 0:e.slice(1))||"",a=l.getElementById(n);if(a&&a.getAttribute(jg)&&J1(l,a),a&&(iC.forEach(o=>{const d=a.getAttribute(o);!t.hasAttribute(o)&&d&&t.setAttribute(o,d)}),!t.children.length)){const o=a.cloneNode(!0);for(;o.firstChild;)t.appendChild(o.firstChild)}t.removeAttribute(jg)}const nC=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function $1(l){const t=l.getElementsByTagName("style"),e={};for(let n=0;n<t.length;n++){const a=(t[n].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");a.trim()!==""&&a.split("}").filter((o,d,p)=>p.length>1&&o.trim()).forEach(o=>{if((o.match(/{/g)||[]).length>1&&o.trim().startsWith("@"))return;const d=o.split("{"),p={},v=d[1].trim().split(";").filter(function(b){return b.trim()});for(let b=0;b<v.length;b++){const C=v[b].split(":"),M=C[0].trim(),F=C[1].trim();p[M]=F}(o=d[0].trim()).split(",").forEach(b=>{(b=b.replace(/^svg/i,"").trim())!==""&&(e[b]=_t(_t({},e[b]||{}),p))})})}return e}const D_=l=>ce.getSVGClass(Zh(l).toLowerCase());class rC{constructor(t,e,n,a,o){this.elements=t,this.options=e,this.reviver=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a,this.clipPaths=o,this.gradientDefs=function(d){const p=Q1(d,nC),v={};let b=p.length;for(;b--;){const C=p[b];C.getAttribute("xlink:href")&&J1(d,C);const M=C.getAttribute("id");M&&(v[M]=C)}return v}(a),this.cssRules=$1(a)}parse(){return Promise.all(this.elements.map(t=>this.createObject(t)))}async createObject(t){const e=D_(t);if(e){const n=await e.fromElement(t,this.options,this.cssRules);return this.resolveGradient(n,t,Yi),this.resolveGradient(n,t,En),n instanceof Tn&&n._originalElement?Ah(n,n.parsePreserveAspectRatioAttribute()):Ah(n),await this.resolveClipPath(n,t),this.reviver&&this.reviver(t,n),n}return null}extractPropertyDefinition(t,e,n){const a=t[e],o=this.regexUrl;if(!o.test(a))return;o.lastIndex=0;const d=o.exec(a)[1];return o.lastIndex=0,n[d]}resolveGradient(t,e,n){const a=this.extractPropertyDefinition(t,n,this.gradientDefs);if(a){const o=e.getAttribute(n+"-opacity"),d=pr.fromElement(a,t,_t(_t({},this.options),{},{opacity:o}));t.set(n,d)}}async resolveClipPath(t,e,n){const a=this.extractPropertyDefinition(t,"clipPath",this.clipPaths);if(a){const o=In(t.calcTransformMatrix()),d=a[0].parentElement;let p=e;for(;!n&&p.parentElement&&p.getAttribute("clip-path")!==t.clipPath;)p=p.parentElement;p.parentElement.appendChild(d);const v=Hu("".concat(p.getAttribute("transform")||""," ").concat(d.getAttribute("originalTransform")||""));d.setAttribute("transform","matrix(".concat(v.join(","),")"));const b=await Promise.all(a.map(lt=>D_(lt).fromElement(lt,this.options,this.cssRules).then(gt=>(Ah(gt),gt.fillRule=gt.clipRule,delete gt.clipRule,gt)))),C=b.length===1?b[0]:new mn(b),M=ki(o,C.calcTransformMatrix());C.clipPath&&await this.resolveClipPath(C,p,d.getAttribute("clip-path")?p:void 0);const{scaleX:F,scaleY:E,angle:X,skewX:z,translateX:it,translateY:$}=eo(M);C.set({flipX:!1,flipY:!1}),C.set({scaleX:F,scaleY:E,angle:X,skewX:z,skewY:0}),C.setPositionByOrigin(new Tt(it,$),je,je),t.clipPath=C}else delete t.clipPath}}const j_=l=>TS.test(Zh(l)),Jg=()=>({objects:[],elements:[],options:{},allElements:[]});async function B0(l,t){let{crossOrigin:e,signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n&&n.aborted)return Es("log",new u0("parseSVGDocument")),Jg();const a=l.documentElement;(function(C){const M=Q1(C,["use","svg:use"]),F=["x","y","xlink:href","href","transform"];for(const E of M){const X=E.attributes,z={};for(const Zt of X)Zt.value&&(z[Zt.name]=Zt.value);const it=(z["xlink:href"]||z.href||"").slice(1);if(it==="")return;const $=C.getElementById(it);if($===null)return;let lt=$.cloneNode(!0);const gt=lt.attributes,kt={};for(const Zt of gt)Zt.value&&(kt[Zt.name]=Zt.value);const{x:St=0,y:V=0,transform:Jt=""}=z,Wt="".concat(Jt," ").concat(kt.transform||""," translate(").concat(St,", ").concat(V,")");if(Dg(lt),/^svg$/i.test(lt.nodeName)){const Zt=lt.ownerDocument.createElementNS(Fg,"g");Object.entries(kt).forEach(he=>{let[Pt,Yt]=he;return Zt.setAttributeNS(Fg,Pt,Yt)}),Zt.append(...lt.childNodes),lt=Zt}for(const Zt of X){if(!Zt)continue;const{name:he,value:Pt}=Zt;if(!F.includes(he))if(he==="style"){const Yt={};Xg(Pt,Yt),Object.entries(kt).forEach(Xt=>{let[Re,ut]=Xt;Yt[Re]=ut}),Xg(kt.style||"",Yt);const _e=Object.entries(Yt).map(Xt=>Xt.join(":")).join(";");lt.setAttribute(he,_e)}else!kt[he]&&lt.setAttribute(he,Pt)}lt.setAttribute("transform",Wt),lt.setAttribute("instantiated_by_use","1"),lt.removeAttribute("id"),E.parentNode.replaceChild(lt,E)}})(l);const o=Array.from(a.getElementsByTagName("*")),d=_t(_t({},Dg(a)),{},{crossOrigin:e,signal:n}),p=o.filter(C=>(Dg(C),j_(C)&&!function(M){let F=M;for(;F&&(F=F.parentElement);)if(F&&F.nodeName&&eC.test(Zh(F))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}(C)));if(!p||p&&!p.length)return _t(_t({},Jg()),{},{options:d,allElements:o});const v={};return o.filter(C=>Zh(C)==="clipPath").forEach(C=>{C.setAttribute("originalTransform",C.getAttribute("transform")||"");const M=C.getAttribute("id");v[M]=Array.from(C.getElementsByTagName("*")).filter(F=>j_(F))}),{objects:await new rC(p,d,t,l,v).parse(),elements:p,options:d,allElements:o}}function $g(l,t,e){return B0(new(Tr()).DOMParser().parseFromString(l.trim(),"text/xml"),t,e)}function sC(l,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,a)=>{R1(l.replace(/^\n\s*/,"").trim(),{onComplete:o=>{const d=o.responseXML;d&&n(d),a()},signal:e.signal})}).then(n=>B0(n,t,e)).catch(()=>Jg())}const tb=Sy,R_=l=>function(t,e,n){const{points:a,pathOffset:o}=n;return new Tt(a[l]).subtract(o).transform(ki(n.getViewportTransform(),n.calcTransformMatrix()))},eb=(l,t,e,n)=>{const{target:a,pointIndex:o}=t,d=a,p=Os(new Tt(e,n),void 0,d.calcOwnMatrix());return d.points[o]=p.add(d.pathOffset),d.setDimensions(),d.set("dirty",!0),!0},ib=(l,t)=>function(e,n,a,o){const d=n.target,p=new Tt(d.points[(l>0?l:d.points.length)-1]),v=p.subtract(d.pathOffset).transform(d.calcOwnMatrix()),b=t(e,_t(_t({},n),{},{pointIndex:l}),a,o),C=p.subtract(d.pathOffset).transform(d.calcOwnMatrix()).subtract(v);return d.left-=C.x,d.top-=C.y,b},L_=l=>wa(tb,ib(l,eb)),t0=(l,t,e)=>{const{path:n,pathOffset:a}=l,o=n[t];return new Tt(o[e]-a.x,o[e+1]-a.y).transform(ki(l.getViewportTransform(),l.calcTransformMatrix()))};function aC(l,t,e){const{commandIndex:n,pointIndex:a}=this;return t0(e,n,a)}function oC(l,t,e,n){const{target:a}=t,{commandIndex:o,pointIndex:d}=this,p=((v,b,C,M,F)=>{const{path:E,pathOffset:X}=v,z=E[(M>0?M:E.length)-1],it=new Tt(z[F],z[F+1]),$=it.subtract(X).transform(v.calcOwnMatrix()),lt=Os(new Tt(b,C),void 0,v.calcOwnMatrix());E[M][F]=lt.x+X.x,E[M][F+1]=lt.y+X.y,v.setDimensions();const gt=it.subtract(v.pathOffset).transform(v.calcOwnMatrix()).subtract($);return v.left-=gt.x,v.top-=gt.y,v.set("dirty",!0),!0})(a,e,n,o,d);return w0(this.actionName,_t(_t({},C0(l,t,e,n)),{},{commandIndex:o,pointIndex:d})),p}class nb extends zn{constructor(t){super(t)}render(t,e,n,a,o){const d=_t(_t({},a),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(t,e,n,d,o)}}class lC extends nb{constructor(t){super(t)}render(t,e,n,a,o){const{path:d}=o,{commandIndex:p,pointIndex:v,connectToCommandIndex:b,connectToPointIndex:C}=this;t.save(),t.strokeStyle=this.controlStroke,this.connectionDashArray&&t.setLineDash(this.connectionDashArray);const[M]=d[p],F=t0(o,b,C);if(M==="Q"){const E=t0(o,p,v+2);t.moveTo(E.x,E.y),t.lineTo(e,n)}else t.moveTo(e,n);t.lineTo(F.x,F.y),t.stroke(),t.restore(),super.render(t,e,n,a,o)}}const bh=(l,t,e,n,a,o)=>new(e?lC:nb)(_t(_t({commandIndex:l,pointIndex:t,actionName:"modifyPath",positionHandler:aC,actionHandler:oC,connectToCommandIndex:a,connectToPointIndex:o},n),e?n.controlPointStyle:n.pointStyle));var uC=Object.freeze({__proto__:null,changeWidth:Ug,createObjectDefaultControls:D0,createPathControls:function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};let n="M";return l.path.forEach((a,o)=>{const d=a[0];switch(d!=="Z"&&(e["c_".concat(o,"_").concat(d)]=bh(o,a.length-2,!1,t)),d){case"C":e["c_".concat(o,"_C_CP_1")]=bh(o,1,!0,t,o-1,(p=>p==="C"?5:p==="Q"?3:1)(n)),e["c_".concat(o,"_C_CP_2")]=bh(o,3,!0,t,o,5);break;case"Q":e["c_".concat(o,"_Q_CP_1")]=bh(o,1,!0,t,o,3)}n=d}),e},createPolyActionHandler:L_,createPolyControls:function(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let n=0;n<(typeof l=="number"?l:l.points.length);n++)e["p".concat(n)]=new zn(_t({actionName:tb,positionHandler:R_(n),actionHandler:L_(n)},t));return e},createPolyPositionHandler:R_,createResizeControls:u1,createTextboxDefaultControls:c1,dragHandler:Iy,factoryPolyActionHandler:ib,getLocalPoint:sf,polyActionHandler:eb,renderCircleControl:Qy,renderSquareControl:Jy,rotationStyleHandler:$y,rotationWithSnapping:t1,scaleCursorStyleHandler:Ko,scaleOrSkewActionName:pu,scaleSkewCursorStyleHandler:Qa,scalingEqually:gu,scalingX:n1,scalingXOrSkewingY:Hg,scalingY:r1,scalingYOrSkewingX:Yg,skewCursorStyleHandler:s1,skewHandlerX:o1,skewHandlerY:l1,wrapWithFireEvent:wa,wrapWithFixedAnchor:uo});const ec=l=>l.webgl!==void 0,cC=(l,t)=>{const e=Un({width:l,height:t}),n=mr().getContext("webgl"),a={imageBuffer:new ArrayBuffer(l*t*4)},o={destinationWidth:l,destinationHeight:t,targetCanvas:e};let d;d=Tr().performance.now(),Xu.prototype.copyGLTo2D.call(a,n,o);const p=Tr().performance.now()-d;return d=Tr().performance.now(),Xu.prototype.copyGLTo2DPutImageData.call(a,n,o),p>Tr().performance.now()-d},z0="precision highp float",hC=`
    `.concat(z0,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),fC=["type"],dC=["type"],gC=new RegExp(z0,"g");class Xi{get type(){return this.constructor.type}constructor(){let t=_i(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fC);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return hC}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:a="highp"}}=Ar();a!=="highp"&&(e=e.replace(gC,z0.replace("highp",a)));const o=t.createShader(t.VERTEX_SHADER),d=t.createShader(t.FRAGMENT_SHADER),p=t.createProgram();if(!o||!d||!p)throw new Yr("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Yr("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(d,e),t.compileShader(d),!t.getShaderParameter(d,t.COMPILE_STATUS))throw new Yr("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(d)));if(t.attachShader(p,o),t.attachShader(p,d),t.linkProgram(p),!t.getProgramParameter(p,t.LINK_STATUS))throw new Yr('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(p)));const v=this.getUniformLocations(t,p)||{};return v.uStepW=t.getUniformLocation(p,"uStepW"),v.uStepH=t.getUniformLocation(p,"uStepH"),{program:p,attributeLocations:this.getAttributeLocations(t,p),uniformLocations:v}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const n=this.constructor.uniformLocations,a={};for(let o=0;o<n.length;o++)a[n[o]]=t.getUniformLocation(e,n[o]);return a}sendAttributeData(t,e,n){const a=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(a),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,a=t.destinationHeight;t.sourceWidth===n&&t.sourceHeight===a||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,a)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){ec(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:n}=t,a=Un({width:e,height:n});t.helpLayer=a}}toObject(){const t=Object.keys(this.constructor.defaults||{});return _t({type:this.type},t.reduce((e,n)=>(e[n]=this[n],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(_i(t,dC))}}vt(Xi,"type","BaseFilter"),vt(Xi,"uniformLocations",[]);const pC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class mu extends Xi{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(pC[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new Je(this.color).getSource(),a=this.alpha,o=n[0]*a,d=n[1]*a,p=n[2]*a,v=1-a;for(let b=0;b<e.length;b+=4){const C=e[b],M=e[b+1],F=e[b+2];let E,X,z;switch(this.mode){case"multiply":E=C*o/255,X=M*d/255,z=F*p/255;break;case"screen":E=255-(255-C)*(255-o)/255,X=255-(255-M)*(255-d)/255,z=255-(255-F)*(255-p)/255;break;case"add":E=C+o,X=M+d,z=F+p;break;case"difference":E=Math.abs(C-o),X=Math.abs(M-d),z=Math.abs(F-p);break;case"subtract":E=C-o,X=M-d,z=F-p;break;case"darken":E=Math.min(C,o),X=Math.min(M,d),z=Math.min(F,p);break;case"lighten":E=Math.max(C,o),X=Math.max(M,d),z=Math.max(F,p);break;case"overlay":E=o<128?2*C*o/255:255-2*(255-C)*(255-o)/255,X=d<128?2*M*d/255:255-2*(255-M)*(255-d)/255,z=p<128?2*F*p/255:255-2*(255-F)*(255-p)/255;break;case"exclusion":E=o+C-2*o*C/255,X=d+M-2*d*M/255,z=p+F-2*p*F/255;break;case"tint":E=o+C*v,X=d+M*v,z=p+F*v}e[b]=E,e[b+1]=X,e[b+2]=z}}sendUniformData(t,e){const n=new Je(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}}vt(mu,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),vt(mu,"type","BlendColor"),vt(mu,"uniformLocations",["uColor"]),ce.setClass(mu);const mC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},vC=["type","image"];class vu extends Xi{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:a},filterBackend:{resources:o}}=t;const d=this.image;o.blendImage||(o.blendImage=mr());const p=o.blendImage,v=p.getContext("2d");p.width!==n||p.height!==a?(p.width=n,p.height=a):v.clearRect(0,0,n,a),v.setTransform(d.scaleX,0,0,d.scaleY,d.left,d.top),v.drawImage(d.getElement(),0,0,n,a);const b=v.getImageData(0,0,n,a).data;for(let C=0;C<e.length;C+=4){const M=e[C],F=e[C+1],E=e[C+2],X=e[C+3],z=b[C],it=b[C+1],$=b[C+2],lt=b[C+3];switch(this.mode){case"multiply":e[C]=M*z/255,e[C+1]=F*it/255,e[C+2]=E*$/255,e[C+3]=X*lt/255;break;case"mask":e[C+3]=lt}}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return _t(_t({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:n,image:a}=t,o=_i(t,vC);return Tn.fromObject(a,e).then(d=>new this(_t(_t({},o),{},{image:d})))}}vt(vu,"type","BlendImage"),vt(vu,"defaults",{mode:"multiply",alpha:1}),vt(vu,"uniformLocations",["uTransformMatrix","uImage"]),ce.setClass(vu);class _u extends Xi{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){ec(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:n,height:a}}=t;this.aspectRatio=n/a,this.horizontal=!0;let o=this.getBlurValue()*n;const d=new Uint8ClampedArray(e),p=15,v=4*n;for(let b=0;b<e.length;b+=4){let C=0,M=0,F=0,E=0,X=0;const z=b-b%v,it=z+v;for(let $=-14;$<p;$++){const lt=$/p,gt=4*Math.floor(o*lt),kt=1-Math.abs(lt);let St=b+gt;St<z?St=z:St>it&&(St=it);const V=e[St+3]*kt;C+=e[St]*V,M+=e[St+1]*V,F+=e[St+2]*V,E+=V,X+=kt}d[b]=C/E,d[b+1]=M/E,d[b+2]=F/E,d[b+3]=E/X}this.horizontal=!1,o=this.getBlurValue()*a;for(let b=0;b<d.length;b+=4){let C=0,M=0,F=0,E=0,X=0;const z=b%v,it=d.length-v+z;for(let $=-14;$<p;$++){const lt=$/p,gt=Math.floor(o*lt)*v,kt=1-Math.abs(lt);let St=b+gt;St<z?St=z:St>it&&(St=it);const V=d[St+3]*kt;C+=d[St]*V,M+=d[St+1]*V,F+=d[St+2]*V,E+=V,X+=kt}e[b]=C/E,e[b+1]=M/E,e[b+2]=F/E,e[b+3]=E/X}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:n}=this;return e?n>1&&(t=1/n):n<1&&(t=n),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}vt(_u,"type","Blur"),vt(_u,"defaults",{blur:0}),vt(_u,"uniformLocations",["uDelta"]),ce.setClass(_u);class yu extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.round(255*this.brightness);for(let a=0;a<e.length;a+=4)e[a]+=n,e[a+1]+=n,e[a+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}vt(yu,"type","Brightness"),vt(yu,"defaults",{brightness:0}),vt(yu,"uniformLocations",["uBrightness"]),ce.setClass(yu);const rb={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class $a extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,n=this.matrix,a=this.colorsOnly;for(let o=0;o<e.length;o+=4){const d=e[o],p=e[o+1],v=e[o+2];if(e[o]=d*n[0]+p*n[1]+v*n[2]+255*n[4],e[o+1]=d*n[5]+p*n[6]+v*n[7]+255*n[9],e[o+2]=d*n[10]+p*n[11]+v*n[12]+255*n[14],!a){const b=e[o+3];e[o]+=b*n[3],e[o+1]+=b*n[8],e[o+2]+=b*n[13],e[o+3]=d*n[15]+p*n[16]+v*n[17]+b*n[18]+255*n[19]}}}sendUniformData(t,e){const n=this.matrix,a=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,a),t.uniform4fv(e.uConstants,o)}toObject(){return _t(_t({},super.toObject()),{},{matrix:[...this.matrix]})}}function co(l,t){var e;const n=(vt(e=class extends $a{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",l),vt(e,"defaults",{colorsOnly:!1,matrix:t}),e);return ce.setClass(n,l),n}vt($a,"type","ColorMatrix"),vt($a,"defaults",rb),vt($a,"uniformLocations",["uColorMatrix","uConstants"]),ce.setClass($a);const _C=co("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),yC=co("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),bC=co("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),xC=co("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),SC=co("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),wC=co("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),CC=co("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class e0 extends Xi{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){ec(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(n=>ce.getClass(n.type).fromObject(n,e))).then(n=>new this({subFilters:n}))}}vt(e0,"type","Composed"),ce.setClass(e0);class bu extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.floor(255*this.contrast),a=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=a*(e[o]-128)+128,e[o+1]=a*(e[o+1]-128)+128,e[o+2]=a*(e[o+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}vt(bu,"type","Contrast"),vt(bu,"defaults",{contrast:0}),vt(bu,"uniformLocations",["uContrast"]),ce.setClass(bu);const TC={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class xu extends Xi{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return TC[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,a=this.matrix,o=Math.round(Math.sqrt(a.length)),d=Math.floor(o/2),p=e.width,v=e.height,b=t.ctx.createImageData(p,v),C=b.data,M=this.opaque?1:0;let F,E,X,z,it,$,lt,gt,kt,St,V,Jt,Wt;for(V=0;V<v;V++)for(St=0;St<p;St++){for(it=4*(V*p+St),F=0,E=0,X=0,z=0,Wt=0;Wt<o;Wt++)for(Jt=0;Jt<o;Jt++)lt=V+Wt-d,$=St+Jt-d,lt<0||lt>=v||$<0||$>=p||(gt=4*(lt*p+$),kt=a[Wt*o+Jt],F+=n[gt]*kt,E+=n[gt+1]*kt,X+=n[gt+2]*kt,M||(z+=n[gt+3]*kt));C[it]=F,C[it+1]=E,C[it+2]=X,C[it+3]=M?n[it+3]:z}t.imageData=b}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return _t(_t({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}vt(xu,"type","Convolute"),vt(xu,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),vt(xu,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ce.setClass(xu);const sb="Gamma";class Su extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,a=1/n[0],o=1/n[1],d=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const p=this.rgbValues;for(let v=0;v<256;v++)p.r[v]=255*Math.pow(v/255,a),p.g[v]=255*Math.pow(v/255,o),p.b[v]=255*Math.pow(v/255,d);for(let v=0;v<e.length;v+=4)e[v]=p.r[e[v]],e[v+1]=p.g[e[v+1]],e[v+2]=p.b[e[v+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:sb,gamma:this.gamma.concat()}}}vt(Su,"type",sb),vt(Su,"defaults",{gamma:[1,1,1]}),vt(Su,"uniformLocations",["uGamma"]),ce.setClass(Su);const kC={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class wu extends Xi{applyTo2d(t){let{imageData:{data:e}}=t;for(let n,a=0;a<e.length;a+=4){const o=e[a],d=e[a+1],p=e[a+2];switch(this.mode){case"average":n=(o+d+p)/3;break;case"lightness":n=(Math.min(o,d,p)+Math.max(o,d,p))/2;break;case"luminosity":n=.21*o+.72*d+.07*p}e[a+2]=e[a+1]=e[a]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return kC[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}vt(wu,"type","Grayscale"),vt(wu,"defaults",{mode:"average"}),vt(wu,"uniformLocations",["uMode"]),ce.setClass(wu);const OC=_t(_t({},rb),{},{rotation:0});class Dh extends $a{calculateMatrix(){const t=this.rotation*Math.PI,e=Er(t),n=Mr(t),a=1/3,o=Math.sqrt(a)*n,d=1-e;this.matrix=[e+d/3,a*d-o,a*d+o,0,0,a*d+o,e+a*d,a*d-o,0,0,a*d-o,a*d+o,e+a*d,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}vt(Dh,"type","HueRotation"),vt(Dh,"defaults",OC),ce.setClass(Dh);class Cu extends Xi{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}vt(Cu,"type","Invert"),vt(Cu,"defaults",{alpha:!1,invert:!0}),vt(Cu,"uniformLocations",["uInvert","uAlpha"]),ce.setClass(Cu);class Tu extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.noise;for(let a=0;a<e.length;a+=4){const o=(.5-Math.random())*n;e[a]+=o,e[a+1]+=o,e[a+2]+=o}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}vt(Tu,"type","Noise"),vt(Tu,"defaults",{noise:0}),vt(Tu,"uniformLocations",["uNoise","uSeed"]),ce.setClass(Tu);class ku extends Xi{applyTo2d(t){let{imageData:{data:e,width:n,height:a}}=t;for(let o=0;o<a;o+=this.blocksize)for(let d=0;d<n;d+=this.blocksize){const p=4*o*n+4*d,v=e[p],b=e[p+1],C=e[p+2],M=e[p+3];for(let F=o;F<Math.min(o+this.blocksize,a);F++)for(let E=d;E<Math.min(d+this.blocksize,n);E++){const X=4*F*n+4*E;e[X]=v,e[X+1]=b,e[X+2]=C,e[X+3]=M}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}vt(ku,"type","Pixelate"),vt(ku,"defaults",{blocksize:4}),vt(ku,"uniformLocations",["uBlocksize"]),ce.setClass(ku);class Ou extends Xi{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=255*this.distance,a=new Je(this.color).getSource(),o=[a[0]-n,a[1]-n,a[2]-n],d=[a[0]+n,a[1]+n,a[2]+n];for(let p=0;p<e.length;p+=4){const v=e[p],b=e[p+1],C=e[p+2];v>o[0]&&b>o[1]&&C>o[2]&&v<d[0]&&b<d[1]&&C<d[2]&&(e[p+3]=0)}}sendUniformData(t,e){const n=new Je(this.color).getSource(),a=this.distance,o=[0+n[0]/255-a,0+n[1]/255-a,0+n[2]/255-a,1],d=[n[0]/255+a,n[1]/255+a,n[2]/255+a,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,d)}}vt(Ou,"type","RemoveColor"),vt(Ou,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),vt(Ou,"uniformLocations",["uLow","uHigh"]),ce.setClass(Ou);class Au extends Xi{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),a=new Array(n);for(let o=1;o<=n;o++)a[o-1]=t(o*e);return a}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((n,a)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(a,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(a,`];
              sum += 2.0 * uTaps[`).concat(a,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){ec(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const n=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,a=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/a;const o=e.width,d=e.height,p=Math.round(o*n),v=Math.round(d*a);let b;b=this.resizeType==="sliceHack"?this.sliceByTwo(t,o,d,p,v):this.resizeType==="hermite"?this.hermiteFastResize(t,o,d,p,v):this.resizeType==="bilinear"?this.bilinearFiltering(t,o,d,p,v):this.resizeType==="lanczos"?this.lanczosResize(t,o,d,p,v):new ImageData(p,v),t.imageData=b}sliceByTwo(t,e,n,a,o){const d=t.imageData,p=.5;let v=!1,b=!1,C=e*p,M=n*p;const F=t.filterBackend.resources;let E=0,X=0;const z=e;let it=0;F.sliceByTwo||(F.sliceByTwo=mr());const $=F.sliceByTwo;($.width<1.5*e||$.height<n)&&($.width=1.5*e,$.height=n);const lt=$.getContext("2d");for(lt.clearRect(0,0,1.5*e,n),lt.putImageData(d,0,0),a=Math.floor(a),o=Math.floor(o);!v||!b;)e=C,n=M,a<Math.floor(C*p)?C=Math.floor(C*p):(C=a,v=!0),o<Math.floor(M*p)?M=Math.floor(M*p):(M=o,b=!0),lt.drawImage($,E,X,e,n,z,it,C,M),E=z,X=it,it+=M;return lt.getImageData(E,X,a,o)}lanczosResize(t,e,n,a,o){const d=t.imageData.data,p=t.ctx.createImageData(a,o),v=p.data,b=this.lanczosCreate(this.lanczosLobes),C=this.rcpScaleX,M=this.rcpScaleY,F=2/this.rcpScaleX,E=2/this.rcpScaleY,X=Math.ceil(C*this.lanczosLobes/2),z=Math.ceil(M*this.lanczosLobes/2),it={},$={x:0,y:0},lt={x:0,y:0};return function gt(kt){let St,V,Jt,Wt,Zt,he,Pt,Yt,_e,Xt,Re;for($.x=(kt+.5)*C,lt.x=Math.floor($.x),St=0;St<o;St++){for($.y=(St+.5)*M,lt.y=Math.floor($.y),Zt=0,he=0,Pt=0,Yt=0,_e=0,V=lt.x-X;V<=lt.x+X;V++)if(!(V<0||V>=e)){Xt=Math.floor(1e3*Math.abs(V-$.x)),it[Xt]||(it[Xt]={});for(let ut=lt.y-z;ut<=lt.y+z;ut++)ut<0||ut>=n||(Re=Math.floor(1e3*Math.abs(ut-$.y)),it[Xt][Re]||(it[Xt][Re]=b(Math.sqrt(Math.pow(Xt*F,2)+Math.pow(Re*E,2))/1e3)),Jt=it[Xt][Re],Jt>0&&(Wt=4*(ut*e+V),Zt+=Jt,he+=Jt*d[Wt],Pt+=Jt*d[Wt+1],Yt+=Jt*d[Wt+2],_e+=Jt*d[Wt+3]))}Wt=4*(St*a+kt),v[Wt]=he/Zt,v[Wt+1]=Pt/Zt,v[Wt+2]=Yt/Zt,v[Wt+3]=_e/Zt}return++kt<a?gt(kt):p}(0)}bilinearFiltering(t,e,n,a,o){let d,p,v,b,C,M,F,E,X,z,it,$,lt,gt=0;const kt=this.rcpScaleX,St=this.rcpScaleY,V=4*(e-1),Jt=t.imageData.data,Wt=t.ctx.createImageData(a,o),Zt=Wt.data;for(F=0;F<o;F++)for(E=0;E<a;E++)for(C=Math.floor(kt*E),M=Math.floor(St*F),X=kt*E-C,z=St*F-M,lt=4*(M*e+C),it=0;it<4;it++)d=Jt[lt+it],p=Jt[lt+4+it],v=Jt[lt+V+it],b=Jt[lt+V+4+it],$=d*(1-X)*(1-z)+p*X*(1-z)+v*z*(1-X)+b*X*z,Zt[gt++]=$;return Wt}hermiteFastResize(t,e,n,a,o){const d=this.rcpScaleX,p=this.rcpScaleY,v=Math.ceil(d/2),b=Math.ceil(p/2),C=t.imageData.data,M=t.ctx.createImageData(a,o),F=M.data;for(let E=0;E<o;E++)for(let X=0;X<a;X++){const z=4*(X+E*a);let it=0,$=0,lt=0,gt=0,kt=0,St=0,V=0;const Jt=(E+.5)*p;for(let Wt=Math.floor(E*p);Wt<(E+1)*p;Wt++){const Zt=Math.abs(Jt-(Wt+.5))/b,he=(X+.5)*d,Pt=Zt*Zt;for(let Yt=Math.floor(X*d);Yt<(X+1)*d;Yt++){let _e=Math.abs(he-(Yt+.5))/v;const Xt=Math.sqrt(Pt+_e*_e);Xt>1&&Xt<-1||(it=2*Xt*Xt*Xt-3*Xt*Xt+1,it>0&&(_e=4*(Yt+Wt*e),V+=it*C[_e+3],lt+=it,C[_e+3]<255&&(it=it*C[_e+3]/250),gt+=it*C[_e],kt+=it*C[_e+1],St+=it*C[_e+2],$+=it))}}F[z]=gt/$,F[z+1]=kt/$,F[z+2]=St/$,F[z+3]=V/lt}return M}}vt(Au,"type","Resize"),vt(Au,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),vt(Au,"uniformLocations",["uDelta","uTaps"]),ce.setClass(Au);class Eu extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.saturation;for(let a=0;a<e.length;a+=4){const o=e[a],d=e[a+1],p=e[a+2],v=Math.max(o,d,p);e[a]+=v!==o?(v-o)*n:0,e[a+1]+=v!==d?(v-d)*n:0,e[a+2]+=v!==p?(v-p)*n:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}vt(Eu,"type","Saturation"),vt(Eu,"defaults",{saturation:0}),vt(Eu,"uniformLocations",["uSaturation"]),ce.setClass(Eu);class Mu extends Xi{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.vibrance;for(let a=0;a<e.length;a+=4){const o=e[a],d=e[a+1],p=e[a+2],v=Math.max(o,d,p),b=(o+d+p)/3,C=2*Math.abs(v-b)/255*n;e[a]+=v!==o?(v-o)*C:0,e[a+1]+=v!==d?(v-d)*C:0,e[a+2]+=v!==p?(v-p)*C:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}vt(Mu,"type","Vibrance"),vt(Mu,"defaults",{vibrance:0}),vt(Mu,"uniformLocations",["uVibrance"]),ce.setClass(Mu);var AC=Object.freeze({__proto__:null,BaseFilter:Xi,BlackWhite:CC,BlendColor:mu,BlendImage:vu,Blur:_u,Brightness:yu,Brownie:_C,ColorMatrix:$a,Composed:e0,Contrast:bu,Convolute:xu,Gamma:Su,Grayscale:wu,HueRotation:Dh,Invert:Cu,Kodachrome:bC,Noise:Tu,Pixelate:ku,Polaroid:SC,RemoveColor:Ou,Resize:Au,Saturation:Eu,Sepia:wC,Technicolor:xC,Vibrance:Mu,Vintage:yC});const EC=Object.freeze(Object.defineProperty({__proto__:null,ActiveSelection:ya,BaseBrush:ff,BaseFabricObject:Vr,Canvas:Yu,Canvas2dFilterBackend:W1,CanvasDOMManager:L1,Circle:Fn,CircleBrush:V1,ClipPathLayout:Kg,Color:Je,Control:zn,Ellipse:wr,FabricImage:Tn,FabricObject:tn,FabricText:un,FitContentLayout:Gh,FixedLayout:Qg,Gradient:pr,Group:mn,IText:Gr,Image:Tn,InteractiveFabricObject:rl,Intersection:Si,LayoutManager:sl,LayoutStrategy:tc,Line:gr,Object:tn,Observable:wy,Path:Hr,Pattern:Bu,PatternBrush:H1,PencilBrush:ro,Point:Tt,Polygon:_a,Polyline:fr,Rect:On,Shadow:Mn,SprayBrush:U1,StaticCanvas:fl,StaticCanvasDOMManager:x0,Text:un,Textbox:qr,Triangle:Xr,WebGLFilterBackend:Xu,cache:Jo,classRegistry:ce,config:qe,controlsUtils:uC,createCollectionMixin:p0,filters:AC,getCSSRules:$1,getEnv:Ar,getFabricDocument:ao,getFabricWindow:Tr,getFilterBackend:Mh,iMatrix:vn,initFilterBackend:Z1,isPutImageFaster:cC,isWebGLPipelineState:ec,loadSVGFromString:$g,loadSVGFromURL:sC,parseAttributes:$r,parseFontDeclaration:_1,parsePointsAttribute:X1,parseSVGDocument:B0,parseStyleAttribute:y1,parseTransformAttribute:Hu,runningAnimations:Vu,setEnv:dS,setFilterBackend:$w,util:Wg,version:Lh},Symbol.toStringTag,{value:"Module"})),Sa={namespace:"app",separator:".",trimKeys:!0,expiry:!0};function MC(l){Sa.namespace=l}function ab(l){Sa.namespace=l}function DC(){return Sa.namespace}function jC(){return Sa}function RC(l){Sa.separator=l}function df(){return Sa.separator}function LC(l){return`${Sa.namespace}${Sa.separator}${l}`}const PC="1.2.0";var F0={version:PC,createNamespace:MC,getCurrentNamespace:DC,switchNamespace:ab,get:jC,setSeparator:RC,getSeparator:df,generateKey:LC};function NC(l){l&&ab(l)}function BC(l){try{return JSON.parse(l)}catch{return l}}function ob(l){return l===void 0}function lb(l){return l===null||l==="null"}function zC(l,t){if(l===0)return"0 B";const e=1024,n=["B","KB","MB"],a=Math.floor(Math.log(l)/Math.log(e));return(l/Math.pow(e,a)).toFixed(2)+" "+(t?n[a]:"")}function FC(l,t,e){t=t.toUpperCase();let n="";switch(t){case"B":n=l.toFixed(2);break;case"KB":n=(l/1024).toFixed(2);break;case"MB":n=(l/(1024*1024)).toFixed(2);break;default:return console.warn(`Unsupported format "${t}" provided. Falling back to auto-formatting.`),zC(l,e)}return e?`${n} ${t}`:n}var Gu={parse:BC,isUndefined:ob,isNull:lb,units:FC};function ub(l){return ob(l)||lb(l)}function IC(l,t=null){if(ub(l))return null;const e=F0.generateKey(l),n=this.storage.getItem(e);if(Gu.isNull(n))return t;try{let a=Gu.parse(n);return a.expire&&Date.now()>a.expire?(this.remove(l),t):a.value}catch{return t}}function VC(l,t,e={}){if(ub(l))return null;const n=F0.generateKey(l),{expire:a}=e;let o={value:t,...a?{expire:Date.now()+a}:{}};this.storage.setItem(n,JSON.stringify(o))}function UC(l){return!!this.get(l)}function HC(l){const t=this.get(l),e=F0.generateKey(l);return this.storage.removeItem(e),t}function YC(){return this.storage.clear()}function XC(l){return this.storage.key(l)}function GC(){const l=[];for(let t=0;t<this.storage.length;t++)l.push(this.storage.key(t));return l}function qC(l){return this.storage.get(l).trim()}function WC(l,t={}){const e=this.get(l);if(e===null)return 0;const n=new Blob([JSON.stringify(e)]).size;if(t.format){let a="unit"in t?t.unit:!0;return Gu.units(n,t.format,a)}return n}function ZC(l,t){const e=df();for(let n in t)n in t&&this.set(`${l}${e}${n}`,t[n])}function KC(l){const t={},e=df();for(let n=0,a=this.storage.length;n<a;n++){const o=this.key(n),[,d,p]=o.split(`${e}`,3);d===l&&p&&(t[p]=this.get(`${d}${e}${p}`))}return t}const QC=5*1024*1024;function JC(l={}){const t=l.capacity||QC,e=this.used(),n=t-e,a=n>0?n:0;if(l.format){let o="unit"in l?l.unit:!0;return Gu.units(a,l.format,o)}return a}function $C(){let l=0;const t=df();for(let e=0;e<this.count;e++){const n=this.key(e),[,a]=n.split(`${t}`,2),o=this.get(a);l+=new Blob([JSON.stringify(n)]).size,l+=new Blob([JSON.stringify(o)]).size}return l}const tT=5*1024*1024;function eT(l={}){const t=l.capacity||tT;if(l.format){let e="unit"in l?l.unit:!0;return Gu.units(t,l.format,e)}return t}var iT={size:WC,free:JC,used:$C,capacity:eT,from:NC,get:IC,set:VC,has:UC,remove:HC,clear:YC,key:XC,keys:GC,trim:qC,getFormattedData:KC,setFormattedData:ZC};function P_(l){return{storage:l,get count(){return l.length},...iT}}function N_(l){if(!l)throw new Error("Storage is not supported in this environment.");return l}const nT={local:P_(N_(window.localStorage)),session:P_(N_(window.sessionStorage))},B_=l=>{let t;const e=new Set,n=(b,C)=>{const M=typeof b=="function"?b(t):b;if(!Object.is(M,t)){const F=t;t=C??(typeof M!="object"||M===null)?M:Object.assign({},t,M),e.forEach(E=>E(t,F))}},a=()=>t,p={setState:n,getState:a,getInitialState:()=>v,subscribe:b=>(e.add(b),()=>e.delete(b))},v=t=l(n,a,p);return p},rT=l=>l?B_(l):B_,sT=l=>l;function aT(l,t=sT){const e=fh.useSyncExternalStore(l.subscribe,fh.useCallback(()=>t(l.getState()),[l,t]),fh.useCallback(()=>t(l.getInitialState()),[l,t]));return fh.useDebugValue(e),e}const z_=l=>{const t=rT(l),e=n=>aT(t,n);return Object.assign(e,t),e},oT=l=>l?z_(l):z_,lT="landscape",uT="A4",cT="Default",hT="freehand",fT={Default:{w:1024,h:600},Freehand:{w:1920,h:1080},A4:{w:794,h:1123},A5:{w:794,h:1123},Letter:{w:816,h:1056},Legal:{w:816,h:1344}},dT={bg:"#F2F6FA"};function F_(l,t){const e=Wg.invertTransform(l.calcTransformMatrix());return Wg.transformPoint(t,e)}function gT(l,t=0,e=1){return Math.max(t,Math.min(e,l))}function I_(l,t,e){const n=e.x-t.x,a=e.y-t.y,o=l.x-t.x,d=l.y-t.y,p=n*n+a*a;return p===0?0:gT((o*n+d*a)/p)}class cb{canvas;activeObj=null;start;end;line;stops=[];activeStop=null;gradientType="linear";getColor;constructor(t,e){this.canvas=t,this.getColor=e}enable(){this.canvas.on("mouse:down",this.onMouseDown)}disable(){this.canvas.off("mouse:down",this.onMouseDown),this.cleanup()}onMouseDown=t=>{const e=this.canvas.findTarget(t.e,!1);if(e&&!(e===this.start||e===this.end)){if(this.stops.includes(e)){this.setActiveStop(e);return}if(e===this.line){this.addStopFromEvent(t);return}this.attach(e)}};attach(t){this.cleanup(),this.activeObj=t;const e=t.getBoundingRect(!0,!0),n=this.getColor();this.start=this.createHandle(e.left,e.top+e.height/2),this.end=this.createHandle(e.left+e.width,e.top+e.height/2),this.line=new gr([this.start.left,this.start.top,this.end.left,this.end.top],{stroke:"#6366f1",strokeWidth:1,selectable:!1,evented:!0,excludeFromExport:!0}),this.createStop(0,n),this.createStop(1,n),this.canvas.add(this.line,this.start,this.end,...this.stops),this.setActiveStop(this.stops[1]),this.update()}createHandle(t,e){const n=new Fn({left:t,top:e,radius:7,fill:"#111",originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return n.on("moving",this.update),n}createStop(t,e){const n=this.pointAt(t),a=new Fn({left:n.x,top:n.y,radius:6,fill:e,originX:"center",originY:"center",selectable:!0,hasControls:!1,hasBorders:!1,excludeFromExport:!0});return a.offset=t,a.on("moving",()=>{const o=I_(new Tt(a.left,a.top),new Tt(this.start.left,this.start.top),new Tt(this.end.left,this.end.top));a.offset=o;const d=this.pointAt(o);a.set({left:d.x,top:d.y}),this.update()}),a.on("mousedown",o=>{o.e.stopPropagation(),this.setActiveStop(a)}),a.on("mousedblclick",o=>{o.e.preventDefault(),this.removeStop(a)}),this.stops.push(a),a}removeStop(t){this.stops.length<=2||(this.canvas.remove(t),this.stops=this.stops.filter(e=>e!==t),this.activeStop===t&&(this.activeStop=this.stops[0]||null),this.update())}addStopFromEvent(t){const e=this.canvas.getPointer(t.e),n=I_(new Tt(e.x,e.y),new Tt(this.start.left,this.start.top),new Tt(this.end.left,this.end.top)),a=this.createStop(n,this.getColor());this.canvas.add(a),this.setActiveStop(a),this.update()}setActiveStop(t){this.activeStop=t,this.stops.forEach(e=>e.set("stroke",e===t?"#000":void 0)),this.canvas.requestRenderAll()}updateActiveColor(t){this.activeStop&&(this.activeStop.set("fill",t),this.update())}toggleGradientType(){this.gradientType=this.gradientType==="linear"?"radial":"linear",this.update()}update=()=>{if(!this.activeObj)return;this.line.set({x1:this.start.left,y1:this.start.top,x2:this.end.left,y2:this.end.top}),this.stops.forEach(o=>{const d=this.pointAt(o.offset);o.set({left:d.x,top:d.y})});const t=F_(this.activeObj,new Tt(this.start.left,this.start.top)),e=F_(this.activeObj,new Tt(this.end.left,this.end.top)),n=this.stops.sort((o,d)=>o.offset-d.offset).map(o=>({offset:o.offset,color:o.fill})),a=this.gradientType==="linear"?new pr({type:"linear",gradientUnits:"pixels",coords:{x1:t.x,y1:t.y,x2:e.x,y2:e.y},colorStops:n}):new pr({type:"radial",gradientUnits:"pixels",coords:{x1:t.x,y1:t.y,r1:0,x2:e.x,y2:e.y,r2:Math.hypot(e.x-t.x,e.y-t.y)},colorStops:n});this.activeObj.set("fill",a),this.canvas.requestRenderAll()};pointAt(t){return{x:this.start.left+(this.end.left-this.start.left)*t,y:this.start.top+(this.end.top-this.start.top)*t}}cleanup(){this.canvas.remove(this.start,this.end,this.line,...this.stops),this.stops=[],this.activeStop=null,this.activeObj=null}syncFromObject(t){return t.fill instanceof pr?(this.gradientType=t.fill.type,this.gradientType):(this.disable(),null)}}function pT(l,t){const e=l.canvas,n=l.getCenterPoint();t.scaleX*=l.scaleX,t.scaleY*=l.scaleY,l.scaleX=1,l.scaleY=1,l.remove(t),t.set({left:n.x,top:n.y,angle:l.angle,flipX:l.flipX,flipY:l.flipY,originX:"center",originY:"center"}),e.remove(l),e.add(t),e.setActiveObject(t),t.enterEditing(),t.selectAll(),t.setCoords(),e.requestRenderAll()}const mT=(l,t)=>({canvas:null,activeTool:"select",isPanning:!1,isDrawingMode:!1,freeDrawingBrush:null,activePanel:null,selectedObject:"textbox",showTextToolbar:!0,hasActiveShape:!1,geditor:null,hasMultipleSelection:()=>{const e=t().canvas;return e?e.getActiveObjects().length>1:!1},init:async e=>{if(t().canvas)return;const n=new Yu(e,{backgroundColor:dT.bg,preserveObjectStacking:!1});t().saveState(),l({canvas:n}),t().setPageFormat(hT,lT),t().enablePan(),t().setBrush();const a=new cb(n,()=>t().fill);l({geditor:a});const o=d=>{const p=d.target;l({hasActiveShape:!!p}),t().setToolbar(d),t().updateFromFabric(p)};n.on("selection:created",d=>o(d)),n.on("selection:updated",d=>o(d)),n.on("selection:cleared",()=>{t().clearToolbar()}),n.on("mouse:down",d=>o(d)),n.on("mouse:dblclick",d=>{const p=d.target;!p||p.type!=="group"||!p.__text||(console.log(p.__text),pT(p,p.__text),p.__text.on("changed",function(){const v=this.__group;if(!v)return;const b=v.__box;if(!b)return;const C=20;b.width=Math.max(this.width+C,b.width),b.height=Math.max(this.height+C,b.height),window.gradientEditor=a,v.setCoords(),n.requestRenderAll()}),p.__text.on("editing:exited",function(){const v=this.canvas,b=this.__group;if(!b)return;const C=this.getCenterPoint();this.scaleX/=b.scaleX||1,this.scaleY/=b.scaleY||1,b.add(this),b.set({left:C.x,top:C.y,angle:this.angle,flipX:this.flipX,flipY:this.flipY,scaleX:1,scaleY:1}),v.remove(this),v.add(b),v.setActiveObject(b),b.setCoords(),v.requestRenderAll()}))}),n.on("object:modified",d=>o(d))},init1:async e=>{if(t().canvas)return;const n=new Yu(e,{backgroundColor:"#fff",preserveObjectStacking:!1});t().saveState(),l({canvas:n}),t().enablePan(),t().setPageFormat(uT,cT),t().setBrush();const a=v=>{!v||t()._isRestoring||(t().updateFromFabric(v),t().saveState())},o=(v,b=!1)=>{v?.type==="textbox"?(l({selectedObject:v,showTextToolbar:!0,isEditingText:b}),t().syncFromObject(v)):l({selectedObject:"shape"})},d=()=>{l({selectedObject:null,showTextToolbar:!1,isEditingText:!1})};Object.entries({"object:removed":v=>a(v.target),"selection:created":v=>o(v.target),"selection:updated":v=>o(v.target),"selection:cleared":()=>d(),"mouse:down":v=>o(v.target),"path:created":v=>{const b=v.path;console.log("New path created:",b),t().updateFromFabric(b),t().saveState()}}).forEach(([v,b])=>{n.on(v,b)})},setCanvas:e=>{l({canvas:e}),e&&(e.freeDrawingBrush=new ro(e),e.freeDrawingBrush.color="#000",e.freeDrawingBrush.width=2,t().enablePan(),t().setPageFormat("Freehand","landscape"),e.on("path:created",()=>t().pushState()),e.on("object:added",n=>{const a=n.target||null;a&&(l({selectedObject:a}),t().syncFromObject(a))}),e.on("selection:created",n=>{const a=n.selected?.[0]||null;l({selectedObject:a}),t().syncFromObject(a)}),e.on("selection:updated",n=>{const a=n.selected?.[0]||null;l({selectedObject:a}),t().syncFromObject(a)}),e.on("selection:cleared",()=>{l({selectedObject:null}),t().syncFromObject(null)}),e.on("object:modified",n=>{const a=n.target||null;l({selectedObject:a}),t().syncFromObject(a)}),e.on("before:transform",n=>{n.target?.type==="textbox"&&l({showTextToolbar:!1})}),e.on("object:scaling",n=>{console.log("Scaling:",n.target?.type)}),e.on("after:transform",n=>{const a=n.target||null;a?.type==="textbox"&&(l({showTextToolbar:!0,selectedObject:a}),t().syncFromObject(a))}))},setSelectedObject:()=>{l({selectedObject:!1})},setActiveTool:e=>{const n=t().canvas;if(n){switch(l({activeTool:e}),e){case"pan":n.isDrawingMode=!1,n.defaultCursor="grab",n.selection=!1,n.skipTargetFind=!0;break;case"draw":console.log("here"),n.isDrawingMode=!0,n.freeDrawingBrush.color="#000";break;case"select":default:n.isDrawingMode=!1,n.defaultCursor="default",n.selection=!0,n.skipTargetFind=!1;break}n.requestRenderAll()}},enablePan:()=>{const e=t().canvas;e&&(console.log("Pan tool enabled"),e.on("mouse:wheel",n=>{const a=n.e;let o=e.getZoom();const d=Math.pow(.999,a.deltaY);o*=d,o=Math.min(Math.max(o,.1),5);const p=new Tt(a.offsetX,a.offsetY);e.zoomToPoint(p,o),a.preventDefault(),a.stopPropagation()}),e.on("mouse:down",()=>{t().activeTool==="pan"&&(l({isPanning:!0}),e.setCursor("grabbing"),e.requestRenderAll())}),e.on("mouse:move",n=>{if(!t().isPanning)return;const a=n.e;e.relativePan(new Tt(a.movementX,a.movementY)),e.requestRenderAll()}),e.on("mouse:up",()=>{t().isPanning&&(l({isPanning:!1}),e.setCursor("grab"),e.requestRenderAll())}))},syncFromObject:e=>{e&&l({fill:e.fill||"#ffffff",stroke:e.stroke||"#111827",strokeWidth:e.strokeWidth||2,strokeStyle:e.strokeDashArray?e.strokeDashArray[0]===10?"dashed":"dotted":"solid"})},updateTextStyle:e=>{const n=t().canvas,a=t().selectedObject;!n||!a||a.type!=="textbox"||(e.fontSize&&a.set("fontSize",e.fontSize),e.fill&&a.set("fill",e.fill),e.bold!==void 0&&a.set("fontWeight",e.bold?"bold":"normal"),e.italic!==void 0&&a.set("fontStyle",e.italic?"italic":"normal"),e.underline!==void 0&&a.set("underline",e.underline),n.renderAll(),t().pushState())},clearBoard:()=>{const e=t().canvas;e&&(nT.local.clear(),e.clear(),e.backgroundColor="#FFF",e.requestRenderAll())},clearToolbar:()=>{l({selectedObject:null,showTextToolbar:!1,isEditingText:!1,hasActiveShape:!1})},setToolbar:(e,n=!1)=>{let a=e.target;a?.type==="textbox"?(l({selectedObject:a,showTextToolbar:!0,isEditingText:n}),t().syncFromObject(a)):a?.customType==="shape"||e?.selected?.length>0||a?.type=="group"||a?.type=="activeselection"?l({selectedObject:"shape"}):l({selectedObject:null})}}),vT=(l,t)=>({toolbarPosition:"left",isFullScreen:!1,setToolbarPosition:e=>l({toolbarPosition:e}),toggleFullscreen:()=>{const e=document.documentElement;document.fullscreenElement?(document.exitFullscreen?.(),l({isFullScreen:!1})):(e.requestFullscreen?.(),l({isFullScreen:!0}))},zoomIn:()=>{const e=t().canvas;if(!e)return;const n=new Tt(e.width/2,e.height/2),a=Math.min(e.getZoom()*1.1,5);e.zoomToPoint(n,a),e.requestRenderAll()},zoomOut:()=>{const e=t().canvas;if(!e)return;const n=new Tt(e.width/2,e.height/2),a=Math.max(e.getZoom()/1.1,.1);e.zoomToPoint(n,a),e.requestRenderAll()},zoomFit:()=>{const e=t().canvas;if(!e)return;const n=e.getObjects().filter(it=>it.visible);if(n.length===0){const it=e.viewportTransform,$=1;it[0]=$,it[3]=$,it[4]=0,it[5]=0,e.setViewportTransform(it),e.requestRenderAll();return}let a=1/0,o=1/0,d=-1/0,p=-1/0;n.forEach(it=>{const $=it.getBoundingRect(!0,!0);a=Math.min(a,$.left),o=Math.min(o,$.top),d=Math.max(d,$.left+$.width),p=Math.max(p,$.top+$.height)});const v={left:a,top:o,width:d-a,height:p-o},b=20,C=e.width-b*2,M=e.height-b*2;let F=Math.min(C/v.width,M/v.height);F=Math.min(Math.max(F,.1),5);const E=v.left+v.width/2,X=v.top+v.height/2,z=e.viewportTransform;z[0]=F,z[3]=F,z[4]=e.width/2-E*F,z[5]=e.height/2-X*F,e.setViewportTransform(z),e.requestRenderAll()}}),_T=(l,t)=>({layers:[],setLayers:e=>l({layers:e}),addLayer:(e,n)=>{const a=t().layers||[],o=e.toObject().id||Date.now();l({layers:[...a,{id:o,type:n,object:e,name:n,visible:!0,locked:!1}]}),t().canvas?.requestRenderAll()},renameLayer:(e,n)=>{const a=t().layers.map(o=>(o.id===e&&(o.name=n),o));l({layers:a})},removeLayer:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();if(!n||n.length===0)return;const a=t().layers.filter(o=>!n.includes(o.object));l({layers:a}),n.forEach(o=>e.remove(o)),e.discardActiveObject(),e.requestRenderAll()},toggleVisibility:e=>{const n=t().layers.map(a=>(a.id===e&&(a.visible=!a.visible,a.object&&(a.object.visible=a.visible)),a));l({layers:n}),t().canvas?.requestRenderAll()},duplicateLayer:e=>{const n=t().layers.find(a=>a.id===e);n?.object&&n.object.clone(a=>{a.set({left:n.object.left+10,top:n.object.top+10,id:Date.now()}),t().canvas.add(a),t().canvas.setActiveObject(a),t().canvas.requestRenderAll();const o=t().layers;l({layers:[...o,{id:a.id,type:n.type,name:n.name+"_copy",object:a}]})})},toggleLayerLock:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObject();if(!n)return;const a=t().layers.map(o=>{if(o.object===n){const d=!o.locked;return n.selectable=!d,n.evented=!d,{...o,locked:d}}return o});console.log(t().layers),l({layers:a})},isActiveObjectLocked:()=>t().selectedObject?._locked===!0,toggleActiveObjectLock:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObject();if(!n)return;!n._locked?(n.lockMovementX=!0,n.lockMovementY=!0,n.lockScalingX=!0,n.lockScalingY=!0,n.lockRotation=!0,n.hasControls=!1,n._locked=!0):(n.lockMovementX=!1,n.lockMovementY=!1,n.lockScalingX=!1,n.lockScalingY=!1,n.lockRotation=!1,n.hasControls=!0,n._locked=!1),e.renderAll()},bringForward:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();if(!n.length)return;n.sort((o,d)=>e.getObjects().indexOf(o)-e.getObjects().indexOf(d)).forEach(o=>e.bringObjectForward(o)),e.requestRenderAll()},sendBackward:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();if(!n.length)return;n.sort((o,d)=>e.getObjects().indexOf(d)-e.getObjects().indexOf(o)).forEach(o=>e.sendObjectBackwards(o)),e.requestRenderAll()},bringToFront:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();if(!n.length)return;n.sort((o,d)=>e.getObjects().indexOf(o)-e.getObjects().indexOf(d)).forEach(o=>e.bringToFront(o)),e.requestRenderAll()},sendToBack:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();if(!n.length)return;n.sort((o,d)=>e.getObjects().indexOf(d)-e.getObjects().indexOf(o)).forEach(o=>e.sendToBack(o)),e.requestRenderAll()},deleteObject:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObjects();n&&(n.forEach(a=>e.remove(a)),e.discardActiveObject(),e.requestRenderAll())},groupLayers:e=>{const n=t().canvas;if(!n)return;const a=n.getActiveObjects();t().deleteObject();const o=new mn(a);n.add(o),n.requestRenderAll()},ungroupSelected:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObject();n&&(e.remove(n),e.add(...n.removeAll()),e.requestRenderAll())},groupLayers1:e=>{const n=t(),a="group-"+Date.now(),o={id:a,name:"Group",visible:!0,locked:!1,parentId:null},d=n.layers.map(p=>e.includes(p.id)?{...p,parentId:a}:p);l({layers:[...d,o]})},ungroupLayers1:e=>{const a=t().layers.map(o=>e.includes(o.id)&&o.children?.length?null:e.includes(o.parentId)?{...o,parentId:null}:o).filter(Boolean);l({layers:a})},alignLayers:(e,n)=>{const a=t();if(!n.length)return;const o=a.layers.filter(v=>n.includes(v.id));let d;switch(e){case"left":d=Math.min(...o.map(v=>v.x||0));break;case"center":d=Math.round(o.reduce((v,b)=>v+(b.x||0),0)/o.length);break;case"right":d=Math.max(...o.map(v=>(v.x||0)+(v.width||0)));break;default:return}const p=a.layers.map(v=>n.includes(v.id)?{...v,x:e==="right"?d-(v.width||0):d}:v);l({layers:p})},distributeLayers:(e,n)=>{const a=t(),o=a.layers.filter(d=>n.includes(d.id));if(!(o.length<3)){if(e==="horizontal"){const d=o.sort((M,F)=>(M.x||0)-(F.x||0)),p=d[0].x||0,b=((d[d.length-1].x||0)-p)/(d.length-1),C=a.layers.map(M=>{const F=d.findIndex(E=>E.id===M.id);return F>=0?{...M,x:p+b*F}:M});l({layers:C})}if(e==="vertical"){const d=o.sort((M,F)=>(M.y||0)-(F.y||0)),p=d[0].y||0,b=((d[d.length-1].y||0)-p)/(d.length-1),C=a.layers.map(M=>{const F=d.findIndex(E=>E.id===M.id);return F>=0?{...M,y:p+b*F}:M});l({layers:C})}}},clipboard:null,copy:()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObject();n&&n.clone().then(a=>{l({clipboard:a})})},paste:async()=>{const e=t().canvas,n=t().clipboard;if(!e||!n)return;const a=await n.clone();e.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0,customType:"shape"}),a.type==="activeSelection"?(a.canvas=e,a.forEachObject(o=>e.add(o)),a.setCoords()):e.add(a),l({clipboard:a}),e.setActiveObject(a),e.requestRenderAll()},duplicate:async()=>{const e=t().canvas;if(!e)return;const n=e.getActiveObject();if(!n)return;const a=await n.clone();e.discardActiveObject(),a.set({left:a.left+10,top:a.top+10,evented:!0}),console.log(a.type),a.type==="activeselection"?(a.canvas=e,a.forEachObject(o=>e.add(o)),a.setCoords()):e.add(a),l({clipboard:a}),e.setActiveObject(a),e.requestRenderAll()},alignObjects:e=>{const n=t().canvas;if(!n)return;const a=n.getActiveObjects();if(!a||a.length<2)return;const o=a.map(X=>({o:X,box:X.getBoundingRect(!0,!0)})),d=Math.min(...o.map(X=>X.box.left)),p=Math.max(...o.map(X=>X.box.left+X.box.width)),v=Math.min(...o.map(X=>X.box.top)),b=Math.max(...o.map(X=>X.box.top+X.box.height)),C=p-d,M=b-v,F=(X,z)=>{const it=X-z.box.left;z.o.set({left:z.o.left+it})},E=(X,z)=>{const it=X-z.box.top;z.o.set({top:z.o.top+it})};switch(console.log("key..",e),e){case"align-left":o.forEach(X=>F(d,X));break;case"align-hcenter":{const X=d+C/2;o.forEach(z=>{const it=X-z.box.width/2;F(it,z)});break}case"align-right":o.forEach(X=>{const z=p-X.box.width;F(z,X)});break;case"align-top":o.forEach(X=>E(v,X));break;case"align-vcenter":{const X=v+M/2;o.forEach(z=>{const it=X-z.box.height/2;E(it,z)});break}case"align-bottom":o.forEach(X=>{const z=b-X.box.height;E(z,X)});break;case"distribute-h":{const X=[...o].sort((lt,gt)=>lt.box.left-gt.box.left);if(X.length<3)break;const z=X[0].box.left+X[0].box.width/2,$=(X[X.length-1].box.left+X[X.length-1].box.width/2-z)/(X.length-1);X.forEach((lt,gt)=>{const St=z+$*gt-lt.box.width/2;F(St,lt)});break}case"distribute-v":{const X=[...o].sort((lt,gt)=>lt.box.top-gt.box.top);if(X.length<3)break;const z=X[0].box.top+X[0].box.height/2,$=(X[X.length-1].box.top+X[X.length-1].box.height/2-z)/(X.length-1);X.forEach((lt,gt)=>{const St=z+$*gt-lt.box.height/2;E(St,lt)});break}}a.forEach(X=>X.setCoords()),n.requestRenderAll()},distributeObjects:e=>{const{canvas:n}=t();if(!n)return;const a=n.getActiveObjects();if(a.length<3)return;e==="horizontal"?a.sort((p,v)=>p.left-v.left):a.sort((p,v)=>p.top-v.top);const o=a[0],d=a[a.length-1];if(e==="horizontal"){const v=(d.left-o.left-(o.getScaledWidth()+d.getScaledWidth())/2)/(a.length-1);a.forEach((b,C)=>{C!==0&&C!==a.length-1&&(b.set({left:o.left+C*v}),b.setCoords())})}else{const v=(d.top-o.top-(o.getScaledHeight()+d.getScaledHeight())/2)/(a.length-1);a.forEach((b,C)=>{C!==0&&C!==a.length-1&&(b.set({top:o.top+C*v}),b.setCoords())})}n.requestRenderAll()},canPaste(){return!!this.clipboard},isGroupSelected(){const e=t().canvas?.getActiveObject();return e?e.type==="group"||Array.isArray(e._objects):!1}}),yT=(l,t)=>({pageFormat:"Freehand",orientation:"landscape",zoom:1,scale:1,setPageFormat:(e,n="portrait")=>{l({pageFormat:e,orientation:n}),t().applyPageSize(e,n)},setOrientation:e=>{l({orientation:e}),t().applyPageSize(t().pageFormat,e)},setZoom:e=>{const n=t().canvas;n&&(n.setZoom(e),l({zoom:e}),t().drawBackground(),n.renderAll())},applyPageSize:(e=t().pageFormat,n=t().orientation)=>{const a=t().canvas;if(!a)return;if(String(e||"").toLowerCase()==="freehand"){a.setWidth(window.innerWidth*2),a.setHeight(window.innerHeight*2),a.setZoom(1),a.calcOffset(),a.renderAll(),l({scale:1,pageWidth:a.getWidth(),pageHeight:a.getHeight()});return}console.log(e);const{w:d,h:p}=fT[e],v=n==="portrait"?d:p,b=n==="portrait"?p:d,M=800/v;a.setWidth(v*M),a.setHeight(b*M),a.setZoom(M),a.calcOffset(),a.renderAll(),l({scale:M,pageWidth:v,pageHeight:b}),t().drawBackground()}}),gf=()=>EC,bT=({get:l})=>{const t=gf(),e=Math.max(2,l().gridSize),n=Math.max(1,l().gridMajorEvery),a=e*n,o=document.createElement("canvas");o.width=o.height=a;const d=o.getContext("2d");if(!d)return null;const p=(v,b,C,M,F,E)=>{d.beginPath(),d.moveTo(v+.5,b+.5),d.lineTo(C+.5,M+.5),d.lineWidth=F,d.strokeStyle=E,d.stroke()};for(let v=1;v<n;v++){const b=v*e;p(b,0,b,a,l().gridLineWidth,l().gridColor),p(0,b,a,b,l().gridLineWidth,l().gridColor)}return p(a-1,0,a-1,a,l().gridMajorLineWidth,l().gridMajorColor),p(0,a-1,a,a-1,l().gridMajorLineWidth,l().gridMajorColor),new t.Pattern({source:o,repeat:"repeat"})},xT=({get:l})=>{const t=gf(),e=Math.max(2,l().ruledLineHeight),n=document.createElement("canvas");n.width=2,n.height=e;const a=n.getContext("2d");return a?(a.beginPath(),a.moveTo(0,e-1+.5),a.lineTo(n.width,e-1+.5),a.lineWidth=l().ruledLineWidth,a.strokeStyle=l().ruledColor,a.stroke(),new t.Pattern({source:n,repeat:"repeat"})):null},ST=({get:l})=>{const t=gf(),e=Math.max(6,l().gridSize),n=document.createElement("canvas");n.width=n.height=e;const a=n.getContext("2d");return a?(a.beginPath(),a.arc(1,1,1,0,Math.PI*2),a.fillStyle=l().gridColor,a.fill(),new t.Pattern({source:n,repeat:"repeat"})):null},wT=({get:l})=>{const t=gf(),e=Math.max(16,l().gridSize*2),n=document.createElement("canvas");n.width=n.height=e;const a=n.getContext("2d");return a?(a.strokeStyle=l().gridColor,a.lineWidth=1,a.beginPath(),a.moveTo(0,e),a.lineTo(e/2,0),a.lineTo(e,e),a.stroke(),new t.Pattern({source:n,repeat:"repeat"})):null},CT={none:null,grid:bT,ruled:xT,dots:ST,isometric:wT},TT=(l,t)=>({backgroundStyle:"none",gridSize:20,gridColor:"#e0e0e0",gridMajorEvery:5,gridMajorColor:"#bdbdbd",gridLineWidth:1,gridMajorLineWidth:1,ruledLineHeight:24,ruledColor:"#c0d6ff",ruledLineWidth:1,setBackgroundStyle:e=>{l({backgroundStyle:e}),t().drawBackground()},toggleGrid:()=>{const e=t().backgroundStyle==="grid"?"none":"grid";l({backgroundStyle:e}),t().drawBackground()},setGridOptions:e=>{l(e),t().drawBackground()},setRuledOptions:e=>{l(e),t().drawBackground()},drawBackground:()=>{const e=t().canvas;if(!e)return;const n=t().backgroundStyle,a=CT[n];if(!a){e.backgroundColor=null,e.requestRenderAll();return}const o=a({get:t});e.backgroundColor=o||null,e.requestRenderAll()}}),kT=[{id:"newfile",description:"New File",shortcut:["Meta+n","Ctrl+n"],handler:({get:l,set:t})=>{const{clearBoard:e}=l();e()}},{id:"copy",description:"Copy selected object",shortcut:["Meta+c","Ctrl+c"],handler:({get:l,set:t})=>{const{copy:e}=l();e()}},{id:"paste",description:"Paste object",shortcut:["Meta+v","Ctrl+v"],handler:({get:l,set:t})=>{const{paste:e}=l();e()}},{id:"duplicate",description:"Duplicate object",shortcut:["Meta+D","Ctrl+D"],handler:({get:l,set:t})=>{const{duplicate:e}=l();e()}},{id:"delete",description:"Delete selected object",shortcut:["Delete","Backspace"],handler:({get:l,set:t})=>{const{removeLayer:e}=l();e()}},{id:"group",description:"Group selected object",shortcut:["Meta+G","Ctrl+G"],handler:({get:l,set:t})=>{const{groupLayers:e}=l();e()}},{id:"ungroup",description:"Ungroup selected object",shortcut:["Meta+Shift+U","Ctrl+Shift+U"],handler:({get:l,set:t})=>{const{ungroupSelected:e}=l();e()}},{id:"undo",description:"Undo",shortcut:["Meta+Z","Ctrl+Z"],handler:({get:l,set:t})=>{const{undo:e}=l();e()}},{id:"redo",description:"Redo",shortcut:["Meta+Shift+Z","Ctrl+Y"],handler:({get:l,set:t})=>{const{redo:e}=l();e()}}],OT=(l,t)=>({commands:kT.map(n=>({...n,handler:()=>n.handler({get:t,set:l})})),runCommand:n=>{const a=t().commands.find(o=>o.id===n);a&&a.handler()}}),AT=(l,t)=>({brush:"pencil",width:4,color:"#000",cursor:"crosshair",setBrush:(e={})=>{const n=t().canvas;if(!n)return;const a={pencil:()=>new ro(n),circle:()=>new V1(n),spray:()=>new U1(n),pattern:()=>new H1(n),eraser:()=>new(void 0)(n)},o=e?.brush??t().brush,d=a[o]?a[o]():a.pencil(),p=e?.color??t().color,v=e?.width??t().width,b=e.cursor??"url('/pencil.svg') 0 32, crosshair";d.color=p,d.width=v,n.freeDrawingBrush=d,n.freeDrawingCursor=b,l({brush:o,color:p,width:v,cursor:b}),n.renderAll()},setBrushWidth:(e={})=>{const n=t().canvas;if(!n)return;console.log(e);const a=e?.width??t().width;n.freeDrawingBrush.width=a,l({width:a})},setBrushColor:(e={})=>{const n=t().canvas;if(!n)return;console.log(e);const a=e?.color??t().color;n.freeDrawingBrush.color=a,l({color:a})}});var hb={inherit:"inherit",current:"currentcolor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"oklch(98.4% 0.003 247.858)",100:"oklch(96.8% 0.007 247.896)",200:"oklch(92.9% 0.013 255.508)",300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)",700:"oklch(37.2% 0.044 257.287)",800:"oklch(27.9% 0.041 260.031)",900:"oklch(20.8% 0.042 265.755)",950:"oklch(12.9% 0.042 264.695)"},gray:{50:"oklch(98.5% 0.002 247.839)",100:"oklch(96.7% 0.003 264.542)",200:"oklch(92.8% 0.006 264.531)",300:"oklch(87.2% 0.01 258.338)",400:"oklch(70.7% 0.022 261.325)",500:"oklch(55.1% 0.027 264.364)",600:"oklch(44.6% 0.03 256.802)",700:"oklch(37.3% 0.034 259.733)",800:"oklch(27.8% 0.033 256.848)",900:"oklch(21% 0.034 264.665)",950:"oklch(13% 0.028 261.692)"},zinc:{50:"oklch(98.5% 0 0)",100:"oklch(96.7% 0.001 286.375)",200:"oklch(92% 0.004 286.32)",300:"oklch(87.1% 0.006 286.286)",400:"oklch(70.5% 0.015 286.067)",500:"oklch(55.2% 0.016 285.938)",600:"oklch(44.2% 0.017 285.786)",700:"oklch(37% 0.013 285.805)",800:"oklch(27.4% 0.006 286.033)",900:"oklch(21% 0.006 285.885)",950:"oklch(14.1% 0.005 285.823)"},neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},stone:{50:"oklch(98.5% 0.001 106.423)",100:"oklch(97% 0.001 106.424)",200:"oklch(92.3% 0.003 48.717)",300:"oklch(86.9% 0.005 56.366)",400:"oklch(70.9% 0.01 56.259)",500:"oklch(55.3% 0.013 58.071)",600:"oklch(44.4% 0.011 73.639)",700:"oklch(37.4% 0.01 67.558)",800:"oklch(26.8% 0.007 34.298)",900:"oklch(21.6% 0.006 56.043)",950:"oklch(14.7% 0.004 49.25)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},orange:{50:"oklch(98% 0.016 73.684)",100:"oklch(95.4% 0.038 75.164)",200:"oklch(90.1% 0.076 70.697)",300:"oklch(83.7% 0.128 66.29)",400:"oklch(75% 0.183 55.934)",500:"oklch(70.5% 0.213 47.604)",600:"oklch(64.6% 0.222 41.116)",700:"oklch(55.3% 0.195 38.402)",800:"oklch(47% 0.157 37.304)",900:"oklch(40.8% 0.123 38.172)",950:"oklch(26.6% 0.079 36.259)"},amber:{50:"oklch(98.7% 0.022 95.277)",100:"oklch(96.2% 0.059 95.617)",200:"oklch(92.4% 0.12 95.746)",300:"oklch(87.9% 0.169 91.605)",400:"oklch(82.8% 0.189 84.429)",500:"oklch(76.9% 0.188 70.08)",600:"oklch(66.6% 0.179 58.318)",700:"oklch(55.5% 0.163 48.998)",800:"oklch(47.3% 0.137 46.201)",900:"oklch(41.4% 0.112 45.904)",950:"oklch(27.9% 0.077 45.635)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},lime:{50:"oklch(98.6% 0.031 120.757)",100:"oklch(96.7% 0.067 122.328)",200:"oklch(93.8% 0.127 124.321)",300:"oklch(89.7% 0.196 126.665)",400:"oklch(84.1% 0.238 128.85)",500:"oklch(76.8% 0.233 130.85)",600:"oklch(64.8% 0.2 131.684)",700:"oklch(53.2% 0.157 131.589)",800:"oklch(45.3% 0.124 130.933)",900:"oklch(40.5% 0.101 131.063)",950:"oklch(27.4% 0.072 132.109)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},emerald:{50:"oklch(97.9% 0.021 166.113)",100:"oklch(95% 0.052 163.051)",200:"oklch(90.5% 0.093 164.15)",300:"oklch(84.5% 0.143 164.978)",400:"oklch(76.5% 0.177 163.223)",500:"oklch(69.6% 0.17 162.48)",600:"oklch(59.6% 0.145 163.225)",700:"oklch(50.8% 0.118 165.612)",800:"oklch(43.2% 0.095 166.913)",900:"oklch(37.8% 0.077 168.94)",950:"oklch(26.2% 0.051 172.552)"},teal:{50:"oklch(98.4% 0.014 180.72)",100:"oklch(95.3% 0.051 180.801)",200:"oklch(91% 0.096 180.426)",300:"oklch(85.5% 0.138 181.071)",400:"oklch(77.7% 0.152 181.912)",500:"oklch(70.4% 0.14 182.503)",600:"oklch(60% 0.118 184.704)",700:"oklch(51.1% 0.096 186.391)",800:"oklch(43.7% 0.078 188.216)",900:"oklch(38.6% 0.063 188.416)",950:"oklch(27.7% 0.046 192.524)"},cyan:{50:"oklch(98.4% 0.019 200.873)",100:"oklch(95.6% 0.045 203.388)",200:"oklch(91.7% 0.08 205.041)",300:"oklch(86.5% 0.127 207.078)",400:"oklch(78.9% 0.154 211.53)",500:"oklch(71.5% 0.143 215.221)",600:"oklch(60.9% 0.126 221.723)",700:"oklch(52% 0.105 223.128)",800:"oklch(45% 0.085 224.283)",900:"oklch(39.8% 0.07 227.392)",950:"oklch(30.2% 0.056 229.695)"},sky:{50:"oklch(97.7% 0.013 236.62)",100:"oklch(95.1% 0.026 236.824)",200:"oklch(90.1% 0.058 230.902)",300:"oklch(82.8% 0.111 230.318)",400:"oklch(74.6% 0.16 232.661)",500:"oklch(68.5% 0.169 237.323)",600:"oklch(58.8% 0.158 241.966)",700:"oklch(50% 0.134 242.749)",800:"oklch(44.3% 0.11 240.79)",900:"oklch(39.1% 0.09 240.876)",950:"oklch(29.3% 0.066 243.157)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"},indigo:{50:"oklch(96.2% 0.018 272.314)",100:"oklch(93% 0.034 272.788)",200:"oklch(87% 0.065 274.039)",300:"oklch(78.5% 0.115 274.713)",400:"oklch(67.3% 0.182 276.935)",500:"oklch(58.5% 0.233 277.117)",600:"oklch(51.1% 0.262 276.966)",700:"oklch(45.7% 0.24 277.023)",800:"oklch(39.8% 0.195 277.366)",900:"oklch(35.9% 0.144 278.697)",950:"oklch(25.7% 0.09 281.288)"},violet:{50:"oklch(96.9% 0.016 293.756)",100:"oklch(94.3% 0.029 294.588)",200:"oklch(89.4% 0.057 293.283)",300:"oklch(81.1% 0.111 293.571)",400:"oklch(70.2% 0.183 293.541)",500:"oklch(60.6% 0.25 292.717)",600:"oklch(54.1% 0.281 293.009)",700:"oklch(49.1% 0.27 292.581)",800:"oklch(43.2% 0.232 292.759)",900:"oklch(38% 0.189 293.745)",950:"oklch(28.3% 0.141 291.089)"},purple:{50:"oklch(97.7% 0.014 308.299)",100:"oklch(94.6% 0.033 307.174)",200:"oklch(90.2% 0.063 306.703)",300:"oklch(82.7% 0.119 306.383)",400:"oklch(71.4% 0.203 305.504)",500:"oklch(62.7% 0.265 303.9)",600:"oklch(55.8% 0.288 302.321)",700:"oklch(49.6% 0.265 301.924)",800:"oklch(43.8% 0.218 303.724)",900:"oklch(38.1% 0.176 304.987)",950:"oklch(29.1% 0.149 302.717)"},fuchsia:{50:"oklch(97.7% 0.017 320.058)",100:"oklch(95.2% 0.037 318.852)",200:"oklch(90.3% 0.076 319.62)",300:"oklch(83.3% 0.145 321.434)",400:"oklch(74% 0.238 322.16)",500:"oklch(66.7% 0.295 322.15)",600:"oklch(59.1% 0.293 322.896)",700:"oklch(51.8% 0.253 323.949)",800:"oklch(45.2% 0.211 324.591)",900:"oklch(40.1% 0.17 325.612)",950:"oklch(29.3% 0.136 325.661)"},pink:{50:"oklch(97.1% 0.014 343.198)",100:"oklch(94.8% 0.028 342.258)",200:"oklch(89.9% 0.061 343.231)",300:"oklch(82.3% 0.12 346.018)",400:"oklch(71.8% 0.202 349.761)",500:"oklch(65.6% 0.241 354.308)",600:"oklch(59.2% 0.249 0.584)",700:"oklch(52.5% 0.223 3.958)",800:"oklch(45.9% 0.187 3.815)",900:"oklch(40.8% 0.153 2.432)",950:"oklch(28.4% 0.109 3.907)"},rose:{50:"oklch(96.9% 0.015 12.422)",100:"oklch(94.1% 0.03 12.58)",200:"oklch(89.2% 0.058 10.001)",300:"oklch(81% 0.117 11.638)",400:"oklch(71.2% 0.194 13.428)",500:"oklch(64.5% 0.246 16.439)",600:"oklch(58.6% 0.253 17.585)",700:"oklch(51.4% 0.222 16.935)",800:"oklch(45.5% 0.188 13.697)",900:"oklch(41% 0.159 10.272)",950:"oklch(27.1% 0.105 12.094)"}};function ET(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jh={exports:{}};const MT={},DT=Object.freeze(Object.defineProperty({__proto__:null,default:MT},Symbol.toStringTag,{value:"Module"})),V_=Dx(DT);var Du={exports:{}},jT=Du.exports,U_;function RT(){return U_||(U_=1,function(l,t){(function(e,n){n(t)})(jT,function(e){var n=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],a=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],o="-----------------------------------------------------------------------------------------------------------------------------------------------------",d="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",p={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},v="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",b={5:v,"5module":v+" export import",6:v+" const class extends export import super"},C=/^in(stanceof)?$/,M=new RegExp("["+d+"]"),F=new RegExp("["+d+o+"]");function E(h,x){for(var L=65536,G=0;G<x.length;G+=2){if(L+=x[G],L>h)return!1;if(L+=x[G+1],L>=h)return!0}return!1}function X(h,x){return h<65?h===36:h<91?!0:h<97?h===95:h<123?!0:h<=65535?h>=170&&M.test(String.fromCharCode(h)):x===!1?!1:E(h,a)}function z(h,x){return h<48?h===36:h<58?!0:h<65?!1:h<91?!0:h<97?h===95:h<123?!0:h<=65535?h>=170&&F.test(String.fromCharCode(h)):x===!1?!1:E(h,a)||E(h,n)}var it=function(x,L){L===void 0&&(L={}),this.label=x,this.keyword=L.keyword,this.beforeExpr=!!L.beforeExpr,this.startsExpr=!!L.startsExpr,this.isLoop=!!L.isLoop,this.isAssign=!!L.isAssign,this.prefix=!!L.prefix,this.postfix=!!L.postfix,this.binop=L.binop||null,this.updateContext=null};function $(h,x){return new it(h,{beforeExpr:!0,binop:x})}var lt={beforeExpr:!0},gt={startsExpr:!0},kt={};function St(h,x){return x===void 0&&(x={}),x.keyword=h,kt[h]=new it(h,x)}var V={num:new it("num",gt),regexp:new it("regexp",gt),string:new it("string",gt),name:new it("name",gt),privateId:new it("privateId",gt),eof:new it("eof"),bracketL:new it("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new it("]"),braceL:new it("{",{beforeExpr:!0,startsExpr:!0}),braceR:new it("}"),parenL:new it("(",{beforeExpr:!0,startsExpr:!0}),parenR:new it(")"),comma:new it(",",lt),semi:new it(";",lt),colon:new it(":",lt),dot:new it("."),question:new it("?",lt),questionDot:new it("?."),arrow:new it("=>",lt),template:new it("template"),invalidTemplate:new it("invalidTemplate"),ellipsis:new it("...",lt),backQuote:new it("`",gt),dollarBraceL:new it("${",{beforeExpr:!0,startsExpr:!0}),eq:new it("=",{beforeExpr:!0,isAssign:!0}),assign:new it("_=",{beforeExpr:!0,isAssign:!0}),incDec:new it("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new it("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:$("||",1),logicalAND:$("&&",2),bitwiseOR:$("|",3),bitwiseXOR:$("^",4),bitwiseAND:$("&",5),equality:$("==/!=/===/!==",6),relational:$("</>/<=/>=",7),bitShift:$("<</>>/>>>",8),plusMin:new it("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:$("%",10),star:$("*",10),slash:$("/",10),starstar:new it("**",{beforeExpr:!0}),coalesce:$("??",1),_break:St("break"),_case:St("case",lt),_catch:St("catch"),_continue:St("continue"),_debugger:St("debugger"),_default:St("default",lt),_do:St("do",{isLoop:!0,beforeExpr:!0}),_else:St("else",lt),_finally:St("finally"),_for:St("for",{isLoop:!0}),_function:St("function",gt),_if:St("if"),_return:St("return",lt),_switch:St("switch"),_throw:St("throw",lt),_try:St("try"),_var:St("var"),_const:St("const"),_while:St("while",{isLoop:!0}),_with:St("with"),_new:St("new",{beforeExpr:!0,startsExpr:!0}),_this:St("this",gt),_super:St("super",gt),_class:St("class",gt),_extends:St("extends",lt),_export:St("export"),_import:St("import",gt),_null:St("null",gt),_true:St("true",gt),_false:St("false",gt),_in:St("in",{beforeExpr:!0,binop:7}),_instanceof:St("instanceof",{beforeExpr:!0,binop:7}),_typeof:St("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:St("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:St("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Jt=/\r\n?|\n|\u2028|\u2029/,Wt=new RegExp(Jt.source,"g");function Zt(h){return h===10||h===13||h===8232||h===8233}function he(h,x,L){L===void 0&&(L=h.length);for(var G=x;G<L;G++){var st=h.charCodeAt(G);if(Zt(st))return G<L-1&&st===13&&h.charCodeAt(G+1)===10?G+2:G+1}return-1}var Pt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Yt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,_e=Object.prototype,Xt=_e.hasOwnProperty,Re=_e.toString,ut=Object.hasOwn||function(h,x){return Xt.call(h,x)},Gt=Array.isArray||function(h){return Re.call(h)==="[object Array]"},re=Object.create(null);function le(h){return re[h]||(re[h]=new RegExp("^(?:"+h.replace(/ /g,"|")+")$"))}function ft(h){return h<=65535?String.fromCharCode(h):(h-=65536,String.fromCharCode((h>>10)+55296,(h&1023)+56320))}var Ut=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ue=function(x,L){this.line=x,this.column=L};ue.prototype.offset=function(x){return new ue(this.line,this.column+x)};var ee=function(x,L,G){this.start=L,this.end=G,x.sourceFile!==null&&(this.source=x.sourceFile)};function fe(h,x){for(var L=1,G=0;;){var st=he(h,G,x);if(st<0)return new ue(L,x-G);++L,G=st}}var ge={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},pe=!1;function vi(h){var x={};for(var L in ge)x[L]=h&&ut(h,L)?h[L]:ge[L];if(x.ecmaVersion==="latest"?x.ecmaVersion=1e8:x.ecmaVersion==null?(!pe&&typeof console=="object"&&console.warn&&(pe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),x.ecmaVersion=11):x.ecmaVersion>=2015&&(x.ecmaVersion-=2009),x.allowReserved==null&&(x.allowReserved=x.ecmaVersion<5),(!h||h.allowHashBang==null)&&(x.allowHashBang=x.ecmaVersion>=14),Gt(x.onToken)){var G=x.onToken;x.onToken=function(st){return G.push(st)}}return Gt(x.onComment)&&(x.onComment=Ze(x,x.onComment)),x}function Ze(h,x){return function(L,G,st,wt,Et,Qt){var te={type:L?"Block":"Line",value:G,start:st,end:wt};h.locations&&(te.loc=new ee(this,Et,Qt)),h.ranges&&(te.range=[st,wt]),x.push(te)}}var Be=1,ze=2,$e=4,Rs=8,tr=16,Ls=32,ts=64,ho=128,Fi=256,es=512,is=Be|ze|Fi;function ns(h,x){return ze|(h?$e:0)|(x?Rs:0)}var ri=0,rs=1,Ye=2,Ta=3,Le=4,s=5,c=function(x,L,G){this.options=x=vi(x),this.sourceFile=x.sourceFile,this.keywords=le(b[x.ecmaVersion>=6?6:x.sourceType==="module"?"5module":5]);var st="";x.allowReserved!==!0&&(st=p[x.ecmaVersion>=6?6:x.ecmaVersion===5?5:3],x.sourceType==="module"&&(st+=" await")),this.reservedWords=le(st);var wt=(st?st+" ":"")+p.strict;this.reservedWordsStrict=le(wt),this.reservedWordsStrictBind=le(wt+" "+p.strictBind),this.input=String(L),this.containsEsc=!1,G?(this.pos=G,this.lineStart=this.input.lastIndexOf(`
`,G-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Jt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=V.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=x.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&x.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Be),this.regexpState=null,this.privateNameStack=[]},f={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};c.prototype.parse=function(){var x=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(x)},f.inFunction.get=function(){return(this.currentVarScope().flags&ze)>0},f.inGenerator.get=function(){return(this.currentVarScope().flags&Rs)>0},f.inAsync.get=function(){return(this.currentVarScope().flags&$e)>0},f.canAwait.get=function(){for(var h=this.scopeStack.length-1;h>=0;h--){var x=this.scopeStack[h],L=x.flags;if(L&(Fi|es))return!1;if(L&ze)return(L&$e)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},f.allowSuper.get=function(){var h=this.currentThisScope(),x=h.flags;return(x&ts)>0||this.options.allowSuperOutsideMethod},f.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ho)>0},f.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},f.allowNewDotTarget.get=function(){for(var h=this.scopeStack.length-1;h>=0;h--){var x=this.scopeStack[h],L=x.flags;if(L&(Fi|es)||L&ze&&!(L&tr))return!0}return!1},f.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Fi)>0},c.extend=function(){for(var x=[],L=arguments.length;L--;)x[L]=arguments[L];for(var G=this,st=0;st<x.length;st++)G=x[st](G);return G},c.parse=function(x,L){return new this(L,x).parse()},c.parseExpressionAt=function(x,L,G){var st=new this(G,x,L);return st.nextToken(),st.parseExpression()},c.tokenizer=function(x,L){return new this(L,x)},Object.defineProperties(c.prototype,f);var m=c.prototype,y=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;m.strictDirective=function(h){if(this.options.ecmaVersion<5)return!1;for(;;){Yt.lastIndex=h,h+=Yt.exec(this.input)[0].length;var x=y.exec(this.input.slice(h));if(!x)return!1;if((x[1]||x[2])==="use strict"){Yt.lastIndex=h+x[0].length;var L=Yt.exec(this.input),G=L.index+L[0].length,st=this.input.charAt(G);return st===";"||st==="}"||Jt.test(L[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(st)||st==="!"&&this.input.charAt(G+1)==="=")}h+=x[0].length,Yt.lastIndex=h,h+=Yt.exec(this.input)[0].length,this.input[h]===";"&&h++}},m.eat=function(h){return this.type===h?(this.next(),!0):!1},m.isContextual=function(h){return this.type===V.name&&this.value===h&&!this.containsEsc},m.eatContextual=function(h){return this.isContextual(h)?(this.next(),!0):!1},m.expectContextual=function(h){this.eatContextual(h)||this.unexpected()},m.canInsertSemicolon=function(){return this.type===V.eof||this.type===V.braceR||Jt.test(this.input.slice(this.lastTokEnd,this.start))},m.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},m.semicolon=function(){!this.eat(V.semi)&&!this.insertSemicolon()&&this.unexpected()},m.afterTrailingComma=function(h,x){if(this.type===h)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),x||this.next(),!0},m.expect=function(h){this.eat(h)||this.unexpected()},m.unexpected=function(h){this.raise(h??this.start,"Unexpected token")};var S=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};m.checkPatternErrors=function(h,x){if(h){h.trailingComma>-1&&this.raiseRecoverable(h.trailingComma,"Comma is not permitted after the rest element");var L=x?h.parenthesizedAssign:h.parenthesizedBind;L>-1&&this.raiseRecoverable(L,x?"Assigning to rvalue":"Parenthesized pattern")}},m.checkExpressionErrors=function(h,x){if(!h)return!1;var L=h.shorthandAssign,G=h.doubleProto;if(!x)return L>=0||G>=0;L>=0&&this.raise(L,"Shorthand property assignments are valid only in destructuring patterns"),G>=0&&this.raiseRecoverable(G,"Redefinition of __proto__ property")},m.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},m.isSimpleAssignTarget=function(h){return h.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(h.expression):h.type==="Identifier"||h.type==="MemberExpression"};var T=c.prototype;T.parseTopLevel=function(h){var x=Object.create(null);for(h.body||(h.body=[]);this.type!==V.eof;){var L=this.parseStatement(null,!0,x);h.body.push(L)}if(this.inModule)for(var G=0,st=Object.keys(this.undefinedExports);G<st.length;G+=1){var wt=st[G];this.raiseRecoverable(this.undefinedExports[wt].start,"Export '"+wt+"' is not defined")}return this.adaptDirectivePrologue(h.body),this.next(),h.sourceType=this.options.sourceType,this.finishNode(h,"Program")};var k={kind:"loop"},O={kind:"switch"};T.isLet=function(h){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Yt.lastIndex=this.pos;var x=Yt.exec(this.input),L=this.pos+x[0].length,G=this.input.charCodeAt(L);if(G===91||G===92)return!0;if(h)return!1;if(G===123||G>55295&&G<56320)return!0;if(X(G,!0)){for(var st=L+1;z(G=this.input.charCodeAt(st),!0);)++st;if(G===92||G>55295&&G<56320)return!0;var wt=this.input.slice(L,st);if(!C.test(wt))return!0}return!1},T.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Yt.lastIndex=this.pos;var h=Yt.exec(this.input),x=this.pos+h[0].length,L;return!Jt.test(this.input.slice(this.pos,x))&&this.input.slice(x,x+8)==="function"&&(x+8===this.input.length||!(z(L=this.input.charCodeAt(x+8))||L>55295&&L<56320))},T.isUsingKeyword=function(h,x){if(this.options.ecmaVersion<17||!this.isContextual(h?"await":"using"))return!1;Yt.lastIndex=this.pos;var L=Yt.exec(this.input),G=this.pos+L[0].length;if(Jt.test(this.input.slice(this.pos,G)))return!1;if(h){var st=G+5,wt;if(this.input.slice(G,st)!=="using"||st===this.input.length||z(wt=this.input.charCodeAt(st))||wt>55295&&wt<56320)return!1;Yt.lastIndex=st;var Et=Yt.exec(this.input);if(Et&&Jt.test(this.input.slice(st,st+Et[0].length)))return!1}if(x){var Qt=G+2,te;if(this.input.slice(G,Qt)==="of"&&(Qt===this.input.length||!z(te=this.input.charCodeAt(Qt))&&!(te>55295&&te<56320)))return!1}var Se=this.input.charCodeAt(G);return X(Se,!0)||Se===92},T.isAwaitUsing=function(h){return this.isUsingKeyword(!0,h)},T.isUsing=function(h){return this.isUsingKeyword(!1,h)},T.parseStatement=function(h,x,L){var G=this.type,st=this.startNode(),wt;switch(this.isLet(h)&&(G=V._var,wt="let"),G){case V._break:case V._continue:return this.parseBreakContinueStatement(st,G.keyword);case V._debugger:return this.parseDebuggerStatement(st);case V._do:return this.parseDoStatement(st);case V._for:return this.parseForStatement(st);case V._function:return h&&(this.strict||h!=="if"&&h!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(st,!1,!h);case V._class:return h&&this.unexpected(),this.parseClass(st,!0);case V._if:return this.parseIfStatement(st);case V._return:return this.parseReturnStatement(st);case V._switch:return this.parseSwitchStatement(st);case V._throw:return this.parseThrowStatement(st);case V._try:return this.parseTryStatement(st);case V._const:case V._var:return wt=wt||this.value,h&&wt!=="var"&&this.unexpected(),this.parseVarStatement(st,wt);case V._while:return this.parseWhileStatement(st);case V._with:return this.parseWithStatement(st);case V.braceL:return this.parseBlock(!0,st);case V.semi:return this.parseEmptyStatement(st);case V._export:case V._import:if(this.options.ecmaVersion>10&&G===V._import){Yt.lastIndex=this.pos;var Et=Yt.exec(this.input),Qt=this.pos+Et[0].length,te=this.input.charCodeAt(Qt);if(te===40||te===46)return this.parseExpressionStatement(st,this.parseExpression())}return this.options.allowImportExportEverywhere||(x||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),G===V._import?this.parseImport(st):this.parseExport(st,L);default:if(this.isAsyncFunction())return h&&this.unexpected(),this.next(),this.parseFunctionStatement(st,!0,!h);var Se=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(Se)return x&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),Se==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(st,!1,Se),this.semicolon(),this.finishNode(st,"VariableDeclaration");var De=this.value,Ke=this.parseExpression();return G===V.name&&Ke.type==="Identifier"&&this.eat(V.colon)?this.parseLabeledStatement(st,De,Ke,h):this.parseExpressionStatement(st,Ke)}},T.parseBreakContinueStatement=function(h,x){var L=x==="break";this.next(),this.eat(V.semi)||this.insertSemicolon()?h.label=null:this.type!==V.name?this.unexpected():(h.label=this.parseIdent(),this.semicolon());for(var G=0;G<this.labels.length;++G){var st=this.labels[G];if((h.label==null||st.name===h.label.name)&&(st.kind!=null&&(L||st.kind==="loop")||h.label&&L))break}return G===this.labels.length&&this.raise(h.start,"Unsyntactic "+x),this.finishNode(h,L?"BreakStatement":"ContinueStatement")},T.parseDebuggerStatement=function(h){return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement")},T.parseDoStatement=function(h){return this.next(),this.labels.push(k),h.body=this.parseStatement("do"),this.labels.pop(),this.expect(V._while),h.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(V.semi):this.semicolon(),this.finishNode(h,"DoWhileStatement")},T.parseForStatement=function(h){this.next();var x=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(k),this.enterScope(0),this.expect(V.parenL),this.type===V.semi)return x>-1&&this.unexpected(x),this.parseFor(h,null);var L=this.isLet();if(this.type===V._var||this.type===V._const||L){var G=this.startNode(),st=L?"let":this.value;return this.next(),this.parseVar(G,!0,st),this.finishNode(G,"VariableDeclaration"),this.parseForAfterInit(h,G,x)}var wt=this.isContextual("let"),Et=!1,Qt=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(Qt){var te=this.startNode();return this.next(),Qt==="await using"&&this.next(),this.parseVar(te,!0,Qt),this.finishNode(te,"VariableDeclaration"),this.parseForAfterInit(h,te,x)}var Se=this.containsEsc,De=new S,Ke=this.start,Li=x>-1?this.parseExprSubscripts(De,"await"):this.parseExpression(!0,De);return this.type===V._in||(Et=this.options.ecmaVersion>=6&&this.isContextual("of"))?(x>-1?(this.type===V._in&&this.unexpected(x),h.await=!0):Et&&this.options.ecmaVersion>=8&&(Li.start===Ke&&!Se&&Li.type==="Identifier"&&Li.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(h.await=!1)),wt&&Et&&this.raise(Li.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Li,!1,De),this.checkLValPattern(Li),this.parseForIn(h,Li)):(this.checkExpressionErrors(De,!0),x>-1&&this.unexpected(x),this.parseFor(h,Li))},T.parseForAfterInit=function(h,x,L){return(this.type===V._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&x.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===V._in?L>-1&&this.unexpected(L):h.await=L>-1),this.parseForIn(h,x)):(L>-1&&this.unexpected(L),this.parseFor(h,x))},T.parseFunctionStatement=function(h,x,L){return this.next(),this.parseFunction(h,N|(L?0:B),!1,x)},T.parseIfStatement=function(h){return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement("if"),h.alternate=this.eat(V._else)?this.parseStatement("if"):null,this.finishNode(h,"IfStatement")},T.parseReturnStatement=function(h){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(V.semi)||this.insertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement")},T.parseSwitchStatement=function(h){this.next(),h.discriminant=this.parseParenExpression(),h.cases=[],this.expect(V.braceL),this.labels.push(O),this.enterScope(0);for(var x,L=!1;this.type!==V.braceR;)if(this.type===V._case||this.type===V._default){var G=this.type===V._case;x&&this.finishNode(x,"SwitchCase"),h.cases.push(x=this.startNode()),x.consequent=[],this.next(),G?x.test=this.parseExpression():(L&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),L=!0,x.test=null),this.expect(V.colon)}else x||this.unexpected(),x.consequent.push(this.parseStatement(null));return this.exitScope(),x&&this.finishNode(x,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(h,"SwitchStatement")},T.parseThrowStatement=function(h){return this.next(),Jt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement")};var A=[];T.parseCatchClauseParam=function(){var h=this.parseBindingAtom(),x=h.type==="Identifier";return this.enterScope(x?Ls:0),this.checkLValPattern(h,x?Le:Ye),this.expect(V.parenR),h},T.parseTryStatement=function(h){if(this.next(),h.block=this.parseBlock(),h.handler=null,this.type===V._catch){var x=this.startNode();this.next(),this.eat(V.parenL)?x.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),x.param=null,this.enterScope(0)),x.body=this.parseBlock(!1),this.exitScope(),h.handler=this.finishNode(x,"CatchClause")}return h.finalizer=this.eat(V._finally)?this.parseBlock():null,!h.handler&&!h.finalizer&&this.raise(h.start,"Missing catch or finally clause"),this.finishNode(h,"TryStatement")},T.parseVarStatement=function(h,x,L){return this.next(),this.parseVar(h,!1,x,L),this.semicolon(),this.finishNode(h,"VariableDeclaration")},T.parseWhileStatement=function(h){return this.next(),h.test=this.parseParenExpression(),this.labels.push(k),h.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(h,"WhileStatement")},T.parseWithStatement=function(h){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement("with"),this.finishNode(h,"WithStatement")},T.parseEmptyStatement=function(h){return this.next(),this.finishNode(h,"EmptyStatement")},T.parseLabeledStatement=function(h,x,L,G){for(var st=0,wt=this.labels;st<wt.length;st+=1){var Et=wt[st];Et.name===x&&this.raise(L.start,"Label '"+x+"' is already declared")}for(var Qt=this.type.isLoop?"loop":this.type===V._switch?"switch":null,te=this.labels.length-1;te>=0;te--){var Se=this.labels[te];if(Se.statementStart===h.start)Se.statementStart=this.start,Se.kind=Qt;else break}return this.labels.push({name:x,kind:Qt,statementStart:this.start}),h.body=this.parseStatement(G?G.indexOf("label")===-1?G+"label":G:"label"),this.labels.pop(),h.label=L,this.finishNode(h,"LabeledStatement")},T.parseExpressionStatement=function(h,x){return h.expression=x,this.semicolon(),this.finishNode(h,"ExpressionStatement")},T.parseBlock=function(h,x,L){for(h===void 0&&(h=!0),x===void 0&&(x=this.startNode()),x.body=[],this.expect(V.braceL),h&&this.enterScope(0);this.type!==V.braceR;){var G=this.parseStatement(null);x.body.push(G)}return L&&(this.strict=!1),this.next(),h&&this.exitScope(),this.finishNode(x,"BlockStatement")},T.parseFor=function(h,x){return h.init=x,this.expect(V.semi),h.test=this.type===V.semi?null:this.parseExpression(),this.expect(V.semi),h.update=this.type===V.parenR?null:this.parseExpression(),this.expect(V.parenR),h.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(h,"ForStatement")},T.parseForIn=function(h,x){var L=this.type===V._in;return this.next(),x.type==="VariableDeclaration"&&x.declarations[0].init!=null&&(!L||this.options.ecmaVersion<8||this.strict||x.kind!=="var"||x.declarations[0].id.type!=="Identifier")&&this.raise(x.start,(L?"for-in":"for-of")+" loop variable declaration may not have an initializer"),h.left=x,h.right=L?this.parseExpression():this.parseMaybeAssign(),this.expect(V.parenR),h.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(h,L?"ForInStatement":"ForOfStatement")},T.parseVar=function(h,x,L,G){for(h.declarations=[],h.kind=L;;){var st=this.startNode();if(this.parseVarId(st,L),this.eat(V.eq)?st.init=this.parseMaybeAssign(x):!G&&L==="const"&&!(this.type===V._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!G&&(L==="using"||L==="await using")&&this.options.ecmaVersion>=17&&this.type!==V._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+L+" declaration"):!G&&st.id.type!=="Identifier"&&!(x&&(this.type===V._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):st.init=null,h.declarations.push(this.finishNode(st,"VariableDeclarator")),!this.eat(V.comma))break}return h},T.parseVarId=function(h,x){h.id=x==="using"||x==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(h.id,x==="var"?rs:Ye,!1)};var N=1,B=2,R=4;T.parseFunction=function(h,x,L,G,st){this.initFunction(h),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!G)&&(this.type===V.star&&x&B&&this.unexpected(),h.generator=this.eat(V.star)),this.options.ecmaVersion>=8&&(h.async=!!G),x&N&&(h.id=x&R&&this.type!==V.name?null:this.parseIdent(),h.id&&!(x&B)&&this.checkLValSimple(h.id,this.strict||h.generator||h.async?this.treatFunctionsAsVar?rs:Ye:Ta));var wt=this.yieldPos,Et=this.awaitPos,Qt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ns(h.async,h.generator)),x&N||(h.id=this.type===V.name?this.parseIdent():null),this.parseFunctionParams(h),this.parseFunctionBody(h,L,!1,st),this.yieldPos=wt,this.awaitPos=Et,this.awaitIdentPos=Qt,this.finishNode(h,x&N?"FunctionDeclaration":"FunctionExpression")},T.parseFunctionParams=function(h){this.expect(V.parenL),h.params=this.parseBindingList(V.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},T.parseClass=function(h,x){this.next();var L=this.strict;this.strict=!0,this.parseClassId(h,x),this.parseClassSuper(h);var G=this.enterClassBody(),st=this.startNode(),wt=!1;for(st.body=[],this.expect(V.braceL);this.type!==V.braceR;){var Et=this.parseClassElement(h.superClass!==null);Et&&(st.body.push(Et),Et.type==="MethodDefinition"&&Et.kind==="constructor"?(wt&&this.raiseRecoverable(Et.start,"Duplicate constructor in the same class"),wt=!0):Et.key&&Et.key.type==="PrivateIdentifier"&&j(G,Et)&&this.raiseRecoverable(Et.key.start,"Identifier '#"+Et.key.name+"' has already been declared"))}return this.strict=L,this.next(),h.body=this.finishNode(st,"ClassBody"),this.exitClassBody(),this.finishNode(h,x?"ClassDeclaration":"ClassExpression")},T.parseClassElement=function(h){if(this.eat(V.semi))return null;var x=this.options.ecmaVersion,L=this.startNode(),G="",st=!1,wt=!1,Et="method",Qt=!1;if(this.eatContextual("static")){if(x>=13&&this.eat(V.braceL))return this.parseClassStaticBlock(L),L;this.isClassElementNameStart()||this.type===V.star?Qt=!0:G="static"}if(L.static=Qt,!G&&x>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===V.star)&&!this.canInsertSemicolon()?wt=!0:G="async"),!G&&(x>=9||!wt)&&this.eat(V.star)&&(st=!0),!G&&!wt&&!st){var te=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Et=te:G=te)}if(G?(L.computed=!1,L.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),L.key.name=G,this.finishNode(L.key,"Identifier")):this.parseClassElementName(L),x<13||this.type===V.parenL||Et!=="method"||st||wt){var Se=!L.static&&Z(L,"constructor"),De=Se&&h;Se&&Et!=="method"&&this.raise(L.key.start,"Constructor can't have get/set modifier"),L.kind=Se?"constructor":Et,this.parseClassMethod(L,st,wt,De)}else this.parseClassField(L);return L},T.isClassElementNameStart=function(){return this.type===V.name||this.type===V.privateId||this.type===V.num||this.type===V.string||this.type===V.bracketL||this.type.keyword},T.parseClassElementName=function(h){this.type===V.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),h.computed=!1,h.key=this.parsePrivateIdent()):this.parsePropertyName(h)},T.parseClassMethod=function(h,x,L,G){var st=h.key;h.kind==="constructor"?(x&&this.raise(st.start,"Constructor can't be a generator"),L&&this.raise(st.start,"Constructor can't be an async method")):h.static&&Z(h,"prototype")&&this.raise(st.start,"Classes may not have a static property named prototype");var wt=h.value=this.parseMethod(x,L,G);return h.kind==="get"&&wt.params.length!==0&&this.raiseRecoverable(wt.start,"getter should have no params"),h.kind==="set"&&wt.params.length!==1&&this.raiseRecoverable(wt.start,"setter should have exactly one param"),h.kind==="set"&&wt.params[0].type==="RestElement"&&this.raiseRecoverable(wt.params[0].start,"Setter cannot use rest params"),this.finishNode(h,"MethodDefinition")},T.parseClassField=function(h){return Z(h,"constructor")?this.raise(h.key.start,"Classes can't have a field named 'constructor'"):h.static&&Z(h,"prototype")&&this.raise(h.key.start,"Classes can't have a static field named 'prototype'"),this.eat(V.eq)?(this.enterScope(es|ts),h.value=this.parseMaybeAssign(),this.exitScope()):h.value=null,this.semicolon(),this.finishNode(h,"PropertyDefinition")},T.parseClassStaticBlock=function(h){h.body=[];var x=this.labels;for(this.labels=[],this.enterScope(Fi|ts);this.type!==V.braceR;){var L=this.parseStatement(null);h.body.push(L)}return this.next(),this.exitScope(),this.labels=x,this.finishNode(h,"StaticBlock")},T.parseClassId=function(h,x){this.type===V.name?(h.id=this.parseIdent(),x&&this.checkLValSimple(h.id,Ye,!1)):(x===!0&&this.unexpected(),h.id=null)},T.parseClassSuper=function(h){h.superClass=this.eat(V._extends)?this.parseExprSubscripts(null,!1):null},T.enterClassBody=function(){var h={declared:Object.create(null),used:[]};return this.privateNameStack.push(h),h.declared},T.exitClassBody=function(){var h=this.privateNameStack.pop(),x=h.declared,L=h.used;if(this.options.checkPrivateFields)for(var G=this.privateNameStack.length,st=G===0?null:this.privateNameStack[G-1],wt=0;wt<L.length;++wt){var Et=L[wt];ut(x,Et.name)||(st?st.used.push(Et):this.raiseRecoverable(Et.start,"Private field '#"+Et.name+"' must be declared in an enclosing class"))}};function j(h,x){var L=x.key.name,G=h[L],st="true";return x.type==="MethodDefinition"&&(x.kind==="get"||x.kind==="set")&&(st=(x.static?"s":"i")+x.kind),G==="iget"&&st==="iset"||G==="iset"&&st==="iget"||G==="sget"&&st==="sset"||G==="sset"&&st==="sget"?(h[L]="true",!1):G?!0:(h[L]=st,!1)}function Z(h,x){var L=h.computed,G=h.key;return!L&&(G.type==="Identifier"&&G.name===x||G.type==="Literal"&&G.value===x)}T.parseExportAllDeclaration=function(h,x){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(h.exported=this.parseModuleExportName(),this.checkExport(x,h.exported,this.lastTokStart)):h.exported=null),this.expectContextual("from"),this.type!==V.string&&this.unexpected(),h.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(h.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(h,"ExportAllDeclaration")},T.parseExport=function(h,x){if(this.next(),this.eat(V.star))return this.parseExportAllDeclaration(h,x);if(this.eat(V._default))return this.checkExport(x,"default",this.lastTokStart),h.declaration=this.parseExportDefaultDeclaration(),this.finishNode(h,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())h.declaration=this.parseExportDeclaration(h),h.declaration.type==="VariableDeclaration"?this.checkVariableExport(x,h.declaration.declarations):this.checkExport(x,h.declaration.id,h.declaration.id.start),h.specifiers=[],h.source=null,this.options.ecmaVersion>=16&&(h.attributes=[]);else{if(h.declaration=null,h.specifiers=this.parseExportSpecifiers(x),this.eatContextual("from"))this.type!==V.string&&this.unexpected(),h.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(h.attributes=this.parseWithClause());else{for(var L=0,G=h.specifiers;L<G.length;L+=1){var st=G[L];this.checkUnreserved(st.local),this.checkLocalExport(st.local),st.local.type==="Literal"&&this.raise(st.local.start,"A string literal cannot be used as an exported binding without `from`.")}h.source=null,this.options.ecmaVersion>=16&&(h.attributes=[])}this.semicolon()}return this.finishNode(h,"ExportNamedDeclaration")},T.parseExportDeclaration=function(h){return this.parseStatement(null)},T.parseExportDefaultDeclaration=function(){var h;if(this.type===V._function||(h=this.isAsyncFunction())){var x=this.startNode();return this.next(),h&&this.next(),this.parseFunction(x,N|R,!1,h)}else if(this.type===V._class){var L=this.startNode();return this.parseClass(L,"nullableID")}else{var G=this.parseMaybeAssign();return this.semicolon(),G}},T.checkExport=function(h,x,L){h&&(typeof x!="string"&&(x=x.type==="Identifier"?x.name:x.value),ut(h,x)&&this.raiseRecoverable(L,"Duplicate export '"+x+"'"),h[x]=!0)},T.checkPatternExport=function(h,x){var L=x.type;if(L==="Identifier")this.checkExport(h,x,x.start);else if(L==="ObjectPattern")for(var G=0,st=x.properties;G<st.length;G+=1){var wt=st[G];this.checkPatternExport(h,wt)}else if(L==="ArrayPattern")for(var Et=0,Qt=x.elements;Et<Qt.length;Et+=1){var te=Qt[Et];te&&this.checkPatternExport(h,te)}else L==="Property"?this.checkPatternExport(h,x.value):L==="AssignmentPattern"?this.checkPatternExport(h,x.left):L==="RestElement"&&this.checkPatternExport(h,x.argument)},T.checkVariableExport=function(h,x){if(h)for(var L=0,G=x;L<G.length;L+=1){var st=G[L];this.checkPatternExport(h,st.id)}},T.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},T.parseExportSpecifier=function(h){var x=this.startNode();return x.local=this.parseModuleExportName(),x.exported=this.eatContextual("as")?this.parseModuleExportName():x.local,this.checkExport(h,x.exported,x.exported.start),this.finishNode(x,"ExportSpecifier")},T.parseExportSpecifiers=function(h){var x=[],L=!0;for(this.expect(V.braceL);!this.eat(V.braceR);){if(L)L=!1;else if(this.expect(V.comma),this.afterTrailingComma(V.braceR))break;x.push(this.parseExportSpecifier(h))}return x},T.parseImport=function(h){return this.next(),this.type===V.string?(h.specifiers=A,h.source=this.parseExprAtom()):(h.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),h.source=this.type===V.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(h.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(h,"ImportDeclaration")},T.parseImportSpecifier=function(){var h=this.startNode();return h.imported=this.parseModuleExportName(),this.eatContextual("as")?h.local=this.parseIdent():(this.checkUnreserved(h.imported),h.local=h.imported),this.checkLValSimple(h.local,Ye),this.finishNode(h,"ImportSpecifier")},T.parseImportDefaultSpecifier=function(){var h=this.startNode();return h.local=this.parseIdent(),this.checkLValSimple(h.local,Ye),this.finishNode(h,"ImportDefaultSpecifier")},T.parseImportNamespaceSpecifier=function(){var h=this.startNode();return this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,Ye),this.finishNode(h,"ImportNamespaceSpecifier")},T.parseImportSpecifiers=function(){var h=[],x=!0;if(this.type===V.name&&(h.push(this.parseImportDefaultSpecifier()),!this.eat(V.comma)))return h;if(this.type===V.star)return h.push(this.parseImportNamespaceSpecifier()),h;for(this.expect(V.braceL);!this.eat(V.braceR);){if(x)x=!1;else if(this.expect(V.comma),this.afterTrailingComma(V.braceR))break;h.push(this.parseImportSpecifier())}return h},T.parseWithClause=function(){var h=[];if(!this.eat(V._with))return h;this.expect(V.braceL);for(var x={},L=!0;!this.eat(V.braceR);){if(L)L=!1;else if(this.expect(V.comma),this.afterTrailingComma(V.braceR))break;var G=this.parseImportAttribute(),st=G.key.type==="Identifier"?G.key.name:G.key.value;ut(x,st)&&this.raiseRecoverable(G.key.start,"Duplicate attribute key '"+st+"'"),x[st]=!0,h.push(G)}return h},T.parseImportAttribute=function(){var h=this.startNode();return h.key=this.type===V.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(V.colon),this.type!==V.string&&this.unexpected(),h.value=this.parseExprAtom(),this.finishNode(h,"ImportAttribute")},T.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===V.string){var h=this.parseLiteral(this.value);return Ut.test(h.value)&&this.raise(h.start,"An export name cannot include a lone surrogate."),h}return this.parseIdent(!0)},T.adaptDirectivePrologue=function(h){for(var x=0;x<h.length&&this.isDirectiveCandidate(h[x]);++x)h[x].directive=h[x].expression.raw.slice(1,-1)},T.isDirectiveCandidate=function(h){return this.options.ecmaVersion>=5&&h.type==="ExpressionStatement"&&h.expression.type==="Literal"&&typeof h.expression.value=="string"&&(this.input[h.start]==='"'||this.input[h.start]==="'")};var I=c.prototype;I.toAssignable=function(h,x,L){if(this.options.ecmaVersion>=6&&h)switch(h.type){case"Identifier":this.inAsync&&h.name==="await"&&this.raise(h.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":h.type="ObjectPattern",L&&this.checkPatternErrors(L,!0);for(var G=0,st=h.properties;G<st.length;G+=1){var wt=st[G];this.toAssignable(wt,x),wt.type==="RestElement"&&(wt.argument.type==="ArrayPattern"||wt.argument.type==="ObjectPattern")&&this.raise(wt.argument.start,"Unexpected token")}break;case"Property":h.kind!=="init"&&this.raise(h.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(h.value,x);break;case"ArrayExpression":h.type="ArrayPattern",L&&this.checkPatternErrors(L,!0),this.toAssignableList(h.elements,x);break;case"SpreadElement":h.type="RestElement",this.toAssignable(h.argument,x),h.argument.type==="AssignmentPattern"&&this.raise(h.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":h.operator!=="="&&this.raise(h.left.end,"Only '=' operator can be used for specifying default value."),h.type="AssignmentPattern",delete h.operator,this.toAssignable(h.left,x);break;case"ParenthesizedExpression":this.toAssignable(h.expression,x,L);break;case"ChainExpression":this.raiseRecoverable(h.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!x)break;default:this.raise(h.start,"Assigning to rvalue")}else L&&this.checkPatternErrors(L,!0);return h},I.toAssignableList=function(h,x){for(var L=h.length,G=0;G<L;G++){var st=h[G];st&&this.toAssignable(st,x)}if(L){var wt=h[L-1];this.options.ecmaVersion===6&&x&&wt&&wt.type==="RestElement"&&wt.argument.type!=="Identifier"&&this.unexpected(wt.argument.start)}return h},I.parseSpread=function(h){var x=this.startNode();return this.next(),x.argument=this.parseMaybeAssign(!1,h),this.finishNode(x,"SpreadElement")},I.parseRestBinding=function(){var h=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==V.name&&this.unexpected(),h.argument=this.parseBindingAtom(),this.finishNode(h,"RestElement")},I.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case V.bracketL:var h=this.startNode();return this.next(),h.elements=this.parseBindingList(V.bracketR,!0,!0),this.finishNode(h,"ArrayPattern");case V.braceL:return this.parseObj(!0)}return this.parseIdent()},I.parseBindingList=function(h,x,L,G){for(var st=[],wt=!0;!this.eat(h);)if(wt?wt=!1:this.expect(V.comma),x&&this.type===V.comma)st.push(null);else{if(L&&this.afterTrailingComma(h))break;if(this.type===V.ellipsis){var Et=this.parseRestBinding();this.parseBindingListItem(Et),st.push(Et),this.type===V.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(h);break}else st.push(this.parseAssignableListItem(G))}return st},I.parseAssignableListItem=function(h){var x=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(x),x},I.parseBindingListItem=function(h){return h},I.parseMaybeDefault=function(h,x,L){if(L=L||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(V.eq))return L;var G=this.startNodeAt(h,x);return G.left=L,G.right=this.parseMaybeAssign(),this.finishNode(G,"AssignmentPattern")},I.checkLValSimple=function(h,x,L){x===void 0&&(x=ri);var G=x!==ri;switch(h.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(h.name)&&this.raiseRecoverable(h.start,(G?"Binding ":"Assigning to ")+h.name+" in strict mode"),G&&(x===Ye&&h.name==="let"&&this.raiseRecoverable(h.start,"let is disallowed as a lexically bound name"),L&&(ut(L,h.name)&&this.raiseRecoverable(h.start,"Argument name clash"),L[h.name]=!0),x!==s&&this.declareName(h.name,x,h.start));break;case"ChainExpression":this.raiseRecoverable(h.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":G&&this.raiseRecoverable(h.start,"Binding member expression");break;case"ParenthesizedExpression":return G&&this.raiseRecoverable(h.start,"Binding parenthesized expression"),this.checkLValSimple(h.expression,x,L);default:this.raise(h.start,(G?"Binding":"Assigning to")+" rvalue")}},I.checkLValPattern=function(h,x,L){switch(x===void 0&&(x=ri),h.type){case"ObjectPattern":for(var G=0,st=h.properties;G<st.length;G+=1){var wt=st[G];this.checkLValInnerPattern(wt,x,L)}break;case"ArrayPattern":for(var Et=0,Qt=h.elements;Et<Qt.length;Et+=1){var te=Qt[Et];te&&this.checkLValInnerPattern(te,x,L)}break;default:this.checkLValSimple(h,x,L)}},I.checkLValInnerPattern=function(h,x,L){switch(x===void 0&&(x=ri),h.type){case"Property":this.checkLValInnerPattern(h.value,x,L);break;case"AssignmentPattern":this.checkLValPattern(h.left,x,L);break;case"RestElement":this.checkLValPattern(h.argument,x,L);break;default:this.checkLValPattern(h,x,L)}};var q=function(x,L,G,st,wt){this.token=x,this.isExpr=!!L,this.preserveSpace=!!G,this.override=st,this.generator=!!wt},P={b_stat:new q("{",!1),b_expr:new q("{",!0),b_tmpl:new q("${",!1),p_stat:new q("(",!1),p_expr:new q("(",!0),q_tmpl:new q("`",!0,!0,function(h){return h.tryReadTemplateToken()}),f_stat:new q("function",!1),f_expr:new q("function",!0),f_expr_gen:new q("function",!0,!1,null,!0),f_gen:new q("function",!1,!1,null,!0)},Y=c.prototype;Y.initialContext=function(){return[P.b_stat]},Y.curContext=function(){return this.context[this.context.length-1]},Y.braceIsBlock=function(h){var x=this.curContext();return x===P.f_expr||x===P.f_stat?!0:h===V.colon&&(x===P.b_stat||x===P.b_expr)?!x.isExpr:h===V._return||h===V.name&&this.exprAllowed?Jt.test(this.input.slice(this.lastTokEnd,this.start)):h===V._else||h===V.semi||h===V.eof||h===V.parenR||h===V.arrow?!0:h===V.braceL?x===P.b_stat:h===V._var||h===V._const||h===V.name?!1:!this.exprAllowed},Y.inGeneratorContext=function(){for(var h=this.context.length-1;h>=1;h--){var x=this.context[h];if(x.token==="function")return x.generator}return!1},Y.updateContext=function(h){var x,L=this.type;L.keyword&&h===V.dot?this.exprAllowed=!1:(x=L.updateContext)?x.call(this,h):this.exprAllowed=L.beforeExpr},Y.overrideContext=function(h){this.curContext()!==h&&(this.context[this.context.length-1]=h)},V.parenR.updateContext=V.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var h=this.context.pop();h===P.b_stat&&this.curContext().token==="function"&&(h=this.context.pop()),this.exprAllowed=!h.isExpr},V.braceL.updateContext=function(h){this.context.push(this.braceIsBlock(h)?P.b_stat:P.b_expr),this.exprAllowed=!0},V.dollarBraceL.updateContext=function(){this.context.push(P.b_tmpl),this.exprAllowed=!0},V.parenL.updateContext=function(h){var x=h===V._if||h===V._for||h===V._with||h===V._while;this.context.push(x?P.p_stat:P.p_expr),this.exprAllowed=!0},V.incDec.updateContext=function(){},V._function.updateContext=V._class.updateContext=function(h){h.beforeExpr&&h!==V._else&&!(h===V.semi&&this.curContext()!==P.p_stat)&&!(h===V._return&&Jt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((h===V.colon||h===V.braceL)&&this.curContext()===P.b_stat)?this.context.push(P.f_expr):this.context.push(P.f_stat),this.exprAllowed=!1},V.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},V.backQuote.updateContext=function(){this.curContext()===P.q_tmpl?this.context.pop():this.context.push(P.q_tmpl),this.exprAllowed=!1},V.star.updateContext=function(h){if(h===V._function){var x=this.context.length-1;this.context[x]===P.f_expr?this.context[x]=P.f_expr_gen:this.context[x]=P.f_gen}this.exprAllowed=!0},V.name.updateContext=function(h){var x=!1;this.options.ecmaVersion>=6&&h!==V.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(x=!0),this.exprAllowed=x};var D=c.prototype;D.checkPropClash=function(h,x,L){if(!(this.options.ecmaVersion>=9&&h.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(h.computed||h.method||h.shorthand))){var G=h.key,st;switch(G.type){case"Identifier":st=G.name;break;case"Literal":st=String(G.value);break;default:return}var wt=h.kind;if(this.options.ecmaVersion>=6){st==="__proto__"&&wt==="init"&&(x.proto&&(L?L.doubleProto<0&&(L.doubleProto=G.start):this.raiseRecoverable(G.start,"Redefinition of __proto__ property")),x.proto=!0);return}st="$"+st;var Et=x[st];if(Et){var Qt;wt==="init"?Qt=this.strict&&Et.init||Et.get||Et.set:Qt=Et.init||Et[wt],Qt&&this.raiseRecoverable(G.start,"Redefinition of property")}else Et=x[st]={init:!1,get:!1,set:!1};Et[wt]=!0}},D.parseExpression=function(h,x){var L=this.start,G=this.startLoc,st=this.parseMaybeAssign(h,x);if(this.type===V.comma){var wt=this.startNodeAt(L,G);for(wt.expressions=[st];this.eat(V.comma);)wt.expressions.push(this.parseMaybeAssign(h,x));return this.finishNode(wt,"SequenceExpression")}return st},D.parseMaybeAssign=function(h,x,L){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(h);this.exprAllowed=!1}var G=!1,st=-1,wt=-1,Et=-1;x?(st=x.parenthesizedAssign,wt=x.trailingComma,Et=x.doubleProto,x.parenthesizedAssign=x.trailingComma=-1):(x=new S,G=!0);var Qt=this.start,te=this.startLoc;(this.type===V.parenL||this.type===V.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=h==="await");var Se=this.parseMaybeConditional(h,x);if(L&&(Se=L.call(this,Se,Qt,te)),this.type.isAssign){var De=this.startNodeAt(Qt,te);return De.operator=this.value,this.type===V.eq&&(Se=this.toAssignable(Se,!1,x)),G||(x.parenthesizedAssign=x.trailingComma=x.doubleProto=-1),x.shorthandAssign>=Se.start&&(x.shorthandAssign=-1),this.type===V.eq?this.checkLValPattern(Se):this.checkLValSimple(Se),De.left=Se,this.next(),De.right=this.parseMaybeAssign(h),Et>-1&&(x.doubleProto=Et),this.finishNode(De,"AssignmentExpression")}else G&&this.checkExpressionErrors(x,!0);return st>-1&&(x.parenthesizedAssign=st),wt>-1&&(x.trailingComma=wt),Se},D.parseMaybeConditional=function(h,x){var L=this.start,G=this.startLoc,st=this.parseExprOps(h,x);if(this.checkExpressionErrors(x))return st;if(this.eat(V.question)){var wt=this.startNodeAt(L,G);return wt.test=st,wt.consequent=this.parseMaybeAssign(),this.expect(V.colon),wt.alternate=this.parseMaybeAssign(h),this.finishNode(wt,"ConditionalExpression")}return st},D.parseExprOps=function(h,x){var L=this.start,G=this.startLoc,st=this.parseMaybeUnary(x,!1,!1,h);return this.checkExpressionErrors(x)||st.start===L&&st.type==="ArrowFunctionExpression"?st:this.parseExprOp(st,L,G,-1,h)},D.parseExprOp=function(h,x,L,G,st){var wt=this.type.binop;if(wt!=null&&(!st||this.type!==V._in)&&wt>G){var Et=this.type===V.logicalOR||this.type===V.logicalAND,Qt=this.type===V.coalesce;Qt&&(wt=V.logicalAND.binop);var te=this.value;this.next();var Se=this.start,De=this.startLoc,Ke=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,st),Se,De,wt,st),Li=this.buildBinary(x,L,h,Ke,te,Et||Qt);return(Et&&this.type===V.coalesce||Qt&&(this.type===V.logicalOR||this.type===V.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Li,x,L,G,st)}return h},D.buildBinary=function(h,x,L,G,st,wt){G.type==="PrivateIdentifier"&&this.raise(G.start,"Private identifier can only be left side of binary expression");var Et=this.startNodeAt(h,x);return Et.left=L,Et.operator=st,Et.right=G,this.finishNode(Et,wt?"LogicalExpression":"BinaryExpression")},D.parseMaybeUnary=function(h,x,L,G){var st=this.start,wt=this.startLoc,Et;if(this.isContextual("await")&&this.canAwait)Et=this.parseAwait(G),x=!0;else if(this.type.prefix){var Qt=this.startNode(),te=this.type===V.incDec;Qt.operator=this.value,Qt.prefix=!0,this.next(),Qt.argument=this.parseMaybeUnary(null,!0,te,G),this.checkExpressionErrors(h,!0),te?this.checkLValSimple(Qt.argument):this.strict&&Qt.operator==="delete"&&U(Qt.argument)?this.raiseRecoverable(Qt.start,"Deleting local variable in strict mode"):Qt.operator==="delete"&&K(Qt.argument)?this.raiseRecoverable(Qt.start,"Private fields can not be deleted"):x=!0,Et=this.finishNode(Qt,te?"UpdateExpression":"UnaryExpression")}else if(!x&&this.type===V.privateId)(G||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Et=this.parsePrivateIdent(),this.type!==V._in&&this.unexpected();else{if(Et=this.parseExprSubscripts(h,G),this.checkExpressionErrors(h))return Et;for(;this.type.postfix&&!this.canInsertSemicolon();){var Se=this.startNodeAt(st,wt);Se.operator=this.value,Se.prefix=!1,Se.argument=Et,this.checkLValSimple(Et),this.next(),Et=this.finishNode(Se,"UpdateExpression")}}if(!L&&this.eat(V.starstar))if(x)this.unexpected(this.lastTokStart);else return this.buildBinary(st,wt,Et,this.parseMaybeUnary(null,!1,!1,G),"**",!1);else return Et};function U(h){return h.type==="Identifier"||h.type==="ParenthesizedExpression"&&U(h.expression)}function K(h){return h.type==="MemberExpression"&&h.property.type==="PrivateIdentifier"||h.type==="ChainExpression"&&K(h.expression)||h.type==="ParenthesizedExpression"&&K(h.expression)}D.parseExprSubscripts=function(h,x){var L=this.start,G=this.startLoc,st=this.parseExprAtom(h,x);if(st.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return st;var wt=this.parseSubscripts(st,L,G,!1,x);return h&&wt.type==="MemberExpression"&&(h.parenthesizedAssign>=wt.start&&(h.parenthesizedAssign=-1),h.parenthesizedBind>=wt.start&&(h.parenthesizedBind=-1),h.trailingComma>=wt.start&&(h.trailingComma=-1)),wt},D.parseSubscripts=function(h,x,L,G,st){for(var wt=this.options.ecmaVersion>=8&&h.type==="Identifier"&&h.name==="async"&&this.lastTokEnd===h.end&&!this.canInsertSemicolon()&&h.end-h.start===5&&this.potentialArrowAt===h.start,Et=!1;;){var Qt=this.parseSubscript(h,x,L,G,wt,Et,st);if(Qt.optional&&(Et=!0),Qt===h||Qt.type==="ArrowFunctionExpression"){if(Et){var te=this.startNodeAt(x,L);te.expression=Qt,Qt=this.finishNode(te,"ChainExpression")}return Qt}h=Qt}},D.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(V.arrow)},D.parseSubscriptAsyncArrow=function(h,x,L,G){return this.parseArrowExpression(this.startNodeAt(h,x),L,!0,G)},D.parseSubscript=function(h,x,L,G,st,wt,Et){var Qt=this.options.ecmaVersion>=11,te=Qt&&this.eat(V.questionDot);G&&te&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Se=this.eat(V.bracketL);if(Se||te&&this.type!==V.parenL&&this.type!==V.backQuote||this.eat(V.dot)){var De=this.startNodeAt(x,L);De.object=h,Se?(De.property=this.parseExpression(),this.expect(V.bracketR)):this.type===V.privateId&&h.type!=="Super"?De.property=this.parsePrivateIdent():De.property=this.parseIdent(this.options.allowReserved!=="never"),De.computed=!!Se,Qt&&(De.optional=te),h=this.finishNode(De,"MemberExpression")}else if(!G&&this.eat(V.parenL)){var Ke=new S,Li=this.yieldPos,Ei=this.awaitPos,sn=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var xn=this.parseExprList(V.parenR,this.options.ecmaVersion>=8,!1,Ke);if(st&&!te&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Ke,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Li,this.awaitPos=Ei,this.awaitIdentPos=sn,this.parseSubscriptAsyncArrow(x,L,xn,Et);this.checkExpressionErrors(Ke,!0),this.yieldPos=Li||this.yieldPos,this.awaitPos=Ei||this.awaitPos,this.awaitIdentPos=sn||this.awaitIdentPos;var jn=this.startNodeAt(x,L);jn.callee=h,jn.arguments=xn,Qt&&(jn.optional=te),h=this.finishNode(jn,"CallExpression")}else if(this.type===V.backQuote){(te||wt)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var jr=this.startNodeAt(x,L);jr.tag=h,jr.quasi=this.parseTemplate({isTagged:!0}),h=this.finishNode(jr,"TaggedTemplateExpression")}return h},D.parseExprAtom=function(h,x,L){this.type===V.slash&&this.readRegexp();var G,st=this.potentialArrowAt===this.start;switch(this.type){case V._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),G=this.startNode(),this.next(),this.type===V.parenL&&!this.allowDirectSuper&&this.raise(G.start,"super() call outside constructor of a subclass"),this.type!==V.dot&&this.type!==V.bracketL&&this.type!==V.parenL&&this.unexpected(),this.finishNode(G,"Super");case V._this:return G=this.startNode(),this.next(),this.finishNode(G,"ThisExpression");case V.name:var wt=this.start,Et=this.startLoc,Qt=this.containsEsc,te=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Qt&&te.name==="async"&&!this.canInsertSemicolon()&&this.eat(V._function))return this.overrideContext(P.f_expr),this.parseFunction(this.startNodeAt(wt,Et),0,!1,!0,x);if(st&&!this.canInsertSemicolon()){if(this.eat(V.arrow))return this.parseArrowExpression(this.startNodeAt(wt,Et),[te],!1,x);if(this.options.ecmaVersion>=8&&te.name==="async"&&this.type===V.name&&!Qt&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return te=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(V.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(wt,Et),[te],!0,x)}return te;case V.regexp:var Se=this.value;return G=this.parseLiteral(Se.value),G.regex={pattern:Se.pattern,flags:Se.flags},G;case V.num:case V.string:return this.parseLiteral(this.value);case V._null:case V._true:case V._false:return G=this.startNode(),G.value=this.type===V._null?null:this.type===V._true,G.raw=this.type.keyword,this.next(),this.finishNode(G,"Literal");case V.parenL:var De=this.start,Ke=this.parseParenAndDistinguishExpression(st,x);return h&&(h.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Ke)&&(h.parenthesizedAssign=De),h.parenthesizedBind<0&&(h.parenthesizedBind=De)),Ke;case V.bracketL:return G=this.startNode(),this.next(),G.elements=this.parseExprList(V.bracketR,!0,!0,h),this.finishNode(G,"ArrayExpression");case V.braceL:return this.overrideContext(P.b_expr),this.parseObj(!1,h);case V._function:return G=this.startNode(),this.next(),this.parseFunction(G,0);case V._class:return this.parseClass(this.startNode(),!1);case V._new:return this.parseNew();case V.backQuote:return this.parseTemplate();case V._import:return this.options.ecmaVersion>=11?this.parseExprImport(L):this.unexpected();default:return this.parseExprAtomDefault()}},D.parseExprAtomDefault=function(){this.unexpected()},D.parseExprImport=function(h){var x=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===V.parenL&&!h)return this.parseDynamicImport(x);if(this.type===V.dot){var L=this.startNodeAt(x.start,x.loc&&x.loc.start);return L.name="import",x.meta=this.finishNode(L,"Identifier"),this.parseImportMeta(x)}else this.unexpected()},D.parseDynamicImport=function(h){if(this.next(),h.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(V.parenR)?h.options=null:(this.expect(V.comma),this.afterTrailingComma(V.parenR)?h.options=null:(h.options=this.parseMaybeAssign(),this.eat(V.parenR)||(this.expect(V.comma),this.afterTrailingComma(V.parenR)||this.unexpected())));else if(!this.eat(V.parenR)){var x=this.start;this.eat(V.comma)&&this.eat(V.parenR)?this.raiseRecoverable(x,"Trailing comma is not allowed in import()"):this.unexpected(x)}return this.finishNode(h,"ImportExpression")},D.parseImportMeta=function(h){this.next();var x=this.containsEsc;return h.property=this.parseIdent(!0),h.property.name!=="meta"&&this.raiseRecoverable(h.property.start,"The only valid meta property for import is 'import.meta'"),x&&this.raiseRecoverable(h.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(h.start,"Cannot use 'import.meta' outside a module"),this.finishNode(h,"MetaProperty")},D.parseLiteral=function(h){var x=this.startNode();return x.value=h,x.raw=this.input.slice(this.start,this.end),x.raw.charCodeAt(x.raw.length-1)===110&&(x.bigint=x.value!=null?x.value.toString():x.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(x,"Literal")},D.parseParenExpression=function(){this.expect(V.parenL);var h=this.parseExpression();return this.expect(V.parenR),h},D.shouldParseArrow=function(h){return!this.canInsertSemicolon()},D.parseParenAndDistinguishExpression=function(h,x){var L=this.start,G=this.startLoc,st,wt=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Et=this.start,Qt=this.startLoc,te=[],Se=!0,De=!1,Ke=new S,Li=this.yieldPos,Ei=this.awaitPos,sn;for(this.yieldPos=0,this.awaitPos=0;this.type!==V.parenR;)if(Se?Se=!1:this.expect(V.comma),wt&&this.afterTrailingComma(V.parenR,!0)){De=!0;break}else if(this.type===V.ellipsis){sn=this.start,te.push(this.parseParenItem(this.parseRestBinding())),this.type===V.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else te.push(this.parseMaybeAssign(!1,Ke,this.parseParenItem));var xn=this.lastTokEnd,jn=this.lastTokEndLoc;if(this.expect(V.parenR),h&&this.shouldParseArrow(te)&&this.eat(V.arrow))return this.checkPatternErrors(Ke,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Li,this.awaitPos=Ei,this.parseParenArrowList(L,G,te,x);(!te.length||De)&&this.unexpected(this.lastTokStart),sn&&this.unexpected(sn),this.checkExpressionErrors(Ke,!0),this.yieldPos=Li||this.yieldPos,this.awaitPos=Ei||this.awaitPos,te.length>1?(st=this.startNodeAt(Et,Qt),st.expressions=te,this.finishNodeAt(st,"SequenceExpression",xn,jn)):st=te[0]}else st=this.parseParenExpression();if(this.options.preserveParens){var jr=this.startNodeAt(L,G);return jr.expression=st,this.finishNode(jr,"ParenthesizedExpression")}else return st},D.parseParenItem=function(h){return h},D.parseParenArrowList=function(h,x,L,G){return this.parseArrowExpression(this.startNodeAt(h,x),L,!1,G)};var Q=[];D.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var h=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===V.dot){var x=this.startNodeAt(h.start,h.loc&&h.loc.start);x.name="new",h.meta=this.finishNode(x,"Identifier"),this.next();var L=this.containsEsc;return h.property=this.parseIdent(!0),h.property.name!=="target"&&this.raiseRecoverable(h.property.start,"The only valid meta property for new is 'new.target'"),L&&this.raiseRecoverable(h.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(h.start,"'new.target' can only be used in functions and class static block"),this.finishNode(h,"MetaProperty")}var G=this.start,st=this.startLoc;return h.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),G,st,!0,!1),this.eat(V.parenL)?h.arguments=this.parseExprList(V.parenR,this.options.ecmaVersion>=8,!1):h.arguments=Q,this.finishNode(h,"NewExpression")},D.parseTemplateElement=function(h){var x=h.isTagged,L=this.startNode();return this.type===V.invalidTemplate?(x||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),L.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):L.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),L.tail=this.type===V.backQuote,this.finishNode(L,"TemplateElement")},D.parseTemplate=function(h){h===void 0&&(h={});var x=h.isTagged;x===void 0&&(x=!1);var L=this.startNode();this.next(),L.expressions=[];var G=this.parseTemplateElement({isTagged:x});for(L.quasis=[G];!G.tail;)this.type===V.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(V.dollarBraceL),L.expressions.push(this.parseExpression()),this.expect(V.braceR),L.quasis.push(G=this.parseTemplateElement({isTagged:x}));return this.next(),this.finishNode(L,"TemplateLiteral")},D.isAsyncProp=function(h){return!h.computed&&h.key.type==="Identifier"&&h.key.name==="async"&&(this.type===V.name||this.type===V.num||this.type===V.string||this.type===V.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===V.star)&&!Jt.test(this.input.slice(this.lastTokEnd,this.start))},D.parseObj=function(h,x){var L=this.startNode(),G=!0,st={};for(L.properties=[],this.next();!this.eat(V.braceR);){if(G)G=!1;else if(this.expect(V.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(V.braceR))break;var wt=this.parseProperty(h,x);h||this.checkPropClash(wt,st,x),L.properties.push(wt)}return this.finishNode(L,h?"ObjectPattern":"ObjectExpression")},D.parseProperty=function(h,x){var L=this.startNode(),G,st,wt,Et;if(this.options.ecmaVersion>=9&&this.eat(V.ellipsis))return h?(L.argument=this.parseIdent(!1),this.type===V.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(L,"RestElement")):(L.argument=this.parseMaybeAssign(!1,x),this.type===V.comma&&x&&x.trailingComma<0&&(x.trailingComma=this.start),this.finishNode(L,"SpreadElement"));this.options.ecmaVersion>=6&&(L.method=!1,L.shorthand=!1,(h||x)&&(wt=this.start,Et=this.startLoc),h||(G=this.eat(V.star)));var Qt=this.containsEsc;return this.parsePropertyName(L),!h&&!Qt&&this.options.ecmaVersion>=8&&!G&&this.isAsyncProp(L)?(st=!0,G=this.options.ecmaVersion>=9&&this.eat(V.star),this.parsePropertyName(L)):st=!1,this.parsePropertyValue(L,h,G,st,wt,Et,x,Qt),this.finishNode(L,"Property")},D.parseGetterSetter=function(h){var x=h.key.name;this.parsePropertyName(h),h.value=this.parseMethod(!1),h.kind=x;var L=h.kind==="get"?0:1;if(h.value.params.length!==L){var G=h.value.start;h.kind==="get"?this.raiseRecoverable(G,"getter should have no params"):this.raiseRecoverable(G,"setter should have exactly one param")}else h.kind==="set"&&h.value.params[0].type==="RestElement"&&this.raiseRecoverable(h.value.params[0].start,"Setter cannot use rest params")},D.parsePropertyValue=function(h,x,L,G,st,wt,Et,Qt){(L||G)&&this.type===V.colon&&this.unexpected(),this.eat(V.colon)?(h.value=x?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Et),h.kind="init"):this.options.ecmaVersion>=6&&this.type===V.parenL?(x&&this.unexpected(),h.method=!0,h.value=this.parseMethod(L,G),h.kind="init"):!x&&!Qt&&this.options.ecmaVersion>=5&&!h.computed&&h.key.type==="Identifier"&&(h.key.name==="get"||h.key.name==="set")&&this.type!==V.comma&&this.type!==V.braceR&&this.type!==V.eq?((L||G)&&this.unexpected(),this.parseGetterSetter(h)):this.options.ecmaVersion>=6&&!h.computed&&h.key.type==="Identifier"?((L||G)&&this.unexpected(),this.checkUnreserved(h.key),h.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=st),x?h.value=this.parseMaybeDefault(st,wt,this.copyNode(h.key)):this.type===V.eq&&Et?(Et.shorthandAssign<0&&(Et.shorthandAssign=this.start),h.value=this.parseMaybeDefault(st,wt,this.copyNode(h.key))):h.value=this.copyNode(h.key),h.kind="init",h.shorthand=!0):this.unexpected()},D.parsePropertyName=function(h){if(this.options.ecmaVersion>=6){if(this.eat(V.bracketL))return h.computed=!0,h.key=this.parseMaybeAssign(),this.expect(V.bracketR),h.key;h.computed=!1}return h.key=this.type===V.num||this.type===V.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},D.initFunction=function(h){h.id=null,this.options.ecmaVersion>=6&&(h.generator=h.expression=!1),this.options.ecmaVersion>=8&&(h.async=!1)},D.parseMethod=function(h,x,L){var G=this.startNode(),st=this.yieldPos,wt=this.awaitPos,Et=this.awaitIdentPos;return this.initFunction(G),this.options.ecmaVersion>=6&&(G.generator=h),this.options.ecmaVersion>=8&&(G.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ns(x,G.generator)|ts|(L?ho:0)),this.expect(V.parenL),G.params=this.parseBindingList(V.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(G,!1,!0,!1),this.yieldPos=st,this.awaitPos=wt,this.awaitIdentPos=Et,this.finishNode(G,"FunctionExpression")},D.parseArrowExpression=function(h,x,L,G){var st=this.yieldPos,wt=this.awaitPos,Et=this.awaitIdentPos;return this.enterScope(ns(L,!1)|tr),this.initFunction(h),this.options.ecmaVersion>=8&&(h.async=!!L),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,h.params=this.toAssignableList(x,!0),this.parseFunctionBody(h,!0,!1,G),this.yieldPos=st,this.awaitPos=wt,this.awaitIdentPos=Et,this.finishNode(h,"ArrowFunctionExpression")},D.parseFunctionBody=function(h,x,L,G){var st=x&&this.type!==V.braceL,wt=this.strict,Et=!1;if(st)h.body=this.parseMaybeAssign(G),h.expression=!0,this.checkParams(h,!1);else{var Qt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(h.params);(!wt||Qt)&&(Et=this.strictDirective(this.end),Et&&Qt&&this.raiseRecoverable(h.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var te=this.labels;this.labels=[],Et&&(this.strict=!0),this.checkParams(h,!wt&&!Et&&!x&&!L&&this.isSimpleParamList(h.params)),this.strict&&h.id&&this.checkLValSimple(h.id,s),h.body=this.parseBlock(!1,void 0,Et&&!wt),h.expression=!1,this.adaptDirectivePrologue(h.body.body),this.labels=te}this.exitScope()},D.isSimpleParamList=function(h){for(var x=0,L=h;x<L.length;x+=1){var G=L[x];if(G.type!=="Identifier")return!1}return!0},D.checkParams=function(h,x){for(var L=Object.create(null),G=0,st=h.params;G<st.length;G+=1){var wt=st[G];this.checkLValInnerPattern(wt,rs,x?null:L)}},D.parseExprList=function(h,x,L,G){for(var st=[],wt=!0;!this.eat(h);){if(wt)wt=!1;else if(this.expect(V.comma),x&&this.afterTrailingComma(h))break;var Et=void 0;L&&this.type===V.comma?Et=null:this.type===V.ellipsis?(Et=this.parseSpread(G),G&&this.type===V.comma&&G.trailingComma<0&&(G.trailingComma=this.start)):Et=this.parseMaybeAssign(!1,G),st.push(Et)}return st},D.checkUnreserved=function(h){var x=h.start,L=h.end,G=h.name;if(this.inGenerator&&G==="yield"&&this.raiseRecoverable(x,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&G==="await"&&this.raiseRecoverable(x,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&is)&&G==="arguments"&&this.raiseRecoverable(x,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(G==="arguments"||G==="await")&&this.raise(x,"Cannot use "+G+" in class static initialization block"),this.keywords.test(G)&&this.raise(x,"Unexpected keyword '"+G+"'"),!(this.options.ecmaVersion<6&&this.input.slice(x,L).indexOf("\\")!==-1)){var st=this.strict?this.reservedWordsStrict:this.reservedWords;st.test(G)&&(!this.inAsync&&G==="await"&&this.raiseRecoverable(x,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(x,"The keyword '"+G+"' is reserved"))}},D.parseIdent=function(h){var x=this.parseIdentNode();return this.next(!!h),this.finishNode(x,"Identifier"),h||(this.checkUnreserved(x),x.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=x.start)),x},D.parseIdentNode=function(){var h=this.startNode();return this.type===V.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,(h.name==="class"||h.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=V.name):this.unexpected(),h},D.parsePrivateIdent=function(){var h=this.startNode();return this.type===V.privateId?h.name=this.value:this.unexpected(),this.next(),this.finishNode(h,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(h.start,"Private field '#"+h.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(h)),h},D.parseYield=function(h){this.yieldPos||(this.yieldPos=this.start);var x=this.startNode();return this.next(),this.type===V.semi||this.canInsertSemicolon()||this.type!==V.star&&!this.type.startsExpr?(x.delegate=!1,x.argument=null):(x.delegate=this.eat(V.star),x.argument=this.parseMaybeAssign(h)),this.finishNode(x,"YieldExpression")},D.parseAwait=function(h){this.awaitPos||(this.awaitPos=this.start);var x=this.startNode();return this.next(),x.argument=this.parseMaybeUnary(null,!0,!1,h),this.finishNode(x,"AwaitExpression")};var W=c.prototype;W.raise=function(h,x){var L=fe(this.input,h);x+=" ("+L.line+":"+L.column+")",this.sourceFile&&(x+=" in "+this.sourceFile);var G=new SyntaxError(x);throw G.pos=h,G.loc=L,G.raisedAt=this.pos,G},W.raiseRecoverable=W.raise,W.curPosition=function(){if(this.options.locations)return new ue(this.curLine,this.pos-this.lineStart)};var et=c.prototype,nt=function(x){this.flags=x,this.var=[],this.lexical=[],this.functions=[]};et.enterScope=function(h){this.scopeStack.push(new nt(h))},et.exitScope=function(){this.scopeStack.pop()},et.treatFunctionsAsVarInScope=function(h){return h.flags&ze||!this.inModule&&h.flags&Be},et.declareName=function(h,x,L){var G=!1;if(x===Ye){var st=this.currentScope();G=st.lexical.indexOf(h)>-1||st.functions.indexOf(h)>-1||st.var.indexOf(h)>-1,st.lexical.push(h),this.inModule&&st.flags&Be&&delete this.undefinedExports[h]}else if(x===Le){var wt=this.currentScope();wt.lexical.push(h)}else if(x===Ta){var Et=this.currentScope();this.treatFunctionsAsVar?G=Et.lexical.indexOf(h)>-1:G=Et.lexical.indexOf(h)>-1||Et.var.indexOf(h)>-1,Et.functions.push(h)}else for(var Qt=this.scopeStack.length-1;Qt>=0;--Qt){var te=this.scopeStack[Qt];if(te.lexical.indexOf(h)>-1&&!(te.flags&Ls&&te.lexical[0]===h)||!this.treatFunctionsAsVarInScope(te)&&te.functions.indexOf(h)>-1){G=!0;break}if(te.var.push(h),this.inModule&&te.flags&Be&&delete this.undefinedExports[h],te.flags&is)break}G&&this.raiseRecoverable(L,"Identifier '"+h+"' has already been declared")},et.checkLocalExport=function(h){this.scopeStack[0].lexical.indexOf(h.name)===-1&&this.scopeStack[0].var.indexOf(h.name)===-1&&(this.undefinedExports[h.name]=h)},et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},et.currentVarScope=function(){for(var h=this.scopeStack.length-1;;h--){var x=this.scopeStack[h];if(x.flags&(is|es|Fi))return x}},et.currentThisScope=function(){for(var h=this.scopeStack.length-1;;h--){var x=this.scopeStack[h];if(x.flags&(is|es|Fi)&&!(x.flags&tr))return x}};var at=function(x,L,G){this.type="",this.start=L,this.end=0,x.options.locations&&(this.loc=new ee(x,G)),x.options.directSourceFile&&(this.sourceFile=x.options.directSourceFile),x.options.ranges&&(this.range=[L,0])},dt=c.prototype;dt.startNode=function(){return new at(this,this.start,this.startLoc)},dt.startNodeAt=function(h,x){return new at(this,h,x)};function rt(h,x,L,G){return h.type=x,h.end=L,this.options.locations&&(h.loc.end=G),this.options.ranges&&(h.range[1]=L),h}dt.finishNode=function(h,x){return rt.call(this,h,x,this.lastTokEnd,this.lastTokEndLoc)},dt.finishNodeAt=function(h,x,L,G){return rt.call(this,h,x,L,G)},dt.copyNode=function(h){var x=new at(this,h.start,this.startLoc);for(var L in h)x[L]=h[L];return x};var ct="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",pt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",bt=pt+" Extended_Pictographic",xt=bt,Ot=xt+" EBase EComp EMod EPres ExtPict",It=Ot,qt=It,$t={9:pt,10:bt,11:xt,12:Ot,13:It,14:qt},se="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",jt={9:"",10:"",11:"",12:"",13:"",14:se},Bt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ie="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ae=ie+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",oe=ae+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",be=oe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",me=be+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",we=me+" "+ct,Me={9:ie,10:ae,11:oe,12:be,13:me,14:we},xe={};function di(h){var x=xe[h]={binary:le($t[h]+" "+Bt),binaryOfStrings:le(jt[h]),nonBinary:{General_Category:le(Bt),Script:le(Me[h])}};x.nonBinary.Script_Extensions=x.nonBinary.Script,x.nonBinary.gc=x.nonBinary.General_Category,x.nonBinary.sc=x.nonBinary.Script,x.nonBinary.scx=x.nonBinary.Script_Extensions}for(var We=0,yi=[9,10,11,12,13,14];We<yi.length;We+=1){var gi=yi[We];di(gi)}var Kt=c.prototype,ei=function(x,L){this.parent=x,this.base=L||this};ei.prototype.separatedFrom=function(x){for(var L=this;L;L=L.parent)for(var G=x;G;G=G.parent)if(L.base===G.base&&L!==G)return!0;return!1},ei.prototype.sibling=function(){return new ei(this.parent,this.base)};var si=function(x){this.parser=x,this.validFlags="gim"+(x.options.ecmaVersion>=6?"uy":"")+(x.options.ecmaVersion>=9?"s":"")+(x.options.ecmaVersion>=13?"d":"")+(x.options.ecmaVersion>=15?"v":""),this.unicodeProperties=xe[x.options.ecmaVersion>=14?14:x.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};si.prototype.reset=function(x,L,G){var st=G.indexOf("v")!==-1,wt=G.indexOf("u")!==-1;this.start=x|0,this.source=L+"",this.flags=G,st&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=wt&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=wt&&this.parser.options.ecmaVersion>=9)},si.prototype.raise=function(x){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+x)},si.prototype.at=function(x,L){L===void 0&&(L=!1);var G=this.source,st=G.length;if(x>=st)return-1;var wt=G.charCodeAt(x);if(!(L||this.switchU)||wt<=55295||wt>=57344||x+1>=st)return wt;var Et=G.charCodeAt(x+1);return Et>=56320&&Et<=57343?(wt<<10)+Et-56613888:wt},si.prototype.nextIndex=function(x,L){L===void 0&&(L=!1);var G=this.source,st=G.length;if(x>=st)return st;var wt=G.charCodeAt(x),Et;return!(L||this.switchU)||wt<=55295||wt>=57344||x+1>=st||(Et=G.charCodeAt(x+1))<56320||Et>57343?x+1:x+2},si.prototype.current=function(x){return x===void 0&&(x=!1),this.at(this.pos,x)},si.prototype.lookahead=function(x){return x===void 0&&(x=!1),this.at(this.nextIndex(this.pos,x),x)},si.prototype.advance=function(x){x===void 0&&(x=!1),this.pos=this.nextIndex(this.pos,x)},si.prototype.eat=function(x,L){return L===void 0&&(L=!1),this.current(L)===x?(this.advance(L),!0):!1},si.prototype.eatChars=function(x,L){L===void 0&&(L=!1);for(var G=this.pos,st=0,wt=x;st<wt.length;st+=1){var Et=wt[st],Qt=this.at(G,L);if(Qt===-1||Qt!==Et)return!1;G=this.nextIndex(G,L)}return this.pos=G,!0},Kt.validateRegExpFlags=function(h){for(var x=h.validFlags,L=h.flags,G=!1,st=!1,wt=0;wt<L.length;wt++){var Et=L.charAt(wt);x.indexOf(Et)===-1&&this.raise(h.start,"Invalid regular expression flag"),L.indexOf(Et,wt+1)>-1&&this.raise(h.start,"Duplicate regular expression flag"),Et==="u"&&(G=!0),Et==="v"&&(st=!0)}this.options.ecmaVersion>=15&&G&&st&&this.raise(h.start,"Invalid regular expression flag")};function wi(h){for(var x in h)return!0;return!1}Kt.validateRegExpPattern=function(h){this.regexp_pattern(h),!h.switchN&&this.options.ecmaVersion>=9&&wi(h.groupNames)&&(h.switchN=!0,this.regexp_pattern(h))},Kt.regexp_pattern=function(h){h.pos=0,h.lastIntValue=0,h.lastStringValue="",h.lastAssertionIsQuantifiable=!1,h.numCapturingParens=0,h.maxBackReference=0,h.groupNames=Object.create(null),h.backReferenceNames.length=0,h.branchID=null,this.regexp_disjunction(h),h.pos!==h.source.length&&(h.eat(41)&&h.raise("Unmatched ')'"),(h.eat(93)||h.eat(125))&&h.raise("Lone quantifier brackets")),h.maxBackReference>h.numCapturingParens&&h.raise("Invalid escape");for(var x=0,L=h.backReferenceNames;x<L.length;x+=1){var G=L[x];h.groupNames[G]||h.raise("Invalid named capture referenced")}},Kt.regexp_disjunction=function(h){var x=this.options.ecmaVersion>=16;for(x&&(h.branchID=new ei(h.branchID,null)),this.regexp_alternative(h);h.eat(124);)x&&(h.branchID=h.branchID.sibling()),this.regexp_alternative(h);x&&(h.branchID=h.branchID.parent),this.regexp_eatQuantifier(h,!0)&&h.raise("Nothing to repeat"),h.eat(123)&&h.raise("Lone quantifier brackets")},Kt.regexp_alternative=function(h){for(;h.pos<h.source.length&&this.regexp_eatTerm(h););},Kt.regexp_eatTerm=function(h){return this.regexp_eatAssertion(h)?(h.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(h)&&h.switchU&&h.raise("Invalid quantifier"),!0):(h.switchU?this.regexp_eatAtom(h):this.regexp_eatExtendedAtom(h))?(this.regexp_eatQuantifier(h),!0):!1},Kt.regexp_eatAssertion=function(h){var x=h.pos;if(h.lastAssertionIsQuantifiable=!1,h.eat(94)||h.eat(36))return!0;if(h.eat(92)){if(h.eat(66)||h.eat(98))return!0;h.pos=x}if(h.eat(40)&&h.eat(63)){var L=!1;if(this.options.ecmaVersion>=9&&(L=h.eat(60)),h.eat(61)||h.eat(33))return this.regexp_disjunction(h),h.eat(41)||h.raise("Unterminated group"),h.lastAssertionIsQuantifiable=!L,!0}return h.pos=x,!1},Kt.regexp_eatQuantifier=function(h,x){return x===void 0&&(x=!1),this.regexp_eatQuantifierPrefix(h,x)?(h.eat(63),!0):!1},Kt.regexp_eatQuantifierPrefix=function(h,x){return h.eat(42)||h.eat(43)||h.eat(63)||this.regexp_eatBracedQuantifier(h,x)},Kt.regexp_eatBracedQuantifier=function(h,x){var L=h.pos;if(h.eat(123)){var G=0,st=-1;if(this.regexp_eatDecimalDigits(h)&&(G=h.lastIntValue,h.eat(44)&&this.regexp_eatDecimalDigits(h)&&(st=h.lastIntValue),h.eat(125)))return st!==-1&&st<G&&!x&&h.raise("numbers out of order in {} quantifier"),!0;h.switchU&&!x&&h.raise("Incomplete quantifier"),h.pos=L}return!1},Kt.regexp_eatAtom=function(h){return this.regexp_eatPatternCharacters(h)||h.eat(46)||this.regexp_eatReverseSolidusAtomEscape(h)||this.regexp_eatCharacterClass(h)||this.regexp_eatUncapturingGroup(h)||this.regexp_eatCapturingGroup(h)},Kt.regexp_eatReverseSolidusAtomEscape=function(h){var x=h.pos;if(h.eat(92)){if(this.regexp_eatAtomEscape(h))return!0;h.pos=x}return!1},Kt.regexp_eatUncapturingGroup=function(h){var x=h.pos;if(h.eat(40)){if(h.eat(63)){if(this.options.ecmaVersion>=16){var L=this.regexp_eatModifiers(h),G=h.eat(45);if(L||G){for(var st=0;st<L.length;st++){var wt=L.charAt(st);L.indexOf(wt,st+1)>-1&&h.raise("Duplicate regular expression modifiers")}if(G){var Et=this.regexp_eatModifiers(h);!L&&!Et&&h.current()===58&&h.raise("Invalid regular expression modifiers");for(var Qt=0;Qt<Et.length;Qt++){var te=Et.charAt(Qt);(Et.indexOf(te,Qt+1)>-1||L.indexOf(te)>-1)&&h.raise("Duplicate regular expression modifiers")}}}}if(h.eat(58)){if(this.regexp_disjunction(h),h.eat(41))return!0;h.raise("Unterminated group")}}h.pos=x}return!1},Kt.regexp_eatCapturingGroup=function(h){if(h.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(h):h.current()===63&&h.raise("Invalid group"),this.regexp_disjunction(h),h.eat(41))return h.numCapturingParens+=1,!0;h.raise("Unterminated group")}return!1},Kt.regexp_eatModifiers=function(h){for(var x="",L=0;(L=h.current())!==-1&&en(L);)x+=ft(L),h.advance();return x};function en(h){return h===105||h===109||h===115}Kt.regexp_eatExtendedAtom=function(h){return h.eat(46)||this.regexp_eatReverseSolidusAtomEscape(h)||this.regexp_eatCharacterClass(h)||this.regexp_eatUncapturingGroup(h)||this.regexp_eatCapturingGroup(h)||this.regexp_eatInvalidBracedQuantifier(h)||this.regexp_eatExtendedPatternCharacter(h)},Kt.regexp_eatInvalidBracedQuantifier=function(h){return this.regexp_eatBracedQuantifier(h,!0)&&h.raise("Nothing to repeat"),!1},Kt.regexp_eatSyntaxCharacter=function(h){var x=h.current();return bi(x)?(h.lastIntValue=x,h.advance(),!0):!1};function bi(h){return h===36||h>=40&&h<=43||h===46||h===63||h>=91&&h<=94||h>=123&&h<=125}Kt.regexp_eatPatternCharacters=function(h){for(var x=h.pos,L=0;(L=h.current())!==-1&&!bi(L);)h.advance();return h.pos!==x},Kt.regexp_eatExtendedPatternCharacter=function(h){var x=h.current();return x!==-1&&x!==36&&!(x>=40&&x<=43)&&x!==46&&x!==63&&x!==91&&x!==94&&x!==124?(h.advance(),!0):!1},Kt.regexp_groupSpecifier=function(h){if(h.eat(63)){this.regexp_eatGroupName(h)||h.raise("Invalid group");var x=this.options.ecmaVersion>=16,L=h.groupNames[h.lastStringValue];if(L)if(x)for(var G=0,st=L;G<st.length;G+=1){var wt=st[G];wt.separatedFrom(h.branchID)||h.raise("Duplicate capture group name")}else h.raise("Duplicate capture group name");x?(L||(h.groupNames[h.lastStringValue]=[])).push(h.branchID):h.groupNames[h.lastStringValue]=!0}},Kt.regexp_eatGroupName=function(h){if(h.lastStringValue="",h.eat(60)){if(this.regexp_eatRegExpIdentifierName(h)&&h.eat(62))return!0;h.raise("Invalid capture group name")}return!1},Kt.regexp_eatRegExpIdentifierName=function(h){if(h.lastStringValue="",this.regexp_eatRegExpIdentifierStart(h)){for(h.lastStringValue+=ft(h.lastIntValue);this.regexp_eatRegExpIdentifierPart(h);)h.lastStringValue+=ft(h.lastIntValue);return!0}return!1},Kt.regexp_eatRegExpIdentifierStart=function(h){var x=h.pos,L=this.options.ecmaVersion>=11,G=h.current(L);return h.advance(L),G===92&&this.regexp_eatRegExpUnicodeEscapeSequence(h,L)&&(G=h.lastIntValue),cn(G)?(h.lastIntValue=G,!0):(h.pos=x,!1)};function cn(h){return X(h,!0)||h===36||h===95}Kt.regexp_eatRegExpIdentifierPart=function(h){var x=h.pos,L=this.options.ecmaVersion>=11,G=h.current(L);return h.advance(L),G===92&&this.regexp_eatRegExpUnicodeEscapeSequence(h,L)&&(G=h.lastIntValue),_n(G)?(h.lastIntValue=G,!0):(h.pos=x,!1)};function _n(h){return z(h,!0)||h===36||h===95||h===8204||h===8205}Kt.regexp_eatAtomEscape=function(h){return this.regexp_eatBackReference(h)||this.regexp_eatCharacterClassEscape(h)||this.regexp_eatCharacterEscape(h)||h.switchN&&this.regexp_eatKGroupName(h)?!0:(h.switchU&&(h.current()===99&&h.raise("Invalid unicode escape"),h.raise("Invalid escape")),!1)},Kt.regexp_eatBackReference=function(h){var x=h.pos;if(this.regexp_eatDecimalEscape(h)){var L=h.lastIntValue;if(h.switchU)return L>h.maxBackReference&&(h.maxBackReference=L),!0;if(L<=h.numCapturingParens)return!0;h.pos=x}return!1},Kt.regexp_eatKGroupName=function(h){if(h.eat(107)){if(this.regexp_eatGroupName(h))return h.backReferenceNames.push(h.lastStringValue),!0;h.raise("Invalid named reference")}return!1},Kt.regexp_eatCharacterEscape=function(h){return this.regexp_eatControlEscape(h)||this.regexp_eatCControlLetter(h)||this.regexp_eatZero(h)||this.regexp_eatHexEscapeSequence(h)||this.regexp_eatRegExpUnicodeEscapeSequence(h,!1)||!h.switchU&&this.regexp_eatLegacyOctalEscapeSequence(h)||this.regexp_eatIdentityEscape(h)},Kt.regexp_eatCControlLetter=function(h){var x=h.pos;if(h.eat(99)){if(this.regexp_eatControlLetter(h))return!0;h.pos=x}return!1},Kt.regexp_eatZero=function(h){return h.current()===48&&!yn(h.lookahead())?(h.lastIntValue=0,h.advance(),!0):!1},Kt.regexp_eatControlEscape=function(h){var x=h.current();return x===116?(h.lastIntValue=9,h.advance(),!0):x===110?(h.lastIntValue=10,h.advance(),!0):x===118?(h.lastIntValue=11,h.advance(),!0):x===102?(h.lastIntValue=12,h.advance(),!0):x===114?(h.lastIntValue=13,h.advance(),!0):!1},Kt.regexp_eatControlLetter=function(h){var x=h.current();return Ai(x)?(h.lastIntValue=x%32,h.advance(),!0):!1};function Ai(h){return h>=65&&h<=90||h>=97&&h<=122}Kt.regexp_eatRegExpUnicodeEscapeSequence=function(h,x){x===void 0&&(x=!1);var L=h.pos,G=x||h.switchU;if(h.eat(117)){if(this.regexp_eatFixedHexDigits(h,4)){var st=h.lastIntValue;if(G&&st>=55296&&st<=56319){var wt=h.pos;if(h.eat(92)&&h.eat(117)&&this.regexp_eatFixedHexDigits(h,4)){var Et=h.lastIntValue;if(Et>=56320&&Et<=57343)return h.lastIntValue=(st-55296)*1024+(Et-56320)+65536,!0}h.pos=wt,h.lastIntValue=st}return!0}if(G&&h.eat(123)&&this.regexp_eatHexDigits(h)&&h.eat(125)&&Zi(h.lastIntValue))return!0;G&&h.raise("Invalid unicode escape"),h.pos=L}return!1};function Zi(h){return h>=0&&h<=1114111}Kt.regexp_eatIdentityEscape=function(h){if(h.switchU)return this.regexp_eatSyntaxCharacter(h)?!0:h.eat(47)?(h.lastIntValue=47,!0):!1;var x=h.current();return x!==99&&(!h.switchN||x!==107)?(h.lastIntValue=x,h.advance(),!0):!1},Kt.regexp_eatDecimalEscape=function(h){h.lastIntValue=0;var x=h.current();if(x>=49&&x<=57){do h.lastIntValue=10*h.lastIntValue+(x-48),h.advance();while((x=h.current())>=48&&x<=57);return!0}return!1};var hn=0,Ci=1,ii=2;Kt.regexp_eatCharacterClassEscape=function(h){var x=h.current();if(Ps(x))return h.lastIntValue=-1,h.advance(),Ci;var L=!1;if(h.switchU&&this.options.ecmaVersion>=9&&((L=x===80)||x===112)){h.lastIntValue=-1,h.advance();var G;if(h.eat(123)&&(G=this.regexp_eatUnicodePropertyValueExpression(h))&&h.eat(125))return L&&G===ii&&h.raise("Invalid property name"),G;h.raise("Invalid property name")}return hn};function Ps(h){return h===100||h===68||h===115||h===83||h===119||h===87}Kt.regexp_eatUnicodePropertyValueExpression=function(h){var x=h.pos;if(this.regexp_eatUnicodePropertyName(h)&&h.eat(61)){var L=h.lastStringValue;if(this.regexp_eatUnicodePropertyValue(h)){var G=h.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(h,L,G),Ci}}if(h.pos=x,this.regexp_eatLoneUnicodePropertyNameOrValue(h)){var st=h.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(h,st)}return hn},Kt.regexp_validateUnicodePropertyNameAndValue=function(h,x,L){ut(h.unicodeProperties.nonBinary,x)||h.raise("Invalid property name"),h.unicodeProperties.nonBinary[x].test(L)||h.raise("Invalid property value")},Kt.regexp_validateUnicodePropertyNameOrValue=function(h,x){if(h.unicodeProperties.binary.test(x))return Ci;if(h.switchV&&h.unicodeProperties.binaryOfStrings.test(x))return ii;h.raise("Invalid property name")},Kt.regexp_eatUnicodePropertyName=function(h){var x=0;for(h.lastStringValue="";Ns(x=h.current());)h.lastStringValue+=ft(x),h.advance();return h.lastStringValue!==""};function Ns(h){return Ai(h)||h===95}Kt.regexp_eatUnicodePropertyValue=function(h){var x=0;for(h.lastStringValue="";Bs(x=h.current());)h.lastStringValue+=ft(x),h.advance();return h.lastStringValue!==""};function Bs(h){return Ns(h)||yn(h)}Kt.regexp_eatLoneUnicodePropertyNameOrValue=function(h){return this.regexp_eatUnicodePropertyValue(h)},Kt.regexp_eatCharacterClass=function(h){if(h.eat(91)){var x=h.eat(94),L=this.regexp_classContents(h);return h.eat(93)||h.raise("Unterminated character class"),x&&L===ii&&h.raise("Negated character class may contain strings"),!0}return!1},Kt.regexp_classContents=function(h){return h.current()===93?Ci:h.switchV?this.regexp_classSetExpression(h):(this.regexp_nonEmptyClassRanges(h),Ci)},Kt.regexp_nonEmptyClassRanges=function(h){for(;this.regexp_eatClassAtom(h);){var x=h.lastIntValue;if(h.eat(45)&&this.regexp_eatClassAtom(h)){var L=h.lastIntValue;h.switchU&&(x===-1||L===-1)&&h.raise("Invalid character class"),x!==-1&&L!==-1&&x>L&&h.raise("Range out of order in character class")}}},Kt.regexp_eatClassAtom=function(h){var x=h.pos;if(h.eat(92)){if(this.regexp_eatClassEscape(h))return!0;if(h.switchU){var L=h.current();(L===99||er(L))&&h.raise("Invalid class escape"),h.raise("Invalid escape")}h.pos=x}var G=h.current();return G!==93?(h.lastIntValue=G,h.advance(),!0):!1},Kt.regexp_eatClassEscape=function(h){var x=h.pos;if(h.eat(98))return h.lastIntValue=8,!0;if(h.switchU&&h.eat(45))return h.lastIntValue=45,!0;if(!h.switchU&&h.eat(99)){if(this.regexp_eatClassControlLetter(h))return!0;h.pos=x}return this.regexp_eatCharacterClassEscape(h)||this.regexp_eatCharacterEscape(h)},Kt.regexp_classSetExpression=function(h){var x=Ci,L;if(!this.regexp_eatClassSetRange(h))if(L=this.regexp_eatClassSetOperand(h)){L===ii&&(x=ii);for(var G=h.pos;h.eatChars([38,38]);){if(h.current()!==38&&(L=this.regexp_eatClassSetOperand(h))){L!==ii&&(x=Ci);continue}h.raise("Invalid character in character class")}if(G!==h.pos)return x;for(;h.eatChars([45,45]);)this.regexp_eatClassSetOperand(h)||h.raise("Invalid character in character class");if(G!==h.pos)return x}else h.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(h)){if(L=this.regexp_eatClassSetOperand(h),!L)return x;L===ii&&(x=ii)}},Kt.regexp_eatClassSetRange=function(h){var x=h.pos;if(this.regexp_eatClassSetCharacter(h)){var L=h.lastIntValue;if(h.eat(45)&&this.regexp_eatClassSetCharacter(h)){var G=h.lastIntValue;return L!==-1&&G!==-1&&L>G&&h.raise("Range out of order in character class"),!0}h.pos=x}return!1},Kt.regexp_eatClassSetOperand=function(h){return this.regexp_eatClassSetCharacter(h)?Ci:this.regexp_eatClassStringDisjunction(h)||this.regexp_eatNestedClass(h)},Kt.regexp_eatNestedClass=function(h){var x=h.pos;if(h.eat(91)){var L=h.eat(94),G=this.regexp_classContents(h);if(h.eat(93))return L&&G===ii&&h.raise("Negated character class may contain strings"),G;h.pos=x}if(h.eat(92)){var st=this.regexp_eatCharacterClassEscape(h);if(st)return st;h.pos=x}return null},Kt.regexp_eatClassStringDisjunction=function(h){var x=h.pos;if(h.eatChars([92,113])){if(h.eat(123)){var L=this.regexp_classStringDisjunctionContents(h);if(h.eat(125))return L}else h.raise("Invalid escape");h.pos=x}return null},Kt.regexp_classStringDisjunctionContents=function(h){for(var x=this.regexp_classString(h);h.eat(124);)this.regexp_classString(h)===ii&&(x=ii);return x},Kt.regexp_classString=function(h){for(var x=0;this.regexp_eatClassSetCharacter(h);)x++;return x===1?Ci:ii},Kt.regexp_eatClassSetCharacter=function(h){var x=h.pos;if(h.eat(92))return this.regexp_eatCharacterEscape(h)||this.regexp_eatClassSetReservedPunctuator(h)?!0:h.eat(98)?(h.lastIntValue=8,!0):(h.pos=x,!1);var L=h.current();return L<0||L===h.lookahead()&&vr(L)||ka(L)?!1:(h.advance(),h.lastIntValue=L,!0)};function vr(h){return h===33||h>=35&&h<=38||h>=42&&h<=44||h===46||h>=58&&h<=64||h===94||h===96||h===126}function ka(h){return h===40||h===41||h===45||h===47||h>=91&&h<=93||h>=123&&h<=125}Kt.regexp_eatClassSetReservedPunctuator=function(h){var x=h.current();return ss(x)?(h.lastIntValue=x,h.advance(),!0):!1};function ss(h){return h===33||h===35||h===37||h===38||h===44||h===45||h>=58&&h<=62||h===64||h===96||h===126}Kt.regexp_eatClassControlLetter=function(h){var x=h.current();return yn(x)||x===95?(h.lastIntValue=x%32,h.advance(),!0):!1},Kt.regexp_eatHexEscapeSequence=function(h){var x=h.pos;if(h.eat(120)){if(this.regexp_eatFixedHexDigits(h,2))return!0;h.switchU&&h.raise("Invalid escape"),h.pos=x}return!1},Kt.regexp_eatDecimalDigits=function(h){var x=h.pos,L=0;for(h.lastIntValue=0;yn(L=h.current());)h.lastIntValue=10*h.lastIntValue+(L-48),h.advance();return h.pos!==x};function yn(h){return h>=48&&h<=57}Kt.regexp_eatHexDigits=function(h){var x=h.pos,L=0;for(h.lastIntValue=0;as(L=h.current());)h.lastIntValue=16*h.lastIntValue+Dr(L),h.advance();return h.pos!==x};function as(h){return h>=48&&h<=57||h>=65&&h<=70||h>=97&&h<=102}function Dr(h){return h>=65&&h<=70?10+(h-65):h>=97&&h<=102?10+(h-97):h-48}Kt.regexp_eatLegacyOctalEscapeSequence=function(h){if(this.regexp_eatOctalDigit(h)){var x=h.lastIntValue;if(this.regexp_eatOctalDigit(h)){var L=h.lastIntValue;x<=3&&this.regexp_eatOctalDigit(h)?h.lastIntValue=x*64+L*8+h.lastIntValue:h.lastIntValue=x*8+L}else h.lastIntValue=x;return!0}return!1},Kt.regexp_eatOctalDigit=function(h){var x=h.current();return er(x)?(h.lastIntValue=x-48,h.advance(),!0):(h.lastIntValue=0,!1)};function er(h){return h>=48&&h<=55}Kt.regexp_eatFixedHexDigits=function(h,x){var L=h.pos;h.lastIntValue=0;for(var G=0;G<x;++G){var st=h.current();if(!as(st))return h.pos=L,!1;h.lastIntValue=16*h.lastIntValue+Dr(st),h.advance()}return!0};var fn=function(x){this.type=x.type,this.value=x.value,this.start=x.start,this.end=x.end,x.options.locations&&(this.loc=new ee(x,x.startLoc,x.endLoc)),x.options.ranges&&(this.range=[x.start,x.end])},Oe=c.prototype;Oe.next=function(h){!h&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fn(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Oe.getToken=function(){return this.next(),new fn(this)},typeof Symbol<"u"&&(Oe[Symbol.iterator]=function(){var h=this;return{next:function(){var x=h.getToken();return{done:x.type===V.eof,value:x}}}}),Oe.nextToken=function(){var h=this.curContext();if((!h||!h.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(V.eof);if(h.override)return h.override(this);this.readToken(this.fullCharCodeAtPos())},Oe.readToken=function(h){return X(h,this.options.ecmaVersion>=6)||h===92?this.readWord():this.getTokenFromCode(h)},Oe.fullCharCodeAtPos=function(){var h=this.input.charCodeAt(this.pos);if(h<=55295||h>=56320)return h;var x=this.input.charCodeAt(this.pos+1);return x<=56319||x>=57344?h:(h<<10)+x-56613888},Oe.skipBlockComment=function(){var h=this.options.onComment&&this.curPosition(),x=this.pos,L=this.input.indexOf("*/",this.pos+=2);if(L===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=L+2,this.options.locations)for(var G=void 0,st=x;(G=he(this.input,st,this.pos))>-1;)++this.curLine,st=this.lineStart=G;this.options.onComment&&this.options.onComment(!0,this.input.slice(x+2,L),x,this.pos,h,this.curPosition())},Oe.skipLineComment=function(h){for(var x=this.pos,L=this.options.onComment&&this.curPosition(),G=this.input.charCodeAt(this.pos+=h);this.pos<this.input.length&&!Zt(G);)G=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(x+h,this.pos),x,this.pos,L,this.curPosition())},Oe.skipSpace=function(){t:for(;this.pos<this.input.length;){var h=this.input.charCodeAt(this.pos);switch(h){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(h>8&&h<14||h>=5760&&Pt.test(String.fromCharCode(h)))++this.pos;else break t}}},Oe.finishToken=function(h,x){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var L=this.type;this.type=h,this.value=x,this.updateContext(L)},Oe.readToken_dot=function(){var h=this.input.charCodeAt(this.pos+1);if(h>=48&&h<=57)return this.readNumber(!0);var x=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&h===46&&x===46?(this.pos+=3,this.finishToken(V.ellipsis)):(++this.pos,this.finishToken(V.dot))},Oe.readToken_slash=function(){var h=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):h===61?this.finishOp(V.assign,2):this.finishOp(V.slash,1)},Oe.readToken_mult_modulo_exp=function(h){var x=this.input.charCodeAt(this.pos+1),L=1,G=h===42?V.star:V.modulo;return this.options.ecmaVersion>=7&&h===42&&x===42&&(++L,G=V.starstar,x=this.input.charCodeAt(this.pos+2)),x===61?this.finishOp(V.assign,L+1):this.finishOp(G,L)},Oe.readToken_pipe_amp=function(h){var x=this.input.charCodeAt(this.pos+1);if(x===h){if(this.options.ecmaVersion>=12){var L=this.input.charCodeAt(this.pos+2);if(L===61)return this.finishOp(V.assign,3)}return this.finishOp(h===124?V.logicalOR:V.logicalAND,2)}return x===61?this.finishOp(V.assign,2):this.finishOp(h===124?V.bitwiseOR:V.bitwiseAND,1)},Oe.readToken_caret=function(){var h=this.input.charCodeAt(this.pos+1);return h===61?this.finishOp(V.assign,2):this.finishOp(V.bitwiseXOR,1)},Oe.readToken_plus_min=function(h){var x=this.input.charCodeAt(this.pos+1);return x===h?x===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Jt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(V.incDec,2):x===61?this.finishOp(V.assign,2):this.finishOp(V.plusMin,1)},Oe.readToken_lt_gt=function(h){var x=this.input.charCodeAt(this.pos+1),L=1;return x===h?(L=h===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+L)===61?this.finishOp(V.assign,L+1):this.finishOp(V.bitShift,L)):x===33&&h===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(x===61&&(L=2),this.finishOp(V.relational,L))},Oe.readToken_eq_excl=function(h){var x=this.input.charCodeAt(this.pos+1);return x===61?this.finishOp(V.equality,this.input.charCodeAt(this.pos+2)===61?3:2):h===61&&x===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(V.arrow)):this.finishOp(h===61?V.eq:V.prefix,1)},Oe.readToken_question=function(){var h=this.options.ecmaVersion;if(h>=11){var x=this.input.charCodeAt(this.pos+1);if(x===46){var L=this.input.charCodeAt(this.pos+2);if(L<48||L>57)return this.finishOp(V.questionDot,2)}if(x===63){if(h>=12){var G=this.input.charCodeAt(this.pos+2);if(G===61)return this.finishOp(V.assign,3)}return this.finishOp(V.coalesce,2)}}return this.finishOp(V.question,1)},Oe.readToken_numberSign=function(){var h=this.options.ecmaVersion,x=35;if(h>=13&&(++this.pos,x=this.fullCharCodeAtPos(),X(x,!0)||x===92))return this.finishToken(V.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ft(x)+"'")},Oe.getTokenFromCode=function(h){switch(h){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(V.parenL);case 41:return++this.pos,this.finishToken(V.parenR);case 59:return++this.pos,this.finishToken(V.semi);case 44:return++this.pos,this.finishToken(V.comma);case 91:return++this.pos,this.finishToken(V.bracketL);case 93:return++this.pos,this.finishToken(V.bracketR);case 123:return++this.pos,this.finishToken(V.braceL);case 125:return++this.pos,this.finishToken(V.braceR);case 58:return++this.pos,this.finishToken(V.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(V.backQuote);case 48:var x=this.input.charCodeAt(this.pos+1);if(x===120||x===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(x===111||x===79)return this.readRadixNumber(8);if(x===98||x===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(h);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(h);case 124:case 38:return this.readToken_pipe_amp(h);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(h);case 60:case 62:return this.readToken_lt_gt(h);case 61:case 33:return this.readToken_eq_excl(h);case 63:return this.readToken_question();case 126:return this.finishOp(V.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ft(h)+"'")},Oe.finishOp=function(h,x){var L=this.input.slice(this.pos,this.pos+x);return this.pos+=x,this.finishToken(h,L)},Oe.readRegexp=function(){for(var h,x,L=this.pos;;){this.pos>=this.input.length&&this.raise(L,"Unterminated regular expression");var G=this.input.charAt(this.pos);if(Jt.test(G)&&this.raise(L,"Unterminated regular expression"),h)h=!1;else{if(G==="[")x=!0;else if(G==="]"&&x)x=!1;else if(G==="/"&&!x)break;h=G==="\\"}++this.pos}var st=this.input.slice(L,this.pos);++this.pos;var wt=this.pos,Et=this.readWord1();this.containsEsc&&this.unexpected(wt);var Qt=this.regexpState||(this.regexpState=new si(this));Qt.reset(L,st,Et),this.validateRegExpFlags(Qt),this.validateRegExpPattern(Qt);var te=null;try{te=new RegExp(st,Et)}catch{}return this.finishToken(V.regexp,{pattern:st,flags:Et,value:te})},Oe.readInt=function(h,x,L){for(var G=this.options.ecmaVersion>=12&&x===void 0,st=L&&this.input.charCodeAt(this.pos)===48,wt=this.pos,Et=0,Qt=0,te=0,Se=x??1/0;te<Se;++te,++this.pos){var De=this.input.charCodeAt(this.pos),Ke=void 0;if(G&&De===95){st&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Qt===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),te===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Qt=De;continue}if(De>=97?Ke=De-97+10:De>=65?Ke=De-65+10:De>=48&&De<=57?Ke=De-48:Ke=1/0,Ke>=h)break;Qt=De,Et=Et*h+Ke}return G&&Qt===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===wt||x!=null&&this.pos-wt!==x?null:Et};function bn(h,x){return x?parseInt(h,8):parseFloat(h.replace(/_/g,""))}function nn(h){return typeof BigInt!="function"?null:BigInt(h.replace(/_/g,""))}Oe.readRadixNumber=function(h){var x=this.pos;this.pos+=2;var L=this.readInt(h);return L==null&&this.raise(this.start+2,"Expected number in radix "+h),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(L=nn(this.input.slice(x,this.pos)),++this.pos):X(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(V.num,L)},Oe.readNumber=function(h){var x=this.pos;!h&&this.readInt(10,void 0,!0)===null&&this.raise(x,"Invalid number");var L=this.pos-x>=2&&this.input.charCodeAt(x)===48;L&&this.strict&&this.raise(x,"Invalid number");var G=this.input.charCodeAt(this.pos);if(!L&&!h&&this.options.ecmaVersion>=11&&G===110){var st=nn(this.input.slice(x,this.pos));return++this.pos,X(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(V.num,st)}L&&/[89]/.test(this.input.slice(x,this.pos))&&(L=!1),G===46&&!L&&(++this.pos,this.readInt(10),G=this.input.charCodeAt(this.pos)),(G===69||G===101)&&!L&&(G=this.input.charCodeAt(++this.pos),(G===43||G===45)&&++this.pos,this.readInt(10)===null&&this.raise(x,"Invalid number")),X(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var wt=bn(this.input.slice(x,this.pos),L);return this.finishToken(V.num,wt)},Oe.readCodePoint=function(){var h=this.input.charCodeAt(this.pos),x;if(h===123){this.options.ecmaVersion<6&&this.unexpected();var L=++this.pos;x=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,x>1114111&&this.invalidStringToken(L,"Code point out of bounds")}else x=this.readHexChar(4);return x},Oe.readString=function(h){for(var x="",L=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var G=this.input.charCodeAt(this.pos);if(G===h)break;G===92?(x+=this.input.slice(L,this.pos),x+=this.readEscapedChar(!1),L=this.pos):G===8232||G===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Zt(G)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return x+=this.input.slice(L,this.pos++),this.finishToken(V.string,x)};var rn={};Oe.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(h){if(h===rn)this.readInvalidTemplateToken();else throw h}this.inTemplateElement=!1},Oe.invalidStringToken=function(h,x){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw rn;this.raise(h,x)},Oe.readTmplToken=function(){for(var h="",x=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var L=this.input.charCodeAt(this.pos);if(L===96||L===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===V.template||this.type===V.invalidTemplate)?L===36?(this.pos+=2,this.finishToken(V.dollarBraceL)):(++this.pos,this.finishToken(V.backQuote)):(h+=this.input.slice(x,this.pos),this.finishToken(V.template,h));if(L===92)h+=this.input.slice(x,this.pos),h+=this.readEscapedChar(!0),x=this.pos;else if(Zt(L)){switch(h+=this.input.slice(x,this.pos),++this.pos,L){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:h+=`
`;break;default:h+=String.fromCharCode(L);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),x=this.pos}else++this.pos}},Oe.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(V.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Oe.readEscapedChar=function(h){var x=this.input.charCodeAt(++this.pos);switch(++this.pos,x){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ft(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),h){var L=this.pos-1;this.invalidStringToken(L,"Invalid escape sequence in template string")}default:if(x>=48&&x<=55){var G=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],st=parseInt(G,8);return st>255&&(G=G.slice(0,-1),st=parseInt(G,8)),this.pos+=G.length-1,x=this.input.charCodeAt(this.pos),(G!=="0"||x===56||x===57)&&(this.strict||h)&&this.invalidStringToken(this.pos-1-G.length,h?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(st)}return Zt(x)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(x)}},Oe.readHexChar=function(h){var x=this.pos,L=this.readInt(16,h);return L===null&&this.invalidStringToken(x,"Bad character escape sequence"),L},Oe.readWord1=function(){this.containsEsc=!1;for(var h="",x=!0,L=this.pos,G=this.options.ecmaVersion>=6;this.pos<this.input.length;){var st=this.fullCharCodeAtPos();if(z(st,G))this.pos+=st<=65535?1:2;else if(st===92){this.containsEsc=!0,h+=this.input.slice(L,this.pos);var wt=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Et=this.readCodePoint();(x?X:z)(Et,G)||this.invalidStringToken(wt,"Invalid Unicode escape"),h+=ft(Et),L=this.pos}else break;x=!1}return h+this.input.slice(L,this.pos)},Oe.readWord=function(){var h=this.readWord1(),x=V.name;return this.keywords.test(h)&&(x=kt[h]),this.finishToken(x,h)};var Hn="8.15.0";c.acorn={Parser:c,version:Hn,defaultOptions:ge,Position:ue,SourceLocation:ee,getLineInfo:fe,Node:at,TokenType:it,tokTypes:V,keywordTypes:kt,TokContext:q,tokContexts:P,isIdentifierChar:z,isIdentifierStart:X,Token:fn,isNewLine:Zt,lineBreak:Jt,lineBreakG:Wt,nonASCIIwhitespace:Pt};function ir(h,x){return c.parse(h,x)}function nr(h,x,L){return c.parseExpressionAt(h,x,L)}function zs(h,x){return c.tokenizer(h,x)}e.Node=at,e.Parser=c,e.Position=ue,e.SourceLocation=ee,e.TokContext=q,e.Token=fn,e.TokenType=it,e.defaultOptions=ge,e.getLineInfo=fe,e.isIdentifierChar=z,e.isIdentifierStart=X,e.isNewLine=Zt,e.keywordTypes=kt,e.lineBreak=Jt,e.lineBreakG=Wt,e.nonASCIIwhitespace=Pt,e.parse=ir,e.parseExpressionAt=nr,e.tokContexts=P,e.tokTypes=V,e.tokenizer=zs,e.version=Hn})}(Du,Du.exports)),Du.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */var LT=jh.exports,H_;function PT(){return H_||(H_=1,function(l){(function(t,e){t=t||V_;var n=t.window,a=t.document,o=new function(){var s=/^(statics|enumerable|beans|preserve)$/,c=[],f=c.slice,m=Object.create,y=Object.getOwnPropertyDescriptor,S=Object.defineProperty,T=c.forEach||function(R,j){for(var Z=0,I=this.length;Z<I;Z++)R.call(j,this[Z],Z,this)},k=function(R,j){for(var Z in this)this.hasOwnProperty(Z)&&R.call(j,this[Z],Z,this)},O=Object.assign||function(R){for(var j=1,Z=arguments.length;j<Z;j++){var I=arguments[j];for(var q in I)I.hasOwnProperty(q)&&(R[q]=I[q])}return R},A=function(R,j,Z){if(R){var I=y(R,"length");(I&&typeof I.value=="number"?T:k).call(R,j,Z=Z||R)}return Z};function N(R,j,Z,I,q){var P={};function Y(W,et){et=et||(et=y(j,W))&&(et.get?et:et.value),typeof et=="string"&&et[0]==="#"&&(et=R[et.substring(1)]||et);var nt=typeof et=="function",at=et,dt=q||nt&&!et.base?et&&et.get?W in R:R[W]:null,rt;(!q||!dt)&&(nt&&dt&&(et.base=dt),nt&&I!==!1&&(rt=W.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(P[rt[3].toLowerCase()+rt[4]]=rt[2]),(!at||nt||!at.get||typeof at.get!="function"||!B.isPlainObject(at))&&(at={value:at,writable:!0}),(y(R,W)||{configurable:!0}).configurable&&(at.configurable=!0,at.enumerable=Z??!rt),S(R,W,at))}if(j){for(var D in j)j.hasOwnProperty(D)&&!s.test(D)&&Y(D);for(var D in P){var U=P[D],K=R["set"+U],Q=R["get"+U]||K&&R["is"+U];Q&&(I===!0||Q.length===0)&&Y(D,{get:Q,set:K})}}return R}function B(){for(var R=0,j=arguments.length;R<j;R++){var Z=arguments[R];Z&&O(this,Z)}return this}return N(B,{inject:function(R){if(R){var j=R.statics===!0?R:R.statics,Z=R.beans,I=R.preserve;j!==R&&N(this.prototype,R,R.enumerable,Z,I),N(this,j,null,Z,I)}for(var q=1,P=arguments.length;q<P;q++)this.inject(arguments[q]);return this},extend:function(){for(var R=this,j,Z,I=0,q,P=arguments.length;I<P&&!(j&&Z);I++)q=arguments[I],j=j||q.initialize,Z=Z||q.prototype;return j=j||function(){R.apply(this,arguments)},Z=j.prototype=Z||m(this.prototype),S(Z,"constructor",{value:j,writable:!0,configurable:!0}),N(j,this),arguments.length&&this.inject.apply(j,arguments),j.base=R,j}}).inject({enumerable:!1,initialize:B,set:B,inject:function(){for(var R=0,j=arguments.length;R<j;R++){var Z=arguments[R];Z&&N(this,Z,Z.enumerable,Z.beans,Z.preserve)}return this},extend:function(){var R=m(this);return R.inject.apply(R,arguments)},each:function(R,j){return A(this,R,j)},clone:function(){return new this.constructor(this)},statics:{set:O,each:A,create:m,define:S,describe:y,clone:function(R){return O(new R.constructor,R)},isPlainObject:function(R){var j=R!=null&&R.constructor;return j&&(j===Object||j===B||j.name==="Object")},pick:function(R,j){return R!==e?R:j},slice:function(R,j,Z){return f.call(R,j,Z)}}})};l.exports=o,o.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,function(s,c){if(!/^_/.test(c)){var f=typeof s;this.push(c+": "+(f==="number"?C.instance.number(s):f==="string"?"'"+s+"'":s))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(s){return o.importJSON(s,this)},exportJSON:function(s){return o.exportJSON(this,s)},toJSON:function(){return o.serialize(this)},set:function(s,c){return s&&o.filter(this,s,c,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function s(){var c=s.base.apply(this,arguments),f=c.prototype._class;return f&&!o.exports[f]&&(o.exports[f]=c),c},equals:function(s,c){if(s===c)return!0;if(s&&s.equals)return s.equals(c);if(c&&c.equals)return c.equals(s);if(s&&c&&typeof s=="object"&&typeof c=="object"){if(Array.isArray(s)&&Array.isArray(c)){var f=s.length;if(f!==c.length)return!1;for(;f--;)if(!o.equals(s[f],c[f]))return!1}else{var m=Object.keys(s),f=m.length;if(f!==Object.keys(c).length)return!1;for(;f--;){var y=m[f];if(!(c.hasOwnProperty(y)&&o.equals(s[y],c[y])))return!1}}return!0}return!1},read:function(s,c,f,m){if(this===o){var y=this.peek(s,c);return s.__index++,y}var S=this.prototype,T=S._readIndex,k=c||T&&s.__index||0,O=s.length,A=s[k];if(m=m||O-k,A instanceof this||f&&f.readNull&&A==null&&m<=1)return T&&(s.__index=k+1),A&&f&&f.clone?A.clone():A;if(A=o.create(S),T&&(A.__read=!0),A=A.initialize.apply(A,k>0||k+m<O?o.slice(s,k,k+m):s)||A,T){s.__index=k+A.__read;var N=A.__filtered;N&&(s.__filtered=N,A.__filtered=e),A.__read=e}return A},peek:function(s,c){return s[s.__index=c||s.__index||0]},remain:function(s){return s.length-(s.__index||0)},readList:function(s,c,f,m){for(var y=[],S,T=c||0,k=m?T+m:s.length,O=T;O<k;O++)y.push(Array.isArray(S=s[O])?this.read(S,0,f):this.read(s,O,f,1));return y},readNamed:function(s,c,f,m,y){var S=this.getNamed(s,c),T=S!==e;if(T){var k=s.__filtered;if(!k){var O=this.getSource(s);k=s.__filtered=o.create(O),k.__unfiltered=O}k[c]=e}return this.read(T?[S]:s,f,m,y)},readSupported:function(s,c){var f=this.getSource(s),m=this,y=!1;return f&&Object.keys(f).forEach(function(S){if(S in c){var T=m.readNamed(s,S);T!==e&&(c[S]=T),y=!0}}),y},getSource:function(s){var c=s.__source;if(c===e){var f=s.length===1&&s[0];c=s.__source=f&&o.isPlainObject(f)?f:null}return c},getNamed:function(s,c){var f=this.getSource(s);if(f)return c?f[c]:s.__filtered||f},hasNamed:function(s,c){return!!this.getNamed(s,c)},filter:function(s,c,f,m){var y;function S(N){if(!(f&&N in f)&&!(y&&N in y)){var B=c[N];B!==e&&(s[N]=B)}}if(m){for(var T={},k=0,O,A=m.length;k<A;k++)(O=m[k])in c&&(S(O),T[O]=!0);y=T}return Object.keys(c.__unfiltered||c).forEach(S),s},isPlainValue:function(s,c){return o.isPlainObject(s)||Array.isArray(s)||c&&typeof s=="string"},serialize:function(s,c,f,m){c=c||{};var y=!m,S;if(y&&(c.formatter=new C(c.precision),m={length:0,definitions:{},references:{},add:function(B,R){var j="#"+B._id,Z=this.references[j];if(!Z){this.length++;var I=R.call(B),q=B._class;q&&I[0]!==q&&I.unshift(q),this.definitions[j]=I,Z=this.references[j]=[j]}return Z}}),s&&s._serialize){S=s._serialize(c,m);var T=s._class;T&&!s._compactSerialize&&(y||!f)&&S[0]!==T&&S.unshift(T)}else if(Array.isArray(s)){S=[];for(var k=0,O=s.length;k<O;k++)S[k]=o.serialize(s[k],c,f,m)}else if(o.isPlainObject(s)){S={};for(var A=Object.keys(s),k=0,O=A.length;k<O;k++){var N=A[k];S[N]=o.serialize(s[N],c,f,m)}}else typeof s=="number"?S=c.formatter.number(s,c.precision):S=s;return y&&m.length>0?[["dictionary",m.definitions],S]:S},deserialize:function(s,c,f,m,y){var S=s,T=!f,k=T&&s&&s.length&&s[0][0]==="dictionary";if(f=f||{},Array.isArray(s)){var O=s[0],A=O==="dictionary";if(s.length==1&&/^#/.test(O))return f.dictionary[O];O=o.exports[O],S=[];for(var N=O?1:0,B=s.length;N<B;N++)S.push(o.deserialize(s[N],c,f,A,k));if(O){var R=S;c?S=c(O,R,T||y):S=new O(R)}}else if(o.isPlainObject(s)){S={},m&&(f.dictionary=S);for(var j in s)S[j]=o.deserialize(s[j],c,f)}return k?S[1]:S},exportJSON:function(s,c){var f=o.serialize(s,c);return c&&c.asString==!1?f:JSON.stringify(f)},importJSON:function(s,c){return o.deserialize(typeof s=="string"?JSON.parse(s):s,function(f,m,y){var S=y&&c&&c.constructor===f,T=S?c:o.create(f.prototype);if(m.length===1&&T instanceof V&&(S||!(T instanceof Wt))){var k=m[0];o.isPlainObject(k)&&(k.insert=!1,S&&(m=m.concat([V.INSERT])))}return(S?T.set:f).apply(T,m),S&&(c=null),T})},push:function(s,c){var f=c.length;if(f<4096)s.push.apply(s,c);else{var m=s.length;s.length+=f;for(var y=0;y<f;y++)s[m+y]=c[y]}return s},splice:function(s,c,f,m){var y=c&&c.length,S=f===e;f=S?s.length:f,f>s.length&&(f=s.length);for(var T=0;T<y;T++)c[T]._index=f+T;if(S)return o.push(s,c),[];var k=[f,m];c&&o.push(k,c);for(var O=s.splice.apply(s,k),T=0,A=O.length;T<A;T++)O[T]._index=e;for(var T=f+y,A=s.length;T<A;T++)s[T]._index=T;return O},capitalize:function(s){return s.replace(/\b[a-z]/g,function(c){return c.toUpperCase()})},camelize:function(s){return s.replace(/-(.)/g,function(c,f){return f.toUpperCase()})},hyphenate:function(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var d={on:function(s,c){if(typeof s!="string")o.each(s,function(S,T){this.on(T,S)},this);else{var f=this._eventTypes,m=f&&f[s],y=this._callbacks=this._callbacks||{};y=y[s]=y[s]||[],y.indexOf(c)===-1&&(y.push(c),m&&m.install&&y.length===1&&m.install.call(this,s))}return this},off:function(s,c){if(typeof s!="string"){o.each(s,function(T,k){this.off(k,T)},this);return}var f=this._eventTypes,m=f&&f[s],y=this._callbacks&&this._callbacks[s],S;return y&&(!c||(S=y.indexOf(c))!==-1&&y.length===1?(m&&m.uninstall&&m.uninstall.call(this,s),delete this._callbacks[s]):S!==-1&&y.splice(S,1)),this},once:function(s,c){return this.on(s,function f(){c.apply(this,arguments),this.off(s,f)})},emit:function(s,c){var f=this._callbacks&&this._callbacks[s];if(!f)return!1;var m=o.slice(arguments,1),y=c&&c.target&&!c.currentTarget;f=f.slice(),y&&(c.currentTarget=this);for(var S=0,T=f.length;S<T;S++)if(f[S].apply(this,m)==!1){c&&c.stop&&c.stop();break}return y&&delete c.currentTarget,!0},responds:function(s){return!!(this._callbacks&&this._callbacks[s])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(s){var c=this._eventTypes,f=this._callbacks,m=s?"install":"uninstall";if(c){for(var y in f)if(f[y].length>0){var S=c[y],T=S&&S[m];T&&T.call(this,y)}}},statics:{inject:function s(c){var f=c._events;if(f){var m={};o.each(f,function(y,S){var T=typeof y=="string",k=T?y:S,O=o.capitalize(k),A=k.substring(2).toLowerCase();m[A]=T?{}:y,k="_"+k,c["get"+O]=function(){return this[k]},c["set"+O]=function(N){var B=this[k];B&&this.off(A,B),N&&this.on(A,N),this[k]=N}}),c._eventTypes=m}return s.base.apply(this,arguments)}}},p=o.extend({_class:"PaperScope",initialize:function s(){Le=this,this.settings=new o({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=s._id++,s._scopes[this._id]=this;var c=s.prototype;if(!this.support){var f=ri.getContext(1,1)||{};c.support={nativeDash:"setLineDash"in f||"mozDash"in f,nativeBlendModes:rs.nativeModes},ri.release(f)}if(!this.agent){var m=t.navigator.userAgent.toLowerCase(),y=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(m)||[])[0],S=y==="darwin"?"mac":y,T=c.agent=c.browser={platform:S};S&&(T[S]=!0),m.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(k,O,A,N,B){if(!T.chrome){var R=O==="opera"?N:/^(node|trident)$/.test(O)?B:A;T.version=R,T.versionNumber=parseFloat(R),O={trident:"msie",jsdom:"node"}[O]||O,T.name=O,T[O]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.18",getView:function(){var s=this.project;return s&&s._view},getPaper:function(){return this},execute:function(s,c){var f=Le.PaperScript.execute(s,this,c);return $e.updateFocus(),f},install:function(s){var c=this;o.each(["project","view","tool"],function(m){o.define(s,m,{configurable:!0,get:function(){return c[m]}})});for(var f in this)!/^_/.test(f)&&this[f]&&(s[f]=this[f])},setup:function(s){return Le=this,this.project=new St(s),this},createCanvas:function(s,c){return ri.getCanvas(s,c)},activate:function(){Le=this},clear:function(){for(var s=this.projects,c=this.tools,f=s.length-1;f>=0;f--)s[f].remove();for(var f=c.length-1;f>=0;f--)c[f].remove()},remove:function(){this.clear(),delete p._scopes[this._id]},statics:new function(){function s(c){return c+="Attribute",function(f,m){return f[c](m)||f[c]("data-paper-"+m)}}return{_scopes:{},_id:0,get:function(c){return this._scopes[c]||null},getAttribute:s("get"),hasAttribute:s("has")}}}),v=o.extend(d,{initialize:function(s){this._scope=Le,this._index=this._scope[this._list].push(this)-1,(s||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var s=this._scope[this._reference];return s&&s!==this&&s.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",s),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),b={findItemBoundsCollisions:function(s,c,f){function m(T){for(var k=new Array(T.length),O=0;O<T.length;O++){var A=T[O].getBounds();k[O]=[A.left,A.top,A.right,A.bottom]}return k}var y=m(s),S=!c||c===s?y:m(c);return this.findBoundsCollisions(y,S,f||0)},findCurveBoundsCollisions:function(s,c,f,m){function y(R){for(var j=Math.min,Z=Math.max,I=new Array(R.length),q=0;q<R.length;q++){var P=R[q];I[q]=[j(P[0],P[2],P[4],P[6]),j(P[1],P[3],P[5],P[7]),Z(P[0],P[2],P[4],P[6]),Z(P[1],P[3],P[5],P[7])]}return I}var S=y(s),T=!c||c===s?S:y(c);if(m){for(var k=this.findBoundsCollisions(S,T,f||0,!1,!0),O=this.findBoundsCollisions(S,T,f||0,!0,!0),A=[],N=0,B=k.length;N<B;N++)A[N]={hor:k[N],ver:O[N]};return A}return this.findBoundsCollisions(S,T,f||0)},findBoundsCollisions:function(s,c,f,m,y){var S=!c||s===c,T=S?s:s.concat(c),k=s.length,O=T.length;function A(qt,$t,se){for(var jt=0,Bt=qt.length;jt<Bt;){var ie=Bt+jt>>>1;T[qt[ie]][$t]<se?jt=ie+1:Bt=ie}return jt-1}for(var N=m?1:0,B=N+2,R=m?0:1,j=R+2,Z=new Array(O),I=0;I<O;I++)Z[I]=I;Z.sort(function(qt,$t){return T[qt][N]-T[$t][N]});for(var q=[],P=new Array(k),I=0;I<O;I++){var Y=Z[I],D=T[Y],U=S?Y:Y-k,K=Y<k,Q=S||!K,W=K?[]:null;if(q.length){var et=A(q,B,D[N]-f)+1;if(q.splice(0,et),S&&y){W=W.concat(q);for(var nt=0;nt<q.length;nt++){var at=q[nt];P[at].push(U)}}else for(var dt=D[j],rt=D[R],nt=0;nt<q.length;nt++){var at=q[nt],ct=T[at],pt=at<k,bt=S||at>=k;(y||(K&&bt||Q&&pt)&&dt>=ct[R]-f&&rt<=ct[j]+f)&&(K&&bt&&W.push(S?at:at-k),Q&&pt&&P[at].push(U))}}if(K&&(s===c&&W.push(Y),P[Y]=W),q.length){var xt=D[B],Ot=A(q,B,xt);q.splice(Ot+1,0,Y)}else q.push(Y)}for(var I=0;I<P.length;I++){var It=P[I];It&&It.sort(function($t,se){return $t-se})}return P}},C=o.extend({initialize:function(s){this.precision=o.pick(s,5),this.multiplier=Math.pow(10,this.precision)},number:function(s){return this.precision<16?Math.round(s*this.multiplier)/this.multiplier:s},pair:function(s,c,f){return this.number(s)+(f||",")+this.number(c)},point:function(s,c){return this.number(s.x)+(c||",")+this.number(s.y)},size:function(s,c){return this.number(s.width)+(c||",")+this.number(s.height)},rectangle:function(s,c){return this.point(s,c)+(c||",")+this.size(s,c)}});C.instance=new C;var M=new function(){var s=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],c=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],f=Math.abs,m=Math.sqrt,y=Math.pow,S=Math.log2||function(B){return Math.log(B)*Math.LOG2E},T=1e-12,k=112e-18;function O(B,R,j){return B<R?R:B>j?j:B}function A(B,R,j){function Z(et){var nt=et*134217729,at=et-nt,dt=at+nt,rt=et-dt;return[dt,rt]}var I=R*R-B*j,q=R*R+B*j;if(f(I)*3<q){var P=Z(B),Y=Z(R),D=Z(j),U=R*R,K=Y[0]*Y[0]-U+2*Y[0]*Y[1]+Y[1]*Y[1],Q=B*j,W=P[0]*D[0]-Q+P[0]*D[1]+P[1]*D[0]+P[1]*D[1];I=U-Q+(K-W)}return I}function N(){var B=Math.max.apply(Math,arguments);return B&&(B<1e-8||B>1e8)?y(2,-Math.round(S(B))):0}return{EPSILON:T,MACHINE_EPSILON:k,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(m(2)-1)/3,isZero:function(B){return B>=-T&&B<=T},isMachineZero:function(B){return B>=-k&&B<=k},clamp:O,integrate:function(B,R,j,Z){for(var I=s[Z-2],q=c[Z-2],P=(j-R)*.5,Y=P+R,D=0,U=Z+1>>1,K=Z&1?q[D++]*B(Y):0;D<U;){var Q=P*I[D];K+=q[D++]*(B(Y+Q)+B(Y-Q))}return P*K},findRoot:function(B,R,j,Z,I,q,P){for(var Y=0;Y<q;Y++){var D=B(j),U=D/R(j),K=j-U;if(f(U)<P){j=K;break}D>0?(I=j,j=K<=Z?(Z+I)*.5:K):(Z=j,j=K>=I?(Z+I)*.5:K)}return O(j,Z,I)},solveQuadratic:function(B,R,j,Z,I,q){var P,Y=1/0;if(f(B)<T){if(f(R)<T)return f(j)<T?-1:0;P=-j/R}else{R*=-.5;var D=A(B,R,j);if(D&&f(D)<k){var U=N(f(B),f(R),f(j));U&&(B*=U,R*=U,j*=U,D=A(B,R,j))}if(D>=-k){var K=D<0?0:m(D),Q=R+(R<0?-K:K);Q===0?(P=j/B,Y=-P):(P=Q/B,Y=j/Q)}}var W=0,et=I==null,nt=I-T,at=q+T;return isFinite(P)&&(et||P>nt&&P<at)&&(Z[W++]=et?P:O(P,I,q)),Y!==P&&isFinite(Y)&&(et||Y>nt&&Y<at)&&(Z[W++]=et?Y:O(Y,I,q)),W},solveCubic:function(B,R,j,Z,I,q,P){var Y=N(f(B),f(R),f(j),f(Z)),D,U,K,Q,W;Y&&(B*=Y,R*=Y,j*=Y,Z*=Y);function et(Ot){D=Ot;var It=B*D;U=It+R,K=U*D+j,Q=(It+U)*D+K,W=K*D+Z}if(f(B)<T)B=R,U=j,K=Z,D=1/0;else if(f(Z)<T)U=R,K=j,D=0;else{et(-(R/B)/3);var nt=W/B,at=y(f(nt),1/3),dt=nt<0?-1:1,rt=-Q/B,ct=rt>0?1.324717957244746*Math.max(at,m(rt)):at,pt=D-dt*ct;if(pt!==D){do et(pt),pt=Q===0?D:D-W/Q/(1+k);while(dt*pt>dt*D);f(B)*D*D>f(Z/D)&&(K=-Z/D,U=(K-j)/D)}}var bt=M.solveQuadratic(B,U,K,I,q,P),xt=q==null;return isFinite(D)&&(bt===0||bt>0&&D!==I[0]&&D!==I[1])&&(xt||D>q-T&&D<P+T)&&(I[bt++]=xt?D:O(D,q,P)),bt}}},F={_id:1,_pools:{},get:function(s){if(s){var c=this._pools[s];return c||(c=this._pools[s]={_id:1}),c._id++}else return this._id++}},E=o.extend({_class:"Point",_readIndex:!0,initialize:function(c,f){var m=typeof c,y=this.__read,S=0;if(m==="number"){var T=typeof f=="number";this._set(c,T?f:c),y&&(S=T?2:1)}else if(m==="undefined"||c===null)this._set(0,0),y&&(S=c===null?1:0);else{var k=m==="string"?c.split(/[\s,]+/)||[]:c;S=1,Array.isArray(k)?this._set(+k[0],+(k.length>1?k[1]:k[0])):"x"in k?this._set(k.x||0,k.y||0):"width"in k?this._set(k.width||0,k.height||0):"angle"in k?(this._set(k.length||0,0),this.setAngle(k.angle||0)):(this._set(0,0),S=0)}return y&&(this.__read=S),this},set:"#initialize",_set:function(s,c){return this.x=s,this.y=c,this},equals:function(s){return this===s||s&&(this.x===s.x&&this.y===s.y||Array.isArray(s)&&this.x===s[0]&&this.y===s[1])||!1},clone:function(){return new E(this.x,this.y)},toString:function(){var s=C.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+" }"},_serialize:function(s){var c=s.formatter;return[c.number(this.x),c.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(s){if(this.isZero()){var c=this._angle||0;this._set(Math.cos(c)*s,Math.sin(c)*s)}else{var f=s/this.getLength();M.isZero(f)&&this.getAngle(),this._set(this.x*f,this.y*f)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(s){this.setAngleInRadians.call(this,s*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var s=E.read(arguments),c=this.getLength()*s.getLength();if(M.isZero(c))return NaN;var f=this.dot(s)/c;return Math.acos(f<-1?-1:f>1?1:f)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(s){if(this._angle=s,!this.isZero()){var c=this.getLength();this._set(Math.cos(s)*c,Math.sin(s)*c)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var s=E.read(arguments);return Math.atan2(this.cross(s),this.dot(s))*180/Math.PI},getDistance:function(){var s=arguments,c=E.read(s),f=c.x-this.x,m=c.y-this.y,y=f*f+m*m,S=o.read(s);return S?y:Math.sqrt(y)},normalize:function(s){s===e&&(s=1);var c=this.getLength(),f=c!==0?s/c:0,m=new E(this.x*f,this.y*f);return f>=0&&(m._angle=this._angle),m},rotate:function(s,c){if(s===0)return this.clone();s=s*Math.PI/180;var f=c?this.subtract(c):this,m=Math.sin(s),y=Math.cos(s);return f=new E(f.x*y-f.y*m,f.x*m+f.y*y),c?f.add(c):f},transform:function(s){return s?s._transformPoint(this):this},add:function(){var s=E.read(arguments);return new E(this.x+s.x,this.y+s.y)},subtract:function(){var s=E.read(arguments);return new E(this.x-s.x,this.y-s.y)},multiply:function(){var s=E.read(arguments);return new E(this.x*s.x,this.y*s.y)},divide:function(){var s=E.read(arguments);return new E(this.x/s.x,this.y/s.y)},modulo:function(){var s=E.read(arguments);return new E(this.x%s.x,this.y%s.y)},negate:function(){return new E(-this.x,-this.y)},isInside:function(){return $.read(arguments).contains(this)},isClose:function(){var s=arguments,c=E.read(s),f=o.read(s);return this.getDistance(c)<=f},isCollinear:function(){var s=E.read(arguments);return E.isCollinear(this.x,this.y,s.x,s.y)},isColinear:"#isCollinear",isOrthogonal:function(){var s=E.read(arguments);return E.isOrthogonal(this.x,this.y,s.x,s.y)},isZero:function(){var s=M.isZero;return s(this.x)&&s(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(s){return this.x*(s>1&&s<4?-1:1)>=0&&this.y*(s>2?-1:1)>=0},dot:function(){var s=E.read(arguments);return this.x*s.x+this.y*s.y},cross:function(){var s=E.read(arguments);return this.x*s.y-this.y*s.x},project:function(){var s=E.read(arguments),c=s.isZero()?0:this.dot(s)/s.dot(s);return new E(s.x*c,s.y*c)},statics:{min:function(){var s=arguments,c=E.read(s),f=E.read(s);return new E(Math.min(c.x,f.x),Math.min(c.y,f.y))},max:function(){var s=arguments,c=E.read(s),f=E.read(s);return new E(Math.max(c.x,f.x),Math.max(c.y,f.y))},random:function(){return new E(Math.random(),Math.random())},isCollinear:function(s,c,f,m){return Math.abs(s*m-c*f)<=Math.sqrt((s*s+c*c)*(f*f+m*m))*1e-8},isOrthogonal:function(s,c,f,m){return Math.abs(s*f+c*m)<=Math.sqrt((s*s+c*c)*(f*f+m*m))*1e-8}}},o.each(["round","ceil","floor","abs"],function(s){var c=Math[s];this[s]=function(){return new E(c(this.x),c(this.y))}},{})),X=E.extend({initialize:function(c,f,m,y){this._x=c,this._y=f,this._owner=m,this._setter=y},_set:function(s,c,f){return this._x=s,this._y=c,f||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),z=o.extend({_class:"Size",_readIndex:!0,initialize:function(c,f){var m=typeof c,y=this.__read,S=0;if(m==="number"){var T=typeof f=="number";this._set(c,T?f:c),y&&(S=T?2:1)}else if(m==="undefined"||c===null)this._set(0,0),y&&(S=c===null?1:0);else{var k=m==="string"?c.split(/[\s,]+/)||[]:c;S=1,Array.isArray(k)?this._set(+k[0],+(k.length>1?k[1]:k[0])):"width"in k?this._set(k.width||0,k.height||0):"x"in k?this._set(k.x||0,k.y||0):(this._set(0,0),S=0)}return y&&(this.__read=S),this},set:"#initialize",_set:function(s,c){return this.width=s,this.height=c,this},equals:function(s){return s===this||s&&(this.width===s.width&&this.height===s.height||Array.isArray(s)&&this.width===s[0]&&this.height===s[1])||!1},clone:function(){return new z(this.width,this.height)},toString:function(){var s=C.instance;return"{ width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var c=s.formatter;return[c.number(this.width),c.number(this.height)]},add:function(){var s=z.read(arguments);return new z(this.width+s.width,this.height+s.height)},subtract:function(){var s=z.read(arguments);return new z(this.width-s.width,this.height-s.height)},multiply:function(){var s=z.read(arguments);return new z(this.width*s.width,this.height*s.height)},divide:function(){var s=z.read(arguments);return new z(this.width/s.width,this.height/s.height)},modulo:function(){var s=z.read(arguments);return new z(this.width%s.width,this.height%s.height)},negate:function(){return new z(-this.width,-this.height)},isZero:function(){var s=M.isZero;return s(this.width)&&s(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(s,c){return new z(Math.min(s.width,c.width),Math.min(s.height,c.height))},max:function(s,c){return new z(Math.max(s.width,c.width),Math.max(s.height,c.height))},random:function(){return new z(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],function(s){var c=Math[s];this[s]=function(){return new z(c(this.width),c(this.height))}},{})),it=z.extend({initialize:function(c,f,m,y){this._width=c,this._height=f,this._owner=m,this._setter=y},_set:function(s,c,f){return this._width=s,this._height=c,f||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(s){this._width=s,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(s){this._height=s,this._owner[this._setter](this)}}),$=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(c,f,m,y){var S=arguments,T=typeof c,k;if(T==="number"?(this._set(c,f,m,y),k=4):T==="undefined"||c===null?(this._set(0,0,0,0),k=c===null?1:0):S.length===1&&(Array.isArray(c)?(this._set.apply(this,c),k=1):c.x!==e||c.width!==e?(this._set(c.x||0,c.y||0,c.width||0,c.height||0),k=1):c.from===e&&c.to===e&&(this._set(0,0,0,0),o.readSupported(S,this)&&(k=1))),k===e){var O=E.readNamed(S,"from"),A=o.peek(S),N=O.x,B=O.y,R,j;if(A&&A.x!==e||o.hasNamed(S,"to")){var Z=E.readNamed(S,"to");R=Z.x-N,j=Z.y-B,R<0&&(N=Z.x,R=-R),j<0&&(B=Z.y,j=-j)}else{var I=z.read(S);R=I.width,j=I.height}this._set(N,B,R,j),k=S.__index}var q=S.__filtered;return q&&(this.__filtered=q),this.__read&&(this.__read=k),this},set:"#initialize",_set:function(s,c,f,m){return this.x=s,this.y=c,this.width=f,this.height=m,this},clone:function(){return new $(this.x,this.y,this.width,this.height)},equals:function(s){var c=o.isPlainValue(s)?$.read(arguments):s;return c===this||c&&this.x===c.x&&this.y===c.y&&this.width===c.width&&this.height===c.height||!1},toString:function(){var s=C.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+", width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var c=s.formatter;return[c.number(this.x),c.number(this.y),c.number(this.width),c.number(this.height)]},getPoint:function(s){var c=s?E:X;return new c(this.x,this.y,this,"setPoint")},setPoint:function(){var s=E.read(arguments);this.x=s.x,this.y=s.y},getSize:function(s){var c=s?z:it;return new c(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var s=z.read(arguments),c=this._sx,f=this._sy,m=s.width,y=s.height;c&&(this.x+=(this.width-m)*c),f&&(this.y+=(this.height-y)*f),this.width=m,this.height=y,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(s){if(!this._fw){var c=s-this.x;this.width-=this._sx===.5?c*2:c}this.x=s,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(s){if(!this._fh){var c=s-this.y;this.height-=this._sy===.5?c*2:c}this.y=s,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(s){if(!this._fw){var c=s-this.x;this.width=this._sx===.5?c*2:c}this.x=s-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(s){if(!this._fh){var c=s-this.y;this.height=this._sy===.5?c*2:c}this.y=s-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(s){this._fw||this._sx===.5?this.x=s-this.width/2:(this._sx&&(this.x+=(s-this.x)*2*this._sx),this.width=(s-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(s){this._fh||this._sy===.5?this.y=s-this.height/2:(this._sy&&(this.y+=(s-this.y)*2*this._sy),this.height=(s-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(s){var c=s?E:X;return new c(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var s=E.read(arguments);return this.setCenterX(s.x),this.setCenterY(s.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(s){return s&&s.width!==e||(Array.isArray(s)?s:arguments).length===4?this._containsRectangle($.read(arguments)):this._containsPoint(E.read(arguments))},_containsPoint:function(s){var c=s.x,f=s.y;return c>=this.x&&f>=this.y&&c<=this.x+this.width&&f<=this.y+this.height},_containsRectangle:function(s){var c=s.x,f=s.y;return c>=this.x&&f>=this.y&&c+s.width<=this.x+this.width&&f+s.height<=this.y+this.height},intersects:function(){var s=$.read(arguments),c=o.read(arguments)||0;return s.x+s.width>this.x-c&&s.y+s.height>this.y-c&&s.x<this.x+this.width+c&&s.y<this.y+this.height+c},intersect:function(){var s=$.read(arguments),c=Math.max(this.x,s.x),f=Math.max(this.y,s.y),m=Math.min(this.x+this.width,s.x+s.width),y=Math.min(this.y+this.height,s.y+s.height);return new $(c,f,m-c,y-f)},unite:function(){var s=$.read(arguments),c=Math.min(this.x,s.x),f=Math.min(this.y,s.y),m=Math.max(this.x+this.width,s.x+s.width),y=Math.max(this.y+this.height,s.y+s.height);return new $(c,f,m-c,y-f)},include:function(){var s=E.read(arguments),c=Math.min(this.x,s.x),f=Math.min(this.y,s.y),m=Math.max(this.x+this.width,s.x),y=Math.max(this.y+this.height,s.y);return new $(c,f,m-c,y-f)},expand:function(){var s=z.read(arguments),c=s.width,f=s.height;return new $(this.x-c/2,this.y-f/2,this.width+c,this.height+f)},scale:function(s,c){return this.expand(this.width*s-this.width,this.height*(c===e?s:c)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(s,c){var f=s.join(""),m=/^[RL]/.test(f);c>=4&&(s[1]+=m?"Y":"X");var y=s[m?0:1],S=s[m?1:0],T="get"+y,k="get"+S,O="set"+y,A="set"+S,N="get"+f,B="set"+f;this[N]=function(R){var j=R?E:X;return new j(this[T](),this[k](),this,B)},this[B]=function(){var R=E.read(arguments);this[O](R.x),this[A](R.y)}},{beans:!0})),lt=$.extend({initialize:function(c,f,m,y,S,T){this._set(c,f,m,y,!0),this._owner=S,this._setter=T},_set:function(s,c,f,m,y){return this._x=s,this._y=c,this._width=f,this._height=m,y||this._owner[this._setter](this),this}},new function(){var s=$.prototype;return o.each(["x","y","width","height"],function(c){var f=o.capitalize(c),m="_"+c;this["get"+f]=function(){return this[m]},this["set"+f]=function(y){this[m]=y,this._dontNotify||this._owner[this._setter](this)}},o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(c){var f="set"+c;this[f]=function(){this._dontNotify=!0,s[f].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(c){var f=this._owner;f._changeSelection&&f._changeSelection(2,c)}}))}),gt=o.extend({_class:"Matrix",initialize:function s(c,f){var m=arguments,y=m.length,S=!0;if(y>=6?this._set.apply(this,m):y===1||y===2?c instanceof s?this._set(c._a,c._b,c._c,c._d,c._tx,c._ty,f):Array.isArray(c)?this._set.apply(this,f?c.concat([f]):c):S=!1:y?S=!1:this.reset(),!S)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(s,c,f,m,y,S,T){return this._a=s,this._b=c,this._c=f,this._d=m,this._tx=y,this._ty=S,T||this._changed(),this},_serialize:function(s,c){return o.serialize(this.getValues(),s,!0,c)},_changed:function(){var s=this._owner;s&&(s._applyMatrix?s.transform(null,!0):s._changed(25))},clone:function(){return new gt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(s){return s===this||s&&this._a===s._a&&this._b===s._b&&this._c===s._c&&this._d===s._d&&this._tx===s._tx&&this._ty===s._ty},toString:function(){var s=C.instance;return"[["+[s.number(this._a),s.number(this._c),s.number(this._tx)].join(", ")+"], ["+[s.number(this._b),s.number(this._d),s.number(this._ty)].join(", ")+"]]"},reset:function(s){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,s||this._changed(),this},apply:function(s,c){var f=this._owner;return f?(f.transform(null,o.pick(s,!0),c),this.isIdentity()):!1},translate:function(){var s=E.read(arguments),c=s.x,f=s.y;return this._tx+=c*this._a+f*this._c,this._ty+=c*this._b+f*this._d,this._changed(),this},scale:function(){var s=arguments,c=E.read(s),f=E.read(s,0,{readNull:!0});return f&&this.translate(f),this._a*=c.x,this._b*=c.x,this._c*=c.y,this._d*=c.y,f&&this.translate(f.negate()),this._changed(),this},rotate:function(s){s*=Math.PI/180;var c=E.read(arguments,1),f=c.x,m=c.y,y=Math.cos(s),S=Math.sin(s),T=f-f*y+m*S,k=m-f*S-m*y,O=this._a,A=this._b,N=this._c,B=this._d;return this._a=y*O+S*N,this._b=y*A+S*B,this._c=-S*O+y*N,this._d=-S*A+y*B,this._tx+=T*O+k*N,this._ty+=T*A+k*B,this._changed(),this},shear:function(){var s=arguments,c=E.read(s),f=E.read(s,0,{readNull:!0});f&&this.translate(f);var m=this._a,y=this._b;return this._a+=c.y*this._c,this._b+=c.y*this._d,this._c+=c.x*m,this._d+=c.x*y,f&&this.translate(f.negate()),this._changed(),this},skew:function(){var s=arguments,c=E.read(s),f=E.read(s,0,{readNull:!0}),m=Math.PI/180,y=new E(Math.tan(c.x*m),Math.tan(c.y*m));return this.shear(y,f)},append:function(s,c){if(s){var f=this._a,m=this._b,y=this._c,S=this._d,T=s._a,k=s._c,O=s._b,A=s._d,N=s._tx,B=s._ty;this._a=T*f+O*y,this._c=k*f+A*y,this._b=T*m+O*S,this._d=k*m+A*S,this._tx+=N*f+B*y,this._ty+=N*m+B*S,c||this._changed()}return this},prepend:function(s,c){if(s){var f=this._a,m=this._b,y=this._c,S=this._d,T=this._tx,k=this._ty,O=s._a,A=s._c,N=s._b,B=s._d,R=s._tx,j=s._ty;this._a=O*f+A*m,this._c=O*y+A*S,this._b=N*f+B*m,this._d=N*y+B*S,this._tx=O*T+A*k+R,this._ty=N*T+B*k+j,c||this._changed()}return this},appended:function(s){return this.clone().append(s)},prepended:function(s){return this.clone().prepend(s)},invert:function(){var s=this._a,c=this._b,f=this._c,m=this._d,y=this._tx,S=this._ty,T=s*m-c*f,k=null;return T&&!isNaN(T)&&isFinite(y)&&isFinite(S)&&(this._a=m/T,this._b=-c/T,this._c=-f/T,this._d=s/T,this._tx=(f*S-m*y)/T,this._ty=(c*y-s*S)/T,k=this),k},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new gt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var s=this._a*this._d-this._c*this._b;return s&&!isNaN(s)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(s,c,f){return arguments.length<3?this._transformPoint(E.read(arguments)):this._transformCoordinates(s,c,f)},_transformPoint:function(s,c,f){var m=s.x,y=s.y;return c||(c=new E),c._set(m*this._a+y*this._c+this._tx,m*this._b+y*this._d+this._ty,f)},_transformCoordinates:function(s,c,f){for(var m=0,y=2*f;m<y;m+=2){var S=s[m],T=s[m+1];c[m]=S*this._a+T*this._c+this._tx,c[m+1]=S*this._b+T*this._d+this._ty}return c},_transformCorners:function(s){var c=s.x,f=s.y,m=c+s.width,y=f+s.height,S=[c,f,m,f,m,y,c,y];return this._transformCoordinates(S,S,4)},_transformBounds:function(s,c,f){for(var m=this._transformCorners(s),y=m.slice(0,2),S=y.slice(),T=2;T<8;T++){var k=m[T],O=T&1;k<y[O]?y[O]=k:k>S[O]&&(S[O]=k)}return c||(c=new $),c._set(y[0],y[1],S[0]-y[0],S[1]-y[1],f)},inverseTransform:function(){return this._inverseTransform(E.read(arguments))},_inverseTransform:function(s,c,f){var m=this._a,y=this._b,S=this._c,T=this._d,k=this._tx,O=this._ty,A=m*T-y*S,N=null;if(A&&!isNaN(A)&&isFinite(k)&&isFinite(O)){var B=s.x-this._tx,R=s.y-this._ty;c||(c=new E),N=c._set((B*T-R*S)/A,(R*m-B*y)/A,f)}return N},decompose:function(){var s=this._a,c=this._b,f=this._c,m=this._d,y=s*m-c*f,S=Math.sqrt,T=Math.atan2,k=180/Math.PI,O,A,N;if(s!==0||c!==0){var B=S(s*s+c*c);O=Math.acos(s/B)*(c>0?1:-1),A=[B,y/B],N=[T(s*f+c*m,B*B),0]}else if(f!==0||m!==0){var R=S(f*f+m*m);O=Math.asin(f/R)*(m>0?1:-1),A=[y/R,R],N=[0,T(s*f+c*m,R*R)]}else O=0,N=A=[0,0];return{translation:this.getTranslation(),rotation:O*k,scaling:new E(A),skewing:new E(N[0]*k,N[1]*k)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new E(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(s){this.isIdentity()||s.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},o.each(["a","b","c","d","tx","ty"],function(s){var c=o.capitalize(s),f="_"+s;this["get"+c]=function(){return this[f]},this["set"+c]=function(m){this[f]=m,this._changed()}},{})),kt=o.extend({_class:"Line",initialize:function(c,f,m,y,S){var T=!1;arguments.length>=4?(this._px=c,this._py=f,this._vx=m,this._vy=y,T=S):(this._px=c.x,this._py=c.y,this._vx=f.x,this._vy=f.y,T=m),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new E(this._px,this._py)},getVector:function(){return new E(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(s,c){return kt.intersect(this._px,this._py,this._vx,this._vy,s._px,s._py,s._vx,s._vy,!0,c)},getSide:function(s,c){return kt.getSide(this._px,this._py,this._vx,this._vy,s.x,s.y,!0,c)},getDistance:function(s){return Math.abs(this.getSignedDistance(s))},getSignedDistance:function(s){return kt.getSignedDistance(this._px,this._py,this._vx,this._vy,s.x,s.y,!0)},isCollinear:function(s){return E.isCollinear(this._vx,this._vy,s._vx,s._vy)},isOrthogonal:function(s){return E.isOrthogonal(this._vx,this._vy,s._vx,s._vy)},statics:{intersect:function(s,c,f,m,y,S,T,k,O,A){O||(f-=s,m-=c,T-=y,k-=S);var N=f*k-m*T;if(!M.isMachineZero(N)){var B=s-y,R=c-S,j=(T*R-k*B)/N,Z=(f*R-m*B)/N,I=1e-12,q=-I,P=1+I;if(A||q<j&&j<P&&q<Z&&Z<P)return A||(j=j<=0?0:j>=1?1:j),new E(s+j*f,c+j*m)}},getSide:function(s,c,f,m,y,S,T,k){T||(f-=s,m-=c);var O=y-s,A=S-c,N=O*m-A*f;return!k&&M.isMachineZero(N)&&(N=(O*f+O*f)/(f*f+m*m),N>=0&&N<=1&&(N=0)),N<0?-1:N>0?1:0},getSignedDistance:function(s,c,f,m,y,S,T){return T||(f-=s,m-=c),f===0?m>0?y-s:s-y:m===0?f<0?S-c:c-S:((y-s)*m-(S-c)*f)/(m>f?m*Math.sqrt(1+f*f/(m*m)):f*Math.sqrt(1+m*m/(f*f)))},getDistance:function(s,c,f,m,y,S,T){return Math.abs(kt.getSignedDistance(s,c,f,m,y,S,T))}}}),St=v.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(c){v.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ze(null,null,this),this._view=$e.create(this,c||ri.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(s,c){return o.serialize(this._children,s,!0,c)},_changed:function(s,c){if(s&1){var f=this._view;f&&(f._needsUpdate=!0,!f._requested&&f._autoUpdate&&f.requestUpdate())}var m=this._changes;if(m&&c){var y=this._changesById,S=c._id,T=y[S];T?T.flags|=s:m.push(y[S]={item:c,flags:s})}},clear:function(){for(var s=this._children,c=s.length-1;c>=0;c--)s[c].remove()},isEmpty:function(){return!this._children.length},remove:function s(){return s.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(s){this._currentStyle.set(s)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Wt({project:this,insert:!0})},getSymbolDefinitions:function(){var s=[],c={};return this.getItems({class:Pt,match:function(f){var m=f._definition,y=m._id;return c[y]||(c[y]=!0,s.push(m)),!1}}),s},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var s=this._selectionItems,c=[];for(var f in s){var m=s[f],y=m._selection;y&1&&m.isInserted()?c.push(m):y||this._updateSelection(m)}return c},_updateSelection:function(s){var c=s._id,f=this._selectionItems;s._selection?f[c]!==s&&(this._selectionCount++,f[c]=s):f[c]===s&&(this._selectionCount--,delete f[c])},selectAll:function(){for(var s=this._children,c=0,f=s.length;c<f;c++)s[c].setFullySelected(!0)},deselectAll:function(){var s=this._selectionItems;for(var c in s)s[c].setFullySelected(!1)},addLayer:function(s){return this.insertLayer(e,s)},insertLayer:function(s,c){if(c instanceof Wt){c._remove(!1,!0),o.splice(this._children,[c],s,0),c._setProject(this,!0);var f=c._name;f&&c.setName(f),this._changes&&c._changed(5),this._activeLayer||(this._activeLayer=c)}else c=null;return c},_insertItem:function(s,c,f){return c=this.insertLayer(s,c)||(this._activeLayer||this._insertItem(e,new Wt(V.NO_INSERT),!0)).insertChild(s,c),f&&c.activate&&c.activate(),c},getItems:function(s){return V._getItems(this,s)},getItem:function(s){return V._getItems(this,s,null,null,!0)[0]||null},importJSON:function(s){this.activate();var c=this._activeLayer;return o.importJSON(s,c&&c.isEmpty()&&c)},removeOn:function(s){var c=this._removeSets;if(c){s==="mouseup"&&(c.mousedrag=null);var f=c[s];if(f){for(var m in f){var y=f[m];for(var S in c){var T=c[S];T&&T!=f&&delete T[y._id]}y.remove()}c[s]=null}}},draw:function(s,c,f){this._updateVersion++,s.save(),c.applyToContext(s);for(var m=this._children,y=new o({offset:new E(0,0),pixelRatio:f,viewMatrix:c.isIdentity()?null:c,matrices:[new gt],updateMatrix:!0}),S=0,T=m.length;S<T;S++)m[S].draw(s,y);if(s.restore(),this._selectionCount>0){s.save(),s.strokeWidth=1;var k=this._selectionItems,O=this._scope.settings.handleSize,A=this._updateVersion;for(var N in k)k[N]._drawSelection(s,c,O,k,A);s.restore()}}}),V=o.extend(d,{statics:{extend:function s(c){return c._serializeFields&&(c._serializeFields=o.set({},this.prototype._serializeFields,c._serializeFields)),s.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new gt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var s=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return o.each(s,function(c){this._events[c]={install:function(f){this.getView()._countItemEvent(f,1)},uninstall:function(f){this.getView()._countItemEvent(f,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:s}})},{initialize:function(){},_initialize:function(s,c){var f=s&&o.isPlainObject(s),m=f&&s.internal===!0,y=this._matrix=new gt,S=f&&s.project||Le.project,T=Le.settings;return this._id=m?null:F.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,c&&y.translate(c),y._owner=this,this._style=new Ze(S._currentStyle,this,S),m||f&&s.insert==!1||!T.insertItems&&!(f&&s.insert==!0)?this._setProject(S):(f&&s.parent||S)._insertItem(e,this,!0),f&&s!==V.NO_INSERT&&s!==V.INSERT&&this.set(s,{internal:!0,insert:!0,project:!0,parent:!0}),f},_serialize:function(s,c){var f={},m=this;function y(S){for(var T in S){var k=m[T];o.equals(k,T==="leading"?S.fontSize*1.2:S[T])||(f[T]=o.serialize(k,s,T!=="data",c))}}return y(this._serializeFields),this instanceof Jt||y(this._style._defaults),[this._class,f]},_changed:function(s){var c=this._symbol,f=this._parent||c,m=this._project;s&8&&(this._bounds=this._position=this._decomposed=e),s&16&&(this._globalMatrix=e),f&&s&72&&V._clearBoundsCache(f),s&2&&V._clearBoundsCache(this),m&&m._changed(s,this),c&&c._changed(s)},getId:function(){return this._id},getName:function(){return this._name},setName:function(s){if(this._name&&this._removeNamed(),s===+s+"")throw new Error("Names consisting only of numbers are not supported.");var c=this._getOwner();if(s&&c){var f=c._children,m=c._namedChildren;(m[s]=m[s]||[]).push(this),s in f||(f[s]=this)}this._name=s||e,this._changed(256)},getStyle:function(){return this._style},setStyle:function(s){this.getStyle().set(s)}},o.each(["locked","visible","blendMode","opacity","guide"],function(s){var c=o.capitalize(s),f="_"+s,m={locked:256,visible:265};this["get"+c]=function(){return this[f]},this["set"+c]=function(y){y!=this[f]&&(this[f]=y,this._changed(m[s]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(s){if(s!==this._selection){this._selection=s;var c=this._project;c&&(c._updateSelection(this),this._changed(257))}},_changeSelection:function(s,c){var f=this._selection;this.setSelection(c?f|s:f&~s)},isSelected:function(){if(this._selectChildren){for(var s=this._children,c=0,f=s.length;c<f;c++)if(s[c].isSelected())return!0}return!!(this._selection&1)},setSelected:function(s){if(this._selectChildren)for(var c=this._children,f=0,m=c.length;f<m;f++)c[f].setSelected(s);this._changeSelection(1,s)},isFullySelected:function(){var s=this._children,c=!!(this._selection&1);if(s&&c){for(var f=0,m=s.length;f<m;f++)if(!s[f].isFullySelected())return!1;return!0}return c},setFullySelected:function(s){var c=this._children;if(c)for(var f=0,m=c.length;f<m;f++)c[f].setFullySelected(s);this._changeSelection(1,s)},isClipMask:function(){return this._clipMask},setClipMask:function(s){this._clipMask!=(s=!!s)&&(this._clipMask=s,s&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(s){this._data=s},getPosition:function(s){var c=s?E:X,f=this._position||(this._position=this._getPositionFromBounds());return new c(f.x,f.y,this,"setPosition")},setPosition:function(){this.translate(E.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(s){return this._pivot?this._matrix._transformPoint(this._pivot):(s||this.getBounds()).getCenter(!0)},getPivot:function(){var s=this._pivot;return s?new X(s.x,s.y,this,"setPivot"):null},setPivot:function(){this._pivot=E.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},o.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(s,c){this[c]=function(f){return this.getBounds(f,s)}},{beans:!0,getBounds:function(s,c){var f=c||s instanceof gt,m=o.set({},f?c:s,this._boundsOptions);(!m.stroke||this.getStrokeScaling())&&(m.cacheItem=this);var y=this._getCachedBounds(f&&s,m).rect;return arguments.length?y:new lt(y.x,y.y,y.width,y.height,this,"setBounds")},setBounds:function(){var s=$.read(arguments),c=this.getBounds(),f=this._matrix,m=new gt,y=s.getCenter();m.translate(y),(s.width!=c.width||s.height!=c.height)&&(f.isInvertible()||(f.set(f._backup||new gt().translate(f.getTranslation())),c=this.getBounds()),m.scale(c.width!==0?s.width/c.width:0,c.height!==0?s.height/c.height:0)),y=c.getCenter(),m.translate(-y.x,-y.y),this.transform(m)},_getBounds:function(s,c){var f=this._children;return!f||!f.length?new $:(V._updateBoundsCache(this,c.cacheItem),V._getBounds(f,s,c))},_getBoundsCacheKey:function(s,c){return[s.stroke?1:0,s.handle?1:0,c?1:0].join("")},_getCachedBounds:function(s,c,f){s=s&&s._orNullIfIdentity();var m=c.internal&&!f,y=c.cacheItem,S=m?null:this._matrix._orNullIfIdentity(),T=y&&(!s||s.equals(S))&&this._getBoundsCacheKey(c,m),k=this._bounds;if(V._updateBoundsCache(this._parent||this._symbol,y),T&&k&&T in k){var O=k[T];return{rect:O.rect.clone(),nonscaling:O.nonscaling}}var A=this._getBounds(s||S,c),N=A.rect||A,B=this._style,R=A.nonscaling||B.hasStroke()&&!B.getStrokeScaling();if(T){k||(this._bounds=k={});var O=k[T]={rect:N.clone(),nonscaling:R,internal:m}}return{rect:N,nonscaling:R}},_getStrokeMatrix:function(s,c){var f=this.getStrokeScaling()?null:c&&c.internal?this:this._parent||this._symbol&&this._symbol._item,m=f?f.getViewMatrix().invert():s;return m&&m._shiftless()},statics:{_updateBoundsCache:function(s,c){if(s&&c){var f=c._id,m=s._boundsCache=s._boundsCache||{ids:{},list:[]};m.ids[f]||(m.list.push(c),m.ids[f]=c)}},_clearBoundsCache:function(s){var c=s._boundsCache;if(c){s._bounds=s._position=s._boundsCache=e;for(var f=0,m=c.list,y=m.length;f<y;f++){var S=m[f];S!==s&&(S._bounds=S._position=e,S._boundsCache&&V._clearBoundsCache(S))}}},_getBounds:function(s,c,f){var m=1/0,y=-m,S=m,T=y,k=!1;f=f||{};for(var O=0,A=s.length;O<A;O++){var N=s[O];if(N._visible&&!N.isEmpty(!0)){var B=N._getCachedBounds(c&&c.appended(N._matrix),f,!0),R=B.rect;m=Math.min(R.x,m),S=Math.min(R.y,S),y=Math.max(R.x+R.width,y),T=Math.max(R.y+R.height,T),B.nonscaling&&(k=!0)}}return{rect:isFinite(m)?new $(m,S,y-m,T-S):new $,nonscaling:k}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var s=this._decompose();return s?s.rotation:0},setRotation:function(s){var c=this.getRotation();if(c!=null&&s!=null){var f=this._decomposed;this.rotate(s-c),f&&(f.rotation=s,this._decomposed=f)}},getScaling:function(){var s=this._decompose(),c=s&&s.scaling;return new X(c?c.x:1,c?c.y:1,this,"setScaling")},setScaling:function(){var s=this.getScaling(),c=E.read(arguments,0,{clone:!0,readNull:!0});if(s&&c&&!s.equals(c)){var f=this.getRotation(),m=this._decomposed,y=new gt,S=M.isZero;if(S(s.x)||S(s.y))y.translate(m.translation),f&&y.rotate(f),y.scale(c.x,c.y),this._matrix.set(y);else{var T=this.getPosition(!0);y.translate(T),f&&y.rotate(f),y.scale(c.x/s.x,c.y/s.y),f&&y.rotate(-f),y.translate(T.negate()),this.transform(y)}m&&(m.scaling=c,this._decomposed=m)}},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},getGlobalMatrix:function(s){var c=this._globalMatrix;if(c)for(var f=this._parent,m=[];f;){if(!f._globalMatrix){c=null;for(var y=0,S=m.length;y<S;y++)m[y]._globalMatrix=null;break}m.push(f),f=f._parent}if(!c){c=this._globalMatrix=this._matrix.clone();var f=this._parent;f&&c.prepend(f.getGlobalMatrix(!0))}return s?c:c.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(s){(this._applyMatrix=this._canApplyMatrix&&!!s)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(s,c){if(this._project!==s){this._project&&this._installEvents(!1),this._project=s;for(var f=this._children,m=0,y=f&&f.length;m<y;m++)f[m]._setProject(s);c=!0}c&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function s(c){s.base.call(this,c);for(var f=this._children,m=0,y=f&&f.length;m<y;m++)f[m]._installEvents(c)},getLayer:function(){for(var s=this;s=s._parent;)if(s instanceof Wt)return s;return null},getParent:function(){return this._parent},setParent:function(s){return s.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(s){this.removeChildren(),this.addChildren(s)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var s=this._getOwner();return s&&s._children[this._index+1]||null},getPreviousSibling:function(){var s=this._getOwner();return s&&s._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(s){var c=this._parent,f=c&&c._children;f&&c.insertChildren(s in f?s:e,[this])},equals:function(s){return s===this||s&&this._class===s._class&&this._style.equals(s._style)&&this._matrix.equals(s._matrix)&&this._locked===s._locked&&this._visible===s._visible&&this._blendMode===s._blendMode&&this._opacity===s._opacity&&this._clipMask===s._clipMask&&this._guide===s._guide&&this._equals(s)||!1},_equals:function(s){return o.equals(this._children,s._children)},clone:function(s){var c=new this.constructor(V.NO_INSERT),f=this._children,m=o.pick(s?s.insert:e,s===e||s===!0),y=o.pick(s?s.deep:e,!0);f&&c.copyAttributes(this),(!f||y)&&c.copyContent(this),f||c.copyAttributes(this),m&&c.insertAbove(this);var S=this._name,T=this._parent;if(S&&T){for(var f=T._children,k=S,O=1;f[S];)S=k+" "+O++;S!==k&&c.setName(S)}return c},copyContent:function(s){for(var c=s._children,f=0,m=c&&c.length;f<m;f++)this.addChild(c[f].clone(!1),!0)},copyAttributes:function(s,c){this.setStyle(s._style);for(var f=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],m=0,y=f.length;m<y;m++){var S=f[m];s.hasOwnProperty(S)&&(this[S]=s[S])}c||this._matrix.set(s._matrix,!0),this.setApplyMatrix(s._applyMatrix),this.setPivot(s._pivot),this.setSelection(s._selection);var T=s._data,k=s._name;this._data=T?o.clone(T):null,k&&this.setName(k)},rasterize:function(s,c){var f,m,y;o.isPlainObject(s)?(f=s.resolution,m=s.insert,y=s.raster):(f=s,m=c),y||(y=new he(V.NO_INSERT));var S=this.getStrokeBounds(),T=(f||this.getView().getResolution())/72,k=S.getTopLeft().floor(),O=S.getBottomRight().ceil(),A=new z(O.subtract(k)),N=A.multiply(T);if(y.setSize(N,!0),!N.isZero()){var B=y.getContext(!0),R=new gt().scale(T).translate(k.negate());B.save(),R.applyToContext(B),this.draw(B,new o({matrices:[R]})),B.restore()}return y._matrix.set(new gt().translate(k.add(A.divide(2))).scale(1/T)),(m===e||m)&&y.insertAbove(this),y},contains:function(){var s=this._matrix;return s.isInvertible()&&!!this._contains(s._inverseTransform(E.read(arguments)))},_contains:function(s){var c=this._children;if(c){for(var f=c.length-1;f>=0;f--)if(c[f].contains(s))return!0;return!1}return s.isInside(this.getInternalBounds())},isInside:function(){return $.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new le.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(s,c){return s instanceof V?this._asPathItem().getIntersections(s._asPathItem(),null,c,!0).length>0:!1}},new function(){function s(){var m=arguments;return this._hitTest(E.read(m),_e.getOptions(m))}function c(){var m=arguments,y=E.read(m),S=_e.getOptions(m),T=[];return this._hitTest(y,new o({all:T},S)),T}function f(m,y,S,T){var k=this._children;if(k)for(var O=k.length-1;O>=0;O--){var A=k[O],N=A!==T&&A._hitTest(m,y,S);if(N&&!y.all)return N}return null}return St.inject({hitTest:s,hitTestAll:c,_hitTest:f}),{hitTest:s,hitTestAll:c,_hitTestChildren:f}},{_hitTest:function(s,c,f){if(this._locked||!this._visible||this._guide&&!c.guides||this.isEmpty())return null;var m=this._matrix,y=f?f.appended(m):this.getGlobalMatrix().prepend(this.getView()._matrix),S=Math.max(c.tolerance,1e-12),T=c._tolerancePadding=new z(le._getStrokePadding(S,m._shiftless().invert()));if(s=m._inverseTransform(s),!s||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(s))return null;var k=!(c.guides&&!this._guide||c.selected&&!this.isSelected()||c.type&&c.type!==o.hyphenate(this._class)||c.class&&!(this instanceof c.class)),O=c.match,A=this,N,B;function R(D){return D&&O&&!O(D)&&(D=null),D&&c.all&&c.all.push(D),D}function j(D,U){var K=U?N["get"+U]():A.getPosition();if(s.subtract(K).divide(T).length<=1)return new _e(D,A,{name:U?o.hyphenate(U):D,point:K})}var Z=c.position,I=c.center,q=c.bounds;if(k&&this._parent&&(Z||I||q)){if((I||q)&&(N=this.getInternalBounds()),B=Z&&j("position")||I&&j("center","Center"),!B&&q)for(var P=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Y=0;Y<8&&!B;Y++)B=j("bounds",P[Y]);B=R(B)}return B||(B=this._hitTestChildren(s,c,y)||k&&R(this._hitTestSelf(s,c,y,this.getStrokeScaling()?null:y._shiftless().invert()))||null),B&&B.point&&(B.point=m.transform(B.point)),B},_hitTestSelf:function(s,c){if(c.fill&&this.hasFill()&&this._contains(s))return new _e("fill",this)},matches:function(s,c){function f(T,k){for(var O in T)if(T.hasOwnProperty(O)){var A=T[O],N=k[O];if(o.isPlainObject(A)&&o.isPlainObject(N)){if(!f(A,N))return!1}else if(!o.equals(A,N))return!1}return!0}var m=typeof s;if(m==="object"){for(var y in s)if(s.hasOwnProperty(y)&&!this.matches(y,s[y]))return!1;return!0}else{if(m==="function")return s(this);if(s==="match")return c(this);var S=/^(empty|editable)$/.test(s)?this["is"+o.capitalize(s)]():s==="type"?o.hyphenate(this._class):this[s];if(s==="class"){if(typeof c=="function")return this instanceof c;S=this._class}if(typeof c=="function")return!!c(S);if(c){if(c.test)return c.test(S);if(o.isPlainObject(c))return f(c,S)}return o.equals(S,c)}},getItems:function(s){return V._getItems(this,s,this._matrix)},getItem:function(s){return V._getItems(this,s,this._matrix,null,!0)[0]||null},statics:{_getItems:function s(c,f,m,y,S){if(!y){var T=typeof f=="object"&&f,k=T&&T.overlapping,O=T&&T.inside,A=k||O,R=A&&$.read([A]);y={items:[],recursive:T&&T.recursive!==!1,inside:!!O,overlapping:!!k,rect:R,path:k&&new le.Rectangle({rectangle:R,insert:!1})},T&&(f=o.filter({},f,{recursive:!0,inside:!0,overlapping:!0}))}var N=c._children,B=y.items,R=y.rect;m=R&&(m||new gt);for(var j=0,Z=N&&N.length;j<Z;j++){var I=N[j],q=m&&m.appended(I._matrix),P=!0;if(R){var A=I.getBounds(q);if(!R.intersects(A))continue;R.contains(A)||y.overlapping&&(A.contains(R)||y.path.intersects(I,q))||(P=!1)}if(P&&I.matches(f)&&(B.push(I),S)||(y.recursive!==!1&&s(I,f,q,y,S),S&&B.length>0))break}return B}}},{importJSON:function(s){var c=o.importJSON(s,this);return c!==this?this.addChild(c):c},addChild:function(s){return this.insertChild(e,s)},insertChild:function(s,c){var f=c?this.insertChildren(s,[c]):null;return f&&f[0]},addChildren:function(s){return this.insertChildren(this._children.length,s)},insertChildren:function(s,c){var f=this._children;if(f&&c&&c.length>0){c=o.slice(c);for(var m={},y=c.length-1;y>=0;y--){var S=c[y],T=S&&S._id;!S||m[T]?c.splice(y,1):(S._remove(!1,!0),m[T]=!0)}o.splice(f,c,s,0);for(var k=this._project,O=k._changes,y=0,A=c.length;y<A;y++){var S=c[y],N=S._name;S._parent=this,S._setProject(k,!0),N&&S.setName(N),O&&S._changed(5)}this._changed(11)}else c=null;return c},_insertItem:"#insertChild",_insertAt:function(s,c){var f=s&&s._getOwner(),m=s!==this&&f?this:null;return m&&(m._remove(!1,!0),f._insertItem(s._index+c,m)),m},insertAbove:function(s){return this._insertAt(s,1)},insertBelow:function(s){return this._insertAt(s,0)},sendToBack:function(){var s=this._getOwner();return s?s._insertItem(0,this):null},bringToFront:function(){var s=this._getOwner();return s?s._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(s){return this.insertChild(0,s)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(s){return s._insertItem(e,this)},copyTo:function(s){return this.clone(!1).addTo(s)},reduce:function(s){var c=this._children;if(c&&c.length===1){var f=c[0].reduce(s);return this._parent?(f.insertAbove(this),this.remove()):f.remove(),f}return this},_removeNamed:function(){var s=this._getOwner();if(s){var c=s._children,f=s._namedChildren,m=this._name,y=f[m],S=y?y.indexOf(this):-1;S!==-1&&(c[m]==this&&delete c[m],y.splice(S,1),y.length?c[m]=y[0]:delete f[m])}},_remove:function(s,c){var f=this._getOwner(),m=this._project,y=this._index;return this._style&&this._style._dispose(),f?(this._name&&this._removeNamed(),y!=null&&(m._activeLayer===this&&(m._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(f._children,null,y,1)),this._installEvents(!1),s&&m._changes&&this._changed(5),c&&f._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(s){var c=s&&s.insertBelow(this);return c&&this.remove(),c},removeChildren:function(s,c){if(!this._children)return null;s=s||0,c=o.pick(c,this._children.length);for(var f=o.splice(this._children,null,s,c-s),m=f.length-1;m>=0;m--)f[m]._remove(!0,!1);return f.length>0&&this._changed(11),f},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var s=0,c=this._children.length;s<c;s++)this._children[s]._index=s;this._changed(11)}},isEmpty:function(s){var c=this._children,f=c?c.length:0;if(s){for(var m=0;m<f;m++)if(!c[m].isEmpty(s))return!1;return!0}return!f},isEditable:function(){for(var s=this;s;){if(!s._visible||s._locked)return!1;s=s._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(s){function c(T){var k=[];do k.unshift(T);while(T=T._parent);return k}for(var f=c(this),m=c(s),y=0,S=Math.min(f.length,m.length);y<S;y++)if(f[y]!=m[y])return f[y]._index<m[y]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(s){return this._getOrder(s)===-1},isBelow:function(s){return this._getOrder(s)===1},isParent:function(s){return this._parent===s},isChild:function(s){return s&&s._parent===this},isDescendant:function(s){for(var c=this;c=c._parent;)if(c===s)return!0;return!1},isAncestor:function(s){return s?s.isDescendant(this):!1},isSibling:function(s){return this._parent===s._parent},isGroupedWith:function(s){for(var c=this._parent;c;){if(c._parent&&/^(Group|Layer|CompoundPath)$/.test(c._class)&&s.isDescendant(c))return!0;c=c._parent}return!1}},o.each(["rotate","scale","shear","skew"],function(s){var c=s==="rotate";this[s]=function(){var f=arguments,m=(c?o:E).read(f),y=E.read(f,0,{readNull:!0});return this.transform(new gt()[s](m,y||this.getPosition(!0)))}},{translate:function(){var s=new gt;return this.transform(s.translate.apply(s,arguments))},transform:function(s,c,f){var m=this._matrix,y=s&&!s.isIdentity(),S=f&&this._canApplyMatrix||this._applyMatrix&&(y||!m.isIdentity()||c&&this._children);if(!y&&!S)return this;if(y){!s.isInvertible()&&m.isInvertible()&&(m._backup=m.getValues()),m.prepend(s,!0);var T=this._style,k=T.getFillColor(!0),O=T.getStrokeColor(!0);k&&k.transform(s),O&&O.transform(s)}if(S&&(S=this._transformContent(m,c,f))){var A=this._pivot;A&&m._transformPoint(A,A,!0),m.reset(!0),f&&this._canApplyMatrix&&(this._applyMatrix=!0)}var N=this._bounds,B=this._position;(y||S)&&this._changed(25);var R=y&&N&&s.decompose();if(R&&R.skewing.isZero()&&R.rotation%90===0){for(var j in N){var Z=N[j];if(Z.nonscaling)delete N[j];else if(S||!Z.internal){var I=Z.rect;s._transformBounds(I,I)}}this._bounds=N;var q=N[this._getBoundsCacheKey(this._boundsOptions||{})];q&&(this._position=this._getPositionFromBounds(q.rect))}else y&&B&&this._pivot&&(this._position=s._transformPoint(B,B));return this},_transformContent:function(s,c,f){var m=this._children;if(m){for(var y=0,S=m.length;y<S;y++)m[y].transform(s,c,f);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(E.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(E.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(E.read(arguments))},localToParent:function(){return this._matrix._transformPoint(E.read(arguments))},fitBounds:function(s,c){s=$.read(arguments);var f=this.getBounds(),m=f.height/f.width,y=s.height/s.width,S=(c?m>y:m<y)?s.width/f.width:s.height/f.height,T=new $(new E,new z(f.width*S,f.height*S));T.setCenter(s.getCenter()),this.setBounds(T)}}),{_setStyles:function(s,c,f){var m=this._style,y=this._matrix;if(m.hasFill()&&(s.fillStyle=m.getFillColor().toCanvasStyle(s,y)),m.hasStroke()){s.strokeStyle=m.getStrokeColor().toCanvasStyle(s,y),s.lineWidth=m.getStrokeWidth();var S=m.getStrokeJoin(),T=m.getStrokeCap(),k=m.getMiterLimit();if(S&&(s.lineJoin=S),T&&(s.lineCap=T),k&&(s.miterLimit=k),Le.support.nativeDash){var O=m.getDashArray(),A=m.getDashOffset();O&&O.length&&("setLineDash"in s?(s.setLineDash(O),s.lineDashOffset=A):(s.mozDash=O,s.mozDashOffset=A))}}if(m.hasShadow()){var N=c.pixelRatio||1,B=f._shiftless().prepend(new gt().scale(N,N)),R=B.transform(new E(m.getShadowBlur(),0)),j=B.transform(this.getShadowOffset());s.shadowColor=m.getShadowColor().toCanvasStyle(s),s.shadowBlur=R.getLength(),s.shadowOffsetX=j.x,s.shadowOffsetY=j.y}},draw:function(s,c,f){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var m=c.matrices,y=c.viewMatrix,S=this._matrix,T=m[m.length-1].appended(S);if(T.isInvertible()){y=y?y.appended(T):T,m.push(T),c.updateMatrix&&(this._globalMatrix=T);var k=this._blendMode,O=M.clamp(this._opacity,0,1),A=k==="normal",N=rs.nativeModes[k],B=A&&O===1||c.dontStart||c.clip||(N||A&&O<1)&&this._canComposite(),R=c.pixelRatio||1,j,Z,I;if(!B){var q=this.getStrokeBounds(y);if(!q.width||!q.height){m.pop();return}I=c.offset,Z=c.offset=q.getTopLeft().floor(),j=s,s=ri.getContext(q.getSize().ceil().add(1).multiply(R)),R!==1&&s.scale(R,R)}s.save();var P=f?f.appended(S):this._canScaleStroke&&!this.getStrokeScaling(!0)&&y,Y=!B&&c.clipItem,D=!P||Y;if(B?(s.globalAlpha=O,N&&(s.globalCompositeOperation=k)):D&&s.translate(-Z.x,-Z.y),D&&(B?S:y).applyToContext(s),Y&&c.clipItem.draw(s,c.extend({clip:!0})),P){s.setTransform(R,0,0,R,0,0);var U=c.offset;U&&s.translate(-U.x,-U.y)}this._draw(s,c,y,P),s.restore(),m.pop(),c.clip&&!c.dontFinish&&s.clip(this.getFillRule()),B||(rs.process(k,s,j,O,Z.subtract(I).multiply(R)),ri.release(s),c.offset=I)}}},_isUpdated:function(s){var c=this._parent;if(c instanceof ft)return c._isUpdated(s);var f=this._updateVersion===s;return!f&&c&&c._visible&&c._isUpdated(s)&&(this._updateVersion=s,f=!0),f},_drawSelection:function(s,c,f,m,y){var S=this._selection,T=S&1,k=S&2||T&&this._selectBounds,O=S&4;if(this._drawSelected||(T=!1),(T||k||O)&&this._isUpdated(y)){var A,N=this.getSelectedColor(!0)||(A=this.getLayer())&&A.getSelectedColor(!0),B=c.appended(this.getGlobalMatrix(!0)),R=f/2;if(s.strokeStyle=s.fillStyle=N?N.toCanvasStyle(s):"#009dec",T&&this._drawSelected(s,B,m),O){var j=this.getPosition(!0),Z=this._parent,I=Z?Z.localToGlobal(j):j,q=I.x,P=I.y;s.beginPath(),s.arc(q,P,R,0,Math.PI*2,!0),s.stroke();for(var Y=[[0,-1],[1,0],[0,1],[-1,0]],D=R,U=f+1,K=0;K<4;K++){var Q=Y[K],W=Q[0],et=Q[1];s.moveTo(q+W*D,P+et*D),s.lineTo(q+W*U,P+et*U),s.stroke()}}if(k){var nt=B._transformCorners(this.getInternalBounds());s.beginPath();for(var K=0;K<8;K++)s[K?"lineTo":"moveTo"](nt[K],nt[++K]);s.closePath(),s.stroke();for(var K=0;K<8;K++)s.fillRect(nt[K]-R,nt[++K]-R,f,f)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],function(s){this["removeOn"+o.capitalize(s)]=function(){var c={};return c[s]=!0,this.removeOn(c)}},{removeOn:function(s){for(var c in s)if(s[c]){var f="mouse"+c,m=this._project,y=m._removeSets=m._removeSets||{};y[f]=y[f]||{},y[f][this._id]=this}return this}}),{tween:function(s,c,f){f||(f=c,c=s,s=null,f||(f=c,c=null));var m=f&&f.easing,y=f&&f.start,S=f!=null&&(typeof f=="number"?f:f.duration),T=new is(this,s,c,S,m,y);function k(O){T._handleFrame(O.time*1e3),T.running||this.off("frame",k)}return S&&this.on("frame",k),T},tweenTo:function(s,c){return this.tween(null,s,c)},tweenFrom:function(s,c){return this.tween(s,null,c)}}),Jt=V.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||this.addChildren(Array.isArray(c)?c:arguments)},_changed:function s(c){s.base.call(this,c),c&2050&&(this._clipItem=e)},_getClipItem:function(){var s=this._clipItem;if(s===e){s=null;for(var c=this._children,f=0,m=c.length;f<m;f++)if(c[f]._clipMask){s=c[f];break}this._clipItem=s}return s},isClipped:function(){return!!this._getClipItem()},setClipped:function(s){var c=this.getFirstChild();c&&c.setClipMask(s)},_getBounds:function s(c,f){var m=this._getClipItem();return m?m._getCachedBounds(m._matrix.prepended(c),o.set({},f,{stroke:!1})):s.base.call(this,c,f)},_hitTestChildren:function s(c,f,m){var y=this._getClipItem();return(!y||y.contains(c))&&s.base.call(this,c,f,m,y)},_draw:function(s,c){var f=c.clip,m=!f&&this._getClipItem();c=c.extend({clipItem:m,clip:!1}),f?(s.beginPath(),c.dontStart=c.dontFinish=!0):m&&m.draw(s,c.extend({clip:!0}));for(var y=this._children,S=0,T=y.length;S<T;S++){var k=y[S];k!==m&&k.draw(s,c)}}}),Wt=Jt.extend({_class:"Layer",initialize:function(){Jt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function s(){return this._parent?s.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Zt=V.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(c,f){this._initialize(c,f)},_equals:function(s){return this._type===s._type&&this._size.equals(s._size)&&o.equals(this._radius,s._radius)},copyContent:function(s){this.setType(s._type),this.setSize(s._size),this.setRadius(s._radius)},getType:function(){return this._type},setType:function(s){this._type=s},getShape:"#getType",setShape:"#setType",getSize:function(){var s=this._size;return new it(s.width,s.height,this,"setSize")},setSize:function(){var s=z.read(arguments);if(!this._size)this._size=s.clone();else if(!this._size.equals(s)){var c=this._type,f=s.width,m=s.height;c==="rectangle"?this._radius.set(z.min(this._radius,s.divide(2).abs())):c==="circle"?(f=m=(f+m)/2,this._radius=f/2):c==="ellipse"&&this._radius._set(f/2,m/2),this._size._set(f,m),this._changed(9)}},getRadius:function(){var s=this._radius;return this._type==="circle"?s:new it(s.width,s.height,this,"setRadius")},setRadius:function(s){var c=this._type;if(c==="circle"){if(s===this._radius)return;var f=s*2;this._radius=s,this._size._set(f,f)}else if(s=z.read(arguments),!this._radius)this._radius=s.clone();else{if(this._radius.equals(s))return;if(this._radius.set(s),c==="rectangle"){var f=z.max(this._size,s.multiply(2));this._size.set(f)}else c==="ellipse"&&this._size._set(s.width*2,s.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(s){var c=new le[o.capitalize(this._type)]({center:new E,size:this._size,radius:this._radius,insert:!1});return c.copyAttributes(this),Le.settings.applyMatrix&&c.setApplyMatrix(!0),(s===e||s)&&c.insertAbove(this),c},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(s,c,f,m){var y=this._style,S=y.hasFill(),T=y.hasStroke(),k=c.dontFinish||c.clip,O=!m;if(S||T||k){var A=this._type,N=this._radius,B=A==="circle";if(c.dontStart||s.beginPath(),O&&B)s.arc(0,0,N,0,Math.PI*2,!0);else{var R=B?N:N.width,j=B?N:N.height,Z=this._size,I=Z.width,q=Z.height;if(O&&A==="rectangle"&&R===0&&j===0)s.rect(-I/2,-q/2,I,q);else{var P=I/2,Y=q/2,D=1-.5522847498307936,U=R*D,K=j*D,Q=[-P,-Y+j,-P,-Y+K,-P+U,-Y,-P+R,-Y,P-R,-Y,P-U,-Y,P,-Y+K,P,-Y+j,P,Y-j,P,Y-K,P-U,Y,P-R,Y,-P+R,Y,-P+U,Y,-P,Y-K,-P,Y-j];m&&m.transform(Q,Q,32),s.moveTo(Q[0],Q[1]),s.bezierCurveTo(Q[2],Q[3],Q[4],Q[5],Q[6],Q[7]),P!==R&&s.lineTo(Q[8],Q[9]),s.bezierCurveTo(Q[10],Q[11],Q[12],Q[13],Q[14],Q[15]),Y!==j&&s.lineTo(Q[16],Q[17]),s.bezierCurveTo(Q[18],Q[19],Q[20],Q[21],Q[22],Q[23]),P!==R&&s.lineTo(Q[24],Q[25]),s.bezierCurveTo(Q[26],Q[27],Q[28],Q[29],Q[30],Q[31])}}s.closePath()}!k&&(S||T)&&(this._setStyles(s,c,f),S&&(s.fill(y.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),T&&s.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(s,c){var f=new $(this._size).setCenter(0,0),m=this._style,y=c.stroke&&m.hasStroke()&&m.getStrokeWidth();return s&&(f=s._transformBounds(f)),y?f.expand(le._getStrokePadding(y,this._getStrokeMatrix(s,c))):f}},new function(){function s(f,m,y){var S=f._radius;if(!S.isZero())for(var T=f._size.divide(2),k=1;k<=4;k++){var O=new E(k>1&&k<4?-1:1,k>2?-1:1),A=O.multiply(T),N=A.subtract(O.multiply(S)),B=new $(y?A.add(O.multiply(y)):A,N);if(B.contains(m))return{point:N,quadrant:k}}}function c(f,m,y,S){var T=f.divide(m);return(!S||T.isInQuadrant(S))&&T.subtract(T.normalize()).multiply(m).divide(y).length<=1}return{_contains:function f(m){if(this._type==="rectangle"){var y=s(this,m);return y?m.subtract(y.point).divide(this._radius).getLength()<=1:f.base.call(this,m)}else return m.divide(this.size).getLength()<=.5},_hitTestSelf:function f(m,y,S,T){var k=!1,O=this._style,A=y.stroke&&O.hasStroke(),N=y.fill&&O.hasFill();if(A||N){var B=this._type,R=this._radius,j=A?O.getStrokeWidth()/2:0,Z=y._tolerancePadding.add(le._getStrokePadding(j,!O.getStrokeScaling()&&T));if(B==="rectangle"){var I=Z.multiply(2),q=s(this,m,I);if(q)k=c(m.subtract(q.point),R,Z,q.quadrant);else{var P=new $(this._size).setCenter(0,0),Y=P.expand(I),D=P.expand(I.negate());k=Y._containsPoint(m)&&!D._containsPoint(m)}}else k=c(m,R,Z)}return k?new _e(A?"stroke":"fill",this):f.base.apply(this,arguments)}}},{statics:new function(){function s(c,f,m,y,S){var T=o.create(Zt.prototype);return T._type=c,T._size=m,T._radius=y,T._initialize(o.getNamed(S),f),T}return{Circle:function(){var c=arguments,f=E.readNamed(c,"center"),m=o.readNamed(c,"radius");return s("circle",f,new z(m*2),m,c)},Rectangle:function(){var c=arguments,f=$.readNamed(c,"rectangle"),m=z.min(z.readNamed(c,"radius"),f.getSize(!0).divide(2));return s("rectangle",f.getCenter(!0),f.getSize(!0),m,c)},Ellipse:function(){var c=arguments,f=Zt._readEllipse(c),m=f.radius;return s("ellipse",f.center,m.multiply(2),m,c)},_readEllipse:function(c){var f,m;if(o.hasNamed(c,"radius"))f=E.readNamed(c,"center"),m=z.readNamed(c,"radius");else{var y=$.readNamed(c,"rectangle");f=y.getCenter(!0),m=y.getSize(!0).divide(2)}return{center:f,radius:m}}}}}),he=V.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(c,f){if(!this._initialize(c,f!==e&&E.read(arguments))){var m,y=typeof c,S=y==="string"?a.getElementById(c):y==="object"?c:null;if(S&&S!==V.NO_INSERT){if(S.getContext||S.naturalHeight!=null)m=S;else if(S){var T=z.read(arguments);T.isZero()||(m=ri.getCanvas(T))}}m?this.setImage(m):this.setSource(c)}this._size||(this._size=new z,this._loaded=!1)},_equals:function(s){return this.getSource()===s.getSource()},copyContent:function(s){var c=s._image,f=s._canvas;if(c)this._setImage(c);else if(f){var m=ri.getCanvas(s._size);m.getContext("2d").drawImage(f,0,0),this._setImage(m)}this._crossOrigin=s._crossOrigin},getSize:function(){var s=this._size;return new it(s?s.width:0,s?s.height:0,this,"setSize")},setSize:function(s,c){var f=z.read(arguments);if(f.equals(this._size))c&&this.clear();else if(f.width>0&&f.height>0){var m=!c&&this.getElement();this._setImage(ri.getCanvas(f)),m&&this.getContext(!0).drawImage(m,0,0,f.width,f.height)}else this._canvas&&ri.release(this._canvas),this._size=f.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(s){this.setSize(s,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(s){this.setSize(this.getWidth(),s)},getLoaded:function(){return this._loaded},isEmpty:function(){var s=this._size;return!s||s.width===0&&s.height===0},getResolution:function(){var s=this._matrix,c=new E(0,0).transform(s),f=new E(1,0).transform(s).subtract(c),m=new E(0,1).transform(s).subtract(c);return new z(72/f.getLength(),72/m.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(s){var c=this;function f(m){var y=c.getView(),S=m&&m.type||"load";y&&c.responds(S)&&(Le=y._scope,c.emit(S,new tr(m)))}this._setImage(s),this._loaded?setTimeout(f,0):s&&ze.add(s,{load:function(m){c._setImage(s),f(m)},error:f})},_setImage:function(s){this._canvas&&ri.release(this._canvas),s&&s.getContext?(this._image=null,this._canvas=s,this._loaded=!0):(this._image=s,this._canvas=null,this._loaded=!!(s&&s.src&&s.complete)),this._size=new z(s?s.naturalWidth||s.width:0,s?s.naturalHeight||s.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var s=ri.getContext(this._size);try{this._image&&s.drawImage(this._image,0,0),this._canvas=s.canvas}catch{ri.release(s)}}return this._canvas},setCanvas:"#setImage",getContext:function(s){return this._context||(this._context=this.getCanvas().getContext("2d")),s&&(this._image=null,this._changed(1025)),this._context},setContext:function(s){this._context=s},getSource:function(){var s=this._image;return s&&s.src||this.toDataURL()},setSource:function(s){var c=new t.Image,f=this._crossOrigin;f&&(c.crossOrigin=f),s&&(c.src=s),this.setImage(c)},getCrossOrigin:function(){var s=this._image;return s&&s.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(s){this._crossOrigin=s;var c=this._image;c&&(c.crossOrigin=s)},getSmoothing:function(){return this._smoothing},setSmoothing:function(s){this._smoothing=typeof s=="string"?s:s?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var s=$.read(arguments),c=ri.getContext(s.getSize());return c.drawImage(this.getCanvas(),s.x,s.y,s.width,s.height,0,0,s.width,s.height),c.canvas},getSubRaster:function(){var s=$.read(arguments),c=new he(V.NO_INSERT);return c._setImage(this.getSubCanvas(s)),c.translate(s.getCenter().subtract(this.getSize().divide(2))),c._matrix.prepend(this._matrix),c.insertAbove(this),c},toDataURL:function(){var s=this._image,c=s&&s.src;if(/^data:/.test(c))return c;var f=this.getCanvas();return f?f.toDataURL.apply(f,arguments):null},drawImage:function(s){var c=E.read(arguments,1);this.getContext(!0).drawImage(s,c.x,c.y)},getAverageColor:function(s){var c,f;if(s?s instanceof re?(f=s,c=s.getBounds()):typeof s=="object"&&("width"in s?c=new $(s):"x"in s&&(c=new $(s.x-.5,s.y-.5,1,1))):c=this.getBounds(),!c)return null;var m=32,y=Math.min(c.width,m),S=Math.min(c.height,m),T=he._sampleContext;T?T.clearRect(0,0,m+1,m+1):T=he._sampleContext=ri.getContext(new z(m)),T.save();var k=new gt().scale(y/c.width,S/c.height).translate(-c.x,-c.y);k.applyToContext(T),f&&f.draw(T,new o({clip:!0,matrices:[k]})),this._matrix.applyToContext(T);var O=this.getElement(),A=this._size;O&&T.drawImage(O,-A.width/2,-A.height/2),T.restore();for(var N=T.getImageData(.5,.5,Math.ceil(y),Math.ceil(S)).data,B=[0,0,0],R=0,j=0,Z=N.length;j<Z;j+=4){var I=N[j+3];R+=I,I/=255,B[0]+=N[j]*I,B[1]+=N[j+1]*I,B[2]+=N[j+2]*I}for(var j=0;j<3;j++)B[j]/=R;return R?ge.read(B):null},getPixel:function(){var s=E.read(arguments),c=this.getContext().getImageData(s.x,s.y,1,1).data;return new ge("rgb",[c[0]/255,c[1]/255,c[2]/255],c[3]/255)},setPixel:function(){var s=arguments,c=E.read(s),f=ge.read(s),m=f._convert("rgb"),y=f._alpha,S=this.getContext(!0),T=S.createImageData(1,1),k=T.data;k[0]=m[0]*255,k[1]=m[1]*255,k[2]=m[2]*255,k[3]=y!=null?y*255:255,S.putImageData(T,c.x,c.y)},clear:function(){var s=this._size;this.getContext(!0).clearRect(0,0,s.width+1,s.height+1)},createImageData:function(){var s=z.read(arguments);return this.getContext().createImageData(s.width,s.height)},getImageData:function(){var s=$.read(arguments);return s.isEmpty()&&(s=new $(this._size)),this.getContext().getImageData(s.x,s.y,s.width,s.height)},putImageData:function(s){var c=E.read(arguments,1);this.getContext(!0).putImageData(s,c.x,c.y)},setImageData:function(s){this.setSize(s),this.getContext(!0).putImageData(s,0,0)},_getBounds:function(s,c){var f=new $(this._size).setCenter(0,0);return s?s._transformBounds(f):f},_hitTestSelf:function(s){if(this._contains(s)){var c=this;return new _e("pixel",c,{offset:s.add(c._size.divide(2)).round(),color:{get:function(){return c.getPixel(this.offset)}}})}},_draw:function(s,c,f){var m=this.getElement();if(m&&m.width>0&&m.height>0){s.globalAlpha=M.clamp(this._opacity,0,1),this._setStyles(s,c,f);var y=this._smoothing,S=y==="off";Be.setPrefixed(s,S?"imageSmoothingEnabled":"imageSmoothingQuality",S?!1:y),s.drawImage(m,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Pt=V.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(c,f){this._initialize(c,f!==e&&E.read(arguments,1))||this.setDefinition(c instanceof Yt?c:new Yt(c))},_equals:function(s){return this._definition===s._definition},copyContent:function(s){this.setDefinition(s._definition)},getDefinition:function(){return this._definition},setDefinition:function(s){this._definition=s,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(s,c){var f=this._definition._item;return f._getCachedBounds(f._matrix.prepended(s),c)},_hitTestSelf:function(s,c,f){var m=c.extend({all:!1}),y=this._definition._item._hitTest(s,m,f);return y&&(y.item=this),y},_draw:function(s,c){this._definition._item.draw(s,c)}}),Yt=o.extend({_class:"SymbolDefinition",initialize:function(c,f){this._id=F.get(),this.project=Le.project,c&&this.setItem(c,f)},_serialize:function(s,c){return c.add(this,function(){return o.serialize([this._class,this._item],s,!1,c)})},_changed:function(s){s&8&&V._clearBoundsCache(this),s&1&&this.project._changed(s)},getItem:function(){return this._item},setItem:function(s,c){s._symbol&&(s=s.clone()),this._item&&(this._item._symbol=null),this._item=s,s.remove(),s.setSelected(!1),c||s.setPosition(new E),s._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(s){return new Pt(this,s)},clone:function(){return new Yt(this._item.clone(!1))},equals:function(s){return s===this||s&&this._item.equals(s._item)||!1}}),_e=o.extend({_class:"HitResult",initialize:function(c,f,m){this.type=c,this.item=f,m&&this.inject(m)},statics:{getOptions:function(s){var c=s&&o.read(s);return new o({type:null,tolerance:Le.settings.hitTolerance,fill:!c,stroke:!c,segments:!c,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},c)}}}),Xt=o.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(c,f,m,y,S,T){var k=arguments.length,O,A,N,B;k>0&&(c==null||typeof c=="object"?k===1&&c&&"point"in c?(O=c.point,A=c.handleIn,N=c.handleOut,B=c.selection):(O=c,A=f,N=m,B=y):(O=[c,f],A=m!==e?[m,y]:null,N=S!==e?[S,T]:null)),new Re(O,this,"_point"),new Re(A,this,"_handleIn"),new Re(N,this,"_handleOut"),B&&this.setSelection(B)},_serialize:function(s,c){var f=this._point,m=this._selection,y=m||this.hasHandles()?[f,this._handleIn,this._handleOut]:f;return m&&y.push(m),o.serialize(y,s,!0,c)},_changed:function(s){var c=this._path;if(c){var f=c._curves,m=this._index,y;f&&((!s||s===this._point||s===this._handleIn)&&(y=m>0?f[m-1]:c._closed?f[f.length-1]:null)&&y._changed(),(!s||s===this._point||s===this._handleOut)&&(y=f[m])&&y._changed()),c._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(E.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(E.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(E.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var s=this._handleIn,c=this._handleOut;return!s.isZero()&&!c.isZero()&&s.isCollinear(c)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(s){var c=this._selection,f=this._path;this._selection=s=s||0,f&&s!==c&&(f._updateSelection(this,c,s),f._changed(257))},_changeSelection:function(s,c){var f=this._selection;this.setSelection(c?f|s:f&~s)},isSelected:function(){return!!(this._selection&7)},setSelected:function(s){this._changeSelection(7,s)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var s=this._path,c=this._index;return s?(c>0&&!s._closed&&c===s._segments.length-1&&c--,s.getCurves()[c]||null):null},getLocation:function(){var s=this.getCurve();return s?new Gt(s,this===s._segment1?0:1):null},getNext:function(){var s=this._path&&this._path._segments;return s&&(s[this._index+1]||this._path._closed&&s[0])||null},smooth:function(s,c,f){var m=s||{},y=m.type,S=m.factor,T=this.getPrevious(),k=this.getNext(),O=(T||this)._point,A=this._point,N=(k||this)._point,B=O.getDistance(A),R=A.getDistance(N);if(!y||y==="catmull-rom"){var j=S===e?.5:S,Z=Math.pow(B,j),I=Z*Z,q=Math.pow(R,j),P=q*q;if(!c&&T){var Y=2*P+3*q*Z+I,D=3*q*(q+Z);this.setHandleIn(D!==0?new E((P*O._x+Y*A._x-I*N._x)/D-A._x,(P*O._y+Y*A._y-I*N._y)/D-A._y):new E)}if(!f&&k){var Y=2*I+3*Z*q+P,D=3*Z*(Z+q);this.setHandleOut(D!==0?new E((I*N._x+Y*A._x-P*O._x)/D-A._x,(I*N._y+Y*A._y-P*O._y)/D-A._y):new E)}}else if(y==="geometric"){if(T&&k){var U=O.subtract(N),K=S===e?.4:S,Q=K*B/(B+R);c||this.setHandleIn(U.multiply(Q)),f||this.setHandleOut(U.multiply(Q-K))}}else throw new Error("Smoothing method '"+y+"' not supported.")},getPrevious:function(){var s=this._path&&this._path._segments;return s&&(s[this._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var s=this._path;return s&&this._index===s._segments.length-1||!1},reverse:function(){var s=this._handleIn,c=this._handleOut,f=s.clone();s.set(c),c.set(f)},reversed:function(){return new Xt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Xt(this._point,this._handleIn,this._handleOut)},equals:function(s){return s===this||s&&this._class===s._class&&this._point.equals(s._point)&&this._handleIn.equals(s._handleIn)&&this._handleOut.equals(s._handleOut)||!1},toString:function(){var s=["point: "+this._point];return this._handleIn.isZero()||s.push("handleIn: "+this._handleIn),this._handleOut.isZero()||s.push("handleOut: "+this._handleOut),"{ "+s.join(", ")+" }"},transform:function(s){this._transformCoordinates(s,new Array(6),!0),this._changed()},interpolate:function(s,c,f){var m=1-f,y=f,S=s._point,T=c._point,k=s._handleIn,O=c._handleIn,A=c._handleOut,N=s._handleOut;this._point._set(m*S._x+y*T._x,m*S._y+y*T._y,!0),this._handleIn._set(m*k._x+y*O._x,m*k._y+y*O._y,!0),this._handleOut._set(m*N._x+y*A._x,m*N._y+y*A._y,!0),this._changed()},_transformCoordinates:function(s,c,f){var m=this._point,y=!f||!this._handleIn.isZero()?this._handleIn:null,S=!f||!this._handleOut.isZero()?this._handleOut:null,T=m._x,k=m._y,O=2;return c[0]=T,c[1]=k,y&&(c[O++]=y._x+T,c[O++]=y._y+k),S&&(c[O++]=S._x+T,c[O++]=S._y+k),s&&(s._transformCoordinates(c,c,O/2),T=c[0],k=c[1],f?(m._x=T,m._y=k,O=2,y&&(y._x=c[O++]-T,y._y=c[O++]-k),S&&(S._x=c[O++]-T,S._y=c[O++]-k)):(y||(c[O++]=T,c[O++]=k),S||(c[O++]=T,c[O++]=k))),c}}),Re=E.extend({initialize:function(c,f,m){var y,S,T;if(!c)y=S=0;else if((y=c[0])!==e)S=c[1];else{var k=c;(y=k.x)===e&&(k=E.read(arguments),y=k.x),S=k.y,T=k.selected}this._x=y,this._y=S,this._owner=f,f[m]=this,T&&this.setSelected(!0)},_set:function(s,c){return this._x=s,this._y=c,this._owner._changed(this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner._changed(this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner._changed(this)},isZero:function(){var s=M.isZero;return s(this._x)&&s(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){var s=this._owner;return this===s._point?1:this===s._handleIn?2:this===s._handleOut?4:0}}),ut=o.extend({_class:"Curve",beans:!0,initialize:function(c,f,m,y,S,T,k,O){var A=arguments.length,N,B,R,j,Z,I;A===3?(this._path=c,N=f,B=m):A?A===1?"segment1"in c?(N=new Xt(c.segment1),B=new Xt(c.segment2)):"point1"in c?(R=c.point1,Z=c.handle1,I=c.handle2,j=c.point2):Array.isArray(c)&&(R=[c[0],c[1]],j=[c[6],c[7]],Z=[c[2]-c[0],c[3]-c[1]],I=[c[4]-c[6],c[5]-c[7]]):A===2?(N=new Xt(c),B=new Xt(f)):A===4?(R=c,Z=f,I=m,j=y):A===8&&(R=[c,f],j=[k,O],Z=[m-c,y-f],I=[S-k,T-O]):(N=new Xt,B=new Xt),this._segment1=N||new Xt(R,null,Z),this._segment2=B||new Xt(j,I,null)},_serialize:function(s,c){return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],s,!0,c)},_changed:function(){this._length=this._bounds=e},clone:function(){return new ut(this._segment1,this._segment2)},toString:function(){var s=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||s.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||s.push("handle2: "+this._segment2._handleIn),s.push("point2: "+this._segment2._point),"{ "+s.join(", ")+" }"},classify:function(){return ut.classify(this.getValues())},remove:function(){var s=!1;if(this._path){var c=this._segment2,f=c._handleOut;s=c.remove(),s&&this._segment1._handleOut.set(f)}return s},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(E.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(E.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(E.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(E.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index+1]||this._path._closed&&s[0])||null},getPrevious:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var s=this._path;return s&&this._segment1._index===s._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(s){this.getPoint1().setSelected(s),this.getHandle1().setSelected(s),this.getHandle2().setSelected(s),this.getPoint2().setSelected(s)},getValues:function(s){return ut.getValues(this._segment1,this._segment2,s)},getPoints:function(){for(var s=this.getValues(),c=[],f=0;f<8;f+=2)c.push(new E(s[f],s[f+1]));return c}},{getLength:function(){return this._length==null&&(this._length=ut.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ut.getArea(this.getValues())},getLine:function(){return new kt(this._segment1._point,this._segment2._point)},getPart:function(s,c){return new ut(ut.getPart(this.getValues(),s,c))},getPartLength:function(s,c){return ut.getLength(this.getValues(),s,c)},divideAt:function(s){return this.divideAtTime(s&&s.curve===this?s.time:this.getTimeAt(s))},divideAtTime:function(s,c){var f=1e-8,m=1-f,y=null;if(s>=f&&s<=m){var S=ut.subdivide(this.getValues(),s),T=S[0],k=S[1],O=c||this.hasHandles(),A=this._segment1,N=this._segment2,B=this._path;O&&(A._handleOut._set(T[2]-T[0],T[3]-T[1]),N._handleIn._set(k[4]-k[6],k[5]-k[7]));var R=T[6],j=T[7],Z=new Xt(new E(R,j),O&&new E(T[4]-R,T[5]-j),O&&new E(k[2]-R,k[3]-j));B?(B.insert(A._index+1,Z),y=this.getNext()):(this._segment2=Z,this._changed(),y=new ut(Z,N))}return y},splitAt:function(s){var c=this._path;return c?c.splitAt(s):null},splitAtTime:function(s){return this.splitAt(this.getLocationAtTime(s))},divide:function(s,c){return this.divideAtTime(s===e?.5:c?s:this.getTimeAt(s))},split:function(s,c){return this.splitAtTime(s===e?.5:c?s:this.getTimeAt(s))},reversed:function(){return new ut(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(s,c,f,m){var y=s._point,S=s._handleOut,T=c._handleIn,k=c._point,O=y.x,A=y.y,N=k.x,B=k.y,R=m?[O,A,O,A,N,B,N,B]:[O,A,O+S._x,A+S._y,N+T._x,B+T._y,N,B];return f&&f._transformCoordinates(R,R,4),R},subdivide:function(s,c){var f=s[0],m=s[1],y=s[2],S=s[3],T=s[4],k=s[5],O=s[6],A=s[7];c===e&&(c=.5);var N=1-c,B=N*f+c*y,R=N*m+c*S,j=N*y+c*T,Z=N*S+c*k,I=N*T+c*O,q=N*k+c*A,P=N*B+c*j,Y=N*R+c*Z,D=N*j+c*I,U=N*Z+c*q,K=N*P+c*D,Q=N*Y+c*U;return[[f,m,B,R,P,Y,K,Q],[K,Q,D,U,I,q,O,A]]},getMonoCurves:function(s,c){var f=[],m=c?0:1,y=s[m+0],S=s[m+2],T=s[m+4],k=s[m+6];if(y>=S==S>=T&&S>=T==T>=k||ut.isStraight(s))f.push(s);else{var O=3*(S-T)-y+k,A=2*(y+T)-4*S,N=S-y,B=1e-8,R=1-B,j=[],Z=M.solveQuadratic(O,A,N,j,B,R);if(!Z)f.push(s);else{j.sort();var I=j[0],q=ut.subdivide(s,I);f.push(q[0]),Z>1&&(I=(j[1]-I)/(1-I),q=ut.subdivide(q[1],I),f.push(q[0])),f.push(q[1])}}return f},solveCubic:function(s,c,f,m,y,S){var T=s[c],k=s[c+2],O=s[c+4],A=s[c+6],N=0;if(!(T<f&&A<f&&k<f&&O<f||T>f&&A>f&&k>f&&O>f)){var B=3*(k-T),R=3*(O-k)-B,j=A-T-B-R;N=M.solveCubic(j,R,B,T-f,m,y,S)}return N},getTimeOf:function(s,c){var f=new E(s[0],s[1]),m=new E(s[6],s[7]),y=1e-12,S=1e-7,T=c.isClose(f,y)?0:c.isClose(m,y)?1:null;if(T===null)for(var k=[c.x,c.y],O=[],A=0;A<2;A++)for(var N=ut.solveCubic(s,A,k[A],O,0,1),B=0;B<N;B++){var R=O[B];if(c.isClose(ut.getPoint(s,R),S))return R}return c.isClose(f,S)?0:c.isClose(m,S)?1:null},getNearestTime:function(s,c){if(ut.isStraight(s)){var f=s[0],m=s[1],y=s[6],S=s[7],T=y-f,k=S-m,O=T*T+k*k;if(O===0)return 0;var A=((c.x-f)*T+(c.y-m)*k)/O;return A<1e-12?0:A>.999999999999?1:ut.getTimeOf(s,new E(f+A*T,m+A*k))}var N=100,B=1/0,R=0;function j(q){if(q>=0&&q<=1){var P=c.getDistance(ut.getPoint(s,q),!0);if(P<B)return B=P,R=q,!0}}for(var Z=0;Z<=N;Z++)j(Z/N);for(var I=1/(N*2);I>1e-8;)!j(R-I)&&!j(R+I)&&(I/=2);return R},getPart:function(s,c,f){var m=c>f;if(m){var y=c;c=f,f=y}return c>0&&(s=ut.subdivide(s,c)[1]),f<1&&(s=ut.subdivide(s,(f-c)/(1-c))[0]),m?[s[6],s[7],s[4],s[5],s[2],s[3],s[0],s[1]]:s},isFlatEnough:function(s,c){var f=s[0],m=s[1],y=s[2],S=s[3],T=s[4],k=s[5],O=s[6],A=s[7],N=3*y-2*f-O,B=3*S-2*m-A,R=3*T-2*O-f,j=3*k-2*A-m;return Math.max(N*N,R*R)+Math.max(B*B,j*j)<=16*c*c},getArea:function(s){var c=s[0],f=s[1],m=s[2],y=s[3],S=s[4],T=s[5],k=s[6],O=s[7];return 3*((O-f)*(m+S)-(k-c)*(y+T)+y*(c-S)-m*(f-T)+O*(S+c/3)-k*(T+f/3))/20},getBounds:function(s){for(var c=s.slice(0,2),f=c.slice(),m=[0,0],y=0;y<2;y++)ut._addBounds(s[y],s[y+2],s[y+4],s[y+6],y,0,c,f,m);return new $(c[0],c[1],f[0]-c[0],f[1]-c[1])},_addBounds:function(s,c,f,m,y,S,T,k,O){function A(K,Q){var W=K-Q,et=K+Q;W<T[y]&&(T[y]=W),et>k[y]&&(k[y]=et)}S/=2;var N=T[y]+S,B=k[y]-S;if(s<N||c<N||f<N||m<N||s>B||c>B||f>B||m>B)if(c<s!=c<m&&f<s!=f<m)A(s,0),A(m,0);else{var R=3*(c-f)-s+m,j=2*(s+f)-4*c,Z=c-s,I=M.solveQuadratic(R,j,Z,O),q=1e-8,P=1-q;A(m,0);for(var Y=0;Y<I;Y++){var D=O[Y],U=1-D;q<=D&&D<=P&&A(U*U*U*s+3*U*U*D*c+3*U*D*D*f+D*D*D*m,S)}}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds"],function(s){this[s]=function(){this._bounds||(this._bounds={});var c=this._bounds[s];return c||(c=this._bounds[s]=le[s]([this._segment1,this._segment2],!1,this._path)),c.clone()}},{}),o.each({isStraight:function(s,c,f,m){if(c.isZero()&&f.isZero())return!0;var y=m.subtract(s);if(y.isZero())return!1;if(y.isCollinear(c)&&y.isCollinear(f)){var S=new kt(s,m),T=1e-7;if(S.getDistance(s.add(c))<T&&S.getDistance(m.add(f))<T){var k=y.dot(y),O=y.dot(c)/k,A=y.dot(f)/k;return O>=0&&O<=1&&A<=0&&A>=-1}}return!1},isLinear:function(s,c,f,m){var y=m.subtract(s).divide(3);return c.equals(y)&&f.negate().equals(y)}},function(s,c){this[c]=function(f){var m=this._segment1,y=this._segment2;return s(m._point,m._handleOut,y._handleIn,y._point,f)},this.statics[c]=function(f,m){var y=f[0],S=f[1],T=f[6],k=f[7];return s(new E(y,S),new E(f[2]-y,f[3]-S),new E(f[4]-T,f[5]-k),new E(T,k),m)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(s){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(s||0)},isCollinear:function(s){return s&&this.isStraight()&&s.isStraight()&&this.getLine().isCollinear(s.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(s,c){return this.getLocationAtTime(c?s:this.getTimeAt(s))},getLocationAtTime:function(s){return s!=null&&s>=0&&s<=1?new Gt(this,s):null},getTimeAt:function(s,c){return ut.getTimeAt(this.getValues(),s,c)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var s=E.read(arguments);return s.isZero()?[]:ut.getTimesWithTangent(this.getValues(),s)},getOffsetAtTime:function(s){return this.getPartLength(0,s)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(E.read(arguments)))},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getTimeOf:function(){return ut.getTimeOf(this.getValues(),E.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var s=E.read(arguments),c=this.getValues(),f=ut.getNearestTime(c,s),m=ut.getPoint(c,f);return new Gt(this,f,m,null,s.getDistance(m))},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()}},new function(){var s=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(s,function(c){this[c+"At"]=function(f,m){var y=this.getValues();return ut[c](y,m?f:ut.getTimeAt(y,f))},this[c+"AtTime"]=function(f){return ut[c](this.getValues(),f)}},{statics:{_evaluateMethods:s}})},new function(){function s(m){var y=m[0],S=m[1],T=m[2],k=m[3],O=m[4],A=m[5],N=m[6],B=m[7],R=9*(T-O)+3*(N-y),j=6*(y+O)-12*T,Z=3*(T-y),I=9*(k-A)+3*(B-S),q=6*(S+A)-12*k,P=3*(k-S);return function(Y){var D=(R*Y+j)*Y+Z,U=(I*Y+q)*Y+P;return Math.sqrt(D*D+U*U)}}function c(m,y){return Math.max(2,Math.min(16,Math.ceil(Math.abs(y-m)*32)))}function f(m,y,S,T){if(y==null||y<0||y>1)return null;var k=m[0],O=m[1],A=m[2],N=m[3],B=m[4],R=m[5],j=m[6],Z=m[7],I=M.isZero;I(A-k)&&I(N-O)&&(A=k,N=O),I(B-j)&&I(R-Z)&&(B=j,R=Z);var q=3*(A-k),P=3*(B-A)-q,Y=j-k-q-P,D=3*(N-O),U=3*(R-N)-D,K=Z-O-D-U,Q,W;if(S===0)Q=y===0?k:y===1?j:((Y*y+P)*y+q)*y+k,W=y===0?O:y===1?Z:((K*y+U)*y+D)*y+O;else{var et=1e-8,nt=1-et;if(y<et?(Q=q,W=D):y>nt?(Q=3*(j-B),W=3*(Z-R)):(Q=(3*Y*y+2*P)*y+q,W=(3*K*y+2*U)*y+D),T){Q===0&&W===0&&(y<et||y>nt)&&(Q=B-A,W=R-N);var at=Math.sqrt(Q*Q+W*W);at&&(Q/=at,W/=at)}if(S===3){var B=6*Y*y+2*P,R=6*K*y+2*U,dt=Math.pow(Q*Q+W*W,3/2);Q=dt!==0?(Q*R-W*B)/dt:0,W=0}}return S===2?new E(W,-Q):new E(Q,W)}return{statics:{classify:function(m){var y=m[0],S=m[1],T=m[2],k=m[3],O=m[4],A=m[5],N=m[6],B=m[7],R=y*(B-A)+S*(O-N)+N*A-B*O,j=T*(S-B)+k*(N-y)+y*B-S*N,Z=O*(k-S)+A*(y-T)+T*S-k*y,I=3*Z,q=I-j,P=q-j+R,Y=Math.sqrt(P*P+q*q+I*I),D=Y!==0?1/Y:0,U=M.isZero,K="serpentine";P*=D,q*=D,I*=D;function Q(at,dt,rt){var ct=dt!==e,pt=ct&&dt>0&&dt<1,bt=ct&&rt>0&&rt<1;return ct&&(!(pt||bt)||at==="loop"&&!(pt&&bt))&&(at="arch",pt=bt=!1),{type:at,roots:pt||bt?pt&&bt?dt<rt?[dt,rt]:[rt,dt]:[pt?dt:rt]:null}}if(U(P))return U(q)?Q(U(I)?"line":"quadratic"):Q(K,I/(3*q));var W=3*q*q-4*P*I;if(U(W))return Q("cusp",q/(2*P));var et=W>0?Math.sqrt(W/3):Math.sqrt(-W),nt=2*P;return Q(W>0?K:"loop",(q+et)/nt,(q-et)/nt)},getLength:function(m,y,S,T){if(y===e&&(y=0),S===e&&(S=1),ut.isStraight(m)){var k=m;S<1&&(k=ut.subdivide(k,S)[0],y/=S),y>0&&(k=ut.subdivide(k,y)[1]);var O=k[6]-k[0],A=k[7]-k[1];return Math.sqrt(O*O+A*A)}return M.integrate(T||s(m),y,S,c(y,S))},getTimeAt:function(m,y,S){if(S===e&&(S=y<0?1:0),y===0)return S;var T=Math.abs,k=1e-12,O=y>0,A=O?S:0,N=O?1:S,B=s(m),R=ut.getLength(m,A,N,B),j=T(y)-R;if(T(j)<k)return O?N:A;if(j>k)return null;var Z=y/R,I=0;function q(P){return I+=M.integrate(B,S,P,c(S,P)),S=P,I-y}return M.findRoot(q,B,S+Z,A,N,32,1e-12)},getPoint:function(m,y){return f(m,y,0,!1)},getTangent:function(m,y){return f(m,y,1,!0)},getWeightedTangent:function(m,y){return f(m,y,1,!1)},getNormal:function(m,y){return f(m,y,2,!0)},getWeightedNormal:function(m,y){return f(m,y,2,!1)},getCurvature:function(m,y){return f(m,y,3,!1).x},getPeaks:function(m){var y=m[0],S=m[1],T=m[2],k=m[3],O=m[4],A=m[5],N=m[6],B=m[7],R=-y+3*T-3*O+N,j=3*y-6*T+3*O,Z=-3*y+3*T,I=-S+3*k-3*A+B,q=3*S-6*k+3*A,P=-3*S+3*k,Y=1e-8,D=1-Y,U=[];return M.solveCubic(9*(R*R+I*I),9*(R*j+q*I),2*(j*j+q*q)+3*(Z*R+P*I),Z*j+q*P,U,Y,D),U.sort()}}}},new function(){function s(j,Z,I,q,P,Y,D){var U=!D&&I.getPrevious()===P,K=!D&&I!==P&&I.getNext()===P,Q=1e-8,W=1-Q;if(q!==null&&q>=(U?Q:0)&&q<=(K?W:1)&&Y!==null&&Y>=(K?Q:0)&&Y<=(U?W:1)){var et=new Gt(I,q,null,D),nt=new Gt(P,Y,null,D);et._intersection=nt,nt._intersection=et,(!Z||Z(et))&&Gt.insert(j,et,!0)}}function c(j,Z,I,q,P,Y,D,U,K,Q,W,et,nt){if(++K>=4096||++U>=40)return K;var at=1e-9,dt=Z[0],rt=Z[1],ct=Z[6],pt=Z[7],bt=kt.getSignedDistance,xt=bt(dt,rt,ct,pt,Z[2],Z[3]),Ot=bt(dt,rt,ct,pt,Z[4],Z[5]),It=xt*Ot>0?3/4:4/9,qt=It*Math.min(0,xt,Ot),$t=It*Math.max(0,xt,Ot),se=bt(dt,rt,ct,pt,j[0],j[1]),jt=bt(dt,rt,ct,pt,j[2],j[3]),Bt=bt(dt,rt,ct,pt,j[4],j[5]),ie=bt(dt,rt,ct,pt,j[6],j[7]),ae=f(se,jt,Bt,ie),oe=ae[0],be=ae[1],me,we;if(xt===0&&Ot===0&&se===0&&jt===0&&Bt===0&&ie===0||(me=m(oe,be,qt,$t))==null||(we=m(oe.reverse(),be.reverse(),qt,$t))==null)return K;var Me=Q+(W-Q)*me,xe=Q+(W-Q)*we;if(Math.max(nt-et,xe-Me)<at){var di=(Me+xe)/2,We=(et+nt)/2;s(P,Y,D?q:I,D?We:di,D?I:q,D?di:We)}else{j=ut.getPart(j,me,we);var yi=nt-et;if(we-me>.8)if(xe-Me>yi){var gi=ut.subdivide(j,.5),di=(Me+xe)/2;K=c(Z,gi[0],q,I,P,Y,!D,U,K,et,nt,Me,di),K=c(Z,gi[1],q,I,P,Y,!D,U,K,et,nt,di,xe)}else{var gi=ut.subdivide(Z,.5),We=(et+nt)/2;K=c(gi[0],j,q,I,P,Y,!D,U,K,et,We,Me,xe),K=c(gi[1],j,q,I,P,Y,!D,U,K,We,nt,Me,xe)}else yi===0||yi>=at?K=c(Z,j,q,I,P,Y,!D,U,K,et,nt,Me,xe):K=c(j,Z,I,q,P,Y,D,U,K,Me,xe,et,nt)}return K}function f(j,Z,I,q){var P=[0,j],Y=[1/3,Z],D=[2/3,I],U=[1,q],K=Z-(2*j+q)/3,Q=I-(j+2*q)/3,W;if(K*Q<0)W=[[P,Y,U],[P,D,U]];else{var et=K/Q;W=[et>=2?[P,Y,U]:et<=.5?[P,D,U]:[P,Y,D,U],[P,U]]}return(K||Q)<0?W.reverse():W}function m(j,Z,I,q){return j[0][1]<I?y(j,!0,I):Z[0][1]>q?y(Z,!1,q):j[0][0]}function y(j,Z,I){for(var q=j[0][0],P=j[0][1],Y=1,D=j.length;Y<D;Y++){var U=j[Y][0],K=j[Y][1];if(Z?K>=I:K<=I)return K===I?U:q+(I-P)*(U-q)/(K-P);q=U,P=K}return null}function S(j,Z,I,q,P){var Y=M.isZero;if(Y(q)&&Y(P)){var D=ut.getTimeOf(j,new E(Z,I));return D===null?[]:[D]}for(var U=Math.atan2(-P,q),K=Math.sin(U),Q=Math.cos(U),W=[],et=[],nt=0;nt<8;nt+=2){var at=j[nt]-Z,dt=j[nt+1]-I;W.push(at*Q-dt*K,at*K+dt*Q)}return ut.solveCubic(W,1,0,et,0,1),et}function T(j,Z,I,q,P,Y,D){for(var U=Z[0],K=Z[1],Q=Z[6],W=Z[7],et=S(j,U,K,Q-U,W-K),nt=0,at=et.length;nt<at;nt++){var dt=et[nt],rt=ut.getPoint(j,dt),ct=ut.getTimeOf(Z,rt);ct!==null&&s(P,Y,D?q:I,D?ct:dt,D?I:q,D?dt:ct)}}function k(j,Z,I,q,P,Y){var D=kt.intersect(j[0],j[1],j[6],j[7],Z[0],Z[1],Z[6],Z[7]);D&&s(P,Y,I,ut.getTimeOf(j,D),q,ut.getTimeOf(Z,D))}function O(j,Z,I,q,P,Y){var D=1e-12,U=Math.min,K=Math.max;if(K(j[0],j[2],j[4],j[6])+D>U(Z[0],Z[2],Z[4],Z[6])&&U(j[0],j[2],j[4],j[6])-D<K(Z[0],Z[2],Z[4],Z[6])&&K(j[1],j[3],j[5],j[7])+D>U(Z[1],Z[3],Z[5],Z[7])&&U(j[1],j[3],j[5],j[7])-D<K(Z[1],Z[3],Z[5],Z[7])){var Q=B(j,Z);if(Q)for(var W=0;W<2;W++){var et=Q[W];s(P,Y,I,et[0],q,et[1],!0)}else{var nt=ut.isStraight(j),at=ut.isStraight(Z),dt=nt&&at,rt=nt&&!at,ct=P.length;if((dt?k:nt||at?T:c)(rt?Z:j,rt?j:Z,rt?q:I,rt?I:q,P,Y,rt,0,0,0,1,0,1),!dt||P.length===ct)for(var W=0;W<4;W++){var pt=W>>1,bt=W&1,xt=pt*6,Ot=bt*6,It=new E(j[xt],j[xt+1]),qt=new E(Z[Ot],Z[Ot+1]);It.isClose(qt,D)&&s(P,Y,I,pt,q,bt)}}}return P}function A(j,Z,I,q){var P=ut.classify(j);if(P.type==="loop"){var Y=P.roots;s(I,q,Z,Y[0],Z,Y[1])}return I}function N(j,Z,I,q,P,Y){var D=1e-7,U=!Z;U&&(Z=j);for(var K=j.length,Q=Z.length,W=new Array(K),et=U?W:new Array(Q),nt=[],at=0;at<K;at++)W[at]=j[at].getValues(q);if(!U)for(var at=0;at<Q;at++)et[at]=Z[at].getValues(P);for(var dt=b.findCurveBoundsCollisions(W,et,D),rt=0;rt<K;rt++){var ct=j[rt],pt=W[rt];U&&A(pt,ct,nt,I);var bt=dt[rt];if(bt)for(var xt=0;xt<bt.length;xt++){if(Y&&nt.length)return nt;var Ot=bt[xt];if(!U||Ot>rt){var It=Z[Ot],qt=et[Ot];O(pt,qt,ct,It,nt,I)}}}return nt}function B(j,Z){function I(ie){var ae=ie[6]-ie[0],oe=ie[7]-ie[1];return ae*ae+oe*oe}var q=Math.abs,P=kt.getDistance,Y=1e-8,D=1e-7,U=ut.isStraight(j),K=ut.isStraight(Z),Q=U&&K,W=I(j)<I(Z),et=W?Z:j,nt=W?j:Z,at=et[0],dt=et[1],rt=et[6]-at,ct=et[7]-dt;if(P(at,dt,rt,ct,nt[0],nt[1],!0)<D&&P(at,dt,rt,ct,nt[6],nt[7],!0)<D)!Q&&P(at,dt,rt,ct,et[2],et[3],!0)<D&&P(at,dt,rt,ct,et[4],et[5],!0)<D&&P(at,dt,rt,ct,nt[2],nt[3],!0)<D&&P(at,dt,rt,ct,nt[4],nt[5],!0)<D&&(U=K=Q=!0);else if(Q)return null;if(U^K)return null;for(var pt=[j,Z],bt=[],xt=0;xt<4&&bt.length<2;xt++){var Ot=xt&1,It=Ot^1,qt=xt>>1,$t=ut.getTimeOf(pt[Ot],new E(pt[It][qt?6:0],pt[It][qt?7:1]));if($t!=null){var se=Ot?[qt,$t]:[$t,qt];(!bt.length||q(se[0]-bt[0][0])>Y&&q(se[1]-bt[0][1])>Y)&&bt.push(se)}if(xt>2&&!bt.length)break}if(bt.length!==2)bt=null;else if(!Q){var jt=ut.getPart(j,bt[0][0],bt[1][0]),Bt=ut.getPart(Z,bt[0][1],bt[1][1]);(q(Bt[2]-jt[2])>D||q(Bt[3]-jt[3])>D||q(Bt[4]-jt[4])>D||q(Bt[5]-jt[5])>D)&&(bt=null)}return bt}function R(j,Z){var I=j[0],q=j[1],P=j[2],Y=j[3],D=j[4],U=j[5],K=j[6],Q=j[7],W=Z.normalize(),et=W.x,nt=W.y,at=3*K-9*D+9*P-3*I,dt=3*Q-9*U+9*Y-3*q,rt=6*D-12*P+6*I,ct=6*U-12*Y+6*q,pt=3*P-3*I,bt=3*Y-3*q,xt=2*at*nt-2*dt*et,Ot=[];if(Math.abs(xt)<M.CURVETIME_EPSILON){var It=at*bt-dt*pt,xt=at*ct-dt*rt;if(xt!=0){var qt=-It/xt;qt>=0&&qt<=1&&Ot.push(qt)}}else{var $t=(rt*rt-4*at*pt)*nt*nt+(-2*rt*ct+4*dt*pt+4*at*bt)*et*nt+(ct*ct-4*dt*bt)*et*et,se=rt*nt-ct*et;if($t>=0&&xt!=0){var jt=Math.sqrt($t),Bt=-(se+jt)/xt,ie=(-se+jt)/xt;Bt>=0&&Bt<=1&&Ot.push(Bt),ie>=0&&ie<=1&&Ot.push(ie)}}return Ot}return{getIntersections:function(j){var Z=this.getValues(),I=j&&j!==this&&j.getValues();return I?O(Z,I,this,j,[]):A(Z,this,[])},statics:{getOverlaps:B,getIntersections:N,getCurveLineIntersections:S,getTimesWithTangent:R}}}),Gt=o.extend({_class:"CurveLocation",initialize:function(c,f,m,y,S){if(f>=.99999999){var T=c.getNext();T&&(f=0,c=T)}this._setCurve(c),this._time=f,this._point=m||c.getPointAtTime(f),this._overlap=y,this._distance=S,this._intersection=this._next=this._previous=null},_setPath:function(s){this._path=s,this._version=s?s._version:0},_setCurve:function(s){this._setPath(s._path),this._curve=s,this._segment=null,this._segment1=s._segment1,this._segment2=s._segment2},_setSegment:function(s){var c=s.getCurve();c?this._setCurve(c):(this._setPath(s._path),this._segment1=s,this._segment2=null),this._segment=s,this._time=s===this._segment1?0:1,this._point=s._point.clone()},getSegment:function(){var s=this._segment;if(!s){var c=this.getCurve(),f=this.getTime();f===0?s=c._segment1:f===1?s=c._segment2:f!=null&&(s=c.getPartLength(0,f)<c.getPartLength(f,1)?c._segment1:c._segment2),this._segment=s}return s},getCurve:function(){var s=this._path,c=this;s&&s._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function f(m){var y=m&&m.getCurve();if(y&&(c._time=y.getTimeOf(c._point))!=null)return c._setCurve(y),y}return this._curve||f(this._segment)||f(this._segment1)||f(this._segment2.getPrevious())},getPath:function(){var s=this.getCurve();return s&&s._path},getIndex:function(){var s=this.getCurve();return s&&s.getIndex()},getTime:function(){var s=this.getCurve(),c=this._time;return s&&c==null?this._time=s.getTimeOf(this._point):c},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var s=this._offset;if(s==null){s=0;var c=this.getPath(),f=this.getIndex();if(c&&f!=null)for(var m=c.getCurves(),y=0;y<f;y++)s+=m[y].getLength();this._offset=s+=this.getCurveOffset()}return s},getCurveOffset:function(){var s=this._curveOffset;if(s==null){var c=this.getCurve(),f=this.getTime();this._curveOffset=s=f!=null&&c&&c.getPartLength(0,f)}return s},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var s=this.getCurve(),c=s&&s.divideAtTime(this.getTime());return c&&this._setSegment(c._segment1),c},split:function(){var s=this.getCurve(),c=s._path,f=s&&s.splitAtTime(this.getTime());return f&&this._setSegment(c.getLastSegment()),f},equals:function(s,c){var f=this===s;if(!f&&s instanceof Gt){var m=this.getCurve(),y=s.getCurve(),S=m._path,T=y._path;if(S===T){var k=Math.abs,O=1e-7,A=k(this.getOffset()-s.getOffset()),N=!c&&this._intersection,B=!c&&s._intersection;f=(A<O||S&&k(S.getLength()-A)<O)&&(!N&&!B||N&&B&&N.equals(B,!0))}}return f},toString:function(){var s=[],c=this.getPoint(),f=C.instance;c&&s.push("point: "+c);var m=this.getIndex();m!=null&&s.push("index: "+m);var y=this.getTime();return y!=null&&s.push("time: "+f.number(y)),this._distance!=null&&s.push("distance: "+f.number(this._distance)),"{ "+s.join(", ")+" }"},isTouching:function(){var s=this._intersection;if(s&&this.getTangent().isCollinear(s.getTangent())){var c=this.getCurve(),f=s.getCurve();return!(c.isStraight()&&f.isStraight()&&c.getLine().intersect(f.getLine()))}return!1},isCrossing:function(){var s=this._intersection;if(!s)return!1;var c=this.getTime(),f=s.getTime(),m=1e-8,y=1-m,S=c>=m&&c<=y,T=f>=m&&f<=y;if(S&&T)return!this.isTouching();var k=this.getCurve(),O=k&&c<m?k.getPrevious():k,A=s.getCurve(),N=A&&f<m?A.getPrevious():A;if(c>y&&(k=k.getNext()),f>y&&(A=A.getNext()),!O||!k||!N||!A)return!1;var B=[];function R(et,nt){var at=et.getValues(),dt=ut.classify(at).roots||ut.getPeaks(at),rt=dt.length,ct=ut.getLength(at,nt&&rt?dt[rt-1]:0,!nt&&rt?dt[0]:1);B.push(rt?ct:ct/32)}function j(et,nt,at){return nt<at?et>nt&&et<at:et>nt||et<at}S||(R(O,!0),R(k,!1)),T||(R(N,!0),R(A,!1));var Z=this.getPoint(),I=Math.min.apply(Math,B),q=S?k.getTangentAtTime(c):k.getPointAt(I).subtract(Z),P=S?q.negate():O.getPointAt(-I).subtract(Z),Y=T?A.getTangentAtTime(f):A.getPointAt(I).subtract(Z),D=T?Y.negate():N.getPointAt(-I).subtract(Z),U=P.getAngle(),K=q.getAngle(),Q=D.getAngle(),W=Y.getAngle();return!!(S?j(U,Q,W)^j(K,Q,W)&&j(U,W,Q)^j(K,W,Q):j(Q,U,K)^j(W,U,K)&&j(Q,K,U)^j(W,K,U))},hasOverlap:function(){return!!this._overlap}},o.each(ut._evaluateMethods,function(s){var c=s+"At";this[s]=function(){var f=this.getCurve(),m=this.getTime();return m!=null&&f&&f[c](m,!0)}},{preserve:!0}),new function(){function s(c,f,m){var y=c.length,S=0,T=y-1;function k(Z,I){for(var q=Z+I;q>=-1&&q<=y;q+=I){var P=c[(q%y+y)%y];if(!f.getPoint().isClose(P.getPoint(),1e-7))break;if(f.equals(P))return P}return null}for(;S<=T;){var O=S+T>>>1,A=c[O],N;if(m&&(N=f.equals(A)?A:k(O,-1)||k(O,1)))return f._overlap&&(N._overlap=N._intersection._overlap=!0),N;var B=f.getPath(),R=A.getPath(),j=B!==R?B._id-R._id:f.getIndex()+f.getTime()-(A.getIndex()+A.getTime());j<0?T=O-1:S=O+1}return c.splice(S,0,f),f}return{statics:{insert:s,expand:function(c){for(var f=c.slice(),m=c.length-1;m>=0;m--)s(f,c[m]._intersection,!1);return f}}}}),re=V.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(s){var c,f,m;if(o.isPlainObject(s)?(f=s.segments,c=s.pathData):Array.isArray(s)?f=s:typeof s=="string"&&(c=s),f){var y=f[0];m=y&&Array.isArray(y[0])}else c&&(m=(c.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(c));var S=m?ft:le;return new S(s)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(s){this.isClockwise()!=(s=!!s)&&this.reverse()},setPathData:function(s){var c=s&&s.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),f,m=!1,y,S,T=new E,k=new E;function O(D,U){var K=+f[D];return m&&(K+=T[U]),K}function A(D){return new E(O(D,"x"),O(D+1,"y"))}this.clear();for(var N=0,B=c&&c.length;N<B;N++){var R=c[N],j=R[0],Z=j.toLowerCase();f=R.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var I=f&&f.length;switch(m=j===Z,y==="z"&&!/[mz]/.test(Z)&&this.moveTo(T),Z){case"m":case"l":for(var q=Z==="m",P=0;P<I;P+=2)this[q?"moveTo":"lineTo"](T=A(P)),q&&(k=T,q=!1);S=T;break;case"h":case"v":var Y=Z==="h"?"x":"y";T=T.clone();for(var P=0;P<I;P++)T[Y]=O(P,Y),this.lineTo(T);S=T;break;case"c":for(var P=0;P<I;P+=6)this.cubicCurveTo(A(P),S=A(P+2),T=A(P+4));break;case"s":for(var P=0;P<I;P+=4)this.cubicCurveTo(/[cs]/.test(y)?T.multiply(2).subtract(S):T,S=A(P),T=A(P+2)),y=Z;break;case"q":for(var P=0;P<I;P+=4)this.quadraticCurveTo(S=A(P),T=A(P+2));break;case"t":for(var P=0;P<I;P+=2)this.quadraticCurveTo(S=/[qt]/.test(y)?T.multiply(2).subtract(S):T,T=A(P)),y=Z;break;case"a":for(var P=0;P<I;P+=7)this.arcTo(T=A(P+5),new z(+f[P],+f[P+1]),+f[P+2],+f[P+4],+f[P+3]);break;case"z":this.closePath(1e-12),T=k;break}y=Z}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(s){var c=s.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(s):{};return c.onPath||!!(this.getFillRule()==="evenodd"?c.windingL&1||c.windingR&1:c.winding)},getIntersections:function(s,c,f,m){var y=this===s||!s,S=this._matrix._orNullIfIdentity(),T=y?S:(f||s._matrix)._orNullIfIdentity();return y||this.getBounds(S).intersects(s.getBounds(T),1e-12)?ut.getIntersections(this.getCurves(),!y&&s.getCurves(),c,S,T,m):[]},getCrossings:function(s){return this.getIntersections(s,function(c){return c.isCrossing()})},getNearestLocation:function(){for(var s=E.read(arguments),c=this.getCurves(),f=1/0,m=null,y=0,S=c.length;y<S;y++){var T=c[y].getNearestLocation(s);T._distance<f&&(f=T._distance,m=T)}return m},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()},interpolate:function(s,c,f){var m=!this._children,y=m?"_segments":"_children",S=s[y],T=c[y],k=this[y];if(!S||!T||S.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+s+", "+c);var O=k.length,A=T.length;if(O<A)for(var N=m?Xt:le,B=O;B<A;B++)this.add(new N);else O>A&&this[m?"removeSegments":"removeChildren"](A,O);for(var B=0;B<A;B++)k[B].interpolate(S[B],T[B],f);m&&(this.setClosed(s._closed),this._changed(9))},compare:function(s){var c=!1;if(s){var f=this._children||[this],m=s._children?s._children.slice():[s],y=f.length,S=m.length,T=[],k=0;c=!0;for(var O=b.findItemBoundsCollisions(f,m,M.GEOMETRIC_EPSILON),A=y-1;A>=0&&c;A--){var N=f[A];c=!1;var B=O[A];if(B)for(var R=B.length-1;R>=0&&!c;R--)N.compare(m[B[R]])&&(T[B[R]]||(T[B[R]]=!0,k++),c=!0)}c=c&&k===S}return c}}),le=re.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(c){this._closed=!1,this._segments=[],this._version=0;var f=arguments,m=Array.isArray(c)?typeof c[0]=="object"?c:f:c&&c.size===e&&(c.x!==e||c.point!==e)?f:null;m&&m.length>0?this.setSegments(m):(this._curves=e,this._segmentSelection=0,!m&&typeof c=="string"&&(this.setPathData(c),c=null)),this._initialize(!m&&c)},_equals:function(s){return this._closed===s._closed&&o.equals(this._segments,s._segments)},copyContent:function(s){this.setSegments(s._segments),this._closed=s._closed},_changed:function s(c){if(s.base.call(this,c),c&8){if(this._length=this._area=e,c&32)this._version++;else if(this._curves)for(var f=0,m=this._curves.length;f<m;f++)this._curves[f]._changed()}else c&64&&(this._bounds=e)},getStyle:function(){var s=this._parent;return(s instanceof ft?s:this)._style},getSegments:function(){return this._segments},setSegments:function(s){var c=this.isFullySelected(),f=s&&s.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,f){var m=s[f-1];typeof m=="boolean"&&(this.setClosed(m),f--),this._add(Xt.readList(s,0,{},f))}c&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var s=this._curves,c=this._segments;if(!s){var f=this._countCurves();s=this._curves=new Array(f);for(var m=0;m<f;m++)s[m]=new ut(this,c[m],c[m+1]||c[0])}return s},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var s=this.getCurves();return s[s.length-1]},isClosed:function(){return this._closed},setClosed:function(s){if(this._closed!=(s=!!s)){if(this._closed=s,this._curves){var c=this._curves.length=this._countCurves();s&&(this._curves[c-1]=new ut(this,this._segments[c-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(s,c){var f=this._segments,m=f.length,y=new C(c),S=new Array(6),T=!0,k,O,A,N,B,R,j,Z,I=[];function q(Y,D){if(Y._transformCoordinates(s,S),k=S[0],O=S[1],T)I.push("M"+y.pair(k,O)),T=!1;else if(B=S[2],R=S[3],B===k&&R===O&&j===A&&Z===N){if(!D){var U=k-A,K=O-N;I.push(U===0?"v"+y.number(K):K===0?"h"+y.number(U):"l"+y.pair(U,K))}}else I.push("c"+y.pair(j-A,Z-N)+" "+y.pair(B-A,R-N)+" "+y.pair(k-A,O-N));A=k,N=O,j=S[4],Z=S[5]}if(!m)return"";for(var P=0;P<m;P++)q(f[P]);return this._closed&&m>0&&(q(f[0],!0),I.push("z")),I.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(s){for(var c=this._segments,f=new Array(6),m=0,y=c.length;m<y;m++)c[m]._transformCoordinates(s,f,!0);return!0},_add:function(s,T){for(var f=this._segments,m=this._curves,y=s.length,S=T==null,T=S?f.length:T,k=0;k<y;k++){var O=s[k];O._path&&(O=s[k]=O.clone()),O._path=this,O._index=T+k,O._selection&&this._updateSelection(O,0,O._selection)}if(S)o.push(f,s);else{f.splice.apply(f,[T,0].concat(s));for(var k=T+y,A=f.length;k<A;k++)f[k]._index=k}if(m){var N=this._countCurves(),B=T>0&&T+y-1===N?T-1:T,R=B,j=Math.min(B+y,N);s._curves&&(m.splice.apply(m,[B,0].concat(s._curves)),R+=s._curves.length);for(var k=R;k<j;k++)m.splice(k,0,new ut(this,null,null));this._adjustCurves(B,j)}return this._changed(41),s},_adjustCurves:function(s,c){for(var f=this._segments,m=this._curves,y,S=s;S<c;S++)y=m[S],y._path=this,y._segment1=f[S],y._segment2=f[S+1]||f[0],y._changed();(y=m[this._closed&&!s?f.length-1:s-1])&&(y._segment2=f[s]||f[0],y._changed()),(y=m[c])&&(y._segment1=f[c],y._changed())},_countCurves:function(){var s=this._segments.length;return!this._closed&&s>0?s-1:s},add:function(s){var c=arguments;return c.length>1&&typeof s!="number"?this._add(Xt.readList(c)):this._add([Xt.read(c)])[0]},insert:function(s,c){var f=arguments;return f.length>2&&typeof c!="number"?this._add(Xt.readList(f,1),s):this._add([Xt.read(f,1)],s)[0]},addSegment:function(){return this._add([Xt.read(arguments)])[0]},insertSegment:function(s){return this._add([Xt.read(arguments,1)],s)[0]},addSegments:function(s){return this._add(Xt.readList(s))},insertSegments:function(s,c){return this._add(Xt.readList(c),s)},removeSegment:function(s){return this.removeSegments(s,s+1)[0]||null},removeSegments:function(s,c,f){s=s||0,c=o.pick(c,this._segments.length);var m=this._segments,y=this._curves,S=m.length,T=m.splice(s,c-s),k=T.length;if(!k)return T;for(var O=0;O<k;O++){var A=T[O];A._selection&&this._updateSelection(A,A._selection,0),A._index=A._path=null}for(var O=s,N=m.length;O<N;O++)m[O]._index=O;if(y){for(var B=s>0&&c===S+(this._closed?1:0)?s-1:s,y=y.splice(B,k),O=y.length-1;O>=0;O--)y[O]._path=null;f&&(T._curves=y.slice(1)),this._adjustCurves(B,B)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var s=this._segments,c=0,f=s.length;c<f;c++)if(s[c].hasHandles())return!0;return!1},clearHandles:function(){for(var s=this._segments,c=0,f=s.length;c<f;c++)s[c].clearHandles()},getLength:function(){if(this._length==null){for(var s=this.getCurves(),c=0,f=0,m=s.length;f<m;f++)c+=s[f].getLength();this._length=c}return this._length},getArea:function(){var s=this._area;if(s==null){var c=this._segments,f=this._closed;s=0;for(var m=0,y=c.length;m<y;m++){var S=m+1===y;s+=ut.getArea(ut.getValues(c[m],c[S?0:m+1],null,S&&!f))}this._area=s}return s},isFullySelected:function(){var s=this._segments.length;return this.isSelected()&&s>0&&this._segmentSelection===s*7},setFullySelected:function(s){s&&this._selectSegments(!0),this.setSelected(s)},setSelection:function s(c){c&1||this._selectSegments(!1),s.base.call(this,c)},_selectSegments:function(s){var c=this._segments,f=c.length,m=s?7:0;this._segmentSelection=m*f;for(var y=0;y<f;y++)c[y]._selection=m},_updateSelection:function(s,c,f){s._selection=f;var m=this._segmentSelection+=f-c;m>0&&this.setSelected(!0)},divideAt:function(s){var c=this.getLocationAt(s),f;return c&&(f=c.getCurve().divideAt(c.getCurveOffset()))?f._segment1:null},splitAt:function(s){var c=this.getLocationAt(s),f=c&&c.index,m=c&&c.time,y=1e-8,S=1-y;m>S&&(f++,m=0);var T=this.getCurves();if(f>=0&&f<T.length){m>=y&&T[f++].divideAtTime(m);var k=this.removeSegments(f,this._segments.length,!0),O;return this._closed?(this.setClosed(!1),O=this):(O=new le(V.NO_INSERT),O.insertAbove(this),O.copyAttributes(this)),O._add(k,0),this.addSegment(k[0]),O}return null},split:function(s,c){var f,m=c===e?s:(f=this.getCurves()[s])&&f.getLocationAtTime(c);return m!=null?this.splitAt(m):null},join:function(s,c){var f=c||0;if(s&&s!==this){var m=s._segments,y=this.getLastSegment(),S=s.getLastSegment();if(!S)return this;y&&y._point.isClose(S._point,f)&&s.reverse();var T=s.getFirstSegment();if(y&&y._point.isClose(T._point,f))y.setHandleOut(T._handleOut),this._add(m.slice(1));else{var k=this.getFirstSegment();k&&k._point.isClose(T._point,f)&&s.reverse(),S=s.getLastSegment(),k&&k._point.isClose(S._point,f)?(k.setHandleIn(S._handleIn),this._add(m.slice(0,m.length-1),0)):this._add(m.slice())}s._closed&&this._add([m[0]]),s.remove()}var O=this.getFirstSegment(),A=this.getLastSegment();return O!==A&&O._point.isClose(A._point,f)&&(O.setHandleIn(A._handleIn),A.remove(),this.setClosed(!0)),this},reduce:function(s){for(var c=this.getCurves(),f=s&&s.simplify,m=f?1e-7:0,y=c.length-1;y>=0;y--){var S=c[y];!S.hasHandles()&&(!S.hasLength(m)||f&&S.isCollinear(S.getNext()))&&S.remove()}return this},reverse:function(){this._segments.reverse();for(var s=0,c=this._segments.length;s<c;s++){var f=this._segments[s],m=f._handleIn;f._handleIn=f._handleOut,f._handleOut=m,f._index=s}this._curves=null,this._changed(9)},flatten:function(s){for(var c=new Ut(this,s||.25,256,!0),f=c.parts,m=f.length,y=[],S=0;S<m;S++)y.push(new Xt(f[S].curve.slice(0,2)));!this._closed&&m>0&&y.push(new Xt(f[m-1].curve.slice(6))),this.setSegments(y)},simplify:function(s){var c=new ue(this).fit(s||2.5);return c&&this.setSegments(c),!!c},smooth:function(s){var c=this,f=s||{},m=f.type||"asymmetric",y=this._segments,S=y.length,T=this._closed;function k(oe,be){var me=oe&&oe.index;if(me!=null){var we=oe.path;if(we&&we!==c)throw new Error(oe._class+" "+me+" of "+we+" is not part of "+c);be&&oe instanceof ut&&me++}else me=typeof oe=="number"?oe:be;return Math.min(me<0&&T?me%S:me<0?me+S:me,S-1)}var O=T&&f.from===e&&f.to===e,A=k(f.from,0),N=k(f.to,S-1);if(A>N)if(T)A-=S;else{var B=A;A=N,N=B}if(/^(?:asymmetric|continuous)$/.test(m)){var R=m==="asymmetric",j=Math.min,Z=N-A+1,I=Z-1,q=O?j(Z,4):1,P=q,Y=q,D=[];if(T||(P=j(1,A),Y=j(1,S-N-1)),I+=P+Y,I<=1)return;for(var U=0,K=A-P;U<=I;U++,K++)D[U]=y[(K<0?K+S:K)%S]._point;for(var Q=D[0]._x+2*D[1]._x,W=D[0]._y+2*D[1]._y,et=2,nt=I-1,at=[Q],dt=[W],rt=[et],ct=[],pt=[],U=1;U<I;U++){var bt=U<nt,xt=bt||R?1:2,Ot=bt?4:R?2:7,It=bt?4:R?3:8,qt=bt?2:R?0:1,$t=xt/et;et=rt[U]=Ot-$t,Q=at[U]=It*D[U]._x+qt*D[U+1]._x-$t*Q,W=dt[U]=It*D[U]._y+qt*D[U+1]._y-$t*W}ct[nt]=at[nt]/rt[nt],pt[nt]=dt[nt]/rt[nt];for(var U=I-2;U>=0;U--)ct[U]=(at[U]-ct[U+1])/rt[U],pt[U]=(dt[U]-pt[U+1])/rt[U];ct[I]=(3*D[I]._x-ct[nt])/2,pt[I]=(3*D[I]._y-pt[nt])/2;for(var U=P,se=I-Y,K=A;U<=se;U++,K++){var jt=y[K<0?K+S:K],Bt=jt._point,ie=ct[U]-Bt._x,ae=pt[U]-Bt._y;(O||U<se)&&jt.setHandleOut(ie,ae),(O||U>P)&&jt.setHandleIn(-ie,-ae)}}else for(var U=A;U<=N;U++)y[U<0?U+S:U].smooth(f,!O&&U===A,!O&&U===N)},toShape:function(s){if(!this._closed)return null;var c=this._segments,f,m,y,S;function T(R,j){var Z=c[R],I=Z.getNext(),q=c[j],P=q.getNext();return Z._handleOut.isZero()&&I._handleIn.isZero()&&q._handleOut.isZero()&&P._handleIn.isZero()&&I._point.subtract(Z._point).isCollinear(P._point.subtract(q._point))}function k(R){var j=c[R],Z=j.getPrevious(),I=j.getNext();return Z._handleOut.isZero()&&j._handleIn.isZero()&&j._handleOut.isZero()&&I._handleIn.isZero()&&j._point.subtract(Z._point).isOrthogonal(I._point.subtract(j._point))}function O(R){var j=c[R],Z=j.getNext(),I=j._handleOut,q=Z._handleIn,P=.5522847498307936;if(I.isOrthogonal(q)){var Y=j._point,D=Z._point,U=new kt(Y,I,!0).intersect(new kt(D,q,!0),!0);return U&&M.isZero(I.getLength()/U.subtract(Y).getLength()-P)&&M.isZero(q.getLength()/U.subtract(D).getLength()-P)}return!1}function A(R,j){return c[R]._point.getDistance(c[j]._point)}if(!this.hasHandles()&&c.length===4&&T(0,2)&&T(1,3)&&k(1)?(f=Zt.Rectangle,m=new z(A(0,3),A(0,1)),S=c[1]._point.add(c[2]._point).divide(2)):c.length===8&&O(0)&&O(2)&&O(4)&&O(6)&&T(1,5)&&T(3,7)?(f=Zt.Rectangle,m=new z(A(1,6),A(0,3)),y=m.subtract(new z(A(0,7),A(1,2))).divide(2),S=c[3]._point.add(c[4]._point).divide(2)):c.length===4&&O(0)&&O(1)&&O(2)&&O(3)&&(M.isZero(A(0,2)-A(1,3))?(f=Zt.Circle,y=A(0,2)/2):(f=Zt.Ellipse,y=new z(A(2,0)/2,A(3,1)/2)),S=c[1]._point),f){var N=this.getPosition(!0),B=new f({center:N,size:m,radius:y,insert:!1});return B.copyAttributes(this,!0),B._matrix.prepend(this._matrix),B.rotate(S.subtract(N).getAngle()+90),(s===e||s)&&B.insertAbove(this),B}return null},toPath:"#clone",compare:function s(c){if(!c||c instanceof ft)return s.base.call(this,c);var f=this.getCurves(),m=c.getCurves(),y=f.length,S=m.length;if(!y||!S)return y==S;for(var T=f[0].getValues(),k=[],O=0,A,N=0,B,R=0;R<S;R++){var q=m[R].getValues();k.push(q);var j=ut.getOverlaps(T,q);if(j){A=!R&&j[0][0]>0?S-1:R,B=j[0][1];break}}for(var Z=Math.abs,I=1e-8,q=k[A],P;T&&q;){var j=ut.getOverlaps(T,q);if(j){var Y=j[0][0];if(Z(Y-N)<I){N=j[1][0],N===1&&(T=++O<y?f[O].getValues():null,N=0);var D=j[0][1];if(Z(D-B)<I){if(P||(P=[A,D]),B=j[1][1],B===1&&(++A>=S&&(A=0),q=k[A]||m[A].getValues(),B=0),!T)return P[0]===A&&P[1]===B;continue}}}break}return!1},_hitTestSelf:function(s,c,f,m){var y=this,S=this.getStyle(),T=this._segments,k=T.length,O=this._closed,A=c._tolerancePadding,N=A,B,R,j,Z,I,q,P=c.stroke&&S.hasStroke(),Y=c.fill&&S.hasFill(),D=c.curves,U=P?S.getStrokeWidth()/2:Y&&c.tolerance>0||D?0:null;U!==null&&(U>0?(B=S.getStrokeJoin(),R=S.getStrokeCap(),j=S.getMiterLimit(),N=N.add(le._getStrokePadding(U,m))):B=R="round");function K(ct,pt){return s.subtract(ct).divide(pt).length<=1}function Q(ct,pt,bt){if(!c.selected||pt.isSelected()){var xt=ct._point;if(pt!==xt&&(pt=pt.add(xt)),K(pt,N))return new _e(bt,y,{segment:ct,point:pt})}}function W(ct,pt){return(pt||c.segments)&&Q(ct,ct._point,"segment")||!pt&&c.handles&&(Q(ct,ct._handleIn,"handle-in")||Q(ct,ct._handleOut,"handle-out"))}function et(ct){Z.add(ct)}function nt(ct){var pt=O||ct._index>0&&ct._index<k-1;if((pt?B:R)==="round")return K(ct._point,N);if(Z=new le({internal:!0,closed:!0}),pt?ct.isSmooth()||le._addBevelJoin(ct,B,U,j,null,m,et,!0):R==="square"&&le._addSquareCap(ct,R,U,null,m,et,!0),!Z.isEmpty()){var bt;return Z.contains(s)||(bt=Z.getNearestLocation(s))&&K(bt.getPoint(),A)}}if(c.ends&&!c.segments&&!O){if(q=W(T[0],!0)||W(T[k-1],!0))return q}else if(c.segments||c.handles){for(var at=0;at<k;at++)if(q=W(T[at]))return q}if(U!==null){if(I=this.getNearestLocation(s),I){var dt=I.getTime();dt===0||dt===1&&k>1?nt(I.getSegment())||(I=null):K(I.getPoint(),N)||(I=null)}if(!I&&B==="miter"&&k>1)for(var at=0;at<k;at++){var rt=T[at];if(s.getDistance(rt._point)<=j*U&&nt(rt)){I=rt.getLocation();break}}}return!I&&Y&&this._contains(s)||I&&!P&&!D?new _e("fill",this):I?new _e(P?"stroke":"curve",this,{location:I,point:I.getPoint()}):null}},o.each(ut._evaluateMethods,function(s){this[s+"At"]=function(c){var f=this.getLocationAt(c);return f&&f[s]()}},{beans:!1,getLocationOf:function(){for(var s=E.read(arguments),c=this.getCurves(),f=0,m=c.length;f<m;f++){var y=c[f].getLocationOf(s);if(y)return y}return null},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getLocationAt:function(s){if(typeof s=="number"){for(var c=this.getCurves(),f=0,m=0,y=c.length;m<y;m++){var S=f,T=c[m];if(f+=T.getLength(),f>s)return T.getLocationAt(s-S)}if(c.length>0&&s<=this.getLength())return new Gt(c[c.length-1],1)}else if(s&&s.getPath&&s.getPath()===this)return s;return null},getOffsetsWithTangent:function(){var s=E.read(arguments);if(s.isZero())return[];for(var c=[],f=0,m=this.getCurves(),y=0,S=m.length;y<S;y++){for(var T=m[y],k=T.getTimesWithTangent(s),O=0,A=k.length;O<A;O++){var N=f+T.getOffsetAtTime(k[O]);c.indexOf(N)<0&&c.push(N)}f+=T.length}return c}}),new function(){function s(f,m,y,S){if(S<=0)return;var T=S/2,k=S-2,O=T-1,A=new Array(6),N,B;function R(Y){var D=A[Y],U=A[Y+1];(N!=D||B!=U)&&(f.beginPath(),f.moveTo(N,B),f.lineTo(D,U),f.stroke(),f.beginPath(),f.arc(D,U,T,0,Math.PI*2,!0),f.fill())}for(var j=0,Z=m.length;j<Z;j++){var I=m[j],q=I._selection;if(I._transformCoordinates(y,A),N=A[0],B=A[1],q&2&&R(2),q&4&&R(4),f.fillRect(N-T,B-T,S,S),k>0&&!(q&1)){var P=f.fillStyle;f.fillStyle="#ffffff",f.fillRect(N-O,B-O,k,k),f.fillStyle=P}}}function c(f,m,y){var S=m._segments,T=S.length,k=new Array(6),O=!0,A,N,B,R,j,Z,I,q;function P(D){if(y)D._transformCoordinates(y,k),A=k[0],N=k[1];else{var U=D._point;A=U._x,N=U._y}if(O)f.moveTo(A,N),O=!1;else{if(y)j=k[2],Z=k[3];else{var K=D._handleIn;j=A+K._x,Z=N+K._y}j===A&&Z===N&&I===B&&q===R?f.lineTo(A,N):f.bezierCurveTo(I,q,j,Z,A,N)}if(B=A,R=N,y)I=k[4],q=k[5];else{var K=D._handleOut;I=B+K._x,q=R+K._y}}for(var Y=0;Y<T;Y++)P(S[Y]);m._closed&&T>0&&P(S[0])}return{_draw:function(f,m,y,S){var T=m.dontStart,k=m.dontFinish||m.clip,O=this.getStyle(),A=O.hasFill(),N=O.hasStroke(),B=O.getDashArray(),R=!Le.support.nativeDash&&N&&B&&B.length;T||f.beginPath(),(A||N&&!R||k)&&(c(f,this,S),this._closed&&f.closePath());function j(D){return B[(D%R+R)%R]}if(!k&&(A||N)&&(this._setStyles(f,m,y),A&&(f.fill(O.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),N)){if(R){T||f.beginPath();for(var Z=new Ut(this,.25,32,!1,S),I=Z.length,q=-O.getDashOffset(),P,Y=0;q>0;)q-=j(Y--)+j(Y--);for(;q<I;)P=q+j(Y++),(q>0||P>0)&&Z.drawPart(f,Math.max(q,0),Math.max(P,0)),q=P+j(Y++)}f.stroke()}},_drawSelected:function(f,m){f.beginPath(),c(f,this,m),f.stroke(),s(f,this._segments,m,Le.settings.handleSize)}}},new function(){function s(c){var f=c._segments;if(!f.length)throw new Error("Use a moveTo() command first");return f[f.length-1]}return{moveTo:function(){var c=this._segments;c.length===1&&this.removeSegment(0),c.length||this._add([new Xt(E.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Xt(E.read(arguments))])},cubicCurveTo:function(){var c=arguments,f=E.read(c),m=E.read(c),y=E.read(c),S=s(this);S.setHandleOut(f.subtract(S._point)),this._add([new Xt(y,m.subtract(y))])},quadraticCurveTo:function(){var c=arguments,f=E.read(c),m=E.read(c),y=s(this)._point;this.cubicCurveTo(f.add(y.subtract(f).multiply(1/3)),f.add(m.subtract(f).multiply(1/3)),m)},curveTo:function(){var c=arguments,f=E.read(c),m=E.read(c),y=o.pick(o.read(c),.5),S=1-y,T=s(this)._point,k=f.subtract(T.multiply(S*S)).subtract(m.multiply(y*y)).divide(2*y*S);if(k.isNaN())throw new Error("Cannot put a curve through points with parameter = "+y);this.quadraticCurveTo(k,m)},arcTo:function(){var c=arguments,f=Math.abs,m=Math.sqrt,y=s(this),S=y._point,T=E.read(c),k,O=o.peek(c),A=o.pick(O,!0),N,B,R,j;if(typeof A=="boolean")var Z=S.add(T).divide(2),k=Z.add(Z.subtract(S).rotate(A?-90:90));else if(o.remain(c)<=2)k=T,T=E.read(c);else if(!S.equals(T)){var I=z.read(c),q=M.isZero;if(q(I.width)||q(I.height))return this.lineTo(T);var P=o.read(c),A=!!o.read(c),Y=!!o.read(c),Z=S.add(T).divide(2),D=S.subtract(Z).rotate(-P),U=D.x,K=D.y,Q=f(I.width),W=f(I.height),et=Q*Q,nt=W*W,at=U*U,dt=K*K,rt=m(at/et+dt/nt);if(rt>1&&(Q*=rt,W*=rt,et=Q*Q,nt=W*W),rt=(et*nt-et*dt-nt*at)/(et*dt+nt*at),f(rt)<1e-12&&(rt=0),rt<0)throw new Error("Cannot create an arc with the given arguments");N=new E(Q*K/W,-W*U/Q).multiply((Y===A?-1:1)*m(rt)).rotate(P).add(Z),j=new gt().translate(N).rotate(P).scale(Q,W),R=j._inverseTransform(S),B=R.getDirectedAngle(j._inverseTransform(T)),!A&&B>0?B-=360:A&&B<0&&(B+=360)}if(k){var ct=new kt(S.add(k).divide(2),k.subtract(S).rotate(90),!0),pt=new kt(k.add(T).divide(2),T.subtract(k).rotate(90),!0),bt=new kt(S,T),xt=bt.getSide(k);if(N=ct.intersect(pt,!0),!N){if(!xt)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}R=S.subtract(N),B=R.getDirectedAngle(T.subtract(N));var Ot=bt.getSide(N,!0);Ot===0?B=xt*f(B):xt===Ot&&(B+=B<0?360:-360)}if(B){for(var It=1e-5,qt=f(B),$t=qt>=360?4:Math.ceil((qt-It)/90),se=B/$t,jt=se*Math.PI/360,Bt=4/3*Math.sin(jt)/(1+Math.cos(jt)),ie=[],ae=0;ae<=$t;ae++){var D=T,oe=null;if(ae<$t&&(oe=R.rotate(90).multiply(Bt),j?(D=j._transformPoint(R),oe=j._transformPoint(R.add(oe)).subtract(D)):D=N.add(R)),!ae)y.setHandleOut(oe);else{var be=R.rotate(-90).multiply(Bt);j&&(be=j._transformPoint(R.add(be)).subtract(D)),ie.push(new Xt(D,be,oe))}R=R.rotate(se)}this._add(ie)}},lineBy:function(){var c=E.read(arguments),f=s(this)._point;this.lineTo(f.add(c))},curveBy:function(){var c=arguments,f=E.read(c),m=E.read(c),y=o.read(c),S=s(this)._point;this.curveTo(S.add(f),S.add(m),y)},cubicCurveBy:function(){var c=arguments,f=E.read(c),m=E.read(c),y=E.read(c),S=s(this)._point;this.cubicCurveTo(S.add(f),S.add(m),S.add(y))},quadraticCurveBy:function(){var c=arguments,f=E.read(c),m=E.read(c),y=s(this)._point;this.quadraticCurveTo(y.add(f),y.add(m))},arcBy:function(){var c=arguments,f=s(this)._point,m=f.add(E.read(c)),y=o.pick(o.peek(c),!0);typeof y=="boolean"?this.arcTo(m,y):this.arcTo(m,f.add(E.read(c)))},closePath:function(c){this.setClosed(!0),this.join(this,c)}}},{_getBounds:function(s,c){var f=c.handle?"getHandleBounds":c.stroke?"getStrokeBounds":"getBounds";return le[f](this._segments,this._closed,this,s,c)},statics:{getBounds:function(s,c,f,m,y,S){var T=s[0];if(!T)return new $;var k=new Array(6),O=T._transformCoordinates(m,new Array(6)),A=O.slice(0,2),N=A.slice(),B=new Array(2);function R(I){I._transformCoordinates(m,k);for(var q=0;q<2;q++)ut._addBounds(O[q],O[q+4],k[q+2],k[q],q,S?S[q]:0,A,N,B);var P=O;O=k,k=P}for(var j=1,Z=s.length;j<Z;j++)R(s[j]);return c&&R(T),new $(A[0],A[1],N[0]-A[0],N[1]-A[1])},getStrokeBounds:function(s,c,f,m,y){var S=f.getStyle(),T=S.hasStroke(),k=S.getStrokeWidth(),O=T&&f._getStrokeMatrix(m,y),A=T&&le._getStrokePadding(k,O),N=le.getBounds(s,c,f,m,y,A);if(!T)return N;var B=k/2,R=S.getStrokeJoin(),j=S.getStrokeCap(),Z=S.getMiterLimit(),I=new $(new z(A));function q(Q){N=N.include(Q)}function P(Q){N=N.unite(I.setCenter(Q._point.transform(m)))}function Y(Q,W){W==="round"||Q.isSmooth()?P(Q):le._addBevelJoin(Q,W,B,Z,m,O,q)}function D(Q,W){W==="round"?P(Q):le._addSquareCap(Q,W,B,m,O,q)}var U=s.length-(c?0:1);if(U>0){for(var K=1;K<U;K++)Y(s[K],R);c?Y(s[0],R):(D(s[0],j),D(s[s.length-1],j))}return N},_getStrokePadding:function(s,c){if(!c)return[s,s];var f=new E(s,0).transform(c),m=new E(0,s).transform(c),y=f.getAngleInRadians(),S=f.getLength(),T=m.getLength(),k=Math.sin(y),O=Math.cos(y),A=Math.tan(y),N=Math.atan2(T*A,S),B=Math.atan2(T,A*S);return[Math.abs(S*Math.cos(N)*O+T*Math.sin(N)*k),Math.abs(T*Math.sin(B)*O+S*Math.cos(B)*k)]},_addBevelJoin:function(s,c,f,m,y,S,T,k){var O=s.getCurve(),A=O.getPrevious(),N=O.getPoint1().transform(y),B=A.getNormalAtTime(1).multiply(f).transform(S),R=O.getNormalAtTime(0).multiply(f).transform(S),j=B.getDirectedAngle(R);if((j<0||j>=180)&&(B=B.negate(),R=R.negate()),k&&T(N),T(N.add(B)),c==="miter"){var Z=new kt(N.add(B),new E(-B.y,B.x),!0).intersect(new kt(N.add(R),new E(-R.y,R.x),!0),!0);Z&&N.getDistance(Z)<=m*f&&T(Z)}T(N.add(R))},_addSquareCap:function(s,c,f,m,y,S,T){var k=s._point.transform(m),O=s.getLocation(),A=O.getNormal().multiply(O.getTime()===0?f:-f).transform(y);c==="square"&&(T&&(S(k.subtract(A)),S(k.add(A))),k=k.add(A.rotate(-90))),S(k.add(A)),S(k.subtract(A))},getHandleBounds:function(s,c,f,m,y){var S=f.getStyle(),T=y.stroke&&S.hasStroke(),k,O;if(T){var A=f._getStrokeMatrix(m,y),N=S.getStrokeWidth()/2,B=N;S.getStrokeJoin()==="miter"&&(B=N*S.getMiterLimit()),S.getStrokeCap()==="square"&&(B=Math.max(B,N*Math.SQRT2)),k=le._getStrokePadding(N,A),O=le._getStrokePadding(B,A)}for(var R=new Array(6),j=1/0,Z=-j,I=j,q=Z,P=0,Y=s.length;P<Y;P++){var D=s[P];D._transformCoordinates(m,R);for(var U=0;U<6;U+=2){var K=U?k:O,Q=K?K[0]:0,W=K?K[1]:0,et=R[U],nt=R[U+1],at=et-Q,dt=et+Q,rt=nt-W,ct=nt+W;at<j&&(j=at),dt>Z&&(Z=dt),rt<I&&(I=rt),ct>q&&(q=ct)}}return new $(j,I,Z-j,q-I)}}});le.inject({statics:new function(){var s=.5522847498307936,c=[new Xt([-1,0],[0,s],[0,-s]),new Xt([0,-1],[-s,0],[s,0]),new Xt([1,0],[0,-s],[0,s]),new Xt([0,1],[s,0],[-s,0])];function f(y,S,T){var k=o.getNamed(T),O=new le(k&&(k.insert==!0?V.INSERT:k.insert==!1?V.NO_INSERT:null));return O._add(y),O._closed=S,O.set(k,V.INSERT)}function m(y,S,T){for(var k=new Array(4),O=0;O<4;O++){var A=c[O];k[O]=new Xt(A._point.multiply(S).add(y),A._handleIn.multiply(S),A._handleOut.multiply(S))}return f(k,!0,T)}return{Line:function(){var y=arguments;return f([new Xt(E.readNamed(y,"from")),new Xt(E.readNamed(y,"to"))],!1,y)},Circle:function(){var y=arguments,S=E.readNamed(y,"center"),T=o.readNamed(y,"radius");return m(S,new z(T),y)},Rectangle:function(){var y=arguments,S=$.readNamed(y,"rectangle"),T=z.readNamed(y,"radius",0,{readNull:!0}),k=S.getBottomLeft(!0),O=S.getTopLeft(!0),A=S.getTopRight(!0),N=S.getBottomRight(!0),B;if(!T||T.isZero())B=[new Xt(k),new Xt(O),new Xt(A),new Xt(N)];else{T=z.min(T,S.getSize(!0).divide(2));var R=T.width,j=T.height,Z=R*s,I=j*s;B=[new Xt(k.add(R,0),null,[-Z,0]),new Xt(k.subtract(0,j),[0,I]),new Xt(O.add(0,j),null,[0,-I]),new Xt(O.add(R,0),[-Z,0],null),new Xt(A.subtract(R,0),null,[Z,0]),new Xt(A.add(0,j),[0,-I],null),new Xt(N.subtract(0,j),null,[0,I]),new Xt(N.subtract(R,0),[Z,0])]}return f(B,!0,y)},RoundRectangle:"#Rectangle",Ellipse:function(){var y=arguments,S=Zt._readEllipse(y);return m(S.center,S.radius,y)},Oval:"#Ellipse",Arc:function(){var y=arguments,S=E.readNamed(y,"from"),T=E.readNamed(y,"through"),k=E.readNamed(y,"to"),O=o.getNamed(y),A=new le(O&&O.insert==!1&&V.NO_INSERT);return A.moveTo(S),A.arcTo(T,k),A.set(O)},RegularPolygon:function(){for(var y=arguments,S=E.readNamed(y,"center"),T=o.readNamed(y,"sides"),k=o.readNamed(y,"radius"),O=360/T,A=T%3===0,N=new E(0,A?-k:k),B=A?-1:.5,R=new Array(T),j=0;j<T;j++)R[j]=new Xt(S.add(N.rotate((j+B)*O)));return f(R,!0,y)},Star:function(){for(var y=arguments,S=E.readNamed(y,"center"),T=o.readNamed(y,"points")*2,k=o.readNamed(y,"radius1"),O=o.readNamed(y,"radius2"),A=360/T,N=new E(0,-1),B=new Array(T),R=0;R<T;R++)B[R]=new Xt(S.add(N.rotate(A*R).multiply(R%2?O:k)));return f(B,!0,y)}}}});var ft=re.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||(typeof c=="string"?this.setPathData(c):this.addChildren(Array.isArray(c)?c:arguments))},insertChildren:function s(c,f){var m=f,y=m[0];y&&typeof y[0]=="number"&&(m=[m]);for(var S=f.length-1;S>=0;S--){var T=m[S];m===f&&!(T instanceof le)&&(m=o.slice(m)),Array.isArray(T)?m[S]=new le({segments:T,insert:!1}):T instanceof ft&&(m.splice.apply(m,[S,1].concat(T.removeChildren())),T.remove())}return s.base.call(this,c,m)},reduce:function s(c){for(var f=this._children,m=f.length-1;m>=0;m--){var y=f[m].reduce(c);y.isEmpty()&&y.remove()}if(!f.length){var y=new le(V.NO_INSERT);return y.copyAttributes(this),y.insertAbove(this),this.remove(),y}return s.base.call(this)},isClosed:function(){for(var s=this._children,c=0,f=s.length;c<f;c++)if(!s[c]._closed)return!1;return!0},setClosed:function(s){for(var c=this._children,f=0,m=c.length;f<m;f++)c[f].setClosed(s)},getFirstSegment:function(){var s=this.getFirstChild();return s&&s.getFirstSegment()},getLastSegment:function(){var s=this.getLastChild();return s&&s.getLastSegment()},getCurves:function(){for(var s=this._children,c=[],f=0,m=s.length;f<m;f++)o.push(c,s[f].getCurves());return c},getFirstCurve:function(){var s=this.getFirstChild();return s&&s.getFirstCurve()},getLastCurve:function(){var s=this.getLastChild();return s&&s.getLastCurve()},getArea:function(){for(var s=this._children,c=0,f=0,m=s.length;f<m;f++)c+=s[f].getArea();return c},getLength:function(){for(var s=this._children,c=0,f=0,m=s.length;f<m;f++)c+=s[f].getLength();return c},getPathData:function(s,c){for(var f=this._children,m=[],y=0,S=f.length;y<S;y++){var T=f[y],k=T._matrix;m.push(T.getPathData(s&&!k.isIdentity()?s.appended(k):s,c))}return m.join("")},_hitTestChildren:function s(c,f,m){return s.base.call(this,c,f.class===le||f.type==="path"?f:o.set({},f,{fill:!1}),m)},_draw:function(s,c,f,m){var y=this._children;if(y.length){c=c.extend({dontStart:!0,dontFinish:!0}),s.beginPath();for(var S=0,T=y.length;S<T;S++)y[S].draw(s,c,m);if(!c.clip){this._setStyles(s,c,f);var k=this._style;k.hasFill()&&(s.fill(k.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),k.hasStroke()&&s.stroke()}}},_drawSelected:function(s,c,f){for(var m=this._children,y=0,S=m.length;y<S;y++){var T=m[y],k=T._matrix;f[T._id]||T._drawSelected(s,k.isIdentity()?c:c.appended(k))}}},new function(){function s(c,f){var m=c._children;if(f&&!m.length)throw new Error("Use a moveTo() command first");return m[m.length-1]}return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(c){this[c]=function(){var f=s(this,!0);f[c].apply(f,arguments)}},{moveTo:function(){var c=s(this),f=c&&c.isEmpty()?c:new le(V.NO_INSERT);f!==c&&this.addChild(f),f.moveTo.apply(f,arguments)},moveBy:function(){var c=s(this,!0),f=c&&c.getLastSegment(),m=E.read(arguments);this.moveTo(f?m.add(f._point):m)},closePath:function(c){s(this,!0).closePath(c)}})},o.each(["reverse","flatten","simplify","smooth"],function(s){this[s]=function(c){for(var f=this._children,m,y=0,S=f.length;y<S;y++)m=f[y][s](c)||m;return m}},{}));re.inject(new function(){var s=Math.min,c=Math.max,f=Math.abs,m={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function y(P){return P._children||[P]}function S(P,Y){var D=P.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Y){for(var U=y(D),K=0,Q=U.length;K<Q;K++){var P=U[K];!P._closed&&!P.isEmpty()&&(P.closePath(1e-12),P.getFirstSegment().setHandleIn(0,0),P.getLastSegment().setHandleOut(0,0))}D=D.resolveCrossings().reorient(D.getFillRule()==="nonzero",!0)}return D}function T(P,Y,D,U,K){var Q=new ft(V.NO_INSERT);return Q.addChildren(P,!0),Q=Q.reduce({simplify:Y}),K&&K.insert==!1||Q.insertAbove(U&&D.isSibling(U)&&D.getIndex()<U.getIndex()?U:D),Q.copyAttributes(D,!0),Q}function k(P){return P.hasOverlap()||P.isCrossing()}function O(P,Y,D,U){if(U&&(U.trace==!1||U.stroke)&&/^(subtract|intersect)$/.test(D))return A(P,Y,D);var K=S(P,!0),Q=Y&&P!==Y&&S(Y,!0),W=m[D];W[D]=!0,Q&&(W.subtract||W.exclude)^(Q.isClockwise()^K.isClockwise())&&Q.reverse();var et=j(Gt.expand(K.getIntersections(Q,k))),nt=y(K),at=Q&&y(Q),dt=[],rt=[],ct;function pt(oe){for(var be=0,me=oe.length;be<me;be++){var we=oe[be];o.push(dt,we._segments),o.push(rt,we.getCurves()),we._overlapsOnly=!0}}function bt(oe){for(var be=[],me=0,we=oe&&oe.length;me<we;me++)be.push(rt[oe[me]]);return be}if(et.length){pt(nt),at&&pt(at);for(var xt=new Array(rt.length),Ot=0,It=rt.length;Ot<It;Ot++)xt[Ot]=rt[Ot].getValues();for(var qt=b.findCurveBoundsCollisions(xt,xt,0,!0),$t={},Ot=0;Ot<rt.length;Ot++){var se=rt[Ot],jt=se._path._id,Bt=$t[jt]=$t[jt]||{};Bt[se.getIndex()]={hor:bt(qt[Ot].hor),ver:bt(qt[Ot].ver)}}for(var Ot=0,It=et.length;Ot<It;Ot++)I(et[Ot]._segment,K,Q,$t,W);for(var Ot=0,It=dt.length;Ot<It;Ot++){var ie=dt[Ot],ae=ie._intersection;ie._winding||I(ie,K,Q,$t,W),ae&&ae._overlap||(ie._path._overlapsOnly=!1)}ct=q(dt,W)}else ct=R(at?nt.concat(at):nt.slice(),function(oe){return!!W[oe]});return T(ct,!0,P,Y,U)}function A(P,Y,D){var U=S(P),K=S(Y),Q=U.getIntersections(K,k),W=D==="subtract",et=D==="divide",nt={},at=[];function dt(pt){if(!nt[pt._id]&&(et||K.contains(pt.getPointAt(pt.getLength()/2))^W))return at.unshift(pt),nt[pt._id]=!0}for(var rt=Q.length-1;rt>=0;rt--){var ct=Q[rt].split();ct&&(dt(ct)&&ct.getFirstSegment().setHandleIn(0,0),U.getLastSegment().setHandleOut(0,0))}return dt(U),T(at,!1,P,Y)}function N(P,Y){for(var D=P;D;){if(D===Y)return;D=D._previous}for(;P._next&&P._next!==Y;)P=P._next;if(!P._next){for(;Y._previous;)Y=Y._previous;P._next=Y,Y._previous=P}}function B(P){for(var Y=P.length-1;Y>=0;Y--)P[Y].clearHandles()}function R(P,Y,D){var U=P&&P.length;if(U){var K=o.each(P,function(qt,$t){this[qt._id]={container:null,winding:qt.isClockwise()?1:-1,index:$t}},{}),Q=P.slice().sort(function(qt,$t){return f($t.getArea())-f(qt.getArea())}),W=Q[0],et=b.findItemBoundsCollisions(Q,null,M.GEOMETRIC_EPSILON);D==null&&(D=W.isClockwise());for(var nt=0;nt<U;nt++){var at=Q[nt],dt=K[at._id],rt=0,ct=et[nt];if(ct){for(var pt=null,bt=ct.length-1;bt>=0;bt--)if(ct[bt]<nt){pt=pt||at.getInteriorPoint();var xt=Q[ct[bt]];if(xt.contains(pt)){var Ot=K[xt._id];rt=Ot.winding,dt.winding+=rt,dt.container=Ot.exclude?Ot.container:xt;break}}}if(Y(dt.winding)===Y(rt))dt.exclude=!0,P[dt.index]=null;else{var It=dt.container;at.setClockwise(It?!It.isClockwise():D)}}}return P}function j(P,Y,D){var U=Y&&[],K=1e-8,Q=1-K,W=!1,et=D||[],nt=D&&{},at,dt,rt;function ct(be){return be._path._id+"."+be._segment1._index}for(var pt=(D&&D.length)-1;pt>=0;pt--){var bt=D[pt];bt._path&&(nt[ct(bt)]=!0)}for(var pt=P.length-1;pt>=0;pt--){var xt=P[pt],Ot=xt._time,It=Ot,qt=Y&&!Y(xt),bt=xt._curve,$t;if(bt&&(bt!==dt?(W=!bt.hasHandles()||nt&&nt[ct(bt)],at=[],rt=null,dt=bt):rt>=K&&(Ot/=rt)),qt){at&&at.push(xt);continue}else Y&&U.unshift(xt);if(rt=It,Ot<K)$t=bt._segment1;else if(Ot>Q)$t=bt._segment2;else{var se=bt.divideAtTime(Ot,!0);W&&et.push(bt,se),$t=se._segment1;for(var jt=at.length-1;jt>=0;jt--){var Bt=at[jt];Bt._time=(Bt._time-Ot)/(1-Ot)}}xt._setSegment($t);var ie=$t._intersection,ae=xt._intersection;if(ie){N(ie,ae);for(var oe=ie;oe;)N(oe._intersection,ie),oe=oe._next}else $t._intersection=ae}return D||B(et),U||P}function Z(P,Y,D,U,K){var Q=Array.isArray(Y)?Y:Y[D?"hor":"ver"],W=D?1:0,et=W^1,nt=[P.x,P.y],at=nt[W],dt=nt[et],rt=1e-9,ct=1e-6,pt=at-rt,bt=at+rt,xt=0,Ot=0,It=0,qt=0,$t=!1,se=!1,jt=1,Bt=[],ie,ae;function oe(Kt){var ei=Kt[et+0],si=Kt[et+6];if(!(dt<s(ei,si)||dt>c(ei,si))){var wi=Kt[W+0],en=Kt[W+2],bi=Kt[W+4],cn=Kt[W+6];if(ei===si){(wi<bt&&cn>pt||cn<bt&&wi>pt)&&($t=!0);return}var _n=dt===ei?0:dt===si||pt>c(wi,en,bi,cn)||bt<s(wi,en,bi,cn)?1:ut.solveCubic(Kt,et,dt,Bt,0,1)>0?Bt[0]:1,Ai=_n===0?wi:_n===1?cn:ut.getPoint(Kt,_n)[D?"y":"x"],Zi=ei>si?1:-1,hn=ie[et]>ie[et+6]?1:-1,Ci=ie[W+6];return dt!==ei?(Ai<pt?It+=Zi:Ai>bt?qt+=Zi:$t=!0,Ai>at-ct&&Ai<at+ct&&(jt/=2)):(Zi!==hn?wi<pt?It+=Zi:wi>bt&&(qt+=Zi):wi!=Ci&&(Ci<bt&&Ai>bt?(qt+=Zi,$t=!0):Ci>pt&&Ai<pt&&(It+=Zi,$t=!0)),jt/=4),ie=Kt,!K&&Ai>pt&&Ai<bt&&ut.getTangent(Kt,_n)[D?"x":"y"]===0&&Z(P,Y,!D,U,!0)}}function be(Kt){var ei=Kt[et+0],si=Kt[et+2],wi=Kt[et+4],en=Kt[et+6];if(dt<=c(ei,si,wi,en)&&dt>=s(ei,si,wi,en)){for(var bi=Kt[W+0],cn=Kt[W+2],_n=Kt[W+4],Ai=Kt[W+6],Zi=pt>c(bi,cn,_n,Ai)||bt<s(bi,cn,_n,Ai)?[Kt]:ut.getMonoCurves(Kt,D),hn,Ci=0,ii=Zi.length;Ci<ii;Ci++)if(hn=oe(Zi[Ci]))return hn}}for(var me=0,we=Q.length;me<we;me++){var Me=Q[me],xe=Me._path,di=Me.getValues(),We;if((!me||Q[me-1]._path!==xe)&&(ie=null,xe._closed||(ae=ut.getValues(xe.getLastCurve().getSegment2(),Me.getSegment1(),null,!U),ae[et]!==ae[et+6]&&(ie=ae)),!ie)){ie=di;for(var yi=xe.getLastCurve();yi&&yi!==Me;){var gi=yi.getValues();if(gi[et]!==gi[et+6]){ie=gi;break}yi=yi.getPrevious()}}if(We=be(di))return We;if(me+1===we||Q[me+1]._path!==xe){if(ae&&(We=be(ae)))return We;$t&&!It&&!qt&&(It=qt=xe.isClockwise(U)^D?1:-1),xt+=It,Ot+=qt,It=qt=0,$t&&(se=!0,$t=!1),ae=null}}return xt=f(xt),Ot=f(Ot),{winding:c(xt,Ot),windingL:xt,windingR:Ot,quality:jt,onPath:se}}function I(P,Y,D,U,K){var Q=[],W=P,et=0,rt;do{var nt=P.getCurve();if(nt){var at=nt.getLength();Q.push({segment:P,curve:nt,length:at}),et+=at}P=P.getNext()}while(P&&!P._intersection&&P!==W);for(var dt=[.5,.25,.75],rt={winding:0,quality:-1},ct=.001,pt=1-ct,bt=0;bt<dt.length&&rt.quality<.5;bt++)for(var at=et*dt[bt],xt=0,Ot=Q.length;xt<Ot;xt++){var It=Q[xt],qt=It.length;if(at<=qt){var nt=It.curve,$t=nt._path,se=$t._parent,jt=se instanceof ft?se:$t,Bt=M.clamp(nt.getTimeAt(at),ct,pt),ie=nt.getPointAtTime(Bt),ae=f(nt.getTangentAtTime(Bt).y)<Math.SQRT1_2,oe=null;if(K.subtract&&D){var be=jt===Y?D:Y,me=be._getWinding(ie,ae,!0);if(jt===Y&&me.winding||jt===D&&!me.winding){if(me.quality<1)continue;oe={winding:0,quality:1}}}oe=oe||Z(ie,U[$t._id][nt.getIndex()],ae,!0),oe.quality>rt.quality&&(rt=oe);break}at-=qt}for(var xt=Q.length-1;xt>=0;xt--)Q[xt].segment._winding=rt}function q(P,Y){var D=[],U;function K(we){var Me;return!!(we&&!we._visited&&(!Y||Y[(Me=we._winding||{}).winding]&&!(Y.unite&&Me.winding===2&&Me.windingL&&Me.windingR)))}function Q(we){if(we){for(var Me=0,xe=U.length;Me<xe;Me++)if(we===U[Me])return!0}return!1}function W(we){for(var Me=we._segments,xe=0,di=Me.length;xe<di;xe++)Me[xe]._visited=!0}function et(we,Me){var xe=we._intersection,di=xe,We=[];Me&&(U=[we]);function yi(gi,Kt){for(;gi&&gi!==Kt;){var ei=gi._segment,si=ei&&ei._path;if(si){var wi=ei.getNext()||si.getFirstSegment(),en=wi._intersection;ei!==we&&(Q(ei)||Q(wi)||wi&&K(ei)&&(K(wi)||en&&K(en._segment)))&&We.push(ei),Me&&U.push(ei)}gi=gi._next}}if(xe){for(yi(xe);xe&&xe._previous;)xe=xe._previous;yi(xe,di)}return We}P.sort(function(we,Me){var xe=we._intersection,di=Me._intersection,We=!!(xe&&xe._overlap),yi=!!(di&&di._overlap),gi=we._path,Kt=Me._path;return We^yi?We?1:-1:!xe^!di?xe?1:-1:gi!==Kt?gi._id-Kt._id:we._index-Me._index});for(var nt=0,at=P.length;nt<at;nt++){var dt=P[nt],rt=K(dt),ct=null,pt=!1,bt=!0,xt=[],Ot,It,qt;if(rt&&dt._path._overlapsOnly){var $t=dt._path,se=dt._intersection._segment._path;$t.compare(se)&&($t.getArea()&&D.push($t.clone(!1)),W($t),W(se),rt=!1)}for(;rt;){var jt=!ct,Bt=et(dt,jt),ie=Bt.shift(),pt=!jt&&(Q(dt)||Q(ie)),ae=!pt&&ie;if(jt&&(ct=new le(V.NO_INSERT),Ot=null),pt){(dt.isFirst()||dt.isLast())&&(bt=dt._path._closed),dt._visited=!0;break}if(ae&&Ot&&(xt.push(Ot),Ot=null),Ot||(ae&&Bt.push(dt),Ot={start:ct._segments.length,crossings:Bt,visited:It=[],handleIn:qt}),ae&&(dt=ie),!K(dt)){ct.removeSegments(Ot.start);for(var oe=0,be=It.length;oe<be;oe++)It[oe]._visited=!1;It.length=0;do dt=Ot&&Ot.crossings.shift(),(!dt||!dt._path)&&(dt=null,Ot=xt.pop(),Ot&&(It=Ot.visited,qt=Ot.handleIn));while(Ot&&!K(dt));if(!dt)break}var me=dt.getNext();ct.add(new Xt(dt._point,qt,me&&dt._handleOut)),dt._visited=!0,It.push(dt),dt=me||dt._path.getFirstSegment(),qt=me&&me._handleIn}pt&&(bt&&(ct.getFirstSegment().setHandleIn(qt),ct.setClosed(bt)),ct.getArea()!==0&&D.push(ct))}return D}return{_getWinding:function(P,Y,D){return Z(P,this.getCurves(),Y,D)},unite:function(P,Y){return O(this,P,"unite",Y)},intersect:function(P,Y){return O(this,P,"intersect",Y)},subtract:function(P,Y){return O(this,P,"subtract",Y)},exclude:function(P,Y){return O(this,P,"exclude",Y)},divide:function(P,Y){return Y&&(Y.trace==!1||Y.stroke)?A(this,P,"divide"):T([this.subtract(P,Y),this.intersect(P,Y)],!0,this,P,Y)},resolveCrossings:function(){var P=this._children,Y=P||[this];function D(Ot,It){var qt=Ot&&Ot._intersection;return qt&&qt._overlap&&qt._path===It}var U=!1,K=!1,Q=this.getIntersections(null,function(Ot){return Ot.hasOverlap()&&(U=!0)||Ot.isCrossing()&&(K=!0)}),W=U&&K&&[];if(Q=Gt.expand(Q),U)for(var et=j(Q,function(Ot){return Ot.hasOverlap()},W),nt=et.length-1;nt>=0;nt--){var at=et[nt],dt=at._path,rt=at._segment,ct=rt.getPrevious(),pt=rt.getNext();D(ct,dt)&&D(pt,dt)&&(rt.remove(),ct._handleOut._set(0,0),pt._handleIn._set(0,0),ct!==rt&&!ct.getCurve().hasLength()&&(pt._handleIn.set(ct._handleIn),ct.remove()))}K&&(j(Q,U&&function(Ot){var It=Ot.getCurve(),qt=Ot.getSegment(),$t=Ot._intersection,se=$t._curve,jt=$t._segment;if(It&&se&&It._path&&se._path)return!0;qt&&(qt._intersection=null),jt&&(jt._intersection=null)},W),W&&B(W),Y=q(o.each(Y,function(Ot){o.push(this,Ot._segments)},[])));var bt=Y.length,xt;return bt>1&&P?(Y!==P&&this.setChildren(Y),xt=this):bt===1&&!P&&(Y[0]!==this&&this.setSegments(Y[0].removeSegments()),xt=this),xt||(xt=new ft(V.NO_INSERT),xt.addChildren(Y),xt=xt.reduce(),xt.copyAttributes(this),this.replaceWith(xt)),xt},reorient:function(P,Y){var D=this._children;return D&&D.length?this.setChildren(R(this.removeChildren(),function(U){return!!(P?U:U&1)},Y)):Y!==e&&this.setClockwise(Y),this},getInteriorPoint:function(){var P=this.getBounds(),Y=P.getCenter(!0);if(!this.contains(Y)){for(var D=this.getCurves(),U=Y.y,K=[],Q=[],W=0,et=D.length;W<et;W++){var nt=D[W].getValues(),at=nt[1],dt=nt[3],rt=nt[5],ct=nt[7];if(U>=s(at,dt,rt,ct)&&U<=c(at,dt,rt,ct))for(var pt=ut.getMonoCurves(nt),bt=0,xt=pt.length;bt<xt;bt++){var Ot=pt[bt],It=Ot[1],qt=Ot[7];if(It!==qt&&(U>=It&&U<=qt||U>=qt&&U<=It)){var $t=U===It?Ot[0]:U===qt?Ot[6]:ut.solveCubic(Ot,1,U,Q,0,1)===1?ut.getPoint(Ot,Q[0]).x:(Ot[0]+Ot[6])/2;K.push($t)}}}K.length>1&&(K.sort(function(se,jt){return se-jt}),Y.x=(K[0]+K[1])/2)}return Y}}});var Ut=o.extend({_class:"PathFlattener",initialize:function(s,c,f,m,y){var S=[],T=[],k=0,O=1/(f||32),A=s._segments,N=A[0],B;function R(q,P){var Y=ut.getValues(q,P,y);S.push(Y),j(Y,q._index,0,1)}function j(q,P,Y,D){if(D-Y>O&&!(m&&ut.isStraight(q))&&!ut.isFlatEnough(q,c||.25)){var U=ut.subdivide(q,.5),K=(Y+D)/2;j(U[0],P,Y,K),j(U[1],P,K,D)}else{var Q=q[6]-q[0],W=q[7]-q[1],et=Math.sqrt(Q*Q+W*W);et>0&&(k+=et,T.push({offset:k,curve:q,index:P,time:D}))}}for(var Z=1,I=A.length;Z<I;Z++)B=A[Z],R(N,B),N=B;s._closed&&R(B||N,A[0]),this.curves=S,this.parts=T,this.length=k,this.index=0},_get:function(s){for(var c=this.parts,f=c.length,m,y=this.index;m=y,!(!y||c[--y].offset<s););for(;m<f;m++){var S=c[m];if(S.offset>=s){this.index=m;var T=c[m-1],k=T&&T.index===S.index?T.time:0,O=T?T.offset:0;return{index:S.index,time:k+(S.time-k)*(s-O)/(S.offset-O)}}}return{index:c[f-1].index,time:1}},drawPart:function(s,c,f){for(var m=this._get(c),y=this._get(f),S=m.index,T=y.index;S<=T;S++){var k=ut.getPart(this.curves[S],S===m.index?m.time:0,S===y.index?y.time:1);S===m.index&&s.moveTo(k[0],k[1]),s.bezierCurveTo.apply(s,k.slice(2))}}},o.each(ut._evaluateMethods,function(s){this[s+"At"]=function(c){var f=this._get(c);return ut[s](this.curves[f.index],f.time)}},{})),ue=o.extend({initialize:function(s){for(var c=this.points=[],f=s._segments,m=s._closed,y=0,S,T=f.length;y<T;y++){var k=f[y].point;(!S||!S.equals(k))&&c.push(S=k.clone())}m&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=m},fit:function(s){var c=this.points,f=c.length,m=null;return f>0&&(m=[new Xt(c[0])],f>1&&(this.fitCubic(m,s,0,f-1,c[1].subtract(c[0]),c[f-2].subtract(c[f-1])),this.closed&&(m.shift(),m.pop()))),m},fitCubic:function(s,c,f,m,y,S){var T=this.points;if(m-f===1){var k=T[f],O=T[m],A=k.getDistance(O)/3;this.addCurve(s,[k,k.add(y.normalize(A)),O.add(S.normalize(A)),O]);return}for(var N=this.chordLengthParameterize(f,m),B=Math.max(c,c*c),R,j=!0,Z=0;Z<=4;Z++){var I=this.generateBezier(f,m,N,y,S),q=this.findMaxError(f,m,I,N);if(q.error<c&&j){this.addCurve(s,I);return}if(R=q.index,q.error>=B)break;j=this.reparameterize(f,m,N,I),B=q.error}var P=T[R-1].subtract(T[R+1]);this.fitCubic(s,c,f,R,y,P),this.fitCubic(s,c,R,m,P.negate(),S)},addCurve:function(s,c){var f=s[s.length-1];f.setHandleOut(c[1].subtract(c[0])),s.push(new Xt(c[3],c[2].subtract(c[3])))},generateBezier:function(s,c,f,m,y){for(var S=1e-12,T=Math.abs,k=this.points,O=k[s],A=k[c],N=[[0,0],[0,0]],B=[0,0],R=0,j=c-s+1;R<j;R++){var Z=f[R],I=1-Z,q=3*Z*I,P=I*I*I,Y=q*I,D=q*Z,U=Z*Z*Z,K=m.normalize(Y),Q=y.normalize(D),W=k[s+R].subtract(O.multiply(P+Y)).subtract(A.multiply(D+U));N[0][0]+=K.dot(K),N[0][1]+=K.dot(Q),N[1][0]=N[0][1],N[1][1]+=Q.dot(Q),B[0]+=K.dot(W),B[1]+=Q.dot(W)}var et=N[0][0]*N[1][1]-N[1][0]*N[0][1],nt,at;if(T(et)>S){var dt=N[0][0]*B[1]-N[1][0]*B[0],rt=B[0]*N[1][1]-B[1]*N[0][1];nt=rt/et,at=dt/et}else{var ct=N[0][0]+N[0][1],pt=N[1][0]+N[1][1];nt=at=T(ct)>S?B[0]/ct:T(pt)>S?B[1]/pt:0}var bt=A.getDistance(O),xt=S*bt,Ot,It;if(nt<xt||at<xt)nt=at=bt/3;else{var qt=A.subtract(O);Ot=m.normalize(nt),It=y.normalize(at),Ot.dot(qt)-It.dot(qt)>bt*bt&&(nt=at=bt/3,Ot=It=null)}return[O,O.add(Ot||m.normalize(nt)),A.add(It||y.normalize(at)),A]},reparameterize:function(s,c,f,m){for(var y=s;y<=c;y++)f[y-s]=this.findRoot(m,this.points[y],f[y-s]);for(var y=1,S=f.length;y<S;y++)if(f[y]<=f[y-1])return!1;return!0},findRoot:function(s,c,f){for(var m=[],y=[],S=0;S<=2;S++)m[S]=s[S+1].subtract(s[S]).multiply(3);for(var S=0;S<=1;S++)y[S]=m[S+1].subtract(m[S]).multiply(2);var T=this.evaluate(3,s,f),k=this.evaluate(2,m,f),O=this.evaluate(1,y,f),A=T.subtract(c),N=k.dot(k)+A.dot(O);return M.isMachineZero(N)?f:f-A.dot(k)/N},evaluate:function(s,c,f){for(var m=c.slice(),y=1;y<=s;y++)for(var S=0;S<=s-y;S++)m[S]=m[S].multiply(1-f).add(m[S+1].multiply(f));return m[0]},chordLengthParameterize:function(s,c){for(var f=[0],m=s+1;m<=c;m++)f[m-s]=f[m-s-1]+this.points[m].getDistance(this.points[m-1]);for(var m=1,y=c-s;m<=y;m++)f[m]/=f[y];return f},findMaxError:function(s,c,f,m){for(var y=Math.floor((c-s+1)/2),S=0,T=s+1;T<c;T++){var k=this.evaluate(3,f,m[T-s]),O=k.subtract(this.points[T]),A=O.x*O.x+O.y*O.y;A>=S&&(S=A,y=T)}return{error:S,index:y}}}),ee=V.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(c){this._content="",this._lines=[];var f=c&&o.isPlainObject(c)&&c.x===e&&c.y===e;this._initialize(f&&c,!f&&E.read(arguments))},_equals:function(s){return this._content===s._content},copyContent:function(s){this.setContent(s._content)},getContent:function(){return this._content},setContent:function(s){this._content=""+s,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),fe=ee.extend({_class:"PointText",initialize:function(){ee.apply(this,arguments)},getPoint:function(){var s=this._matrix.getTranslation();return new X(s.x,s.y,this,"setPoint")},setPoint:function(){var s=E.read(arguments);this.translate(s.subtract(this._matrix.getTranslation()))},_draw:function(s,c,f){if(this._content){this._setStyles(s,c,f);var m=this._lines,y=this._style,S=y.hasFill(),T=y.hasStroke(),k=y.getLeading(),O=s.shadowColor;s.font=y.getFontStyle(),s.textAlign=y.getJustification();for(var A=0,N=m.length;A<N;A++){s.shadowColor=O;var B=m[A];S&&(s.fillText(B,0,0),s.shadowColor="rgba(0,0,0,0)"),T&&s.strokeText(B,0,0),s.translate(0,k)}}},_getBounds:function(s,c){var f=this._style,m=this._lines,y=m.length,S=f.getJustification(),T=f.getLeading(),k=this.getView().getTextWidth(f.getFontStyle(),m),O=0;S!=="left"&&(O-=k/(S==="center"?2:1));var A=new $(O,y?-.75*T:0,k,y*T);return s?s._transformBounds(A,A):A}}),ge=o.extend(new function(){var s={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},c={},f={transparent:[0,0,0,0]},m;function y(k){var O=k.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||k.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),A="rgb",N;if(O){var B=O[4]?4:3;N=new Array(B);for(var R=0;R<B;R++){var j=O[R+1];N[R]=parseInt(j.length==1?j+j:j,16)/255}}else if(O=k.match(/^(rgb|hsl)a?\((.*)\)$/)){A=O[1],N=O[2].trim().split(/[,\s]+/g);for(var Z=A==="hsl",R=0,I=Math.min(N.length,4);R<I;R++){var q=N[R],j=parseFloat(q);if(Z)if(R===0){var P=q.match(/([a-z]*)$/)[1];j*={turn:360,rad:180/Math.PI,grad:.9}[P]||1}else R<3&&(j/=100);else R<3&&(j/=/%$/.test(q)?100:255);N[R]=j}}else{var Y=f[k];if(!Y)if(n){m||(m=ri.getContext(1,1,{willReadFrequently:!0}),m.globalCompositeOperation="copy"),m.fillStyle="rgba(0,0,0,0)",m.fillStyle=k,m.fillRect(0,0,1,1);var D=m.getImageData(0,0,1,1).data;Y=f[k]=[D[0]/255,D[1]/255,D[2]/255]}else Y=[0,0,0];N=Y.slice()}return[A,N]}var S=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(k,O,A){var N=Math.max(k,O,A),B=Math.min(k,O,A),R=N-B,j=R===0?0:(N==k?(O-A)/R+(O<A?6:0):N==O?(A-k)/R+2:(k-O)/R+4)*60;return[j,N===0?0:R/N,N]},"hsb-rgb":function(k,O,A){k=(k/60%6+6)%6;var B=Math.floor(k),N=k-B,B=S[B],R=[A,A*(1-O),A*(1-O*N),A*(1-O*(1-N))];return[R[B[0]],R[B[1]],R[B[2]]]},"rgb-hsl":function(k,O,A){var N=Math.max(k,O,A),B=Math.min(k,O,A),R=N-B,j=R===0,Z=j?0:(N==k?(O-A)/R+(O<A?6:0):N==O?(A-k)/R+2:(k-O)/R+4)*60,I=(N+B)/2,q=j?0:I<.5?R/(N+B):R/(2-N-B);return[Z,q,I]},"hsl-rgb":function(k,O,A){if(k=(k/360%1+1)%1,O===0)return[A,A,A];for(var N=[k+1/3,k,k-1/3],B=A<.5?A*(1+O):A+O-A*O,R=2*A-B,j=[],Z=0;Z<3;Z++){var I=N[Z];I<0&&(I+=1),I>1&&(I-=1),j[Z]=6*I<1?R+(B-R)*6*I:2*I<1?B:3*I<2?R+(B-R)*(2/3-I)*6:R}return j},"rgb-gray":function(k,O,A){return[k*.2989+O*.587+A*.114]},"gray-rgb":function(k){return[k,k,k]},"gray-hsb":function(k){return[0,0,k]},"gray-hsl":function(k){return[0,0,k]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(s,function(k,O){c[O]=[],o.each(k,function(A,N){var B=o.capitalize(A),R=/^(hue|saturation)$/.test(A),j=c[O][N]=O==="gradient"?A==="gradient"?function(Z){var I=this._components[0];return Z=pe.read(Array.isArray(Z)?Z:arguments,0,{readNull:!0}),I!==Z&&(I&&I._removeOwner(this),Z&&Z._addOwner(this)),Z}:function(){return E.read(arguments,0,{readNull:A==="highlight",clone:!0})}:function(Z){return Z==null||isNaN(Z)?0:+Z};this["get"+B]=function(){return this._type===O||R&&/^hs[bl]$/.test(this._type)?this._components[N]:this._convert(O)[N]},this["set"+B]=function(Z){this._type!==O&&!(R&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(O),this._properties=s[O],this._type=O),this._components[N]=j.call(this,Z),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function k(O){var A=arguments,N=this.__read,B=0,R,j,Z,I;Array.isArray(O)&&(A=O,O=A[0]);var q=O!=null&&typeof O;if(q==="string"&&O in s&&(R=O,O=A[1],Array.isArray(O)?(j=O,Z=A[2]):(N&&(B=1),A=o.slice(A,1),q=typeof O)),!j){if(I=q==="number"?A:q==="object"&&O.length!=null?O:null,I){R||(R=I.length>=3?"rgb":"gray");var P=s[R].length;Z=I[P],N&&(B+=I===arguments?P+(Z!=null?1:0):1),I.length>P&&(I=o.slice(I,0,P))}else if(q==="string"){var Y=y(O);R=Y[0],j=Y[1],j.length===4&&(Z=j[3],j.length--)}else if(q==="object")if(O.constructor===k){if(R=O._type,j=O._components.slice(),Z=O._alpha,R==="gradient")for(var D=1,U=j.length;D<U;D++){var K=j[D];K&&(j[D]=K.clone())}}else if(O.constructor===pe)R="gradient",I=A;else{R="hue"in O?"lightness"in O?"hsl":"hsb":"gradient"in O||"stops"in O||"radial"in O?"gradient":"gray"in O?"gray":"rgb";var Q=s[R],W=c[R];this._components=j=[];for(var D=0,U=Q.length;D<U;D++){var et=O[Q[D]];et==null&&!D&&R==="gradient"&&"stops"in O&&(et={stops:O.stops,radial:O.radial}),et=W[D].call(this,et),et!=null&&(j[D]=et)}Z=O.alpha}N&&R&&(B=1)}if(this._type=R||"rgb",!j){this._components=j=[];for(var W=c[this._type],D=0,U=W.length;D<U;D++){var et=W[D].call(this,I&&I[D]);et!=null&&(j[D]=et)}}return this._components=j,this._properties=s[this._type],this._alpha=Z,N&&(this.__read=B),this},set:"#initialize",_serialize:function(k,O){var A=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?A:[this._type].concat(A),k,!0,O)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(k){var O;return this._type===k?this._components.slice():(O=T[this._type+"-"+k])?O.apply(this,this._components):T["rgb-"+k].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(k){return new ge(k,this._convert(k),this._alpha)},getType:function(){return this._type},setType:function(k){this._components=this._convert(k),this._properties=s[k],this._type=k},getComponents:function(){var k=this._components.slice();return this._alpha!=null&&k.push(this._alpha),k},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(k){this._alpha=k==null?null:Math.min(Math.max(k,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(k){var O=o.isPlainValue(k,!0)?ge.read(arguments):k;return O===this||O&&this._class===O._class&&this._type===O._type&&this.getAlpha()===O.getAlpha()&&o.equals(this._components,O._components)||!1},toString:function(){for(var k=this._properties,O=[],A=this._type==="gradient",N=C.instance,B=0,R=k.length;B<R;B++){var j=this._components[B];j!=null&&O.push(k[B]+": "+(A?j:N.number(j)))}return this._alpha!=null&&O.push("alpha: "+N.number(this._alpha)),"{ "+O.join(", ")+" }"},toCSS:function(k){var O=this._convert("rgb"),A=k||this._alpha==null?1:this._alpha;function N(B){return Math.round((B<0?0:B>1?1:B)*255)}return O=[N(O[0]),N(O[1]),N(O[2])],A<1&&O.push(A<0?0:A),k?"#"+((1<<24)+(O[0]<<16)+(O[1]<<8)+O[2]).toString(16).slice(1):(O.length==4?"rgba(":"rgb(")+O.join(",")+")"},toCanvasStyle:function(k,O){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var A=this._components,N=A[0],B=N._stops,R=A[1],j=A[2],Z=A[3],I=O&&O.inverted(),q;if(I&&(R=I._transformPoint(R),j=I._transformPoint(j),Z&&(Z=I._transformPoint(Z))),N._radial){var P=j.getDistance(R);if(Z){var Y=Z.subtract(R);Y.getLength()>P&&(Z=R.add(Y.normalize(P-.1)))}var D=Z||R;q=k.createRadialGradient(D.x,D.y,0,R.x,R.y,P)}else q=k.createLinearGradient(R.x,R.y,j.x,j.y);for(var U=0,K=B.length;U<K;U++){var Q=B[U],W=Q._offset;q.addColorStop(W??U/(K-1),Q._color.toCanvasStyle())}return this._canvasStyle=q},transform:function(k){if(this._type==="gradient"){for(var O=this._components,A=1,N=O.length;A<N;A++){var B=O[A];k._transformPoint(B,B,!0)}this._changed()}},statics:{_types:s,random:function(){var k=Math.random;return new ge(k(),k(),k())},_setOwner:function(k,O,A){return k&&(k._owner&&O&&k._owner!==O&&(k=k.clone()),!k._owner^!O&&(k._owner=O||null,k._setter=A||null)),k}}})},new function(){var s={add:function(c,f){return c+f},subtract:function(c,f){return c-f},multiply:function(c,f){return c*f},divide:function(c,f){return c/f}};return o.each(s,function(c,f){this[f]=function(m){m=ge.read(arguments);for(var y=this._type,S=this._components,T=m._convert(y),k=0,O=S.length;k<O;k++)T[k]=c(S[k],T[k]);return new ge(y,T,this._alpha!=null?c(this._alpha,m.getAlpha()):null)}},{})}),pe=o.extend({_class:"Gradient",initialize:function(c,f){this._id=F.get(),c&&o.isPlainObject(c)&&(this.set(c),c=f=null),this._stops==null&&this.setStops(c||["white","black"]),this._radial==null&&this.setRadial(typeof f=="string"&&f==="radial"||f||!1)},_serialize:function(s,c){return c.add(this,function(){return o.serialize([this._stops,this._radial],s,!0,c)})},_changed:function(){for(var s=0,c=this._owners&&this._owners.length;s<c;s++)this._owners[s]._changed()},_addOwner:function(s){this._owners||(this._owners=[]),this._owners.push(s)},_removeOwner:function(s){var c=this._owners?this._owners.indexOf(s):-1;c!=-1&&(this._owners.splice(c,1),this._owners.length||(this._owners=e))},clone:function(){for(var s=[],c=0,f=this._stops.length;c<f;c++)s[c]=this._stops[c].clone();return new pe(s,this._radial)},getStops:function(){return this._stops},setStops:function(s){if(s.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var c=this._stops;if(c)for(var f=0,m=c.length;f<m;f++)c[f]._owner=e;c=this._stops=vi.readList(s,0,{clone:!0});for(var f=0,m=c.length;f<m;f++)c[f]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(s){this._radial=s,this._changed()},equals:function(s){if(s===this)return!0;if(s&&this._class===s._class){var c=this._stops,f=s._stops,m=c.length;if(m===f.length){for(var y=0;y<m;y++)if(!c[y].equals(f[y]))return!1;return!0}}return!1}}),vi=o.extend({_class:"GradientStop",initialize:function(c,f){var m=c,y=f;typeof c=="object"&&f===e&&(Array.isArray(c)&&typeof c[0]!="number"?(m=c[0],y=c[1]):("color"in c||"offset"in c||"rampPoint"in c)&&(m=c.color,y=c.offset||c.rampPoint||0)),this.setColor(m),this.setOffset(y)},clone:function(){return new vi(this._color.clone(),this._offset)},_serialize:function(s,c){var f=this._color,m=this._offset;return o.serialize(m==null?[f]:[f,m],s,!0,c)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(s){this._offset=s,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ge._setOwner(this._color,null),this._color=ge._setOwner(ge.read(arguments,0),this,"setColor"),this._changed()},equals:function(s){return s===this||s&&this._class===s._class&&this._color.equals(s._color)&&this._offset==s._offset||!1}}),Ze=o.extend(new function(){var s={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new E,selectedColor:null},c=o.set({},s,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),f=o.set({},c,{fillColor:new ge}),m={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},y={beans:!0},S={_class:"Style",beans:!0,initialize:function(k,O,A){this._values={},this._owner=O,this._project=O&&O._project||A||Le.project,this._defaults=!O||O instanceof Jt?c:O instanceof ee?f:s,k&&this.set(k)}};return o.each(c,function(T,k){var O=/Color$/.test(k),A=k==="shadowOffset",N=o.capitalize(k),B=m[k],R="set"+N,j="get"+N;S[R]=function(Z){var I=this._owner,q=I&&I._children,P=q&&q.length>0&&!(I instanceof ft);if(P)for(var Y=0,D=q.length;Y<D;Y++)q[Y]._style[R](Z);if((k==="selectedColor"||!P)&&k in this._defaults){var U=this._values[k];U!==Z&&(O&&(U&&(ge._setOwner(U,null),U._canvasStyle=null),Z&&Z.constructor===ge&&(Z=ge._setOwner(Z,I,P&&R))),this._values[k]=Z,I&&I._changed(B||129))}},S[j]=function(Z){var I=this._owner,q=I&&I._children,P=q&&q.length>0&&!(I instanceof ft),Y;if(P&&!Z)for(var D=0,U=q.length;D<U;D++){var K=q[D]._style[j]();if(!D)Y=K;else if(!o.equals(Y,K))return e}else if(k in this._defaults){var Y=this._values[k];if(Y===e)Y=this._defaults[k],Y&&Y.clone&&(Y=Y.clone());else{var Q=O?ge:A?E:null;Q&&!(Y&&Y.constructor===Q)&&(this._values[k]=Y=Q.read([Y],0,{readNull:!0,clone:!0}))}}return Y&&O&&(Y=ge._setOwner(Y,I,P&&R)),Y},y[j]=function(Z){return this._style[j](Z)},y[R]=function(Z){this._style[R](Z)}}),o.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,k){var O="get"+k,A="set"+k;S[O]=y[O]="#get"+T,S[A]=y[A]="#set"+T}),V.inject(y),S},{set:function(s){var c=s instanceof Ze,f=c?s._values:s;if(f){for(var m in f)if(m in this._defaults){var y=f[m];this[m]=y&&c&&y.clone?y.clone():y}}},equals:function(s){function c(f,m,y){var S=f._values,T=m._values,k=m._defaults;for(var O in S){var A=S[O],N=T[O];if(!(y&&O in T)&&!o.equals(A,N===e?k[O]:N))return!1}return!0}return s===this||s&&this._class===s._class&&c(this,s)&&c(s,this,!0)||!1},_dispose:function(){var s;s=this.getFillColor(),s&&(s._canvasStyle=null),s=this.getStrokeColor(),s&&(s._canvasStyle=null),s=this.getShadowColor(),s&&(s._canvasStyle=null)},hasFill:function(){var s=this.getFillColor();return!!s&&s.alpha>0},hasStroke:function(){var s=this.getStrokeColor();return!!s&&s.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var s=this.getShadowColor();return!!s&&s.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var s=this.getFontSize();return this.getFontWeight()+" "+s+(/[a-z]/i.test(s+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function s(){var c=s.base.call(this),f=this.getFontSize();return/pt|em|%|px/.test(f)&&(f=this.getView().getPixelSize(f)),c??f*1.2}}),Be=new function(){function s(c,f,m,y){for(var S=["","webkit","moz","Moz","ms","o"],T=f[0].toUpperCase()+f.substring(1),k=0;k<6;k++){var O=S[k],A=O?O+T:f;if(A in c){if(m)c[A]=y;else return c[A];break}}}return{getStyles:function(c){var f=c&&c.nodeType!==9?c.ownerDocument:c,m=f&&f.defaultView;return m&&m.getComputedStyle(c,"")},getBounds:function(c,f){var m=c.ownerDocument,y=m.body,S=m.documentElement,T;try{T=c.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var k=T.left-(S.clientLeft||y.clientLeft||0),O=T.top-(S.clientTop||y.clientTop||0);if(!f){var A=m.defaultView;k+=A.pageXOffset||S.scrollLeft||y.scrollLeft,O+=A.pageYOffset||S.scrollTop||y.scrollTop}return new $(k,O,T.width,T.height)},getViewportBounds:function(c){var f=c.ownerDocument,m=f.defaultView,y=f.documentElement;return new $(0,0,m.innerWidth||y.clientWidth,m.innerHeight||y.clientHeight)},getOffset:function(c,f){return Be.getBounds(c,f).getPoint()},getSize:function(c){return Be.getBounds(c,!0).getSize()},isInvisible:function(c){return Be.getSize(c).equals(new z(0,0))},isInView:function(c){return!Be.isInvisible(c)&&Be.getViewportBounds(c).intersects(Be.getBounds(c,!0))},isInserted:function(c){return a.body.contains(c)},getPrefixed:function(c,f){return c&&s(c,f)},setPrefixed:function(c,f,m){if(typeof f=="object")for(var y in f)s(c,y,!0,f[y]);else s(c,f,!0,m)}}},ze={add:function(s,c){if(s)for(var f in c)for(var m=c[f],y=f.split(/[\s,]+/g),S=0,T=y.length;S<T;S++){var k=y[S],O=s===a&&(k==="touchstart"||k==="touchmove")?{passive:!1}:!1;s.addEventListener(k,m,O)}},remove:function(s,c){if(s)for(var f in c)for(var m=c[f],y=f.split(/[\s,]+/g),S=0,T=y.length;S<T;S++)s.removeEventListener(y[S],m,!1)},getPoint:function(s){var c=s.targetTouches?s.targetTouches.length?s.targetTouches[0]:s.changedTouches[0]:s;return new E(c.pageX||c.clientX+a.documentElement.scrollLeft,c.pageY||c.clientY+a.documentElement.scrollTop)},getTarget:function(s){return s.target||s.srcElement},getRelatedTarget:function(s){return s.relatedTarget||s.toElement},getOffset:function(s,c){return ze.getPoint(s).subtract(Be.getOffset(c||ze.getTarget(s)))}};ze.requestAnimationFrame=new function(){var s=Be.getPrefixed(n,"requestAnimationFrame"),c=!1,f=[],m;function y(){var S=f;f=[];for(var T=0,k=S.length;T<k;T++)S[T]();c=s&&f.length,c&&s(y)}return function(S){f.push(S),s?c||(s(y),c=!0):m||(m=setInterval(y,1e3/60))}};var $e=o.extend(d,{_class:"View",initialize:function s(c,f){function m(B){return f[B]||parseInt(f.getAttribute(B),10)}function y(){var B=Be.getSize(f);return B.isNaN()||B.isZero()?new z(m("width"),m("height")):B}var S;if(n&&f){this._id=f.getAttribute("id"),this._id==null&&f.setAttribute("id",this._id="paper-view-"+s._id++),ze.add(f,this._viewEvents);var T="none";if(Be.setPrefixed(f.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),p.hasAttribute(f,"resize")){var k=this;ze.add(n,this._windowEvents={resize:function(){k.setViewSize(y())}})}if(S=y(),p.hasAttribute(f,"stats")&&typeof Stats<"u"){this._stats=new Stats;var O=this._stats.domElement,A=O.style,N=Be.getOffset(f);A.position="absolute",A.left=N.x+"px",A.top=N.y+"px",a.body.appendChild(O)}}else S=new z(f),f=null;this._project=c,this._scope=c._scope,this._element=f,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(S.width,S.height),this._viewSize=S,s._views.push(this),s._viewsById[this._id]=this,(this._matrix=new gt)._owner=this,s._focused||(s._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Le.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;$e._focused===this&&($e._focused=null),$e._views.splice($e._views.indexOf(this),1),delete $e._viewsById[this._id];var s=this._project;return s._view===this&&(s._view=null),ze.remove(this._element,this._viewEvents),ze.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:o.each(V._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(s){this[s]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(s){this._autoUpdate=s,s&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var s=this;ze.requestAnimationFrame(function(){if(s._requested=!1,s._animate){s.requestUpdate();var c=s._element;(!Be.getPrefixed(a,"hidden")||p.getAttribute(c,"keepalive")==="true")&&Be.isInView(c)&&s._handleFrame()}s._autoUpdate&&s.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Le=this._scope;var s=Date.now()/1e3,c=this._last?s-this._last:0;this._last=s,this.emit("frame",new o({delta:c,time:this._time+=c,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(s,c){var f=this._frameItems;c?(f[s._id]={item:s,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete f[s._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(s){for(var c in this._frameItems){var f=this._frameItems[c];f.item.emit("frame",new o(s,{time:f.time+=s.delta,count:f.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var s=this._viewSize;return new it(s.width,s.height,this,"setViewSize")},setViewSize:function(){var s=z.read(arguments),c=s.subtract(this._viewSize);c.isZero()||(this._setElementSize(s.width,s.height),this._viewSize.set(s),this._changed(),this.emit("resize",{size:s,delta:c}),this._autoUpdate&&this.update())},_setElementSize:function(s,c){var f=this._element;f&&(f.width!==s&&(f.width=s),f.height!==c&&(f.height=c))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new $(new E,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Be.isInView(this._element)},isInserted:function(){return Be.isInserted(this._element)},getPixelSize:function(s){var c=this._element,f;if(c){var m=c.parentNode,y=a.createElement("div");y.style.fontSize=s,m.appendChild(y),f=parseFloat(Be.getStyles(y).fontSize),m.removeChild(y)}else f=parseFloat(f);return f},getTextWidth:function(s,c){return 0}},o.each(["rotate","scale","shear","skew"],function(s){var c=s==="rotate";this[s]=function(){var f=arguments,m=(c?o:E).read(f),y=E.read(f,0,{readNull:!0});return this.transform(new gt()[s](m,y||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var s=new gt;return this.transform(s.translate.apply(s,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var s=E.read(arguments);this.translate(this.getCenter().subtract(s))},getZoom:function(){var s=this._decompose().scaling;return(s.x+s.y)/2},setZoom:function(s){this.transform(new gt().scale(s/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(s){var c=this.getRotation();c!=null&&s!=null&&this.rotate(s-c)},getScaling:function(){var s=this._decompose().scaling;return new X(s.x,s.y,this,"setScaling")},setScaling:function(){var s=this.getScaling(),c=E.read(arguments,0,{clone:!0,readNull:!0});s&&c&&this.scale(c.x/s.x,c.y/s.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},transform:function(s){this._matrix.append(s)},scrollBy:function(){this.translate(E.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(E.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(E.read(arguments))},getEventPoint:function(s){return this.viewToProject(ze.getOffset(s,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(s,c){a&&typeof c=="string"&&(c=a.getElementById(c));var f=n?Rs:$e;return new f(s,c)}}},new function(){if(!n)return;var s,c,f=!1,m=!1;function y(rt){var ct=ze.getTarget(rt);return ct.getAttribute&&$e._viewsById[ct.getAttribute("id")]}function S(){var rt=$e._focused;if(!rt||!rt.isVisible()){for(var ct=0,pt=$e._views.length;ct<pt;ct++)if((rt=$e._views[ct]).isVisible()){$e._focused=c=rt;break}}}function T(rt,ct,pt){rt._handleMouseEvent("mousemove",ct,pt)}var k=n.navigator,O,A,N;k.pointerEnabled||k.msPointerEnabled?(O="pointerdown MSPointerDown",A="pointermove MSPointerMove",N="pointerup pointercancel MSPointerUp MSPointerCancel"):(O="touchstart",A="touchmove",N="touchend touchcancel","ontouchstart"in n&&k.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(O+=" mousedown",A+=" mousemove",N+=" mouseup"));var B={},R={mouseout:function(rt){var ct=$e._focused,pt=ze.getRelatedTarget(rt);if(ct&&(!pt||pt.nodeName==="HTML")){var bt=ze.getOffset(rt,ct._element),xt=bt.x,Ot=Math.abs,It=Ot(xt),qt=1<<25,$t=It-qt;bt.x=Ot($t)<It?$t*(xt<0?-1:1):xt,T(ct,rt,ct.viewToProject(bt))}},scroll:S};B[O]=function(rt){var ct=$e._focused=y(rt);f||(f=!0,ct._handleMouseEvent("mousedown",rt))},R[A]=function(rt){var ct=$e._focused;if(!m){var pt=y(rt);pt?ct!==pt&&(ct&&T(ct,rt),s||(s=ct),ct=$e._focused=c=pt):c&&c===ct&&(s&&!s.isInserted()&&(s=null),ct=$e._focused=s,s=null,S())}ct&&T(ct,rt)},R[O]=function(){m=!0},R[N]=function(rt){var ct=$e._focused;ct&&f&&ct._handleMouseEvent("mouseup",rt),m=f=!1},ze.add(a,R),ze.add(n,{load:S});var j=!1,Z=!1,I={doubleclick:"click",mousedrag:"mousemove"},q=!1,P,Y,D,U,K,Q,W,et;function nt(rt,ct,pt,bt,xt,Ot,It){var qt=!1,$t;function se(jt,Bt){if(jt.responds(Bt)){if($t||($t=new ho(Bt,bt,xt,ct||jt,Ot?xt.subtract(Ot):null)),jt.emit(Bt,$t)&&(j=!0,$t.prevented&&(Z=!0),$t.stopped))return qt=!0}else{var ie=I[Bt];if(ie)return se(jt,ie)}}for(;rt&&rt!==It&&!se(rt,pt);)rt=rt._parent;return qt}function at(rt,ct,pt,bt,xt,Ot){return rt._project.removeOn(pt),Z=j=!1,K&&nt(K,null,pt,bt,xt,Ot)||ct&&ct!==K&&!ct.isDescendant(K)&&nt(ct,null,pt==="mousedrag"?"mousemove":pt,bt,xt,Ot,K)||nt(rt,K||ct||rt,pt,bt,xt,Ot)}var dt={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:B,_handleMouseEvent:function(rt,ct,pt){var bt=this._itemEvents,xt=bt.native[rt],Ot=rt==="mousemove",It=this._scope.tool,qt=this;function $t(be){return bt.virtual[be]||qt.responds(be)||It&&It.responds(be)}Ot&&f&&$t("mousedrag")&&(rt="mousedrag"),pt||(pt=this.getEventPoint(ct));var se=this.getBounds().contains(pt),jt=xt&&se&&qt._project.hitTest(pt,{tolerance:0,fill:!0,stroke:!0}),Bt=jt&&jt.item||null,ie=!1,ae={};if(ae[rt.substr(5)]=!0,xt&&Bt!==U&&(U&&nt(U,null,"mouseleave",ct,pt),Bt&&nt(Bt,null,"mouseenter",ct,pt),U=Bt),q^se&&(nt(this,null,se?"mouseenter":"mouseleave",ct,pt),ie=!0),(se||ae.drag)&&!pt.equals(Y)&&(at(this,Bt,Ot?rt:"mousemove",ct,pt,Y),ie=!0),q=se,ae.down&&se||ae.up&&P){if(at(this,Bt,rt,ct,pt,P),ae.down){if(et=Bt===Q&&Date.now()-W<300,D=Q=Bt,!Z&&Bt){for(var oe=Bt;oe&&!oe.responds("mousedrag");)oe=oe._parent;oe&&(K=Bt)}P=pt}else ae.up&&(!Z&&Bt===D&&(W=Date.now(),at(this,Bt,et?"doubleclick":"click",ct,pt,P),et=!1),D=K=null);q=!1,ie=!0}Y=pt,ie&&It&&(j=It._handleMouseEvent(rt,ct,pt,ae)||j),ct.cancelable!==!1&&(j&&!ae.move||ae.down&&$t("mouseup"))&&ct.preventDefault()},_handleKeyEvent:function(rt,ct,pt,bt){var xt=this._scope,Ot=xt.tool,It;function qt($t){$t.responds(rt)&&(Le=xt,$t.emit(rt,It=It||new Ls(rt,ct,pt,bt)))}this.isVisible()&&(qt(this),Ot&&Ot.responds(rt)&&qt(Ot))},_countItemEvent:function(rt,ct){var pt=this._itemEvents,bt=pt.native,xt=pt.virtual;for(var Ot in dt)bt[Ot]=(bt[Ot]||0)+(dt[Ot][rt]||0)*ct;xt[rt]=(xt[rt]||0)+ct},statics:{updateFocus:S,_resetState:function(){f=m=j=q=!1,s=c=P=Y=D=U=K=Q=W=et=null}}}}),Rs=$e.extend({_class:"CanvasView",initialize:function(c,f){if(!(f instanceof n.HTMLCanvasElement)){var m=z.read(arguments,1);if(m.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+o.slice(arguments,1));f=ri.getCanvas(m)}var y=this._context=f.getContext("2d");if(y.save(),this._pixelRatio=1,!/^off|false$/.test(p.getAttribute(f,"hidpi"))){var S=n.devicePixelRatio||1,T=Be.getPrefixed(y,"backingStorePixelRatio")||1;this._pixelRatio=S/T}$e.call(this,c,f),this._needsUpdate=!0},remove:function s(){return this._context.restore(),s.base.call(this)},_setElementSize:function s(c,f){var m=this._pixelRatio;if(s.base.call(this,c*m,f*m),m!==1){var y=this._element,S=this._context;if(!p.hasAttribute(y,"resize")){var T=y.style;T.width=c+"px",T.height=f+"px"}S.restore(),S.save(),S.scale(m,m)}},getContext:function(){return this._context},getPixelSize:function s(c){var f=Le.agent,m;if(f&&f.firefox)m=s.base.call(this,c);else{var y=this._context,S=y.font;y.font=c+" serif",m=parseFloat(y.font),y.font=S}return m},getTextWidth:function(s,c){var f=this._context,m=f.font,y=0;f.font=s;for(var S=0,T=c.length;S<T;S++)y=Math.max(y,f.measureText(c[S]).width);return f.font=m,y},update:function(){if(!this._needsUpdate)return!1;var s=this._project,c=this._context,f=this._viewSize;return c.clearRect(0,0,f.width+1,f.height+1),s&&s.draw(c,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tr=o.extend({_class:"Event",initialize:function(c){this.event=c,this.type=c&&c.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ts.modifiers}}),Ls=tr.extend({_class:"KeyEvent",initialize:function(c,f,m,y){this.type=c,this.event=f,this.key=m,this.character=y},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ts=new function(){var s={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},c={tab:"	",space:" ",enter:"\r"},f={},m={},y,S,T=new o({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var A=Le&&Le.agent;return A&&A.mac?this.meta:this.control}}});function k(A){var N=A.key||A.keyIdentifier;return N=/^U\+/.test(N)?String.fromCharCode(parseInt(N.substr(2),16)):/^Arrow[A-Z]/.test(N)?N.substr(5):N==="Unidentified"||N===e?String.fromCharCode(A.keyCode):N,s[N]||(N.length>1?o.hyphenate(N):N.toLowerCase())}function O(A,N,B,R){var j=$e._focused,Z;if(f[N]=A,A?m[N]=B:delete m[N],N.length>1&&(Z=o.camelize(N))in T){T[Z]=A;var I=Le&&Le.agent;if(Z==="meta"&&I&&I.mac)if(A)y={};else{for(var q in y)q in m&&O(!1,q,y[q],R);y=null}}else A&&y&&(y[N]=B);j&&j._handleKeyEvent(A?"keydown":"keyup",R,N,B)}return ze.add(a,{keydown:function(A){var N=k(A),B=Le&&Le.agent;N.length>1||B&&B.chrome&&(A.altKey||B.mac&&A.metaKey||!B.mac&&A.ctrlKey)?O(!0,N,c[N]||(N.length>1?"":N),A):S=N},keypress:function(A){if(S){var N=k(A),B=A.charCode,R=B>=32?String.fromCharCode(B):N.length>1?"":N;N!==S&&(N=R.toLowerCase()),O(!0,N,R,A),S=null}},keyup:function(A){var N=k(A);N in m&&O(!1,N,m[N],A)}}),ze.add(n,{blur:function(A){for(var N in m)O(!1,N,m[N],A)}}),{modifiers:T,isDown:function(A){return!!f[A]}}},ho=tr.extend({_class:"MouseEvent",initialize:function(c,f,m,y,S){this.type=c,this.event=f,this.point=m,this.target=y,this.delta=S},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Fi=tr.extend({_class:"ToolEvent",_item:null,initialize:function(c,f,m){this.tool=c,this.type=f,this.event=m},_choosePoint:function(s,c){return s||(c?c.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(s){this._point=s},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(s){this._lastPoint=s},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(s){this._downPoint=s},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(s){this._middlePoint=s},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(s){this._delta=s},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(s){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=s},getItem:function(){if(!this._item){var s=this.tool._scope.project.hitTest(this.getPoint());if(s){for(var c=s.item,f=c._parent;/^(Group|CompoundPath)$/.test(f._class);)c=f,f=f._parent;this._item=c}}return this._item},setItem:function(s){this._item=s},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),es=v.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(c){v.call(this),this._moveCount=-1,this._downCount=-1,this.set(c)},getMinDistance:function(){return this._minDistance},setMinDistance:function(s){this._minDistance=s,s!=null&&this._maxDistance!=null&&s>this._maxDistance&&(this._maxDistance=s)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(s){this._maxDistance=s,this._minDistance!=null&&s!=null&&s<this._minDistance&&(this._minDistance=s)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(s){this._minDistance=this._maxDistance=s},_handleMouseEvent:function(s,c,f,m){Le=this._scope,m.drag&&!this.responds(s)&&(s="mousemove");var y=m.move||m.drag,S=this.responds(s),T=!1,k=this;function O(N,B){var R=f,j=y?k._point:k._downPoint||R;if(y){if(k._moveCount>=0&&R.equals(j))return!1;if(j&&(N!=null||B!=null)){var Z=R.subtract(j),I=Z.getLength();if(I<(N||0))return!1;B&&(R=j.add(Z.normalize(Math.min(I,B))))}k._moveCount++}return k._point=R,k._lastPoint=j||R,m.down&&(k._moveCount=-1,k._downPoint=R,k._downCount++),!0}function A(){S&&(T=k.emit(s,new Fi(k,s,c))||T)}if(m.down)O(),A();else if(m.up)O(null,this._maxDistance),A();else if(S)for(;O(this._minDistance,this._maxDistance);)A();return T}}),is=o.extend(d,{_class:"Tween",statics:{easings:new o({linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return s*(2-s)},easeInOutQuad:function(s){return s<.5?2*s*s:-1+2*(2-s)*s},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return--s*s*s+1},easeInOutCubic:function(s){return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return 1- --s*s*s*s},easeInOutQuart:function(s){return s<.5?8*s*s*s*s:1-8*--s*s*s*s},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return 1+--s*s*s*s*s},easeInOutQuint:function(s){return s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s}})},initialize:function s(c,f,m,y,S,T){this.object=c;var k=typeof S,O=k==="function";this.type=O?k:k==="string"?S:"linear",this.easing=O?S:s.easings[this.type],this.duration=y,this.running=!1,this._then=null,this._startTime=null;var A=f||m;this._keys=A?Object.keys(A):[],this._parsedKeys=this._parseKeys(this._keys),this._from=A&&this._getState(f),this._to=A&&this._getState(m),T!==!1&&this.start()},then:function(s){return this._then=s,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(s){if(this.running){s>=1&&(s=1,this.running=!1);for(var c=this.easing(s),f=this._keys,m=function(N){return typeof N=="function"?N(c,s):N},y=0,S=f&&f.length;y<S;y++){var T=f[y],k=m(this._from[T]),O=m(this._to[T]),A=k&&O&&k.__add&&O.__add?O.__subtract(k).__multiply(c).__add(k):(O-k)*c+k;this._setProperty(this._parsedKeys[T],A)}this.responds("update")&&this.emit("update",new o({progress:s,factor:c})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(s){var c=this._startTime,f=c?(s-c)/this.duration:0;c||(this._startTime=s),this.update(f)},_getState:function(s){for(var c=this._keys,f={},m=0,y=c.length;m<y;m++){var S=c[m],T=this._parsedKeys[S],k=this._getProperty(T),O;if(s){var A=this._resolveValue(k,s[S]);this._setProperty(T,A),O=this._getProperty(T),O=O&&O.clone?O.clone():O,this._setProperty(T,k)}else O=k&&k.clone?k.clone():k;f[S]=O}return f},_resolveValue:function(s,c){if(c){if(Array.isArray(c)&&c.length===2){var f=c[0];return f&&f.match&&f.match(/^[+\-\*\/]=/)?this._calculate(s,f[0],c[1]):c}else if(typeof c=="string"){var m=c.match(/^[+\-*/]=(.*)/);if(m){var y=JSON.parse(m[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(s,c[0],y)}}}return c},_calculate:function(s,c,f){return Le.PaperScript.calculateBinary(s,c,f)},_parseKeys:function(s){for(var c={},f=0,m=s.length;f<m;f++){var y=s[f],S=y.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");c[y]=S.split("/")}return c},_getProperty:function(s,c){for(var f=this.object,m=0,y=s.length-(c||0);m<y&&f;m++)f=f[s[m]];return f},_setProperty:function(s,c){var f=this._getProperty(s,1);f&&(f[s[s.length-1]]=c)}}),ns={request:function(s){var c=new t.XMLHttpRequest;return c.open((s.method||"get").toUpperCase(),s.url,o.pick(s.async,!0)),s.mimeType&&c.overrideMimeType(s.mimeType),c.onload=function(){var f=c.status;f===0||f===200?s.onLoad&&s.onLoad.call(c,c.responseText):c.onerror()},c.onerror=function(){var f=c.status,m='Could not load "'+s.url+'" (Status: '+f+")";if(s.onError)s.onError(m,f);else throw new Error(m)},c.send(null)}},ri=o.exports.CanvasProvider={canvases:[],getCanvas:function(s,c,f){if(!n)return null;var m,y=!0;typeof s=="object"&&(c=s.height,s=s.width),this.canvases.length?m=this.canvases.pop():(m=a.createElement("canvas"),y=!1);var S=m.getContext("2d",f||{});if(!S)throw new Error("Canvas "+m+" is unable to provide a 2D context.");return m.width===s&&m.height===c?y&&S.clearRect(0,0,s+1,c+1):(m.width=s,m.height=c),S.save(),m},getContext:function(s,c,f){var m=this.getCanvas(s,c,f);return m?m.getContext("2d",f||{}):null},release:function(s){var c=s&&s.canvas?s.canvas:s;c&&c.getContext&&(c.getContext("2d").restore(),this.canvases.push(c))}},rs=new function(){var s=Math.min,c=Math.max,f=Math.abs,m,y,S,T,k,O,A,N,B,R,j;function Z(K,Q,W){return .2989*K+.587*Q+.114*W}function I(K,Q,W,at){var nt=at-Z(K,Q,W);B=K+nt,R=Q+nt,j=W+nt;var at=Z(B,R,j),dt=s(B,R,j),rt=c(B,R,j);if(dt<0){var ct=at-dt;B=at+(B-at)*at/ct,R=at+(R-at)*at/ct,j=at+(j-at)*at/ct}if(rt>255){var pt=255-at,bt=rt-at;B=at+(B-at)*pt/bt,R=at+(R-at)*pt/bt,j=at+(j-at)*pt/bt}}function q(K,Q,W){return c(K,Q,W)-s(K,Q,W)}function P(K,Q,W,et){var nt=[K,Q,W],at=c(K,Q,W),dt=s(K,Q,W),rt;dt=dt===K?0:dt===Q?1:2,at=at===K?0:at===Q?1:2,rt=s(dt,at)===0?c(dt,at)===1?2:1:0,nt[at]>nt[dt]?(nt[rt]=(nt[rt]-nt[dt])*et/(nt[at]-nt[dt]),nt[at]=et):nt[rt]=nt[at]=0,nt[dt]=0,B=nt[0],R=nt[1],j=nt[2]}var Y={multiply:function(){B=k*m/255,R=O*y/255,j=A*S/255},screen:function(){B=k+m-k*m/255,R=O+y-O*y/255,j=A+S-A*S/255},overlay:function(){B=k<128?2*k*m/255:255-2*(255-k)*(255-m)/255,R=O<128?2*O*y/255:255-2*(255-O)*(255-y)/255,j=A<128?2*A*S/255:255-2*(255-A)*(255-S)/255},"soft-light":function(){var K=m*k/255;B=K+k*(255-(255-k)*(255-m)/255-K)/255,K=y*O/255,R=K+O*(255-(255-O)*(255-y)/255-K)/255,K=S*A/255,j=K+A*(255-(255-A)*(255-S)/255-K)/255},"hard-light":function(){B=m<128?2*m*k/255:255-2*(255-m)*(255-k)/255,R=y<128?2*y*O/255:255-2*(255-y)*(255-O)/255,j=S<128?2*S*A/255:255-2*(255-S)*(255-A)/255},"color-dodge":function(){B=k===0?0:m===255?255:s(255,255*k/(255-m)),R=O===0?0:y===255?255:s(255,255*O/(255-y)),j=A===0?0:S===255?255:s(255,255*A/(255-S))},"color-burn":function(){B=k===255?255:m===0?0:c(0,255-(255-k)*255/m),R=O===255?255:y===0?0:c(0,255-(255-O)*255/y),j=A===255?255:S===0?0:c(0,255-(255-A)*255/S)},darken:function(){B=k<m?k:m,R=O<y?O:y,j=A<S?A:S},lighten:function(){B=k>m?k:m,R=O>y?O:y,j=A>S?A:S},difference:function(){B=k-m,B<0&&(B=-B),R=O-y,R<0&&(R=-R),j=A-S,j<0&&(j=-j)},exclusion:function(){B=k+m*(255-k-k)/255,R=O+y*(255-O-O)/255,j=A+S*(255-A-A)/255},hue:function(){P(m,y,S,q(k,O,A)),I(B,R,j,Z(k,O,A))},saturation:function(){P(k,O,A,q(m,y,S)),I(B,R,j,Z(k,O,A))},luminosity:function(){I(k,O,A,Z(m,y,S))},color:function(){I(m,y,S,Z(k,O,A))},add:function(){B=s(k+m,255),R=s(O+y,255),j=s(A+S,255)},subtract:function(){B=c(k-m,0),R=c(O-y,0),j=c(A-S,0)},average:function(){B=(k+m)/2,R=(O+y)/2,j=(A+S)/2},negation:function(){B=255-f(255-m-k),R=255-f(255-y-O),j=255-f(255-S-A)}},D=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(K){this[K]=!0},{}),U=ri.getContext(1,1,{willReadFrequently:!0});U&&(o.each(Y,function(K,Q){var W=Q==="darken",et=!1;U.save();try{U.fillStyle=W?"#300":"#a00",U.fillRect(0,0,1,1),U.globalCompositeOperation=Q,U.globalCompositeOperation===Q&&(U.fillStyle=W?"#a00":"#300",U.fillRect(0,0,1,1),et=U.getImageData(0,0,1,1).data[0]!==W?170:51)}catch{}U.restore(),D[Q]=et}),ri.release(U)),this.process=function(K,Q,W,et,nt){var at=Q.canvas,dt=K==="normal";if(dt||D[K])W.save(),W.setTransform(1,0,0,1,0,0),W.globalAlpha=et,dt||(W.globalCompositeOperation=K),W.drawImage(at,nt.x,nt.y),W.restore();else{var rt=Y[K];if(!rt)return;for(var ct=W.getImageData(nt.x,nt.y,at.width,at.height),pt=ct.data,bt=Q.getImageData(0,0,at.width,at.height).data,xt=0,Ot=pt.length;xt<Ot;xt+=4){m=bt[xt],k=pt[xt],y=bt[xt+1],O=pt[xt+1],S=bt[xt+2],A=pt[xt+2],T=bt[xt+3],N=pt[xt+3],rt();var It=T*et/255,qt=1-It;pt[xt]=It*B+qt*k,pt[xt+1]=It*R+qt*O,pt[xt+2]=It*j+qt*A,pt[xt+3]=T*et+qt*N}W.putImageData(ct,nt.x,nt.y)}}},Ye=new function(){var s="http://www.w3.org/2000/svg",c="http://www.w3.org/2000/xmlns",f="http://www.w3.org/1999/xlink",m={href:f,xlink:c,xmlns:c+"/","xmlns:xlink":c+"/"};function y(k,O,A){return T(a.createElementNS(s,k),O,A)}function S(k,O){var A=m[O],N=A?k.getAttributeNS(A,O):k.getAttribute(O);return N==="null"?null:N}function T(k,O,A){for(var N in O){var B=O[N],R=m[N];typeof B=="number"&&A&&(B=A.number(B)),R?k.setAttributeNS(R,N,B):k.setAttribute(N,B)}return k}return{svg:s,xmlns:c,xlink:f,create:y,get:S,set:T}},Ta=o.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(s,c){return!c&&(s instanceof re||s instanceof Zt||s instanceof ee)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(s,c){var f=o.capitalize(c),m=s[2];this[c]={type:s[1],property:c,attribute:s[0],toSVG:m,fromSVG:m&&o.each(m,function(y,S){this[y]=S},{}),exportFilter:s[3],get:"get"+f,set:"set"+f}},{});new function(){var s;function c(Y,D,U){var K=new o,Q=Y.getTranslation();if(D){var W;Y.isInvertible()?(Y=Y._shiftless(),W=Y._inverseTransform(Q),Q=null):W=new E,K[U?"cx":"x"]=W.x,K[U?"cy":"y"]=W.y}if(!Y.isIdentity()){var et=Y.decompose();if(et){var nt=[],at=et.rotation,dt=et.scaling,rt=et.skewing;Q&&!Q.isZero()&&nt.push("translate("+s.point(Q)+")"),at&&nt.push("rotate("+s.number(at)+")"),(!M.isZero(dt.x-1)||!M.isZero(dt.y-1))&&nt.push("scale("+s.point(dt)+")"),rt.x&&nt.push("skewX("+s.number(rt.x)+")"),rt.y&&nt.push("skewY("+s.number(rt.y)+")"),K.transform=nt.join(" ")}else K.transform="matrix("+Y.getValues().join(",")+")"}return K}function f(Y,D){for(var U=c(Y._matrix),K=Y._children,Q=Ye.create("g",U,s),W=0,et=K.length;W<et;W++){var nt=K[W],at=q(nt,D);if(at)if(nt.isClipMask()){var dt=Ye.create("clipPath");dt.appendChild(at),Z(nt,dt,"clip"),Ye.set(Q,{"clip-path":"url(#"+dt.id+")"})}else Q.appendChild(at)}return Q}function m(Y,D){var U=c(Y._matrix,!0),K=Y.getSize(),Q=Y.getImage();return U.x-=K.width/2,U.y-=K.height/2,U.width=K.width,U.height=K.height,U.href=D.embedImages==!1&&Q&&Q.src||Y.toDataURL(),Ye.create("image",U,s)}function y(Y,D){var U=D.matchShapes;if(U){var K=Y.toShape(!1);if(K)return S(K)}var Q=Y._segments,W=Q.length,et,nt=c(Y._matrix);if(U&&W>=2&&!Y.hasHandles())if(W>2){et=Y._closed?"polygon":"polyline";for(var at=[],dt=0;dt<W;dt++)at.push(s.point(Q[dt]._point));nt.points=at.join(" ")}else{et="line";var rt=Q[0]._point,ct=Q[1]._point;nt.set({x1:rt.x,y1:rt.y,x2:ct.x,y2:ct.y})}else et="path",nt.d=Y.getPathData(null,D.precision);return Ye.create(et,nt,s)}function S(Y){var D=Y._type,U=Y._radius,K=c(Y._matrix,!0,D!=="rectangle");if(D==="rectangle"){D="rect";var Q=Y._size,W=Q.width,et=Q.height;K.x-=W/2,K.y-=et/2,K.width=W,K.height=et,U.isZero()&&(U=null)}return U&&(D==="circle"?K.r=U:(K.rx=U.width,K.ry=U.height)),Ye.create(D,K,s)}function T(Y,D){var U=c(Y._matrix),K=Y.getPathData(null,D.precision);return K&&(U.d=K),Ye.create("path",U,s)}function k(Y,D){var U=c(Y._matrix,!0),K=Y._definition,Q=j(K,"symbol"),W=K._item,et=W.getStrokeBounds();return Q||(Q=Ye.create("symbol",{viewBox:s.rectangle(et)}),Q.appendChild(q(W,D)),Z(K,Q,"symbol")),U.href="#"+Q.id,U.x+=et.x,U.y+=et.y,U.width=et.width,U.height=et.height,U.overflow="visible",Ye.create("use",U,s)}function O(Y){var D=j(Y,"color");if(!D){var U=Y.getGradient(),K=U._radial,Q=Y.getOrigin(),W=Y.getDestination(),et;if(K){et={cx:Q.x,cy:Q.y,r:Q.getDistance(W)};var nt=Y.getHighlight();nt&&(et.fx=nt.x,et.fy=nt.y)}else et={x1:Q.x,y1:Q.y,x2:W.x,y2:W.y};et.gradientUnits="userSpaceOnUse",D=Ye.create((K?"radial":"linear")+"Gradient",et,s);for(var at=U._stops,dt=0,rt=at.length;dt<rt;dt++){var ct=at[dt],pt=ct._color,bt=pt.getAlpha(),xt=ct._offset;et={offset:xt??dt/(rt-1)},pt&&(et["stop-color"]=pt.toCSS(!0)),bt<1&&(et["stop-opacity"]=bt),D.appendChild(Ye.create("stop",et,s))}Z(Y,D,"color")}return"url(#"+D.id+")"}function A(Y){var D=Ye.create("text",c(Y._matrix,!0),s);return D.textContent=Y._content,D}var N={Group:f,Layer:f,Raster:m,Path:y,Shape:S,CompoundPath:T,SymbolItem:k,PointText:A};function B(Y,D,U,K){var Q={},W=!K&&Y.getParent(),et=[];return Y._name!=null&&(Q.id=Y._name),o.each(Ta,function(nt){var at=nt.get,dt=nt.type,rt=Y[at]();if(nt.exportFilter?nt.exportFilter(Y,rt):U.reduceAttributes==!1||!W||!o.equals(W[at](),rt)){if(dt==="color"&&rt!=null){var ct=rt.getAlpha();ct<1&&(Q[nt.attribute+"-opacity"]=ct)}dt==="style"?et.push(nt.attribute+": "+rt):Q[nt.attribute]=rt==null?"none":dt==="color"?rt.gradient?O(rt):rt.toCSS(!0):dt==="array"?rt.join(","):dt==="lookup"?nt.toSVG[rt]:rt}}),et.length&&(Q.style=et.join(";")),Q.opacity===1&&delete Q.opacity,Y._visible||(Q.visibility="hidden"),Ye.set(D,Q,s)}var R;function j(Y,D){return R||(R={ids:{},svgs:{}}),Y&&R.svgs[D+"-"+(Y._id||Y.__id||(Y.__id=F.get("svg")))]}function Z(Y,D,U){R||j();var K=R.ids[U]=(R.ids[U]||0)+1;D.id=U+"-"+K,R.svgs[U+"-"+(Y._id||Y.__id)]=D}function I(Y,D){var U=Y,K=null;if(R){U=Y.nodeName.toLowerCase()==="svg"&&Y;for(var Q in R.svgs)K||(U||(U=Ye.create("svg"),U.appendChild(Y)),K=U.insertBefore(Ye.create("defs"),U.firstChild)),K.appendChild(R.svgs[Q]);R=null}return D.asString?new t.XMLSerializer().serializeToString(U):U}function q(Y,D,U){var K=N[Y._class],Q=K&&K(Y,D);if(Q){var W=D.onExport;W&&(Q=W(Y,Q,D)||Q);var et=JSON.stringify(Y._data);et&&et!=="{}"&&et!=="null"&&Q.setAttribute("data-paper-data",et)}return Q&&B(Y,Q,D,U)}function P(Y){return Y||(Y={}),s=new C(Y.precision),Y}V.inject({exportSVG:function(Y){return Y=P(Y),I(q(this,Y,!0),Y)}}),St.inject({exportSVG:function(Y){Y=P(Y);var D=this._children,U=this.getView(),K=o.pick(Y.bounds,"view"),Q=Y.matrix||K==="view"&&U._matrix,W=Q&&gt.read([Q]),et=K==="view"?new $([0,0],U.getViewSize()):K==="content"?V._getBounds(D,W,{stroke:!0}).rect:$.read([K],0,{readNull:!0}),nt={version:"1.1",xmlns:Ye.svg,"xmlns:xlink":Ye.xlink};et&&(nt.width=et.width,nt.height=et.height,(et.x||et.x===0||et.y||et.y===0)&&(nt.viewBox=s.rectangle(et)));var at=Ye.create("svg",nt,s),dt=at;W&&!W.isIdentity()&&(dt=at.appendChild(Ye.create("g",c(W),s)));for(var rt=0,ct=D.length;rt<ct;rt++)dt.appendChild(q(D[rt],Y,!0));return I(at,Y)}})},new function(){var s={},c;function f(D,U,K,Q,W,et){var nt=Ye.get(D,U)||et,at=nt==null?Q?null:K?"":0:K?nt:parseFloat(nt);return/%\s*$/.test(nt)?at/100*(W?1:c[/x|^width/.test(U)?"width":"height"]):at}function m(D,U,K,Q,W,et,nt){return U=f(D,U||"x",!1,Q,W,et),K=f(D,K||"y",!1,Q,W,nt),Q&&(U==null||K==null)?null:new E(U,K)}function y(D,U,K,Q,W){return U=f(D,U||"width",!1,Q,W),K=f(D,K||"height",!1,Q,W),Q&&(U==null||K==null)?null:new z(U,K)}function S(D,U,K){return D==="none"?null:U==="number"?parseFloat(D):U==="array"?D?D.split(/[\s,]+/g).map(parseFloat):[]:U==="color"?q(D)||D:U==="lookup"?K[D]:D}function T(D,U,K,Q){var W=D.childNodes,et=U==="clippath",nt=U==="defs",at=new Jt,dt=at._project,rt=dt._currentStyle,ct=[];if(!et&&!nt&&(at=I(at,D,Q),dt._currentStyle=at._style.clone()),Q)for(var pt=D.querySelectorAll("defs"),bt=0,xt=pt.length;bt<xt;bt++)P(pt[bt],K,!1);for(var bt=0,xt=W.length;bt<xt;bt++){var Ot=W[bt],It;Ot.nodeType===1&&!/^defs$/i.test(Ot.nodeName)&&(It=P(Ot,K,!1))&&!(It instanceof Yt)&&ct.push(It)}return at.addChildren(ct),et&&(at=I(at.reduce(),D,Q)),dt._currentStyle=rt,(et||nt)&&(at.remove(),at=null),at}function k(D,U){for(var K=D.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),Q=[],W=0,et=K.length;W<et;W+=2)Q.push(new E(parseFloat(K[W]),parseFloat(K[W+1])));var nt=new le(Q);return U==="polygon"&&nt.closePath(),nt}function O(D){return re.create(D.getAttribute("d"))}function A(D,U){var K=(f(D,"href",!0)||"").substring(1),Q=U==="radialgradient",W;if(K)W=s[K].getGradient(),W._radial^Q&&(W=W.clone(),W._radial=Q);else{for(var et=D.childNodes,nt=[],at=0,dt=et.length;at<dt;at++){var rt=et[at];rt.nodeType===1&&nt.push(I(new vi,rt))}W=new pe(nt,Q)}var ct,pt,bt,xt=f(D,"gradientUnits",!0)!=="userSpaceOnUse";Q?(ct=m(D,"cx","cy",!1,xt,"50%","50%"),pt=ct.add(f(D,"r",!1,!1,xt,"50%"),0),bt=m(D,"fx","fy",!0,xt)):(ct=m(D,"x1","y1",!1,xt,"0%","0%"),pt=m(D,"x2","y2",!1,xt,"100%","0%"));var Ot=I(new ge(W,ct,pt,bt),D);return Ot._scaleToBounds=xt,null}var N={"#document":function(D,U,K,Q){for(var W=D.childNodes,et=0,nt=W.length;et<nt;et++){var at=W[et];if(at.nodeType===1)return P(at,K,Q)}},g:T,svg:T,clippath:T,polygon:k,polyline:k,path:O,lineargradient:A,radialgradient:A,image:function(D){var U=new he(f(D,"href",!0));return U.on("load",function(){var K=y(D);this.setSize(K);var Q=m(D).add(K.divide(2));this._matrix.append(new gt().translate(Q))}),U},symbol:function(D,U,K,Q){return new Yt(T(D,U,K,Q),!0)},defs:T,use:function(D){var U=(f(D,"href",!0)||"").substring(1),K=s[U],Q=m(D);return K?K instanceof Yt?K.place(Q):K.clone().translate(Q):null},circle:function(D){return new Zt.Circle(m(D,"cx","cy"),f(D,"r"))},ellipse:function(D){return new Zt.Ellipse({center:m(D,"cx","cy"),radius:y(D,"rx","ry")})},rect:function(D){return new Zt.Rectangle(new $(m(D),y(D)),y(D,"rx","ry"))},line:function(D){return new le.Line(m(D,"x1","y1"),m(D,"x2","y2"))},text:function(D){var U=new fe(m(D).add(m(D,"dx","dy")));return U.setContent(D.textContent.trim()||""),U},switch:T};function B(D,U,K,Q){if(D.transform){for(var W=(Q.getAttribute(K)||"").split(/\)\s*/g),et=new gt,nt=0,at=W.length;nt<at;nt++){var dt=W[nt];if(!dt)break;for(var rt=dt.split(/\(\s*/),ct=rt[0].trim(),pt=rt[1].split(/[\s,]+/g),bt=0,xt=pt.length;bt<xt;bt++)pt[bt]=parseFloat(pt[bt]);switch(ct){case"matrix":et.append(new gt(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]));break;case"rotate":et.rotate(pt[0],pt[1]||0,pt[2]||0);break;case"translate":et.translate(pt[0],pt[1]||0);break;case"scale":et.scale(pt);break;case"skewX":et.skew(pt[0],0);break;case"skewY":et.skew(0,pt[0]);break}}D.transform(et)}}function R(D,U,K){var Q=K==="fill-opacity"?"getFillColor":"getStrokeColor",W=D[Q]&&D[Q]();W&&W.setAlpha(parseFloat(U))}var j=o.set(o.each(Ta,function(D){this[D.attribute]=function(U,K){if(U[D.set]&&(U[D.set](S(K,D.type,D.fromSVG)),D.type==="color")){var Q=U[D.get]();if(Q&&Q._scaleToBounds){var W=U.getBounds();Q.transform(new gt().translate(W.getPoint()).scale(W.getSize()))}}}},{}),{id:function(D,U){s[U]=D,D.setName&&D.setName(U)},"clip-path":function(D,U){var K=q(U);if(K)if(K=K.clone(),K.setClipMask(!0),D instanceof Jt)D.insertChild(0,K);else return new Jt(K,D)},gradientTransform:B,transform:B,"fill-opacity":R,"stroke-opacity":R,visibility:function(D,U){D.setVisible&&D.setVisible(U==="visible")},display:function(D,U){D.setVisible&&D.setVisible(U!==null)},"stop-color":function(D,U){D.setColor&&D.setColor(U)},"stop-opacity":function(D,U){D._color&&D._color.setAlpha(parseFloat(U))},offset:function(D,U){if(D.setOffset){var K=U.match(/(.*)%$/);D.setOffset(K?K[1]/100:parseFloat(U))}},viewBox:function(D,U,K,Q,W){var et=new $(S(U,"array")),nt=y(Q,null,null,!0),at,dt;if(D instanceof Jt){var rt=nt?nt.divide(et.getSize()):1,dt=new gt().scale(rt).translate(et.getPoint().negate());at=D}else D instanceof Yt&&(nt&&et.setSize(nt),at=D._item);if(at){if(Z(Q,"overflow",W)!=="visible"){var ct=new Zt.Rectangle(et);ct.setClipMask(!0),at.addChild(ct)}dt&&at.transform(dt)}}});function Z(D,U,K){var Q=D.attributes[U],W=Q&&Q.value;if(!W&&D.style){var et=o.camelize(U);W=D.style[et],!W&&K.node[et]!==K.parent[et]&&(W=K.node[et])}return W?W==="none"?null:W:e}function I(D,U,K){var Q=U.parentNode,W={node:Be.getStyles(U)||{},parent:!K&&!/^defs$/i.test(Q.tagName)&&Be.getStyles(Q)||{}};return o.each(j,function(et,nt){var at=Z(U,nt,W);D=at!==e&&et(D,at,nt,U,W)||D}),D}function q(D){var U=D&&D.match(/\((?:["'#]*)([^"')]+)/),K=U&&U[1],Q=K&&s[n?K.replace(n.location.href.split("#")[0]+"#",""):K];return Q&&Q._scaleToBounds&&(Q=Q.clone(),Q._scaleToBounds=!0),Q}function P(D,U,K){var Q=D.nodeName.toLowerCase(),W=Q!=="#document",et=a.body,nt,at,dt;K&&W&&(c=Le.getView().getSize(),c=y(D,null,null,!0)||c,nt=Ye.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),at=D.parentNode,dt=D.nextSibling,nt.appendChild(D),et.appendChild(nt));var rt=Le.settings,ct=rt.applyMatrix,pt=rt.insertItems;rt.applyMatrix=!1,rt.insertItems=!1;var bt=N[Q],xt=bt&&bt(D,Q,U,K)||null;if(rt.insertItems=pt,rt.applyMatrix=ct,xt){W&&!(xt instanceof Jt)&&(xt=I(xt,D,K));var Ot=U.onImport,It=W&&D.getAttribute("data-paper-data");Ot&&(xt=Ot(D,xt,U)||xt),U.expandShapes&&xt instanceof Zt&&(xt.remove(),xt=xt.toPath()),It&&(xt._data=JSON.parse(It))}return nt&&(et.removeChild(nt),at&&(dt?at.insertBefore(D,dt):at.appendChild(D))),K&&(s={},xt&&o.pick(U.applyMatrix,ct)&&xt.matrix.apply(!0,!0)),xt}function Y(D,U,K){if(!D)return null;U=typeof U=="function"?{onLoad:U}:U||{};var Q=Le,W=null;function et(rt){try{var ct=typeof rt=="object"?rt:new t.DOMParser().parseFromString(rt.trim(),"image/svg+xml");if(!ct.nodeName)throw ct=null,new Error("Unsupported SVG source: "+D);Le=Q,W=P(ct,U,!0),(!U||U.insert!==!1)&&K._insertItem(e,W);var pt=U.onLoad;pt&&pt(W,rt)}catch(bt){nt(bt)}}function nt(rt,ct){var pt=U.onError;if(pt)pt(rt,ct);else throw new Error(rt)}if(typeof D=="string"&&!/^[\s\S]*</.test(D)){var at=a.getElementById(D);at?et(at):ns.request({url:D,async:!0,onLoad:et,onError:nt})}else if(typeof File<"u"&&D instanceof File){var dt=new FileReader;return dt.onload=function(){et(dt.result)},dt.onerror=function(){nt(dt.error)},dt.readAsText(D)}else et(D);return W}V.inject({importSVG:function(D,U){return Y(D,U,this)}}),St.inject({importSVG:function(D,U){return this.activate(),Y(D,U,this)}})},o.exports.PaperScript=(function(){var s=this,c=s.acorn;if(!c&&typeof ET<"u")try{c=RT()}catch{}if(!c){var f,m;c=f=m={},function(I,q){if(typeof f=="object"&&typeof m=="object")return q(f);if(typeof e=="function"&&e.amd)return e(["exports"],q);q(I.acorn||(I.acorn={}))}(this,function(I){I.version="0.5.0";var q,P,Y,D;I.parse=function(ot,mt){return P=String(ot),Y=P.length,K(mt),rc(),lc(q.program)};var U=I.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function K(ot){q=ot||{};for(var mt in U)Object.prototype.hasOwnProperty.call(q,mt)||(q[mt]=U[mt]);D=q.sourceFile||null}var Q=I.getLineInfo=function(ot,mt){for(var Nt=1,Ft=0;;){Vs.lastIndex=Ft;var ve=Vs.exec(ot);if(ve&&ve.index<mt)++Nt,Ft=ve.index+ve[0].length;else break}return{line:Nt,column:mt-Ft}};I.tokenize=function(ot,mt){P=String(ot),Y=P.length,K(mt),rc();var Nt={};function Ft(ve){return It=nt,ls(ve),Nt.start=et,Nt.end=nt,Nt.startLoc=at,Nt.endLoc=dt,Nt.type=rt,Nt.value=ct,Nt}return Ft.jumpTo=function(ve,Ce){if(W=ve,q.locations){bt=1,xt=Vs.lastIndex=0;for(var Ae;(Ae=Vs.exec(P))&&Ae.index<ve;)++bt,xt=Ae.index+Ae[0].length}pt=Ce,Us()},Ft};var W,et,nt,at,dt,rt,ct,pt,bt,xt,Ot,It,qt,$t,se,jt;function Bt(ot,mt){var Nt=Q(P,ot);mt+=" ("+Nt.line+":"+Nt.column+")";var Ft=new SyntaxError(mt);throw Ft.pos=ot,Ft.loc=Nt,Ft.raisedAt=W,Ft}var ie=[],ae={type:"num"},oe={type:"regexp"},be={type:"string"},me={type:"name"},we={type:"eof"},Me={keyword:"break"},xe={keyword:"case",beforeExpr:!0},di={keyword:"catch"},We={keyword:"continue"},yi={keyword:"debugger"},gi={keyword:"default"},Kt={keyword:"do",isLoop:!0},ei={keyword:"else",beforeExpr:!0},si={keyword:"finally"},wi={keyword:"for",isLoop:!0},en={keyword:"function"},bi={keyword:"if"},cn={keyword:"return",beforeExpr:!0},_n={keyword:"switch"},Ai={keyword:"throw",beforeExpr:!0},Zi={keyword:"try"},hn={keyword:"var"},Ci={keyword:"while",isLoop:!0},ii={keyword:"with"},Ps={keyword:"new",beforeExpr:!0},Ns={keyword:"this"},Bs={keyword:"null",atomValue:null},vr={keyword:"true",atomValue:!0},ka={keyword:"false",atomValue:!1},ss={keyword:"in",binop:7,beforeExpr:!0},yn={break:Me,case:xe,catch:di,continue:We,debugger:yi,default:gi,do:Kt,else:ei,finally:si,for:wi,function:en,if:bi,return:cn,switch:_n,throw:Ai,try:Zi,var:hn,while:Ci,with:ii,null:Bs,true:vr,false:ka,new:Ps,in:ss,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Ns,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},as={type:"[",beforeExpr:!0},Dr={type:"]"},er={type:"{",beforeExpr:!0},fn={type:"}"},Oe={type:"(",beforeExpr:!0},bn={type:")"},nn={type:",",beforeExpr:!0},rn={type:";",beforeExpr:!0},Hn={type:":",beforeExpr:!0},ir={type:"."},nr={type:"?",beforeExpr:!0},zs={binop:10,beforeExpr:!0},h={isAssign:!0,beforeExpr:!0},x={isAssign:!0,beforeExpr:!0},L={postfix:!0,prefix:!0,isUpdate:!0},G={prefix:!0,beforeExpr:!0},st={binop:1,beforeExpr:!0},wt={binop:2,beforeExpr:!0},Et={binop:3,beforeExpr:!0},Qt={binop:4,beforeExpr:!0},te={binop:5,beforeExpr:!0},Se={binop:6,beforeExpr:!0},De={binop:7,beforeExpr:!0},Ke={binop:8,beforeExpr:!0},Li={binop:9,prefix:!0,beforeExpr:!0},Ei={binop:10,beforeExpr:!0};I.tokTypes={bracketL:as,bracketR:Dr,braceL:er,braceR:fn,parenL:Oe,parenR:bn,comma:nn,semi:rn,colon:Hn,dot:ir,question:nr,slash:zs,eq:h,name:me,eof:we,num:ae,regexp:oe,string:be};for(var sn in yn)I.tokTypes["_"+sn]=yn[sn];function xn(ot){ot=ot.split(" ");var mt="",Nt=[];t:for(var Ft=0;Ft<ot.length;++Ft){for(var ve=0;ve<Nt.length;++ve)if(Nt[ve][0].length==ot[Ft].length){Nt[ve].push(ot[Ft]);continue t}Nt.push([ot[Ft]])}function Ce(Xe){if(Xe.length==1)return mt+="return str === "+JSON.stringify(Xe[0])+";";mt+="switch(str){";for(var Xn=0;Xn<Xe.length;++Xn)mt+="case "+JSON.stringify(Xe[Xn])+":";mt+="return true}return false;"}if(Nt.length>3){Nt.sort(function(Xe,Xn){return Xn.length-Xe.length}),mt+="switch(str.length){";for(var Ft=0;Ft<Nt.length;++Ft){var Ae=Nt[Ft];mt+="case "+Ae[0].length+":",Ce(Ae)}mt+="}"}else Ce(ot);return new Function("str",mt)}var jn=xn("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),jr=xn("class enum extends super const export import"),fo=xn("implements interface let package private protected public static yield"),Fs=xn("eval arguments"),Oa=xn("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),go=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dl="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",vf="------------------------------------------------------------------------------------------------------------------------------------------",ic=new RegExp("["+dl+"]"),_f=new RegExp("["+dl+vf+"]"),Is=/[\n\r\u2028\u2029]/,Vs=/\r\n|[\n\r\u2028\u2029]/g,po=I.isIdentifierStart=function(ot){return ot<65?ot===36:ot<91?!0:ot<97?ot===95:ot<123?!0:ot>=170&&ic.test(String.fromCharCode(ot))},nc=I.isIdentifierChar=function(ot){return ot<48?ot===36:ot<58?!0:ot<65?!1:ot<91?!0:ot<97?ot===95:ot<123?!0:ot>=170&&_f.test(String.fromCharCode(ot))};function os(){this.line=bt,this.column=W-xt}function rc(){bt=1,W=xt=0,pt=!0,Us()}function Pi(ot,mt){nt=W,q.locations&&(dt=new os),rt=ot,Us(),ct=mt,pt=ot.beforeExpr}function yf(){var ot=q.onComment&&q.locations&&new os,mt=W,Nt=P.indexOf("*/",W+=2);if(Nt===-1&&Bt(W-2,"Unterminated comment"),W=Nt+2,q.locations){Vs.lastIndex=mt;for(var Ft;(Ft=Vs.exec(P))&&Ft.index<W;)++bt,xt=Ft.index+Ft[0].length}q.onComment&&q.onComment(!0,P.slice(mt+2,Nt),mt,W,ot,q.locations&&new os)}function gl(){for(var ot=W,mt=q.onComment&&q.locations&&new os,Nt=P.charCodeAt(W+=2);W<Y&&Nt!==10&&Nt!==13&&Nt!==8232&&Nt!==8233;)++W,Nt=P.charCodeAt(W);q.onComment&&q.onComment(!1,P.slice(ot+2,W),ot,W,mt,q.locations&&new os)}function Us(){for(;W<Y;){var ot=P.charCodeAt(W);if(ot===32)++W;else if(ot===13){++W;var mt=P.charCodeAt(W);mt===10&&++W,q.locations&&(++bt,xt=W)}else if(ot===10||ot===8232||ot===8233)++W,q.locations&&(++bt,xt=W);else if(ot>8&&ot<14)++W;else if(ot===47){var mt=P.charCodeAt(W+1);if(mt===42)yf();else if(mt===47)gl();else break}else if(ot===160)++W;else if(ot>=5760&&go.test(String.fromCharCode(ot)))++W;else break}}function bf(){var ot=P.charCodeAt(W+1);return ot>=48&&ot<=57?oc(!0):(++W,Pi(ir))}function pl(){var ot=P.charCodeAt(W+1);return pt?(++W,ac()):ot===61?Ii(x,2):Ii(zs,1)}function xf(){var ot=P.charCodeAt(W+1);return ot===61?Ii(x,2):Ii(Ei,1)}function Sf(ot){var mt=P.charCodeAt(W+1);return mt===ot?Ii(ot===124?st:wt,2):mt===61?Ii(x,2):Ii(ot===124?Et:te,1)}function wf(){var ot=P.charCodeAt(W+1);return ot===61?Ii(x,2):Ii(Qt,1)}function sc(ot){var mt=P.charCodeAt(W+1);return mt===ot?mt==45&&P.charCodeAt(W+2)==62&&Is.test(P.slice(It,W))?(W+=3,gl(),Us(),ls()):Ii(L,2):mt===61?Ii(x,2):Ii(Li,1)}function Cf(ot){var mt=P.charCodeAt(W+1),Nt=1;return mt===ot?(Nt=ot===62&&P.charCodeAt(W+2)===62?3:2,P.charCodeAt(W+Nt)===61?Ii(x,Nt+1):Ii(Ke,Nt)):mt==33&&ot==60&&P.charCodeAt(W+2)==45&&P.charCodeAt(W+3)==45?(W+=4,gl(),Us(),ls()):(mt===61&&(Nt=P.charCodeAt(W+2)===61?3:2),Ii(De,Nt))}function Tf(ot){var mt=P.charCodeAt(W+1);return mt===61?Ii(Se,P.charCodeAt(W+2)===61?3:2):Ii(ot===61?h:G,1)}function kf(ot){switch(ot){case 46:return bf();case 40:return++W,Pi(Oe);case 41:return++W,Pi(bn);case 59:return++W,Pi(rn);case 44:return++W,Pi(nn);case 91:return++W,Pi(as);case 93:return++W,Pi(Dr);case 123:return++W,Pi(er);case 125:return++W,Pi(fn);case 58:return++W,Pi(Hn);case 63:return++W,Pi(nr);case 48:var mt=P.charCodeAt(W+1);if(mt===120||mt===88)return Of();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return oc(!1);case 34:case 39:return ml(ot);case 47:return pl();case 37:case 42:return xf();case 124:case 38:return Sf(ot);case 94:return wf();case 43:case 45:return sc(ot);case 60:case 62:return Cf(ot);case 61:case 33:return Tf(ot);case 126:return Ii(G,1)}return!1}function ls(ot){if(ot?W=et+1:et=W,q.locations&&(at=new os),ot)return ac();if(W>=Y)return Pi(we);var mt=P.charCodeAt(W);if(po(mt)||mt===92)return _l();var Nt=kf(mt);if(Nt===!1){var Ft=String.fromCharCode(mt);if(Ft==="\\"||ic.test(Ft))return _l();Bt(W,"Unexpected character '"+Ft+"'")}return Nt}function Ii(ot,mt){var Nt=P.slice(W,W+mt);W+=mt,Pi(ot,Nt)}function ac(){for(var ve="",ot,mt,Nt=W;;){W>=Y&&Bt(Nt,"Unterminated regular expression");var Ft=P.charAt(W);if(Is.test(Ft)&&Bt(Nt,"Unterminated regular expression"),ot)ot=!1;else{if(Ft==="[")mt=!0;else if(Ft==="]"&&mt)mt=!1;else if(Ft==="/"&&!mt)break;ot=Ft==="\\"}++W}var ve=P.slice(Nt,W);++W;var Ce=vl();Ce&&!/^[gmsiy]*$/.test(Ce)&&Bt(Nt,"Invalid regexp flag");try{var Ae=new RegExp(ve,Ce)}catch(Xe){Xe instanceof SyntaxError&&Bt(Nt,Xe.message),Bt(Xe)}return Pi(oe,Ae)}function Aa(ot,mt){for(var Nt=W,Ft=0,ve=0,Ce=mt??1/0;ve<Ce;++ve){var Ae=P.charCodeAt(W),Xe;if(Ae>=97?Xe=Ae-97+10:Ae>=65?Xe=Ae-65+10:Ae>=48&&Ae<=57?Xe=Ae-48:Xe=1/0,Xe>=ot)break;++W,Ft=Ft*ot+Xe}return W===Nt||mt!=null&&W-Nt!==mt?null:Ft}function Of(){W+=2;var ot=Aa(16);return ot==null&&Bt(et+2,"Expected hexadecimal number"),po(P.charCodeAt(W))&&Bt(W,"Identifier directly after number"),Pi(ae,ot)}function oc(ot){var mt=W,Nt=!1,Ft=P.charCodeAt(W)===48;!ot&&Aa(10)===null&&Bt(mt,"Invalid number"),P.charCodeAt(W)===46&&(++W,Aa(10),Nt=!0);var ve=P.charCodeAt(W);(ve===69||ve===101)&&(ve=P.charCodeAt(++W),(ve===43||ve===45)&&++W,Aa(10)===null&&Bt(mt,"Invalid number"),Nt=!0),po(P.charCodeAt(W))&&Bt(W,"Identifier directly after number");var Ce=P.slice(mt,W),Ae;return Nt?Ae=parseFloat(Ce):!Ft||Ce.length===1?Ae=parseInt(Ce,10):/[89]/.test(Ce)||jt?Bt(mt,"Invalid number"):Ae=parseInt(Ce,8),Pi(ae,Ae)}function ml(ot){W++;for(var mt="";;){W>=Y&&Bt(et,"Unterminated string constant");var Nt=P.charCodeAt(W);if(Nt===ot)return++W,Pi(be,mt);if(Nt===92){Nt=P.charCodeAt(++W);var Ft=/^[0-7]+/.exec(P.slice(W,W+3));for(Ft&&(Ft=Ft[0]);Ft&&parseInt(Ft,8)>255;)Ft=Ft.slice(0,-1);if(Ft==="0"&&(Ft=null),++W,Ft)jt&&Bt(W-2,"Octal literal in strict mode"),mt+=String.fromCharCode(parseInt(Ft,8)),W+=Ft.length-1;else switch(Nt){case 110:mt+=`
`;break;case 114:mt+="\r";break;case 120:mt+=String.fromCharCode(Rr(2));break;case 117:mt+=String.fromCharCode(Rr(4));break;case 85:mt+=String.fromCharCode(Rr(8));break;case 116:mt+="	";break;case 98:mt+="\b";break;case 118:mt+="\v";break;case 102:mt+="\f";break;case 48:mt+="\0";break;case 13:P.charCodeAt(W)===10&&++W;case 10:q.locations&&(xt=W,++bt);break;default:mt+=String.fromCharCode(Nt);break}}else(Nt===13||Nt===10||Nt===8232||Nt===8233)&&Bt(et,"Unterminated string constant"),mt+=String.fromCharCode(Nt),++W}}function Rr(ot){var mt=Aa(16,ot);return mt===null&&Bt(et,"Bad character escape sequence"),mt}var Hs;function vl(){Hs=!1;for(var ot,mt=!0,Nt=W;;){var Ft=P.charCodeAt(W);if(nc(Ft))Hs&&(ot+=P.charAt(W)),++W;else if(Ft===92){Hs||(ot=P.slice(Nt,W)),Hs=!0,P.charCodeAt(++W)!=117&&Bt(W,"Expecting Unicode escape sequence \\uXXXX"),++W;var ve=Rr(4),Ce=String.fromCharCode(ve);Ce||Bt(W-1,"Invalid Unicode escape"),(mt?po(ve):nc(ve))||Bt(W-4,"Invalid Unicode escape"),ot+=Ce}else break;mt=!1}return Hs?ot:P.slice(Nt,W)}function _l(){var ot=vl(),mt=me;return!Hs&&Oa(ot)&&(mt=yn[ot]),Pi(mt,ot)}function He(){Ot=et,It=nt,qt=dt,ls()}function mo(ot){if(jt=ot,W=et,q.locations)for(;W<xt;)xt=P.lastIndexOf(`
`,xt-2)+1,--bt;Us(),ls()}function yl(){this.type=null,this.start=et,this.end=null}function us(){this.start=at,this.end=null,D!==null&&(this.source=D)}function Gi(){var ot=new yl;return q.locations&&(ot.loc=new us),q.directSourceFile&&(ot.sourceFile=q.directSourceFile),q.ranges&&(ot.range=[et,0]),ot}function Lr(ot){var mt=new yl;return mt.start=ot.start,q.locations&&(mt.loc=new us,mt.loc.start=ot.loc.start),q.ranges&&(mt.range=[ot.range[0],0]),mt}function Pe(ot,mt){return ot.type=mt,ot.end=It,q.locations&&(ot.loc.end=qt),q.ranges&&(ot.range[1]=It),ot}function vo(ot){return q.ecmaVersion>=5&&ot.type==="ExpressionStatement"&&ot.expression.type==="Literal"&&ot.expression.value==="use strict"}function pi(ot){if(rt===ot)return He(),!0}function Pr(){return!q.strictSemicolons&&(rt===we||rt===fn||Is.test(P.slice(It,et)))}function Yn(){!pi(rn)&&!Pr()&&Rn()}function Mi(ot){rt===ot?He():Rn()}function Rn(){Bt(et,"Unexpected token")}function Ea(ot){ot.type!=="Identifier"&&ot.type!=="MemberExpression"&&Bt(ot.start,"Assigning to rvalue"),jt&&ot.type==="Identifier"&&Fs(ot.name)&&Bt(ot.start,"Assigning to "+ot.name+" in strict mode")}function lc(ot){Ot=It=W,q.locations&&(qt=new os),$t=jt=null,se=[],ls();var mt=ot||Gi(),Nt=!0;for(ot||(mt.body=[]);rt!==we;){var Ft=Ln();mt.body.push(Ft),Nt&&vo(Ft)&&mo(!0),Nt=!1}return Pe(mt,"Program")}var Ma={kind:"loop"},bl={kind:"switch"};function Ln(){(rt===zs||rt===x&&ct=="/=")&&ls(!0);var ot=rt,mt=Gi();switch(ot){case Me:case We:He();var Nt=ot===Me;pi(rn)||Pr()?mt.label=null:rt!==me?Rn():(mt.label=_r(),Yn());for(var Ft=0;Ft<se.length;++Ft){var ve=se[Ft];if((mt.label==null||ve.name===mt.label.name)&&(ve.kind!=null&&(Nt||ve.kind==="loop")||mt.label&&Nt))break}return Ft===se.length&&Bt(mt.start,"Unsyntactic "+ot.keyword),Pe(mt,Nt?"BreakStatement":"ContinueStatement");case yi:return He(),Yn(),Pe(mt,"DebuggerStatement");case Kt:return He(),se.push(Ma),mt.body=Ln(),se.pop(),Mi(Ci),mt.test=Ys(),Yn(),Pe(mt,"DoWhileStatement");case wi:if(He(),se.push(Ma),Mi(Oe),rt===rn)return xl(mt,null);if(rt===hn){var Ce=Gi();return He(),cc(Ce,!0),Pe(Ce,"VariableDeclaration"),Ce.declarations.length===1&&pi(ss)?uc(mt,Ce):xl(mt,Ce)}var Ce=Ki(!1,!0);return pi(ss)?(Ea(Ce),uc(mt,Ce)):xl(mt,Ce);case en:return He(),cs(mt,!0);case bi:return He(),mt.test=Ys(),mt.consequent=Ln(),mt.alternate=pi(ei)?Ln():null,Pe(mt,"IfStatement");case cn:return!$t&&!q.allowReturnOutsideFunction&&Bt(et,"'return' outside of function"),He(),pi(rn)||Pr()?mt.argument=null:(mt.argument=Ki(),Yn()),Pe(mt,"ReturnStatement");case _n:He(),mt.discriminant=Ys(),mt.cases=[],Mi(er),se.push(bl);for(var Ae,Xe;rt!=fn;)if(rt===xe||rt===gi){var Xn=rt===xe;Ae&&Pe(Ae,"SwitchCase"),mt.cases.push(Ae=Gi()),Ae.consequent=[],He(),Xn?Ae.test=Ki():(Xe&&Bt(Ot,"Multiple default clauses"),Xe=!0,Ae.test=null),Mi(Hn)}else Ae||Rn(),Ae.consequent.push(Ln());return Ae&&Pe(Ae,"SwitchCase"),He(),se.pop(),Pe(mt,"SwitchStatement");case Ai:return He(),Is.test(P.slice(It,et))&&Bt(It,"Illegal newline after throw"),mt.argument=Ki(),Yn(),Pe(mt,"ThrowStatement");case Zi:if(He(),mt.block=Xs(),mt.handler=null,rt===di){var hs=Gi();He(),Mi(Oe),hs.param=_r(),jt&&Fs(hs.param.name)&&Bt(hs.param.start,"Binding "+hs.param.name+" in strict mode"),Mi(bn),hs.guard=null,hs.body=Xs(),mt.handler=Pe(hs,"CatchClause")}return mt.guardedHandlers=ie,mt.finalizer=pi(si)?Xs():null,!mt.handler&&!mt.finalizer&&Bt(mt.start,"Missing catch or finally clause"),Pe(mt,"TryStatement");case hn:return He(),cc(mt),Yn(),Pe(mt,"VariableDeclaration");case Ci:return He(),mt.test=Ys(),se.push(Ma),mt.body=Ln(),se.pop(),Pe(mt,"WhileStatement");case ii:return jt&&Bt(et,"'with' in strict mode"),He(),mt.object=Ys(),mt.body=Ln(),Pe(mt,"WithStatement");case er:return Xs();case rn:return He(),Pe(mt,"EmptyStatement");default:var wl=ct,La=Ki();if(ot===me&&La.type==="Identifier"&&pi(Hn)){for(var Ft=0;Ft<se.length;++Ft)se[Ft].name===wl&&Bt(La.start,"Label '"+wl+"' is already declared");var fc=rt.isLoop?"loop":rt===_n?"switch":null;return se.push({name:wl,kind:fc}),mt.body=Ln(),se.pop(),mt.label=La,Pe(mt,"LabeledStatement")}else return mt.expression=La,Yn(),Pe(mt,"ExpressionStatement")}}function Ys(){Mi(Oe);var ot=Ki();return Mi(bn),ot}function Xs(ot){var mt=Gi(),Nt=!0,Ft=!1,ve;for(mt.body=[],Mi(er);!pi(fn);){var Ce=Ln();mt.body.push(Ce),Nt&&ot&&vo(Ce)&&(ve=Ft,mo(Ft=!0)),Nt=!1}return Ft&&!ve&&mo(!1),Pe(mt,"BlockStatement")}function xl(ot,mt){return ot.init=mt,Mi(rn),ot.test=rt===rn?null:Ki(),Mi(rn),ot.update=rt===bn?null:Ki(),Mi(bn),ot.body=Ln(),se.pop(),Pe(ot,"ForStatement")}function uc(ot,mt){return ot.left=mt,ot.right=Ki(),Mi(bn),ot.body=Ln(),se.pop(),Pe(ot,"ForInStatement")}function cc(ot,mt){for(ot.declarations=[],ot.kind="var";;){var Nt=Gi();if(Nt.id=_r(),jt&&Fs(Nt.id.name)&&Bt(Nt.id.start,"Binding "+Nt.id.name+" in strict mode"),Nt.init=pi(h)?Ki(!0,mt):null,ot.declarations.push(Pe(Nt,"VariableDeclarator")),!pi(nn))break}return ot}function Ki(ot,mt){var Nt=Sl(mt);if(!ot&&rt===nn){var Ft=Lr(Nt);for(Ft.expressions=[Nt];pi(nn);)Ft.expressions.push(Sl(mt));return Pe(Ft,"SequenceExpression")}return Nt}function Sl(ot){var mt=Sn(ot);if(rt.isAssign){var Nt=Lr(mt);return Nt.operator=ct,Nt.left=mt,He(),Nt.right=Sl(ot),Ea(mt),Pe(Nt,"AssignmentExpression")}return mt}function Sn(ot){var mt=Da(ot);if(pi(nr)){var Nt=Lr(mt);return Nt.test=mt,Nt.consequent=Ki(!0),Mi(Hn),Nt.alternate=Ki(!0,ot),Pe(Nt,"ConditionalExpression")}return mt}function Da(ot){return _o(yo(),-1,ot)}function _o(ot,mt,Nt){var Ft=rt.binop;if(Ft!=null&&(!Nt||rt!==ss)&&Ft>mt){var ve=Lr(ot);ve.left=ot,ve.operator=ct;var Ce=rt;He(),ve.right=_o(yo(),Ft,Nt);var Ae=Pe(ve,Ce===st||Ce===wt?"LogicalExpression":"BinaryExpression");return _o(Ae,mt,Nt)}return ot}function yo(){if(rt.prefix){var ot=Gi(),mt=rt.isUpdate;return ot.operator=ct,ot.prefix=!0,pt=!0,He(),ot.argument=yo(),mt?Ea(ot.argument):jt&&ot.operator==="delete"&&ot.argument.type==="Identifier"&&Bt(ot.start,"Deleting local variable in strict mode"),Pe(ot,mt?"UpdateExpression":"UnaryExpression")}for(var Nt=hc();rt.postfix&&!Pr();){var ot=Lr(Nt);ot.operator=ct,ot.prefix=!1,ot.argument=Nt,Ea(Nt),He(),Nt=Pe(ot,"UpdateExpression")}return Nt}function hc(){return Gs(ja())}function Gs(ot,mt){if(pi(ir)){var Nt=Lr(ot);return Nt.object=ot,Nt.property=_r(!0),Nt.computed=!1,Gs(Pe(Nt,"MemberExpression"),mt)}else if(pi(as)){var Nt=Lr(ot);return Nt.object=ot,Nt.property=Ki(),Nt.computed=!0,Mi(Dr),Gs(Pe(Nt,"MemberExpression"),mt)}else if(!mt&&pi(Oe)){var Nt=Lr(ot);return Nt.callee=ot,Nt.arguments=Ra(bn,!1),Gs(Pe(Nt,"CallExpression"),mt)}else return ot}function ja(){switch(rt){case Ns:var Ft=Gi();return He(),Pe(Ft,"ThisExpression");case me:return _r();case ae:case be:case oe:var Ft=Gi();return Ft.value=ct,Ft.raw=P.slice(et,nt),He(),Pe(Ft,"Literal");case Bs:case vr:case ka:var Ft=Gi();return Ft.value=rt.atomValue,Ft.raw=rt.keyword,He(),Pe(Ft,"Literal");case Oe:var ot=at,mt=et;He();var Nt=Ki();return Nt.start=mt,Nt.end=nt,q.locations&&(Nt.loc.start=ot,Nt.loc.end=dt),q.ranges&&(Nt.range=[mt,nt]),Mi(bn),Nt;case as:var Ft=Gi();return He(),Ft.elements=Ra(Dr,!0,!0),Pe(Ft,"ArrayExpression");case er:return qs();case en:var Ft=Gi();return He(),cs(Ft,!1);case Ps:return Af();default:Rn()}}function Af(){var ot=Gi();return He(),ot.callee=Gs(ja(),!0),pi(Oe)?ot.arguments=Ra(bn,!1):ot.arguments=ie,Pe(ot,"NewExpression")}function qs(){var ot=Gi(),mt=!0,Nt=!1;for(ot.properties=[],He();!pi(fn);){if(mt)mt=!1;else if(Mi(nn),q.allowTrailingCommas&&pi(fn))break;var Ft={key:bo()},ve=!1,Ce;if(pi(Hn)?(Ft.value=Ki(!0),Ce=Ft.kind="init"):q.ecmaVersion>=5&&Ft.key.type==="Identifier"&&(Ft.key.name==="get"||Ft.key.name==="set")?(ve=Nt=!0,Ce=Ft.kind=Ft.key.name,Ft.key=bo(),rt!==Oe&&Rn(),Ft.value=cs(Gi(),!1)):Rn(),Ft.key.type==="Identifier"&&(jt||Nt))for(var Ae=0;Ae<ot.properties.length;++Ae){var Xe=ot.properties[Ae];if(Xe.key.name===Ft.key.name){var Xn=Ce==Xe.kind||ve&&Xe.kind==="init"||Ce==="init"&&(Xe.kind==="get"||Xe.kind==="set");Xn&&!jt&&Ce==="init"&&Xe.kind==="init"&&(Xn=!1),Xn&&Bt(Ft.key.start,"Redefinition of property")}}ot.properties.push(Ft)}return Pe(ot,"ObjectExpression")}function bo(){return rt===ae||rt===be?ja():_r(!0)}function cs(ot,mt){rt===me?ot.id=_r():mt?Rn():ot.id=null,ot.params=[];var Nt=!0;for(Mi(Oe);!pi(bn);)Nt?Nt=!1:Mi(nn),ot.params.push(_r());var Ft=$t,ve=se;if($t=!0,se=[],ot.body=Xs(!0),$t=Ft,se=ve,jt||ot.body.body.length&&vo(ot.body.body[0]))for(var Ce=ot.id?-1:0;Ce<ot.params.length;++Ce){var Ae=Ce<0?ot.id:ot.params[Ce];if((fo(Ae.name)||Fs(Ae.name))&&Bt(Ae.start,"Defining '"+Ae.name+"' in strict mode"),Ce>=0)for(var Xe=0;Xe<Ce;++Xe)Ae.name===ot.params[Xe].name&&Bt(Ae.start,"Argument name clash in strict mode")}return Pe(ot,mt?"FunctionDeclaration":"FunctionExpression")}function Ra(ot,mt,Nt){for(var Ft=[],ve=!0;!pi(ot);){if(ve)ve=!1;else if(Mi(nn),mt&&q.allowTrailingCommas&&pi(ot))break;Nt&&rt===nn?Ft.push(null):Ft.push(Ki(!0))}return Ft}function _r(ot){var mt=Gi();return ot&&q.forbidReserved=="everywhere"&&(ot=!1),rt===me?(!ot&&(q.forbidReserved&&(q.ecmaVersion===3?jn:jr)(ct)||jt&&fo(ct))&&P.slice(et,nt).indexOf("\\")==-1&&Bt(et,"The keyword '"+ct+"' is reserved"),mt.name=ct):ot&&rt.keyword?mt.name=rt.keyword:Rn(),pt=!1,He(),Pe(mt,"Identifier")}}),c.version||(c=null)}function y(I,q){return(s.acorn||c).parse(I,q)}var S={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},T={"-":"__negate","+":"__self"},k=o.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(I){this["__"+I]="#"+I},{__self:function(){return this}});E.inject(k),z.inject(k),ge.inject(k);function O(I,q,P){var Y=S[q];if(I&&I[Y]){var D=I[Y](P);return q==="!="?!D:D}switch(q){case"+":return I+P;case"-":return I-P;case"*":return I*P;case"/":return I/P;case"%":return I%P;case"==":return I==P;case"!=":return I!=P}}function A(I,q){var P=T[I];if(q&&q[P])return q[P]();switch(I){case"+":return+q;case"-":return-q}}function N(I,q){if(!I)return"";q=q||{};var P=[];function Y(jt){for(var Bt=0,ie=P.length;Bt<ie;Bt++){var ae=P[Bt];if(ae[0]>=jt)break;jt+=ae[1]}return jt}function D(jt){return I.substring(Y(jt.range[0]),Y(jt.range[1]))}function U(jt,Bt){return I.substring(Y(jt.range[1]),Y(Bt.range[0]))}function K(jt,Bt){for(var ie=Y(jt.range[0]),ae=Y(jt.range[1]),oe=0,be=P.length-1;be>=0;be--)if(ie>P[be][0]){oe=be+1;break}P.splice(oe,0,[ie,Bt.length-ae+ie]),I=I.substring(0,ie)+Bt+I.substring(ae)}function Q(jt,Bt){switch(jt.type){case"UnaryExpression":if(jt.operator in T&&jt.argument.type!=="Literal"){var ie=D(jt.argument);K(jt,'$__("'+jt.operator+'", '+ie+")")}break;case"BinaryExpression":if(jt.operator in S&&jt.left.type!=="Literal"){var ae=D(jt.left),oe=D(jt.right),be=U(jt.left,jt.right),me=jt.operator;K(jt,"__$__("+ae+","+be.replace(new RegExp("\\"+me),'"'+me+'"')+", "+oe+")")}break;case"UpdateExpression":case"AssignmentExpression":var we=Bt&&Bt.type;if(!(we==="ForStatement"||we==="BinaryExpression"&&/^[=!<>]/.test(Bt.operator)||we==="MemberExpression"&&Bt.computed)){if(jt.type==="UpdateExpression"){var ie=D(jt.argument),Me="__$__("+ie+', "'+jt.operator[0]+'", 1)',xe=ie+" = "+Me;jt.prefix?xe="("+xe+")":(we==="AssignmentExpression"||we==="VariableDeclarator"||we==="BinaryExpression")&&(D(Bt.left||Bt.id)===ie&&(xe=Me),xe=ie+"; "+xe),K(jt,xe)}else if(/^.=$/.test(jt.operator)&&jt.left.type!=="Literal"){var ae=D(jt.left),oe=D(jt.right),Me=ae+" = __$__("+ae+', "'+jt.operator[0]+'", '+oe+")";K(jt,/^\(.*\)$/.test(D(jt))?"("+Me+")":Me)}}break}}function W(jt){switch(jt.type){case"ExportDefaultDeclaration":K({range:[jt.start,jt.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Bt=jt.declaration,ie=jt.specifiers;if(Bt){var ae=Bt.declarations;ae&&(ae.forEach(function(be){K(be,"module.exports."+D(be))}),K({range:[jt.start,Bt.start+Bt.kind.length]},""))}else if(ie){var oe=ie.map(function(be){var me=D(be);return"module.exports."+me+" = "+me+"; "}).join("");oe&&K(jt,oe)}break}}function et(jt,Bt,ie){if(jt){for(var ae in jt)if(ae!=="range"&&ae!=="loc"){var oe=jt[ae];if(Array.isArray(oe))for(var be=0,me=oe.length;be<me;be++)et(oe[be],jt,ie);else oe&&typeof oe=="object"&&et(oe,jt,ie)}ie.operatorOverloading!==!1&&Q(jt,Bt),ie.moduleExports!==!1&&W(jt)}}function nt(jt){var Bt="",ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(jt=(Math.abs(jt)<<1)+(jt<0?1:0);jt||!Bt;){var ae=jt&31;jt>>=5,jt&&(ae|=32),Bt+=ie[ae]}return Bt}var at=q.url||"",dt=q.sourceMaps,rt=q.paperFeatures||{},ct=q.source||I,pt=q.offset||0,bt=Le.agent,xt=bt.versionNumber,Ot=!1,It=/\r\n|\n|\r/mg,qt;if(dt&&(bt.chrome&&xt>=30||bt.webkit&&xt>=537.76||bt.firefox&&xt>=23||bt.node)){if(bt.node)pt-=2;else if(n&&at&&!n.location.href.indexOf(at)){var $t=a.getElementsByTagName("html")[0].innerHTML;pt=$t.substr(0,$t.indexOf(I)+1).match(It).length+1}Ot=pt>0&&!(bt.chrome&&xt>=36||bt.safari&&xt>=600||bt.firefox&&xt>=40||bt.node);var se=["AA"+nt(Ot?0:pt)+"A"];se.length=(I.match(It)||[]).length+1+(Ot?pt:0),qt={version:3,file:at,names:[],mappings:se.join(";AACA"),sourceRoot:"",sources:[at],sourcesContent:[ct]}}return(rt.operatorOverloading!==!1||rt.moduleExports!==!1)&&et(y(I,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,rt),qt&&(Ot&&(I=new Array(pt+1).join(`
`)+I),/^(inline|both)$/.test(dt)&&(I+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(qt))))),I+=`
//# sourceURL=`+(at||"paperscript")),{url:at,source:ct,code:I,map:qt}}function B(I,q,P){Le=q;var Y=q.getView(),D=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(I)&&!/\bnew\s+Tool\b/.test(I)?new es:null,U=D?D._events:[],K=["onFrame","onResize"].concat(U),Q=[],W=[],et,nt=typeof I=="object"?I:N(I,P);I=nt.code;function at(xt,Ot){for(var It in xt)(Ot||!/^_/.test(It))&&new RegExp("([\\b\\s\\W]|^)"+It.replace(/\$/g,"\\$")+"\\b").test(I)&&(Q.push(It),W.push(xt[It]))}at({__$__:O,$__:A,paper:q,tool:D},!0),at(q),I="var module = { exports: {} }; "+I;var pt=o.each(K,function(xt){new RegExp("\\s+"+xt+"\\b").test(I)&&(Q.push(xt),this.push("module.exports."+xt+" = "+xt+";"))},[]).join(`
`);pt&&(I+=`
`+pt),I+=`
return module.exports;`;var dt=Le.agent;if(a&&(dt.chrome||dt.firefox&&dt.versionNumber<40)){var rt=a.createElement("script"),ct=a.head||a.getElementsByTagName("head")[0];dt.firefox&&(I=`
`+I),rt.appendChild(a.createTextNode("document.__paperscript__ = function("+Q+") {"+I+`
}`)),ct.appendChild(rt),et=a.__paperscript__,delete a.__paperscript__,ct.removeChild(rt)}else et=Function(Q,I);var pt=et&&et.apply(q,W),bt=pt||{};return o.each(U,function(xt){var Ot=bt[xt];Ot&&(D[xt]=Ot)}),Y&&(bt.onResize&&Y.setOnResize(bt.onResize),Y.emit("resize",{size:Y.size,delta:new E}),bt.onFrame&&Y.setOnFrame(bt.onFrame),Y.requestUpdate()),pt}function R(I){if(/^text\/(?:x-|)paperscript$/.test(I.type)&&p.getAttribute(I,"ignore")!=="true"){var q=p.getAttribute(I,"canvas"),P=a.getElementById(q),Y=I.src||I.getAttribute("data-src"),D=p.hasAttribute(I,"async"),U="data-paper-scope";if(!P)throw new Error('Unable to find canvas with id "'+q+'"');var K=p.get(P.getAttribute(U))||new p().setup(P);return P.setAttribute(U,K._id),Y?ns.request({url:Y,async:D,mimeType:"text/plain",onLoad:function(Q){B(Q,K,Y)}}):B(I.innerHTML,K,I.baseURI),I.setAttribute("data-paper-ignore","true"),K}}function j(){o.each(a&&a.getElementsByTagName("script"),R)}function Z(I){return I?R(I):j()}return n&&(a.readyState==="complete"?setTimeout(j):ze.add(n,{load:j})),{compile:N,execute:B,load:Z,parse:y,calculateBinary:O,calculateUnary:A}}).call(this);var Le=new(p.inject(o.exports,{Base:o,Numerical:M,Key:ts,DomEvent:ze,DomElement:Be,document:a,window:n,Symbol:Yt,PlacedSymbol:Pt}));return Le.agent.node&&V_(Le),typeof e=="function"&&e.amd?e("paper",Le):l&&(l.exports=Le),Le}).call(LT,typeof self=="object"?self:null)}(jh)),jh.exports}var NT=PT();const Y_=J_(NT);function X_(l){const[,t,e]=l.split("-");return hb[t]?.[e]}function BT(l){const t=document.createElement("canvas").getContext("2d");return t?(t.fillStyle="#000",t.fillStyle=l,t.fillStyle||null):null}let fu=null;const zT={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},G_={union:"unite",subtract:"subtract",intersect:"intersect",exclude:"exclude"};function FT(l){const t=l*Math.PI/180;return{x1:.5-Math.cos(t)/2,y1:.5-Math.sin(t)/2,x2:.5+Math.cos(t)/2,y2:.5+Math.sin(t)/2}}function IT(l){if(l.type==="linear"){const{x1:t,y1:e,x2:n,y2:a}=FT(l.angle);return new pr({type:"linear",gradientUnits:"objectBoundingBox",coords:{x1:t,y1:e,x2:n,y2:a},colorStops:l.stops})}return new pr({type:"radial",gradientUnits:"objectBoundingBox",coords:{x1:.5,y1:.5,r1:0,x2:.5,y2:.5,r2:.5},colorStops:l.stops})}const VT=(l,t)=>({activePaint:"fill",fill:"#FFFFFF",stroke:"#000000",strokeWidth:1,strokeStyle:"solid",opacity:1,gradient:{type:"linear",angle:90,stops:[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}]},setGradient:e=>{l(n=>({gradient:{...n.gradient,...e}}))},applyFillGradient:()=>{const e=t().canvas,n=e?.getActiveObject();if(!e||!n)return;const a=IT(t().gradient);n.set("fill",a),e.requestRenderAll()},strokeStyleList:[{value:"solid",label:"Solid",dash:null,supported:!0},{value:"dashed",label:"Dashed",dash:[6,4],supported:!0},{value:"dotted",label:"Dotted",dash:[2,2],supported:!0},{value:"double",label:"Double",dash:null,supported:!1},{value:"groove",label:"Groove",dash:null,supported:!1},{value:"ridge",label:"Ridge",dash:null,supported:!1},{value:"inset",label:"Inset",dash:null,supported:!1},{value:"outset",label:"Outset",dash:null,supported:!1}],strokeStyleMap:{solid:{dashArray:null,lineCap:"butt"},dashed:{dashArray:[10,5],lineCap:"butt"},dotted:{dashArray:[2,5],lineCap:"round"},double:{dashArray:[1,3,1,3],lineCap:"butt"},groove:{dashArray:[4,2,1,2],lineCap:"butt"},ridge:{dashArray:[1,2,4,2],lineCap:"butt"},inset:{dashArray:[1,1],lineCap:"butt"},outset:{dashArray:[2,1],lineCap:"butt"}},setActivePaint:e=>l({activePaint:e}),setFill:e=>{const n=t().canvas;if(!n||typeof e=="string"&&e.startsWith("bg-")&&(e=X_(e),!e))return;n.getActiveObjects().forEach(o=>o.set({fill:e})),n.requestRenderAll(),l({fill:e})},setStroke:e=>{const n=t().canvas;if(!n)return;n.getActiveObjects().forEach(o=>o.set({stroke:e})),n.requestRenderAll(),l({stroke:e})},setStrokeWidthN:e=>{const n=t().canvas;if(!n)return;n.getActiveObjects().forEach(o=>o.set({strokeWidth:e})),n.requestRenderAll(),l({strokeWidth:e})},setStrokeStyle:e=>{const n=t().canvas;if(!n)return;const a=n.getActiveObjects(),o=t().strokeStyleMap[e]||strokeStyleMap.solid;a.forEach(d=>{d.set({strokeDashArray:o.dashArray,strokeLineCap:o.lineCap})}),n.requestRenderAll(),l({strokeStyle:e})},setOpacity1:e=>{const n=t().canvas,a=n?.getActiveObject();if(!a)return;const o=e/100;a.set("opacity",o),n.requestRenderAll(),l({opacity:e})},setOpacity:e=>{const n=t().canvas,a=n?.getActiveObject();if(!a)return;const o=Math.min(1,Math.max(.05,e));a.set("opacity",o),n.requestRenderAll(),l({opacity:o})},previewOpacity:e=>{const n=t().canvas?.getActiveObject();n&&(fu===null&&(fu=n.opacity??1),n.set("opacity",e/100),t().canvas?.requestRenderAll())},endOpacityPreview:()=>{const e=t().canvas?.getActiveObject();!e||fu===null||(e.set("opacity",fu),fu=null,t().canvas?.requestRenderAll())},handleColorChange:e=>{const n=t().canvas,a=t().geditor;if(!n)return;if(e.startsWith("bg-")){const p=X_(e);if(!p)return;e=p}const o=BT(e);if(!o)return;const d=n.getActiveObjects();if(a&&a.activeStop&&t().activePaint==="fill"){a.updateActiveColor(o),l({fill:o}),n.requestRenderAll();return}if(d.length===0){t().activePaint==="stroke"?l({stroke:o}):l({fill:o});return}d.forEach(p=>{if(t().activePaint==="stroke")p.set({stroke:o});else{if(p.fill instanceof pr)return;p.set({fill:o})}}),t().activePaint==="stroke"?l({stroke:o}):l({fill:o}),n.requestRenderAll()},addShadow:e=>{const n=t().canvas,a=n?.getActiveObject();a&&(a.set("shadow",new Mn(e)),n.requestRenderAll())},applyShadowPreset:e=>{const n=t().canvas,a=n?.getActiveObject();if(!a)return;const o=zT[e];if(!o)return;const d=new Mn({...o});a.set("shadow",d),n.requestRenderAll(),l({activeObjectShadow:d})},removeShadow:()=>{const e=t().canvas,n=e?.getActiveObject();n&&(n.set("shadow",null),e.requestRenderAll(),l({activeObjectShadow:null}))},toFabricPath(e){if(e.type==="path")return e;const a=e.toSVG().match(/d="([^"]+)"/);return a?new Hr(a[1],{fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,scaleX:e.scaleX,scaleY:e.scaleY,angle:e.angle}):null},async boolMe(e){const n=t().canvas,a=n.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}const o=a.getObjects(),d=a.getBoundingRect(!0),p={x:d.left+d.width/2,y:d.top+d.height/2},v=o[0],b={fill:v.fill,stroke:v.stroke,strokeWidth:v.strokeWidth};n.discardActiveObject();const C=new Y_.PaperScope;C.setup(new C.Size(5e3,5e3));let M=null;o.forEach((X,z)=>{const it=C.project.importSVG(X.toSVG(),{expandShapes:!0,insert:!1}),$=it.children?.[0]??it;$.fillColor="black",$.strokeColor=null,M=z===0?$:M.unite($)});const E=`
               <svg xmlns="http://www.w3.org/2000/svg">
                 ${M.exportSVG({asString:!0,bounds:"content",precision:3})}
               </svg>
             `;$g(E).then(({objects:X})=>{const z=X[0];z.set({...b,originX:"center",originY:"center",scaleX:1,scaleY:1,angle:0}),z.setPositionByOrigin(new Tt(p.x,p.y),"center","center"),z.setCoords(),n.remove(...o),n.add(z),n.setActiveObject(z),n.requestRenderAll()})},_booleanSelected(e,n={}){},booleanOperation:async(e="union")=>{const n=t().canvas,a=n.getActiveObject();if(!a||a.type!=="activeselection"){alert("Select at least 2 objects");return}if(!G_[e]){console.error("Invalid boolean operation:",e);return}const o=a.getObjects();if(o.length<2)return;const d=a.getBoundingRect(!0),p={x:d.left+d.width/2,y:d.top+d.height/2},v=o[0],b=UT(v);n.discardActiveObject();const C=new Y_.PaperScope;C.setup(new C.Size(5e3,5e3));let M=null;if(o.forEach((it,$)=>{const lt=C.project.importSVG(it.toSVG(),{expandShapes:!0,insert:!1}),gt=YT(lt.children?.[0]??lt);$===0?M=gt:M=M[G_[e]](gt)}),!M||M.area<=0)return;const E=`
           <svg xmlns="http://www.w3.org/2000/svg">
             ${M.exportSVG({asString:!0,bounds:"content",precision:3})}
           </svg>
         `,{objects:X}=await $g(E);if(!X||X.length===0)return;const z=X[0];z.set({...b,strokeUniform:!0,originX:"center",originY:"center",scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1}),z.setPositionByOrigin(new Tt(p.x,p.y),"center","center"),z.setCoords(),HT(n,o),n.remove(...o),n.add(z),n.setActiveObject(z),n.requestRenderAll()},unionSelected(e){return t().booleanOperation("union",e)},intersectSelected(e){return t().booleanOperation("intersect",e)},subtractSelected(e){return t().booleanOperation("subtract",e)},excludeSelected(e){return t().booleanOperation("exclude",e)}});function UT(l){return{fill:l.fill,stroke:l.stroke,strokeWidth:l.strokeWidth,strokeDashArray:l.strokeDashArray,strokeLineCap:l.strokeLineCap,strokeLineJoin:l.strokeLineJoin,opacity:l.opacity}}function HT(l,t){const e=l.getObjects();return Math.max(...t.map(n=>e.indexOf(n)))}function YT(l){return l.strokeWidth&&(l.strokeColor=null,l.strokeWidth=0,l.fillColor="black",l.closed=!0),l}const XT=(l,t)=>({undoStack:[],redoStack:[],MAX_HISTORY:20,_isRestoring:!1,saveState:()=>{const{canvas:e,_isRestoring:n,undoStack:a}=t();if(!e||n)return;const o=JSON.stringify(e.toJSON()),d=[...a,o];l({undoStack:d,redoStack:[]})},undo:()=>{const{canvas:e,undoStack:n,redoStack:a}=t();if(!e||n.length<=1)return;const o=JSON.stringify(e.toJSON()),d=n[n.length-1],p=n.slice(0,-1);l({_isRestoring:!0}),e.loadFromJSON(d,()=>{l({undoStack:p,redoStack:[o,...a],_isRestoring:!1}),e.requestRenderAll()})},redo:()=>{const{canvas:e,undoStack:n,redoStack:a}=t();if(!e||a.length===0)return;const o=JSON.stringify(e.toJSON()),d=a[0],p=a.slice(1);l({_isRestoring:!0}),e.loadFromJSON(d,()=>{l({undoStack:[...n,o],redoStack:p,_isRestoring:!1}),e.requestRenderAll()})},clearHistory:()=>l({undoStack:[],redoStack:[]})});function GT(l,t,e){return t&&!e?-l:!t&&e?180-l:l}const qT=(l,t)=>({transform:{x:0,y:0,width:100,height:100,rotation:0,flipX:!1,flipY:!1,originX:"center",centerY:"center",id:"c"},hasSelection:!1,_isSyncing:!1,updateFromFabric:e=>{if(!e){l({hasSelection:!1});return}if(t()._isSyncing)return;const n=p=>Math.round(p??0),a={x:n(e.left),y:n(e.top),width:n(e.getScaledWidth?.()??(e.width||0)*(e.scaleX||1)),height:n(e.getScaledHeight?.()??(e.height||0)*(e.scaleY||1)),rotation:n(e.angle||0),flipX:e.scaleX<0,flipY:e.scaleY<0},o=t().transform;(o.x!==a.x||o.y!==a.y||o.width!==a.width||o.height!==a.height||o.rotation!==a.rotation||o.flipX!==a.flipX||o.flipY!==a.flipY)&&l({transform:a,hasSelection:!0})},updateFabricFromStore1:()=>{const{transform:e,canvas:n}=t(),a=n?.getActiveObject();if(!a)return;l({_isSyncing:!0}),a.set({originX:"center",originY:"center",objectCaching:!1});const o=a._originalWidth||a.width||1,d=a._originalHeight||a.height||1;a._originalWidth||(a._originalWidth=o,a._originalHeight=d);const p=e.width/o,v=e.height/d;a.set({angle:e.rotation||0,scaleX:e.flipX?-Math.abs(p):Math.abs(p),scaleY:e.flipY?-Math.abs(v):Math.abs(v)}),a.setPositionByOrigin(new Tt(e.x,e.y),"center","center"),a.setCoords(),n.requestRenderAll(),l({_isSyncing:!1})},updateFabricFromStore:()=>{const{transform:e,canvas:n}=t(),a=n?.getActiveObject();if(!a||t()._isSyncing)return;l({_isSyncing:!0});const o=Number(e.x)||0,d=Number(e.y)||0,p=Math.max(1,Number(e.width)||1),v=Math.max(1,Number(e.height)||1),b=Number(e.rotation)||0,C=!!e.flipX,M=!!e.flipY,F=GT(b,C,M);a.set({left:o,top:d,width:p,height:v,angle:F,flipX:C,flipY:M}),a.setCoords(),n.requestRenderAll(),l({_isSyncing:!1})},updateFabricFromStore11:()=>{const{transform:e,canvas:n}=t(),a=n?.getActiveObject();if(!a||t()._isSyncing)return;l({_isSyncing:!0}),Number(e.x),Number(e.y);const o=Number(e.width)||1,d=Number(e.height)||1;let p=Number(e.rotation)||0;const v=!!e.flipX,b=!!e.flipY;v&&!b?p=-p:!v&&b&&(p=180-p);const C=a.getCenterPoint();a.set({originX:"center",originY:"center",left:C.x,top:C.y,width:o,height:d,angle:p,flipX:v,flipY:b}),a.setCoords(),n.renderAll(),l({_isSyncing:!1})},setTransform:(e,n)=>{l(a=>({transform:{...a.transform,[e]:n}})),requestAnimationFrame(()=>t().updateFabricFromStore())},flipX:()=>{l(e=>({transform:{...e.transform,flipX:!e.transform.flipX}})),requestAnimationFrame(()=>t().updateFabricFromStore())},flipY:()=>{l(e=>({transform:{...e.transform,flipY:!e.transform.flipY}})),requestAnimationFrame(()=>t().updateFabricFromStore())},setOrigin:e=>{l(n=>({transform:{...n.transform,originX:e.originX,originY:e.originY,id:e.id}})),requestAnimationFrame(()=>t().updateFabricFromStore())}}),WT=(l,t)=>({addShape:(e,n={})=>{const a=t().canvas;if(!a)return;const{pageWidth:o,pageHeight:d,scale:p}=t(),v=o/4*p,b=d/2*p;n={...{left:v,top:b,originX:"center",originY:"center",selection:!0,hasControls:!0,customType:"shape"},...n};let M;switch(e){case"rect":M=new On({width:80,height:80,fill:"transparent",stroke:"black",...n});break;case"circle":M=new Fn({radius:48,fill:"transparent",stroke:"black",...n});break;case"capsule":M=new On({radius:48,fill:"transparent",stroke:"black",...n});break;case"ellipse":M=new wr({rx:70,ry:45,fill:"transparent",stroke:"black",...n});break;case"triangle":M=new Xr({width:100,height:100,fill:"transparent",stroke:"black",...n});break;case"line":M=new gr([50,50,200,50],{stroke:"black",strokeWidth:2,selectable:!0,hasControls:!0,hasBorders:!1,...n});break;case"polygon":case"pentagon":M=new _a(n.points||[{x:0,y:0},{x:50,y:0},{x:25,y:50}],{fill:"transparent",stroke:"black",...n});break;case"diamond":M=new _a([{x:0,y:n.height/2||40},{x:n.width/2||40,y:0},{x:n.width||80,y:n.height/2||40},{x:n.width/2||40,y:n.height||80}],{fill:"transparent",stroke:"black",...n});break;case"star":M=new _a(t().generateStarPoints(n.numPoints||5,n.outerRadius||50,n.innerRadius||20),{fill:"transparent",stroke:"black",...n});break;case"arrow":M=t().createArrowShape({...n});break;case"paper":const F=new On({width:300,height:80,fill:"#FFFFFF",originX:"center",originY:"center",stroke:1,fontFamily:"Bubblegum Sans"}),E=new qr("Type to enter text",{fontSize:20,width:200,textAlign:"center",originX:"center",originY:"center",fontFamily:"Bubblegum Sans"});M=new mn([F,E],n),M.__text=E,M.__box=F,E.__group=M;break;default:console.warn("Shape not supported:",e);return}a.add(M),a.setActiveObject(M),a.renderAll(),t().setToolbar({target:M}),t().updateFromFabric(M),t().saveState(),t().addLayer(M,e)},generateStarPoints:(e=5,n=50,a=20)=>{const o=[],d=Math.PI/e;for(let p=0;p<2*e;p++){const v=p%2===0?n:a,b=p*d-Math.PI/2;o.push({x:v*Math.cos(b),y:v*Math.sin(b)})}return o},createArrowShape:({width:e=120,stroke:n="black",strokeWidth:a=2,headLength:o=12,headWidth:d=12,left:p=0,top:v=0})=>{const b=new gr([0,0,e,0],{stroke:n,strokeWidth:a,originX:"0",originY:"center"}),C=new Xr({width:o,height:d,fill:n,left:e,top:0,angle:90,originX:"center",originY:"center"});return new mn([b,C],{left:p,top:v,originX:"center",originY:"center"})}}),ZT=["Arial","Bubblegum Sans","Comic Neue","Consolas","Courier New","Fredoka One","Georgia","Helvetica","Monaco","Palatino","Patrick Hand","Tahoma","Times New Roman","Trebuchet MS","Verdana"],KT=(l,t)=>({fonts:ZT,fontSize:16,bgColor:"#000000",setBgColor:e=>l({color:e}),setFontSize:e=>l({fontSize:e}),color:"#000000",hasShadow:!1,setHasShadow:e=>l({hasShadow:e}),shadowColor:"",setShadowColor:e=>l({hasShadow:e}),setColor:e=>l({color:e}),fontFamily:"Arial",setFontFamily:e=>l({fontFamily:e}),isBold:!1,setIsBold:e=>l({isBold:e}),isItalic:!1,setIsItalic:e=>l({isItalic:e}),isUnderline:!1,setIsUnderline:e=>l({isUnderline:e}),charSpacing:0,setCharSpacing:e=>l({charSpacing:e}),lineHeight:1.2,setLineHeight:e=>l({lineHeight:e}),strokeColor:"#000000",setStrokeColor:e=>l({strokeColor:e}),strokeWidth:1,setStrokeWidth:e=>l({strokeWidth:e}),fillColor:"#000000",setFillColor:e=>l({fillColor:e}),addText:(e={})=>{const n=t().canvas;if(!n)return;const{text:a="Enter text",fontSize:o=36,bold:d=!1,italic:p=!1,underline:v=!1,fontFamily:b="Bubblegum Sans",width:C=300,textColor:M="#000000",placeholderColor:F="#9ca3af"}=e,{pageWidth:E,pageHeight:X,scale:z}=t(),it=E/4*z,$=X/2*z,lt=new qr(a,{left:it,top:$,originX:"center",originY:"center",fontSize:o,fontWeight:d?"bold":"normal",fontStyle:p?"italic":"normal",underline:v,fill:F,fontFamily:b,width:C,editable:!0,objectCaching:!1,padding:6,splitByGrapheme:!0});lt.on("editing:entered",()=>{lt.fill===F&&(lt.selectAll(),lt.set("fill",M),n.requestRenderAll())}),lt.on("editing:exited",()=>{lt.text.trim()?lt.set("fill",M):(lt.text=a,lt.set("fill",F)),n.requestRenderAll()}),n.add(lt),n.setActiveObject(lt),lt.enterEditing(),setTimeout(()=>{lt.hiddenTextarea?.focus(),lt.selectAll()},0),l({showTextToolbar:!0,selectedObject:lt}),t().saveState(),n.requestRenderAll()}});function QT(l){const[,t,e]=l.split("-");return hb[t]?.[e]}const JT=(l,t)=>({backgroundColor:"#ff0000",borderColor:"#000000",borderWidth:"1",borderStyle:"solid",setBackgroundColor:e=>{const n=t().canvas;if(!n)return;const a=QT(e);if(!a)return;const o=n.getActiveObject();o&&(o.set("fill",a),n.requestRenderAll(),l({backgroundColor:e}))}}),$T=(l,t)=>({visible:!1,x:0,y:0,items:[],openMenu:(e,n,a)=>{const d=a.length*36,p=Math.min(e,window.innerWidth-220),v=Math.min(n,window.innerHeight-d);l({visible:!0,x:p,y:v,items:a})},closeMenu:()=>l({visible:!1})}),t5=(l,t)=>({...mT(l,t),...AT(l,t),...vT(l,t),..._T(l,t),...yT(l,t),...TT(l,t),...OT(l,t),...VT(l,t),...XT(l,t),...qT(l,t),...WT(l,t),...KT(l,t),...JT(l,t),...$T(l)}),ne=oT(t5);function e5(){const l=ne(e=>e.commands),t=ne(e=>e.runCommand);Dt.useEffect(()=>{const e=n=>{const a=n.target;if(a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable)return;const o=[n.metaKey?"Meta":"",n.ctrlKey?"Ctrl":"",n.shiftKey?"Shift":"",n.altKey?"Alt":"",n.key.length===1?n.key.toLowerCase():n.key].filter(Boolean).join("+"),d=l.find(p=>p.shortcut?.some(v=>v.toLowerCase()===o.toLowerCase()));d&&(n.preventDefault(),t(d.id))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,t])}const fb=({options:l,value:t,onChange:e})=>J.jsxs("div",{className:"relative inline-block",children:[J.jsx("select",{value:t,onChange:n=>e(n.target.value),className:`
            w-full appearance-none rounded-full border border-gray-300
            bg-white px-3 py-[2px] pr-8 text-sm shadow-sm
            focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:outline-none
            hover:border-gray-400 transition
          `,children:l.map(n=>J.jsx("option",{value:n,style:{fontFamily:n},children:n},n))}),J.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-500",children:""})]}),xh=8,i5=300,al=({content:l,position:t="top",children:e})=>{if(!l)return J.jsx(J.Fragment,{children:e});const n=Dt.useRef(null),a=Dt.useRef(null),o=Dt.useRef(null),[d,p]=Dt.useState(!1),[v,b]=Dt.useState({top:0,left:0}),[C,M]=Dt.useState(t),F=()=>{o.current=setTimeout(()=>p(!0),i5)},E=()=>{clearTimeout(o.current),p(!1)};return Dt.useEffect(()=>{if(!d||!n.current||!a.current)return;const X=n.current.getBoundingClientRect(),z=a.current.getBoundingClientRect(),it=kt=>{switch(kt){case"bottom":return{top:X.bottom+xh,left:X.left+X.width/2-z.width/2};case"left":return{top:X.top+X.height/2-z.height/2,left:X.left-z.width-xh};case"right":return{top:X.top+X.height/2-z.height/2,left:X.right+xh};default:return{top:X.top-z.height-xh,left:X.left+X.width/2-z.width/2}}};let $=t,{top:lt,left:gt}=it($);lt<4&&$==="top"&&($="bottom"),lt+z.height>window.innerHeight&&$==="bottom"&&($="top"),gt<4&&$==="left"&&($="right"),gt+z.width>window.innerWidth&&$==="right"&&($="left"),{top:lt,left:gt}=it($),M($),b({top:Math.max(6,lt),left:Math.max(6,gt)})},[d,t]),J.jsxs(J.Fragment,{children:[J.jsx("span",{ref:n,className:"inline-flex",onMouseEnter:F,onMouseLeave:E,onClick:E,onFocus:F,onBlur:E,tabIndex:0,children:e}),d&&vy.createPortal(J.jsxs("div",{ref:a,style:{position:"fixed",top:v.top,left:v.left},className:`
              animate-tooltip
              z-[9999]
              rounded-md
              bg-white
              px-3 py-1.5
              text-[11px]
              font-medium
              text-gray-900
              shadow-[0_8px_24px_rgba(0,0,0,0.18)]
              whitespace-nowrap
              pointer-events-none
              animate-tooltip-min
            `,children:[l,J.jsx("div",{className:`
                absolute w-1.5 h-1.5 bg-white rotate-45
                ${C==="top"?"bottom-[-3px] left-1/2 -translate-x-1/2":C==="bottom"?"top-[-3px] left-1/2 -translate-x-1/2":C==="left"?"right-[-3px] top-1/2 -translate-y-1/2":"left-[-3px] top-1/2 -translate-y-1/2"}
              `})]}),document.body)]})},va=({options:l,value:t={},onChange:e,single:n=!1})=>{const[a,o]=Dt.useState(t),d=p=>{let v;n?v=Object.fromEntries(l.map(b=>[b.key,b.key===p])):v={...a,[p]:!a[p]},o(v),e?.(v)};return J.jsx("div",{className:`
        inline-flex overflow-hidden
        rounded-lg
        border border-gray-200
        bg-white
        shadow-[0_1px_2px_rgba(0,0,0,0.03)]
      `,children:l.map(({key:p,icon:v,label:b,tooltip:C})=>{const M=a[p];return J.jsx(al,{content:C,position:"bottom",children:J.jsxs("button",{type:"button",onClick:()=>d(p),className:`
              flex items-center gap-1.5
              px-2.5 py-1.5
              text-[11px] font-medium
              transition-colors
              border-r border-gray-100 last:border-r-0

              ${M?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-50"}
            `,children:[v&&J.jsx("i",{className:`${v} text-[11px]`}),b&&J.jsx("span",{children:b})]},p)},p)})})},ju=({label:l,value:t,onChange:e,min:n=0,max:a=100,step:o=1})=>{const d=()=>e(Math.min(a,t+o)),p=()=>e(Math.max(n,t-o));return J.jsxs(J.Fragment,{children:[l&&J.jsxs("label",{className:"text-xs",children:[l,":"]}),J.jsxs("div",{className:"relative inline-flex w-18 rounded-md shadow-xm",children:[J.jsx("input",{type:"number",value:t.toFixed(1),onChange:v=>e(Number(v.target.value)),min:n,max:a,step:o,className:`
          w-full rounded-full border border-gray-300
          bg-white px-3 py-[2px] text-sm
          focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:outline-none
          hover:border-gray-400 transition
          [appearance:textfield]
          [&::-webkit-outer-spin-button]:appearance-none
          [&::-webkit-inner-spin-button]:appearance-none
        `}),J.jsxs("div",{className:"absolute inset-y-1 right-1 flex flex-col divide-y border-l divide-gray-300 border-gray-300 bg-white rounded-r-md overflow-hidden",children:[J.jsx("button",{type:"button",onClick:d,className:"flex-1 flex items-center justify-center px-1 text-gray-600 hover:bg-gray-100",children:J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",stroke:"currentColor",children:J.jsx("path",{d:"M2 5L4 3L6 5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),J.jsx("button",{type:"button",onClick:p,className:"flex-1 flex items-center justify-center px-1 text-gray-600 hover:bg-gray-100",children:J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",stroke:"currentColor",children:J.jsx("path",{d:"M2 3L4 5L6 3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})};function n5({target:l,canvas:t,onChange:e}){const n=ne(X=>X.fontSize),a=ne(X=>X.setFontSize),o=ne(X=>X.color),d=ne(X=>X.setColor),p=ne(X=>X.fontFamily),v=ne(X=>X.setFontFamily);ne(X=>X.isBold);const b=ne(X=>X.setIsBold);ne(X=>X.isItalic);const C=ne(X=>X.setIsItalic);ne(X=>X.isUnderline);const M=ne(X=>X.setIsUnderline),F=ne(X=>X.fonts),E=Dt.useRef(null);return Dt.useEffect(()=>{l&&(a(l.fontSize||16),d(l.fill||"#000000"),b(l.fontWeight==="bold"))},[l]),Dt.useLayoutEffect(()=>{if(!l||!t||!E.current)return;const X=E.current,z=()=>{if(!l||!X)return;l.setCoords();const{tl:gt,tr:kt,bl:St,br:V}=l.aCoords,Jt=(gt.x+kt.x)/2,Wt=(St.y+V.y)/2,Zt=t.viewportTransform||[1,0,0,1,0,0],he=Zt[0]*Jt+Zt[2]*Wt+Zt[4],Pt=Zt[1]*Jt+Zt[3]*Wt+Zt[5],Yt=t.getElement().getBoundingClientRect(),_e=8,Xt=Yt.left+he,Re=Yt.top+Pt+_e,ut=X.getBoundingClientRect();X.style.position="fixed",X.style.left=`${Xt-ut.width/2}px`,X.style.top=`${Re}px`,X.style.zIndex="500"};let it=null;const $=()=>{it==null&&(it=requestAnimationFrame(()=>{it=null,z()}))};z();const lt=["object:moving","object:scaling","object:rotating","object:modified","mouse:wheel","after:render"];return lt.forEach(gt=>t.on(gt,$)),window.addEventListener("resize",z),window.addEventListener("scroll",z,!0),()=>{lt.forEach(gt=>t.off(gt,$)),window.removeEventListener("resize",z),window.removeEventListener("scroll",z,!0),it!=null&&cancelAnimationFrame(it)}},[l,t]),l?J.jsxs("div",{ref:E,className:"absolute z-50 flex items-center gap-2 bg-white shadow-lg rounded-full px-4 py-2",children:[J.jsxs("label",{className:"relative cursor-pointer",children:[J.jsx("input",{type:"color",value:o,onChange:X=>{const z=X.target.value;d(z),e?.({fill:z})},className:"absolute inset-0 opacity-0 cursor-pointer"}),J.jsx("div",{className:"h-6 w-6 rounded-full border shadow-sm",style:{backgroundColor:o}})]}),J.jsx(fb,{onChange:X=>{console.log(X),v(X),e?.({fontFamily:X})},options:F,value:p}),J.jsx(ju,{value:n,onChange:X=>{const z=parseInt(X,10);a(z),e?.({fontSize:z})}}),J.jsx(va,{options:[{key:"bold",icon:"fa-solid fa-bold"},{key:"italic",icon:"fa-solid fa-italic"},{key:"underline",icon:"fa-solid fa-underline"}],onChange:X=>{console.log("formats:",X);const{bold:z,italic:it,underline:$}=X;b(z),C(it),M($),e?.({fontWeight:z?"bold":"normal",fontStyle:it?"italic":"normal",underline:$})}})]}):null}const r5=typeof navigator<"u"&&/Mac|iPhone|iPad/i.test(navigator.platform),Zo=(l,t)=>r5?l:t;function s5(){const l=Dt.useRef(null),t=Dt.useRef(null),{init:e,selectedObject:n,canvas:a,openMenu:o,fill:d}=ne(),p=ne();e5(),Dt.useEffect(()=>(l.current&&(e(l.current),t.current=new cb(a,()=>d)),()=>{a&&(a.dispose(),t.current?.disable(),t.current=null)}),[e]);const v=b=>{b.preventDefault(),o(b.clientX,b.clientY,[{label:"Copy",icon:J.jsx("i",{className:"fa-solid fa-copy"}),shortcut:Zo("C","Ctrl+C"),when:()=>p.hasSelection,onClick:()=>p.copy()},{label:"Paste",icon:J.jsx("i",{className:"fa-solid fa-paste"}),shortcut:Zo("V","Ctrl+V"),when:()=>p.canPaste(),onClick:()=>p.paste()},{label:"Duplicate",icon:J.jsx("i",{className:"fa-solid fa-clone"}),shortcut:Zo("D","Ctrl+D"),when:()=>p.hasSelection,onClick:()=>p.duplicate()},{type:"divider"},{label:"Group",icon:J.jsx("i",{className:"fa-solid fa-object-group"}),shortcut:Zo("G","Ctrl+G"),when:()=>p.hasMultipleSelection(),onClick:()=>p.groupLayers()},{label:"Ungroup",icon:J.jsx("i",{className:"fa-solid fa-object-ungroup"}),shortcut:Zo("G","Ctrl+Shift+G"),when:()=>p.isGroupSelected(),onClick:()=>p.ungroupSelected()},{type:"divider"},{label:"Delete",icon:J.jsx("i",{className:"fa-solid fa-trash"}),shortcut:Zo("","Del"),when:()=>p.hasSelection,onClick:()=>p.removeLayer()}])};return J.jsxs("main",{className:"bg-white shadow-lg relative",onContextMenu:v,children:[J.jsx("canvas",{ref:l}),n?.type==="textbox"&&a&&J.jsx(n5,{target:n,canvas:a,onChange:b=>{n&&(n.set(b),a.requestRenderAll())}})]})}const q_={tl:{x:"left",y:"top",left:"12%",top:"12%"},tr:{x:"right",y:"top",left:"88%",top:"12%"},c:{x:"center",y:"center",left:"50%",top:"50%"},bl:{x:"left",y:"bottom",left:"12%",top:"88%"},br:{x:"right",y:"bottom",left:"88%",top:"88%"}};function a5({size:l=24,value:t="c",onChange:e}){const n=q_[t],a=l*.34;return J.jsxs("div",{style:{width:l,height:l,position:"relative",cursor:"pointer"},children:[J.jsx("div",{style:{position:"absolute",inset:2,borderRadius:3,border:"1px solid #cbd5e1",background:"linear-gradient(#ffffff, #f8fafc)"}}),J.jsx("div",{style:{position:"absolute",inset:"50% 4px auto 4px",height:1,background:"#e2e8f0"}}),J.jsx("div",{style:{position:"absolute",inset:"4px auto 4px 50%",width:1,background:"#e2e8f0"}}),Object.entries(q_).map(([o,d])=>J.jsx("div",{onClick:()=>e?.({originX:d.x,originY:d.y,id:o}),style:{position:"absolute",left:d.left,top:d.top,width:l*.45,height:l*.45,transform:"translate(-50%,-50%)"}},o)),t==="c"?J.jsx("div",{style:{position:"absolute",left:n.left,top:n.top,width:a,height:a,borderRadius:"50%",background:"#ffffff",border:"2px solid #3b82f6",boxShadow:`
              0 1px 2px rgba(0,0,0,0.15),
              0 0 0 3px rgba(59,130,246,0.15)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}}):J.jsx("div",{style:{position:"absolute",left:n.left,top:n.top,width:a,height:a,borderRadius:"50%",background:"#3b82f6",boxShadow:`
              0 2px 4px rgba(0,0,0,0.2),
              0 0 0 3px rgba(59,130,246,0.25)
            `,transform:"translate(-50%,-50%)",transition:"all 140ms ease"}})]})}const Sh=l=>J.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:[J.jsx("path",{d:"M10 5L3.5 19H10V5Z",className:"fill-current opacity-50"}),J.jsx("path",{d:"M14 5L20.5 19H14V5Z",className:"fill-current"}),J.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21","stroke-width":"2","stroke-dasharray":"3 2","stroke-linecap":"round",className:"stroke-current"})]});function zu({action:l,toggleType:t="switch",iconOn:e,iconOff:n,tooltipOn:a="",tooltipOff:o="",initial:d=!1,size:p=26,onChange:v}){const[b,C]=Dt.useState(d),M=()=>{let E=b;t==="switch"&&(E=!b),t==="exclusive"&&(E=!0),C(E),v?.({action:l,value:E})},F=E=>typeof E=="string"?J.jsx("i",{className:E,style:{fontSize:p*.55}}):E;return J.jsx(al,{content:b?a:o,position:"bottom",children:J.jsx("button",{onClick:M,style:{width:p,height:p,borderRadius:6,background:b?"linear-gradient(#3b82f6, #2563eb)":"linear-gradient(#ffffff, #f1f5f9)",border:"1px solid #cbd5e1",boxShadow:b?"0 2px 4px rgba(37,99,235,0.4)":"0 1px 2px rgba(0,0,0,0.12)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 140ms ease",color:b?"#fff":"#334155"},children:J.jsx("div",{style:{width:p*.6,height:p*.6,display:"flex",alignItems:"center",justifyContent:"center"},children:F(b?e:n)})})})}const o5=({label:l,value:t=0,min:e=0,max:n=100,step:a=1,onChange:o,onKeyDown:d,unit:p,disabled:v})=>J.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[J.jsxs("span",{children:[l,":"]}),J.jsxs("div",{className:"flex items-center gap-0.5",children:[J.jsx("input",{type:"number",min:e,max:n,step:a,value:t,disabled:v,onChange:b=>o?.(Number(b.target.value)),onKeyDown:d,className:`w-14 h-6 px-1.5 text-[11px] text-gray-500 border border-gray-200
            rounded bg-transparent focus:outline-none focus:border-gray-300`}),p&&J.jsx("span",{className:"text-[10px] text-gray-400",children:p})]})]}),db=({label:l,value:t,disabled:e,onChange:n,max:a})=>{const o=p=>{const v=p;if(v===""){n(0);return}let b=parseInt(v,10);isNaN(b)&&(b=0),n(b==0?"":b)},d=p=>{(p.key==="."||p.key==="e")&&p.preventDefault()};return J.jsx(o5,{label:l,value:t??0,onChange:o,disabled:e,onKeyDown:d,max:a})},l5=[{key:"x",label:"X"},{key:"y",label:"Y"},{key:"width",label:"W"},{key:"height",label:"H"},{key:"rotation",label:"R"}],u5=()=>{const l=ne(z=>z.transform),t=ne(z=>z.setTransform),e=ne(z=>z.groupLayers),n=ne(z=>z.ungroupSelected),a=ne(z=>z.bringForward),o=ne(z=>z.sendBackward),d=ne(z=>z.toggleActiveObjectLock),p=ne(z=>z.alignObjects),v=ne(z=>z.hasSelection),b=ne(z=>z.removeLayer),C=ne(z=>z.setOrigin);ne(z=>z.canvas);const[M,F]=Dt.useState(!1),E=(z,it)=>{z==="group"?e():z==="ungroup"?n():z==="sendtoback"?a():z==="bringtofront"?o():z==="lock"||z==="unlock"?d():z==="delete"&&b()},X=(z,it)=>{p(z)};return J.jsx("div",{className:"px-5 py-2 overflow-x-auto shadow-sm bg-white",children:J.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm",children:[J.jsxs("div",{className:"flex items-center gap-4",children:[J.jsx(a5,{size:24,value:l.id,onChange:z=>{console.log(z),C(z)}}),J.jsx("div",{className:"flex items-center gap-2",children:l5.map(z=>J.jsx(db,{label:z.label,value:l[z.key],disabled:!v,onChange:it=>t(z.key,it)},z.key))}),J.jsx("div",{className:"border-l h-6 border-gray-300"}),J.jsx(zu,{action:"flipX",toggleType:"switch",iconOn:J.jsx(Sh,{className:"cursor-pointer"}),iconOff:J.jsx(Sh,{className:"cursor-pointer"}),tooltipOn:"Flipped horizontally",tooltipOff:"Flip horizontally",initial:!1,onChange:z=>{const{action:it,value:$}=z;console.log(it,$),t(it,$)}}),J.jsx(zu,{action:"flipY",toggleType:"switch",iconOn:J.jsx(Sh,{className:"rotate-90 cursor-pointer"}),iconOff:J.jsx(Sh,{className:"rotate-90 cursor-pointer"}),tooltipOn:"Flipped vertically",tooltipOff:"Flip vertically",initial:!1,onChange:z=>{console.log(z);const{action:it,value:$}=z;t(it,$)}})]}),J.jsxs("div",{className:"flex items-center gap-4",children:[J.jsx(va,{single:!0,options:[{key:"group",icon:"fa-solid fa-object-group",tooltip:"Group"},{key:"ungroup",icon:"fa-solid fa-object-ungroup",tooltip:"Ungroup"}],onChange:z=>{const{group:it,ungroup:$}=z,lt=Object.entries(z).find(([gt,kt])=>kt);if(console.log("Group:",lt),lt){const[gt,kt]=lt;E(gt)}}}),J.jsx("div",{className:"border-l h-6 border-gray-300"}),J.jsx(zu,{action:"lock",toggleType:"switch",iconOn:"fa-solid fa-lock",iconOff:"fa-solid fa-unlock",tooltipOn:"Locked",tooltipOff:"Unlocked",initial:!1,onChange:z=>{const{action:it,value:$}=z;console.log(it,$),E(it)}}),J.jsx(va,{single:!0,options:[{key:"sendtoback",icon:"fa-solid fa-arrow-down",tooltip:"Send to back"},{key:"bringtofront",icon:"fa-solid fa-arrow-up",tooltip:"Bring to bfront"}],onChange:z=>{const{sendtoback:it,bringtofront:$}=z,lt=Object.entries(z).find(([gt,kt])=>kt);if(console.log("Back:",lt),lt){const[gt,kt]=lt;E(gt)}}}),J.jsx(va,{single:!0,options:[{key:"left",icon:"fa-solid fa-align-left",tooltip:"Align Left"},{key:"center",icon:"fa-solid fa-align-center",tooltip:"Align Center"},{key:"right",icon:"fa-solid fa-align-right",tooltip:"Align Right"}],onChange:z=>{console.log("align:",z);const{left:it,center:$,right:lt,justify:gt}=z;let kt="align-left";$?kt="align-hcenter":lt&&(kt="align-right"),X(kt)}}),J.jsx("div",{className:"border-l h-6 border-gray-300"}),J.jsx(va,{single:!0,options:[{key:"top",icon:"fa-solid fa-align-left rotate-90",tooltip:"Align Top"},{key:"middle",icon:"fa-solid fa-align-center -rotate-90",tooltip:"Align Middle"},{key:"bottom",icon:"fa-solid fa-align-right rotate-90",tooltip:"Align Bottom"}],onChange:z=>{console.log("align:",z);const{top:it,middle:$,bottom:lt}=z;let gt="align-left";it?gt="align-top":$?gt="align-vcenter":lt&&(gt="align-bottom"),X(gt)}}),J.jsx(va,{single:!0,options:[{key:"distribute-h",icon:"fa-solid fa-align-left rotate-90",tooltip:"Distribute horizontally"},{key:"distribute-v",icon:"fa-solid fa-align-center -rotate-90",tooltip:"Distribute vertically"}],onChange:z=>{console.log("align:",z);const{"distribute-v":it,"distribute-h":$}=z;let lt="align-left";$?lt="distribute-h":it&&(lt="distribute-v"),X(lt)}})]})]})})};function qu({icon:l,active:t,className:e,...n}){return J.jsx("button",{...n,className:`flex items-center justify-center cursor-pointer transition
        h-8 w-8 p-2 rounded-sm
        ${t?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200"}
        ${e??""}
      `,children:l})}const W_=({src:l,...t})=>J.jsx(J.Fragment,{children:J.jsx("img",{src:l,...t})});function wh({label:l,value:t,onChange:e,className:n=""}){return J.jsxs("label",{className:"inline-flex items-center gap-1.5 text-[11px] text-gray-600",children:[J.jsxs("span",{className:"font-medium",children:[l,":"]}),J.jsx("div",{className:"w-5 h-5 rounded-full p-[2px] border border-gray-200 shadow-sm",style:{backgroundColor:t},children:J.jsx("input",{type:"color",value:t,onChange:a=>e?.(a.target.value),className:`w-full h-full rounded-full opacity-0 cursor-pointer ${n}`})})]})}const c5=()=>{const{canvas:l}=ne(),t=ne(Pt=>Pt.fontSize),e=ne(Pt=>Pt.setFontSize),n=ne(Pt=>Pt.bgColor),a=ne(Pt=>Pt.setBgColor),o=ne(Pt=>Pt.color);ne(Pt=>Pt.setColor);const d=ne(Pt=>Pt.hasShadow),p=ne(Pt=>Pt.setHasShadow),v=ne(Pt=>Pt.shadowColor),b=ne(Pt=>Pt.setShadowColor),C=ne(Pt=>Pt.fontFamily),M=ne(Pt=>Pt.setFontFamily);ne(Pt=>Pt.align),ne(Pt=>Pt.setAlign),ne(Pt=>Pt.isBold);const F=ne(Pt=>Pt.setIsBold);ne(Pt=>Pt.isItalic);const E=ne(Pt=>Pt.setIsItalic);ne(Pt=>Pt.isUnderline);const X=ne(Pt=>Pt.setIsUnderline),z=ne(Pt=>Pt.charSpacing),it=ne(Pt=>Pt.setCharSpacing),$=ne(Pt=>Pt.lineHeight),lt=ne(Pt=>Pt.setLineHeight),gt=ne(Pt=>Pt.strokeWidth),kt=ne(Pt=>Pt.setStrokeWidth),St=ne(Pt=>Pt.strokeColor),V=ne(Pt=>Pt.setStrokeColor),Jt=ne(Pt=>Pt.fillColor),Wt=ne(Pt=>Pt.setFillColor),Zt=ne(Pt=>Pt.fonts),he=Pt=>{const Yt=l?.getActiveObject();Yt&&Yt.type.includes("text")&&(Yt.set(Pt),l.requestRenderAll())};return Dt.useEffect(()=>{if(!l)return;const Pt=()=>{const Yt=l.getActiveObject();Yt&&Yt.type.includes("text")&&(e(Yt.fontSize||24),M(Yt.fontFamily||"Arial"))};return l.on("selection:created",Pt),l.on("selection:updated",Pt),()=>{l.off("selection:created",Pt),l.off("selection:updated",Pt)}},[l]),J.jsx("div",{className:"px-5 py-2 flex flex-wrap gap-3 overflow-x-auto items-center bg-white shadow-sm text-sm",children:J.jsxs("div",{className:"flex items-center justify-between whitespace-nowrap text-sm gap-4",children:[J.jsx(wh,{label:"BG",value:n,onChange:Pt=>{a(o),he({backgroundColor:Pt})}}),J.jsx(wh,{label:"TXT",value:Jt,onChange:Pt=>{Wt(Pt),he({fill:Pt})}}),J.jsx(fb,{onChange:Pt=>{console.log(Pt),M(Pt),he({fontFamily:Pt})},options:Zt,value:C}),J.jsx(ju,{value:t,onChange:Pt=>{const Yt=parseInt(Pt,10);e(Yt),he({fontSize:Yt})}}),J.jsx(va,{options:[{key:"bold",icon:"fa-solid fa-bold",tooltip:"Bold"},{key:"italic",icon:"fa-solid fa-italic",tooltip:"Italic"},{key:"underline",icon:"fa-solid fa-underline",tooltip:"Underline"}],onChange:Pt=>{console.log("formats:",Pt);const{bold:Yt,italic:_e,underline:Xt}=Pt;F(Yt),E(_e),X(Xt),he({fontWeight:Yt?"bold":"normal"}),he({fontStyle:_e?"italic":"normal"}),he({underline:Xt})}}),J.jsx(va,{single:!0,options:[{key:"left",icon:"fa-solid fa-align-left",tooltip:"Left Align"},{key:"center",icon:"fa-solid fa-align-center",tooltip:"Center Align"},{key:"right",icon:"fa-solid fa-align-right",tooltip:"Right Align"},{key:"justify",icon:"fa-solid fa-align-justify",tooltip:"Justify"}],onChange:Pt=>{console.log("align:",Pt);const{left:Yt,center:_e,right:Xt,justify:Re}=Pt;let ut="left";_e?ut="center":Xt?ut="right":Re&&(ut="justify"),he({textAlign:ut})}}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(wh,{label:"Stroke",value:St,onChange:Pt=>{V(Pt),he({stroke:Pt})}}),J.jsx(ju,{label:"STR",max:10,value:gt,onChange:Pt=>{const Yt=parseInt(Pt,10);kt(Yt),he({strokeWidth:Yt})}})]}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(ju,{label:"LH",step:.1,value:$,onChange:Pt=>{const Yt=parseFloat(Pt,10);lt(Yt),he({lineHeight:Yt})}}),J.jsx(ju,{label:"LS",value:z,onChange:Pt=>{const Yt=parseInt(Pt,10);it(Yt),he({charSpacing:Yt})}})]}),J.jsx(qu,{icon:J.jsx("i",{className:"fa-solid fa-square text-xs"}),onClick:()=>{const Pt=!d;p(Pt),he({shadow:Pt?{color:v,blur:5,offsetX:2,offsetY:2}:null})},active:d,title:"Shadow"}),d&&J.jsx(wh,{label:"Shadow",value:v,onChange:Pt=>{b(Pt),he({shadow:{color:Pt,blur:5,offsetX:2,offsetY:2}})}})]})})},Wa=({children:l,onClick:t,position:e="middle"})=>{const n=e==="top"?"hover:rounded-t-lg":e==="bottom"?"hover:rounded-b-lg":"";return J.jsx("button",{onClick:t,className:`w-full text-left px-4 py-2 text-sm hover:bg-stone-200 hover:text-stone-900
        ${n}`,children:l})},h5=({trigger:l,children:t})=>{const[e,n]=Dt.useState(!1),a=Dt.useRef(null);return Dt.useEffect(()=>{const o=d=>{a.current&&!a.current.contains(d.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),J.jsxs("div",{className:"relative inline-block",ref:a,children:[J.jsx(qu,{icon:l,onClick:()=>n(!e),title:"Menu"}),e&&J.jsx("div",{className:"z-1000 absolute right-0 mt-2 w-40 rounded-lg bg-white shadow-lg ring-1 ring-black/10 bg-white text-gray-500",children:t})]})};function f5(){const l=uy(),t=ne(E=>E.canvas),e=ne(E=>E.toggleGrid),n=ne(E=>E.clearBoard),[a,o]=Dt.useState(!1),d=Dt.useRef(null),{selectedObject:p}=ne(),v=()=>{if(!t)return;const E=JSON.stringify(t.toJSON(["backgroundColor","customId"])),X=new Blob([E],{type:"application/json"}),z=document.createElement("a");z.href=URL.createObjectURL(X),z.download="drawing.fateboard",z.click(),URL.revokeObjectURL(z.href)},b=()=>{d.current?.click()},C=E=>{if(!E)return;const X=E.getActiveObject();if(!X)return alert("Select something first");const z=X.toSVG(),it=new Blob([z],{type:"image/svg+xml"}),$=URL.createObjectURL(it),lt=document.createElement("a");lt.href=$,lt.download="selection.svg",lt.click(),URL.revokeObjectURL($)},M=(E,X="whiteboard.svg")=>{if(!E)return;const z=E.toSVG(),it=new Blob([z],{type:"image/svg+xml;charset=utf-8"}),$=URL.createObjectURL(it),lt=document.createElement("a");lt.href=$,lt.download=X,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL($)},F=E=>{const X=E.target.files?.[0];if(!X||!t)return;const z=new FileReader;z.onload=it=>{try{const $=it.target.result,lt=JSON.parse($);t.clear(),t.loadFromJSON(lt,()=>{t.requestRenderAll()})}catch($){console.error("Failed to load canvas:",$)}},z.readAsText(X)};return J.jsx("header",{className:"fixed top-0 left-0 right-0 bg-stone-100 flex flex-row justify-between items-center z-50",children:J.jsxs("div",{className:"flex flex-col w-full",children:[J.jsxs("div",{className:"flex items-center justify-between w-full shadow-sm px-2",children:[J.jsx(W_,{src:"fate.svg",className:"h-10 cursor-pointer hidden md:block"}),J.jsx(W_,{src:"fateicon.svg",className:"h-8 cursor-pointer md:hidden"}),J.jsxs("div",{className:"flex gap-4 p-2",children:[J.jsx("input",{type:"file",accept:".fateboard",ref:d,className:"hidden",onChange:F}),J.jsx(al,{position:"bottom",content:"Grid View",children:J.jsx(qu,{active:a,icon:J.jsx("i",{className:"fa-solid fa-table-cells-large"}),onClick:()=>{o(!a),e()},title:"Grid View"})}),J.jsx(al,{position:"bottom",content:"Create New Board",children:J.jsx(qu,{icon:J.jsx("img",{src:"/edit.svg",alt:"New Draw",height:"16"}),onClick:n,title:"Grid View"})}),J.jsx("div",{className:"flex items-center justify-center cursor-pointer hover:bg-stone-200 h-8 w-8 rounded-sm",children:J.jsxs(h5,{trigger:J.jsx("i",{className:"fa-solid fa-ellipsis-vertical cursor-pointer"}),children:[J.jsx(Wa,{position:"top",onClick:n,children:"Create"}),J.jsx(Wa,{onClick:v,children:"Save"}),J.jsx(Wa,{onClick:()=>M(t),children:"Download Svg"}),J.jsx(Wa,{onClick:()=>C(t),children:"Download Selected"}),J.jsx(Wa,{onClick:b,children:"Load"}),J.jsx(Wa,{onClick:()=>l("/command-palette"),children:"Command Palette"}),J.jsx(Wa,{position:"bottom",onClick:()=>l("/setting"),children:"Settings"})]})})]})]}),p==="shape"&&J.jsx(u5,{}),p&&p?.type==="textbox"&&J.jsx(c5,{})]})})}function d5(l,t,e){switch(l){case"left":return{top:t.top-10,left:t.right+18};case"right":return{top:t.top,left:t.left-e.width-18};case"top":return{top:t.bottom+18,left:t.left};case"bottom":return{top:t.top-e.height-18,left:t.left};default:return{top:t.top,left:t.right+18}}}function gb(l){var t,e,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var a=l.length;for(t=0;t<a;t++)l[t]&&(e=gb(l[t]))&&(n&&(n+=" "),n+=e)}else for(e in l)l[e]&&(n&&(n+=" "),n+=e);return n}function pf(){for(var l,t,e=0,n="",a=arguments.length;e<a;e++)(l=arguments[e])&&(t=gb(l))&&(n&&(n+=" "),n+=t);return n}function g5({tools:l,activeTool:t,onToolClick:e,position:n}){const a=ne(d=>d.isActiveObjectLocked()),o={left:"fixed top-1/2 left-2 -translate-y-1/2 flex-col",right:"fixed top-1/2 right-2 -translate-y-1/2 flex-col",top:"fixed top-0 left-1/2 -translate-x-1/2 flex-row",bottom:"fixed bottom-0 left-1/2 -translate-x-1/2 flex-row"};return J.jsx("div",{className:`flex justify-center items-center bg-white border border-stone-200 shadow rounded-md gap-2 z-50 p-2 ${o[n]}`,children:l.map(d=>{const p=d.id==="lock"?a?"fa-solid fa-lock":"fa-solid fa-unlock":d.icon;return J.jsx(al,{content:d.tooltip,position:d.position,children:J.jsx("button",{onClick:v=>e(d.id,v),className:pf("flex justify-center items-center cursor-pointer h-8 w-8 p-2 rounded-md",t===d.id?"bg-blue-500 text-white hover:bg-blue-600":"hover:bg-stone-200"),children:J.jsx("i",{className:p})},d.id)},d.id)})})}function p5({isOpen:l,position:t,from:e="left",children:n}){return t?vy.createPortal(J.jsx("aside",{style:{position:"fixed",top:"50%",left:`${t.left}px`},className:pf("bg-stone-100 border border-stone-200 rounded-md shadow-lg w-70 p-4 z-50 transform -translate-y-1/2 transition-all duration-300 ease-out",l?"opacity-100 translate-x-0 pointer-events-auto":e==="left"?"-translate-x-4 opacity-0 pointer-events-none":"translate-x-4 opacity-0 pointer-events-none"),children:n}),document.body):null}const m5=(l,t)=>({select:()=>l.setActiveTool("select"),pan:()=>l.setActiveTool("pan"),draw:()=>l.setActiveTool("draw"),shapes:()=>{},text:()=>l.addText({}),delete:()=>t(),undo:()=>l.undo(),redo:()=>l.redo(),group:()=>l.groupLayers(),ungroup:()=>l.ungroupSelected(),forward:()=>l.bringForward(),backward:()=>l.sendBackward(),forwards:()=>l.bringToFront(),backwards:()=>l.sendToBack(),lock:()=>l.toggleActiveObjectLock(),fullscreen:()=>l.toggleFullscreen(),zoomIn:()=>l.zoomIn(),zoomOut:()=>l.zoomOut(),zoomFit:()=>l.zoomFit(),copy:()=>l.copy(),paste:()=>l.paste(),duplicate:()=>l.duplicate()}),v5=(l,t,e)=>{if(!l?.component)return null;const n=t.currentTarget.getBoundingClientRect(),a=l.panelSize||{width:288,height:300};return d5(e,n,a)};function _5({config:l,toolbarPosition:t="left"}){const[e,n]=Dt.useState(null),[a,o]=Dt.useState(null),d=ne(),p=d.removeLayer,v=m5(d,p),b=(M,F)=>{const E=l.find(X=>X.id===M);if(E){if(E.type==="momentary"){d.setActiveTool(M),setTimeout(()=>d.setActiveTool(null),400),v[M]?.();return}if(E.type==="exclusive"){d.activeTool===M?(d.setActiveTool("select"),n(null)):(d.setActiveTool(M),n(null),v[M]?.());return}if(E.type==="panel"){e===M?(n(null),d.setActiveTool("select")):(n(M),o(v5(E,F,t)),d.setActiveTool(M),v[M]?.());return}}},C=M=>{const F=l.find(E=>E.id===M);F&&(n(null),F.id!=="draw"&&d.setActiveTool("select"))};return J.jsxs(J.Fragment,{children:[J.jsx(g5,{tools:l,activeTool:d.activeTool,onToolClick:b,position:t}),l.map(M=>e===M.id&&M.component&&J.jsx(p5,{isOpen:!0,position:a,from:t,children:typeof M.component=="function"?J.jsx(M.component,{closePanel:()=>C(M.id)}):M.component},M.id))]})}function y5({onClick:l,size:t=24,className:e="",title:n="Close"}){return J.jsx("button",{onClick:l,title:n,className:`flex items-center justify-center rounded-full hover:bg-gray-200 cursor-pointer ${e}`,style:{width:t,height:t},children:""})}function pb({title:l,onClose:t}){return J.jsxs("div",{className:"flex items-center justify-between pb-3",children:[J.jsx("h3",{className:"text-lg font-bold text-gray-800",children:l}),J.jsx(y5,{onClick:t})]})}function b5({closePanel:l}){ne(v=>v.canvas);const t=ne(v=>v.color),e=ne(v=>v.setBrushColor),n=ne(v=>v.width),a=ne(v=>v.setBrushWidth),o=ne(v=>v.brush),d=ne(v=>v.setBrush),p=["pencil","circle","spray","pattern","eraser"];return J.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[J.jsx(pb,{title:"Draw",onClose:l}),J.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[J.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:J.jsx("input",{type:"range",min:"1",max:"50",value:n,onChange:v=>a({width:Number(v.target.value)}),className:"rotate-[-90deg] w-48 cursor-pointer"})}),J.jsxs("div",{className:"flex items-center justify-between pl-4",children:[J.jsx("span",{className:"text-sm font-medium",children:"Color:"}),J.jsx("input",{type:"color",value:t,onChange:v=>e({color:v.target.value}),className:"w-6 h-6 p-0 rounded border"})]}),J.jsxs("div",{className:"flex items-center justify-between pl-4",children:[J.jsx("span",{className:"text-sm font-medium",children:"Brush:"}),J.jsx("select",{value:o,onChange:v=>d({color:t,width:n,brush:v.target.value}),className:"ml-2 border rounded p-1 flex-1",children:p.map(v=>J.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),J.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[J.jsx("span",{className:"text-sm font-medium",children:"Width:"}),[15,10,5,4,2].map(v=>J.jsx("div",{onClick:()=>a({width:v}),className:`rounded-full border cursor-pointer flex items-center justify-center transition-transform
                        ${n===v?"scale-110 border-blue-500":"border-gray-400"}`,style:{width:`${v*2}px`,height:`${v*2}px`,backgroundColor:t}},v))]}),J.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[J.jsx("div",{className:"flex items-center justify-center rounded-full border h-6 w-6",style:{backgroundColor:t,borderColor:"#333"},children:J.jsx("span",{className:"text-xs text-white select-none",children:o.charAt(0).toUpperCase()})}),J.jsxs("span",{className:"text-sm",children:[n,"px"]})]})]})]})}const Z_=[{type:"rect",icon:"fa-regular fa-square",defaultProps:{width:120,height:80,rx:0,ry:0,fill:"transparent",stroke:"black"}},{type:"circle",icon:"fa-solid fa-circle",defaultProps:{radius:48,fill:"transparent",stroke:"black"}},{type:"paper",icon:"fa-solid fa-square-pen",defaultProps:{with:120,height:80,fill:"transparent",strock:"black"}},{type:"triangle",icon:"fas fa-play rotate-270",defaultProps:{width:100,height:100,fill:"transparent",stroke:"black"}},{type:"ellipse",icon:"fa-solid fa-circle transform scale-x-120",defaultProps:{rx:70,ry:45,fill:"transparent",stroke:"black"}},{type:"line",icon:"fa-solid fa-slash",defaultProps:{strokeWidth:2,stroke:"black"}},{type:"polygon",icon:"fa-solid fa-caret-up",defaultProps:{points:[{x:50,y:0},{x:100,y:50},{x:75,y:100},{x:25,y:100},{x:0,y:50}],fill:"transparent",stroke:"black",strokeWidth:2}},{type:"star",icon:"fa-solid fa-star",defaultProps:{numPoints:5,innerRadius:20,outerRadius:50,fill:"transparent",stroke:"black",strokeWidth:2}},{type:"arrow",icon:"fa-solid fa-arrow-up",defaultProps:{width:120,height:20,fill:"transparent",stroke:"black",strokeWidth:3,headLength:15}},{type:"diamond",icon:"fa-solid fa-gem",defaultProps:{width:80,height:80,fill:"transparent",stroke:"black",strokeWidth:2,angle:45}},{type:"pentagon",icon:"fa-solid fa-star-half-stroke",defaultProps:{points:[{x:50,y:0},{x:95,y:38},{x:78,y:90},{x:22,y:90},{x:5,y:38}],fill:"transparent",stroke:"black",strokeWidth:2}}],x5=()=>{const l=ne(F=>F.canvas),t=ne(F=>F.addShape),e=ne(F=>F.setActiveTool),n=(F,E={})=>{if(!l)return;const X=Z_.find(z=>z.type===F);X&&t(F,{...X.defaultProps,...E})};let a=null,o=!1,d=!1;const p=F=>{if(F.target)return;o=!0;const E=l.getPointer(F.e),X=[E.x,E.y,E.x,E.y];a=new gr(X,{strokeWidth:2,stroke:"black",selectable:!0,evented:!0}),l.add(a)},v=F=>{if(!o||!a)return;const E=l.getPointer(F.e);a.set({x2:E.x,y2:E.y}),l.renderAll()},b=()=>{o&&(o=!1,a=null,e("select"),M())},C=()=>{!l||d||(l.on("mouse:down",p),l.on("mouse:move",v),l.on("mouse:up",b),d=!0,l.isDrawingMode=!1)},M=()=>{!l||!d||(l.off("mouse:down",p),l.off("mouse:move",v),l.off("mouse:up",b),d=!1)};return{shapesList:Z_,add:n,enableLineDrawing:C,disableLineDrawing:M}};function S5({closePanel:l}){const{fill:t,stroke:e,strokeWidth:n,strokeStyle:a,strokeStyleList:o,setFill:d,setStroke:p,setStrokeWidth:v,setStrokeStyle:b}=ne(),{shapesList:C,add:M,enableLineDrawing:F}=x5(),E={fill:t,stroke:e,strokeWidth:n};function X(z){z==="line"?F(E,l):M(z,E),l?.(z)}return J.jsxs("div",{className:"bg-gray-100 w-60 p-3 flex flex-col gap-4",children:[J.jsx(pb,{title:"Shapes",onClose:l}),J.jsxs("div",{className:"grid grid-cols-[8%_92%] grid-rows-[auto_auto_auto] w-full",children:[J.jsx("div",{className:"row-span-4 flex flex-col items-center justify-center gap-4 h-48",children:J.jsx("input",{type:"range",min:"0",max:"16",value:n,onChange:z=>v(Number(z.target.value)),className:"rotate-[-90deg] w-48 cursor-pointer"})}),J.jsx("div",{className:"flex items-center justify-between pl-4 flex-wrap py-4",children:C.map(z=>J.jsx("button",{className:"rounded-sm hover:bg-gray-200 h-8 w-8 cursor-pointer",onClick:()=>X(z.type),title:z.type,children:J.jsx("i",{className:z.icon})},z.type))}),J.jsxs("div",{className:"flex items-center justify-between pl-4 py-2",children:[J.jsx("span",{className:"text-sm font-medium",children:"Stork:"}),J.jsx("input",{type:"color",value:e,onChange:z=>p(z.target.value),className:"w-6 h-6 p-0 rounded border"}),J.jsx("span",{className:"text-sm font-medium",children:"Fill:"}),J.jsx("input",{type:"color",value:t,onChange:z=>d(z.target.value),className:"w-6 h-6 p-0 rounded border"})]}),J.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[J.jsx("span",{className:"text-sm font-medium",children:"Width:"}),J.jsx("select",{value:a,onChange:z=>b(z.target.value),className:"ml-2 border rounded p-1 flex-1",children:o.map(z=>J.jsx("option",{value:z.value,children:z.label},z.label))})]}),J.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 pl-4",children:[J.jsx("div",{className:"flex items-center justify-center rounded-full border h-6 w-6",style:{backgroundColor:t,borderColor:"#333"},children:J.jsx("span",{className:"text-xs text-white select-none",children:"A"})}),J.jsxs("span",{className:"text-sm",children:[t,"px"]})]})]})]})}const w5=[{id:"select",type:"exclusive",icon:"fa-solid fa-location-arrow rotate-280",position:"left",component:null,tooltip:"Selector Tool"},{id:"pan",type:"exclusive",icon:"fa-solid fa-hand",position:"left",component:null,tooltip:"Hand Tool"},{id:"draw",type:"panel",icon:"fa-solid fa-pencil",position:"left",component:b5,panelSize:{width:300,height:250},tooltip:"Pencil Tool"},{id:"shapes",type:"panel",icon:"fa-solid fa-shapes",position:"left",component:l=>J.jsx(S5,{...l,panelId:"shapes"}),tooltip:"Shape Builder Tool"},{id:"text",type:"momentary",icon:"fa-solid fa-font",position:"left",component:null,tooltip:"Text Tool"}],C5=()=>{const l=ne(e=>e.toggleFullscreen),t=ne(e=>e.isFullScreen);return J.jsx(al,{position:"bottom",content:"Fullscreen",children:J.jsx(qu,{active:t,icon:J.jsx("i",{className:`fa-solid ${t?"fa-compress":"fa-expand"}`}),onClick:l,title:"Toggle Fullscreen",className:"border border-stone-200"})})},T5=({colorTool:l,zoomTool:t,strokeTool:e})=>J.jsxs("div",{className:"flex bg-white flex-col items-start px-2 py-1",children:[l&&J.jsx("div",{className:"flex-1 flex justify-center",children:l}),J.jsxs("div",{className:"flex items-center gap-2",children:[t&&J.jsx("div",{className:"flex py-1",children:t}),e&&J.jsx("div",{className:"flex py-1",children:e})]})]}),k5=({bgColor:l,isActive:t=!1,onClick:e})=>J.jsx("div",{onClick:e,className:`relative ${l} w-8 h-5 ml-px mb-px border border-stone-300 cursor-pointer`,children:t&&J.jsx("span",{className:"absolute inset-0 m-auto w-2 h-2 rounded-full bg-white",style:{boxShadow:"0 0 0 1px #000"}})}),O5=({fill:l,bgColors:t,onClick:e})=>J.jsx(J.Fragment,{children:[...t].reverse().map((n,a)=>J.jsx(k5,{bgColor:n,isActive:n===l,onClick:()=>e(n,l)},a))}),A5=({scrollRef:l,fill:t,bgColors:e,colorsMap:n,onClick:a})=>J.jsx(J.Fragment,{children:J.jsx("div",{ref:l,className:"h-10 bg-white w-full flex flex-wrap gap-0.01 max-h-64 overflow-y-auto",children:e.flatMap((o,d)=>J.jsx(O5,{fill:t,bgColors:n[o],onClick:a},`${o}-${d}`))})}),E5=({scrollRef:l})=>{const[t,e]=Dt.useState(!1),[n,a]=Dt.useState(!1),o=()=>{const p=l.current;p&&(e(p.scrollTop>0),a(p.scrollTop<p.scrollHeight-p.clientHeight))};Dt.useEffect(()=>{const p=l.current;if(p)return o(),p.addEventListener("scroll",o),()=>p.removeEventListener("scroll",o)},[l]);const d=p=>{const v=l.current;if(!v)return;const b=v.scrollHeight-v.clientHeight;let C=v.scrollTop+p;C<0&&(C=0),C>b&&(C=b),v.scrollTop=C,requestAnimationFrame(()=>{v.scrollTop=C,o()})};return J.jsxs("div",{className:"flex flex-row items-center gap-1",children:[J.jsx("button",{className:"h-10 w-8 flex items-center justify-center rounded hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t,onClick:()=>d(-20),children:J.jsx("i",{className:"fa-solid fa-chevron-up"})}),J.jsx("button",{className:"h-10 w-8 flex items-center justify-center rounded hover:bg-stone-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!n,onClick:()=>d(20),children:J.jsx("i",{className:"fa-solid fa-chevron-down"})})]})},M5={red:["bg-red-50","bg-red-100","bg-red-200","bg-red-300","bg-red-400","bg-red-500","bg-red-600","bg-red-700","bg-red-800","bg-red-900"],orange:["bg-orange-50","bg-orange-100","bg-orange-200","bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700","bg-orange-800","bg-orange-900"],amber:["bg-amber-50","bg-amber-100","bg-amber-200","bg-amber-300","bg-amber-400","bg-amber-500","bg-amber-600","bg-amber-700","bg-amber-800","bg-amber-900"],yellow:["bg-yellow-50","bg-yellow-100","bg-yellow-200","bg-yellow-300","bg-yellow-400","bg-yellow-500","bg-yellow-600","bg-yellow-700","bg-yellow-800","bg-yellow-900"],lime:["bg-lime-50","bg-lime-100","bg-lime-200","bg-lime-300","bg-lime-400","bg-lime-500","bg-lime-600","bg-lime-700","bg-lime-800","bg-lime-900"],green:["bg-green-50","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500","bg-green-600","bg-green-700","bg-green-800","bg-green-900"],emerald:["bg-emerald-50","bg-emerald-100","bg-emerald-200","bg-emerald-300","bg-emerald-400","bg-emerald-500","bg-emerald-600","bg-emerald-700","bg-emerald-800","bg-emerald-900"],teal:["bg-teal-50","bg-teal-100","bg-teal-200","bg-teal-300","bg-teal-400","bg-teal-500","bg-teal-600","bg-teal-700","bg-teal-800","bg-teal-900"],cyan:["bg-cyan-50","bg-cyan-100","bg-cyan-200","bg-cyan-300","bg-cyan-400","bg-cyan-500","bg-cyan-600","bg-cyan-700","bg-cyan-800","bg-cyan-900"],sky:["bg-sky-50","bg-sky-100","bg-sky-200","bg-sky-300","bg-sky-400","bg-sky-500","bg-sky-600","bg-sky-700","bg-sky-800","bg-sky-900"],blue:["bg-blue-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-400","bg-blue-500","bg-blue-600","bg-blue-700","bg-blue-800","bg-blue-900"],indigo:["bg-indigo-50","bg-indigo-100","bg-indigo-200","bg-indigo-300","bg-indigo-400","bg-indigo-500","bg-indigo-600","bg-indigo-700","bg-indigo-800","bg-indigo-900"],violet:["bg-violet-50","bg-violet-100","bg-violet-200","bg-violet-300","bg-violet-400","bg-violet-500","bg-violet-600","bg-violet-700","bg-violet-800","bg-violet-900"],purple:["bg-purple-50","bg-purple-100","bg-purple-200","bg-purple-300","bg-purple-400","bg-purple-500","bg-purple-600","bg-purple-700","bg-purple-800","bg-purple-900"],fuchsia:["bg-fuchsia-50","bg-fuchsia-100","bg-fuchsia-200","bg-fuchsia-300","bg-fuchsia-400","bg-fuchsia-500","bg-fuchsia-600","bg-fuchsia-700","bg-fuchsia-800","bg-fuchsia-900"],pink:["bg-pink-50","bg-pink-100","bg-pink-200","bg-pink-300","bg-pink-400","bg-pink-500","bg-pink-600","bg-pink-700","bg-pink-800","bg-pink-900"],rose:["bg-rose-50","bg-rose-100","bg-rose-200","bg-rose-300","bg-rose-400","bg-rose-500","bg-rose-600","bg-rose-700","bg-rose-800","bg-rose-900"],slate:["bg-slate-50","bg-slate-100","bg-slate-200","bg-slate-300","bg-slate-400","bg-slate-500","bg-slate-600","bg-slate-700","bg-slate-800","bg-slate-900"],gray:["bg-gray-50","bg-gray-100","bg-gray-200","bg-gray-300","bg-gray-400","bg-gray-500","bg-gray-600","bg-gray-700","bg-gray-800","bg-gray-900"],zinc:["bg-zinc-50","bg-zinc-100","bg-zinc-200","bg-zinc-300","bg-zinc-400","bg-zinc-500","bg-zinc-600","bg-zinc-700","bg-zinc-800","bg-zinc-900"],neutral:["bg-neutral-50","bg-neutral-100","bg-neutral-200","bg-neutral-300","bg-neutral-400","bg-neutral-500","bg-neutral-600","bg-neutral-700","bg-neutral-800","bg-neutral-900"],stone:["bg-stone-50","bg-stone-100","bg-stone-200","bg-stone-300","bg-stone-400","bg-stone-500","bg-stone-600","bg-stone-700","bg-stone-800","bg-stone-900"]},D5=()=>{const[l,t]=Dt.useState(["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","slate","gray","zinc","neutral","stone"]),e=Dt.useRef(null),{handleColorChange:n,fill:a}=ne();return J.jsxs("div",{className:"flex flex-row items-start bg-white",children:[J.jsx(A5,{scrollRef:e,fill:a,bgColors:l,colorsMap:M5,onClick:n}),J.jsx(E5,{scrollRef:e})]})};function I0({options:l=[],value:t,onChange:e,className:n="",label:a,preview:o,disabled:d}){return J.jsxs("div",{className:`flex items-center gap-1 ${n}`,children:[a&&J.jsx("span",{className:"text-xs text-gray-600",children:a}),o&&J.jsx("div",{children:o}),J.jsx("select",{value:t,onChange:p=>e(p.target.value),disabled:d,className:"p-1 text-xs border border-gray-300 rounded cursor-pointer",children:l.map(p=>J.jsx("option",{value:p.value,children:p.label},p.value))})]})}const K_=({label:l,hasActiveShape:t,isTileActive:e,setActiveTile:n,color:a})=>J.jsxs("div",{className:"flex items-center h-4",children:[J.jsx("label",{className:"text-[11px] font-medium text-gray-500 w-10 leading-none select-none",children:l}),t?J.jsx("div",{onClick:()=>n("fill"),title:"Edit fill color",className:pf("ml-2 h-4 w-10 rounded border cursor-pointer",e?"ring-1 ring-blue-500 border-blue-500":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:a}}):J.jsx("span",{className:"ml-2 w-8 text-center text-[10px] text-gray-400",children:"N/A"})]}),j5=({label:l,strokeStyleList:t,strokeStyle:e,setStrokeStyle:n,disabled:a})=>J.jsxs("div",{className:"flex items-center justify-center h-8 gap-2",children:[J.jsx("span",{className:"text-[11px] font-medium text-gray-500 leading-none select-none",children:l}),J.jsx(I0,{disabled:a,options:t,value:e,onChange:n})]}),R5=({value:l,min:t=0,max:e=100,step:n=1,unit:a,onChange:o,disabled:d=!1})=>{const p=v=>Math.min(e,Math.max(t,v));return J.jsxs("div",{className:pf("inline-flex items-center rounded-lg border border-gray-300 bg-white shadow-sm",d&&"opacity-40 pointer-events-none"),children:[J.jsx("button",{onClick:()=>o(p(l-n)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-l-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Decrease",children:J.jsx("i",{className:"fa-solid fa-minus"})}),J.jsxs("div",{className:`px-3 text-sm font-semibold text-gray-800 bg-gray-50 border-x border-gray-300
                   min-w-[44px] text-center`,title:"Value",children:[l,a]}),J.jsx("button",{onClick:()=>o(p(l+n)),className:`cursor-pointer w-8 h-8 flex items-center justify-center rounded-r-lg text-gray-600
                   hover:bg-gray-100 active:bg-gray-200 transition-colors`,title:"Increase",children:J.jsx("i",{className:"fa-solid fa-plus"})})]})},L5=({value:l=1,onChange:t,disabled:e})=>{const n=Math.round(l*100);return J.jsx(R5,{value:n,min:0,max:100,step:5,unit:"%",disabled:e,onChange:a=>t(a/100)})},P5=({size:l=20})=>J.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[J.jsx("defs",{children:J.jsxs("linearGradient",{id:"g1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[J.jsx("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.15"}),J.jsx("stop",{offset:"100%",stopColor:"currentColor"})]})}),J.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",fill:"url(#g1)"})]}),N5=({size:l=20})=>J.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[J.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),J.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),J.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),J.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),J.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.07",y2:"7.07"}),J.jsx("line",{x1:"16.93",y1:"16.93",x2:"19.07",y2:"19.07"}),J.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.07",y2:"16.93"}),J.jsx("line",{x1:"16.93",y1:"7.07",x2:"19.07",y2:"4.93"}),J.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"currentColor",opacity:"0.3"})]}),Q_=({size:l=20})=>J.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[J.jsx("line",{x1:"5",y1:"19",x2:"19",y2:"5"}),J.jsx("circle",{cx:"5",cy:"19",r:"2",fill:"currentColor"}),J.jsx("circle",{cx:"19",cy:"5",r:"2",fill:"currentColor"})]}),B5=[{label:"Select Operation",value:""},{label:"Union",value:"union"},{label:"Intersect",value:"intersect"},{label:"Subtract",value:"subtract"},{label:"Exclude",value:"exclude"}],z5=()=>{const[l,t]=Dt.useState(""),e=ne(),n=a=>{switch(a){case"union":e.unionSelected({fill:"green"});break;case"intersect":e.intersectSelected({fill:"orange"});break;case"subtract":e.subtractSelected({fill:"pink"});break;case"exclude":e.excludeSelected({fill:"purple"});break}};return J.jsx("div",{className:"flex items-center space-x-2",children:J.jsx(I0,{value:l,options:B5,onChange:a=>{t(a),n(a)}})})},Kh={soft:{blur:12,offsetX:0,offsetY:6,color:"rgba(0,0,0,0.2)"},medium:{blur:20,offsetX:0,offsetY:10,color:"rgba(0,0,0,0.25)"},strong:{blur:40,offsetX:0,offsetY:20,color:"rgba(0,0,0,0.3)"}},F5=({disabled:l})=>{const t=ne(o=>o.activeObjectShadow),e=ne(o=>o.applyShadowPreset),n=ne(o=>o.removeShadow),a=t?Object.entries(Kh).find(([,o])=>o.blur===t.blur&&o.offsetX===t.offsetX&&o.offsetY===t.offsetY&&o.color===t.color)?.[0]??"custom":"none";return J.jsx(I0,{value:a,disabled:l,options:[{label:"None",value:"none"},...Object.keys(Kh).map(o=>({label:o.charAt(0).toUpperCase()+o.slice(1),value:o}))],onChange:o=>{if(o==="none")return n();e(o)}})};function I5(){const{fill:l,stroke:t,strokeWidth:e,activePaint:n,setActivePaint:a,setStroke:o,setStrokeWidthN:d,opacity:p,setOpacity:v,hasActiveShape:b,strokeStyleList:C,strokeStyle:M,setStrokeStyle:F,addShadow:E,applyShadowPreset:X,geditor:z}=ne(),[it,$]=Dt.useState(!1),kt=ne(Wt=>Wt.canvas)?.getActiveObject()?.shadow?.blur,St=n==="fill",V=n==="stroke",Jt=Wt=>{const Zt=Math.max(0,Number(Wt)||0);d(Zt)};return[...Object.keys(Kh).map(Wt=>({label:Wt.charAt(0).toUpperCase()+Wt.slice(1),value:Wt}))],Object.entries(Kh).find(([,Wt])=>Wt.blur===kt)?.[0],J.jsxs("div",{className:"flex flex-row justify-center items-center gap-5 bg-white",children:[J.jsxs("div",{className:"flex flex-col gap-2",children:[J.jsx(K_,{label:"Fill",hasActiveShape:b,isTileActive:St,setActiveTile:()=>a("fill"),color:l}),J.jsx(K_,{label:"Stroke",hasActiveShape:b,isTileActive:V,setActiveTile:()=>a("stroke"),color:t})]}),J.jsxs("div",{className:"flex gap-2 items-center",children:[J.jsx(db,{disabled:!b,label:"Width",value:e,onChange:Jt,max:"16"}),J.jsx(j5,{label:"Style",strokeStyleList:C,strokeStyle:M,setStrokeStyle:F,disabled:!b})]}),J.jsx("div",{className:"flex gap-2 items-center",children:J.jsx(L5,{value:p,onChange:v,disabled:!b})}),J.jsx("div",{className:"flex",children:J.jsx(F5,{disabled:!b})}),J.jsxs("div",{className:"flex items-center gap-1 bg-stone-100 p-1 rounded-lg",children:[J.jsx(zu,{action:"gradient",toggleType:"switch",iconOn:J.jsx(Q_,{}),iconOff:J.jsx(Q_,{}),tooltipOn:"Gradient",tooltipOff:"Normal",initial:!1,onChange:Wt=>{Wt.value?z.enable():z.disable()}}),J.jsx(zu,{action:"gradienttype",toggleType:"switch",iconOn:J.jsx(P5,{}),iconOff:J.jsx(N5,{}),tooltipOn:"Linear Gradient",tooltipOff:"Radial Graient",initial:!1,onChange:Wt=>{z.toggleGradientType()}})]}),J.jsx("div",{className:"flex",children:J.jsx(z5,{})})]})}function V5(){return J.jsx("footer",{className:"flex flex-col",children:J.jsx(T5,{colorTool:J.jsx(D5,{}),zoomTool:J.jsx(C5,{}),strokeTool:J.jsx(I5,{})})})}const U5=()=>{const{visible:l,x:t,y:e,items:n,closeMenu:a}=ne();if(!l)return null;const o=n.filter(p=>typeof p.when=="function"?p.when():!0),d=o.filter((p,v)=>{if(p.type!=="divider")return!0;const b=o[v-1],C=o[v+1];return b&&C&&b.type!=="divider"&&C.type!=="divider"});return d.length===0?null:J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"fixed inset-0 z-40",onClick:a}),J.jsx("div",{className:`fixed z-50 min-w-[220px] rounded-lg
                   bg-white shadow-lg border border-stone-200 p-1`,style:{top:e,left:t},children:d.map((p,v)=>p.type==="divider"?J.jsx("div",{className:"my-1 h-px bg-stone-200"},p.id??v):J.jsxs("button",{disabled:p.disabled,onClick:()=>{p.onClick(),a()},className:`
                flex w-full items-center justify-between
                rounded-lg px-3 py-2 text-sm
                hover:bg-gray-100
                disabled:opacity-40
              `,children:[J.jsxs("span",{className:"flex items-center gap-2",children:[p.icon,p.label]}),p.shortcut&&J.jsx("span",{className:"text-xs text-gray-400",children:p.shortcut})]},p.id??v))})]})},H5=()=>J.jsxs("div",{children:[J.jsx(uS,{header:J.jsx(f5,{}),leftSidebar:J.jsx(_5,{config:w5,toolbarPosition:"left"}),canvasBoard:J.jsx(s5,{}),footer:J.jsx(V5,{})}),J.jsx(U5,{})]});function Y5(){const l=Dt.useRef(null),[t,e]=Dt.useState(0),[n,a]=Dt.useState(!1),[o,d]=Dt.useState(0),p=Dt.useRef(0);return Dt.useEffect(()=>{const v=l.current,b=v?.getContext("2d");if(!v||!b)return;const C=20;let M=[{x:8*C,y:10*C},{x:7*C,y:10*C},{x:6*C,y:10*C}],F=X(),E="RIGHT";function X(){return{x:Math.floor(Math.random()*(v.width/C))*C,y:Math.floor(Math.random()*(v.height/C))*C}}const z=gt=>{gt.key==="ArrowLeft"&&E!=="RIGHT"&&(E="LEFT"),gt.key==="ArrowUp"&&E!=="DOWN"&&(E="UP"),gt.key==="ArrowRight"&&E!=="LEFT"&&(E="RIGHT"),gt.key==="ArrowDown"&&E!=="UP"&&(E="DOWN")};document.addEventListener("keydown",z);const it=()=>{b.fillStyle="#fdfdfd",b.fillRect(0,0,v.width,v.height);for(let Jt=0;Jt<M.length;Jt++)b.fillStyle=Jt===0?"#2ecc71":"#27ae60",b.fillRect(M[Jt].x,M[Jt].y,C,C),b.strokeStyle="#ecf0f1",b.strokeRect(M[Jt].x,M[Jt].y,C,C);b.fillStyle="#e74c3c",b.fillRect(F.x,F.y,C,C);let gt=M[0].x,kt=M[0].y;E==="LEFT"&&(gt-=C),E==="UP"&&(kt-=C),E==="RIGHT"&&(gt+=C),E==="DOWN"&&(kt+=C),gt===F.x&&kt===F.y?(p.current+=1,e(p.current),F=X()):M.pop();const V={x:gt,y:kt};(gt<0||kt<0||gt>=v.width||kt>=v.height||$(V,M))&&(a(!0),clearInterval(lt),document.removeEventListener("keydown",z)),M.unshift(V),b.fillStyle="#2c3e50",b.font="18px Arial",b.fillText("Score: "+p.current,C,C)},$=(gt,kt)=>{for(let St=0;St<kt.length;St++)if(gt.x===kt[St].x&&gt.y===kt[St].y)return!0;return!1},lt=setInterval(it,100);return()=>{clearInterval(lt),document.removeEventListener("keydown",z)}},[o]),J.jsxs("div",{className:"flex flex-col items-center p-6 font-sans m-4",children:[J.jsx("h1",{className:"text-7xl font-bold text-red-600",children:"404"}),J.jsx("p",{className:"m-4 text-lg text-gray-700",children:"Oops! Page not found."}),n?J.jsxs("div",{className:"flex flex-col items-center",children:[J.jsxs("p",{className:"text-xl text-red-600 font-semibold m-4",children:[" Game Over! Final Score: ",t]}),J.jsx("button",{onClick:()=>{e(0),p.current=0,a(!1),d(v=>v+1)},className:"mt-4 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-800",children:" Restart Game"})]}):J.jsx("canvas",{ref:l,width:600,height:400,className:"border border-gray-400 rounded shadow"},o),J.jsx(l0,{to:"/",className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-800 transition",children:"Go Back Home"})]})}function X5({checked:l,onCheckedChange:t}){return J.jsx("button",{type:"button",role:"switch","aria-checked":l,onClick:()=>t(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l?"bg-blue-600":"bg-gray-300"}`,children:J.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})}function G5(){const[l,t]=Dt.useState(!1);return Dt.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]),J.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 transition-colors",children:[J.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:" Settings"}),J.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:J.jsxs("div",{className:"rounded-2xl shadow p-4 bg-white dark:bg-gray-800 transition-colors",children:[J.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Appearance"}),J.jsxs("div",{className:"flex items-center justify-between mt-3",children:[J.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Dark Mode"}),J.jsx(X5,{checked:l,onCheckedChange:t})]})]})})]})}function mf(...l){return l.filter(Boolean).join(" ")}function q5({className:l,...t}){return J.jsx("div",{className:mf("rounded-2xl border bg-white shadow-md dark:bg-gray-100 dark:border-gray-800",l),...t})}function W5({className:l,...t}){return J.jsx("div",{className:mf("p-4 border-b dark:border-gray-800",l),...t})}function Z5({className:l,...t}){return J.jsx("h3",{className:mf("text-lg font-semibold leading-none tracking-tight",l),...t})}function K5({className:l,...t}){return J.jsx("div",{className:mf("p-4",l),...t})}const Q5=[{id:1,name:"New File",mac:"N",win:"Ctrl+N"},{id:2,name:"Open Settings",mac:",",win:"Ctrl+,"},{id:3,name:"Copy",mac:"C",win:"Ctrl+C"},{id:4,name:"Paste",mac:"V",win:"Ctrl+V"},{id:5,name:"Group",mac:"G",win:"Ctrl+G"},{id:6,name:"Ungroup",mac:"U",win:"Ctrl+Shift+U"}];function J5(){const[l,t]=Dt.useState(""),[e,n]=Dt.useState("win");Dt.useEffect(()=>{navigator.platform.toLowerCase().includes("mac")&&n("mac")},[]);const a=Q5.filter(o=>o.name.toLowerCase().includes(l.toLowerCase()));return J.jsx("div",{className:"flex justify-center items-start pt-20",children:J.jsxs(q5,{className:"w-full max-w-lg shadow-xl rounded-2xl",children:[J.jsx(W5,{children:J.jsx(Z5,{className:"text-xl",children:"Command Palette"})}),J.jsxs(K5,{children:[J.jsx("input",{placeholder:"Type a command...",value:l,onChange:o=>t(o.target.value),className:"mb-4"}),J.jsxs("ul",{className:"space-y-2",children:[a.map(o=>J.jsxs("li",{className:"flex justify-between items-center p-2 rounded-lg hover:bg-gray-100 cursor-pointer",children:[J.jsx("span",{children:o.name}),J.jsx("span",{className:"text-sm text-gray-500",children:e==="mac"?o.mac:o.win})]},o.id)),a.length===0&&J.jsx("li",{className:"text-gray-500 text-sm",children:"No results found"})]})]})]})})}function $5(){return J.jsx($2,{basename:"/",children:J.jsxs(M2,{children:[J.jsx(du,{path:"/",element:J.jsx(H5,{})}),J.jsx(du,{path:"/setting",element:J.jsx(G5,{})}),J.jsx(du,{path:"/command-palette",element:J.jsx(J5,{})}),J.jsx(du,{path:"*",element:J.jsx(Y5,{})})]})})}function t3(){return J.jsx($5,{})}Ix.createRoot(document.getElementById("fateboard")).render(J.jsx(Dt.StrictMode,{children:J.jsx(t3,{})}));
